{"pages":[{"title":"About","date":"2016-10-24T02:24:00.000Z","path":"about/index.html","text":"ä»‹ç»ä¸€ä¸ªä¸€ç›´ä»¥æ¥æ¯”è¾ƒèœçš„ç¨‹åºå‘˜!ä»€ä¹ˆéƒ½æ‡‚ä¸€ç‚¹ï¼Œä½†è²Œä¼¼æ²¡ä¸€æ ·ç²¾é€šçš„ï¼o(â•¯â–¡â•°)o å…³æ³¨ITæŠ€æœ¯ï¼Œåˆ†äº«å­¦åˆ°çš„çŸ¥è¯†ï¼Œåˆ†äº«ç”Ÿæ´»çš„ä¹è¶£ã€‚ æ­¤åšå®¢å†…å®¹å› åšä¸»è§è¯†ã€è¡¨è¾¾æªè¾ã€æŸ¥é˜…èµ„æ–™æœ‰é™ã€èµ„æ–™æ—¶æ•ˆæ€§å˜åŒ–ç­‰å› ç´ ï¼Œå†…å®¹ä¸èƒ½ä¿è¯å®Œå…¨æ­£ç¡®æˆ–é€‚åˆè¯»è€…ä½¿ç”¨ï¼ï¼ï¼ æ­¤åšå®¢ä¹ƒå­¦ä¹ ç¬”è®°ï¼Œä¸»è¦ç›®çš„æ˜¯æ–¹ä¾¿è‡ªå·±æ£€é˜…ã€å·©å›ºå­¦ä¹ æ—¶çš„çŸ¥è¯†æ•´ç†ï¼Œå…¶ä¸­é”™æ¼æ®‹ç¼ºä¸å¯é¿å…ï¼Œå¦‚æœè¯»è€…æœ‰ä»»ä½•æ–°å‘ç°çƒ¦è¯·ç•™è¨€ï¼Œäº’å‹‰å­¦ä¹ è€Œè¿›æ­¥ã€‚ å…³äºç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»è¦æƒ³æˆä¸ºä¸€åè¿˜è¡Œçš„ç¨‹åºå‘˜ï¼Œéœ€è¦å­¦çš„ä¸œè¥¿çœŸçš„ä¸å°‘ã€‚æŠ€æœ¯æ›´æ–°è¿­ä»£çš„é€Ÿåº¦éå¸¸ä¹‹å¿«ï¼Œæ€ä¹ˆæ‰èƒ½ä¸åœ¨ä¿¡æ¯æµªæ½®ä¸­è½ä¼ï¼Œæˆ‘è§‰å¾—è¿˜æ˜¯è¦æ³¨é‡åŸºç¡€ï¼Œä¸‹ç›˜åŠ³äº†ï¼Œå­¦ä»€ä¹ˆéƒ½ä¸è´¹åŠ²ã€‚è€ŒåŸºç¡€æœ‰å“ªäº›å‘¢ï¼Ÿ è®¡ç®—æœºç»„æˆåŸç† æ“ä½œç³»ç»ŸåŸç† æ•°æ®ç»“æ„ ç®—æ³• è®¾è®¡æ¨¡å¼ ç½‘ç»œåŸç† åº•å±‚åŸç†æ€§çš„ä¸œè¥¿çš„å˜åŒ–é€Ÿåº¦æ˜¯è¿œè¿œæ…¢äºåº”ç”¨å±‚çš„æŠ€æœ¯è¿­ä»£çš„ï¼Œè€Œåº”ç”¨å±‚çš„æŠ€æœ¯å¾ˆå¤šéƒ½æ˜¯ä¾èµ–äºè¿™äº›åº•å±‚æŠ€æœ¯çš„ã€‚æ‰€ä»¥ï¼Œå¤§å®¶è¿˜æ˜¯æŠŠè¿™äº›ä¸œè¥¿éƒ½ç‰¢è®°äºå¿ƒå§ï¼ å…³äºæ­¤åšå®¢çš„æ­å»ºæˆ‘å¯¹è‡ªå·±å†™åšå®¢çš„éœ€æ±‚ï¼š ä½¿ç”¨æ–¹ä¾¿ï¼ŒæŸ¥é˜…æ–¹ä¾¿ï¼› å®¹æ˜“æ„å»ºã€å‘å¸ƒã€åˆ†äº«ï¼› åšå®¢å±•ç¤ºèƒ½æ”¯æŒæ ‘çŠ¶ç»“æ„ï¼Œæ–¹ä¾¿çŸ¥è¯†ä½“ç³»çš„å½’ç±»ï¼› æ–‡ç« æ”¯æŒæ˜¾ç¤ºç›®å½•ï¼› æ”¯æŒè¯„è®ºã€ç»Ÿè®¡ç­‰åŠŸèƒ½ æœ€ç»ˆé€‰æ‹©ä½¿ç”¨hexoæ„å»ºï¼Œä¸»é¢˜æ¥æºäºhttps://github.com/zthxxx/hexo-theme-Wikittenã€‚è¿™å¥—ä¸»é¢˜åŸºæœ¬æ»¡è¶³äº†æˆ‘çš„éœ€æ±‚ï¼Œåœ¨æ­¤æ„Ÿè°¢ä½œè€…ã€‚ ä¸€äº›å°ä¸œè¥¿ ActionScript3ç‰ˆæœ¬çš„Flappy Bird Alfredè‚¡ç¥¨å°åŠ©æ‰‹ ï¼š ç”¨äºå¿«é€ŸæŸ¥è¯¢å®æ—¶è‚¡ä»· ç²¾é€‰çš„Alfredçš„workflow Javaè®¾è®¡æ¨¡å¼ä»£ç æ•´ç† ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æˆ‘ï¼š è±†ç“£ Github çŸ¥ä¹ stackoverflow åŠ›æ‰£"},{"title":"Categories","date":"2022-03-08T02:25:29.755Z","path":"categories/index.html","text":""},{"title":"","date":"2022-03-08T02:25:29.614Z","path":"/404.html","text":"Error 404 Not Found æ‚¨æ‰€è®¿é—®çš„åœ°å€æ— æ³•æ‰¾åˆ°æˆ–è€…å·²ç»è¢«åˆ é™¤äº†ï¼Œ å¦‚æœæ‚¨æ˜¯ä»æœç´¢ç»“æœç‚¹å‡»è¿›æ¥çœ‹åˆ°çš„ 404ï¼Œå¯ä»¥å…ˆå°è¯•ä½¿ç”¨é¡µé¢ å³ä¸Šæ–¹çš„æœç´¢æ–‡ç« ã€‚ æ¥éƒ½æ¥äº†ï¼Œå°±å…ˆé€›é€›å˜›~~ æ‚¨å¯ä»¥è®¿é—® æœ¬ç«™ä¸»é¡µ ï¼Œæˆ–è€…è”ç³»æˆ‘ï¼Œåæ§½ä¸‹é—®é¢˜çš„è¯¦ç»†æƒ…å†µï¼Œ ä¹Ÿå¯ä»¥é€šè¿‡é¡µé¢ä¸Šæ–¹çš„ åˆ†ç±» æˆ– æ ‡ç­¾ æ¥æŸ¥çœ‹æœ¬ç«™å·²æœ‰çš„ä¸€äº› tagsã€‚"},{"title":"Tags","date":"2022-03-08T02:25:29.756Z","path":"tags/index.html","text":""}],"posts":[{"title":"é¸¿è’™æ„å»ºflutteré¡¹ç›®","date":"2024-01-26T13:01:08.846Z","path":"wiki/æŠ€æœ¯å¼€å‘/HuaWei/é¸¿è’™æ„å»ºflutteré¡¹ç›®/","text":"åŸºç¡€ç¯å¢ƒ12345678910111213141516171819sudo apt install python3sudo apt install makesudo apt install pkg-configsudo apt install ninja-buildgit clone https://chromium.googlesource.com/chromium/tools/depot_tools.gitexport PATH=&quot;$PATH:/home/ubuntu/work/depot_tools&quot;# nodejsexport NODE_HOME=/home/uname/HuaWei/flutter/node-v14.19.1-mac-x64export PATH=$NODE_HOME/bin:$PATH# gradleexport PATH=/Users/uname/HuaWei/flutter/gradle-7.1/bin:$PATH æ„å»ºflutter_engine cloneæºç https://gitee.com/openharmony-sig/flutter_engine æ„å»ºflutter_flutter å‚è€ƒ Flutter Love é¸¿è’™ https://gitee.com/openharmony-sig/flutter_engine https://gitee.com/openharmony-sig/flutter_flutter æ¯æ—¥æ„å»ºåœ°å€","tags":[{"name":"HuaWei harmonyOS","slug":"HuaWei-harmonyOS","permalink":"http://airshu.github.io/tags/HuaWei-harmonyOS/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"HuaWei","slug":"æŠ€æœ¯å¼€å‘/HuaWei","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/HuaWei/"}]},{"title":"Flutteré™æ€ä»£ç æ£€æµ‹","date":"2024-01-26T13:01:08.845Z","path":"wiki/Flutter/æœªåˆ†ç±»/Flutteré™æ€ä»£ç æ£€æµ‹/","text":"ä»£ç æ£€æµ‹æ˜¯è§„èŒƒå†™æ³•ï¼Œæé«˜è´¨é‡çš„ä¸€ç§é‡è¦æ–¹æ¡ˆï¼Œå‡ ä¹æ‰€æœ‰çš„ä¸»æµè¯­è¨€éƒ½æœ‰ç›¸å…³æ–¹æ¡ˆã€‚åœ¨Flutterå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨IDEè‡ªå¸¦çš„Inspect CodeåŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œdart analyze å®˜æ–¹æ–¹æ¡ˆFlutterå®˜æ–¹æä¾›analyzeræ¥æ£€æµ‹ä»£ç  ä½¿ç”¨æ­¥éª¤ pubspec.yamlé…ç½® 123456dev_dependencies: lint: # dart lint flutter_lints: ^1.0.0 # flutter ä»£ç æ£€æµ‹å·¥å…· æ–°å»ºanalysis_options.yamlé…ç½®æ–‡ä»¶ï¼Œæ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ã€‚ 1234567891011121314151617181920212223242526272829# ä½¿ç”¨ include: url æ¥ä»æŒ‡å®šçš„ URL å¼•å…¥é€‰é¡¹ â€”â€” åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸æ˜¯å¼•å…¥æ¥è‡ª lints åŒ…ä¸­çš„æ–‡ä»¶ã€‚ç”±äº YAML ä¸æ”¯æŒå¤šä¸ªé‡å¤çš„ keyï¼Œä½ åªèƒ½å¼•å…¥æœ€å¤šä¸€ä¸ªæ–‡ä»¶# å¸¸ç”¨çš„#include: package:flutter_lints/flutter.yaml#include: package:pedantic/analysis_options.1.9.0.yamlinclude: package:lints/recommended.yaml# ä½¿ç”¨ analyzer: å…¥å£æ¥è‡ªå®šä¹‰é™æ€åˆ†æï¼š å¯ç”¨æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥, æ’é™¤æ–‡ä»¶, å¿½ç•¥ç‰¹å®šè§„åˆ™, æ”¹å˜è§„åˆ™çš„è­¦å‘Šç­‰çº§, or å¼€å¯å®éªŒæ€§åŠŸèƒ½analyzer: exclude: # ä¸åˆ†æçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ - [build/**] - lib/*.g.dart language: # å¯ç”¨æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥ strict-casts: true # ç±»å‹æ¨ç†å¼•æ“ä¸å†å°† dynamic è¿›è¡Œéšå¼ç±»å‹è½¬æ¢ strict-inference: true # ç¡®ä¿å½“ç±»å‹æ¨ç†å¼•æ“æ— æ³•ç¡®å®šé™æ€ç±»å‹æ—¶ï¼Œä¸å†é€‰æ‹©dynamic ç±»å‹ strict-raw-types: true # ç¡®ä¿å½“ç±»å‹æ¨ç†å¼•æ“ï¼Œç”±äºçœç•¥ç±»å‹å‚æ•°è€Œæ— æ³•ç¡®å®šé™æ€ç±»å‹æ—¶ï¼Œä¸å†é€‰æ‹©dynamic ç±»å‹ errors: # è®¾ç½®ä¸¥é‡ç¨‹åº¦ invalide_assignment: warning missing_return: error dead_code: info strong-mode: # å¼ºåˆ¶æ¨¡å¼ implicit-casts: false # å¼ºåˆ¶ä½¿ç”¨åºŸå¼ƒçš„é€‰é¡¹# ä½¿ç”¨ linter: å…¥å£æ¥é…ç½® linter è§„åˆ™ï¼Œå¯ä»¥å•ç‹¬å¯ç”¨æˆ–åœç”¨æŸæ¡è§„åˆ™linter: rules: - cancel_subscriptions æ‰§è¡Œå‘½ä»¤ 123# åˆ†æé¡¹ç›®å‘½ä»¤# åˆ†æä»æ ¹ç›®å½•å¼€å§‹éå†ï¼Œå‘ç°analysis_options.yamlé…ç½®æ–‡ä»¶ï¼Œåˆ™æ‰§è¡Œè‡ªå®šä¹‰é™æ€ä»£ç åˆ†æï¼Œè‹¥æ²¡æœ‰åˆ™é»˜è®¤é…ç½®(https://github.com/flutter/flutter/blob/master/analysis_options.yaml)dart analyze è‡ªå®šä¹‰è§„åˆ™123456789101112131415161718192021222324252627282930313233343536373839include: package:flutter_lints/flutter.yaml# ä½¿ç”¨ analyzer: å…¥å£æ¥è‡ªå®šä¹‰é™æ€åˆ†æï¼š å¯ç”¨æ›´ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥, æ’é™¤æ–‡ä»¶, å¿½ç•¥ç‰¹å®šè§„åˆ™, æ”¹å˜è§„åˆ™çš„è­¦å‘Šç­‰çº§, or å¼€å¯å®éªŒæ€§åŠŸèƒ½analyzer: exclude: # ä¸åˆ†æçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ - [build/**] - lib/*.g.dart - build/** # æ’é™¤æ•´ä¸ªbuildæ–‡ä»¶å¤¹ language: strict-casts: true strict-raw-types: true errors: # è®¾ç½®ä¸¥é‡ç¨‹åº¦ åˆ†ä¸ºignoreã€infoã€warningã€error always_declare_return_types: warning # æ–¹æ³•å¿…é¡»å£°æ˜è¿”å›ç±»å‹ null_closures: warning # ä¸è¦ç»™é—­åŒ…çš„å‚æ•°ä¼ null invalide_assignment: warning missing_return: error # è¿”å›å€¼ç¼ºå¤± unnecessary_statements: warning # æ— æ•ˆçš„è¡¨è¾¾å¼ prefer_typing_uninitialized_variables: warning # æœªåˆå§‹åŒ–çš„å˜é‡ dead_code: info prefer_interpolation_to_compose_strings: ignore # å­—ç¬¦ä¸²çš„å†™æ³•ï¼Œä¸è¦ä½¿ç”¨+æ‹¼æ¥ï¼Œä½¿ç”¨å¼•å· use_key_in_widget_constructors: error # Widgetçš„æ„é€ æ–¹æ³•ä¸­é»˜è®¤éœ€è¦å¸¦ä¸Škey control_flow_in_finally: error #ä¸è¦åœ¨finallyä¸­ä½¿ç”¨æ§åˆ¶æµï¼ˆbreakã€continueã€returnï¼‰ï¼Œå¯èƒ½ä¼šé€ æˆéš¾ä»¥å‘ç°çš„é—®é¢˜ no_logic_in_create_state: error # ä¸è¦åœ¨createStateæ–¹æ³•ä¸­ä½¿ç”¨ä»»ä½•é€»è¾‘ hash_and_equals: error # é‡å†™==çš„åŒæ—¶è¦é‡å†™hashCode unrelated_type_equality_checks: error # ä¸ç›¸å…³çš„ç±»å‹ä¸è¦è¿›è¡Œæ¯”è¾ƒ always_use_package_imports: error # ä½¿ç”¨åŒ…å¯¼å…¥ avoid_print: error # ä¸ä½¿ç”¨printï¼Œå¯ä»¥ç”¨debugPrintã€æˆ–è€…è‡ªå·±å°è£…çš„log use_build_context_synchronously: error # ä¸è¦åœ¨å¼‚æ­¥æ“ä½œåä½¿ç”¨contextï¼Œä½¿ç”¨çš„è¯éœ€è¦æ·»åŠ mountedåˆ¤æ–­ strong-mode: implicit-casts: false # ç¦æ­¢éšå¼è½¬æ¢ï¼Œå¯èƒ½ä¼šäº§ç”ŸNull checkå¼‚å¸¸ï¼Œé€šå¸¸åœ¨Map&lt;String, dynamic&gt;å–å€¼ã€èŒƒå‹æ–¹æ³•è¿”å›å€¼çš„è½¬æ¢æ—¶æ˜“å‡ºç°# ä½¿ç”¨ linter: å…¥å£æ¥é…ç½® linter è§„åˆ™linter: rules: cancel_subscriptions: true # æ–°å¢è§„èŒƒ avoid_shadowing_type_parameters: false # åˆ é™¤è§„èŒƒ ä½¿ç”¨sonarqubehttps://betterprogramming.pub/flutter-and-sonarqube-for-static-code-analysis-51368a85c51c å®‰è£…sonarqubeåå°æœåŠ¡æœ¬åœ°å®‰è£…sonar-scannerå·¥å…·æœ¬åœ°é¡¹ç›®é…ç½®å‚è€ƒ è‡ªå®šä¹‰é™æ€åˆ†æ å®˜æ–¹é»˜è®¤è§„åˆ™ Linter for Dart flutter_lints","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"ä¸JSé€šè®¯","date":"2024-01-26T13:01:08.845Z","path":"wiki/Flutter/æœªåˆ†ç±»/ä¸JSé€šè®¯/","text":"åŸç”Ÿä¾§æœ‰è®¸å¤šåº“å¯ä»¥å®ç°ä¸JSç›´æ¥é€šè®¯ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨webviewå®¹å™¨ã€‚ V8ã€JSCoreã€Hermesã€QuickJSï¼Œhybridå¼€å‘JSå¼•æ“æ€ä¹ˆé€‰","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"å†…å­˜åˆ†æ","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/å†…å­˜åˆ†æ/","text":"https://github.com/bladeofgod/memory_detector_of_kit https://github.com/dart-lang/leak_tracker https://docs.flutter.dev/tools/devtools/memory#basic-memory-concepts Flutterä¸Šçš„å†…å­˜æ³„æ¼ç›‘æ§ Flutterå†…å­˜æ³„æ¼æ£€æµ‹ Flutter: Donâ€™t Fear the Garbage Collector https://github.com/liujiakuoyx/leak_detector&#x2F;blob&#x2F;main&#x2F;README_zh-CN.md","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"flutter_redux","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/å¼€æºåº“/flutter_redux/","text":"ä½¿ç”¨ Redux çš„å¥½å¤„æ˜¯ï¼š å…±äº«çŠ¶æ€ å•ä¸€æ•°æ® Redux ä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š Action ç”¨äºå®šä¹‰æ•°æ®å˜åŒ–çš„è¡Œä¸º Reducer ç”¨äºæ ¹æ®Actionæ¥äº§ç”Ÿæ–°çš„çŠ¶æ€ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªæ–¹æ³• Store ç”¨äºå­˜å‚¨å’Œç®¡ç†state ä¸€èˆ¬æµç¨‹ï¼š Widget ç»‘å®šäº† Store ä¸­çš„ state æ•°æ®ã€‚ Widget é€šè¿‡ Action å‘å¸ƒä¸€ä¸ªåŠ¨ä½œã€‚ Reducer æ ¹æ® Action æ›´æ–° stateã€‚ æ›´æ–° Store ä¸­ state ç»‘å®šçš„ Widgetã€‚ å‚è€ƒ å®˜ç½‘ Reduxã€ä¸»é¢˜ã€å›½é™…åŒ– title: flutter_reduxtoc: truetags: Flutter","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"èµ„æ–™æ”¶é›†","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/åŠ¨æ€åŒ–/èµ„æ–™æ”¶é›†/","text":"https://github.com/openkraken/krakenï¼šé˜¿é‡Œå‡ºå“ï¼Œå·²ç»ä¸ç»´æŠ¤ https://github.com/ymm-tech/threshï¼šåŸºäºJSçš„FlutteråŠ¨æ€åŒ–æ–¹æ¡ˆï¼Œå·²ä¸ç»´æŠ¤ https://github.com/mxflutter/mxflutterï¼šè…¾è®¯å‡ºå“ï¼ŒMXFlutter æ˜¯ä¸€å¥—ä½¿ç”¨ TypeScript&#x2F;JavaScript æ¥å¼€å‘ Flutter åº”ç”¨çš„æ¡†æ¶ã€‚å·²ä¸ç»´æŠ¤ https://hydro-sdk.io/ï¼šä½¿ç”¨JSç›¸å…³æŠ€æœ¯çš„åŠ¨æ€åŒ–æŠ€æœ¯ï¼Œå·²ä¸ç»´æŠ¤ https://github.com/ChimeraFlutter/Chimera-Flutter-Code-Pushï¼šå·²ä¸ç»´æŠ¤ï¼Œè²Œä¼¼å¾ˆå¼ºå¤§ã€‚åªéœ€è¦åŸºäºdart https://github.com/openwebf/webfï¼šKrakenæ›¿ä»£å“ https://github.com/wuba/FairPushyï¼š58åŒåŸçš„å¼€æºåŠ¨æ€åŒ–æ–¹æ¡ˆï¼Œç›®å‰å¸‚é¢ä¸Šæ¯”è¾ƒå®Œå–„çš„å¼€æºæ–¹æ¡ˆã€‚ FlutteråŠ¨æ€åŒ–æ–¹æ¡ˆ https://alibaba.github.io/LuaViewSDK/index.html UC FlutteræŠ€æœ¯æ²™é¾™åˆ†äº«ï¼šAion - æ‹¥æŠ± Flutter ç”Ÿæ€çš„åŠ¨æ€åŒ–æ–¹æ¡ˆ ç¾å›¢å¤–å–FlutteråŠ¨æ€åŒ–å®è·µ Flutter åŠ¨æ€åŒ–åœ¨æœ€å³ App ä¸­çš„å®è·µ Definitional Interpreters for Higher-Order Programming Languages Dynamic Interpretation for Dynamic Scripting Languages https://hetu.dev/docs/zh-Hans/ï¼šæ²³å›¾ï¼Œä¸“ä¸ºFlutteræ‰“é€ çš„è½»é‡å‹åµŒå…¥å¼è„šæœ¬è¯­è¨€ https://github.com/peiffer-innovations/json_dynamic_widgetï¼šåŠ¨æ€åŠ è½½jsonæ–‡ä»¶çš„UI","tags":[{"name":"Flutter åŠ¨æ€åŒ–","slug":"Flutter-åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/tags/Flutter-%E5%8A%A8%E6%80%81%E5%8C%96/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"åŠ¨æ€åŒ–","slug":"Flutter/åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/categories/Flutter/%E5%8A%A8%E6%80%81%E5%8C%96/"}]},{"title":"Flutterä»£ç è§„èŒƒ","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/Flutterä»£ç è§„èŒƒ/","text":"é¡¹ç›®ä¸­é…ç½®ä»£ç è§„èŒƒå‚è€ƒ Flutteré™æ€ä»£ç æ£€æµ‹","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"Kraken","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/åŠ¨æ€åŒ–/Kraken/","text":"é˜¿é‡Œå‡ºå“ ä½¿ç”¨å‰ç«¯æŠ€æœ¯å¼€å‘ï¼ŒFlutteræ¸²æŸ“ã€‚ å› ä¸ºç§ç§åŸå› ï¼ŒKrakenä¸åœ¨ç»´æŠ¤ï¼Œopenwebfæ˜¯å…¶ç»§ä»»è€…ã€‚å¦‚ä½•çœ‹å¾…é˜¿é‡ŒåŒ—æµ·Krakené¡¹ç›®å³å°†å¼ƒå‘ï¼Ÿ æ·±å…¥è§£æåŸºäº Flutter çš„ Web æ¸²æŸ“å¼•æ“ã€ŒåŒ—æµ· Kraken ã€æŠ€æœ¯åŸç† å®˜æ–¹æ–‡æ¡£ https://github.com/openkraken/kraken","tags":[{"name":"Flutter åŠ¨æ€åŒ–","slug":"Flutter-åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/tags/Flutter-%E5%8A%A8%E6%80%81%E5%8C%96/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"åŠ¨æ€åŒ–","slug":"Flutter/åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/categories/Flutter/%E5%8A%A8%E6%80%81%E5%8C%96/"}]},{"title":"dart_evalå’Œflutter_eval","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/åŠ¨æ€åŒ–/dart_evalå’Œflutter_eval/","text":"dart_eval æ˜¯ä¸€ç§åŸºäº Dart AOT åŠ¨æ€æ‰§è¡Œ Dart ä»£ç çš„æŠ€æœ¯ï¼Œèƒ½å¤Ÿå®ç°åŠ¨æ€åŒ–ï¼ˆCodePushï¼‰ï¼Œæ”¯æŒ Flutterã€‚å®ƒåŒ…å«ç¼–è¯‘å™¨å’Œè§£é‡Šå™¨ï¼Œå‡ä½¿ç”¨ Dart è¯­è¨€ç¼–å†™ï¼Œå¹¶æ”¯æŒå¯æ‰©å±•ï¼ˆå¦‚æ‰©å±• Flutter æ”¯æŒï¼‰ã€‚ dart_eval ç”±ä¸¤ä¸ª Repo æ„æˆï¼š dart_evalï¼šæä¾› dart ä»£ç åŠ¨æ€æ‰§è¡Œèƒ½åŠ›ã€‚https://github.com/ethanblake4/dart_eval flutter_evalï¼šåŸºäº dart_evalï¼Œæ‰©å±• Flutter ä»£ç åŠ¨æ€åŒ–æ‰§è¡Œèƒ½åŠ›ã€‚https://github.com/ethanblake4/flutter_eval é¢„åŸ‹ä½ç½® å®‰è£…å‘½ä»¤ï¼šdart pub global activate dart_evalï¼Œå‘½ä»¤å®‰è£…åœ¨$HOME&#x2F;.pub-cache&#x2F;bin&#x2F;ç›®å½• åŠ¨æ€ç”Ÿæˆevcæ–‡ä»¶ï¼Œdart_eval compile -o version_xxx.evcï¼Œä¸Šä¼ æœåŠ¡å™¨ å‚è€ƒã€ŠDart evalï¼šCompiler ç±»ã€‹ã€ã€ŠDart Analyzerï¼šDeclaration å®ä½“ã€‹ã€ŠDart evalï¼šBridgeDeclaration å®ä½“ç±»ã€‹ã€ŠDart evalï¼šDeclarationOrBridge å®ä½“ç±»ã€‹ã€ŠDart evalï¼šDartCompilationUnit å®ä½“ç±»ã€‹ã€ŠDart evalï¼šLibrary å®ä½“ç±»ã€‹ã€ŠDart import è¯­æ³•ã€‹ã€ŠDart Analyzerï¼šImportDirective å®ä½“ã€‹ã€ŠDart evalï¼šexportGraph æ¦‚å¿µã€‹ã€ŠDart evalï¼šProgram ç±»ã€‹ã€ŠDart evalï¼šcompile ç³»åˆ—æ–¹æ³•çš„è°ƒç”¨é“¾ã€‹ã€ŠDart evalï¼šCompiler populateLookupTablesForDeclarationã€‹ã€ŠDart Analyzerï¼šTopLevelVariableDeclarationã€‹ã€ŠDart evalï¼šcompileIdentifierAsReferenceã€‹ã€ŠDart evalï¼šCompilerContext ç¼–è¯‘å™¨ä¸Šä¸‹æ–‡ã€‹ã€ŠDart evalï¼šcompileIdentifierã€‹ã€ŠDart Analyzerï¼šIdentifierã€‹","tags":[{"name":"Flutter åŠ¨æ€åŒ–","slug":"Flutter-åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/tags/Flutter-%E5%8A%A8%E6%80%81%E5%8C%96/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"åŠ¨æ€åŒ–","slug":"Flutter/åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/categories/Flutter/%E5%8A%A8%E6%80%81%E5%8C%96/"}]},{"title":"openwebf","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/åŠ¨æ€åŒ–/openwebf/","text":"Krakençš„æ›¿ä»£å“ Webç«¯å¼€å‘æŒ‡å¯¼å¼€å‘æµç¨‹ ä½¿ç”¨Vueã€Reactç­‰è¿›è¡Œå¼€å‘ å®‰è£…openwebf cliï¼Œhttps://github.com/openwebf/cliï¼Œè¿è¡Œå‘½ä»¤webf http://localhost:8080/å¯ä»¥è¿›è¡Œç®€å•è°ƒè¯• å‚è€ƒ å®˜æ–¹æ–‡æ¡£ https://github.com/openwebf/webf","tags":[{"name":"Flutter åŠ¨æ€åŒ–","slug":"Flutter-åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/tags/Flutter-%E5%8A%A8%E6%80%81%E5%8C%96/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"åŠ¨æ€åŒ–","slug":"Flutter/åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/categories/Flutter/%E5%8A%A8%E6%80%81%E5%8C%96/"}]},{"title":"fair","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/åŠ¨æ€åŒ–/fair/","text":"58åŒåŸçš„å¼€æºåŠ¨æ€åŒ–æ–¹æ¡ˆï¼Œç›®å‰å¸‚é¢ä¸Šæ¯”è¾ƒå®Œå–„çš„å¼€æºæ–¹æ¡ˆã€‚ å°†buildæ–¹æ³•å†…çš„ä»£ç ä½¿ç”¨dart2dslè½¬åŒ–æˆjsonï¼Œå°†ébuildæ–¹æ³•é‡Œçš„ä»£ç ä½¿ç”¨dart2jsè½¬åŒ–æˆjsã€‚ ç¯å¢ƒé…ç½®FlatBufferså°†jsè½¬åŒ–æˆbinæ–‡ä»¶ï¼Œå¥½å¤„æ˜¯ä¸ç”¨ååºåˆ—åŒ–ï¼Œå¤§å¤§æå‡Fairè§£æã€åŠ è½½èµ„æºçš„é€Ÿåº¦ faircliç”¨æ¥å¿«æ·åˆ›å»ºåŠ¨æ€åŒ–å·¥ç¨‹å’Œè½½ä½“å·¥ç¨‹ 1234567# å®‰è£… Faircli å‘½ä»¤è¡Œå·¥å…·dart pub global activate faircli# åˆ›å»ºåŠ¨æ€åŒ–å·¥ç¨‹faircli create -n dynamic_project_name# åˆ›å»ºè½½ä½“å·¥ç¨‹faircli create -k carrier -n carrier_project_name å¼€å‘æµç¨‹ pubspec.yamlä¸­é…ç½®ä¾èµ– å…¥å£æ·»åŠ FairApp 1234567891011121314151617void main() &#123; // runApp(MyApp()); WidgetsFlutterBinding.ensureInitialized(); FairApp.runApplication( _getApp(), plugins: &#123;&#125;, );&#125;dynamic _getApp() =&gt; FairApp( modules: &#123;&#125;, delegate: &#123;&#125;, child: MyApp(),); ä½¿ç”¨ @FairPatch() æ³¨è§£æ ‡è®°éœ€è¦åŠ¨æ€åŒ–çš„ Widget æ‰§è¡Œ build_runner å‘½ä»¤ï¼Œç¼–è¯‘ç”Ÿæˆä¸‹å‘äº§ç‰© ä½¿ç”¨ FairWidget åŠ è½½ bundle èµ„æº æ•™ç¨‹FairBindingçš„ä½œç”¨åœ¨æŸä¸ª Widget ä¸­å¼•ç”¨äº†å¦ä¸€ä¸ªæœ¬åœ°è‡ªå®šä¹‰çš„ Widgetã€‚å¯¹äºè¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ @FairBinding æ³¨è§£ï¼Œä¸ºæœ¬åœ° Widget ç”Ÿæˆæ˜ å°„å…³ç³»ã€‚ FairWellæ³¨è§£å’ŒFairDelegateé—®é¢˜ å¦‚ä½•è¿è¡Œjsä»£ç çš„ï¼Ÿ å‚è€ƒ https://fair.58.com/zh/ Flutter çƒ­æ›´æ–° Fair çœŸ.ä½“éªŒ","tags":[{"name":"Flutter åŠ¨æ€åŒ–","slug":"Flutter-åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/tags/Flutter-%E5%8A%A8%E6%80%81%E5%8C%96/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"åŠ¨æ€åŒ–","slug":"Flutter/åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/categories/Flutter/%E5%8A%A8%E6%80%81%E5%8C%96/"}]},{"title":"FlutteråŒ…ä½“ç§¯ä¼˜åŒ–","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/æœªåˆ†ç±»/FlutteråŒ…ä½“ç§¯ä¼˜åŒ–/","text":"åŒ…çš„æ„æˆ ä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š soåº“ï¼ŒåŒ…å«ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œflutteræ‰“åŒ…åçš„libapp.soç­‰ assetsæ–‡ä»¶å¤¹ä¸­çš„èµ„æºæ–‡ä»¶ dexæ–‡ä»¶ å­—ä½“æ–‡ä»¶ resources.arscæ–‡ä»¶ é€šè¿‡DevToolå·¥å…·åˆ†æåŒ…ä½“ç§¯ç”ŸæˆåŒ…ä½“ç§¯åˆ†ææ–‡ä»¶12345flutter build &lt;your target platform&gt; --analyze-size --target-platform=android-arm64A summary of your APK analysis can be found at: build/apk-code-size-analysis_01.json åˆ†æ ä¼˜åŒ–æªæ–½ å›¾ç‰‡å‹ç¼©ï¼Œå¯ä»¥ä½¿ç”¨tinypngå·¥å…·è¿›è¡Œå‹ç¼© ä½¿ç”¨ç›¸å…³ç¼–è¯‘å‚æ•° dwarf_stack_traceè¡¨ç¤ºåœ¨ç”Ÿæˆçš„åŠ¨æ€åº“æ–‡ä»¶ä¸­ï¼Œä¸ä½¿ç”¨å †æ ˆè·Ÿè¸ªç¬¦å· obfuscateè¡¨ç¤ºæ··æ·†ï¼Œé€šè¿‡å‡å°‘å˜é‡å&#x2F;æ–¹æ³•åçš„æ–¹å¼å‡å°ä»£ç ä½“ç§¯ 12345678//ç¼–è¯‘releaseåŒ…å¹¶æ‰“å°sizeflutter build aot --release --extra-gen-snapshot-options=--print-snapshot-sizes//--dwarf_stack_tracesï¼Œ --&gt;å‡å°‘6.2%å¤§å°flutter build aot --release --extra-gen-snapshot-options=&quot;--dwarf_stack_traces,--print-snapshot-sizes&quot;//--obsfuscationï¼Œ --&gt;å‡å°‘2.5%å¤§å°flutter build aot --release --extra-gen-snapshot-options=&quot;--dwarf_stack_traces,--print-snapshot-sizes,--obfuscate&quot;//æ€»å¤§å°å‡å°‘8.7% iOSä¸­ï¼Œåˆ é™¤dSYMç¬¦å·è¡¨ä¿¡æ¯æ–‡ä»¶ 12RunCommand xcrun dsymutil -o &quot;$&#123;build_dir&#125;/aot/App.dSYM&quot; &quot;$&#123;app_framework&#125;/App&quot;RunCommand xcrun strip -x -S &quot;$&#123;derived_dir&#125;/App.framework/App&quot; æ’é™¤æ²¡æœ‰ä½¿ç”¨çš„soåº“ gradleæ‰“åŒ…apkæ—¶æ’é™¤æŒ‡å®šçš„soæ–‡ä»¶ å‚è€ƒ Flutterç˜¦èº«å¤§ä½œæˆ˜ https://flutter.cn/docs/tools/devtools/app-size FlutteråŒ…å¤§å°æ²»ç†ä¸Šçš„æ¢ç´¢ä¸å®è·µ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"shorebird","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/åŠ¨æ€åŒ–/shorebird/","text":"https://github.com/shorebirdtech/shorebird Flutteråˆ›å§‹äººä¹‹ä¸€æ‰“é€ ï¼Œåªæ”¯æŒFlutterä¾§çš„çƒ­æ›´ï¼ŒpatchåŒ…å­˜æ”¾åœ¨googleæœåŠ¡å™¨ï¼Œéœ€è¦ç¿»å¢™ [Flutter - æ··ç¼–é¡¹ç›®é›†æˆShorebirdçƒ­æ›´æ–°ğŸ¦ï¼ˆå®‰å“ç¯‡ï¼‰)][https://juejin.cn/post/7321049411852664882]ç ”ç©¶åŸºäº Flutter Shorebird çƒ­æ›´æ–°æ”¯æŒä¸­å›½åŒºåŸŸçš„é—®é¢˜","tags":[{"name":"Flutter åŠ¨æ€åŒ–","slug":"Flutter-åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/tags/Flutter-%E5%8A%A8%E6%80%81%E5%8C%96/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"åŠ¨æ€åŒ–","slug":"Flutter/åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/categories/Flutter/%E5%8A%A8%E6%80%81%E5%8C%96/"}]},{"title":"flutter_hooks","date":"2024-01-26T13:01:08.844Z","path":"wiki/Flutter/å¼€æºåº“/flutter_hooks/","text":"ä»€ä¹ˆæ˜¯Hookï¼ŸHooks æ˜¯æ¥è‡ª React çš„ä¸€ä¸ªæ¦‚å¿µï¼Œflutter_hooks åªæ˜¯ React å®ç°åˆ° Flutter çš„ä¸€ä¸ªç«¯å£ã€‚ https://zh-hans.legacy.reactjs.org/docs/hooks-intro.html flutter_hookshttps://github.com/rrousselGit/flutter_hooks&#x2F;blob&#x2F;master&#x2F;packages&#x2F;flutter_hooks&#x2F;resources&#x2F;translations&#x2F;zh_cn&#x2F;README.md React Hooks çš„ Flutter å®ç°ã€‚ å…¶è§¦å‘UIåˆ·æ–°ä½¿ç”¨çš„æ˜¯setStateï¼Œå¯èƒ½å­˜åœ¨æ€§èƒ½é—®é¢˜ã€‚ å¸¸ç”¨hooksuseEffect ä½ ä¹‹å‰å¯èƒ½å·²ç»åœ¨ React ç»„ä»¶ä¸­æ‰§è¡Œè¿‡æ•°æ®è·å–ã€è®¢é˜…æˆ–è€…æ‰‹åŠ¨ä¿®æ”¹è¿‡ DOMã€‚æˆ‘ä»¬ç»Ÿä¸€æŠŠè¿™äº›æ“ä½œç§°ä¸ºâ€œå‰¯ä½œç”¨â€ï¼Œæˆ–è€…ç®€ç§°ä¸ºâ€œä½œç”¨â€ã€‚ ç›¸å½“äº initState + didUpdateWidget + disposeã€‚ç”¨äºåœ¨ç»„ä»¶æŒ‚è½½ã€æ›´æ–°ã€å¸è½½æ—¶æ‰§è¡Œå‰¯ä½œç”¨ã€‚å‰¯ä½œç”¨å¯èƒ½æ˜¯è®¿é—®ç½‘ç»œã€è®¿é—®æœ¬åœ°å­˜å‚¨ã€è®¢é˜…äº‹ä»¶ç­‰ç­‰ã€‚ 12345678910111213141516171819202122232425262728293031import &#x27;package:flutter/material.dart&#x27;;import &#x27;package:flutter_hooks/flutter_hooks.dart&#x27;;import &#x27;package:http/http.dart&#x27; as http;class NetworkRequest extends HookWidget &#123; @override Widget build(BuildContext context) &#123; final response = useState(&#x27;&#x27;); useEffect(() &#123; http.get(&#x27;https://jsonplaceholder.typicode.com/todos/1&#x27;).then((res) &#123; response.value = res.body; &#125;); return () &#123; // åœ¨ç»„ä»¶å¸è½½æ—¶å–æ¶ˆè®¢é˜… &#125;; &#125;, []); return Scaffold( appBar: AppBar( title: Text(&#x27;Network Request&#x27;), ), body: Center( child: Text(response.value), ), ); &#125;&#125; åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ useEffect Hook è®¢é˜…äº†ä¸€ä¸ªç½‘ç»œäº‹ä»¶ã€‚useEffect æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‰¯ä½œç”¨å‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–æ•°ç»„ã€‚å½“ä¾èµ–æ•°ç»„ä¸­çš„æŸä¸ªå€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseEffect å°†é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ã€‚å¦‚æœä¾èµ–æ•°ç»„ä¸ºç©ºï¼ŒuseEffect å°†åªåœ¨ç»„ä»¶æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ã€‚ useStreamuseStream æ¥æ”¶ä¸€ä¸ª Stream å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å« Stream æ•°æ®çš„å˜é‡ã€‚ 12345678910111213141516171819202122import &#x27;dart:async&#x27;;import &#x27;package:flutter/material.dart&#x27;;import &#x27;package:flutter_hooks/flutter_hooks.dart&#x27;;class StreamDemo extends HookWidget &#123; @override Widget build(BuildContext context) &#123; final stream = Stream.periodic(Duration(seconds: 1), (i) =&gt; i).take(10); final data = useStream(stream); return Scaffold( appBar: AppBar( title: Text(&#x27;Stream Demo&#x27;), ), body: Center( child: Text(data.toString()), ), ); &#125;&#125; useMemoizedç”¨äºç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ã€‚åœ¨ç”Ÿå‘½å‘¨æœŸä¸­åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ 123456789101112131415161718192021222324import &#x27;package:flutter/material.dart&#x27;;import &#x27;package:flutter_hooks/flutter_hooks.dart&#x27;;class MemoizedDemo extends HookWidget &#123; @override Widget build(BuildContext context) &#123; final data = useMemoized(() =&gt; expensiveCalculation()); return Scaffold( appBar: AppBar( title: Text(&#x27;Memoized Demo&#x27;), ), body: Center( child: Text(data.toString()), ), ); &#125; int expensiveCalculation() &#123; return 1 + 2 + 3 + 4 + 5; &#125;&#125; å‚è€ƒ Making Sense of React Hooks Flutter Hooks ä½¿ç”¨åŠåŸç† æŒæ¡ Flutter ä¸­çš„ HooksğŸª https://github.com/rrousselGit/flutter_hooks&#x2F;blob&#x2F;master&#x2F;packages&#x2F;flutter_hooks&#x2F;resources&#x2F;translations&#x2F;zh_cn&#x2F;README.md","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"DevTools","date":"2024-01-26T13:01:08.843Z","path":"wiki/Flutter/DevTools/","text":"å¼€å‘è€…å·¥å…·ä»‹ç» Flutter Inspectorï¼šæ£€æŸ¥ Flutter åº”ç”¨ç¨‹åºçš„ UI ç»„ä»¶å¸ƒå±€å’ŒçŠ¶æ€ Performance Viewï¼šåœ¨ Flutter åº”ç”¨ç¨‹åºä¸­è¯Šæ–­ UI æ€§èƒ½è¿‡ä½çš„é—®é¢˜ CPU Profiler Viewï¼šFlutter å’Œ Dart åº”ç”¨çš„ CPU æ€§èƒ½æ£€æµ‹ Network Viewï¼šä¸º Flutter åº”ç”¨è¿›è¡Œç½‘ç»œæ€§èƒ½æ£€æµ‹ ä¸º Flutter æˆ– Dart åº”ç”¨è¿›è¡Œæºç çº§çš„è°ƒè¯• Memory Viewï¼šåœ¨ Flutter æˆ– Dart å‘½ä»¤è¡Œåº”ç”¨ä¸­æµ‹è¯•å†…å­˜é—®é¢˜ Logging Viewï¼šæŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„ Flutter æˆ– Dart çš„å‘½ä»¤è¡Œåº”ç”¨ç¨‹åºç›¸å…³çš„å¸¸è§„æ—¥å¿—å’Œè¯Šæ–­ä¿¡æ¯ App Size Toolï¼šåˆ†æä»£ç å’Œåº”ç”¨çš„å¤§å° Flutter inspector å·¥å…· æŸ¥çœ‹ widget æ ‘ï¼Œè¯Šæ–­å¸ƒå±€é—®é¢˜ Select Widget Modeå¯åŠ¨æ­¤æŒ‰é’®ï¼Œå¯åœ¨åº”ç”¨ä¸­é€‰ä¸­æŸä¸ªWidgetè¿›è¡ŒæŸ¥çœ‹ã€‚é€šè¿‡æ­¤å·¥å…·å¯ä»¥å¿«é€Ÿå®šä½UIçš„è¯¦ç»†ä¿¡æ¯ Slow Animationsä»¥äº”åˆ†ä¹‹ä¸€çš„é€Ÿåº¦è¿è¡ŒåŠ¨ç”»ä»¥ä¾¿å¯¹å®ƒä»¬è¿›è¡Œä¼˜åŒ– Show Guidelines æ˜¾ç¤ºå¼•å¯¼çº¿è¦†ç›–ä¸€å±‚å¼•å¯¼çº¿ä»¥å¸®åŠ©è°ƒæ•´å¸ƒå±€é—®é¢˜ Show Baselines æ˜¾ç¤ºåŸºçº¿é’ˆå¯¹æ–‡å­—å¯¹é½å±•ç¤ºæ–‡å­—çš„åŸºçº¿ã€‚å¯¹æ£€æŸ¥æ–‡å­—æ˜¯å¦å¯¹é½æœ‰å¸®åŠ©ã€‚ Highlight Repaints é«˜äº®é‡ç»˜åŒºåŸŸè¯¥é€‰é¡¹ä¼šä¸ºæ‰€æœ‰çš„ RenderBox ç»˜åˆ¶ä¸€å±‚è¾¹æ¡†ï¼Œåœ¨å®ƒä»¬é‡æ–°ç»˜åˆ¶æ—¶æ”¹å˜é¢œè‰²ã€‚é‡æ–°ç»˜åˆ¶æ—¶åœ¨å›¾å±‚ä¸Šä¾æ¬¡æ˜¾ç¤ºä¸åŒçš„é¢œè‰²ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå°åŠ¨ç”»å¯èƒ½ä¼šå¯¼è‡´æ•´ä¸ªé¡µé¢ä¸€ç›´åœ¨é‡ç»˜ã€‚å°†åŠ¨ç”»ä½¿ç”¨RepaintBoundary widgetåµŒå¥—ï¼Œå¯ä»¥ä¿è¯åŠ¨ç”»åªä¼šå¯¼è‡´å…¶æœ¬èº«é‡ç»˜ã€‚ Highlight Oversized Images é«˜äº®å°ºå¯¸è¿‡å¤§çš„å›¾ç‰‡åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­é«˜äº®å¹¶åè½¬æ¶ˆè€—è¿‡å¤šå†…å­˜çš„å›¾åƒã€‚ æŠ€å·§ å¯¹äºloadingã€toastè¿™ç§åŠ¨ç”»UIï¼Œä½¿ç”¨RepaintBoundaryåŒ…è£¹ å¯¹äºå¤§å°ºå¯¸çš„å›¾ç‰‡ï¼Œä½¿ç”¨cacheHeightã€cacheWidthç­‰å±æ€§è¿›è¡Œä¼˜åŒ– æ€§èƒ½è§†å›¾ (Performance view) Flutter å¸§å›¾è¡¨ï¼ˆä»… Flutter åº”ç”¨ï¼‰ å¸§åˆ†ææ ‡ç­¾é¡µï¼ˆä»… Flutter åº”ç”¨ï¼‰ å…‰æ …ç»Ÿè®¡æ ‡ç­¾é¡µï¼ˆä»… Flutter åº”ç”¨ï¼‰ æ—¶é—´è½´äº‹ä»¶è·Ÿè¸ªæŸ¥çœ‹å™¨ï¼ˆæ‰€æœ‰åŸç”Ÿ Dart åº”ç”¨ï¼‰ é«˜çº§è°ƒè¯•å·¥å…·ï¼ˆä»… Flutter åº”ç”¨ï¼‰ Flutter å¸§å›¾è¡¨å…‰æ …ç»Ÿè®¡æ ‡ç­¾é¡µ Raster Statså¦‚æœå¸§çš„å¡é¡¿æ¥è‡ªå…‰æ …çº¿ç¨‹ï¼Œè¿™ä¸ªå·¥å…·ä¹Ÿè®¸èƒ½å¤Ÿå¸®åŠ©ä½ è¯Šæ–­æ€§èƒ½ç¼“æ…¢çš„åŸå› ã€‚ç”Ÿæˆå…‰æ …ç»Ÿè®¡çš„æ­¥éª¤ï¼š åœ¨åº”ç”¨ç¨‹åºä¸­å¯¼èˆªåˆ°ä½ çœ‹è§å…‰æ …çº¿ç¨‹å¡é¡¿çš„ç”»é¢ã€‚ ç‚¹å‡» Take Snapshot ç”Ÿæˆå¿«ç…§ã€‚ æŸ¥çœ‹ä¸åŒå›¾å±‚å’Œå®ƒä»¬å„è‡ªçš„æ¸²æŸ“æ—¶é—´ã€‚ æ—¶é—´çº¿äº‹ä»¶è¡¨ Timeline Eventsæ—¶é—´çº¿äº‹ä»¶å›¾è¡¨æ˜¾ç¤ºäº†åº”ç”¨ç¨‹åºçš„æ‰€æœ‰äº‹ä»¶è¿½è¸ªã€‚ Flutter åº•å±‚æ¡†æ¶åœ¨æ„å»ºå¸§ã€ç»˜åˆ¶åœºæ™¯å’Œè·Ÿè¸ªå…¶ä»–æ´»åŠ¨ï¼ˆå¦‚ HTTP è¯·æ±‚æ—¶é—´å’Œåƒåœ¾å›æ”¶ï¼‰æ—¶ï¼Œä¼šå‘å‡ºæ—¶é—´çº¿äº‹ä»¶ã€‚è¿™äº›äº‹ä»¶ä¼šåœ¨æ—¶é—´çº¿ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ dart:developer Timeline å’Œ TimelineTask API å‘é€ä½ è‡ªå·±çš„æ—¶é—´çº¿äº‹ä»¶ å¢å¼ºçš„è¿½è¸ªé€‰é¡¹ Enhance Tracing ä½ å¯ä»¥é‡å¤æ“ä½œä½ æƒ³è¦è¿½è¸ªçš„è¡Œä¸ºæ¥æŸ¥çœ‹æ–°çš„æ—¶é—´çº¿äº‹ä»¶ï¼Œæ“ä½œåå¯ä»¥åœ¨æ—¶é—´çº¿ä¸­é€‰æ‹©ä¸€ä¸ªæ„å»ºå¸§è¿›è¡ŒæŸ¥çœ‹ã€‚ è¿½è¸ª widget çš„æ„å»º Track Widget Buildsæƒ³è¦åœ¨æ—¶é—´çº¿ä¸­æŸ¥çœ‹ build() æ–¹æ³•çš„äº‹ä»¶ï¼Œå¯ç”¨ Track Widget Builds é€‰é¡¹ï¼Œæ—¶é—´çº¿ä¸­å°†å‡ºç° widget å¯¹åº”åç§°çš„äº‹ä»¶ã€‚ è¿½è¸ªå¸ƒå±€ Track Layoutsæƒ³è¦åœ¨æ—¶é—´çº¿ä¸­æŸ¥çœ‹ RenderObject å¸ƒå±€æ„å»ºçš„äº‹ä»¶ï¼Œå¯ç”¨ Track Layouts é€‰é¡¹ï¼š è¿½è¸ªç»˜åˆ¶ Track Paintsæƒ³è¦åœ¨æ—¶é—´çº¿ä¸­æŸ¥çœ‹ RenderObject çš„ç»˜åˆ¶äº‹ä»¶ï¼Œå¯ç”¨ Track Paints é€‰é¡¹ï¼š æ›´å¤šè°ƒè¯•é€‰é¡¹ More debugging optionsæƒ³è¦è¯Šæ–­æ¸²æŸ“å›¾å±‚ç›¸å…³çš„é—®é¢˜ï¼Œè¯·å…ˆå…³é—­æ¸²æŸ“å±‚ã€‚ä¸‹è¿°çš„é€‰é¡¹å°†ä¼šé»˜è®¤å¯åŠ¨ã€‚ æƒ³è¦æŸ¥çœ‹ä½ çš„åº”ç”¨çš„æ€§èƒ½å½±å“ï¼Œè¯·å°è¯•ä»¥ç›¸åŒçš„æ“ä½œé‡ç°æ€§èƒ½é—®é¢˜ã€‚åœ¨æ¸²æŸ“å±‚å…³é—­çš„æƒ…å†µä¸‹ï¼Œäºæ„å»ºå¸§å›¾è¡¨é‡Œé€‰æ‹©ä¸€ä¸ªæ–°çš„æ„å»ºå¸§ï¼ŒæŸ¥çœ‹å®ƒçš„æ—¶é—´çº¿ç»†èŠ‚ã€‚å¦‚æœå…‰æ …çº¿ç¨‹çš„æ—¶é—´æ¶ˆè€—æœ‰æ˜¾è‘—é™ä½ï¼Œé‚£ä¹ˆä½ ç¦ç”¨çš„æ•ˆæœçš„æ»¥ç”¨å¯èƒ½æ˜¯å¯¼è‡´å¡é¡¿çš„ä¸»è¦åŸå› ã€‚ æ¸²æŸ“è£å‰ªçš„å›¾å±‚ Render Clip layersç¦ç”¨è¯¥é€‰é¡¹æ¥æ£€æŸ¥å·²ä½¿ç”¨çš„è£å‰ªå›¾å±‚æ˜¯å¦å½±å“äº†æ€§èƒ½ã€‚å¦‚æœç¦ç”¨åæ€§èƒ½æœ‰æ˜¾è‘—æå‡ï¼Œè¯·å°è¯•å‡å°‘ä½ çš„åº”ç”¨ä¸­è£å‰ªæ•ˆæœçš„ä½¿ç”¨ã€‚ æ¸²æŸ“é€æ˜åº¦å›¾å±‚ Render Opacity layersç¦ç”¨è¯¥é€‰é¡¹æ¥æ£€æŸ¥å·²ä½¿ç”¨çš„é€æ˜åº¦å›¾å±‚æ˜¯å¦å½±å“äº†æ€§èƒ½ã€‚å¦‚æœç¦ç”¨åæ€§èƒ½æœ‰æ˜¾è‘—æå‡ï¼Œè¯·å°è¯•å‡å°‘ä½ çš„åº”ç”¨ä¸­é€æ˜åº¦æ•ˆæœçš„ä½¿ç”¨ã€‚ æ¸²æŸ“ç‰©ç†å½¢çŠ¶å›¾å±‚ Render Physical Shape layersç¦ç”¨è¯¥é€‰é¡¹æ¥æ£€æŸ¥å·²ä½¿ç”¨çš„ç‰©ç†å½¢çŠ¶å›¾å±‚æ˜¯å¦å½±å“äº†æ€§èƒ½ï¼Œä¾‹å¦‚é˜´å½±å’ŒèƒŒæ™¯ç‰¹æ•ˆã€‚å¦‚æœç¦ç”¨åæ€§èƒ½æœ‰æ˜¾è‘—æå‡ï¼Œè¯·å°è¯•å‡å°‘ä½ çš„åº”ç”¨ä¸­ç‰©ç†æ•ˆæœçš„ä½¿ç”¨ã€‚ CPUæ¢æµ‹è§†å›¾ CPU profilerå•å‡»â€œRecordâ€å¼€å§‹è®°å½• CPU å‰–æã€‚ å½“å®Œæˆå½•åˆ¶åï¼Œå•å‡»â€œStopâ€ã€‚ æ­¤æ—¶ï¼ŒCPU åˆ†ææ•°æ®å°†ä» VM ä¸­æå–å¹¶æ˜¾ç¤ºåœ¨åˆ†æå™¨è§†å›¾ä¸­ï¼ˆCall tree, Bottom up, Method table, and Flame chartï¼‰ Bottom Upæ­¤è¡¨æä¾›äº† CPU é…ç½®æ–‡ä»¶çš„è‡ªä¸‹è€Œä¸Šè¡¨ç¤ºã€‚ è¿™æ„å‘³ç€è‡ªä¸‹è€Œä¸Šè¡¨ä¸­çš„æ¯ä¸ªé¡¶çº§æ–¹æ³•æˆ–æ ¹å®é™…ä¸Šæ˜¯ä¸€ä¸ªæˆ–å¤šä¸ª CPU æ ·æœ¬çš„è°ƒç”¨å †æ ˆä¸­çš„é¡¶çº§æ–¹æ³•ã€‚ æ¢å¥è¯è¯´ï¼Œè‡ªä¸‹è€Œä¸Šçš„è¡¨ä¸­çš„æ¯ä¸ªé¡¶çº§æ–¹æ³•éƒ½æ˜¯è‡ªä¸Šè€Œä¸‹çš„è¡¨ï¼ˆè°ƒç”¨æ ‘ï¼‰çš„å¶èŠ‚ç‚¹ã€‚ åœ¨æ­¤è¡¨ä¸­ï¼Œå¯ä»¥å±•å¼€æ–¹æ³•ä»¥æ˜¾ç¤ºå…¶è°ƒç”¨è€…ã€‚ Total TimeSelf TimeMethodCall tree è°ƒç”¨æ ‘è‡ªä¸Šè€Œä¸‹çš„è°ƒç”¨å±•ç¤º CPU Flame Chart CPUç«ç„°å›¾ ç«ç„°å›¾æ˜¯ä¸€ç§å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºæ˜¾ç¤ºæ–¹æ³•è°ƒç”¨çš„æ—¶é—´åˆ†å¸ƒã€‚ çŸ©å½¢çš„å®½åº¦è¡¨ç¤ºæ–¹æ³•çš„æ‰§è¡Œæ—¶é—´ã€‚ çŸ©å½¢çš„é¢œè‰²è¡¨ç¤ºæ–¹æ³•çš„æ·±åº¦ï¼Œå³æ–¹æ³•è°ƒç”¨å †æ ˆçš„æ·±åº¦ã€‚ä¸Šé¢è°ƒç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚ CPU sampling rateå†…å­˜è§†å›¾ Memory view Root object, retaining path, and reachabilityShallow size vs retained sizeDartä¸­çš„å†…å­˜æ³„æ¼æŠ€å·§ å°å¿ƒé—­åŒ…å‡½æ•°çš„ä½¿ç”¨ å°å¿ƒcontextçš„ä¼ é€’ã€‚å¦‚æœé—­åŒ…çš„ç”Ÿå‘½å‘¨æœŸåœ¨widgetå†…ï¼Œåˆ™å¯ä»¥ä¼ é€’ æ³¨æ„widgetå’Œstateï¼Œstateä¸­ä¸è¦å¼•ç”¨widgetä¸­çš„contextï¼Œwidgetæ˜¯çŸ­ç”Ÿå‘½çš„ï¼Œè€Œstateæ˜¯é•¿ç”Ÿå‘½çš„ å‚è€ƒ Flutter è°ƒè¯•å·¥å…·ç¯‡ | å£¹ - ä½¿ç”¨ Flutter Inspector åˆ†æç•Œé¢ æ€§èƒ½è§†å›¾ https://flutter.cn/docs/tools/devtools/overview Flutteræ€§èƒ½åˆ†æå·¥å…·ä½¿ç”¨ Mastering Dart &amp; Flutter DevTools â€” Part 6: CPU Profiler View Mastering Dart &amp; Flutter DevTools â€” Part 7: Memory View Mastering Dart &amp; Flutter DevTools â€” Part 8: Performance View","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"Dartè™šæ‹Ÿæœº","date":"2024-01-26T13:01:08.842Z","path":"wiki/Flutter/Dart/Dartè™šæ‹Ÿæœº/","text":"Introduction to Dart VM","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"}]},{"title":"Dartå†…å­˜ç®¡ç†","date":"2024-01-26T13:01:08.842Z","path":"wiki/Flutter/Dart/Dartå†…å­˜ç®¡ç†/","text":"Dartè¿è¡Œç¯å¢ƒï¼ˆVMï¼‰å’ŒAndroid Artä¸€æ ·ï¼ŒFlutterä¹Ÿå¯¹Dartæºç åšäº†AOTç¼–è¯‘ï¼Œç›´æ¥å°†Dartæºç ç¼–è¯‘æˆäº†æœ¬åœ°å­—èŠ‚ç ï¼Œæ²¡æœ‰äº†è§£é‡Šæ‰§è¡Œçš„è¿‡ç¨‹ï¼Œæå‡æ‰§è¡Œæ€§èƒ½ã€‚è¿™é‡Œé‡ç‚¹å…³æ³¨Dart VMå†…å­˜åˆ†é…(Allocate)å’Œå›æ”¶(GC)ç›¸å…³çš„éƒ¨åˆ†ã€‚ å’ŒJavaæ˜¾è‘—ä¸åŒçš„æ˜¯Dartçš„â€çº¿ç¨‹â€(Isolate)æ˜¯ä¸å…±äº«å†…å­˜çš„ï¼Œå„è‡ªçš„å †(Heap)å’Œæ ˆ(Stack)éƒ½æ˜¯éš”ç¦»çš„ï¼Œå¹¶ä¸”æ˜¯å„è‡ªç‹¬ç«‹GCçš„ï¼Œå½¼æ­¤ä¹‹é—´é€šè¿‡æ¶ˆæ¯é€šé“æ¥é€šä¿¡ã€‚Dartå¤©ç„¶ä¸å­˜åœ¨æ•°æ®ç«äº‰å’Œå˜é‡çŠ¶æ€åŒæ­¥çš„é—®é¢˜ï¼Œæ•´ä¸ªFlutter Framework Widgetçš„æ¸²æŸ“è¿‡ç¨‹éƒ½è¿è¡Œåœ¨ä¸€ä¸ªisolateä¸­ã€‚ Dart VMå°†å†…å­˜ç®¡ç†åˆ†ä¸ºæ–°ç”Ÿä»£(New Generation)å’Œè€å¹´ä»£(Old Generation)ã€‚ æ–°ç”Ÿä»£(New Generation): é€šå¸¸åˆæ¬¡åˆ†é…çš„å¯¹è±¡éƒ½ä½äºæ–°ç”Ÿä»£ä¸­ï¼Œè¯¥åŒºåŸŸä¸»è¦æ˜¯å­˜æ”¾å†…å­˜è¾ƒå°å¹¶ä¸”ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­çš„å¯¹è±¡ï¼Œæ¯”å¦‚å±€éƒ¨å˜é‡ã€‚æ–°ç”Ÿä»£ä¼šé¢‘ç¹æ‰§è¡Œå†…å­˜å›æ”¶(GC)ï¼Œå›æ”¶é‡‡ç”¨â€œå¤åˆ¶-æ¸…é™¤â€ç®—æ³•ï¼Œå°†å†…å­˜åˆ†ä¸ºä¸¤å—(å›¾ä¸­çš„from å’Œ to)ï¼Œè¿è¡Œæ—¶æ¯æ¬¡åªä½¿ç”¨å…¶ä¸­çš„ä¸€å—(å›¾ä¸­çš„from)ï¼Œå¦ä¸€å—å¤‡ç”¨(å›¾ä¸­çš„to)ã€‚å½“å‘ç”ŸGCæ—¶ï¼Œå°†å½“å‰ä½¿ç”¨çš„å†…å­˜å—ä¸­å­˜æ´»çš„å¯¹è±¡æ‹·è´åˆ°å¤‡ç”¨å†…å­˜å—ä¸­ï¼Œç„¶åæ¸…é™¤å½“å‰ä½¿ç”¨å†…å­˜å—ï¼Œæœ€åï¼Œäº¤æ¢ä¸¤å—å†…å­˜çš„è§’è‰²ã€‚ è€å¹´ä»£(Old Generation): åœ¨æ–°ç”Ÿä»£çš„GCä¸­â€œå¹¸å­˜â€ä¸‹æ¥çš„å¯¹è±¡ï¼Œå®ƒä»¬ä¼šè¢«è½¬ç§»åˆ°è€å¹´ä»£ä¸­ã€‚è€å¹´ä»£å­˜æ”¾ç”Ÿå‘½åŠ›å‘¨æœŸè¾ƒé•¿ï¼Œå†…å­˜è¾ƒå¤§çš„å¯¹è±¡ã€‚è€å¹´ä»£é€šå¸¸æ¯”æ–°ç”Ÿä»£è¦å¤§å¾ˆå¤šã€‚è€å¹´ä»£çš„GCå›æ”¶é‡‡ç”¨â€œæ ‡è®°-æ¸…é™¤â€ç®—æ³•ï¼Œåˆ†æˆæ ‡è®°å’Œæ¸…é™¤ä¸¤ä¸ªé˜¶æ®µã€‚åœ¨æ ‡è®°é˜¶æ®µä¼šè§¦å‘åœé¡¿(stop the world)ï¼Œå¤šçº¿ç¨‹å¹¶å‘çš„å®Œæˆå¯¹åƒåœ¾å¯¹è±¡çš„æ ‡è®°ï¼Œé™ä½æ ‡è®°é˜¶æ®µè€—æ—¶ã€‚åœ¨æ¸…ç†é˜¶æ®µï¼Œç”±GCçº¿ç¨‹è´Ÿè´£æ¸…ç†å›æ”¶å¯¹è±¡ï¼Œå’Œåº”ç”¨çº¿ç¨‹åŒæ—¶æ‰§è¡Œï¼Œä¸å½±å“åº”ç”¨è¿è¡Œã€‚ å†…å­˜ç®¡ç†ç®—æ³•GC(Garbage Collection)ï¼Œåƒåœ¾å›æ”¶æœºåˆ¶ï¼Œç®€å•åœ°è¯´å°±æ˜¯ç¨‹åºä¸­åŠæ—¶å¤„ç†åºŸå¼ƒä¸ç”¨çš„å†…å­˜å¯¹è±¡çš„æœºåˆ¶ï¼Œé˜²æ­¢å†…å­˜ä¸­åºŸå¼ƒå¯¹è±¡å †ç§¯è¿‡å¤šé€ æˆå†…å­˜æ³„æ¼ å¸¸è§çš„åƒåœ¾å›æ”¶ç®—æ³•æœ‰å¼•ç”¨è®¡æ•°æ³•ï¼ˆReference Countingï¼‰ã€æ ‡æ³¨å¹¶æ¸…ç†ï¼ˆMark and Sweep GCï¼‰ã€æ‹·è´ï¼ˆCopying GCï¼‰å’Œé€ä»£å›æ”¶ï¼ˆGenerational GCï¼‰ç­‰ç®—æ³•ã€‚ Flutterä½¿ç”¨äº†åŸç”Ÿå¯¹åº”çš„åƒåœ¾å›æ”¶æœºåˆ¶ã€‚ å‚è€ƒ Dart å†…å­˜ç®¡ç†æœºåˆ¶","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"}]},{"title":"Dartèµ„æ–™æ”¶é›†","date":"2024-01-26T13:01:08.842Z","path":"wiki/Flutter/Dart/Dartèµ„æ–™æ”¶é›†/","text":"Dart Programming Language Specification 5th edition draftdart pragmaæ³¨è§£ vm:entry-point","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"}]},{"title":"åŒ—äº¬æ¸¸ç©æ”»ç•¥","date":"2024-01-07T08:50:41.259Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/","text":"å¾ˆå°çš„æ—¶å€™å°±å¸Œæœ›èƒ½å»åŒ—äº¬çœ‹çœ‹ï¼Œçœ‹çœ‹å¤æ—¶å€™çš‡å¸ç”Ÿæ´»çš„åœ°æ–¹ï¼Œçœ‹çœ‹ä¸ºäº†æŠµå¾¡å¤–æ•Œè€Œä¿®å»ºçš„ä¸‡é‡Œé•¿åŸï¼Œçœ‹çœ‹çš‡å¸çš„é™µå¢“ã€‚é‚£å°±åšä¸€ä»½åŒ—äº¬æ¸¸ç©æ”»ç•¥å§ã€‚ä»¥ä¸‹ä»æ¸¸ä½åƒä¸‰ä¸ªæ–¹é¢æ¥ä»‹ç»ã€‚æ¨èè‡ªç”±è¡Œ é—¨ç¥¨é¢„çº¦!!!!!ä½œä¸ºè‡ªç”±è¡Œï¼Œä¸€å®šè¦æå‰é¢„çº¦é—¨ç¥¨ï¼Œä¸‡ä¸€æ²¡çº¦åˆ°é—¨ç¥¨ï¼Œå°†ä¼šæ‰“ä¹±æ‰€æœ‰è®¡åˆ’ã€‚ åŒ—äº¬å„æ™¯åŒºæ”¾ç¥¨æ—¶é—´ï¼š æ¯›è®°ï¼šæå‰6å¤©12:00 å›½åšï¼šæå‰7å¤©17:00 æ•…å®«ï¼šæå‰7å¤©20:00 å¤©å›ï¼šæå‰6å¤©21ï¼š00 é¢å’Œå›­ï¼šæå‰7å¤©21:00 æ­ç‹åºœï¼šæå‰10å¤©20:00 åœ†æ˜å›­ï¼šæå‰7å¤©0:00 ç§‘æŠ€é¦†ï¼šæå‰7å¤©0:00 è‡ªç„¶åšç‰©é¦†ï¼šæå‰3å¤©11:00 å¤©æ–‡é¦†ï¼šæå‰3å¤©18:00 å‡æ——ï¼šæå‰9å¤©00:00 å¤©å®‰é—¨åŸæ¥¼ï¼šæå‰7å¤©17:00 å†›äº‹åšç‰©é¦†ï¼šæ—©ä¸Š8ç‚¹ ä¸­åˆ12ç‚¹ ä¸‹åˆ17ç‚¹ ä¸‰ä¸ªç‚¹æ”¾ç¥¨ å­”åº™å›½å­ç›‘ï¼šæå‰7å¤© æ¸…ååŒ—å¤§ æå‰7å¤© é¢„çº¦ä¹‹å‰ï¼Œæå‰ç™»è®°èº«ä»½è¯ä¿¡æ¯ï¼Œå¯ä»¥å…ˆæå‰åœ¨æ·¡å­£çš„æ—¶é—´æ“ä½œä¸€éã€‚æ”¾ç¥¨çš„æ—¶å€™ï¼ŒæŒ‰ç…§æµç¨‹ç‚¹å‡»å°±å¥½äº†ã€‚é¢„çº¦çš„æ—¶å€™å¦‚æœç•Œé¢å¡ä½ä¸åŠ¨ï¼Œä¸å»ºè®®é€€å›é‡è¿›ï¼Œé‡æ–°çš„æ—¶å€™å¤§æ¦‚ç‡é¢„çº¦ä¸åˆ°äº†ã€‚ æ¸¸æ™¯ç‚¹ä»‹ç» æ•…å®«æ•…å®«æ˜¯æ˜æ¸…ä¸¤ä»£çš„çš‡å®«ï¼Œæ•…å®«å åœ°é¢ç§¯72ä¸‡å¹³æ–¹ç±³ï¼Œå»ºç­‘é¢ç§¯çº¦15ä¸‡å¹³æ–¹ç±³ï¼Œå…±æœ‰æ®¿å®‡9999é—´ï¼Œæ˜¯ä¸–ç•Œä¸Šç°å­˜è§„æ¨¡æœ€å¤§ã€ä¿å­˜æœ€ä¸ºå®Œæ•´çš„æœ¨è´¨ç»“æ„å¤å»ºç­‘ä¹‹ä¸€ã€‚åœ°å€åœ¨ä¸œåŸåŒºæ™¯å±±å‰è¡—4å·ã€‚è¯¦ç»†çš„ä»‹ç»å¯ä»¥å‚è€ƒå®˜æ–¹å…¬ä¼—å·ã€‚ æ³¨æ„äº‹é¡¹ æ³¨æ„å‘¨ä¸€ä¸å¼€å…³ï¼Œé—¨ç¥¨åˆ†ä¸ºä¸Šåˆå’Œä¸‹åˆï¼Œå¯ä»¥æå‰ä¸ƒå¤©é¢„çº¦ï¼Œå»ºè®®ææ—©é¢„çº¦ï¼Œçƒ­é—¨æ™¯ç‚¹é—¨ç¥¨å¾ˆæŠ¢æ‰‹ã€‚ åŒ—é—¨åçš„æ™¯å±±å…¬å›­æ˜¯æ•…å®«çš„æœ€ä½³è§‚æ™¯ç‚¹ï¼Œå¯ä»¥çœ‹åˆ°æ•…å®«çš„å…¨æ™¯ã€‚å¼ºçƒˆæ¨è å»ºè®®æ¸¸ç©è·¯çº¿å›¾æ¸¸ç©åæ„Ÿå—æ•…å®«å¾ˆå¤§ï¼Œçš‡å®¶å®«æ®¿ç¡®å®å¾ˆæ°”æ´¾ï¼Œå¾ˆå¤šå®«æ®¿å†…éƒ¨ç°åœ¨å·²ç»ä¸å…è®¸è¿›å…¥äº†ï¼Œæœ‰ç‚¹å¯æƒœã€‚çå®é¦†ä¸€å®šè¦å»ï¼Œé‡Œé¢æœ‰å¾ˆå¤šçè´µçš„æ–‡ç‰©ï¼Œå¾ˆå€¼å¾—ä¸€çœ‹ã€‚å»ºè®®å¸¦ä¸Šä¸­åˆçš„å¹²ç²®ï¼Œé‡Œé¢çš„é¤å…çš„é¥­èœä¸å¥½åƒã€‚å»ºè®®æ‰¾ä¸ªå¯¼æ¸¸æˆ–è€…ç§Ÿä¸€ä¸ªè®²è§£å™¨ï¼Œå»ºè®®èŠ±ä¸€æ•´å¤©æ—¶é—´æ¸¸ç©ï¼Œä¸Šåˆ9ç‚¹å…¥å®«ï¼Œä¸ŠåˆæŠŠé™¤äº†çå®é¦†ä»¥å¤–çš„å®«æ®¿é€›ä¸€éï¼Œä¸­åˆåƒå®Œé¥­ä¼‘æ¯ä¸€ä¼šï¼Œå†è¿›å»çå®é¦†ï¼Œç„¶ååŒ—é—¨å‡ºæ¥ç›´å¥”æ™¯å±±å…¬å›­é¡¶éƒ¨ï¼Œé¥çœ‹æ•´ä¸ªçš‡åŸã€‚ æ•…å®«å†…çš„ä¸€äº›å¦‚é’Ÿè¡¨é¦†ç­‰å»ºè®®å»çœ‹çœ‹ï¼Œçœ‹çœ‹çš‡å®¶çš„ç”Ÿæ´»ç”¨å“ï¼Œè¿˜æœ‰ä¸€äº›å¤ä»£çš„ç§‘æŠ€æˆæœï¼Œå¾ˆæœ‰æ„æ€ã€‚å»ºè®®è´­ä¹°ä¸€ä¸ªç”µå­è®²è§£å™¨ï¼Œå¯ä»¥å¬åˆ°å¾ˆå¤šæ•…äº‹ï¼Œå¾ˆæœ‰æ„æ€ã€‚äº†è§£ä¸€äº›å†å²æ•…äº‹ï¼Œç„¶åå»çœ‹çœ‹ï¼Œä¼šæœ‰ä¸ä¸€æ ·çš„æ„Ÿå—ã€‚ é¢å’Œå›­æ¸…æœå¸ç‹çš„è¡Œå®«å’ŒèŠ±å›­ï¼Œå®ƒä»¥æ˜†æ˜æ¹–ã€ä¸‡å¯¿å±±ä¸ºåŸºç¡€ï¼Œä»¥æ­å·è¥¿æ¹–ä¸ºè“æœ¬ï¼Œæ±²å–æ±Ÿå—å›­æ—çš„è®¾è®¡æ‰‹æ³•è€Œå»ºæˆï¼Œè¢«èª‰ä¸ºâ€œçš‡å®¶å›­æ—åšç‰©é¦†â€ã€‚ä»¥ä»å£½æ®¿ç‚ºä¸­å¿ƒçš„æ”¿æ²»æ´»å‹•å€ï¼›ä»¥ç‰ç€¾å ‚ã€æ¨‚å£½å ‚ç‚ºä¸»é«”çš„å¸åç”Ÿæ´»å€ï¼›ä»¥é•·å»Šæ²¿ç·šã€å¾Œå±±ã€è¥¿å€ç‚ºä¸»çš„è‹‘åœ’éŠè¦½å€ã€‚ä¸‡å¯¿å±±ã€æ˜†æ˜æ¹–ã€ä¸œå®«é—¨ã€åä¸ƒå­”æ¡¥ã€å¤§æˆæ¥¼ã€‚ å»ºè®®æ¸¸ç©è·¯çº¿å›¾ æ³¨æ„äº‹é¡¹è·¯çº¿è§„åˆ’ä½æœ‰æ¡ä»¶çš„å°½é‡ä½ç¦»å¤©å®‰é—¨è¿‘ä¸€ç‚¹çš„åœ°æ–¹ï¼Œå»å“ªé‡Œéƒ½æ¯”è¾ƒæ–¹ä¾¿ã€‚è¿™æ¬¡é€‰æ‹©äº†äº”é“å£ï¼Œè·ç¦»æƒ³å»çš„æ™¯ç‚¹éƒ½æ¯”è¾ƒæ–¹ä¾¿ï¼Œå»å…«è¾¾å²­ã€åä¸‰é™µã€æ•…å®«ã€é¢å’Œå›­éƒ½æ¯”è¾ƒæ–¹ä¾¿ã€‚å»å…«è¾¾å²­é•¿åŸåæ¸…æ²³ç«™é«˜é“åŠå°æ—¶ï¼ŒåŠ ä¸Šåœ°é“æ—¶é—´ä¸€ä¸ªå°æ—¶å°±å¤Ÿäº†ã€‚ä¹Ÿå¯ä»¥åˆ°åä¸‰é™µåœ°é“ç«™ã€‚ åƒåŒ—äº¬æ˜¯ä¸–ç•Œç¬¬å…«å¤§â€œç¾é£Ÿä¹‹åŸâ€ï¼Œå°åƒå†å²æ‚ ä¹…ã€å“ç§ç¹å¤šã€ç”¨æ–™è®²ç©¶ã€åˆ¶ä½œç²¾ç»†ï¼Œå ªç§°æœ‰å£çš†ç¢‘ã€‚äº¬å‘³å°åƒçš„ä»£è¡¨æœ‰è±†æ±å„¿ã€è±†é¢é…¥ç³–ã€é…¸æ¢…æ±¤ã€èŒ¶æ±¤ã€å°çªå¤´ã€èŒ¯è‹“å¤¹é¥¼ã€æœè„¯èœœé¥¯ã€å†°ç³–è‘«èŠ¦ã€è‰¾çªçªã€è±Œè±†é»„ã€é©´æ‰“æ»šã€çŒè‚ ã€çˆ†è‚šã€ç‚’è‚ç­‰ã€‚åŒæ—¶ï¼ŒåŒ—äº¬ä¹Ÿæœ‰ä¸å°‘è€å­—å·é¥­é¦†ï¼Œæ¶®ç¾Šè‚‰ã€çƒ¤é¸­ã€å®¶å¸¸èœç­‰ç­‰ï¼Œç§ç±»ä¸°å¯Œã€‚ è¿™æ¬¡åƒäº†æ–¹ç –å‚69å·ç‚¸é…±é¢ã€å°åŠæ¢¨æ±¤ã€å±€æ°”çƒ¤é¸­ã€æŠ¤å›½å¯ºå°åƒã€‚æ²¡æœ‰ç‰¹åˆ«æƒŠè‰³ï¼Œå¯èƒ½å—æ–¹äººå£å‘³ä¸åŒã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¦‚å››å­£æ°‘ç¦ä¹‹ç±»çš„åº—äººæ°”å¾ˆæ—ºï¼Œéœ€è¦æå‰é¢„çº¦ã€‚è¦ä¹ˆä¸€å¼€å§‹è¥ä¸šå°±åœ¨å…¬ä¼—å·ä¸Šé¢„çº¦ï¼ˆåˆ°è¾¾ä¸€å®šæ•°é‡ä¹‹ååªèƒ½ç°åœºæ’é˜Ÿï¼‰ï¼Œå¦‚æœæ˜¯ç°åœºé¢„çº¦ï¼Œæ’é˜Ÿä¼šå¾ˆä¹…ã€‚","tags":[{"name":"æ—…æ¸¸","slug":"æ—…æ¸¸","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"2023-2024å¹´åº¦æ€»ç»“","date":"2024-01-07T08:50:41.259Z","path":"wiki/éšç¬”/2023-2024å¹´åº¦æ€»ç»“/","text":"æ—¶é—´è¿‡çš„çœŸå¿«å•Šï¼Œä¸€å¹´åˆè¦è¿‡å®Œäº†ã€‚è¿˜æ˜¯è¦è®°å½•ä¸€ä¸‹è¿™ä¸€å¹´çš„æˆé•¿å’Œæ”¶è·ï¼Œä»¥åŠå¯¹æœªæ¥çš„å±•æœ›ã€‚ ä»Šå¹´çš„è¡Œæƒ…å¾ˆä¸å¥½ï¼Œä¸ç®¡æ˜¯å°±ä¸šè¿˜æ˜¯Aè‚¡å¸‚åœºã€‚è™½è¯´ç–«æƒ…å·²ç»æ”¾å¼€ç®¡æ§ï¼Œå¯ä¸è§ç»æµå¿«é€Ÿçš„å¤è‹ï¼Œèº«è¾¹è®¨è®ºçš„æ›´å¤šçš„æ˜¯è£å‘˜ã€é¢†â€œå¤§ç¤¼åŒ…â€ã€‚å¹´ä¸­ï¼Œå…¬å¸ä¹Ÿç»å†äº†ä¸¤æ¬¡è£å‘˜ï¼Œè‡ªå·±ä¹Ÿåœ¨åæ€è¦ä¿æŒä»€ä¹ˆæ ·çš„çŠ¶æ€æ‰èƒ½åœ¨è¿™ä¸ªæ—¶ä»£ç”Ÿå­˜ä¸‹å»ã€‚ ä»Šå¹´åšäº†å“ªäº›äº‹æƒ…å‘¢ï¼Ÿ çœ‹ç”µå½±ç›®å‰ä¸ºæ•°ä¸å¤šçš„çˆ±å¥½äº†ï¼Œåº”è¯¥æœ‰ä¸‰åå‡ éƒ¨ã€‚ è‹è²çš„æŠ‰æ‹© å‰‘é›¨ å®‰é˜³å©´å„¿ æˆ‘èº«ä½“é‡Œçš„é‚£ä¸ªå®¶ä¼™ çœ‹è§æ¶é­” ç©ºä¸­ç›‘ç‹± è™å…„è™å¼Ÿ æ­£ä¹‰å›å»Š èŠ™è“‰é•‡ æš—æ€ ä½ä¿—å°è¯´ åƒé’§ä¸€å‘ æ¹„å…¬æ²³è¡ŒåŠ¨ å‡ºç§Ÿè½¦å¸æœº å”äººè¡—æ¢æ¡ˆ å›åˆ°æœªæ¥ æ•™çˆ¶2 ä¸å¯é¥¶æ• å¥‡è¿¹Â·ç¬¨å°å­© é£ä¸­æœ‰æœµé›¨åšçš„äº‘ æ»¡æ±Ÿçº¢ ä¿ä½ å¹³å®‰ ç‰¹æ´›ä¼Š å®‡å®™æ¢ç´¢ç¼–è¾‘éƒ¨ è‹¦æœˆäº® æˆ‘çˆ±ä½ ï¼ éè¯šå‹¿æ‰° æ‰«æ¯’ å…³äºæˆ‘å’Œé¬¼å˜æˆå®¶äººçš„é‚£ä»¶äº‹ æ¶ˆå¤±çš„å¥¹ å†›ä¸­ä¹å›­ ç›²äº• è¿‡å¹´ å…«è§’ç¬¼ä¸­ æ¶ˆå¤±çš„æƒ…äººèŠ‚ è¸è¡€å¯»æ¢… æ— å èŠ³å å°ç¥ç¬¬ä¸€éƒ¨ï¼šæœæ­Œé£äº‘ çŒç¯®é«˜æ‰‹ ç¬¬å…«ä¸ªå«Œç–‘äºº è§¦ä¸å¯åŠ æŠ•åçŠ¶ èŠ±æœˆæ€æ‰‹ çœ‹ä¹¦ ä¸­å›½ç»æµå¢é•¿çš„çœŸå®é€»è¾‘ ä¸‡å†åäº”å¹´ æ±½è½¦æ˜¯æ€æ ·è·‘èµ·æ¥çš„ è½¬å‹ä¸­çš„åœ°æ–¹æ”¿åºœ ç½®èº«äº‹å†… æƒåŠ›ç»“æ„ã€æ”¿æ²»æ¿€åŠ±å’Œç»æµå¢é•¿ äººç±»ä¹‹æ—… æ—…è¡Œä»Šå¹´å»äº†æ¶ æ´²å²›ã€å´‡å·¦ã€åŒ—äº¬ã€‚ç»ˆäºå»äº†å¿ƒå¿ƒå¿µçš„åŒ—äº¬ã€‚è™½ç„¶æ˜¯å›½åº†å»çš„ï¼Œäººå¾ˆå¤šï¼Œä½†ä½“éªŒè¿˜æ˜¯æ·±åˆ»çš„ï¼Œæ„Ÿå—åˆ°äº†çš‡å®¶çš„æ°”æ´¾ã€‚24å¹´å‡†å¤‡å»è¥¿ç«™ã€æ´›é˜³ï¼Œæ„Ÿå—ä¸€ä¸‹å¤éƒ½çš„é­…åŠ›ã€‚ æŠ•èµ„ç»“æœè·Ÿé¢„æœŸå·®è·å¾ˆå¤§ï¼Œä»Šå¹´æ˜¯äºæŸçš„ä¸€å¹´ï¼Œå½“æ•´ä¸ªç¯å¢ƒä¸å¥½çš„æ—¶å€™ï¼Œæƒ³ä»è‚¡å¸‚èµšé’±å¾ˆéš¾ã€‚24å¹´æ”¹å˜ä¸€ä¸‹ç­–ç•¥ï¼Œå°†ä¸€éƒ¨åˆ†èµ„é‡‘æŠ•å…¥åˆ°ç¾ã€æ¸¯è‚¡ä¸­ã€‚ å·¥ä½œå’Œå­¦ä¹ å¥½å¥½å·¥ä½œï¼Œå¥½å¥½å­¦ä¹ ï¼Œå¥½å¥½ç”Ÿæ´»ã€‚ç»§ç»­å¢å¼ºè‡ªå·±çš„æŠ€æœ¯æ°´å¹³ã€‚","tags":[{"name":"æ€»ç»“","slug":"æ€»ç»“","permalink":"http://airshu.github.io/tags/%E6%80%BB%E7%BB%93/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"å¦‚ä½•å®¢è§‚çš„è¯„ä¼°å¼€å‘äººå‘˜çš„ç»©æ•ˆ","date":"2024-01-07T08:50:41.259Z","path":"wiki/æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†/å¦‚ä½•å®¢è§‚çš„è¯„ä¼°å¼€å‘äººå‘˜çš„ç»©æ•ˆ/","text":"","tags":[{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/tags/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"}]},{"title":"flutter_sound","date":"2024-01-07T08:50:41.258Z","path":"wiki/Flutter/å¼€æºåº“/flutter_sound/","text":"Flutterä¸­éŸ³é¢‘çš„å¤„ç†åº“ï¼Œå¯ä»¥ç”¨æ¥æ’­æ”¾ã€å½•åˆ¶ã€‚æ’­æ”¾æ”¯æŒä¸»æµçš„æ ¼å¼ï¼Œæ”¯æŒç½‘ç»œåœ°å€ã€‚ æ’­æ”¾éŸ³é¢‘1234567891011121314151617181920212223242526272829303132333435363738394041424344454647import &#x27;package:flutter_sound/flutter_sound.dart&#x27;;import &#x27;package:xtechpark/ws_utils/ws_log/ws_logger.dart&#x27;;class WSAudioPlayer &#123; factory WSAudioPlayer() =&gt; _getInstance(); static WSAudioPlayer get instance =&gt; _getInstance(); static WSAudioPlayer? _instance; WSAudioPlayer._internal(); static WSAudioPlayer _getInstance() &#123; _instance ??= WSAudioPlayer._internal(); return _instance!; &#125; FlutterSoundPlayer? _player; Future init() async &#123; _player = FlutterSoundPlayer(); await _player?.openPlayer().then((value) &#123; WSLogger.debug(&#x27;WSAudioPlayer init &#x27;); &#125;); await _player?.setSubscriptionDuration(const Duration(milliseconds: 100)); _player?.onProgress?.listen((event) &#123; WSLogger.debug(&#x27;WSAudioPlayer onProgress $&#123;event.duration&#125;&#x27;); &#125;); &#125; Future play(String url, [Function()? onFinished]) async &#123; if (_player == null) &#123; await init(); &#125; if (_player?.playerState == PlayerState.isPlaying) &#123; await stop(); &#125; return _player?.startPlayer(fromURI: url, codec: Codec.mp3, whenFinished: onFinished); &#125; Future stop() async &#123; await _player?.stopPlayer(); &#125;&#125; å½•åˆ¶éŸ³é¢‘123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130import &#x27;dart:io&#x27;;import &#x27;package:audio_session/audio_session.dart&#x27;;import &#x27;package:flutter/foundation.dart&#x27;;import &#x27;package:flutter_sound/flutter_sound.dart&#x27;;import &#x27;package:permission_handler/permission_handler.dart&#x27;;import &#x27;package:xtechpark/ws_utils/ws_file_util.dart&#x27;;import &#x27;package:xtechpark/ws_utils/ws_log/ws_logger.dart&#x27;;import &#x27;package:xtechpark/ws_utils/ws_toast_util.dart&#x27;;import &#x27;package:path_provider/path_provider.dart&#x27;;import &#x27;package:flutter_sound_platform_interface/flutter_sound_recorder_platform_interface.dart&#x27;;class WSAudioRecorder &#123; factory WSAudioRecorder() =&gt; _getInstance(); static WSAudioRecorder get instance =&gt; _getInstance(); static WSAudioRecorder? _instance; WSAudioRecorder._internal(); static WSAudioRecorder _getInstance() &#123; _instance ??= WSAudioRecorder._internal(); return _instance!; &#125; FlutterSoundRecorder? _recorder; final Codec _codec = Codec.aacADTS; String _mPath = &#x27;temp.aac&#x27;; /// å½•éŸ³æ—¶é•¿ Duration? duration; /// åˆå§‹åŒ– Future init() async &#123; _recorder = FlutterSoundRecorder(); await openTheRecorder(); &#125; /// é‡Šæ”¾ dispose() &#123; _recorder?.closeRecorder(); _recorder = null; &#125; /// åˆå§‹åŒ–é…ç½® Future&lt;void&gt; openTheRecorder() async &#123; var status = await Permission.microphone.request(); if (status != PermissionStatus.granted) &#123; WSToastUtil.show(&#x27;Microphone permission not granted&#x27;); return; &#125; await _recorder?.openRecorder(); final session = await AudioSession.instance; await session.configure(AudioSessionConfiguration( avAudioSessionCategory: AVAudioSessionCategory.playAndRecord, avAudioSessionCategoryOptions: AVAudioSessionCategoryOptions.allowBluetooth | AVAudioSessionCategoryOptions.defaultToSpeaker, avAudioSessionMode: AVAudioSessionMode.spokenAudio, avAudioSessionRouteSharingPolicy: AVAudioSessionRouteSharingPolicy.defaultPolicy, avAudioSessionSetActiveOptions: AVAudioSessionSetActiveOptions.none, androidAudioAttributes: const AndroidAudioAttributes( contentType: AndroidAudioContentType.speech, flags: AndroidAudioFlags.none, usage: AndroidAudioUsage.voiceCommunication, ), androidAudioFocusGainType: AndroidAudioFocusGainType.gain, androidWillPauseWhenDucked: true, )); _recorder?.dispositionStream()?.listen((event) &#123; WSLogger.debug(&#x27;debug dispositionStreamï¼š$event&#x27;); &#125;); _recorder?.setSubscriptionDuration(const Duration(milliseconds: 100)); _recorder?.onProgress?.listen((e) &#123; WSLogger.debug(&quot;debug onProgressï¼š$&#123;e.decibels&#125; / $&#123;e.duration&#125;&quot;); duration = e.duration; &#125;); // _mRecorderIsInited = true; &#125; void startRecord() async &#123; if(_recorder == null) &#123; await init(); &#125; if(_recorder?.recorderState == RecorderState.isRecording) &#123; await _recorder?.stopRecorder(); return; &#125; WSLogger.debug(&quot;debug startRecord&quot;); var status = await Permission.microphone.request(); if (status != PermissionStatus.granted) &#123; WSToastUtil.show(&quot;Microphone permission not granted&quot;); &#125; else &#123; Directory tempDir = await getTemporaryDirectory(); _mPath = &quot;$&#123;tempDir.path&#125;/$&#123;DateTime.now().millisecondsSinceEpoch&#125;.aac&quot;; _recorder?.startRecorder( toFile: _mPath, codec: _codec, audioSource: AudioSource.microphone, ); WSLogger.debug(&quot;debug recording&quot;); &#125; &#125; /// åœæ­¢å½•éŸ³ void stopRecord(Function(String path, int duration) finished) async &#123; String? path = await _recorder?.stopRecorder(); if (path == null) &#123; WSToastUtil.show(&#x27;record failed&#x27;); WSLogger.error(&#x27;record failed $&#123;_recorder?.recorderState&#125;&#x27;); return; &#125; if(!await WSFileUtil.isFileExists(path)) &#123; WSToastUtil.show(&#x27;record failed&#x27;); return; &#125; if(duration != null &amp;&amp; duration!.inSeconds &lt; 1) &#123; WSToastUtil.show(&#x27;recording can\\&#x27;t be less than 1 second&#x27;); return; &#125; WSLogger.debug(&quot;Stop recording: path = $pathï¼Œduration = $&#123;duration?.inSeconds&#125;&quot;); if (TargetPlatform.android == defaultTargetPlatform) &#123; path = &quot;file://$path&quot;; &#125; finished(path, duration?.inSeconds ?? 0); &#125;&#125; å‚è€ƒ https://pub.dev/packages/flutter_sound","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"in_app_purchaseè‹¹æœå†…è´­","date":"2024-01-07T08:50:41.258Z","path":"wiki/Flutter/å¼€æºåº“/in_app_purchase/","text":"ä½¿ç”¨in_app_purchaseè¿™ä¸ªåº“ æµç¨‹1. ä¿®æ”¹XCodeé…ç½®æ–‡ä»¶ï¼Œæ”¯æŒå†…è´­ 2. é¡¹ç›®ä¸­æ·»åŠ in_app_purchaseé…ç½®1234567dependencies: flutter: sdk: flutter in_app_purchase: in_app_purchase_storekit: 3. ç¼–å†™å†…è´­ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158class ShopPayUtil &#123; static ShopPayUtil? _instance; static ShopPayUtil getInstance() &#123; _instance ??= ShopPayUtil._internal(); return _instance!; &#125; ShopPayUtil._internal(); factory ShopPayUtil() =&gt; getInstance();///è´­ä¹°å•†å“ void buy(GoodsModel item) async &#123; try &#123; EasyLoading.show(); // æ ¹æ®å•†å“ä¿¡æ¯åˆ›å»ºè®¢å• var res = await rechargeCreate(item.code!); if(res != null) &#123; // è°ƒç”¨è‹¹æœå†…è´­ await applePay(res); &#125; &#125; catch (e, s) &#123; Logger.error(&#x27;$e $s&#x27;); &#125; finally &#123; EasyLoading.dismiss(); &#125; &#125; /// åˆ›å»ºå……å€¼è®¢å• Future&lt;dynamic&gt; rechargeCreate(String goodsCode) async &#123; // todo è°ƒç”¨æœåŠ¡å™¨æ¥å£ &#125; /// éªŒå• static Future paymentIpa(String orderNo, String payload, String transactionId) async &#123; // todo æ£€æŸ¥è®¢å•å‡†ç¡®æ€§ &#125; /// æ¶ˆè€—è™šæ‹Ÿå¸ Future reviewModeConsume(String outlay) async &#123; // todo è°ƒç”¨åå°æ¥å£ &#125; static StreamSubscription&lt;List&lt;PurchaseDetails&gt;&gt;? _subscription; /// è‹¹æœå†…è´­ (è´­ä¹°) static Future&lt;void&gt; applePay(Map dataMap) async &#123; final Stream&lt;List&lt;PurchaseDetails&gt;&gt; purchaseUpdated = InAppPurchase.instance.purchaseStream; _subscription?.cancel(); // æ·»åŠ ç›‘å¬å™¨ _subscription = purchaseUpdated.listen((List&lt;PurchaseDetails&gt; purchaseDetailsList) &#123; _listenToPurchaseUpdated(purchaseDetailsList, dataMap); &#125;, onDone: () &#123; _subscription?.cancel(); Logger.debug(&#x27;=applePay=====onDone&#x27;); &#125;, onError: (Object error) &#123; Logger.error(error); ToastUtil.show(error.toString()); &#125;); final bool isAvailable = await InAppPurchase.instance.isAvailable(); // åˆ¤æ–­æ˜¯å¦å¯ç”¨ if (!isAvailable) &#123; ToastUtil.show(&#x27;The store cannot be reached, check your network connection please.&#x27;); return; &#125; if (Platform.isIOS) &#123; final InAppPurchaseStoreKitPlatformAddition iosPlatformAddition = InAppPurchase.instance.getPlatformAddition&lt;InAppPurchaseStoreKitPlatformAddition&gt;(); await iosPlatformAddition.setDelegate(PaymentQueueDelegate()); &#125; Set&lt;String&gt; ids = &#123;dataMap[&#x27;goodsCode&#x27;]&#125;; // æŸ¥è¯¢å•†å“çš„ä¿¡æ¯ï¼ˆéœ€è¦å…ˆåœ¨è‹¹æœåå°é…ç½®ï¼‰ final ProductDetailsResponse productDetailResponse = await InAppPurchase.instance.queryProductDetails(ids); if (productDetailResponse.error != null) &#123; WSToastUtil.show(&#x27;Failed to obtain product information.&#x27;); return; &#125; if (productDetailResponse.productDetails.isEmpty) &#123; ToastUtil.show(&#x27;No product&#x27;); return; &#125; List&lt;ProductDetails&gt; _products = productDetailResponse.productDetails; // æŸ¥è¯¢æˆåŠŸ ProductDetails productDetails = _products[0]; PurchaseParam purchaseParam = PurchaseParam( productDetails: productDetails, applicationUserName: &#x27;$&#123;dataMap[&#x27;orderNo&#x27;]&#125;&#x27;, ); //å‘è‹¹æœæœåŠ¡å™¨å‘èµ·æ”¯ä»˜è¯·æ±‚ var res = await InAppPurchase.instance.buyConsumable(purchaseParam: purchaseParam); Logger.debug(&#x27;buyConsumable result: $res&#x27;); &#125; static Future&lt;void&gt; _listenToPurchaseUpdated(List&lt;PurchaseDetails&gt; purchaseDetailsList, Map dataMap) async &#123; Logger.debug(&#x27;===&gt;&gt;&gt;_listenToPurchaseUpdated callback&#x27;); for (final PurchaseDetails purchaseDetails in purchaseDetailsList) &#123; Logger.debug( &#x27;===&gt;&gt;&gt;_listenToPurchaseUpdated status=$&#123;purchaseDetails.status&#125; productID=$&#123;purchaseDetails.productID&#125; &#x27; &#x27;transactionDate=$&#123;purchaseDetails.transactionDate&#125;&#x27; &#x27;purchaseID=$&#123;purchaseDetails.purchaseID&#125; transactionDate=$&#123;purchaseDetails.transactionDate&#125;&#x27; &#x27;verificationData.localVerificationData=$&#123;purchaseDetails.verificationData.localVerificationData&#125;&#x27; &#x27;verificationData.serverVerificationData=$&#123;purchaseDetails.verificationData.serverVerificationData&#125;&#x27; &#x27;verificationData.source=$&#123;purchaseDetails.verificationData.source&#125;&#x27;); if (purchaseDetails.status == PurchaseStatus.pending) &#123; /// ç­‰å¾…è´­ä¹°ä¸­ &#125; else if (purchaseDetails.status == PurchaseStatus.canceled) &#123; /// å–æ¶ˆè®¢å• InAppPurchase.instance.completePurchase(purchaseDetails); &#125; else &#123; if (purchaseDetails.status == PurchaseStatus.error) &#123; /// è´­ä¹°å‡ºé”™ WSToastUtil.show(&#x27;Purchase error&#x27;); InAppPurchase.instance.completePurchase(purchaseDetails); &#125; else if (purchaseDetails.status == PurchaseStatus.purchased || purchaseDetails.status == PurchaseStatus.restored) &#123; if (purchaseDetails.pendingCompletePurchase) &#123; await InAppPurchase.instance.completePurchase(purchaseDetails); &#125; if (purchaseDetails.productID == dataMap[&#x27;goodsCode&#x27;]) &#123; // æ”¯ä»˜æˆåŠŸï¼Œå‘æ”¾å•†å“ await deliverProduct(purchaseDetails, dataMap); &#125; &#125; &#125; &#125; &#125; /// è°ƒç”¨åå°æ¥å£,å‘æ”¾å•†å“ static Future&lt;void&gt; deliverProduct(PurchaseDetails purchaseDetails, Map dataMap) async &#123; String code = dataMap[&#x27;goodsCode&#x27;]; String payload = purchaseDetails.verificationData.serverVerificationData; String transactionId = purchaseDetails.purchaseID!; var res = await paymentIpa(dataMap[&#x27;orderNo&#x27;], payload, transactionId); // todo è°ƒç”¨åå°æ¥å£ &#125;&#125;class PaymentQueueDelegate implements SKPaymentQueueDelegateWrapper &#123; @override bool shouldContinueTransaction(SKPaymentTransactionWrapper transaction, SKStorefrontWrapper storefront) &#123; return true; &#125; @override bool shouldShowPriceConsent() &#123; return false; &#125;&#125; å‚è€ƒ https://pub.dev/packages/in_app_purchase","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"ç©ºå®‰å…¨","date":"2024-01-07T08:50:41.257Z","path":"wiki/Flutter/Dart/ç©ºå®‰å…¨/","text":"æ¦‚è¿°ä¸ºä»€ä¹ˆéœ€è¦ç©ºå®‰å…¨ï¼Ÿ å½“ä½ é€‰æ‹©ä½¿ç”¨ç©ºå®‰å…¨æ—¶ï¼Œä»£ç ä¸­çš„ç±»å‹å°†é»˜è®¤æ˜¯éç©ºçš„ï¼Œæ„å‘³ç€é™¤éä½ å£°æ˜å®ƒä»¬å¯ç©ºï¼Œå®ƒä»¬çš„å€¼éƒ½ä¸èƒ½ä¸ºç©ºã€‚æœ‰äº†ç©ºå®‰å…¨ï¼ŒåŸæœ¬å¤„äºä½ çš„ è¿è¡Œæ—¶ çš„ç©ºå€¼å¼•ç”¨é”™è¯¯å°†å˜ä¸º ç¼–è¾‘æ—¶ çš„åˆ†æé”™è¯¯ã€‚è¿™æ ·å¯ä»¥å¤§å¤§é™ä½ç©ºæŒ‡é’ˆé—®é¢˜ã€‚ æ¯”å¦‚ä»¥ä¸‹ä»£ç ï¼Œstringå‚æ•°å¯èƒ½ä¼šæŠ¥NoSuchMethodErrorå¼‚å¸¸ã€‚ 1234567// Without null safety:bool isEmpty(String string) =&gt; string.length == 0;main() &#123; isEmpty(null);&#125; å¥å…¨çš„ç©ºå®‰å…¨å·²åœ¨ Dart 2.12 å’Œ Flutter 2 ä¸­å¯ç”¨ã€‚ æ·±å…¥ç†è§£ç©ºå®‰å…¨ç±»å‹ç³»ç»Ÿä¸­çš„å¯ç©ºæ€§é™æ€ç±»å‹ç³»ç»Ÿä¸­ï¼Œä½ çš„Dartç¨‹åºåŒ…å«äº†æ•´ä¸ªç±»å‹ä¸–ç•Œï¼šåŸºæœ¬ç±»å‹ï¼ˆå¦‚ int å’Œ Stringï¼‰ã€é›†åˆç±»å‹ï¼ˆå¦‚ Listï¼‰ä»¥åŠä½ å’Œä½ æ‰€ä½¿ç”¨çš„ä¾èµ–æ‰€å®šä¹‰çš„ç±»å’Œç±»å‹ã€‚åœ¨ç©ºå®‰å…¨æ¨å‡ºä¹‹å‰ï¼Œé™æ€ç±»å‹ç³»ç»Ÿå…è®¸æ‰€æœ‰ç±»å‹çš„è¡¨è¾¾å¼ä¸­çš„æ¯ä¸€å¤„éƒ½å¯ä»¥æœ‰ nullã€‚ ä»ç±»å‹ç†è®ºçš„è§’åº¦æ¥è¯´ï¼ŒNull ç±»å‹è¢«çœ‹ä½œæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»ï¼› ç±»å‹ä¼šå®šä¹‰ä¸€äº›æ“ä½œå¯¹è±¡ï¼ŒåŒ…æ‹¬ gettersã€settersã€æ–¹æ³•å’Œæ“ä½œç¬¦ï¼Œåœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ã€‚å¦‚æœæ˜¯ List ç±»å‹ï¼Œä½ å¯ä»¥å¯¹å…¶è°ƒç”¨ .add() æˆ– []ã€‚å¦‚æœæ˜¯ int ç±»å‹ï¼Œä½ å¯ä»¥å¯¹å…¶è°ƒç”¨ +ã€‚ä½†æ˜¯ null å€¼å¹¶æ²¡æœ‰å®ƒä»¬å®šä¹‰çš„ä»»ä½•ä¸€ä¸ªæ–¹æ³•ã€‚æ‰€ä»¥å½“ null ä¼ é€’è‡³å…¶ä»–ç±»å‹çš„è¡¨è¾¾å¼æ—¶ï¼Œä»»ä½•æ“ä½œéƒ½æœ‰å¯èƒ½å¤±è´¥ã€‚è¿™å°±æ˜¯ç©ºå¼•ç”¨çš„ç—‡ç»“æ‰€åœ¨â€”â€”æ‰€æœ‰é”™è¯¯éƒ½æ¥æºäºå°è¯•åœ¨ null ä¸ŠæŸ¥æ‰¾ä¸€ä¸ªä¸å­˜åœ¨çš„æ–¹æ³•æˆ–å±æ€§ã€‚ éç©ºå’Œå¯ç©ºç±»å‹ç©ºå®‰å…¨é€šè¿‡ä¿®æ”¹äº†ç±»å‹çš„å±‚çº§ç»“æ„ï¼Œä»æ ¹æºä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ Null ç±»å‹ä»ç„¶å­˜åœ¨ï¼Œä½†å®ƒä¸å†æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»ã€‚ç°åœ¨çš„ç±»å‹å±‚çº§çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š æ—¢ç„¶ Null å·²ä¸å†è¢«çœ‹ä½œæ‰€æœ‰ç±»å‹çš„å­ç±»ï¼Œé‚£ä¹ˆé™¤äº†ç‰¹æ®Šçš„ Null ç±»å‹å…è®¸ä¼ é€’ null å€¼ï¼Œå…¶ä»–ç±»å‹å‡ä¸å…è®¸ã€‚æˆ‘ä»¬å·²ç»å°†æ‰€æœ‰çš„ç±»å‹è®¾ç½®ä¸º é»˜è®¤ä¸å¯ç©º çš„ç±»å‹ã€‚å¦‚æœä½ çš„å˜é‡æ˜¯ String ç±»å‹ï¼Œå®ƒå¿…é¡»åŒ…å« ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±ä¿®å¤äº†æ‰€æœ‰çš„ç©ºå¼•ç”¨é”™è¯¯ã€‚ ä½¿ç”¨å¯ç©ºç±»å‹Dartåœ¨å®ç°ç©ºå®‰å…¨ä¹‹å‰ï¼Œæ˜¯å­˜åœ¨éšå¼è½¬æ¢çš„ã€‚ä¸ºäº†ä¿æŒå¥å…¨æ€§ï¼Œç¼–è¯‘å™¨ä¸º requireStringNotObject() çš„å‚æ•°é™é»˜æ·»åŠ äº† as String å¼ºåˆ¶è½¬æ¢ã€‚ 12345678910// Without null safety:requireStringNotObject(String definitelyString) &#123; print(definitelyString.length);&#125;main() &#123; Object maybeString = &#x27;it is&#x27;; requireStringNotObject(maybeString);&#125; ç¡®ä¿æ­£ç¡®æ€§æ— æ•ˆçš„è¿”å›å€¼12345// Without null safety:String missingReturn() &#123; // No return.&#125; åœ¨ç©ºå®‰å…¨ä»¥å‰ï¼ŒDartä¼šéšå¼çš„è¿”å›ä¸€ä¸ªnullã€‚ æœªåˆå§‹åŒ–çš„å˜é‡ é¡¶å±‚å˜é‡å’Œé™æ€å­—æ®µå¿…é¡»åŒ…å«ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ã€‚ ç”±äºå®ƒä»¬èƒ½åœ¨ç¨‹åºé‡Œçš„ä»»ä½•ä½ç½®è¢«è®¿é—®åˆ°ï¼Œç¼–è¯‘å™¨æ— æ³•ä¿è¯å®ƒä»¬åœ¨è¢«ä½¿ç”¨å‰å·²è¢«èµ‹å€¼ã€‚å”¯ä¸€ä¿é™©çš„é€‰é¡¹æ˜¯è¦æ±‚å…¶æœ¬èº«åŒ…å«åˆå§‹åŒ–è¡¨è¾¾å¼ï¼Œä»¥ç¡®ä¿äº§ç”ŸåŒ¹é…çš„ç±»å‹çš„å€¼ã€‚ 123456789// Using null safety:int topLevel = 0;class SomeClass &#123; static int staticField = 0;&#125; å®ä¾‹çš„å­—æ®µä¹Ÿå¿…é¡»åœ¨å£°æ˜æ—¶åŒ…å«åˆå§‹åŒ–æ–¹æ³•ï¼Œå¯ä»¥ä¸ºå¸¸è§åˆå§‹åŒ–å½¢å¼ï¼Œä¹Ÿå¯ä»¥åœ¨å®ä¾‹çš„æ„é€ æ–¹æ³•ä¸­è¿›è¡Œåˆå§‹åŒ–ã€‚ è¿™ç±»åˆå§‹åŒ–éå¸¸å¸¸è§ã€‚ä¸¾ä¸ªä¾‹å­ï¼š 12345678910111213// Using null safety:class SomeClass &#123; int atDeclaration = 0; int initializingFormal; int initializationList; SomeClass(this.initializingFormal) : initializationList = 0;&#125; å±€éƒ¨å˜é‡çš„çµæ´»åº¦æœ€é«˜ã€‚ä¸€ä¸ªéç©ºçš„å˜é‡ ä¸ä¸€å®šéœ€è¦ ä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³•ã€‚è¿™é‡Œæœ‰ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼š 12345678910111213141516// Using null safety:int tracingFibonacci(int n) &#123; int result; if (n &lt; 2) &#123; result = n; &#125; else &#123; result = tracingFibonacci(n - 2) + tracingFibonacci(n - 1); &#125; print(result); return result;&#125; æ­¤å¤„éµå¾ªçš„è§„åˆ™æ˜¯å±€éƒ¨å˜é‡å¿…é¡»ç¡®ä¿åœ¨ä½¿ç”¨å‰è¢«èµ‹å€¼ã€‚ å¯é€‰å‚æ•°å¿…é¡»å…·æœ‰é»˜è®¤å€¼ã€‚ å¦‚æœä¸€ä¸ªå¯é€‰ä½ç½®å‚æ•°æˆ–å¯é€‰å‘½åå‚æ•°æ²¡æœ‰ä¼ é€’å†…å®¹ï¼ŒDart ä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤å€¼è¿›è¡Œå¡«å……ã€‚åœ¨æœªæŒ‡å®šé»˜è®¤å€¼çš„æƒ…å†µä¸‹ï¼Œé»˜è®¤çš„ é»˜è®¤å€¼ä¸º nullï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œéç©ºç±»å‹çš„å‚æ•°å°±è¦å‡ºäº‹äº†ã€‚ ä¸å¯ç©ºç±»å‹å…±èˆæ™ºèƒ½çš„éç©ºåˆ¤æ–­æ–¹æ³•123456789101112131415161718// Using null safety:showGizmo(Thing? thing) &#123;//doohickeyåé¢å¯ä»¥ä¸ç”¨?ç¬¦å·ã€‚//Dartä» C# ç›¸åŒåŠŸèƒ½çš„è®¾è®¡ä¸­å€Ÿé‰´äº†ä¸€ä¸ªèªæ˜çš„å¤„ç†æ–¹æ³•ã€‚å½“ä½ åœ¨é“¾å¼æ–¹æ³•è°ƒç”¨ä¸­ä½¿ç”¨é¿ç©ºè¿ç®—ç¬¦æ—¶ï¼Œå¦‚æœæ¥æ”¶å™¨è¢«åˆ¤æ–­ä¸º nullï¼Œé‚£ä¹ˆ æ•´ä¸ªé“¾å¼è°ƒç”¨çš„å‰©ä½™éƒ¨åˆ†éƒ½ä¼šè¢«æˆªæ–­å¹¶è·³è¿‡ã€‚ print(thing?.doohickey.gizmo);&#125;// Null-aware cascade:receiver?..method();// Null-aware index operator:receiver?[index];function?.call(arg1, arg2); ç©ºå€¼æ–­è¨€æ“ä½œç¬¦æœ‰æ—¶å€™æ“ä½œå¯ç©ºå˜é‡çš„æŸä¸ªå±æ€§ï¼Œå½“å˜é‡ä¸ºç©ºï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ä»£ç æ˜¯é€šä¸è¿‡lintæ£€æµ‹çš„ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦ä½¿ç”¨ç©ºå€¼æ–­è¨€æ“ä½œç¬¦ï¼Œå½“å‡ºç°å¼‚å¸¸ä¼šæŠ›å‡ºã€‚ 123456// Using null safety:String toString() &#123; if (code == 200) return &#x27;OK&#x27;; return &#x27;ERROR $code $&#123;error!.toUpperCase()&#125;&#x27;;//ä½¿ç”¨!è½¬æ¢æˆéç©º&#125; æ‡’åŠ è½½çš„å˜é‡lateå…³é”®å­—æ˜¯â€œåœ¨è¿è¡Œæ—¶è€Œéç¼–è¯‘æ—¶å¯¹å˜é‡è¿›è¡Œçº¦æŸâ€ã€‚è¿™å°±è®© late è¿™ä¸ªè¯è¯­çº¦ç­‰äº ä½•æ—¶ æ‰§è¡Œå¯¹å˜é‡çš„å¼ºåˆ¶çº¦æŸã€‚ 12345678910// Using null safety:class Coffee &#123; late String _temperature; void heat() &#123; _temperature = &#x27;hot&#x27;; &#125; void chill() &#123; _temperature = &#x27;iced&#x27;; &#125; String serve() =&gt; _temperature + &#x27; coffee&#x27;;&#125; å½“å‰åœºæ™¯é‡Œï¼Œå­—æ®µå¹¶ä¸ä¸€å®šå·²ç»è¢«åˆå§‹åŒ–ï¼Œæ¯æ¬¡å®ƒè¢«è¯»å–æ—¶ï¼Œéƒ½ä¼šæ’å…¥ä¸€ä¸ªè¿è¡Œæ—¶çš„æ£€æŸ¥ï¼Œä»¥ç¡®ä¿å®ƒå·²ç»è¢«èµ‹å€¼ã€‚å¦‚æœå¹¶æœªèµ‹å€¼ï¼Œå°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ç»™ä¸€ä¸ªå˜é‡åŠ ä¸Š String ç±»å‹å°±æ˜¯åœ¨è¯´ï¼šâ€œæˆ‘çš„å€¼ç»å¯¹æ˜¯å­—ç¬¦ä¸²â€ï¼Œè€ŒåŠ ä¸Š late ä¿®é¥°ç¬¦æ„å‘³ç€ï¼šâ€œæ¯æ¬¡è¿è¡Œéƒ½è¦æ£€æŸ¥æ£€æŸ¥æ˜¯ä¸æ˜¯çœŸçš„â€ã€‚ å»¶è¿Ÿåˆå§‹åŒ–1234567// Using null safety:class Weather &#123; late int _temperature = _readThermometer();&#125; å½“ä½ è¿™ä¹ˆå£°æ˜æ—¶ï¼Œä¼šè®©åˆå§‹åŒ– å»¶è¿Ÿ æ‰§è¡Œã€‚å®ä¾‹çš„æ„é€ å°†ä¼šå»¶è¿Ÿåˆ°å­—æ®µé¦–æ¬¡è¢«è®¿é—®æ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯åœ¨å®ä¾‹æ„é€ æ—¶å°±åˆå§‹åŒ–ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒè®©å­—æ®µçš„åˆå§‹åŒ–æ–¹å¼å˜å¾—ä¸é¡¶å±‚å˜é‡å’Œé™æ€å­—æ®µå®Œå…¨ä¸€è‡´ã€‚å½“åˆå§‹åŒ–è¡¨è¾¾å¼æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½ï¼Œå¹¶ä¸”æœ‰å¯èƒ½ä¸éœ€è¦æ—¶ï¼Œè¿™ä¼šå˜å¾—éå¸¸æœ‰ç”¨ã€‚ å»¶è¿Ÿçš„ç»ˆå€¼12345678910// Using null safety:class Coffee &#123; late final String _temperature; void heat() &#123; _temperature = &#x27;hot&#x27;; &#125; void chill() &#123; _temperature = &#x27;iced&#x27;; &#125; String serve() =&gt; _temperature + &#x27; coffee&#x27;;&#125; ä¸æ™®é€šçš„ final å­—æ®µä¸åŒï¼Œä½ ä¸éœ€è¦åœ¨å£°æ˜æˆ–æ„é€ æ—¶å°±å°†å…¶åˆå§‹åŒ–ã€‚ä½ å¯ä»¥ç¨ååœ¨è¿è¡Œä¸­çš„æŸä¸ªåœ°æ–¹åŠ è½½å®ƒã€‚ä½†æ˜¯ä½ åªèƒ½å¯¹å…¶è¿›è¡Œ ä¸€æ¬¡ èµ‹å€¼ï¼Œå¹¶ä¸”å®ƒåœ¨è¿è¡Œæ—¶ä¼šè¿›è¡Œæ ¡éªŒã€‚å¦‚æœä½ å°è¯•å¯¹å®ƒè¿›è¡Œå¤šæ¬¡èµ‹å€¼ï¼Œæ¯”å¦‚ heat() å’Œ chill() éƒ½è°ƒç”¨ï¼Œé‚£ä¹ˆç¬¬äºŒæ¬¡çš„èµ‹å€¼ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ˜¯ç¡®å®šå­—æ®µçŠ¶æ€çš„å¥½æ–¹æ³•ï¼Œå®ƒæœ€ç»ˆä¼šè¢«åˆå§‹åŒ–ï¼Œå¹¶ä¸”åœ¨åˆå§‹åŒ–åæ˜¯æ— æ³•æ”¹å˜çš„ã€‚ æ¢å¥è¯è¯´ï¼Œæ–°çš„ late ä¿®é¥°ç¬¦ä¸ Dart çš„å…¶ä»–å˜é‡ä¿®é¥°ç¬¦ç»“åˆåï¼Œå·²ç»å®ç°äº† Kotlin ä¸­çš„ lateinit å’Œ Swift ä¸­çš„ lazy çš„å¤§é‡ç‰¹æ€§ã€‚å¦‚æœä½ éœ€è¦ç»™å±€éƒ¨å˜é‡åŠ ä¸Šä¸€äº›å»¶è¿Ÿåˆå§‹åŒ–ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å±€éƒ¨å˜é‡ä¸Šä½¿ç”¨å®ƒã€‚ å¿…éœ€çš„å‘½åå‚æ•°12//è¿™é‡Œçš„æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»é€šè¿‡å‘½åæ¥ä¼ é€’ã€‚å‚æ•° a å’Œ c æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥çœç•¥ã€‚å‚æ•° b å’Œ d æ˜¯å¿…éœ€çš„ï¼Œè°ƒç”¨æ—¶å¿…é¡»ä¼ é€’ã€‚åœ¨è¿™é‡Œè¯·æ³¨æ„ï¼Œæ˜¯å¦å¿…éœ€å’Œæ˜¯å¦å¯ç©ºæ— å…³ã€‚function(&#123;int? a, required int? b, int? c, required int? d&#125;) &#123;&#125; æ€»ç»“ ç±»å‹é»˜è®¤æ˜¯éç©ºçš„ï¼Œå¯ä»¥æ·»åŠ  ? å˜ä¸ºå¯ç©ºçš„ã€‚ å¯é€‰å‚æ•°å¿…é¡»æ˜¯å¯ç©ºçš„æˆ–è€…åŒ…å«é»˜è®¤å€¼çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨ required æ¥æ„å»ºä¸€ä¸ªéå¯é€‰å‘½åå‚æ•°ã€‚éç©ºçš„å…¨å±€å˜é‡å’Œé™æ€å­—æ®µå¿…é¡»åœ¨å£°æ˜æ—¶è¢«åˆå§‹åŒ–ã€‚å®ä¾‹çš„éç©ºå­—æ®µå¿…é¡»åœ¨æ„é€ ä½“å¼€å§‹æ‰§è¡Œå‰è¢«åˆå§‹åŒ–ã€‚ å¦‚æœæ¥æ”¶è€…ä¸º nullï¼Œé‚£ä¹ˆåœ¨å…¶é¿ç©ºè¿ç®—ç¬¦ä¹‹åçš„é“¾å¼æ–¹æ³•è°ƒç”¨éƒ½ä¼šè¢«æˆªæ–­ã€‚æˆ‘ä»¬å¼•å…¥äº†æ–°çš„ç©ºåˆ¤æ–­çº§è”æ“ä½œç¬¦ (?..) åŠç´¢å¼•æ“ä½œç¬¦ (?[])ã€‚åç¼€ç©ºæ–­è¨€â€œé‡ç‚¹â€æ“ä½œç¬¦ (!) å¯ä»¥å°†å¯ç©ºçš„æ“ä½œå¯¹è±¡è½¬æ¢ä¸ºå¯¹åº”çš„éç©ºç±»å‹ã€‚ æ–°çš„æµç¨‹åˆ†æï¼Œè®©ä½ æ›´å®‰å…¨åœ°å°†å¯ç©ºçš„å±€éƒ¨å˜é‡å’Œå‚æ•°ï¼Œè½¬å˜ä¸ºå¯ç”¨çš„éç©ºç±»å‹ã€‚å®ƒåŒæ—¶è¿˜å¯¹ç±»å‹æå‡ã€é—æ¼çš„è¿”å›ã€ä¸å¯è¾¾çš„ä»£ç ä»¥åŠå˜é‡çš„åˆå§‹åŒ–ï¼Œæœ‰ç€æ›´ä¸ºæ™ºèƒ½çš„è§„åˆ™ã€‚ late ä¿®é¥°ç¬¦ä»¥åœ¨è¿è¡Œæ—¶æ¯æ¬¡éƒ½è¿›è¡Œæ£€æŸ¥çš„é«˜æ˜‚ä»£ä»·ï¼Œè®©ä½ åœ¨ä¸€äº›åŸæœ¬æ— æ³•ä½¿ç”¨çš„åœ°æ–¹ï¼Œèƒ½å¤Ÿä½¿ç”¨éç©ºç±»å‹å’Œ finalã€‚å®ƒåŒæ—¶æä¾›äº†å¯¹å­—æ®µå»¶è¿Ÿåˆå§‹åŒ–çš„æ”¯æŒã€‚ List ç±»ç°åœ¨ä¸å†å…è®¸åŒ…å«æœªåˆå§‹åŒ–çš„å…ƒç´ ã€‚ å‚è€ƒ ç©ºå®‰å…¨å®˜æ–¹æ–‡æ¡£ Null safety codelab è¿ç§»è‡³ç©ºå®‰å…¨","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"}]},{"title":"isolate","date":"2024-01-07T08:50:41.257Z","path":"wiki/Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹/isolate/","text":"å®šä¹‰isolateæ˜¯Dartå¯¹actorå¹¶å‘æ¨¡å¼çš„å®ç°ã€‚è¿è¡Œä¸­çš„Dartç¨‹åºç”±ä¸€ä¸ªæˆ–å¤šä¸ªactorç»„æˆï¼Œè¿™äº›actorä¹Ÿå°±æ˜¯Dartæ¦‚å¿µé‡Œé¢çš„isolateã€‚isolateæ˜¯æœ‰è‡ªå·±çš„å†…å­˜å’Œå•çº¿ç¨‹æ§åˆ¶çš„è¿è¡Œå®ä½“ã€‚isolateæœ¬èº«çš„æ„æ€æ˜¯â€œéš”ç¦»â€ï¼Œå› ä¸ºisolateä¹‹é—´çš„å†…å­˜åœ¨é€»è¾‘ä¸Šæ˜¯éš”ç¦»çš„ã€‚isolateä¸­çš„ä»£ç æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œä»»ä½•Dartç¨‹åºçš„å¹¶å‘éƒ½æ˜¯è¿è¡Œå¤šä¸ªisolateçš„ç»“æœã€‚å› ä¸ºDartæ²¡æœ‰å…±äº«å†…å­˜çš„å¹¶å‘ï¼Œæ²¡æœ‰ç«äº‰çš„å¯èƒ½æ€§æ‰€ä»¥ä¸éœ€è¦é”ï¼Œä¹Ÿå°±ä¸ç”¨æ‹…å¿ƒæ­»é”çš„é—®é¢˜ã€‚ ç”±äºisolateä¹‹é—´æ²¡æœ‰å…±äº«å†…å­˜ï¼Œæ‰€ä»¥ä»–ä»¬ä¹‹é—´çš„é€šä¿¡å”¯ä¸€æ–¹å¼åªèƒ½æ˜¯é€šè¿‡Portè¿›è¡Œï¼Œè€Œä¸”Dartä¸­çš„æ¶ˆæ¯ä¼ é€’æ€»æ˜¯å¼‚æ­¥çš„ã€‚ isolateè·Ÿçº¿ç¨‹ç±»ä¼¼ï¼Œä½†çº¿ç¨‹ä¹‹é—´å¯ä»¥å…±äº«å†…å­˜ï¼Œisolateä¸å¯ä»¥ã€‚ åŸç† åˆå§‹åŒ–isolateæ•°æ®ç»“æ„ åˆå§‹åŒ–å †å†…å­˜(Heap) è¿›å…¥æ–°åˆ›å»ºçš„isolateï¼Œä½¿ç”¨è·Ÿisolateä¸€å¯¹ä¸€çš„çº¿ç¨‹è¿è¡Œisolate é…ç½®Port é…ç½®æ¶ˆæ¯å¤„ç†æœºåˆ¶(Message Handler) é…ç½®Debuggerï¼Œå¦‚æœæœ‰å¿…è¦çš„è¯ å°†isolateæ³¨å†Œåˆ°å…¨å±€ç›‘æ§å™¨ï¼ˆMonitorï¼‰ 12345isolate.cc å®ä¾‹å‚è€ƒ Dart å¼‚æ­¥ç¼–ç¨‹ï¼šéš”ç¦»åŒºå’Œäº‹ä»¶å¾ªç¯ èŠä¸€èŠFlutterçº¿ç¨‹ç®¡ç†ä¸Dart Isolateæœºåˆ¶","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"dartå‘½ä»¤è¡Œå·¥å…·","date":"2024-01-07T08:50:41.256Z","path":"wiki/Flutter/Dart/dartå‘½ä»¤è¡Œå·¥å…·/","text":"dart analyze å‘½ä»¤ä»£ç åˆ†æå·¥å…· 1234567# è®¾ç½®åˆ†æç­‰çº§ --no-fatal-warningsdart analyze --fatal-infos# æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶dart analyze [&lt;DIRECTORY&gt; | &lt;DART_FILE&gt;] dart compile å‘½ä»¤ç¼–è¯‘dartæ–‡ä»¶ å­å‘½ä»¤ exe: ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ aot-snapshotï¼šç¼–è¯‘æˆAOTå¿«ç…§ jit-snapshotï¼šç¼–è¯‘æˆJITå¿«ç…§ kernelï¼šç¼–è¯‘æˆkernelæ–‡ä»¶ jsï¼šç¼–è¯‘æˆjsæ–‡ä»¶ 12345dart compile exe main.dart -o main.exe# æŸ¥çœ‹å­å‘½ä»¤ç”¨æ³•dart compile exe --help dart create å‘½ä»¤åˆ›å»ºDarté¡¹ç›®ï¼Œé€šè¿‡-tå‚æ•°è®¾ç½®ä¸åŒçš„é¡¹ç›®æ¨¡ç‰ˆ æ¨¡ç‰ˆç±»å‹ cli console package server-shelf web dart doc å‘½ä»¤ç”Ÿæˆæ–‡æ¡£ dart fix å‘½ä»¤æŸ¥æ‰¾å’Œä¿®å¤ä»£ç ä¸­çš„é—®é¢˜ 1234567891011121314# é¢„è§ˆå»ºè®®çš„ä¿®æ”¹dart fix --dry-run# åº”ç”¨å»ºè®®çš„ä¿®æ”¹dart fix --applydart fix --apply --code annotate_overrides dart fix --apply --code prefer_const_constructors dart fix --apply --code prefer_const_declarations dart fix --apply --code unnecessary_brace_in_string_interps dart fix --apply --code unnecessary_cast dart fix --apply --code unused_import dart format å‘½ä»¤æ ¼å¼åŒ–ä»£ç  123456# è®¾ç½®ç›®å½•dart format .# ä¸‹é¢çš„å‘½ä»¤å°†ä¼šå¯¹ lib ç›®å½•ä¸­çš„æ‰€æœ‰ Dart æ–‡ä»¶ï¼Œä»¥åŠä¸€ä¸ª bin ç›®å½•ä¸‹çš„ Dart æ–‡ä»¶è¿›è¡Œæ ¼å¼æ•´ç†dart format lib bin/updater.dart dart pub å‘½ä»¤ç®¡ç†ä¾èµ– å­å‘½ä»¤ add: cache: ç®¡ç†æœ¬åœ°ç¼“å­˜ deps: æ˜¾ç¤ºå½“å‰Packageä½¿ç”¨çš„æ‰€æœ‰ä¾èµ–é¡¹ downgrade: æ£€ç´¢å½“å‰Packageæ‰€ä¾èµ–çš„å…¶ä»–Packageçš„æœ€ä½ç‰ˆæœ¬ get: ç”¨äºæ£€ç´¢å½“å‰ Package æ‰€ä¾èµ–çš„å…¶å®ƒ Packageã€‚å¦‚æœ pubspec.lock æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™æ ¹æ®è¯¥æ–‡ä»¶ä¸­ä¿å­˜çš„ä¾èµ–é¡¹ç‰ˆæœ¬è·å–å¯¹åº”çš„ä¾èµ–é¡¹ã€‚å¦‚æœ‰å¿…è¦ï¼Œå°†ä¼šåˆ›å»ºæˆ–æ›´æ–°è¯¥æ–‡ä»¶ã€‚ global: outdated: æŸ¥çœ‹å½“å‰è½¯ä»¶åŒ…æ‰€ä¾èµ–çš„æ¯ä¸ª packageï¼Œç¡®å®šå“ªäº› package çš„ä¾èµ–é¡¹å·²è¿‡æ—¶ï¼Œå¹¶ä¸ºæ‚¨æä¾›æœ‰å…³å¦‚ä½•æ›´æ–°å®ƒä»¬çš„å»ºè®®ã€‚å½“æ‚¨è¦æ›´æ–° package çš„ä¾èµ–æ€§æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤å‘½ä»¤ã€‚ publish: remove: token: upgrade: ç”¨äºæ£€ç´¢å½“å‰ Package æ‰€ä¾èµ–çš„å…¶å®ƒ Package çš„æœ€æ–°ç‰ˆæœ¬ã€‚å¦‚æœ pubspec.lock æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œåˆ™å¿½ç•¥å…¶ä¿å­˜çš„ç‰ˆæœ¬å¹¶ä»¥ pubspec æ–‡ä»¶ä¸­æŒ‡å®šçš„æœ€æ–°ç‰ˆæœ¬ä¸ºä¸»ã€‚å¦‚æœ‰å¿…è¦ï¼Œå°†ä¼šåˆ›å»ºæˆ–æ›´æ–°è¯¥æ–‡ä»¶ã€‚ dart run å‘½ä»¤12345678910dart run [options] [&lt;DART_FILE&gt; | &lt;PACKAGE_TARGET&gt;] [args]# è¿è¡Œä¸€ä¸ªDartç¨‹åºdart run tool/debug.dart# å¯åŠ¨æ–­è¨€dart run --enable-asserts tool/debug.dart# ä½¿ç”¨å¼€å‘è€…å·¥å…·æ¥è°ƒè¯•å’Œæ€§èƒ½åˆ†ædart run --observe tool/debug.dart dart test å‘½ä»¤è¿è¡Œæµ‹è¯•è„šæœ¬ build runner å‘½ä»¤build_runner çš„å‘½ä»¤éœ€è¦ä¸ä½¿ç”¨ Dart ç¼–è¯‘ç³»ç»Ÿ ä»è¾“å…¥æ–‡ä»¶ç”Ÿæˆè¾“å‡ºæ–‡ä»¶çš„ç”Ÿæˆå™¨ Package é…åˆä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œjson_serializable ä¸ built_value_generator è¿™ä¸¤ä¸ª Package å…±åŒå®šä¹‰äº†ç”Ÿæˆ Dart ä»£ç çš„ç”Ÿæˆå™¨ã€‚ 123456dart run build_runner builddart packages pub run build_runner build --delete-conflicting-outputs","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"}]},{"title":"TypeScriptå…¥é—¨","date":"2023-12-24T13:26:24.687Z","path":"wiki/JavaScript/TypeScriptå­¦ä¹ ç¬”è®°/","text":"çº¦å®šä½¿ç”¨ TypeScript ç¼–å†™çš„æ–‡ä»¶ä»¥ .ts ä¸ºåç¼€ï¼Œç”¨ TypeScript ç¼–å†™ React æ—¶ï¼Œä»¥ .tsx ä¸ºåç¼€ã€‚ 123456#å…¨å±€å®‰è£…typescriptnpm install -g typescript#ç¼–è¯‘tsc xxx.ts#è¿è¡Œnode xxx.js åŸºç¡€åŸå§‹æ•°æ®ç±»å‹JavaScriptçš„ç±»å‹åˆ†ä¸ºï¼š åŸå§‹æ•°æ®ç±»å‹ï¼šå¸ƒå°”å€¼ã€æ•°å€¼ã€å­—ç¬¦ä¸²ã€nullã€undeinedã€Symbolã€BigInt å¯¹è±¡ç±»å‹ æ¥å£ æ•°ç»„ 1234567891011121314151617181920### æ¥å£// æ¥å£ç±»å‹interface Person &#123; name: string; age?: number; //?è¡¨ç¤ºå¯é€‰å±æ€§ readonly id: number; //åªè¯»å±æ€§ [propName: string]: any; //ä»»æ„å±æ€§&#125;let tom: Person = &#123; id: 89757, name: &#x27;Tom&#x27;, age: 25, gender: &#x27;male&#x27;&#125;; å£°æ˜æ–‡ä»¶å£°æ˜æ–‡ä»¶å¿…éœ€ä»¥ .d.ts ä¸ºåç¼€ã€‚ åº“çš„ä½¿ç”¨åœºæ™¯ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š å…¨å±€å˜é‡ï¼šé€šè¿‡ æ ‡ç­¾å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œæ³¨å…¥å…¨å±€å˜é‡ npm åŒ…ï¼šé€šè¿‡ import foo from 'foo' å¯¼å…¥ï¼Œç¬¦åˆ ES6 æ¨¡å—è§„èŒƒ UMD åº“ï¼šæ—¢å¯ä»¥é€šè¿‡ æ ‡ç­¾å¼•å…¥ï¼Œåˆå¯ä»¥é€šè¿‡ import å¯¼å…¥ ç›´æ¥æ‰©å±•å…¨å±€å˜é‡ï¼šé€šè¿‡ æ ‡ç­¾å¼•å…¥åï¼Œæ”¹å˜ä¸€ä¸ªå…¨å±€å˜é‡çš„ç»“æ„ åœ¨ npm åŒ…æˆ– UMD åº“ä¸­æ‰©å±•å…¨å±€å˜é‡ï¼šå¼•ç”¨ npm åŒ…æˆ– UMD åº“åï¼Œæ”¹å˜ä¸€ä¸ªå…¨å±€å˜é‡çš„ç»“æ„ æ¨¡å—æ’ä»¶ï¼šé€šè¿‡ æˆ– import å¯¼å…¥åï¼Œæ”¹å˜å¦ä¸€ä¸ªæ¨¡å—çš„ç»“æ„ åœ¨ ES6 æ¨¡å—ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ export default å¯ä»¥å¯¼å‡ºä¸€ä¸ªé»˜è®¤å€¼ï¼Œä½¿ç”¨æ–¹å¯ä»¥ç”¨ import foo from 'foo' è€Œä¸æ˜¯ import { foo } from 'foo' æ¥å¯¼å…¥è¿™ä¸ªé»˜è®¤å€¼ æ³¨æ„ï¼Œåªæœ‰ functionã€class å’Œ interface å¯ä»¥ç›´æ¥é»˜è®¤å¯¼å‡ºï¼Œå…¶ä»–çš„å˜é‡éœ€è¦å…ˆå®šä¹‰å‡ºæ¥ï¼Œå†é»˜è®¤å¯¼å‡º 1234567891011121314declare var å£°æ˜å…¨å±€å˜é‡declare function å£°æ˜å…¨å±€æ–¹æ³•declare class å£°æ˜å…¨å±€ç±»declare enum å£°æ˜å…¨å±€æšä¸¾ç±»å‹declare namespace å£°æ˜ï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å…¨å±€å¯¹è±¡interface å’Œ type å£°æ˜å…¨å±€ç±»å‹export å¯¼å‡ºå˜é‡export namespace å¯¼å‡ºï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å¯¹è±¡export default ES6 é»˜è®¤å¯¼å‡ºexport = commonjs å¯¼å‡ºæ¨¡å—export as namespace UMD åº“å£°æ˜å…¨å±€å˜é‡declare global æ‰©å±•å…¨å±€å˜é‡declare module æ‰©å±•æ¨¡å—/// &lt;reference /&gt; ä¸‰æ–œçº¿æŒ‡ä»¤ importä¸­@çš„ä½œç”¨è·¯å¾„æ˜ å°„ï¼Œå¯ä»¥åœ¨tsconfig.jsonä¸­é…ç½® 12345678&#123; &quot;compilerOptions&quot;: &#123; &quot;baseUrl&quot;: &quot;.&quot;, &quot;paths&quot;: &#123; &quot;@nui/*&quot;: [&quot;src/*&quot;] &#125; &#125;&#125; ä½¿ç”¨ 123import &#123; YYYY &#125; from &#x27;@nui/xxx&#x27;; æ‰©å±•å…¨å±€å˜é‡çš„ç±»å‹1234567891011interface String &#123; // è¿™é‡Œæ˜¯æ‰©å±•ï¼Œä¸æ˜¯è¦†ç›–ï¼Œæ‰€ä»¥æ”¾å¿ƒä½¿ç”¨ double(): string;&#125;String.prototype.double = function () &#123; return this + &#x27;+&#x27; + this;&#125;;console.log(&#x27;hello&#x27;.double()); å‚è€ƒ å®˜æ–¹æ‰‹å†Œ é˜®ä¸€å³°TypeScriptæ•™ç¨‹ TypeScript å…¥é—¨æ•™ç¨‹","tags":[{"name":"TypeScript JavaScript","slug":"TypeScript-JavaScript","permalink":"http://airshu.github.io/tags/TypeScript-JavaScript/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"}]},{"title":"tsconfig.json","date":"2023-12-24T13:26:24.687Z","path":"wiki/JavaScript/tsconfig.json/","text":"å¦‚æœä¸€ä¸ªç›®å½•ä¸‹å­˜åœ¨ tsconfig.json æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒæ„å‘³ç€è¿™ä¸ªç›®å½•æ˜¯ TypeScript é¡¹ç›®çš„æ ¹ç›®å½•ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455// configs/base.json&#123; &quot;compilerOptions&quot;: &#123;&#125;&#125;// tsconfig.json&#123; &quot;extends&quot;: &quot;./configs/base&quot;, //ç»§æ‰¿é…ç½® &quot;compilerOptions&quot;: &#123; //ç¼–è¯‘é€‰é¡¹ &quot;incremental&quot;: true, //å¼€å¯å¢é‡ç¼–è¯‘ &quot;tsBuildInfoFile&quot;:&quot;./&quot;,//æŒ‡å®šå¢é‡æ¯”ç¼–è¯‘çš„æ–‡ä»¶ä½ç½® &quot;diagnostics&quot;:true,//æ‰“å°è¯Šæ–­ä¿¡æ¯ &quot;listFiles&quot;:true,//æ‰“å°ç¼–è¯‘çš„æ–‡ä»¶ &quot;&quot;:&quot;&quot;, /* æŒ‡å®šç¼–è¯‘ç‰ˆæœ¬ï¼š &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, &#x27;ES2018&#x27;, &#x27;ES2019&#x27; or &#x27;ESNEXT&#x27;. */ &quot;target&quot;: &quot;es6&quot;, /* æŒ‡å®šæ¨¡å—ä»£ç çš„ç”Ÿæˆæ–¹å¼: &#x27;none&#x27;, &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27;, &#x27;es2015&#x27;, or &#x27;ESNext&#x27;. */ &quot;module&quot;: &quot;commonjs&quot;, //æ¨¡ç‰ˆæ ‡å‡† &quot;lib&quot;: [], //æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶ &quot;allowJs&quot;: true, //å…è®¸ç¼–è¯‘jsæ–‡ä»¶ &quot;checkJs&quot;: true, //æ£€æŸ¥å’ŒæŠ¥å‘Šjsæ–‡ä»¶ä¸­çš„é”™è¯¯ &quot;jsx&quot;: &quot;preserve&quot;,//æŒ‡å®šjsxä»£ç ç”¨äºçš„å¼€å‘ç¯å¢ƒï¼š preserveã€reactã€react-native &quot;declaration&quot;: false, //æ˜¯å¦åœ¨ç¼–è¯‘çš„æ—¶å€™ç”Ÿæˆç›¸åº”çš„d.tså£°æ˜æ–‡ä»¶ã€‚declarationå’ŒallowJsä¸èƒ½åŒæ—¶è®¾ç½®ä¸ºtrue &quot;declarationMap&quot;: true, //æ˜¯å¦åœ¨ç¼–è¯‘çš„æ—¶å€™ç”Ÿæˆç›¸åº”çš„mapå£°æ˜æ–‡ä»¶ &quot;sourceMap&quot;: true,// &quot;outFile&quot;: &quot;./&quot;, //æŒ‡å®šè¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œåªæœ‰è®¾ç½®moduleçš„å€¼ä¸ºamdå’Œsystemæ¨¡å—æ—¶æ‰æ”¯æŒè¿™ä¸ªé…ç½® &quot;outDir&quot;: &quot;./&quot;, //æŒ‡å®šè¾“å‡ºæ–‡ä»¶å¤¹ &quot;rootDir&quot;: &quot;./&quot;,//æŒ‡å®šç¼–è¯‘æ–‡ä»¶çš„æ ¹ç›®å½• &quot;composite&quot;: true,//æ˜¯å¦ç¼–è¯‘æ„å»ºå¼•ç”¨é¡¹ç›® &quot;removeComments&quot;: true,//æ˜¯å¦å°†ç¼–è¯‘åçš„æ–‡ä»¶æ³¨é‡Šåˆ é™¤æ‰ &quot;noEmit&quot;: true,//ä¸ç”Ÿæˆç¼–è¯‘æ–‡ä»¶ &quot;importHelpers&quot;: true,//æ˜¯å¦å¼•å…¥tslibé‡Œçš„å¤åˆ¶å·¥å…·å‡½æ•°ï¼Œé»˜è®¤ä¸ºfalse &quot;downlevelIteration&quot;: true,//å½“targetä¸ºâ€œes5â€æˆ–â€œes3â€æ—¶ï¼Œä¸ºâ€œfor-ofâ€ã€â€œspreadâ€å’Œâ€œdestructuringâ€ä¸­çš„è¿­ä»£å™¨æä¾›å®Œå…¨æ”¯æŒ &quot;strict&quot;: true,//å¼€å¯æ‰€æœ‰ç±»å‹æ£€æŸ¥ &quot;noImplicitAny&quot;: true,//æ²¡æœ‰è®¾ç½®æ˜ç¡®ç±»å‹ä¼šæŠ¥é”™ &quot;strictNullChecks&quot;: true, //ä¸ºtrueæ—¶ï¼Œnullå’Œundefinedå€¼ä¸èƒ½èµ‹å€¼ç»™éè¿™ä¸¤ç§ç±»å‹çš„å€¼ï¼Œåˆ«çš„ç±»å‹çš„å€¼ä¹Ÿä¸èƒ½èµ‹ç»™ä»–ä»¬ï¼Œé™¤äº†anyç±»å‹ï¼Œè¿˜æœ‰ä¸ªä¾‹å¤–å°±æ˜¯undefinedå¯ä»¥èµ‹å€¼ç»™voidç±»å‹ &quot;baseUrl&quot;: &quot;/&quot;,//è®¾ç½®è§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºæœ¬ç›®å½•ï¼Œ &quot;paths&quot;: &#123;//åŸºäºbaseUrlçš„è·¯å¾„æ˜ å°„ &quot;&quot;:&quot;&quot;, &#125;, /* æŒ‡å®šæ¨¡å—çš„è§£æç­–ç•¥ï¼š nodeã€classic */ /* è‹¥æœªæŒ‡å®šï¼Œé‚£ä¹ˆåœ¨ä½¿ç”¨äº† --module AMD | System | ES2015 æ—¶çš„é»˜è®¤å€¼ä¸º Classicï¼Œå…¶å®ƒæƒ…å†µæ—¶åˆ™ä¸º Node */ &quot;moduleResolution&quot;: &quot;&quot;, &quot;&quot;: &quot;&quot;, &#125;, /* æŒ‡å®šéœ€è¦ç¼–è¯‘çš„å•ä¸ªæ–‡ä»¶åˆ—è¡¨ */ &quot;files&quot;: [ ], &quot;include&quot;: [], //æŒ‡å®šè¦ç¼–è¯‘çš„è·¯å¾„åˆ—è¡¨ &quot;exclude&quot;: [],//è¦æ’é™¤çš„ä¸ç¼–è¯‘çš„æ–‡ä»¶/æ–‡ä»¶å¤¹åˆ—è¡¨&#125; å‚è€ƒ è€—æ—¶ä¸€å¹´æ•´ç†ï¼Œå…¨ç½‘æœ€å…¨çš„TypeScriptè¸©å‘é›†é”¦(tsconfig.json å¸¸ç”¨é…ç½®é¡¹æ³¨é‡Šä»¥åŠé—®é¢˜ï¼‰ https://www.tslang.cn/docs/handbook/tsconfig-json.html","tags":[{"name":"TypeScript","slug":"TypeScript","permalink":"http://airshu.github.io/tags/TypeScript/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"}]},{"title":"å‰ç«¯æ¨¡å—åŒ–æ¦‚å¿µ","date":"2023-12-24T13:26:24.687Z","path":"wiki/JavaScript/å‰ç«¯æ¨¡å—åŒ–æ¦‚å¿µ/","text":"åœ¨NodeJSä¹‹å‰ï¼Œç”±äºæ²¡æœ‰è¿‡äºå¤æ‚çš„å¼€å‘åœºæ™¯ï¼Œå‰ç«¯æ˜¯ä¸å­˜åœ¨æ¨¡å—åŒ–çš„ï¼Œåç«¯æ‰æœ‰æ¨¡å—åŒ–ã€‚NodeJSè¯ç”Ÿä¹‹åï¼Œå®ƒä½¿ç”¨CommonJSçš„æ¨¡å—åŒ–è§„èŒƒã€‚ä»æ­¤ï¼Œjsæ¨¡å—åŒ–å¼€å§‹å¿«é€Ÿå‘å±•ã€‚ CommonJSNode.jsæ˜¯commonJSè§„èŒƒçš„ä¸»è¦å®è·µè€…ï¼Œå®ƒæœ‰å››ä¸ªé‡è¦çš„ç¯å¢ƒå˜é‡ä¸ºæ¨¡å—åŒ–çš„å®ç°æä¾›æ”¯æŒï¼šmoduleã€exportsã€requireã€globalã€‚å®é™…ä½¿ç”¨æ—¶ï¼Œç”¨module.exportså®šä¹‰å½“å‰æ¨¡å—å¯¹å¤–è¾“å‡ºçš„æ¥å£ï¼ˆä¸æ¨èç›´æ¥ç”¨exportsï¼‰ï¼Œç”¨requireåŠ è½½æ¨¡å—ã€‚ 123456789101112131415161718// å®šä¹‰æ¨¡å—math.jsvar basicNum = 0;function add(a, b) &#123; return a + b;&#125;module.exports = &#123; //åœ¨è¿™é‡Œå†™ä¸Šéœ€è¦å‘å¤–æš´éœ²çš„å‡½æ•°ã€å˜é‡ add: add, basicNum: basicNum&#125;// å¼•ç”¨è‡ªå®šä¹‰çš„æ¨¡å—æ—¶ï¼Œå‚æ•°åŒ…å«è·¯å¾„ï¼Œå¯çœç•¥.jsvar math = require(&#x27;./math&#x27;);math.add(2, 5);// å¼•ç”¨æ ¸å¿ƒæ¨¡å—æ—¶ï¼Œä¸éœ€è¦å¸¦è·¯å¾„var http = require(&#x27;http&#x27;);http.createService(...).listen(3000); AMDAMDè§„èŒƒé‡‡ç”¨å¼‚æ­¥æ–¹å¼åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“å®ƒåé¢è¯­å¥çš„è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥ï¼Œéƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œç­‰åˆ°åŠ è½½å®Œæˆä¹‹åï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¿è¡Œã€‚ CMDCMDæ˜¯å¦ä¸€ç§jsæ¨¡å—åŒ–æ–¹æ¡ˆï¼Œå®ƒä¸AMDå¾ˆç±»ä¼¼ï¼Œä¸åŒç‚¹åœ¨äºï¼šAMD æ¨å´‡ä¾èµ–å‰ç½®ã€æå‰æ‰§è¡Œï¼ŒCMDæ¨å´‡ä¾èµ–å°±è¿‘ã€å»¶è¿Ÿæ‰§è¡Œã€‚æ­¤è§„èŒƒå…¶å®æ˜¯åœ¨sea.jsæ¨å¹¿è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ã€‚ ES6 ModuleES6 åœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ä¸Šï¼Œå®ç°äº†æ¨¡å—åŠŸèƒ½ï¼Œè€Œä¸”å®ç°å¾—ç›¸å½“ç®€å•ï¼Œæ—¨åœ¨æˆä¸ºæµè§ˆå™¨å’ŒæœåŠ¡å™¨é€šç”¨çš„æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚å…¶æ¨¡å—åŠŸèƒ½ä¸»è¦ç”±ä¸¤ä¸ªå‘½ä»¤æ„æˆï¼šexportå’Œimportã€‚exportå‘½ä»¤ç”¨äºè§„å®šæ¨¡å—çš„å¯¹å¤–æ¥å£ï¼Œimportå‘½ä»¤ç”¨äºè¾“å…¥å…¶ä»–æ¨¡å—æä¾›çš„åŠŸèƒ½ã€‚ 123456789101112131415/** å®šä¹‰æ¨¡å— math.js **/var basicNum = 0;var add = function (a, b) &#123; return a + b;&#125;;export &#123; basicNum, add &#125;;/** å¼•ç”¨æ¨¡å— **/import &#123; basicNum, add &#125; from &#x27;./math&#x27;;function test(ele) &#123; ele.textContent = add(99 + basicNum);&#125; ES6å’ŒCommonJSçš„å·®å¼‚ CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚ ES6 æ¨¡å—çš„è¿è¡Œæœºåˆ¶ä¸ CommonJS ä¸ä¸€æ ·ã€‚JS å¼•æ“å¯¹è„šæœ¬é™æ€åˆ†æçš„æ—¶å€™ï¼Œé‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤importï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„é‚£ä¸ªæ¨¡å—é‡Œé¢å»å–å€¼ã€‚æ¢å¥è¯è¯´ï¼ŒES6 çš„importæœ‰ç‚¹åƒ Unix ç³»ç»Ÿçš„â€œç¬¦å·è¿æ¥â€ï¼ŒåŸå§‹å€¼å˜äº†ï¼ŒimportåŠ è½½çš„å€¼ä¹Ÿä¼šè·Ÿç€å˜ã€‚å› æ­¤ï¼ŒES6 æ¨¡å—æ˜¯åŠ¨æ€å¼•ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šç¼“å­˜å€¼ï¼Œæ¨¡å—é‡Œé¢çš„å˜é‡ç»‘å®šå…¶æ‰€åœ¨çš„æ¨¡å—ã€‚ CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ è¿è¡Œæ—¶åŠ è½½: CommonJS æ¨¡å—å°±æ˜¯å¯¹è±¡ï¼›å³åœ¨è¾“å…¥æ—¶æ˜¯å…ˆåŠ è½½æ•´ä¸ªæ¨¡å—ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»å–æ–¹æ³•ï¼Œè¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ã€‚ ç¼–è¯‘æ—¶åŠ è½½: ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯é€šè¿‡ export å‘½ä»¤æ˜¾å¼æŒ‡å®šè¾“å‡ºçš„ä»£ç ï¼Œimportæ—¶é‡‡ç”¨é™æ€å‘½ä»¤çš„å½¢å¼ã€‚å³åœ¨importæ—¶å¯ä»¥æŒ‡å®šåŠ è½½æŸä¸ªè¾“å‡ºå€¼ï¼Œè€Œä¸æ˜¯åŠ è½½æ•´ä¸ªæ¨¡å—ï¼Œè¿™ç§åŠ è½½ç§°ä¸ºâ€œç¼–è¯‘æ—¶åŠ è½½â€ã€‚æ¨¡å—å†…éƒ¨å¼•ç”¨çš„å˜åŒ–ï¼Œä¼šååº”åœ¨å¤–éƒ¨ã€‚ å‚è€ƒ å‰ç«¯æ¨¡å—åŒ–â€”â€”å½»åº•ææ‡‚AMDã€CMDã€ESMå’ŒCommonJS","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/tags/JavaScript/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"}]},{"title":"é›†æˆåˆ°ç°æœ‰Androidåº”ç”¨","date":"2023-12-24T13:26:24.686Z","path":"wiki/JavaScript/ReactNative/é›†æˆåˆ°ç°æœ‰Androidåº”ç”¨/","text":"ä¸åŒç‰ˆæœ¬çš„RNå¯èƒ½é…ç½®ä¸ä¸€æ ·ï¼Œè¿™é‡Œä½¿ç”¨0.62ç‰ˆæœ¬ 1. åˆ›å»ºä¸€ä¸ªç©ºç›®å½•ç”¨äºå­˜æ”¾React Nativeé¡¹ç›®ï¼Œç„¶ååœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ª&#x2F;androidå­ç›®å½•ï¼ŒæŠŠç°æœ‰çš„Androidé¡¹ç›®æ‹·è´åˆ°è¯¥ç›®å½•2. å®‰è£…JavaScriptä¾èµ–åŒ…åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºpackage.jsonç©ºæ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼› 12345678&#123; &quot;name&quot;: &quot;MyReactNativeApp&quot;, &quot;version&quot;: &quot;0.0.1&quot;, &quot;private&quot;: true, &quot;scripts&quot;: &#123; &quot;start&quot;: &quot;yarn react-native start&quot; &#125;&#125; ç„¶åè¿è¡Œï¼šyarn add &#x72;&#x65;&#x61;&#99;&#116;&#x2d;&#x6e;&#x61;&#116;&#x69;&#x76;&#101;&#64;&#x30;&#x2e;&#54;&#x32;&#46;&#49;ï¼Œå¦‚æœä¸å†™ç‰ˆæœ¬å·ä¼šé»˜è®¤å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„React Nativeï¼ŒåŒæ—¶ä¼šå‡ºç°ç±»ä¼¼ä»¥ä¸‹çš„è­¦å‘Šä¿¡æ¯ï¼š 1warning &quot;react-native@0.52.2&quot; has unmet peer dependency &quot;react@16.2.0&quot;. åªéœ€è¦å†æ¬¡å®‰è£…å¯¹åº”ç‰ˆæœ¬å³å¯ï¼šyarn add &#114;&#101;&#x61;&#x63;&#x74;&#x40;&#49;&#54;&#x2e;&#50;&#46;&#x30; è¿™é‡Œå…¶å®ä¹Ÿå¯ä»¥ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºpackage.jsonæ–‡ä»¶ï¼Œå‘½ä»¤æ·»åŠ react-nativeåä¼šè‡ªåŠ¨ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶ã€‚Androidé¡¹ç›®ä¼šä¾èµ–node_modulesä¸­react-nativeä¸­çš„aar 3. ä¿®æ”¹Androidé¡¹ç›®ï¼Œæ·»åŠ React Native3.1 æ ¹ç›®å½•build.gradleæ–‡ä»¶é…ç½®ä»“åº“åœ°å€12345678910111213141516171819202122232425def REACT_NATIVE_VERSION = new File([&#x27;node&#x27;, &#x27;--print&#x27;,&quot;JSON.parse(require(&#x27;fs&#x27;).readFileSync(require.resolve(&#x27;react-native/package.json&#x27;), &#x27;utf-8&#x27;)).version&quot;].execute(null, rootDir).text.trim())allprojects &#123; repositories &#123; maven &#123; // All of React Native (JS, Android binaries) is installed from npm url &quot;$rootDir/../node_modules/react-native/android&quot; &#125; maven &#123; // Android JSC is installed from npm url(&quot;$rootDir/../node_modules/jsc-android/dist&quot;) &#125; ... &#125; //è¿™é‡Œä¼šå¼ºåˆ¶é¡¹ç›®çš„ç‰ˆæœ¬å·è·Ÿnode_modulesä¸­çš„ä¸€è‡´ configurations.all &#123; resolutionStrategy &#123; // Remove this override in 0.65+, as a proper fix is included in react-native itself. force &quot;com.facebook.react:react-native:&quot; + REACT_NATIVE_VERSION &#125; &#125; ...&#125; 3.2 é…ç½®ä¾èµ–123456dependencies &#123; implementation &quot;com.android.support:appcompat-v7:27.1.1&quot; ... implementation &quot;com.facebook.react:react-native:+&quot; // +è¡¨ç¤ºä½¿ç”¨æœ¬åœ°çš„ä»“åº“ä¾èµ– implementation &quot;org.webkit:android-jsc:+&quot;&#125; æ³¨æ„ï¼šAndroidé¡¹ç›®å’ŒRNé¡¹ç›®è¦ä¿æŒç»Ÿä¸€çš„ä¾èµ–ç‰ˆæœ¬ï¼Œæœ‰äº›æ–‡ç« è¯´æ‰¾ä¸åˆ°åº“ä½¿ç”¨å›ºå®šç‰ˆæœ¬å·ä¹Ÿæ˜¯ä¸€ç§æ–¹å¼ï¼Œä½†å»ºè®®ç»Ÿä¸€ç‰ˆæœ¬å· 3.3 å¯åŠ¨åŸç”Ÿæ¨¡å—çš„è‡ªåŠ¨é“¾æ¥1234567//settings.gradleæ–‡ä»¶é…ç½®apply from: file(&quot;../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesSettingsGradle(settings)//app/build.gradleä¸­é…ç½®apply from: file(&quot;../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle&quot;); applyNativeModulesAppBuildGradle(project) 3.4 é…ç½®æƒé™1234567891011121314151617//AndroidManifest.xmlé…ç½®&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;applicationæ ‡ç­¾æ·»åŠ android:networkSecurityConfig=&quot;@xml/network_security_config&quot;//å¼€å‘è€…èœå•é…ç½®&lt;activity android:name=&quot;com.facebook.react.devsupport.DevSettingsActivity&quot; /&gt;//å…è®¸httpæ¥å£ï¼ˆä» Android 9 (API level 28)å¼€å§‹ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜æ–‡ä¼ è¾“ï¼ˆhttp æ¥å£ï¼‰æ˜¯ç¦ç”¨çš„ï¼Œåªèƒ½è®¿é—® https æ¥å£ã€‚è¿™å°†é˜»æ­¢åº”ç”¨ç¨‹åºè¿æ¥åˆ°Metro bundlerï¼‰&lt;!-- ... --&gt;&lt;application android:usesCleartextTraffic=&quot;true&quot; tools:targetApi=&quot;28&quot; &gt; &lt;!-- ... --&gt;&lt;/application&gt; network_security_config.xmlæ–‡ä»¶å†…å®¹ï¼š 1234567891011&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;network-security-config xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;debug-overrides cleartextTrafficPermitted=&quot;true&quot;&gt; &lt;trust-anchors&gt; &lt;certificates src=&quot;user&quot;/&gt; &lt;certificates src=&quot;system&quot;/&gt; &lt;/trust-anchors&gt; &lt;/debug-overrides&gt; &lt;base-config cleartextTrafficPermitted=&quot;true&quot; /&gt;&lt;/network-security-config&gt; 4. ä»£ç é›†æˆ4.1 åˆ›å»ºè‡ªå®šä¹‰ReactActivity123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168package com.lqd.androidpractice.rn;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.net.Uri;import android.os.Build;import android.os.Bundle;import android.provider.Settings;import android.util.Log;import android.view.KeyEvent;import androidx.annotation.Nullable;import com.facebook.react.PackageList;import com.facebook.react.ReactInstanceManager;import com.facebook.react.ReactPackage;import com.facebook.react.ReactRootView;import com.facebook.react.common.LifecycleState;import com.facebook.react.devsupport.RedBoxHandler;import com.facebook.react.devsupport.interfaces.StackFrame;import com.facebook.react.modules.core.DefaultHardwareBackBtnHandler;import com.facebook.soloader.SoLoader;import com.lqd.androidpractice.BuildConfig;import java.util.List;public class MyReactActivity extends Activity implements DefaultHardwareBackBtnHandler &#123; private ReactRootView mReactRootView; private ReactInstanceManager mReactInstanceManager; private final int OVERLAY_PERMISSION_REQ_CODE = 1; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); Log.w(&quot;MyReactActivity&quot;, &quot;onCreate&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;); //è·å–æƒé™ if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123; if(!Settings.canDrawOverlays(this)) &#123; Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(&quot;package:&quot; + getPackageName())); startActivityForResult(intent, OVERLAY_PERMISSION_REQ_CODE); &#125; &#125; SoLoader.init(this, false); mReactRootView = new ReactRootView(this); List&lt;ReactPackage&gt; packages = new PackageList(getApplication()).getPackages();// packages.add(new MyReactNativePackage()); packages.add(new IndexPackage());//è‡ªå®šä¹‰çš„Package mReactInstanceManager = ReactInstanceManager.builder() //è®¾ç½®ä¸Šä¸‹æ–‡ .setApplication(getApplication()) .setCurrentActivity(this) .setBundleAssetName(&quot;index.android.bundle&quot;) //JS bundleä¸»å…¥å£çš„æ–‡ä»¶å .setJSMainModulePath(&quot;index&quot;) .addPackages(packages) .setUseDeveloperSupport(BuildConfig.DEBUG) //è®¾ç½®åˆ›å»ºæ—¶æœº .setInitialLifecycleState(LifecycleState.RESUMED) //JSå¼‚å¸¸å›è°ƒ .setRedBoxHandler(new MyRedBoxHandler()) .build(); //è¿™é‡Œçš„åå­—ä¸AppRegistry.registerComponentå¯¹åº” mReactRootView.startReactApplication(mReactInstanceManager, &quot;MyReactNativeApp&quot;, null); setContentView(mReactRootView); &#125; @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; if(resultCode == OVERLAY_PERMISSION_REQ_CODE) &#123; if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123; if(!Settings.canDrawOverlays(this)) &#123; &#125; &#125; &#125; mReactInstanceManager.onActivityResult(this, requestCode, resultCode, data); &#125; @Override public boolean onKeyUp(int keyCode, KeyEvent event) &#123; if (keyCode == KeyEvent.KEYCODE_MENU &amp;&amp; mReactInstanceManager != null) &#123; mReactInstanceManager.showDevOptionsDialog(); return true; &#125; return super.onKeyUp(keyCode, event); &#125; @Override public void invokeDefaultOnBackPressed() &#123; super.onBackPressed(); &#125; @Override public void onBackPressed() &#123; if (mReactInstanceManager != null) &#123; mReactInstanceManager.onBackPressed(); &#125; else &#123; super.onBackPressed(); &#125; &#125; //ç”Ÿå‘½å‘¨æœŸå›è°ƒåŒæ­¥ @Override protected void onPause() &#123; super.onPause(); if (mReactInstanceManager != null) &#123; mReactInstanceManager.onHostPause(this); &#125; &#125; @Override protected void onResume() &#123; super.onResume(); if (mReactInstanceManager != null) &#123; mReactInstanceManager.onHostResume(this, this); &#125; &#125; @Override protected void onDestroy() &#123; super.onDestroy(); if (mReactInstanceManager != null) &#123; mReactInstanceManager.onHostDestroy(this); &#125; if (mReactRootView != null) &#123; mReactRootView.unmountReactApplication(); &#125; &#125;&#125;/** * å¼‚å¸¸ä¿¡æ¯çš„å›è°ƒ */class MyRedBoxHandler implements RedBoxHandler &#123; @Override public void handleRedbox(@Nullable String title, StackFrame[] stack, ErrorType errorType) &#123; for(StackFrame stackFrame : stack) &#123; Log.w(&quot;MyReactActivity&quot;, &quot;=====handleRedbox &quot; + stackFrame.getMethod() + &quot; &quot; + stackFrame.getFileName() + &quot; &quot; + stackFrame.getLine() + &quot; &quot; + stackFrame.getColumn() + &quot; &quot;); &#125; //JSå¼‚å¸¸ Log.w(&quot;MyReactActivity&quot;, &quot;&gt;&gt;handleRedbox &quot; + title + &quot;---------------- &quot; + errorType + &quot; &quot;); &#125; @Override public boolean isReportEnabled() &#123; return true; &#125; @Override public void reportRedbox(Context context, String title, StackFrame[] stack, String sourceUrl, ReportCompletedListener reportCompletedListener) &#123; Log.w(&quot;MyReactActivity&quot;, &quot;-----handleRedbox &quot; + title + &quot; sourceUrl:&quot; + sourceUrl + &quot; &quot;); &#125;&#125; 4.2 åˆ›å»ºè‡ªå®šä¹‰PackageIndexPackage.javaæ–‡ä»¶ 12345678910111213141516171819202122232425262728293031package com.lqd.androidpractice.rn;import androidx.annotation.NonNull;import com.facebook.react.ReactPackage;import com.facebook.react.bridge.NativeModule;import com.facebook.react.bridge.ReactApplicationContext;import com.facebook.react.uimanager.ViewManager;import java.util.ArrayList;import java.util.Collections;import java.util.List;public class IndexPackage implements ReactPackage &#123; @NonNull @Override public List&lt;NativeModule&gt; createNativeModules(@NonNull ReactApplicationContext reactContext) &#123; List&lt;NativeModule&gt; modules = new ArrayList&lt;&gt;(); modules.add(new IndexModule(reactContext)); return modules; &#125; @NonNull @Override public List&lt;ViewManager&gt; createViewManagers(@NonNull ReactApplicationContext reactContext) &#123; return Collections.emptyList(); &#125;&#125; IndexModule.javaæ–‡ä»¶ 12345678910111213141516171819202122232425package com.lqd.androidpractice.rn;import androidx.annotation.NonNull;import com.facebook.react.bridge.ReactApplicationContext;import com.facebook.react.bridge.ReactContextBaseJavaModule;public class IndexModule extends ReactContextBaseJavaModule &#123; public IndexModule(@NonNull ReactApplicationContext reactContext) &#123; super(reactContext); &#125; @NonNull @Override public String getName() &#123; return &quot;index&quot;;//è·Ÿindex.jså¯¹åº” &#125; @Override public void onCatalystInstanceDestroy() &#123; super.onCatalystInstanceDestroy(); &#125;&#125; 4.3 åˆ›å»ºindex.jsæ–‡ä»¶1234567891011121314151617181920212223import React from &#x27;react&#x27;;import &#123; AppRegistry, Button, Style, Text, View&#125; from &#x27;react-native&#x27;;//import ToastExample from &#x27;./ToastExample&#x27;;class HelloWorld extends React.Component &#123; render() &#123; return ( &lt;View&gt; &lt;Text&gt;Hello, World&lt;/Text&gt; &lt;/View&gt; ); &#125;&#125;AppRegistry.registerComponent(&#x27;MyReactNativeApp&#x27;, () =&gt; HelloWorld); React Nativeä¹Ÿå°è£…äº†ä¸€ä¸ªReactActivityï¼Œç›´æ¥ç»§æ‰¿å®ƒæ›´æ–¹ä¾¿ 1234567891011121314151617181920212223242526272829303132333435363738394041424344public class RNActivity1 extends ReactActivity implements PermissionAwareActivity, DefaultHardwareBackBtnHandler &#123; protected String getMainComponentName() &#123; return &quot;index&quot;; &#125; @Override protected ReactActivityDelegate createReactActivityDelegate() &#123; return new ReactActivityDelegate(this, getMainComponentName()) &#123; @Nullable @Override public String getMainComponentName() &#123; return &quot;index&quot;; &#125; &#125;; &#125;&#125;//ä½¿ç”¨è¿™ç§æ–¹å¼Applicationéœ€è¦å®ç°ReactApplicationï¼Œå®ç°getReactNativeHostæ–¹æ³•ï¼Œå°†å¯¹åº”çš„Packageè¿›è¡Œæ³¨å†Œpublic class LQDApplication extends Application implements ReactApplication &#123; @Override public ReactNativeHost getReactNativeHost() &#123; return new ReactNativeHost(this) &#123; @Override public boolean getUseDeveloperSupport() &#123; return false; &#125; @Override protected List&lt;ReactPackage&gt; getPackages() &#123; List&lt;ReactPackage&gt; packages = new PackageList(getApplication()).getPackages(); packages.add(new IndexPackage()); packages.add(new ImagePickerPackage()); return packages; &#125; &#125;; &#125; &#125; 4.4 ç¼–è¯‘bundle12npx react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/app/src/main/assets/index.android.bundle --assets-dest android/app/src/main/res å¼€å‘ç¯å¢ƒä¼šè‡ªåŠ¨ç¼–è¯‘bundleï¼Ÿ 5. è¿è¡ŒAndroidç«¯123456789101112131415#å¼€å‘ç¯å¢ƒæ—¶è°ƒè¯•#1.å…ˆå¯åŠ¨MetroæœåŠ¡å™¨#å¦‚æœè‡ªå®šä¹‰ç«¯å£ï¼Œåˆ™éœ€è¦åœ¨å¼€å‘è€…èœå•ä¸­é…ç½®å¯¹åº”çš„ip:portnpm run start --verbose -- --port 8088 #æˆ–yarn start#2.è¿è¡Œç¨‹åºyarn react-native run-android#3.æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œé…ç½®ip:port#ç”Ÿäº§ç¯å¢ƒ#é€šè¿‡codepushè¿›è¡Œçƒ­æ›´æ–°æˆ–è€…ç¼–è¯‘bundleåˆ°assetsç›®å½•ä¸‹ é—®é¢˜æ€»ç»“æ‰¾ä¸åˆ°PackageListè¿™ä¸ªæ–‡ä»¶æ˜¯ç”Ÿæˆçš„ï¼Œåˆ é™¤buildæ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œä»¥ä¸‹yarn react-native run-android å‚è€ƒ é›†æˆåˆ°ç°æœ‰åŸç”Ÿåº”ç”¨","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"æ–‡æœ¬å‚æ•°","date":"2023-12-24T13:26:24.686Z","path":"wiki/JavaScript/ReactNative/å±æ€§å‚æ•°/æ–‡æœ¬å‚æ•°/","text":"","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"},{"name":"å±æ€§å‚æ•°","slug":"JavaScript/ReactNative/å±æ€§å‚æ•°","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/%E5%B1%9E%E6%80%A7%E5%8F%82%E6%95%B0/"}]},{"title":"å¸ƒå±€å‚æ•°","date":"2023-12-24T13:26:24.686Z","path":"wiki/JavaScript/ReactNative/å±æ€§å‚æ•°/å¸ƒå±€å‚æ•°/","text":"å…ˆçœ‹Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡ï¼Œäº†è§£Flexå¸ƒå±€çš„å†å²å’ŒåŸºæœ¬æ¦‚å¿µã€‚ Flexboxå¸ƒå±€ flex flexDirection justifyContent alignItems flexWrap alignSelf 1234567891011121314151617181920212223242526272829303132333435363738import React, &#123;Component&#125; from &#x27;react&#x27;;import &#123;StyleSheet, Text, View&#125; from &#x27;react-native&#x27;; export default class App extends Component&lt;Props&gt; &#123; render() &#123; return ( &lt;View style=&#123;styles.container&#125;&gt; &lt;View style=&#123;styles.red&#125;/&gt; &lt;View style=&#123;styles.blue&#125;/&gt; &lt;View style=&#123;styles.orange&#125;/&gt; &lt;/View&gt; ); &#125;&#125; const styles = StyleSheet.create(&#123; container: &#123; flex: 1, justifyContent: &#x27;center&#x27;, alignItems: &#x27;center&#x27;, backgroundColor: &#x27;#F5FCFF&#x27;, &#125;, red: &#123; flex: 1, width: 100, backgroundColor: &#x27;red&#x27; &#125;, blue: &#123; flex: 2, width: 100, backgroundColor: &#x27;blue&#x27; &#125;, orange: &#123; width: 100, height: 100, backgroundColor: &#x27;orange&#x27; &#125;&#125;); flexDirectionä¸»è½´æ–¹å‘ï¼Œé»˜è®¤å€¼ä¸ºcolumn row: childæ°´å¹³æ–¹å‘æ’åˆ— column: childç«–ç›´æ–¹å‘æ’åˆ—(é»˜è®¤) row-reverse: childæ°´å¹³æ–¹å‘åå‘æ’åˆ— column-reverse: childç«–ç›´æ–¹å‘åå‘æ’åˆ— justifyContentå›ºå®šå¥½ä¸»è½´ä¹‹åï¼Œå¯ä»¥é€šè¿‡justifyContentæ¥æŒ‡å®šä¸»è½´æ–¹å‘childçš„æ’åˆ—æ–¹å¼ flex-start: childåœ¨ä¸»è½´èµ·ç‚¹æ–¹å‘æ’åˆ—ï¼ˆé»˜è®¤ï¼‰ flex-endï¼šchildåœ¨ä¸»è½´ç»ˆç‚¹æ–¹å‘æ’åˆ— centerï¼šchildå±…ä¸­å¯¹é½ä¸»è½´ space-betweenï¼šchildåœ¨ä¸»è½´æ–¹å‘ç›¸é‚»childç­‰é—´è·å¯¹é½ï¼Œé¦–å°¾childä¸çˆ¶å®¹å™¨å¯¹é½ space-aroundï¼šchildåœ¨ä¸»è½´æ–¹å‘ç›¸é‚»childç­‰é—´è·å¯¹é½ï¼Œé¦–å°¾childä¸çˆ¶å®¹å™¨çš„é—´è·ç›¸ç­‰ä¸”ä¸ºç›¸é‚»childé—´è·çš„ä¸€åŠ space-evenlyï¼šchildåœ¨ä¸»è½´æ–¹å‘å‡åŒ€åˆ†å¸ƒã€‚ç›¸é‚»é—´è·ä¸é¦–å°¾é—´è·ç›¸ç­‰ alignItemså‰¯è½´ä¸Šchildçš„æ’åˆ—æ–¹å¼ flex-start: childå¯¹é½å‰¯è½´èµ·ç‚¹(é»˜è®¤) flex-end: childå¯¹é½å‰¯è½´ç»ˆç‚¹ center: childå±…ä¸­å¯¹é½å‰¯è½´ stretch: childä¸ºå¼¹æ€§å¸ƒå±€æ—¶(æœªè®¾ç½®å‰¯è½´æ–¹å‘çš„å¤§å°æˆ–è€…ä¸ºauto)ï¼Œæ‹‰ä¼¸å¯¹é½å‰¯è½´ baseline: æœ‰æ–‡æœ¬å­˜åœ¨æ—¶ï¼Œchildåœ¨å‰¯è½´æ–¹å‘åŸºäºç¬¬ä¸€ä¸ªæ–‡æœ¬åŸºçº¿å¯¹é½ flexWrapå¦‚æœå†å¢åŠ ä¸€ä¸ªViewï¼Œç”±äºç©ºé—´ä¸è¶³å®ƒä¼šå±•ç¤ºä¸å…¨ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨flexWrapå±æ€§ï¼Œå®ƒå¯ä»¥æ”¯æŒè‡ªåŠ¨æ¢è¡Œå±•ç¤ºã€‚ nowrap: ä¸æ¢è¡Œ(é»˜è®¤) wrap: è‡ªåŠ¨æ¢è¡Œ alignSelfalignSelfå±æ€§ç±»ä¼¼äºalignItemsï¼Œå®ƒä¹Ÿæ˜¯æ§åˆ¶å‰¯è½´ä¸Šçš„æ’åˆ—è§„åˆ™ï¼Œä¸åŒçš„æ˜¯å®ƒä½¿ç”¨çš„å¯¹è±¡æ˜¯childè‡ªå·±ã€‚å®ƒå¯ä»¥æ”¹å˜çˆ¶å®¹å™¨alignItemsçš„å±æ€§æ§åˆ¶çš„childæ’åˆ—è§„åˆ™ï¼Œåœ¨å‰¯è½´ä¸Šå®ç°è‡ªå·±çš„æ’åˆ—è§„åˆ™ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œç»§æ‰¿çˆ¶å®¹å™¨çš„alignItemså±æ€§ã€‚å› æ­¤å®ƒä¹Ÿæœ‰äº”ä¸ªå¯é€‰å€¼ï¼š flex-start flex-end center stretch baseline å‚è€ƒ 5åˆ†é’Ÿåƒé€React Native Flexbox https://reactnative.dev/docs/layout-props Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"},{"name":"å±æ€§å‚æ•°","slug":"JavaScript/ReactNative/å±æ€§å‚æ•°","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/%E5%B1%9E%E6%80%A7%E5%8F%82%E6%95%B0/"}]},{"title":"react-native-elements","date":"2023-12-24T13:26:24.686Z","path":"wiki/JavaScript/ReactNative/å¼€æºåº“/react-native-elements/","text":"IconåŸºæœ¬ç”¨æ³•https://reactnativeelements.com/docs/1.2.0/iconæŸ¥é˜…åŸºæœ¬å±æ€§å’Œä½¿ç”¨ 12345678&lt;Icon type=&quot;MaterialIcons&quot; name=&quot;delete&quot; size=&#123;24&#125; color=&quot;#D1D1D6&quot; onPress=&#123;() =&gt; console.log(&#x27;delete&#x27;)&#125;/&gt; å±æ€§ nameï¼š typeï¼šæ”¯æŒçš„ç±»å‹ï¼ŒæŸ¥é˜…https://reactnativeelements.com/docs/1.2.0/icon#available-icon-setså…·ä½“ç±»å‹ material material-community font-awesome octicon ionicon foundation evilicon simple-line-icon zocial entypo feather antdesign sizeï¼š colorï¼š iconStyleï¼š Componentï¼š disabledï¼š disabledStyleï¼š onPressï¼š onLongPressï¼š underlayColorï¼š reverseï¼š raisedï¼š containerStyleï¼š reverseColorï¼š ä½¿ç”¨react-native-vector-iconsï¼Œåœ¨https://oblador.github.io/react-native-vector-icons/æŸ¥è¯¢å›¾æ ‡åç§°å’Œç±»å‹ã€‚ å‚è€ƒhttps://github.com/react-native-elements","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"},{"name":"å¼€æºåº“","slug":"JavaScript/ReactNative/å¼€æºåº“","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"React Hooks","date":"2023-12-24T13:26:24.685Z","path":"wiki/JavaScript/React/åŸºç¡€çŸ¥è¯†/React Hooks/","text":"React Hooksäº§ç”Ÿçš„åŸå› Functionalï¼ˆStatelessï¼‰Componentï¼ŒåŠŸèƒ½ç»„ä»¶ä¹Ÿå«æ— çŠ¶æ€ç»„ä»¶ï¼Œä¸€èˆ¬åªè´Ÿè´£æ¸²æŸ“ã€‚ 1234function Welcome(props) &#123; return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;/h1&gt;;&#125; Classï¼ˆStatefulï¼‰Componentï¼Œç±»ç»„ä»¶ä¹Ÿæ˜¯æœ‰çŠ¶æ€ç»„ä»¶ï¼Œä¸€èˆ¬æœ‰äº¤äº’é€»è¾‘å’Œä¸šåŠ¡é€»è¾‘ã€‚ 123456789101112131415161718class Welcome extends React.Component &#123; state = &#123; name: â€˜toriâ€™, &#125; componentDidMount() &#123; fetch(â€¦); â€¦ &#125; render() &#123; return ( &lt;&gt; &lt;h1&gt;Hello, &#123;this.state.name&#125;&lt;/h1&gt; &lt;button onClick=&#123;() =&gt; this.setState(&#123;name: â€˜007â€™&#125;)&#125;&gt;æ”¹å&lt;/button&gt; &lt;/&gt; ); &#125;&#125; Presentational Componentåˆ™æ˜¯å’ŒåŠŸèƒ½ç»„ä»¶ç±»ä¼¼ 12345678const Hello = (props) =&gt; &#123; return ( &lt;div&gt; &lt;h1&gt;Hello! &#123;props.name&#125;&lt;/h1&gt; &lt;/div&gt; )&#125; useStateï¼šçŠ¶æ€ç®¡ç†ï¼ŒæŸä¸ªçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œç»„ä»¶é‡æ–°æ¸²æŸ“ useEffectï¼š åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼Œæ–¹ä¾¿ï¼Œä¸”é¿å…ä¸å¿…è¦çš„bug useRefï¼šç”¨äºåœ¨ä¸è¿›è¡Œæ¸²æŸ“çš„æƒ…å†µä¸‹å­˜å‚¨å’Œè®¿é—®æœ€æ–°çš„å€¼ useReducerï¼š useCallbackï¼š React Hooksç»„ä»¶ä»v16.8å¼€å§‹ å®˜æ–¹æ–‡æ¡£Introducing Hooks React Hooks å…¥é—¨æ•™ç¨‹ ä½¿ç”¨ Effect Hook","tags":[{"name":"React","slug":"React","permalink":"http://airshu.github.io/tags/React/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"React","slug":"JavaScript/React","permalink":"http://airshu.github.io/categories/JavaScript/React/"},{"name":"åŸºç¡€çŸ¥è¯†","slug":"JavaScript/React/åŸºç¡€çŸ¥è¯†","permalink":"http://airshu.github.io/categories/JavaScript/React/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"}]},{"title":"åŠ¨ç”»","date":"2023-12-24T13:26:24.685Z","path":"wiki/JavaScript/ReactNative/åŠ¨ç”»/","text":"åŠ¨ç”»ç»„ä»¶ Animated.View 12345Animated.timing(this.state.xPosition, &#123; toValue: 100, easing: Easing.back(), duration: 2000&#125;).start(); ç»„åˆåŠ¨ç”» parallelï¼ˆåŒæ—¶æ‰§è¡Œï¼‰ sequenceï¼ˆé¡ºåºæ‰§è¡Œï¼‰ stagger delay 123456789101112131415161718Animated.sequence([ // decay, then spring to start and twirl Animated.decay(position, &#123; // coast to a stop velocity: &#123; x: gestureState.vx, y: gestureState.vy &#125;, // velocity from gesture release deceleration: 0.997 &#125;), Animated.parallel([ // after decay, in parallel: Animated.spring(position, &#123; toValue: &#123; x: 0, y: 0 &#125; // return to start &#125;), Animated.timing(twirl, &#123; // and twirl toValue: 360 &#125;) ])]).start(); // start the sequence group å‚è€ƒ https://reactnative.cn/docs/animated","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"propså’Œstatçš„åŒºåˆ«","date":"2023-12-24T13:26:24.685Z","path":"wiki/JavaScript/React/propså’Œstateçš„åŒºåˆ«/","text":"UI &#x3D; Component(props, state) React çš„æ ¸å¿ƒæ€æƒ³æ˜¯ç»„ä»¶åŒ–çš„æ€æƒ³ï¼Œæ‰€æœ‰çš„é¡µé¢ä¼šè¢«åˆ‡åˆ†æˆä¸€äº›ç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„ç»„ä»¶ã€‚é‚£ä¹ˆæ•°æ®ä»ä½•è€Œæ¥å‘¢ï¼ŸReact çš„æ•°æ®æ˜¯è‡ªé¡¶å‘ä¸‹å•å‘æµåŠ¨çš„ï¼Œå³ä»çˆ¶ç»„ä»¶åˆ°å­ç»„ä»¶ä¸­ï¼Œç»„ä»¶çš„æ•°æ®å­˜å‚¨åœ¨ props å’Œ state ä¸­ã€‚ props æ˜¯ç»„ä»¶å¯¹å¤–çš„æ¥å£ï¼Œstate æ˜¯ç»„ä»¶å¯¹å†…çš„æ¥å£ã€‚ ç»„ä»¶å†…å¯ä»¥å¼•ç”¨å…¶ä»–ç»„ä»¶ï¼Œç»„ä»¶ä¹‹é—´çš„å¼•ç”¨å½¢æˆäº†ä¸€ä¸ªæ ‘çŠ¶ç»“æ„ï¼ˆç»„ä»¶æ ‘ï¼‰ï¼Œå¦‚æœä¸‹å±‚ç»„ä»¶éœ€è¦ä½¿ç”¨ä¸Šå±‚ç»„ä»¶çš„æ•°æ®æˆ–æ–¹æ³•ï¼Œä¸Šå±‚ç»„ä»¶å°±å¯ä»¥é€šè¿‡ä¸‹å±‚ç»„ä»¶çš„ props å±æ€§è¿›è¡Œä¼ é€’ï¼Œå› æ­¤ props æ˜¯ç»„ä»¶å¯¹å¤–çš„æ¥å£ã€‚ç»„ä»¶é™¤äº†ä½¿ç”¨ä¸Šå±‚ç»„ä»¶ä¼ é€’çš„æ•°æ®å¤–ï¼Œè‡ªèº«ä¹Ÿå¯èƒ½éœ€è¦ç»´æŠ¤ç®¡ç†æ•°æ®ï¼Œè¿™å°±æ˜¯ç»„ä»¶å¯¹å†…çš„æ¥å£ stateã€‚æ ¹æ®å¯¹å¤–æ¥å£ props å’Œå¯¹å†…æ¥å£ stateï¼Œç»„ä»¶è®¡ç®—å‡ºå¯¹åº”ç•Œé¢çš„UIã€‚ propsï¼š props æ˜¯ç»„ä»¶å¯¹å¤–çš„æ¥å£ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†æ‰€æœ‰é€šè¿‡çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®ï¼Œä¸€èˆ¬ç”±çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå­ç»„ä»¶é€šè¿‡ props å¯¹è±¡è·å–çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‚ props æ˜¯åªè¯»çš„ï¼Œä¸å…è®¸å­ç»„ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„ props æ•°æ®ã€‚ props æ˜¯å•å‘æ•°æ®æµï¼Œçˆ¶ç»„ä»¶çš„æ›´æ–°ä¼šå‘ä¸‹ä¼ é€’åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯å­ç»„ä»¶çš„æ›´æ–°ä¸ä¼šå½±å“çˆ¶ç»„ä»¶ï¼Œä¹Ÿä¸ä¼šå½±å“å…¶ä»–å­ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚ stateï¼š state æ˜¯ç»„ä»¶å¯¹å†…çš„æ¥å£ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†ç»„ä»¶å†…éƒ¨çš„çŠ¶æ€å’Œæ•°æ®ã€‚ state æ˜¯å¯å˜çš„ï¼Œå¯ä»¥é€šè¿‡ this.setState æ–¹æ³•ä¿®æ”¹ state æ•°æ®ï¼Œç»„ä»¶æ¯æ¬¡æ›´æ–°éƒ½ä¼šé‡æ–°æ¸²æŸ“ renderã€‚ ä¿®æ”¹stateåï¼Œåˆ·æ–°UIæ˜¯å¼‚æ­¥çš„ï¼ŒReact ä¼šå°†å¤šä¸ª setState() è°ƒç”¨åˆå¹¶æˆä¸€ä¸ªè°ƒç”¨ï¼Œåªæ¸²æŸ“ä¸€æ¬¡ç»„ä»¶ï¼Œæé«˜æ€§èƒ½ã€‚Flutterçš„setStateç±»ä¼¼ åªèƒ½åœ¨ constructor ä¸­åˆå§‹åŒ–ï¼Œå®ƒæ˜¯ç»„ä»¶çš„ç§æœ‰å±æ€§ï¼Œä¸å¯é€šè¿‡å¤–éƒ¨è®¿é—®å’Œä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡ç»„ä»¶å†…éƒ¨çš„ this.setState æ¥ä¿®æ”¹ propsstateå‚è€ƒ","tags":[{"name":"JavaScript Redux","slug":"JavaScript-Redux","permalink":"http://airshu.github.io/tags/JavaScript-Redux/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"React","slug":"JavaScript/React","permalink":"http://airshu.github.io/categories/JavaScript/React/"}]},{"title":"å£°æ˜æ–‡ä»¶çš„å†™æ³•çš„åŒºåˆ«","date":"2023-12-24T13:26:24.685Z","path":"wiki/JavaScript/React/å£°æ˜æ–‡ä»¶çš„å†™æ³•å’ŒåŒºåˆ«/","text":"åŸºæœ¬çš„å£°æ˜å£°æ˜æ–‡ä»¶12345678910111213141516171819202122232425262728var x = 1;module.exports.x = x; //å¯¼å‡ºå˜é‡var add = function(a, b)&#123; return a + b;&#125;;module.exports.add = add; //å¯¼å‡ºå‡½æ•°function multiplay(a, b) &#123;&#125;export &#123;multiplay&#125; // å¯¼å‡ºå¯¹è±¡module.exports = &#123;&#125;; //ES5çš„å†™æ³•ï¼Œå¯¼å‡ºå¤šä¸ªæ–‡ä»¶export &#123;add as default&#125;; //å¯¼å‡ºé»˜è®¤å€¼export default class A &#123;&#125;export default () =&gt; &#123;&#125;export &#123;Header, Bottom&#125;;export type &#123;TypeA, TypeB&#125;; //å¯¼å‡ºç±»å‹ å¯¼å…¥æ–‡ä»¶123456789101112131415161718var app = require(&#x27;./app.js&#x27;);import A from &#x27;./a&#x27;;import &#123; B &#125; from &#x27;./b&#x27;;import &#123; C, D, E &#125; from &#x27;./c&#x27;;import &#123; F &#125; from &#x27;@rui/f&#x27;; //ä½¿ç”¨è·¯å¾„é…ç½®import * as example from &#x27;./example&#x27;; //å¯¼å…¥æ‰€æœ‰å¹¶é‡å‘½åimport * as React from &#x27;react&#x27;;//å°†æ‰€æœ‰ç”¨exportå¯¼å‡ºçš„æˆå‘˜èµ‹å€¼ç»™Reactï¼Œå¯¼å…¥åç”¨React.xxè®¿é—®import React from &#x27;react&#x27;;//ä»…å°†é»˜è®¤å¯¼å‡ºçš„å†…å®¹èµ‹å€¼ç»™React//å¯¼å…¥å†å¯¼å‡ºimport &#123;sum as sumXX&#125; from &#x27;./example&#x27;;export &#123;sumXX&#125;; JavaScriptã€TypeScriptæ–‡ä»¶æ€ä¹ˆäº’ç›¸è°ƒç”¨å‘¢ï¼Ÿ importexport require å…¨å±€å£°æ˜ æ¨¡å—å¯¼å‡ºå£°æ˜ module.exports å’Œ exportsçš„åŒºåˆ«nodeæ‰§è¡Œä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œä¼šåœ¨è¿™ä¸ªæ–‡ä»¶å†…ç”Ÿæˆä¸€ä¸ªexportså’Œmoduleå¯¹è±¡ï¼Œè€Œmoduleå¯¹è±¡åˆæœ‰ä¸€ä¸ªexportså¯¹è±¡ exportsï¼šå¯¹äºæœ¬èº«æ¥è®²æ˜¯ä¸€ä¸ªå˜é‡ï¼ˆå¯¹è±¡ï¼‰ï¼Œå®ƒä¸æ˜¯moduleçš„å¼•ç”¨ï¼Œå®ƒæ˜¯{}çš„å¼•ç”¨ï¼Œå®ƒæŒ‡å‘module.exportsçš„{}æ¨¡å—ã€‚åªèƒ½ä½¿ç”¨.è¯­æ³• å‘å¤–æš´éœ²å˜é‡ã€‚ module.exportsï¼šmoduleæ˜¯ä¸€ä¸ªå˜é‡ï¼ŒæŒ‡å‘ä¸€å—å†…å­˜ï¼Œexportsæ˜¯moduleä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œç„¶åexportså±æ€§æŒ‡å‘{}æ¨¡å—ã€‚æ—¢å¯ä»¥ä½¿ç”¨.è¯­æ³•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨&#x3D;ç›´æ¥èµ‹å€¼ã€‚ module.exports å’Œ exportçš„åŒºåˆ«å‰è€…æ˜¯ES5çš„å†™æ³•ï¼Œåè€…æ˜¯ES6çš„å†™æ³• å› ä¸ºï¼š module.exportsåˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ {} requireè¿”å›çš„æ˜¯module.exports export default class ä¸­defaultä½œç”¨æœ‰defaultçš„æ—¶å€™ï¼Œåœ¨å¼•ç”¨æ—¶å¯ä»¥è‡ªå®šä¹‰åç§°ï¼Œæ²¡æœ‰defaultæ—¶éœ€è¦ä½¿ç”¨{}æ‹¬èµ·æ¥å¹¶ä¸”åç§°å¿…é¡»ä¸classåç§°ä¸€è‡´ï¼Œæ¯ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªdefault 123456789101112// å£°æ˜export default class Template&#123;&#125;// å¯¼å…¥import Template from &#x27;./components/Templates&#x27;;// åˆ«åimport TheTemplate from &#x27;./components/Templates&#x27;; æ³¨æ„ å°½é‡ä½¿ç”¨ES6çš„å†™æ³•ï¼Œä¸è¦æ··ç”¨ export defaultè¯­æ³•ä¸å…¼å®¹CommonJSå’ŒAMDçš„exports ä½¿ç”¨ export &#x3D; å¯¼å‡ºä¸€ä¸ªæ¨¡å—ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ TypeScript çš„ç‰¹å®šè¯­æ³• import module &#x3D; require(â€œmoduleâ€) æ¥å¯¼å…¥æ­¤æ¨¡å—","tags":[{"name":"JavaScript Redux","slug":"JavaScript-Redux","permalink":"http://airshu.github.io/tags/JavaScript-Redux/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"React","slug":"JavaScript/React","permalink":"http://airshu.github.io/categories/JavaScript/React/"}]},{"title":"Viewå‚æ•°","date":"2023-12-24T13:26:24.685Z","path":"wiki/JavaScript/ReactNative/å±æ€§å‚æ•°/Viewå‚æ•°/","text":"","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"},{"name":"å±æ€§å‚æ•°","slug":"JavaScript/ReactNative/å±æ€§å‚æ•°","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/%E5%B1%9E%E6%80%A7%E5%8F%82%E6%95%B0/"}]},{"title":"å›¾ç‰‡å‚æ•°","date":"2023-12-24T13:26:24.685Z","path":"wiki/JavaScript/ReactNative/å±æ€§å‚æ•°/å›¾ç‰‡å‚æ•°/","text":"","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"},{"name":"å±æ€§å‚æ•°","slug":"JavaScript/ReactNative/å±æ€§å‚æ•°","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/%E5%B1%9E%E6%80%A7%E5%8F%82%E6%95%B0/"}]},{"title":"JavaScriptå…¥é—¨","date":"2023-12-24T13:26:24.684Z","path":"wiki/JavaScript/JavaScriptå…¥é—¨/","text":"å…ˆäº†è§£ä¸€ä¸‹JSçš„å†å²ï¼šJavascriptè¯ç”Ÿè®°ã€‚åŸºæœ¬çš„è¯­æ³•ï¼Œä»å®˜æ–¹æ–‡æ¡£å¼€å§‹ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript ä¸€äº›çŸ¥è¯†ç‚¹ åŸä¹‰å­—ç¬¦ ç­‰ä»·å­—ç¬¦å¼•ç”¨ &lt; &amp;lt; &gt; &amp;gt; &quot; &quot; â€˜ &amp;apos; &amp; &amp; 1234&lt;p&gt;HTML ä¸­ç”¨ &lt;p&gt; æ¥å®šä¹‰æ®µè½å…ƒç´ ã€‚&lt;/p&gt;&lt;p&gt;HTML ä¸­ç”¨ &amp;lt;p&amp;gt; æ¥å®šä¹‰æ®µè½å…ƒç´ &lt;/p&gt; HTMLå¤´123456789101112131415&lt;!DOCTYPE html&gt;&lt;html lang=&quot;zh-CN&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;utf-8&quot; /&gt; &lt;title&gt;æˆ‘çš„æµ‹è¯•é¡µé¢&lt;/title&gt; &lt;link rel=&quot;icon&quot; href=&quot;favicon.ico&quot; type=&quot;image/x-icon&quot; /&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;my-css-file.css&quot; /&gt; &lt;script src=&quot;my-js-file.js&quot; defer&gt;&lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;p&gt;è¿™æ˜¯æˆ‘çš„é¡µé¢&lt;/p&gt; &lt;/body&gt;&lt;/html&gt; titleï¼šè¡¨ç¤ºé¡µé¢æ ‡é¢˜ metaï¼šå…ƒæ•°æ® linkï¼šè‡ªå®šä¹‰å›¾æ ‡ scriptï¼šå¼•å…¥éœ€è¦åŠ è½½çš„jsæ–‡ä»¶ å¸¸è§æ ‡ç­¾123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103&lt;h1&gt;æ ‡é¢˜å…ƒç´ æ ‡ç­¾ï¼Œæ•°å­—è¡¨ç¤ºä¸åŒå¤§å°&lt;/h1&gt;&lt;h2&gt;&lt;/h2&gt;&lt;h3&gt;&lt;/h3&gt;&lt;h4&gt;&lt;/h4&gt;&lt;h5&gt;&lt;/h5&gt;&lt;h6&gt;&lt;/h6&gt;&lt;!--æ— åºåˆ—è¡¨ --&gt;&lt;ul&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt;&lt;/ul&gt;&lt;p&gt; æˆ‘åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘ &lt;a href=&quot;https://www.mozilla.org/zh-CN/&quot;&gt;Mozilla ä¸»é¡µ&lt;/a&gt;çš„é“¾æ¥ã€‚&lt;/p&gt;&lt;!--ä¸Šæ ‡å’Œä¸‹æ ‡ --&gt;&lt;p&gt; å’–å•¡å› çš„åŒ–å­¦æ–¹ç¨‹å¼æ˜¯ C&lt;sub&gt;8&lt;/sub&gt;H&lt;sub&gt;10&lt;/sub&gt;N&lt;sub&gt;4&lt;/sub&gt;O&lt;sub&gt;2&lt;/sub&gt;ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœ x&lt;sup&gt;2&lt;/sup&gt; çš„å€¼ä¸º 9ï¼Œé‚£ä¹ˆ x çš„å€¼å¿…ä¸º 3 æˆ– -3ã€‚&lt;/p&gt;&lt;div&gt; &lt;/div&gt;&lt;!-- å¯åœ¨æ®µè½ä¸­è¿›è¡Œæ¢è¡Œ --&gt;&lt;br/&gt;&lt;!-- å…ƒç´ åœ¨æ–‡æ¡£ä¸­ç”Ÿæˆä¸€æ¡æ°´å¹³åˆ†å‰²çº¿ --&gt;&lt;hr/&gt;&lt;img src=&quot;images/dinosaur.jpg&quot; alt=&quot;ä¸€åªæé¾™å¤´éƒ¨å’Œèº¯å¹²çš„éª¨æ¶ï¼Œå®ƒæœ‰ä¸€ä¸ªå·¨å¤§çš„å¤´ï¼Œé•¿ç€é”‹åˆ©çš„ç‰™é½¿ã€‚&quot; width=&quot;400&quot; height=&quot;341&quot; title=&quot;A T-Rex on display in the Manchester University Museum&quot; &gt;&lt;video controls&gt; &lt;source src=&quot;rabbit320.mp4&quot; type=&quot;video/mp4&quot;&gt; &lt;source src=&quot;rabbit320.webm&quot; type=&quot;video/webm&quot;&gt; &lt;p&gt;ä½ çš„æµè§ˆå™¨ä¸æ”¯æŒ HTML5 è§†é¢‘ã€‚å¯ç‚¹å‡»&lt;a href=&quot;rabbit320.mp4&quot;&gt;æ­¤é“¾æ¥&lt;/a&gt;è§‚çœ‹&lt;/p&gt;&lt;/video&gt;&lt;iframe src=&quot;https://developer.mozilla.org/zh-CN/docs/Glossary&quot; width=&quot;100%&quot; height=&quot;500&quot; frameborder=&quot;0&quot; allowfullscreen sandbox&gt; &lt;p&gt; &lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Glossary&quot;&gt; Fallback link for browsers that don&#x27;t support iframes &lt;/a&gt; &lt;/p&gt;&lt;/iframe&gt;&lt;picture&gt; &lt;source type=&quot;image/svg+xml&quot; srcset=&quot;pyramid.svg&quot; /&gt; &lt;source type=&quot;image/webp&quot; srcset=&quot;pyramid.webp&quot; /&gt; &lt;img src=&quot;pyramid.png&quot; alt=&quot;regular pyramid built from four equilateral triangles&quot; /&gt;&lt;/picture&gt;&lt;table&gt; &lt;tr&gt; &lt;td&gt;&amp;nbsp;&lt;/td&gt; &lt;td&gt;Knocky&lt;/td&gt; &lt;td&gt;Flor&lt;/td&gt; &lt;td&gt;Ella&lt;/td&gt; &lt;td&gt;Juan&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Breed&lt;/td&gt; &lt;td&gt;Jack Russell&lt;/td&gt; &lt;td&gt;Poodle&lt;/td&gt; &lt;td&gt;Streetdog&lt;/td&gt; &lt;td&gt;Cocker Spaniel&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Age&lt;/td&gt; &lt;td&gt;16&lt;/td&gt; &lt;td&gt;9&lt;/td&gt; &lt;td&gt;10&lt;/td&gt; &lt;td&gt;5&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Owner&lt;/td&gt; &lt;td&gt;Mother-in-law&lt;/td&gt; &lt;td&gt;Me&lt;/td&gt; &lt;td&gt;Me&lt;/td&gt; &lt;td&gt;Sister-in-law&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Eating Habits&lt;/td&gt; &lt;td&gt;Eats everyone&#x27;s leftovers&lt;/td&gt; &lt;td&gt;Nibbles at food&lt;/td&gt; &lt;td&gt;Hearty eater&lt;/td&gt; &lt;td&gt;Will eat till he explodes&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt; HTMLæ–‡æ¡£çš„ç»„æˆéƒ¨åˆ† é¡µçœ‰ï¼š æ˜¯ç®€ä»‹å½¢å¼çš„å†…å®¹ã€‚å¦‚æœå®ƒæ˜¯ çš„å­å…ƒç´ ï¼Œé‚£ä¹ˆå°±æ˜¯ç½‘ç«™çš„å…¨å±€é¡µçœ‰ã€‚å¦‚æœå®ƒæ˜¯ æˆ– çš„å­å…ƒç´ ï¼Œé‚£ä¹ˆå®ƒæ˜¯è¿™äº›éƒ¨åˆ†ç‰¹æœ‰çš„é¡µçœ‰ å¯¼èˆªæ ï¼š åŒ…å«é¡µé¢ä¸»å¯¼èˆªåŠŸèƒ½ã€‚å…¶ä¸­ä¸åº”åŒ…å«äºŒçº§é“¾æ¥ç­‰å†…å®¹ ä¸»å†…å®¹ï¼š å­˜æ”¾æ¯ä¸ªé¡µé¢ç‹¬æœ‰çš„å†…å®¹ã€‚æ¯ä¸ªé¡µé¢ä¸Šåªèƒ½ç”¨ä¸€æ¬¡ ï¼Œä¸”ç›´æ¥ä½äº ä¸­ã€‚æœ€å¥½ä¸è¦æŠŠå®ƒåµŒå¥—è¿›å…¶ä»–å…ƒç´  ä¾§è¾¹æ ï¼š åŒ…å«ä¸€äº›é—´æ¥ä¿¡æ¯ï¼ˆæœ¯è¯­æ¡ç›®ã€ä½œè€…ç®€ä»‹ã€ç›¸å…³é“¾æ¥ï¼Œç­‰ç­‰ï¼‰ é¡µè„šï¼š CSSCSSèƒ½å®šä¹‰ç½‘é¡µä¸­ç‰¹å®šå…ƒç´ æ ·å¼çš„ä¸€ç»„è§„åˆ™ ä½¿ç”¨CSSçš„æ–¹å¼ æ”¹å˜å…ƒç´ çš„é»˜è®¤è¡Œä¸º123li &#123; list-style-type: none;&#125; ä½¿ç”¨ç±»å12345678910111213141516171819&lt;ul&gt; &lt;li&gt;é¡¹ç›®ä¸€&lt;/li&gt; &lt;li class=&quot;special&quot;&gt;é¡¹ç›®äºŒ&lt;/li&gt; &lt;li&gt;é¡¹ç›® &lt;em&gt;ä¸‰&lt;/em&gt;&lt;/li&gt;&lt;/ul&gt;.special &#123; color: orange; font-weight: bold;&#125;#å¯¹ç±»åæ˜¯specialï¼Œæ ‡ç­¾ç±»å‹æ˜¯liå’Œspanä½¿ç”¨æ ·å¼li.special,span.special &#123; color: orange; font-weight: bold;&#125; æ ¹æ®å…ƒç´ åœ¨æ–‡æ¡£ä¸­çš„ä½ç½®ç¡®å®šæ ·å¼12345/*é€‰æ‹©&lt;li&gt;å†…éƒ¨çš„ä»»ä½•&lt;em&gt;å…ƒç´ */li em &#123; color: rebeccapurple;&#125; æ ¹æ®çŠ¶æ€ç¡®å®šæ ·å¼12345678a:link &#123; color: pink;&#125;a:visited &#123; color: green;&#125; åŒæ—¶ä½¿ç”¨é€‰æ‹©å™¨å’Œé€‰æ‹©å™¨1234567891011121314/* selects any &lt;span&gt; that is inside a &lt;p&gt;, which is inside an &lt;article&gt; */article p span &#123; ... &#125;/* selects any &lt;p&gt; that comes directly after a &lt;ul&gt;, which comes directly after an &lt;h1&gt; */h1 + ul + p &#123; ... &#125;body h1 + p .special &#123; color: yellow; background-color: black; padding: 5px;&#125; å†²çªè§„åˆ™ å±‚å ï¼šåé¢çš„æ ·å¼ä¼šè¦†ç›–å‰é¢çš„ ä¼˜å…ˆçº§ï¼šç±»è¢«è®¤ä¸ºæ›´å…·ä½“ï¼Œä¼˜å…ˆçº§é«˜äºå…ƒç´ é€‰æ‹©å™¨ ä¸»æµJavaScriptæ¡†æ¶ Emberï¼šEmber äº 2011 å¹´ 12 æœˆå‘å¸ƒï¼Œæœ€åˆä½œä¸º SproutCore é¡¹ç›®çš„å»¶ç»­è€Œå¼€å§‹ã€‚æ¯”å…¶æ–°å¼çš„æ›¿ä»£å“ï¼ˆä¾‹å¦‚ React å’Œ Vueï¼‰ï¼Œä½œä¸ºè€æ¡†æ¶ï¼Œå®ƒçš„ç”¨æˆ·äººæ•°è¦å°‘å¾—å¤šã€‚ä½†å› å…¶ç¨³å®šæ€§ã€ç¤¾åŒºæ”¯æŒä»¥åŠç¼–ç¨‹åŸåˆ™éƒ½éå¸¸è‰¯å¥½ï¼Œå®ƒä»ç„¶äº«æœ‰å¾ˆé«˜çš„çŸ¥ååº¦ Angularï¼šä¸€ç§åŸºäºç»„ä»¶çš„æ¡†æ¶ï¼Œä½¿ç”¨å£°æ˜å¼çš„ HTML æ¨¡æ¿ã€‚åœ¨åº”ç”¨æ„å»ºæ—¶ï¼Œæ¡†æ¶çš„ç¼–è¯‘å™¨å°† HTML æ¨¡æ¿è½¬æ¢ä¸ºä¼˜åŒ–å¥½çš„ JavaScript æŒ‡ä»¤ï¼Œè¿™ä¸€è¿‡ç¨‹å¯¹å¼€å‘è€…æ˜¯é€æ˜çš„ã€‚Angular ä½¿ç”¨ TypeScript Vue Reactï¼š2013å¹´Facebookå‘å¸ƒ .js .jsx .ts .tsx .jsï¼šJavaScriptæ–‡ä»¶ .jsxï¼šJavaScriptæ–‡ä»¶å¹¶ä½¿ç”¨JSXè¯­æ³• .tsï¼šTypeScriptæ–‡ä»¶ .tsxï¼šTypeScriptæ–‡ä»¶å¹¶ä½¿ç”¨JSXè¯­æ³• JSX å°±æ˜¯Javascriptå’ŒXMLç»“åˆçš„ä¸€ç§æ ¼å¼ã€‚Reactå‘æ˜äº†JSXï¼Œåˆ©ç”¨HTMLè¯­æ³•æ¥åˆ›å»ºè™šæ‹ŸDOMã€‚å½“é‡åˆ°&lt;ï¼ŒJSXå°±å½“HTMLè§£æï¼Œé‡åˆ°å°±å½“JavaScriptè§£æã€‚JSX åªæ˜¯ä¸º React.createElement(component, props, â€¦children) æ–¹æ³•æä¾›çš„è¯­æ³•ç³–ã€‚","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/tags/JavaScript/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"}]},{"title":"build_runner","date":"2023-12-24T13:26:24.684Z","path":"wiki/Flutter/æœªåˆ†ç±»/build_runner/","text":"dartçš„buildç³»ç»Ÿ build_configï¼š build_modulesï¼š build_resolversï¼š build_runnerï¼š build_testï¼š build_web_compilersï¼š build_runnerè¿™ä¸ªPackageæä¾›äº†ä¸€äº›ç”¨äºç”Ÿæˆæ–‡ä»¶çš„é€šç”¨å‘½ä»¤ï¼Œå¸¸è§çš„å¦‚json_serializableã€‚ build_runnerå‘½ä»¤ä½¿ç”¨1234dart run build_runner buildflutter pub run build_runner build ä¸»è¦æµç¨‹ ç”Ÿæˆå’Œé¢„ç¼–è¯‘buildè„šæœ¬ å¤„ç†è¾“å…¥ç¯å¢ƒå’Œèµ„æº æ ¹æ®å‰é¢çš„è„šæœ¬å’Œè¾“å…¥ä¿¡æ¯ï¼Œå¼€å§‹æ­£å¼æ‰§è¡Œbuilderç”Ÿæˆä»£ç ï¼› ç¼“å­˜ä¿¡æ¯ï¼Œç”¨äºä¸‹ä¸€å›ç”Ÿæˆä»£ç çš„æ—¶å€™å¢é‡åˆ¤æ–­ä½¿ç”¨ build_runneråçš„å‚æ•° buildï¼š watchï¼š serveï¼š testï¼š å‘½ä»¤è¡Œçš„å±æ€§ â€“delete-conflicting-outputsï¼š â€“[no-]fail-on-severeï¼š â€“build-filterï¼š 123456flutter packages pub run build_runner build --delete-conflicting-outputs# åªç¼–è¯‘lib/pages/xxx/ç›®å½•ä¸‹çš„æ–‡ä»¶dart run build_runner build --build-filter=&quot;lib/pages/xxx/prefix*.dart&quot; å‚è€ƒ https://github.com/dart-lang/build/blob/master/docs/getting_started.md Flutter è‡ªå®šä¹‰ build_runner çš„ build Flutter ä»£ç ç”Ÿæˆ source_gen ä½¿ç”¨ä¸åŸç†åˆ†æ [Flutter] Flutter çš„ build ç³»ç»Ÿ(ä¸€) https://pub.dev/packages/build_runner [build_runner] execute builder on only a single file #2928","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"Pathçš„ä½¿ç”¨","date":"2023-12-24T13:26:24.684Z","path":"wiki/Flutter/æœªåˆ†ç±»/Pathçš„ä½¿ç”¨/","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/// rect åœ†å¼§æ‰€åœ¨çš„çŸ©å½¢/// startAngle åˆå§‹åŒ–å¼§åº¦/// sweepAngle éœ€è¦ç»˜åˆ¶çš„å¼§åº¦å¤§å°/// forceMoveTo æ˜¯å¦å¼ºåˆ¶è¿çº¿void arcTo(Rect rect, double startAngle, double sweepAngle, bool forceMoveTo) &#123;&#125;class ArcWidget extends StatefulWidget &#123; const ArcWidget(&#123;super.key&#125;); @override State&lt;ArcWidget&gt; createState() =&gt; _ArcWidgetState();&#125;class _ArcWidgetState extends State&lt;ArcWidget&gt; &#123; @override Widget build(BuildContext context) &#123; return Container( height: 50.h, child: CustomPaint( painter: ArcPainter(), child: Container(), ), ); &#125;&#125;class ArcPainter extends CustomPainter &#123; @override void paint(Canvas canvas, Size size) &#123; final paint = Paint() ..color = Colors.white ..style = PaintingStyle.fill; final path = Path() ..moveTo(0, size.height + 1) // Start at the bottom-left corner ..lineTo(0, size.height - 10.h) // Move up by 100 pixels ..quadraticBezierTo(size.width / 2, size.height - 48.h, size.width, size.height - 10.h) // Draw a quadratic bezier curve ..lineTo(size.width, size.height + 1) // Draw a line to the bottom-right corner ..close(); // Close the path canvas.drawPath(path, paint); &#125; @override bool shouldRepaint(CustomPainter oldDelegate) =&gt; true;&#125;","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"ES6","date":"2023-12-24T13:26:24.684Z","path":"wiki/JavaScript/ES6/","text":"Babel è½¬ç å™¨Babel æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ ES6 è½¬ç å™¨ï¼Œå¯ä»¥å°† ES6 ä»£ç è½¬ä¸º ES5 ä»£ç ï¼Œä»è€Œåœ¨è€ç‰ˆæœ¬çš„æµè§ˆå™¨æ‰§è¡Œã€‚è¿™æ„å‘³ç€ï¼Œä½ å¯ä»¥ç”¨ ES6 çš„æ–¹å¼ç¼–å†™ç¨‹åºï¼Œåˆä¸ç”¨æ‹…å¿ƒç°æœ‰ç¯å¢ƒæ˜¯å¦æ”¯æŒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ 12345678// è½¬ç å‰input.map(item =&gt; item + 1);// è½¬ç åinput.map(function (item) &#123; return item + 1;&#125;); let å’Œ const å‘½ä»¤ES6 æ–°å¢äº†letå‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å˜é‡ã€‚å®ƒçš„ç”¨æ³•ç±»ä¼¼äºvarï¼Œä½†æ˜¯æ‰€å£°æ˜çš„å˜é‡ï¼Œåªåœ¨letå‘½ä»¤æ‰€åœ¨çš„ä»£ç å—å†…æœ‰æ•ˆ 1234567891011121314151617&#123; let a = 10; var b = 1;&#125;a // ReferenceError: a is not defined.b // 1// forå¾ªç¯å¾ˆé€‚åˆä½¿ç”¨letå‘½ä»¤for (let i = 0; i &lt; 10; i++) &#123; // ...&#125;console.log(i);// ReferenceError: i is not defined constå£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚ 123456const PI = 3.1415;PI // 3.1415PI = 3;// TypeError: Assignment to constant variable. é¡¶å±‚å¯¹è±¡çš„å±æ€§é¡¶å±‚å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæŒ‡çš„æ˜¯windowå¯¹è±¡ï¼Œåœ¨ Node æŒ‡çš„æ˜¯globalå¯¹è±¡ã€‚ES5 ä¹‹ä¸­ï¼Œé¡¶å±‚å¯¹è±¡çš„å±æ€§ä¸å…¨å±€å˜é‡æ˜¯ç­‰ä»·çš„ã€‚ 123456window.a = 1;a // 1a = 2;window.a // 2 ES6 ä¸ºäº†ä¿æŒå…¼å®¹æ€§ï¼Œvarå‘½ä»¤å’Œfunctionå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¾æ—§æ˜¯é¡¶å±‚å¯¹è±¡çš„å±æ€§ï¼›å¦ä¸€æ–¹é¢è§„å®šï¼Œletå‘½ä»¤ã€constå‘½ä»¤ã€classå‘½ä»¤å£°æ˜çš„å…¨å±€å˜é‡ï¼Œä¸å±äºé¡¶å±‚å¯¹è±¡çš„å±æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä» ES6 å¼€å§‹ï¼Œå…¨å±€å˜é‡å°†é€æ­¥ä¸é¡¶å±‚å¯¹è±¡çš„å±æ€§è„±é’©ã€‚ 123456789var a = 1;// å¦‚æœåœ¨ Node çš„ REPL ç¯å¢ƒï¼Œå¯ä»¥å†™æˆ global.a// æˆ–è€…é‡‡ç”¨é€šç”¨æ–¹æ³•ï¼Œå†™æˆ this.awindow.a // 1let b = 1;window.b // undefined globalThiså¯¹è±¡JavaScript è¯­è¨€å­˜åœ¨ä¸€ä¸ªé¡¶å±‚å¯¹è±¡ï¼Œå®ƒæä¾›å…¨å±€ç¯å¢ƒï¼ˆå³å…¨å±€ä½œç”¨åŸŸï¼‰ï¼Œæ‰€æœ‰ä»£ç éƒ½æ˜¯åœ¨è¿™ä¸ªç¯å¢ƒä¸­è¿è¡Œã€‚ä½†æ˜¯ï¼Œé¡¶å±‚å¯¹è±¡åœ¨å„ç§å®ç°é‡Œé¢æ˜¯ä¸ç»Ÿä¸€çš„ã€‚ æµè§ˆå™¨é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯windowï¼Œä½† Node å’Œ Web Worker æ²¡æœ‰windowã€‚ æµè§ˆå™¨å’Œ Web Worker é‡Œé¢ï¼Œselfä¹ŸæŒ‡å‘é¡¶å±‚å¯¹è±¡ï¼Œä½†æ˜¯ Node æ²¡æœ‰selfã€‚ Node é‡Œé¢ï¼Œé¡¶å±‚å¯¹è±¡æ˜¯globalï¼Œä½†å…¶ä»–ç¯å¢ƒéƒ½ä¸æ”¯æŒ ES2020 åœ¨è¯­è¨€æ ‡å‡†çš„å±‚é¢ï¼Œå¼•å…¥globalThisä½œä¸ºé¡¶å±‚å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»»ä½•ç¯å¢ƒä¸‹ï¼ŒglobalThiséƒ½æ˜¯å­˜åœ¨çš„ï¼Œéƒ½å¯ä»¥ä»å®ƒæ‹¿åˆ°é¡¶å±‚å¯¹è±¡ï¼ŒæŒ‡å‘å…¨å±€ç¯å¢ƒä¸‹çš„this å˜é‡çš„è§£æ„èµ‹å€¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293let a = 1;let b = 2;let c = 3;//ES6 å¯ä»¥è¿™æ ·å†™ï¼Œå…è®¸æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ï¼Œè¿™è¢«ç§°ä¸ºè§£æ„ï¼ˆDestructuringï¼‰ã€‚let [a, b, c] = [1, 2, 3];let [foo, [[bar], baz]] = [1, [[2], 3]];foo // 1bar // 2baz // 3let [ , , third] = [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;];third // &quot;baz&quot;let [x, , y] = [1, 2, 3];x // 1y // 3let [head, ...tail] = [1, 2, 3, 4];head // 1tail // [2, 3, 4]let [x, y, ...z] = [&#x27;a&#x27;];x // &quot;a&quot;y // undefined å¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼å°±ç­‰äºundefinedz // []//ä¸å®Œå…¨è§£æ„let [x, y] = [1, 2, 3];x // 1y // 2let [a, [b], d] = [1, [2, 3], 4];a // 1b // 2d // 4//è®¾ç½®é»˜è®¤å€¼let [foo = true] = [];foo // truelet [x, y = &#x27;b&#x27;] = [&#x27;a&#x27;]; // x=&#x27;a&#x27;, y=&#x27;b&#x27;let [x, y = &#x27;b&#x27;] = [&#x27;a&#x27;, undefined]; // x=&#x27;a&#x27;, y=&#x27;b&#x27;//å¯¹è±¡çš„è§£æ„èµ‹å€¼ï¼Œå¯¹è±¡çš„å±æ€§æ²¡æœ‰æ¬¡åºï¼Œå˜é‡å¿…é¡»ä¸å±æ€§åŒåï¼Œæ‰èƒ½å–åˆ°æ­£ç¡®çš„å€¼ã€‚let &#123; foo, bar &#125; = &#123; foo: &#x27;aaa&#x27;, bar: &#x27;bbb&#x27; &#125;;foo // &quot;aaa&quot;bar // &quot;bbb&quot;//å­—ç¬¦ä¸²çš„è§£æ„èµ‹å€¼const [a, b, c, d, e] = &#x27;hello&#x27;;a // &quot;h&quot;b // &quot;e&quot;c // &quot;l&quot;d // &quot;l&quot;e // &quot;o&quot;let &#123;length : len&#125; = &#x27;hello&#x27;;len // 5// è¿”å›ä¸€ä¸ªæ•°ç»„function example() &#123; return [1, 2, 3];&#125;let [a, b, c] = example();// è¿”å›ä¸€ä¸ªå¯¹è±¡function example() &#123; return &#123; foo: 1, bar: 2 &#125;;&#125;let &#123; foo, bar &#125; = example();//æå–jsonæ•°æ®let jsonData = &#123; id: 42, status: &quot;OK&quot;, data: [867, 5309]&#125;;let &#123; id, status, data: number &#125; = jsonData;console.log(id, status, number);// 42, &quot;OK&quot;, [867, 5309] å­—ç¬¦ä¸²æ¨¡ç‰ˆå­—ç¬¦ä¸²123 æ ‡ç­¾æ¨¡ç‰ˆå‡½æ•°çš„æ‰©å±•å‡½æ•°å‚æ•°çš„é»˜è®¤å€¼12345678910function log(x, y = &#x27;World&#x27;) &#123; console.log(x, y);&#125;log(&#x27;Hello&#x27;) // Hello Worldlog(&#x27;Hello&#x27;, &#x27;China&#x27;) // Hello Chinalog(&#x27;Hello&#x27;, &#x27;&#x27;) // Hello ä¸è§£æ„èµ‹å€¼é»˜è®¤å€¼ç»“åˆä½¿ç”¨12345678910function foo(&#123;x, y = 5&#125;) &#123; console.log(x, y);&#125;foo(&#123;&#125;) // undefined 5foo(&#123;x: 1&#125;) // 1 5foo(&#123;x: 1, y: 2&#125;) // 1 2foo() // TypeError: Cannot read property &#x27;x&#x27; of undefined ç®­å¤´å‡½æ•°12345678910111213141516171819var f = v =&gt; v;// ç­‰åŒäºvar f = function (v) &#123; return v;&#125;;// æ™®é€šå‡½æ•°å†™æ³•[1,2,3].map(function (x) &#123; return x * x;&#125;);// ç®­å¤´å‡½æ•°å†™æ³•[1,2,3].map(x =&gt; x * x); æ³¨æ„ç‚¹ ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thiså¯¹è±¡ ä¸å¯ä»¥å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸å¯ä»¥ä½¿ç”¨newå‘½ä»¤ï¼Œå¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ã€‚å¦‚æœè¦ç”¨ï¼Œå¯ä»¥ç”¨ rest å‚æ•°ä»£æ›¿ ä¸å¯ä»¥ä½¿ç”¨yieldå‘½ä»¤ï¼Œå› æ­¤ç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œ Generator å‡½æ•° æ•°ç»„çš„æ‰©å±• Array.from() Array.of() å®ä¾‹æ–¹æ³•ï¼š copyWithin() find() findIndex() findLast() findLastIndex() fill() entries() keys() values() includes() flat() flatMap() at() toReversed() toSorted() toSpliced() with() group() groupToMap() æ‰©å±•è¿ç®—ç¬¦12345678910111213141516function f(v, w, x, y, z) &#123; &#125;const args = [0, 1];f(-1, ...args, 2, ...[3]);const arr = [ ...(x &gt; 0 ? [&#x27;a&#x27;] : []), &#x27;b&#x27;,];//å­—ç¬¦ä¸²æ‰©å±•è¿ç®—ç¬¦[...&#x27;hello&#x27;]// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ] å¯¹è±¡çš„æ‰©å±•å±æ€§çš„ç®€æ´è¡¨ç¤ºæ³•1234567891011121314151617181920212223242526272829303132const foo = &#x27;bar&#x27;;const baz = &#123;foo&#125;;baz // &#123;foo: &quot;bar&quot;&#125;// ç­‰åŒäºconst baz = &#123;foo: foo&#125;;function f(x, y) &#123; return &#123;x, y&#125;;&#125;// ç­‰åŒäºfunction f(x, y) &#123; return &#123;x: x, y: y&#125;;&#125;f(1, 2) // Object &#123;x: 1, y: 2&#125;//æ–¹æ³•ç®€å†™const o = &#123; method() &#123; return &quot;Hello!&quot;; &#125;&#125;;// ç­‰åŒäºconst o = &#123; method: function() &#123; return &quot;Hello!&quot;; &#125;&#125;; å±æ€§åè¡¨è¾¾å¼123456789let propKey = &#x27;foo&#x27;;let obj = &#123; [propKey]: true, [&#x27;a&#x27; + &#x27;bc&#x27;]: 123&#125;; å±æ€§çš„éå†123456789101112131415161718192021ï¼ˆ1ï¼‰for...infor...inå¾ªç¯éå†å¯¹è±¡è‡ªèº«çš„å’Œç»§æ‰¿çš„å¯æšä¸¾å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼‰ã€‚ï¼ˆ2ï¼‰Object.keys(obj)Object.keysè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…æ‹¬å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼‰çš„é”®åã€‚ï¼ˆ3ï¼‰Object.getOwnPropertyNames(obj)Object.getOwnPropertyNamesè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ï¼ˆä¸å« Symbol å±æ€§ï¼Œä½†æ˜¯åŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ï¼‰çš„é”®åã€‚ï¼ˆ4ï¼‰Object.getOwnPropertySymbols(obj)Object.getOwnPropertySymbolsè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰ Symbol å±æ€§çš„é”®åã€‚ï¼ˆ5ï¼‰Reflect.ownKeys(obj)Reflect.ownKeysè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰é”®åï¼Œä¸ç®¡é”®åæ˜¯ Symbol æˆ–å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸ç®¡æ˜¯å¦å¯æšä¸¾ã€‚ superæŒ‡å‘å½“å‰å¯¹è±¡çš„åŸå‹å¯¹è±¡ 1234567891011121314const proto = &#123; foo: &#x27;hello&#x27;&#125;;const obj = &#123; foo: &#x27;world&#x27;, find() &#123; return super.foo; &#125;&#125;;Object.setPrototypeOf(obj, proto);obj.find() // &quot;hello&quot; ä¸Šé¢ä»£ç ä¸­ï¼Œå¯¹è±¡obj.find()æ–¹æ³•ä¹‹ä¸­ï¼Œé€šè¿‡super.fooå¼•ç”¨äº†åŸå‹å¯¹è±¡protoçš„fooå±æ€§ã€‚ æ³¨æ„ï¼Œsuperå…³é”®å­—è¡¨ç¤ºåŸå‹å¯¹è±¡æ—¶ï¼Œåªèƒ½ç”¨åœ¨å¯¹è±¡çš„æ–¹æ³•ä¹‹ä¸­ï¼Œç”¨åœ¨å…¶ä»–åœ°æ–¹éƒ½ä¼šæŠ¥é”™ã€‚ å¯¹è±¡çš„æ–°å¢æ–¹æ³•12345678910111213141516171819202122232425262728293031Object.is() // æ¯”è¾ƒä¸¤ä¸ªå€¼æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰ï¼Œä¸ä¸¥æ ¼æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆ===ï¼‰çš„è¡Œä¸ºåŸºæœ¬ä¸€è‡´ã€‚Object.assign() // ç”¨äºå¯¹è±¡çš„åˆå¹¶ï¼Œå°†æºå¯¹è±¡ï¼ˆsourceï¼‰çš„æ‰€æœ‰å¯æšä¸¾å±æ€§ï¼Œå¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆtargetï¼‰ã€‚const target = &#123; a: 1, b: 1 &#125;;const source1 = &#123; b: 2, c: 2 &#125;;const source2 = &#123; c: 3 &#125;;Object.assign(target, source1, source2);target // &#123;a:1, b:2, c:3&#125;Object.getOwnPropertyDescriptors() // è¿”å›æŒ‡å®šå¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§ï¼ˆéç»§æ‰¿å±æ€§ï¼‰çš„æè¿°å¯¹è±¡ã€‚__proto__å±æ€§ï¼ˆå‰åå„ä¸¤ä¸ªä¸‹åˆ’çº¿ï¼‰ï¼Œç”¨æ¥è¯»å–æˆ–è®¾ç½®å½“å‰å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰Object.setPrototypeOfæ–¹æ³•çš„ä½œç”¨ä¸__proto__ç›¸åŒï¼Œç”¨æ¥è®¾ç½®ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼ˆprototypeï¼‰ï¼Œè¿”å›å‚æ•°å¯¹è±¡æœ¬èº«ã€‚å®ƒæ˜¯ ES6 æ­£å¼æ¨èçš„è®¾ç½®åŸå‹å¯¹è±¡çš„æ–¹æ³•Object.keys() // è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®åã€‚Object.values() // è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼ã€‚Object.entries() // è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‚æ•°å¯¹è±¡è‡ªèº«çš„ï¼ˆä¸å«ç»§æ‰¿çš„ï¼‰æ‰€æœ‰å¯éå†ï¼ˆenumerableï¼‰å±æ€§çš„é”®å€¼å¯¹æ•°ç»„ã€‚Object.fromEntries() // æ˜¯Object.entries()çš„é€†æ“ä½œï¼Œç”¨äºå°†ä¸€ä¸ªé”®å€¼å¯¹æ•°ç»„è½¬ä¸ºå¯¹è±¡ã€‚Object.hasOwn() // JavaScript å¯¹è±¡çš„å±æ€§åˆ†æˆä¸¤ç§ï¼šè‡ªèº«çš„å±æ€§å’Œç»§æ‰¿çš„å±æ€§ã€‚å¯¹è±¡å®ä¾‹æœ‰ä¸€ä¸ªhasOwnProperty()æ–¹æ³•ï¼Œå¯ä»¥åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦ä¸ºåŸç”Ÿå±æ€§ã€‚ES2022 åœ¨Objectå¯¹è±¡ä¸Šé¢æ–°å¢äº†ä¸€ä¸ªé™æ€æ–¹æ³•Object.hasOwn()ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­æ˜¯å¦ä¸ºè‡ªèº«çš„å±æ€§ã€‚Object.hasOwn()å¯ä»¥æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ‰€è¦åˆ¤æ–­çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯å±æ€§åã€‚ è¿ç®—ç¬¦çš„æ‰©å±•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//æŒ‡æ•°è¿ç®—ç¬¦2 ** 2 // 42 ** 3 // 8//é“¾åˆ¤æ–­è¿ç®—ç¬¦const firstName = message?.body?.user?.firstName || &#x27;default&#x27;;const fooValue = myForm.querySelector(&#x27;input[name=foo]&#x27;)?.valuea?.b// ç­‰åŒäºa == null ? undefined : a.ba?.[x]// ç­‰åŒäºa == null ? undefined : a[x]a?.b()// ç­‰åŒäºa == null ? undefined : a.b()a?.()// ç­‰åŒäºa == null ? undefined : a()//Null åˆ¤æ–­è¿ç®—ç¬¦const animationDuration = response.settings?.animationDuration ?? 300;// é€»è¾‘èµ‹å€¼è¿ç®—ç¬¦// æˆ–èµ‹å€¼è¿ç®—ç¬¦x ||= y// ç­‰åŒäºx || (x = y)// ä¸èµ‹å€¼è¿ç®—ç¬¦x &amp;&amp;= y// ç­‰åŒäºx &amp;&amp; (x = y)// Null èµ‹å€¼è¿ç®—ç¬¦x ??= y// ç­‰åŒäºx ?? (x = y) Setå’ŒMapæ•°æ®ç»“æ„1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950// Setç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚// WeakSetç»“æ„ä¸Setç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸é‡å¤çš„å€¼çš„é›†åˆã€‚ä½†æ˜¯ï¼Œå®ƒä¸Setæœ‰ä¸¤ä¸ªåŒºåˆ«ã€‚// - WeakSet çš„æˆå‘˜åªèƒ½æ˜¯å¯¹è±¡å’Œ Symbol å€¼ï¼Œè€Œä¸èƒ½æ˜¯å…¶ä»–ç±»å‹çš„å€¼// - WeakSet ä¸­çš„å¯¹è±¡éƒ½æ˜¯å¼±å¼•ç”¨// Mapç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œä½†æ˜¯â€œé”®â€çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç§ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥å½“ä½œé”®ã€‚const map = new Map();map.set(&#x27;foo&#x27;, true);map.set(&#x27;bar&#x27;, false);map.size // 2const m = new Map();const hello = function() &#123;console.log(&#x27;hello&#x27;);&#125;;m.set(hello, &#x27;Hello ES6!&#x27;) // é”®æ˜¯å‡½æ•°m.get(hello) // Hello ES6!const m = new Map();m.set(undefined, &#x27;nah&#x27;);m.has(undefined) // truem.delete(undefined)m.has(undefined) // let map = new Map();map.set(&#x27;foo&#x27;, true);map.set(&#x27;bar&#x27;, false);map.size // 2map.clear()map.size // 0Map.prototype.keys()ï¼šè¿”å›é”®åçš„éå†å™¨ã€‚Map.prototype.values()ï¼šè¿”å›é”®å€¼çš„éå†å™¨ã€‚Map.prototype.entries()ï¼šè¿”å›æ‰€æœ‰æˆå‘˜çš„éå†å™¨ã€‚Map.prototype.forEach()ï¼šéå† Map çš„æ‰€æœ‰æˆå‘˜ã€‚// WeakMap// WeakRef Proxyå‚è€ƒ é˜®ä¸€å³°ES6å…¥é—¨æ•™ç¨‹","tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/tags/JavaScript/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"}]},{"title":"å¸¸ç”¨å¼€æºåº“","date":"2023-12-24T13:26:24.684Z","path":"wiki/Flutter/å¼€æºåº“/å¸¸ç”¨å¼€æºåº“/","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116# å¤„ç†modelï¼Œç”¨äºè‡ªåŠ¨ç”Ÿæˆå¯¹åº”å®ä½“ç±» json_annotation: json_serializable: # è®¾å¤‡ä¿¡æ¯ã€åŒ…ä¿¡æ¯ package_info_plus: device_info_plus: # ä¸‹æ‹‰ã€ä¸Šæ‹‰åˆ·æ–° easy_refresh: # åå¸æç¤º fluttertoast: # æ¨¡æ€æç¤º flutter_easyloading: 3.0.5# éŸ³é¢‘å¤„ç† just_audio: audio_session: flutter_sound: # Reactive dartå®ç° rxdart: # æ•°æ®åº“æ“ä½œ sqflite: # ç½‘ç»œè¯·æ±‚ dio: # åŠ è§£å¯† encrypt: # ç¼“å­˜ shared_preferences: # å›¾ç‰‡æ‰©å±•åº“ã€ç¼“å­˜å›¾ç‰‡ extended_image: # å¼ºå¤§çš„å·¥å…·åŒ…ï¼Œæ”¯æŒè·¯ç”±ã€çŠ¶æ€ç®¡ç†ç­‰ get: # å±å¹•é€‚é…æ–¹æ¡ˆ flutter_screenutil: # å·¦æ»‘åˆ é™¤ flutter_slidable: # è‹¹æœç™»å½• sign_in_with_apple: # å¯æ»‘åŠ¨å±•ç¤ºçš„æ§ä»¶ã€è½®æ’­å›¾ card_swiper: # å¢å¼ºç‰ˆæ–‡å­—æ§ä»¶ extended_text_field: # æµè§ˆå™¨å®¹å™¨ webview_flutter: # æƒé™ç®¡ç† permission_handler: # ç³»ç»Ÿæ–‡ä»¶é€‰æ‹© file_picker: # ç³»ç»Ÿå›¾ç‰‡é€‰æ‹© image_picker: #svgæ§ä»¶ flutter_svg: # æ”¯æŒsvgaæ§ä»¶ svgaplayer_flutter: # æ”¯æŒæ‰“å¼€å„ç§æ ¼å¼çš„æ–‡ä»¶ open_file: # å¼ºå¤§çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ flutter_bloc:# å‰ªåˆ‡æ¿å·¥å…· clipboard:# äº‹ä»¶æ€»çº¿å·¥å…· event_bus:# æ”¯æŒlottieåŠ¨ç”» lottie:# å¼‚å¸¸æ•è· sentry_flutter:# å¼€å‘è°ƒè¯•æ¡†æ¶ flutter_ume:# å„ç§è·¯å¾„çš„å°è£…ï¼Œæ¯”å¦‚ä¸´æ—¶ç›®å½•ã€ç¼“å­˜ç›®å½• path_provider:# å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€url url_launcher:# ç³»ç»Ÿåˆ†äº«ç»„ä»¶ share_plus:# å®ä½“ç±»å·¥å…·ï¼Œå¿«æ·ç”Ÿæˆmodel freezed:# è§†é¢‘æ’­æ”¾ video_player: å‚è€ƒ https://pub.dev/packages?q=is%3Aflutter-favorite","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"flutter_bloc","date":"2023-12-24T13:26:24.683Z","path":"wiki/Flutter/å¼€æºåº“/flutter_bloc/","text":"åŸºæœ¬ç”¨æ³•æ ¸å¿ƒæ¦‚å¿µï¼šå°†UIå’Œæ•°æ®åˆ†ç¦»ï¼Œæ•°æ®ä½¿ç”¨Eventã€Blocï¼ˆCubitï¼‰ã€Stateæ¥è¿›è¡Œå•é¡¹æµè½¬ã€‚ å¸¸ç”¨APIæ³¨æ„äº‹é¡¹ emitçš„æ—¶å€™éœ€è¦é‡æ–°æ„é€ Stateå¯¹è±¡ï¼Œå¢åŠ å†…å­˜å¼€é”€ ä¸ºäº†ç²¾ç»†åŒ–å¤„ç†ï¼Œéœ€è¦ä½¿ç”¨å¤šä¸ªBlocBuilderï¼Œæ¯ä¸ªBuilderéƒ½è¦å®ç°è‡ªå·±çš„buildWhen å¼‚æ­¥æ“ä½œå®Œåçš„emitä¹‹å‰éœ€è¦åˆ¤æ–­ä¸‹isClosed å‚è€ƒ å®˜æ–¹æ–‡æ¡£","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"bloc_test","date":"2023-12-24T13:26:24.683Z","path":"wiki/Flutter/å•å…ƒæµ‹è¯•/bloc_test/","text":"åˆ›å»ºMock1234import &#x27;package:bloc_test/bloc_test.dart&#x27;;class MockCounterBloc extends MockBloc&lt;CounterEvent, int&gt; implements CounterBloc &#123;&#125;class MockCounterCubit extends MockCubit&lt;int&gt; implements CounterCubit &#123;&#125; blocTest1234567891011121314void blocTest&lt;B extends BlocBase&lt;State&gt;, State&gt;( String description, &#123; //æµ‹è¯•çš„æè¿° required B Function() build, //åˆ›å»ºbloc FutureOr&lt;void&gt; Function()? setUp, //åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰æ‰§è¡Œ State Function()? seed, dynamic Function(B bloc)? act, //æ‰§è¡Œçš„åŠ¨ä½œ Duration? wait, int skip = 0, dynamic Function()? expect, //æœŸæœ›çš„ç»“æœ dynamic Function(B bloc)? verify, dynamic Function()? errors, FutureOr&lt;void&gt; Function()? tearDown, //åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œåæ‰§è¡Œ dynamic tags,&#125;) å‚æ•° setUpï¼šå‰ç½®è®¾ç½® tearDownï¼šç”¨ä¾‹ç»“æŸåçš„åŠ¨ä½œï¼Œå¯ç”¨äºé‡Šæ”¾èµ„æº buildï¼ˆå¿…éœ€ï¼‰ï¼šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºåˆ›å»ºBLoCçš„å®ä¾‹ã€‚åœ¨è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¹¶è¿”å›è¦æµ‹è¯•çš„BLoCå®ä¾‹ seedï¼šæä¾›ä¸€ä¸ªåˆå§‹çŠ¶æ€ï¼ˆstateï¼‰ï¼Œè¯¥çŠ¶æ€å°†åœ¨æ‰§è¡Œactä¹‹å‰ç”¨äºåˆå§‹åŒ–blocã€‚å®ƒæ˜¯ä¸€ä¸ªå¯é€‰çš„å›è°ƒå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ actï¼ˆå¯é€‰ï¼‰ï¼šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºæ‰§è¡ŒBLoCçš„æ“ä½œã€‚åœ¨è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨BLoCçš„æ–¹æ³•æˆ–å‘é€äº‹ä»¶ï¼Œä»¥è§¦å‘BLoCçš„çŠ¶æ€å˜åŒ– expectï¼ˆå¯é€‰ï¼‰ï¼šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºå®šä¹‰é¢„æœŸçš„çŠ¶æ€æµæˆ–ç»“æœã€‚åœ¨è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨expectå‡½æ•°æ¥å®šä¹‰é¢„æœŸçš„çŠ¶æ€æµæˆ–ç»“æœï¼Œä»¥ä¾¿ä¸å®é™…çš„çŠ¶æ€æµæˆ–ç»“æœè¿›è¡Œæ¯”è¾ƒ skipï¼šç”¨äºæŒ‡å®šæ˜¯å¦è·³è¿‡æ­¤æµ‹è¯•ã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œåˆ™è·³è¿‡æ­¤æµ‹è¯•ï¼›å¦‚æœè®¾ç½®ä¸ºfalseæˆ–ä¸æä¾›è¯¥å‚æ•°ï¼Œåˆ™æ‰§è¡Œæ­¤æµ‹è¯•ã€‚ errorï¼šç”¨äºæŒ‡å®šåœ¨æ‰§è¡Œactåé¢„æœŸblocä¼šæŠ›å‡ºçš„é”™è¯¯ã€‚å®ƒæ¥å—ä¸€ä¸ªè¿”å›Matcherçš„å‡½æ•°ï¼Œè¯¥Matcherç”¨äºéªŒè¯blocæŠ›å‡ºçš„é”™è¯¯æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚å¦‚æœactæ‰§è¡Œåæ²¡æœ‰æŠ›å‡ºé”™è¯¯ï¼Œæˆ–è€…æŠ›å‡ºçš„é”™è¯¯ä¸é¢„æœŸä¸ç¬¦ï¼Œåˆ™æµ‹è¯•å°†å¤±è´¥ã€‚ verifyï¼šæ‰§è¡Œå®Œexpectåè¢«è°ƒç”¨ï¼Œç”¨äºè¿›è¡Œé¢å¤–çš„éªŒè¯å’Œæ–­è¨€æ“ä½œã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªblocå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥åœ¨å‡½æ•°ä½“å†…å¯¹è¯¥å¯¹è±¡è¿›è¡Œæ“ä½œå’Œæ–­è¨€ã€‚ tagsï¼šå¯æ·»åŠ æµ‹è¯•æ ‡ç­¾ï¼Œå¯ä»¥é€šè¿‡è¿è¡Œflutter test â€“tags&#x3D;xxxæ¥åªè¿è¡Œå¸¦æœ‰â€xxxâ€æ ‡ç­¾çš„æµ‹è¯• å‚æ•°ç¤ºä¾‹buildã€actã€expect1234567891011121314group(&#x27;CounterBloc&#x27;, () &#123; blocTest( &#x27;emits [] when nothing is added&#x27;, build: () =&gt; CounterBloc(), expect: () =&gt; [], ); blocTest( &#x27;emits [1] when CounterIncrementPressed is added&#x27;, build: () =&gt; CounterBloc(), act: (bloc) =&gt; bloc.add(CounterIncrementPressed()), expect: () =&gt; [1], );&#125;); seed12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061import &#x27;package:bloc_test/bloc_test.dart&#x27;;import &#x27;package:equatable/equatable.dart&#x27;;import &#x27;package:flutter_bloc/flutter_bloc.dart&#x27;;import &#x27;package:flutter_test/flutter_test.dart&#x27;;import &#x27;package:mockito/mockito.dart&#x27;;import &#x27;package:xdragon/services/interceptors/verify_permission.dart&#x27;;class CounterEvent extends Equatable &#123; @override List&lt;Object?&gt; get props =&gt; [];&#125;class CounterIncrementEvent extends CounterEvent &#123;&#125;class CounterDecrementEvent extends CounterEvent &#123;&#125;class CounterState extends Equatable &#123; final int count; CounterState(this.count); @override List&lt;Object?&gt; get props =&gt; [count];&#125;class CounterBloc extends Bloc&lt;CounterEvent, CounterState&gt; &#123; CounterBloc() : super(CounterState(0)) &#123; on&lt;CounterIncrementEvent&gt;(onCounterIncrementEvent); on&lt;CounterDecrementEvent&gt;(onCounterDecrementEvent); &#125; void onCounterIncrementEvent(CounterEvent event, Emitter&lt;CounterState&gt; emit) &#123; emit(CounterState(state.count + 1)); &#125; void onCounterDecrementEvent(CounterEvent event, Emitter&lt;CounterState&gt; emit) &#123; emit(CounterState(state.count - 1)); &#125;&#125;void main() &#123; test(&#x27;test event&#x27;, () &#123; expect(CounterEvent(), CounterEvent()); &#125;); test(&#x27;test state&#x27;, () &#123; expect(CounterState(10), CounterState(10)); &#125;); blocTest&lt;CounterBloc, CounterState&gt;( &#x27;CounterBloc test &#x27;, build: () =&gt; CounterBloc(), seed: () =&gt; CounterState(10), act: (bloc) =&gt; bloc.add(CounterIncrementEvent()), expect: () =&gt; [CounterState(11)], verify: (bloc) &#123; // æ ¡éªŒ expect(bloc.state.count , 11); &#125;, );&#125; errors123456blocTest( &#x27;CounterBloc throws Exception when decrement is added&#x27;, build: () =&gt; CounterBloc(), act: (bloc) =&gt; bloc.add(CounterEvent.decrement), errors: () =&gt; throwsA(isA&lt;Exception&gt;()),); verify12345678910111213141516blocTest( &#x27;CounterBloc emits [1] when increment is added&#x27;, build: () =&gt; CounterBloc(), act: (bloc) =&gt; bloc.add(CounterEvent.increment), expect: () =&gt; [1], verify: (bloc) &#123; // éªŒè¯æŸä¸ªæ–¹æ³•è¢«è°ƒç”¨äº†ä¸€æ¬¡ verify(() =&gt; repository.someMethod(any())).called(1); // éªŒè¯æŸä¸ªå±æ€§çš„å€¼ expect(bloc.someProperty, equals(42)); // è¿›è¡Œå…¶ä»–çš„éªŒè¯æ“ä½œ // ... &#125;,); æµ‹è¯•event123456789101112131415161718//æ³¨æ„å¦‚æœä¸ç»§æ‰¿Equatableï¼Œåˆ™ä¼šæ¯”è¾ƒåœ°å€ï¼Œå‰åä¸¤ä¸ªeventä¼šä¸ç›¸ç­‰sealed class PostEvent extends Equatable &#123; @override List&lt;Object&gt; get props =&gt; [];&#125;final class PostFetched extends PostEvent &#123;&#125;void main() &#123; group(&#x27;PostEvent&#x27;, () &#123; group(&#x27;PostFetched&#x27;, () &#123; test(&#x27;supports value comparison&#x27;, () &#123; expect(PostFetched(), PostFetched()); &#125;); &#125;); &#125;);&#125; æµ‹è¯•state123456789101112131415161718192021222324252627282930313233343536373839404142final class PostState extends Equatable &#123;const PostState(&#123; this.status = PostStatus.initial, this.hasReachedMax = false,&#125;);final PostStatus status;final bool hasReachedMax;PostState copyWith(&#123; PostStatus? status, bool? hasReachedMax,&#125;) &#123; return PostState( status: status ?? this.status, hasReachedMax: hasReachedMax ?? this.hasReachedMax, );&#125;@overrideString toString() &#123; return &#x27;&#x27;&#x27;PostState &#123; status: $status, hasReachedMax: $hasReachedMax &#125;&#x27;&#x27;&#x27;;&#125;@overrideList&lt;Object&gt; get props =&gt; [status, hasReachedMax];&#125;/// åŒç†ï¼Œstateä¹Ÿéœ€è¦ç»§æ‰¿Equatablevoid main() &#123; group(&#x27;PostState&#x27;, () &#123; test(&#x27;supports value comparison&#x27;, () &#123; expect(PostState(), PostState()); expect( PostState().toString(), PostState().toString(), ); &#125;); &#125;);&#125; - å‚è€ƒ https://pub.dev/packages/bloc_test","tags":[{"name":"Flutter å•å…ƒæµ‹è¯•","slug":"Flutter-å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/tags/Flutter-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å•å…ƒæµ‹è¯•","slug":"Flutter/å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/categories/Flutter/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}]},{"title":"é›†æˆæµ‹è¯•","date":"2023-12-24T13:26:24.683Z","path":"wiki/Flutter/å•å…ƒæµ‹è¯•/é›†æˆæµ‹è¯•/","text":"integration_testé›†æˆæµ‹è¯•æ¡†æ¶ï¼Œå¯åˆ†ææµ‹è¯•ç”¨ä¾‹çš„æ€§èƒ½æŒ‡æ ‡ å®˜æ–¹æ–‡æ¡£ï¼šhttps://flutter.cn/docs/cookbook/testing/integration/introduction åŸºæœ¬ä½¿ç”¨1. æ·»åŠ é…ç½®123456789dev_dependencies: flutter_test: sdk: flutter flutter_lints: ^1.0.0 mockito: integration_test: sdk: flutter flutter_driver: sdk: flutter 2. æ ¹ç›®å½•ä¸‹æ–°å»ºtest_driveræ–‡ä»¶å¤¹ï¼Œç¼–å†™integration_test.dartæ–‡ä»¶1234567891011121314151617import &#x27;dart:io&#x27;;import &#x27;package:integration_test/integration_test_driver_extended.dart&#x27;;Future&lt;void&gt; main() =&gt; integrationDriver( onScreenshot: (String screenshotPath, List&lt;int&gt; screenshotBytes) async &#123; final File image = File(screenshotPath); final dir = image.parent; print(image); if(!await dir.exists()) await dir.create(recursive: true); image.writeAsBytesSync(screenshotBytes); return true; &#125;); 3. æ ¹ç›®å½•æ–°å»ºintegration_testæ–‡ä»¶å¤¹ï¼Œç¼–å†™app_test.dartæ–‡ä»¶123456789void main() async &#123; // ç¡®ä¿Flutteræ¡†æ¶å·²ç»åˆå§‹åŒ–å®Œæˆ IntegrationTestWidgetsFlutterBinding.ensureInitialized(); testWidgets(&#x27;test app&#x27;, (widgetTester) async &#123; expect(XDragonApp(), isA&lt;StatefulWidget&gt;()); &#125;); &#125; 4. è¿è¡Œ123456# --flavor æŒ‡å®šdevelopã€stagingã€release# --driver æŒ‡å®šé©±åŠ¨æ–‡ä»¶# --target æŒ‡å®šæµ‹è¯•ç”¨ä¾‹ï¼Œå¯ä»¥ä¸è®¾ç½®driverï¼Œé»˜è®¤driveråå­—ä¸ºæµ‹è¯•ç”¨ä¾‹åå­—_test.dart# æ¯”å¦‚ï¼štargetçš„åå­—ä¸ºapp_feature.dartï¼Œåˆ™driveråå­—ä¸ºapp_feature_test.dartflutter driver --driver=test_driver/integration_test.dart --target=integration_test/app_test.dart --flavor development ç»Ÿè®¡è¦†ç›–ç‡123456789101112# Generate `coverage/lcov.info` file# è¿è¡Œæµ‹è¯•è„šæœ¬flutter test --coverage# Generate HTML report# Note: on macOS you need to have lcov installed on your system (`brew install lcov`) to use this:# å°†ç”Ÿæˆæ–‡ä»¶è½¬æ¢æˆhtmlæ–‡ä»¶genhtml coverage/lcov.info -o coverage/html# Open the reportopen coverage/html/index.html å‚è€ƒæ–‡æ¡£ https://juejin.cn/post/7106403440774889509","tags":[{"name":"Flutter å•å…ƒæµ‹è¯•","slug":"Flutter-å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/tags/Flutter-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å•å…ƒæµ‹è¯•","slug":"Flutter/å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/categories/Flutter/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}]},{"title":"å•å…ƒæµ‹è¯•","date":"2023-12-24T13:26:24.683Z","path":"wiki/Flutter/å•å…ƒæµ‹è¯•/å•å…ƒæµ‹è¯•/","text":"å•å…ƒæµ‹è¯•çš„ä½œç”¨ï¼Ÿ ä¿è¯ä»£ç è´¨é‡ï¼Œå½“ä¸€ä¸ªæ–¹æ³•åœ¨æŸä¸ªç‰ˆæœ¬è¿›è¡Œäº†è°ƒæ•´ï¼Œå¦‚æœå¯¹åº”çš„å•å…ƒæµ‹è¯•æ— æ³•é€šè¿‡ï¼Œè¯´æ˜è¿™ä¸ªæ–¹æ³•çš„æ”¹åŠ¨æœ‰é—®é¢˜ã€‚å•å…ƒæµ‹è¯•ä¸­ä¹Ÿèƒ½åŒ…å«å¾ˆå¤šè¾¹ç•Œæ¡ä»¶ï¼Œç”šè‡³å¯ä»¥æŠŠæµ‹è¯•ç”¨ä¾‹çš„åœºæ™¯éƒ½åŒ…å«ï¼Œè¿™æ ·å°±ç›¸å½“äºåšäº†ä¸€éæµ‹è¯•çš„å·¥ä½œï¼Œè€Œä¸”å¯ä»¥å¤ç”¨æ£€æŸ¥ï¼Œä¸‹æ¬¡è¿­ä»£æ—¶å†è¿è¡Œä¸€éï¼Œè¯´ä¸å®šèƒ½å‘ç°æ–°é—®é¢˜ å•å…ƒæµ‹è¯•é˜¶æ®µå‘ç°bugçš„å¤„ç†æ—¶é—´ç›¸å¯¹åæœŸæµ‹è¯•å‘ç°åé¦ˆç»™ç ”å‘ï¼Œå¤„ç†çš„æ—¶é—´è¦çŸ­å¾ˆå¤šï¼Œæé«˜æ•ˆç‡ å•å…ƒæµ‹è¯•åšçš„å¥½ä¸å¥½ï¼Œåœ¨äºæµ‹è¯•ç”¨ä¾‹çš„æœ‰æ•ˆæ€§ æµ‹è¯•çš„è¯„ä»·æŒ‡æ ‡ï¼š é€šè¿‡ç‡ è¦†ç›–ç‡ æœ‰æµ‹è¯•ç”¨ä¾‹ æµ‹è¯•æ–¹æ³• Code Review é™æ€ä»£ç æ‰«æ å•å…ƒæµ‹è¯•ç”¨ä¾‹ç¼–å†™ï¼šç»¼åˆè¿ç”¨é»‘ç›’æµ‹è¯•ã€ç™½ç›’æµ‹è¯•æ–¹æ³•æ¥è¿›è¡Œæµ‹è¯•ç”¨ä¾‹è®¾è®¡ æµ‹è¯•ç”¨ä¾‹è§„èŒƒå•å…ƒæµ‹è¯•çš„æœ€ä½³å®è·µ æ¨¡å—åŒ–ä»£ç ï¼šå°†ä»£ç åˆ†è§£ä¸ºå°çš„ã€å¯é‡å¤ä½¿ç”¨çš„æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—åªè´Ÿè´£ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½ã€‚è¿™æ ·å¯ä»¥æ›´å®¹æ˜“åœ°é’ˆå¯¹å•ä¸ªæ¨¡å—ç¼–å†™æµ‹è¯•ç”¨ä¾‹ã€‚ é¿å…ä¾èµ–ï¼šä»£ç ä¸­åº”é¿å…ä½¿ç”¨å…¨å±€å˜é‡ã€é™æ€æ–¹æ³•æˆ–å…¶ä»–ç¡¬ç¼–ç çš„ä¾èµ–é¡¹ï¼Œå› ä¸ºè¿™äº›ä¼šå¢åŠ æµ‹è¯•çš„å¤æ‚æ€§ã€‚ç›¸åï¼Œåº”ä½¿ç”¨ä¾èµ–æ³¨å…¥æˆ–å…¶ä»–æŠ€æœ¯æ¥æ¨¡æ‹Ÿä¾èµ–é¡¹ã€‚ æ–¹æ³•ã€å‡½æ•°çš„æµ‹è¯•æµ‹è¯•ç½‘ç»œè¯·æ±‚æµ‹è¯•UIæµ‹è¯•Blocé›†æˆæµ‹è¯•Flutterå¦‚ä½•è¿›è¡Œå•å…ƒæµ‹è¯• å•å…ƒæµ‹è¯•ãƒ¼å•å…ƒæµ‹è¯•å¯¹å•ä¸ªå‡½æ•°ã€æ–¹æ³•æˆ–ç±»æ‰§è¡Œæµ‹è¯•ã€‚æˆ‘ä»¬ä½¿ç”¨å•å…ƒæµ‹è¯•æ¥æµ‹è¯•æ‚¨æƒ³è¦æµ‹è¯•çš„éå¸¸å°çš„ä»£ç æˆ–å‡½æ•°ã€‚ widget æµ‹è¯•ãƒ¼ widget æµ‹è¯•(åœ¨å…¶ä»– UI æ¡†æ¶ä¸­ç§°ä¸ºç»„ä»¶æµ‹è¯•)æµ‹è¯•å•ä¸ª widget ã€‚ é›†æˆæµ‹è¯•ãƒ¼ãƒ¼é›†æˆæµ‹è¯•æµ‹è¯•ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ç¨‹åºæˆ–åº”ç”¨ç¨‹åºçš„å¾ˆå¤§ä¸€éƒ¨åˆ†ï¼Œè¿™äº›åº”ç”¨ç¨‹åºå°†è®¸å¤šäº‹æƒ…å’Œæµ‹è¯•ç»“åˆåœ¨ä¸€èµ·ï¼Œæ¯”å¦‚åˆ›å»ºä¸€ä¸ªæµã€‚ Flutterå•å…ƒæµ‹è¯•åº“123456789101112dev_dependencies: test: # çº¯dartæµ‹è¯•æ¡†æ¶ flutter_test: # åŸºäºtestçš„flutteræµ‹è¯•æ¡†æ¶ sdk: flutter flutter_driver: sdk: flutter mockito: http_mock_adapter: bloc_test: test_api: # dartæµ‹è¯•æ¡†æ¶ integration_test: # é›†æˆæµ‹è¯• flutter_teståŸºäºdartçš„teståº“ï¼Œç”¨äºFlutteré¡¹ç›®çš„æµ‹è¯•åº“ï¼Œè·Ÿå…¶ä»–è¯­è¨€ç±»ä¼¼ï¼Œæä¾›äº†ä¸€äº›æµ‹è¯•çš„æ–¹æ³•ï¼Œå¦‚expectã€groupã€testã€testWidgetsã€setUpã€tearDownç­‰ã€‚ https://api.flutter.dev/flutter/flutter_test&#x2F;flutter_test-library.html åŸºæœ¬ç”¨æ³•12345678910111213141516171819202122232425262728293031@Skip(&#x27;è·³è¿‡å½“å‰æµ‹è¯•ç”¨ä¾‹&#x27;)@Timeout(Duration(seconds: 10)) //è®¾ç½®è¶…æ—¶æ—¶é—´import &#x27;package:flutter_test/flutter_test.dart&#x27;;void main() &#123; setUp(() &#123; //åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰æ‰§è¡Œ &#125;); tearDown(() &#123; //åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œåæ‰§è¡Œ &#125;); test(&#x27;æè¿°æµ‹è¯•å†…å®¹&#x27;, () async &#123; //æ”¯æŒå¼‚æ­¥æµ‹è¯• expect(1+1, 2); &#125;); group(&#x27;æè¿°åˆ†ç»„&#x27;, () &#123; test(&#x27;æè¿°æµ‹è¯•å†…å®¹&#x27;, () async &#123; &#125;); &#125;, skip: &#x27;è·³è¿‡å½“å‰åˆ†ç»„&#x27;, timeout: Timeout(Duration(seconds: 10)) //è®¾ç½®è¶…æ—¶æ—¶é—´ );&#125; æ–¹æ³•ä»‹ç» expectï¼šæ–­è¨€ï¼Œåˆ¤æ–­æ˜¯å¦ç¬¦åˆé¢„æœŸ groupï¼šåˆ†ç»„ï¼Œå¯ä»¥æŠŠä¸€äº›ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹æ”¾åœ¨ä¸€èµ· testï¼šå•ä¸ªæµ‹è¯•ç”¨ä¾‹ testWidgetsï¼šæµ‹è¯•UI pumpWidget()ï¼šåˆ›å»ºå¹¶æ¸²æŸ“widget pump(): è§¦å‘widgeté‡å»ºï¼Œä»…é‡å»ºå·²æ›´æ”¹çš„ widget pumpAndSettle():åœ¨ç»™å®šæœŸé—´å†…ä¸æ–­é‡å¤è°ƒç”¨ pump() ç›´åˆ°å®Œæˆæ‰€æœ‰ç»˜åˆ¶å¸§ï¼Œä¸€èˆ¬éœ€è¦ç­‰åˆ°æ‰€æœ‰åŠ¨ç”»å…¨éƒ¨å®Œæˆ setUpï¼šåœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰æ‰§è¡Œ tearDownï¼šåœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œåæ‰§è¡Œ äº¤äº’ç±»API enterText(): æ¨¡æ‹Ÿè¾“å…¥ tap(): æ¨¡æ‹Ÿç‚¹å‡» drag(): æ¨¡æ‹Ÿæ‹–æ‹½ longPress():æ¨¡æ‹Ÿé•¿æŒ‰ scrollUntilVisible(): æ¨¡æ‹Ÿæ»šåŠ¨åˆ°å¯è§ä½ç½® scrollIntoView(): æ¨¡æ‹Ÿæ»šåŠ¨åˆ°å¯è§ä½ç½® scroll(): æ¨¡æ‹Ÿæ»šåŠ¨ fling(): æ¨¡æ‹Ÿæ‹–æ‹½ flingFrom(): æ¨¡æ‹Ÿæ‹–æ‹½ flingFromEdge(): æ¨¡æ‹Ÿæ‹–æ‹½ flingFromCenter(): æ¨¡æ‹Ÿæ‹–æ‹½ ä½¿ç”¨Finderå®šä½Widget text(String text): æŸ¥æ‰¾ç‰¹å®šæ–‡æœ¬çš„Text widget byWidget(Widget widget, {bool skipOffstage &#x3D; true}): é€šè¿‡widgetæŸ¥æ‰¾widget byKey(Key key): é€šè¿‡keyæŸ¥æ‰¾widget byType(Type type): é€šè¿‡ç±»å‹æŸ¥æ‰¾widget byWidget(Widget widget): byElementType(Type type, { bool skipOffstage &#x3D; true }): matchers findsOneWidgetï¼š æ‰¾åˆ°ä¸€ä¸ªwidget findsWidgetsï¼šæ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª findsNothingï¼šæ²¡æœ‰æ‰¾åˆ° findsNWidgetsï¼šæ‰¾åˆ°æŒ‡å®šæ•°é‡çš„widget TestPointerï¼šæµ‹è¯•æ‰‹åŠ¿ï¼ŒæŒ‰ä¸‹ã€æ»‘åŠ¨ã€æŠ¬èµ·ç­‰ TestTextInputï¼šæµ‹è¯•è¾“å…¥æ¡† AutomatedTestWidgetsFlutterBindingï¼šä¼šæ¨¡æ‹Ÿç”¨æˆ·æ“ä½œå¹¶æ§åˆ¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚å®ƒå¯ä»¥å¤„ç†å¼‚æ­¥æ“ä½œã€åŠ¨ç”»å’Œå®šæ—¶å™¨ç­‰ï¼Œä»¥ç¡®ä¿æµ‹è¯•ä»£ç åœ¨æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚é€šå¸¸ä¸ flutter_driver æˆ–å…¶ä»–è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºæ‰§è¡Œé›†æˆæµ‹è¯•æˆ–ç«¯åˆ°ç«¯æµ‹è¯• AnimationSheetBuilderï¼šç”¨äºæµ‹è¯•åŠ¨ç”» mockito https://pub.dev/packages/mockito æ–‡æ¡£ä¸­æ–‡ç¿»è¯‘ mockitoåº“ç”¨æ¥æ¨¡æ‹Ÿæ•°æ®ã€‚ ä½¿ç”¨Mockitoäº§ç”Ÿçš„mockç±»ï¼Œéœ€è¦æ·»åŠ build_runnerä¾èµ–ã€‚æœ‰ä»¥ä¸‹ä¸»è¦ç”¨é€”ï¼š å¯é€šè¿‡æ ‡æ³¨æˆ–Fakeçš„æ–¹å¼æ¥ç”Ÿæˆmockç±» å¯é€šè¿‡when().thenReturn()æ¥æ¨¡æ‹Ÿæ–¹æ³•çš„è¿”å›å€¼ å¯é€šè¿‡argThat()æ¥æ¨¡æ‹Ÿæ–¹æ³•çš„å‚æ•° å¯é€šè¿‡verify()æ¥éªŒè¯æ–¹æ³•çš„è°ƒç”¨ verifyInOrderå¯æ ¡éªŒé¡ºåº å¯é€šè¿‡verifyNoMoreInteractions()æ¥éªŒè¯æ²¡æœ‰æ›´å¤šçš„è°ƒç”¨ å¯é€šè¿‡reset()æ¥é‡ç½®mock å¯é€šè¿‡verifyZeroInteractions()æ¥éªŒè¯æ²¡æœ‰è°ƒç”¨ å¯é€šè¿‡verifyNever()æ¥éªŒè¯æ²¡æœ‰è°ƒç”¨ å¯é€šè¿‡verifyInOrder()æ¥éªŒè¯é¡ºåº å¯é€šè¿‡verifyStream()æ¥éªŒè¯Stream å¯é€šè¿‡verifyStreamEvent()æ¥éªŒè¯Streamçš„äº‹ä»¶ calledèƒ½æ ¡éªŒè°ƒç”¨æ¬¡æ•° capturedå­˜å‚¨è°ƒç”¨æ—¶çš„å‚æ•° thenReturnã€thenAnswer thenReturnä¼šè¿”å›Futureæˆ–Streamï¼Œå¯èƒ½æŠ›å‡ºArgumentError thenAnsweråªä¼šè¿”å›Futureæˆ–Stream http_mock_adapterbloc_test https://pub.dev/packages/bloc_test 12345678910111213141516void blocTest&lt;B extends BlocBase&lt;State&gt;, State&gt;( String description, &#123; //æµ‹è¯•çš„æè¿° required B Function() build, //åˆ›å»ºbloc FutureOr&lt;void&gt; Function()? setUp, //åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰æ‰§è¡Œ State Function()? seed, dynamic Function(B bloc)? act, //æ‰§è¡Œçš„åŠ¨ä½œ Duration? wait, int skip = 0, dynamic Function()? expect, //æœŸæœ›çš„ç»“æœ dynamic Function(B bloc)? verify, dynamic Function()? errors, FutureOr&lt;void&gt; Function()? tearDown, //åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œåæ‰§è¡Œ dynamic tags,&#125;) flutter_driveré›†æˆæµ‹è¯•æ¡†æ¶ å‚è€ƒ 5ä¸ªå…³é”®é—®é¢˜è®©å•å…ƒæµ‹è¯•çš„ä»·å€¼æœ€å¤§åŒ– å•å…ƒæµ‹è¯•ä»‹ç» å¦‚ä½•å†™å‡ºæœ‰æ•ˆçš„å•å…ƒæµ‹è¯• Flutterå¦‚ä½•Mock MethodChannelè¿›è¡Œå•å…ƒæµ‹è¯•","tags":[{"name":"Flutter å•å…ƒæµ‹è¯•","slug":"Flutter-å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/tags/Flutter-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å•å…ƒæµ‹è¯•","slug":"Flutter/å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/categories/Flutter/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}]},{"title":"flutter_test","date":"2023-12-24T13:26:24.683Z","path":"wiki/Flutter/å•å…ƒæµ‹è¯•/flutter_test/","text":"æè¿°åŸºäºdartçš„teståº“ï¼Œç”¨äºFlutteré¡¹ç›®çš„æµ‹è¯•åº“ã€‚ å¯ç”¨äºæµ‹è¯•ï¼š æ–¹æ³•ã€å‡½æ•° UI åŸºæœ¬ç”¨æ³•1. æ·»åŠ é…ç½®123dev_dependencies: flutter_test: sdk: flutter 2. ç¼–å†™æµ‹è¯•ç”¨ä¾‹1234567891011121314151617181920212223242526272829303132@Skip(&#x27;è·³è¿‡å½“å‰æµ‹è¯•ç”¨ä¾‹&#x27;)@Timeout(Duration(seconds: 10)) //è®¾ç½®è¶…æ—¶æ—¶é—´import &#x27;package:flutter_test/flutter_test.dart&#x27;;void main() &#123;//åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰æ‰§è¡Œ setUp(() &#123; &#125;); //åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œåæ‰§è¡Œ tearDown(() &#123; &#125;);//å•ä¸ªç”¨ä¾‹ test(&#x27;æè¿°æµ‹è¯•å†…å®¹&#x27;, () async &#123; //æ”¯æŒå¼‚æ­¥æµ‹è¯• expect(1+1, 2); &#125;);//ç»„ç”¨ä¾‹ group(&#x27;æè¿°åˆ†ç»„&#x27;, () &#123; test(&#x27;æè¿°æµ‹è¯•å†…å®¹&#x27;, () async &#123; &#125;); &#125;, skip: &#x27;è·³è¿‡å½“å‰åˆ†ç»„&#x27;, timeout: Timeout(Duration(seconds: 10)) //è®¾ç½®è¶…æ—¶æ—¶é—´ );&#125; å¸¸ç”¨APIä»‹ç»åŸºæœ¬æ–¹æ³• groupï¼šåˆ†ç»„ï¼Œå¯ä»¥æŠŠä¸€äº›ç›¸å…³çš„æµ‹è¯•ç”¨ä¾‹æ”¾åœ¨ä¸€èµ· testï¼šå•ä¸ªæµ‹è¯•ç”¨ä¾‹ testWidgetsï¼šæµ‹è¯•UI pumpWidget()ï¼šåˆ›å»ºå¹¶æ¸²æŸ“widget pump(): è§¦å‘widgeté‡å»ºï¼Œä»…é‡å»ºå·²æ›´æ”¹çš„ widget pumpAndSettle():åœ¨ç»™å®šæœŸé—´å†…ä¸æ–­é‡å¤è°ƒç”¨ pump() ç›´åˆ°å®Œæˆæ‰€æœ‰ç»˜åˆ¶å¸§ï¼Œä¸€èˆ¬éœ€è¦ç­‰åˆ°æ‰€æœ‰åŠ¨ç”»å…¨éƒ¨å®Œæˆ setUpï¼šåœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œå‰æ‰§è¡Œ tearDownï¼šåœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹æ‰§è¡Œåæ‰§è¡Œ expectï¼šæ–­è¨€ï¼Œåˆ¤æ–­æ˜¯å¦ç¬¦åˆé¢„æœŸ äº¤äº’ç±»API enterText(): æ¨¡æ‹Ÿè¾“å…¥ tap(): æ¨¡æ‹Ÿç‚¹å‡» drag(): æ¨¡æ‹Ÿæ‹–æ‹½ longPress():æ¨¡æ‹Ÿé•¿æŒ‰ scrollUntilVisible(): æ¨¡æ‹Ÿæ»šåŠ¨åˆ°å¯è§ä½ç½® scrollIntoView(): æ¨¡æ‹Ÿæ»šåŠ¨åˆ°å¯è§ä½ç½® scroll(): æ¨¡æ‹Ÿæ»šåŠ¨ fling(): æ¨¡æ‹Ÿæ‹–æ‹½ flingFrom(): æ¨¡æ‹Ÿæ‹–æ‹½ flingFromEdge(): æ¨¡æ‹Ÿæ‹–æ‹½ flingFromCenter(): æ¨¡æ‹Ÿæ‹–æ‹½ ä½¿ç”¨Finderå®šä½Widget text(String text): æŸ¥æ‰¾ç‰¹å®šæ–‡æœ¬çš„Text widget byWidget(Widget widget, {bool skipOffstage &#x3D; true}): é€šè¿‡widgetæŸ¥æ‰¾widget byWidgetPredicateï¼šæ ¹æ®å…·ä½“æ¡ä»¶è¿›è¡ŒæŸ¥æ‰¾ byKey(Key key): é€šè¿‡keyæŸ¥æ‰¾widget byType(Type type): é€šè¿‡ç±»å‹æŸ¥æ‰¾widget byElementType(Type type, { bool skipOffstage &#x3D; true }): matchers findsOneWidgetï¼šæ‰¾åˆ°ä¸€ä¸ªwidget findsWidgetsï¼šæ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ª findsNothingï¼šæ²¡æœ‰æ‰¾åˆ° findsNWidgetsï¼šæ‰¾åˆ°æŒ‡å®šæ•°é‡çš„widget TestPointerï¼šæµ‹è¯•æ‰‹åŠ¿ï¼ŒæŒ‰ä¸‹ã€æ»‘åŠ¨ã€æŠ¬èµ·ç­‰ TestTextInputï¼šæµ‹è¯•è¾“å…¥æ¡† AutomatedTestWidgetsFlutterBindingï¼šä¼šæ¨¡æ‹Ÿç”¨æˆ·æ“ä½œå¹¶æ§åˆ¶åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚å®ƒå¯ä»¥å¤„ç†å¼‚æ­¥æ“ä½œã€åŠ¨ç”»å’Œå®šæ—¶å™¨ç­‰ï¼Œä»¥ç¡®ä¿æµ‹è¯•ä»£ç åœ¨æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚é€šå¸¸ä¸ flutter_driver æˆ–å…¶ä»–è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ä¸€èµ·ä½¿ç”¨ï¼Œç”¨äºæ‰§è¡Œé›†æˆæµ‹è¯•æˆ–ç«¯åˆ°ç«¯æµ‹è¯• AnimationSheetBuilderï¼šç”¨äºæµ‹è¯•åŠ¨ç”» UIæµ‹è¯•ç”¨ä¾‹ä¸»è¦æ˜¯ç”¨ä»¥ä¸‹å·¥å…·è¿›è¡ŒUIçš„æµ‹è¯•ï¼š WidgetTesterï¼Œå¯åœ¨æµ‹è¯•ç¯å¢ƒå»ºç«‹widgetå¹¶ä¸å…¶äº¤äº’ testWidgets()å‡½æ•°ï¼Œæ­¤å‡½æ•°ä¼šè‡ªåŠ¨ä¸ºæ¯ä¸ªæµ‹è¯•åˆ›å»ºä¸€ä¸ªWidgetTesterï¼Œç”¨æ¥ä»£æ›¿æ™®é€šçš„testå‡½æ•° Finderç±»ï¼Œæ–¹ä¾¿åœ¨æµ‹è¯•ç¯å¢ƒä¸‹æŸ¥æ‰¾widgets Widget-specific Matcherå¸¸é‡ï¼Œç”¨äºéªŒè¯ 1. åˆ›å»ºç”¨äºæµ‹è¯•çš„Widget12345678910111213141516171819202122232425class MyWidget extends StatelessWidget &#123; const MyWidget(&#123; super.key, required this.title, required this.message, &#125;); final String title; final String message; @override Widget build(BuildContext context) &#123; return MaterialApp( title: &#x27;Flutter Demo&#x27;, home: Scaffold( appBar: AppBar( title: Text(title), ), body: Center( child: Text(message), ), ), ); &#125;&#125; 2. åˆ›å»ºä¸€ä¸ªtestWidgetsæµ‹è¯•æ–¹æ³•123456789void main() &#123; // Define a test. The TestWidgets function also provides a WidgetTester // to work with. The WidgetTester allows you to build and interact // with widgets in the test environment. testWidgets(&#x27;MyWidget has a title and message&#x27;, (tester) async &#123; //å»ºç«‹Widget await tester.pumpWidget(const MyWidget(title: &#x27;T&#x27;, message: &#x27;M&#x27;)); &#125;);&#125; 3. ä½¿ç”¨FinderæŸ¥æ‰¾widget123456789void main() &#123; testWidgets(&#x27;MyWidget has a title and message&#x27;, (tester) async &#123; await tester.pumpWidget(const MyWidget(title: &#x27;T&#x27;, message: &#x27;M&#x27;)); // Create the Finders. final titleFinder = find.text(&#x27;T&#x27;); final messageFinder = find.text(&#x27;M&#x27;); &#125;);&#125; 4. ä½¿ç”¨MatcheréªŒè¯widgetæ˜¯å¦æ­£å¸¸å·¥ä½œ123456789101112void main() &#123; testWidgets(&#x27;MyWidget has a title and message&#x27;, (tester) async &#123; await tester.pumpWidget(const MyWidget(title: &#x27;T&#x27;, message: &#x27;M&#x27;)); final titleFinder = find.text(&#x27;T&#x27;); final messageFinder = find.text(&#x27;M&#x27;); // Use the `findsOneWidget` matcher provided by flutter_test to verify // that the Text widgets appear exactly once in the widget tree. expect(titleFinder, findsOneWidget); expect(messageFinder, findsOneWidget); &#125;);&#125; å‚è€ƒ https://api.flutter.dev/flutter/flutter_test&#x2F;flutter_test-library.html https://flutter.cn/docs/cookbook/testing/widget/introduction","tags":[{"name":"Flutter å•å…ƒæµ‹è¯•","slug":"Flutter-å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/tags/Flutter-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å•å…ƒæµ‹è¯•","slug":"Flutter/å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/categories/Flutter/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}]},{"title":"æ–‡æœ¬å¤„ç†","date":"2023-12-24T13:26:24.682Z","path":"wiki/Flutter/UI/æ–‡æœ¬å¤„ç†/","text":"TextPainteræ–‡æœ¬çš„æŠ˜å 12345678910111213//è®¡ç®—æœ€åä¸€ä¸ªæ–‡å­—çš„ä½ç½®LayoutBuilder( builder: (context, size) &#123; final span = TextSpan(text: widget.text, style: style); final tp = TextPainter( text: span, maxLines: widget.maxLines, textDirection: TextDirection.ltr);//è®¾ç½®æœ€å¤§è¡Œæ•° tp.layout(maxWidth: size.maxWidth); final pos = tp.getPositionForOffset(Offset(tp.size.width, tp.size.height));//è·å–æ–‡å­—æ‰€å ä½ç½® String txt = widget.text.substring(0, pos.offset);//è·å–å½“å‰èŒƒå›´çš„æ–‡å­— &#125;); å‚è€ƒ Text widget with read more or expand feature - Flutter How to Use a TextPainter to Draw Text In Flutter?","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"}]},{"title":"Mockito","date":"2023-12-24T13:26:24.682Z","path":"wiki/Flutter/å•å…ƒæµ‹è¯•/Mockito/","text":"æè¿°ç”¨äºæ¨¡æ‹Ÿæ•°æ®çš„Flutteræµ‹è¯•åº“ã€‚ä¸ºäº†ä½¿ç”¨æ¨¡æ‹Ÿç±»ï¼Œéœ€è¦åœ¨pubspec.yamlä¸­æ·»åŠ build_runnerä¾èµ–ã€‚ åŸºæœ¬ç”¨æ³•1. pubspec.yamlæ·»åŠ ä¾èµ–12345dev_dependencies: flutter_test: sdk: flutter mockito: build_runner: 2. mockç±»12345678910111213141516171819202122import &#x27;package:mockito/annotations.dart&#x27;;import &#x27;package:mockito/mockito.dart&#x27;;// æ ‡æ³¨åˆ›å»ºcat.mocks.dartæ–‡ä»¶å’ŒMockCatç±»@GenerateNiceMocks([MockSpec&lt;Cat&gt;()])import &#x27;cat.mocks.dart&#x27;;// çœŸå®çš„ç±»class Cat &#123; String sound() =&gt; &quot;Meow&quot;; bool eatFood(String food, &#123;bool? hungry&#125;) =&gt; true; Future&lt;void&gt; chew() async =&gt; print(&quot;Chewing...&quot;); int walk(List&lt;String&gt; places) =&gt; 7; void sleep() &#123;&#125; void hunt(String place, String prey) &#123;&#125; int lives = 9;&#125;void main() &#123; // åˆ›å»ºmockå¯¹è±¡ object.var cat = MockCat();&#125; 3. ç”Ÿæˆæ–‡ä»¶1234flutter pub run build_runner build# ORdart run build_runner build 4. éªŒè¯123456789101112131415161718192021222324252627282930// åœ¨äº¤äº’å‰æ’æ¡©ä¸€ä¸ªmockæ–¹æ³•when(cat.sound()).thenReturn(&quot;Purr&quot;);expect(cat.sound(), &quot;Purr&quot;);// å¯ä»¥å†æ¬¡è°ƒç”¨expect(cat.sound(), &quot;Purr&quot;);// æ”¹å˜ä¸€ä¸‹æ’æ¡©when(cat.sound()).thenReturn(&quot;Meow&quot;);expect(cat.sound(), &quot;Meow&quot;);// You can stub getters.when(cat.lives).thenReturn(9);expect(cat.lives, 9);// æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ when(cat.lives).thenThrow(RangeError(&#x27;Boo&#x27;));expect(() =&gt; cat.lives, throwsRangeError);// We can calculate a response at call time.var responses = [&quot;Purr&quot;, &quot;Meow&quot;];when(cat.sound()).thenAnswer((_) =&gt; responses.removeAt(0));expect(cat.sound(), &quot;Purr&quot;);expect(cat.sound(), &quot;Meow&quot;);// We can stub a method with multiple calls that happened in a particular order.when(cat.sound()).thenReturnInOrder([&quot;Purr&quot;, &quot;Meow&quot;]);expect(cat.sound(), &quot;Purr&quot;);expect(cat.sound(), &quot;Meow&quot;);expect(() =&gt; cat.sound(), throwsA(isA&lt;StateError&gt;())); ä¸»è¦åŠŸèƒ½ å¯é€šè¿‡æ ‡æ³¨æˆ–Fakeçš„æ–¹å¼æ¥ç”Ÿæˆmockç±» å¯é€šè¿‡when().thenReturn()æ¥æ¨¡æ‹Ÿæ–¹æ³•çš„è¿”å›å€¼ thenReturnä¼šè¿”å›Futureæˆ–Streamï¼Œå¯èƒ½æŠ›å‡ºArgumentError thenAnsweråªä¼šè¿”å›Futureæˆ–Stream å¯é€šè¿‡argThat()æ¥æ¨¡æ‹Ÿæ–¹æ³•çš„å‚æ•° reseté‡ç½® å¯é€šè¿‡verify()æ¥éªŒè¯æ–¹æ³•çš„è°ƒç”¨ verifyInOrderå¯æ ¡éªŒé¡ºåº å¯é€šè¿‡verifyNoMoreInteractions()æ¥éªŒè¯æ²¡æœ‰æ›´å¤šçš„è°ƒç”¨ å¯é€šè¿‡reset()æ¥é‡ç½®mock å¯é€šè¿‡verifyZeroInteractions()æ¥éªŒè¯æ²¡æœ‰è°ƒç”¨ å¯é€šè¿‡verifyNever()æ¥éªŒè¯æ²¡æœ‰è°ƒç”¨ å¯é€šè¿‡verifyInOrder()æ¥éªŒè¯é¡ºåº å¯é€šè¿‡verifyStream()æ¥éªŒè¯Stream å¯é€šè¿‡verifyStreamEvent()æ¥éªŒè¯Streamçš„äº‹ä»¶ calledèƒ½æ ¡éªŒè°ƒç”¨æ¬¡æ•° capturedå­˜å‚¨è°ƒç”¨æ—¶çš„å‚æ•° å‚æ•°åŒ¹é…å™¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152// You can use plain arguments themselveswhen(cat.eatFood(&quot;fish&quot;)).thenReturn(true);// ... including collectionswhen(cat.walk([&quot;roof&quot;,&quot;tree&quot;])).thenReturn(2);// ... or matchers//å¦‚æœå‚æ•°ä»¥dryå¼€å¤´ï¼Œè°ƒç”¨eatFoodæ—¶è¿”å›ç»“æœä¸ºfalsewhen(cat.eatFood(argThat(startsWith(&quot;dry&quot;)))).thenReturn(false);when(cat.eatFood(any)).thenReturn(false);// ... or mix arguments with matcherswhen(cat.eatFood(argThat(startsWith(&quot;dry&quot;)), hungry: true)).thenReturn(true);expect(cat.eatFood(&quot;fish&quot;), isTrue);expect(cat.walk([&quot;roof&quot;,&quot;tree&quot;]), equals(2));expect(cat.eatFood(&quot;dry food&quot;), isFalse);expect(cat.eatFood(&quot;dry food&quot;, hungry: true), isTrue);// You can also verify using an argument matcher.verify(cat.eatFood(&quot;fish&quot;));verify(cat.walk([&quot;roof&quot;,&quot;tree&quot;]));//å‚æ•°åŒ…å«foodverify(cat.eatFood(argThat(contains(&quot;food&quot;))));// You can verify setters.cat.lives = 9;verify(cat.lives=9);å¦‚æœä¸€ä¸ªå‚æ•°ä¸æ˜¯ ArgMatcherï¼Œ ï¼ˆå¦‚ anyã€ anyNamedã€ argThatã€ captureThatã€ç­‰) ä¼ é€’ç»™ mock æ–¹æ³•çš„å‚æ•°ï¼Œé‚£ä¹ˆ equals åŒ¹é…å™¨ç”¨äºå‚æ•°åŒ¹é…ã€‚ å¦‚æœéœ€è¦æ›´ä¸¥æ ¼çš„åŒ¹é…ï¼Œè€ƒè™‘ä¸‹ä½¿ç”¨ argThat(identical(arg))ã€‚å°½ç®¡è¿™æ ·ï¼Œæ³¨æ„ null ä¸èƒ½ç”¨ä½œ ArgMatcher å‚æ•°ç›¸é‚»çš„å‚æ•°ï¼Œæˆ–ä¼ é€’ä¸€ä¸ªæœªåŒ…è£…çš„å€¼ä½œä¸ºå‘½åå‚æ•°ã€‚ä¾‹å¦‚ï¼šverify(cat.hunt(&quot;backyard&quot;, null)); // OKï¼šæ²¡æœ‰å‚æ•°åŒ¹é…å™¨verify(cat.hunt(argThat(contains(&quot;yard&quot;)), null)); // BAD: ç›¸é‚»å‚æ•°ä¸º nullverify(cat.hunt(argThat(contains(&quot;yard&quot;)), argThat(isNull))); // OK: ä½¿ç”¨å‚æ•°åŒ¹é…å™¨åŒ…è£…verify(cat.eatFood(&quot;Milk&quot;, hungry: null)); // BAD: ä½¿ç”¨ null ä½œä¸ºå‘½åå‚æ•°verify(cat.eatFood(&quot;Milk&quot;, hungry: argThat(isNull))); // BAD: ä½¿ç”¨ null ä½œä¸ºå‘½åå‚æ•°```### å‘½åå‚æ•°å…³äºæ­¤è¯­æ³•ï¼ŒMockito ç°åœ¨æœ‰ä¸€ä¸ªå°´å°¬çš„éº»çƒ¦ï¼šå‘½åå‚æ•°å’Œå‚æ•°åŒ¹é…å™¨éœ€è¦æ¯”æƒ³è±¡ä¸­æ›´å¤šçš„é…ç½®ï¼šå¿…é¡»åœ¨å‚æ•°åŒ¹é…å™¨ä¸­å£°æ˜å‚æ•°çš„åç§°ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ— æ³•ä¾èµ–å‘½åå‚æ•°çš„ä½ç½®ï¼Œå¹¶ä¸”è¯­è¨€æ²¡æœ‰æä¾›ä¸€ä¸ªæœºåˆ¶æ¥å›ç­” â€è¿™ä¸ªå…ƒç´ æ˜¯åœ¨ç”¨ä½œå‘½åå…ƒç´ â€ å—ï¼Ÿ```dart// GOOD: argument matchers include their names.when(cat.eatFood(any, hungry: anyNamed(&#x27;hungry&#x27;))).thenReturn(true);when(cat.eatFood(any, hungry: argThat(isNotNull, named: &#x27;hungry&#x27;))).thenReturn(false);when(cat.eatFood(any, hungry: captureAnyNamed(&#x27;hungry&#x27;))).thenReturn(false);when(cat.eatFood(any, hungry: captureThat(isNotNull, named: &#x27;hungry&#x27;))).thenReturn(true);// BAD: argument matchers do not include their names.when(cat.eatFood(any, hungry: any)).thenReturn(true);when(cat.eatFood(any, hungry: argThat(isNotNull))).thenReturn(false);when(cat.eatFood(any, hungry: captureAny)).thenReturn(false);when(cat.eatFood(any, hungry: captureThat(isNotNull))).thenReturn(true); æ ¡éªŒéªŒè¯ç²¾ç¡®çš„è°ƒç”¨æ¬¡æ•°&#x2F;è‡³å°‘xæ¬¡&#x2F;æ°¸ä¸123456789101112131415161718192021222324252627282930313233343536cat.sound();cat.sound();// Exact number of invocationsverify(cat.sound()).called(2);// Or using matcherverify(cat.sound()).called(greaterThan(1));// Or never calledverifyNever(cat.eatFood(any));éªŒè¯é¡ºåºcat.eatFood(&quot;Milk&quot;);cat.sound();cat.eatFood(&quot;Fish&quot;);verifyInOrder([ cat.eatFood(&quot;Milk&quot;), cat.sound(), cat.eatFood(&quot;Fish&quot;)]);ä¸ºä¹‹åçš„æ–­è¨€æ•è·å‚æ•°capturedcapturedä¼šå­˜å‚¨è°ƒç”¨å‚æ•°// Simple capturecat.eatFood(&quot;Fish&quot;);expect(verify(cat.eatFood(captureAny)).captured.single, &quot;Fish&quot;);// Capture multiple callscat.eatFood(&quot;Milk&quot;);cat.eatFood(&quot;Fish&quot;);expect(verify(cat.eatFood(captureAny)).captured, [&quot;Milk&quot;, &quot;Fish&quot;]);// Conditional capturecat.eatFood(&quot;Milk&quot;);cat.eatFood(&quot;Fish&quot;);expect(verify(cat.eatFood(captureThat(startsWith(&quot;F&quot;)))).captured, [&quot;Fish&quot;]); Nice mocks vs classic mocksMockitoæœ‰ä¸¤ç§ç”Ÿæˆmocksçš„APIï¼Œä½¿ç”¨æ ‡æ³¨@GenerateNiceMockså’Œ@GenerateMocksã€‚æ¨èä½¿ç”¨@GenerateNiceMocksï¼Œä¸¤è€…ä¸åŒç‚¹ï¼š Nice Mocksï¼šNice Mocksæ˜¯é»˜è®¤çš„æ¨¡æ‹Ÿå¯¹è±¡ç±»å‹ã€‚å®ƒä»¬åœ¨è°ƒç”¨æœªå®šä¹‰çš„æ–¹æ³•æ—¶ä¼šè¿”å›é»˜è®¤å€¼ï¼Œå¦‚0ã€nullæˆ–ç©ºåˆ—è¡¨ã€‚è¿™ä½¿å¾—æµ‹è¯•ä»£ç æ›´å®¹æ˜“ç¼–å†™ï¼Œå› ä¸ºæ‚¨ä¸éœ€è¦ä¸ºæ¯ä¸ªæœªä½¿ç”¨çš„æ–¹æ³•å®šä¹‰è¡Œä¸ºã€‚Nice Mocksé€‚ç”¨äºå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯å½“æ‚¨åªå…³æ³¨è¢«æµ‹è¯•å¯¹è±¡çš„éƒ¨åˆ†è¡Œä¸ºæ—¶ã€‚ Classic Mocksï¼šClassic Mocksæ˜¯ä¸¥æ ¼çš„æ¨¡æ‹Ÿå¯¹è±¡ç±»å‹ã€‚å®ƒä»¬åœ¨è°ƒç”¨æœªå®šä¹‰çš„æ–¹æ³•æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚Classic Mocksé€‚ç”¨äºéœ€è¦ç²¾ç¡®æ§åˆ¶æ¨¡æ‹Ÿå¯¹è±¡è¡Œä¸ºçš„æƒ…å†µï¼Œç‰¹åˆ«æ˜¯å½“æ‚¨å¸Œæœ›ç¡®ä¿è¢«æµ‹è¯•å¯¹è±¡åªè°ƒç”¨æ¨¡æ‹Ÿå¯¹è±¡ä¸Šçš„ç‰¹å®šæ–¹æ³•æ—¶ ä½¿ç”¨Fakeæ¥æ¨¡æ‹Ÿç±»12345678910111213141516171819202122232425262728293031// å‡çš„ç±»class FakeCat extends Fake implements Cat &#123; @override bool eatFood(String food, &#123;bool? hungry&#125;) &#123; print(&#x27;Fake eat $food&#x27;); return true; &#125;&#125;void main() &#123; // åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªæ–°çš„å‡ Catï¼ˆå®ä¾‹ï¼‰ã€‚ var cat = FakeCat(); cat.eatFood(&quot;Milk&quot;); // æ‰“å° &#x27;Fake eat Milk&#x27;ã€‚ cat.sleep(); // æŠ›å‡º&#125;æ¨¡æ‹ŸæŠ½è±¡ç±»@GenerateMocks([Cat, Callbacks])import &#x27;cat_test.mocks.dart&#x27;abstract class Callbacks &#123; Cat findCat(String name);&#125;void main() &#123; var mockCat = MockCat(); var findCatCallback = MockCallbacks().findCat; when(findCatCallback(&#x27;Pete&#x27;)).thenReturn(mockCat);&#125; å‚è€ƒ ä½¿ç”¨Mockitoæ¨¡æ‹Ÿä¾èµ–å…³ç³» https://pub-web.flutter-io.cn/packages/mockito Readmeä¸­æ–‡è¯´æ˜æ–‡æ¡£ Flutterå¦‚ä½•Mock MethodChannelè¿›è¡Œå•å…ƒæµ‹è¯•","tags":[{"name":"Flutter å•å…ƒæµ‹è¯•","slug":"Flutter-å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/tags/Flutter-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å•å…ƒæµ‹è¯•","slug":"Flutter/å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/categories/Flutter/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"}]},{"title":"Flutterå‘½ä»¤è¯¦è§£","date":"2023-12-24T13:26:24.681Z","path":"wiki/Flutter/Flutterå‘½ä»¤è¯¦è§£/","text":"createåœ¨æŒ‡å®šçš„ç›®å½•ä¸­,åˆ›å»ºæ–°çš„flutteré¡¹ç›®,å¦‚æœæ²¡æœ‰æŒ‡å®šç›®å½•,åˆ™åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºé¡¹ç›® 12345flutter create ~/flutter #åœ¨å®¶ç›®å½•ä¸‹çš„flutterç›®å½•é¡¹ç›®flutter create . #åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºflutter create -t module flutter_module # åˆ›å»ºä¸€ä¸ªmodule -væŸ¥çœ‹APPæ‰€æœ‰æ—¥å¿—çš„è¾“å‡º,å¯¹äºè°ƒè¯•æ˜¯éå¸¸æœ‰ç”¨å¤„,åœ¨è°ƒè¯•æ—¶éœ€è¦é…åˆrunå‘½ä»¤ä½¿ç”¨ 1flutter -v run -dåˆ‡æ¢åœ¨ä¸åŒè®¾å¤‡ä¸Šè¿è¡Œapp,å¦‚æœæ²¡æœ‰æŒ‡å®šè®¾å¤‡,é»˜è®¤å°†ä¼šä½¿ç”¨è®¾å¤‡åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªè®¾å¤‡,è¿™å¯¹äºè®¡ç®—æœºè¿æ¥å¤šä¸ªè®¾å¤‡æ—¶éå¸¸æœ‰ç”¨,å¯ä»¥ä½¿ç”¨è®¾å¤‡åç§°æˆ–è€…è®¾å¤‡idä½œä¸ºå‚æ•° 123flutter run -d NX569J #è®¾å¤‡åç§°flutter run -d devices_id #è®¾å¤‡id analyzeç¼–è¾‘Flutterä»£ç æ—¶ï¼Œä½¿ç”¨åˆ†æå™¨æ£€æŸ¥ä»£ç æ˜¯éå¸¸é‡è¦,é»˜è®¤æ˜¯åˆ†ææ•´ä¸ªé¡¹ç›®çš„ä»£ç ,ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨analysis_options.yamlæ–‡ä»¶æ¥æ’é™¤ä¸éœ€è¦çš„ä»£ç åˆ†æ analysis_options.yaml 123analyzer:exclude:- flutter/** æœ‰æ—¶å€™ä½ å¯èƒ½éœ€è¦ä»£ç åˆ†æä¸€ç›´åœ¨è¿è¡Œ,å¯ä»¥ä½¿ç”¨â€“watché€‰é¡¹ flutter analyze â€“watch å½“è¿è¡Œåˆ†æå‘½ä»¤flutteréƒ½æ‰§è¡Œä¸€æ¬¡pub getå‘½ä»¤,å¦‚æœä¸éœ€è¦è¿è¡Œ,å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ flutter analyze â€“no-pub attachç›¸å½“äºå‘½ä»¤flutter runå‘½ä»¤,ä¸åŒä¹‹å¤„åœ¨å¾ˆå¤šæ‰§è¡Œéƒ½æ˜¯è‡ªå·±æ‰‹åŠ¨,æ¯”å¦‚çƒ­é‡è½½, buildæ„å»ºåº”ç”¨ç¨‹åºçš„apk,appbundle,aot,iOS, iOSåº”ç”¨éœ€è¦åœ¨Macä¸Šæ„å»º 1234flutter build apkflutter build apk --debugflutter build appbundle channelåˆ‡æ¢flutterä¸åŒçš„ç‰ˆæœ¬,åœ¨æ‰§è¡Œflutter channelä¼šè¾“å‡ºä¸åŒåˆ†æ”¯ä¿¡æ¯,é»˜è®¤ä½¿ç”¨stableåˆ†æ”¯ã€‚ æœ‰å››ä¸ªåˆ†æ”¯ï¼š master dev beta stable 123flutter channel # è¾“å‡ºchannelflutter channel dev # åˆ‡æ¢åˆ°dev channel cleanåˆ é™¤build/å’Œ.dart_tool/ç›®å½•,æ¸…é™¤ç¼“å­˜ä¿¡æ¯,é¿å…ä¹‹å‰ä¸åŒç‰ˆæœ¬ä»£ç çš„å½±å“ configå¯ä»¥ç”¨äºæŒ‡å®šgradle,android sdk,android studioçš„ç›®å½•æˆ–è€…å¼€å¯,ç¦ç”¨analyticsé€‰é¡¹,analyticsé€‰é¡¹ç”¨äºflutterå·¥å…·çš„æŠ¥å‘Š 1flutter config --gradle-dir /gradle/ devicesåˆ—å‡ºå·²ç»è¿æ¥åˆ°è®¡ç®—æœºçš„è®¾å¤‡ 123flutter devicesNX569J â€¢ 192.168.43.1:5555 â€¢ android-arm64 â€¢ Android 7.1.2 (API 25)Android SDK built for x86 â€¢ emulator-5554 â€¢ android-x86 â€¢ Android 9 (API 28) (emulator) doctoræ£€æŸ¥å¼€å‘å·¥å…·é“¾æ˜¯å¦å®Œæ•´å®‰è£…,å¯¹äºå®‰è£…ç¯å¢ƒéå¸¸æœ‰ç”¨å¤„ 12345678910flutter doctorDoctor summary (to see all details, run flutter doctor -v):[âœ“] Flutter (Channel stable, v1.2.1, on Linux, locale en_US.UTF-8)[âœ“] Android toolchain - develop for Android devices (Android SDK version 28.0.3)[âœ“] Android Studio (version 3.3)[âœ“] VS Code (version 1.33.1)[âœ“] Connected device (2 available)â€¢ No issues found! driveæ‰§è¡Œflutter uiæµ‹è¯•,è¯¥å·¥å…·ç±»ä¼¼ä¸webç«¯çš„Selenium,WebDriver,Protractor.ä½ å¯ä»¥æŒ‡å®šä¸åŒæ¨¡å¼è¿›è¡Œæµ‹è¯•,å¯ä»¥æ˜¯debug,profile,release,flavoræ¨¡å¼,flavoræ¨¡å¼å¯ä»¥æŒ‡å®šå¹³å°è§„èŒƒ,ä½ è¿˜å¯ä»¥æŒ‡å®šåœ¨ä¸åŒçš„å¹³å°æµ‹è¯•,ç”šè‡³å¯ä»¥æŒ‡å®šé¡µé¢è·¯ç”± 1flutter drive --debug --target-platform android-x86 emulatorsåˆ—å‡º,åˆ›å»º,å¯åŠ¨æ¨¡æ‹Ÿå™¨,é»˜è®¤æ˜¯åˆ—å‡ºæ¨¡æ‹Ÿå™¨ 1234flutter emulators --launch flutter_emulator #å¯åŠ¨flutter emulators # åˆ—å‡ºflutter emulators --create Pixel_API_28 # åˆ›å»º formatæŒ‰ç…§dartä»£ç è§„èŒƒæ ¼å¼é¡¹ç›®ä»£ç æ–‡ä»¶,flutter format .æ˜¯å½“å‰é¡¹ç›®æ‰€æœ‰æ–‡ä»¶,ä¹Ÿå¯ä»¥æŒ‡å®šç›®å½•æˆ–è€…æ–‡ä»¶ 1flutter format dartfile runå‚è€ƒï¼šæºç è§£è¯»Flutter runæœºåˆ¶ flutter build apkï¼šé€šè¿‡gradleæ¥æ„å»ºAPKï¼Œç”±ä»¥ä¸‹ä¸¤éƒ¨åˆ†ç»„æˆï¼š flutter build aotï¼Œåˆ†ä¸ºå¦‚ä¸‹ä¸¤ä¸ªæ ¸å¿ƒè¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹è¯¦æƒ…è§ä¸‹ä¸€ç¯‡æ–‡ç«  frontend_serverå‰ç«¯ç¼–è¯‘å™¨ç”Ÿæˆkernelæ–‡ä»¶ gen_snapshotæ¥ç¼–è¯‘æˆAOTäº§ç‰© - flutter build bundleï¼Œå°†ç›¸å…³æ–‡ä»¶æ”¾å…¥flutter_assetsç›®å½• é€šè¿‡adb installæ¥å®‰è£…APK é€šè¿‡adb am startæ¥å¯åŠ¨åº”ç”¨ 123456# profileæ–¹å¼è¿è¡Œï¼Œå¯¹äºProfileæ¨¡å¼ï¼Œå¯åŠ¨Observatoryè°ƒè¯•å™¨ï¼Œå¯é€šè¿‡127.0.0.1:xxxåœ°å€ï¼Œæ‰“å¼€ç½‘é¡µç‰ˆæ€§èƒ½åˆ†æå·¥å…·Observatoryï¼Œå…¶ä¸­åŒ…å«æœ‰timelineå·¥å…·ï¼Œç±»ä¼¼äºAndroidçš„systraceã€‚flutter run --profile --disable-service-auth-codes --local-engine-src-path=&lt;FLUTTER_ROOT&gt;/engine/src --local-engine android_profile# å…³é—­é‰´æƒflutter run --disable-service-auth-codes å‚æ•° è¯´æ˜ â€“debug è°ƒè¯•ç‰ˆæœ¬ï¼Œè¿™æ˜¯é»˜è®¤æ¨¡å¼ â€“profile profileç‰ˆæœ¬ â€“release å‘å¸ƒç‰ˆæœ¬ â€“target-platform æŒ‡å®šappè¿è¡Œçš„ç›®æ ‡å¹³å°ï¼Œæ¯”å¦‚android-arm&#x2F;android-arm64ï¼ŒiOSå¹³å°ä¸å¯ç”¨ â€“target&#x3D; ä¸»å…¥å£ï¼Œé»˜è®¤å€¼lib&#x2F;main.dart â€“observatory-port æŒ‡å®šobservatoryç«¯å£ï¼Œé»˜è®¤ä¸º0ï¼ˆéšæœºç”Ÿæˆå¯ç”¨ç«¯å£ï¼‰ â€“disable-service-auth-codes å…³é—­observatoryæœåŠ¡é‰´æƒ â€“trace-startup è·Ÿè¸ªåº”ç”¨å¯åŠ¨&#x2F;é€€å‡ºï¼Œå¹¶ä¿å­˜traceåˆ°æ–‡ä»¶ â€“trace-skia è·Ÿè¸ªskiaï¼Œç”¨äºè°ƒè¯•GPUçº¿ç¨‹ â€“trace-systrace è½¬ä¸ºsystraceï¼Œé€‚ç”¨äºAndroid&#x2F;Fuchsia â€“dump-skp-on-shader-compilation è½¬å‚¨è§¦å‘ç€è‰²å™¨ç¼–è¯‘çš„skpï¼Œé»˜è®¤å…³é—­ â€“verbose-system-logs åŒ…æ‹¬æ¥è‡ªflutterå¼•æ“çš„è¯¦ç»†æ—¥å¿—è®°å½• â€“enable-software-rendering å¼€å¯è½¯ä»¶æ¸²æŸ“ï¼Œé»˜è®¤é‡‡ç”¨OpenGLæˆ–è€…Vulkan â€“skia-deterministic-rendering ç¡®å®šæ€§é‡‡ç”¨skiaæ¸²æŸ“ â€“no-hot å¯å…³é—­çƒ­é‡è½½ï¼Œé»˜è®¤æ˜¯å¼€å¯ â€“start-paused åº”ç”¨å¯åŠ¨åæš‚åœ â€“local-engine-src-path æŒ‡å®šæœ¬åœ°å¼•æ“æºç è·¯å¾„ï¼Œæ¯”å¦‚xxx&#x2F;engine&#x2F;src â€“local-engine æŒ‡å®šæœ¬åœ°å¼•æ“ç±»å‹ï¼Œæ¯”å¦‚android_profile verionåˆ—å‡ºæˆ–è€…åˆ‡æ¢flutterç‰ˆæœ¬,é»˜è®¤æ˜¯åˆ—å‡ºæ‰€æœ‰ç‰ˆæœ¬ 12flutter versionflutter version v1.5.8 upgradeæ›´æ–°flutterä»£ç ,å®è´¨å°±æ˜¯gitä»£ç æ›´æ–°æ‹‰å–,ä¸‹è½½flutter sdkæ˜¯gitä»“åº“çš„æ‰“åŒ… testè¿è¡Œflutterå•å…ƒæµ‹è¯•,å¯ä»¥ä½¿ç”¨--start-pausedæ¨¡å¼ç­‰å¾…è°ƒè¯•å™¨çš„è¿æ¥,--concurrencyå¯ä»¥æŒ‡å®šå¹¶å‘ä»»åŠ¡æ•°é»˜è®¤å€¼æ˜¯6 1flutter test --concurrency=8 installå®‰è£…appåˆ°ä¸€ä¸ªå·²ç»è¿æ¥çš„è®¾å¤‡ 1flutter install screenshotæˆªå–å½“å‰å±å¹•,é»˜è®¤æ˜¯å°†å›¾ç‰‡è¾“å‡ºåˆ°å®¶ç›®å½•ä¸‹,ä½¿ç”¨-oæŒ‡å®šè¾“å‡ºç›®å½• 1flutter screenshot -o /home/work packagesè·å–,æµ‹è¯•,æ›´æ–°ä¾èµ–åŒ…,flutter pub å°†ä¼šä¼ é€’å‰©ä½™å‚æ•°åˆ°dartå·¥å…·çš„pub pub12345678910111213141516flutter pub get #è·å–ä¾èµ–flutter pub deps #ç”¨äºæ˜¾ç¤ºå½“å‰Packageä½¿ç”¨çš„æ‰€æœ‰ä¾èµ–é¡¹flutter pub cache add/clear/repair #ç®¡ç†æœ¬åœ°Packageç¼“å­˜flutter pub upgrade #æ£€ç´¢å½“å‰Packageæ‰€ä¾èµ–çš„å…¶ä»–Packageçš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¦‚æœpubspec.lockå­˜åœ¨ï¼Œåˆ™å¿½ç•¥å…¶ä¿å­˜çš„ç‰ˆæœ¬å¹¶ä»¥pubspecæ–‡ä»¶ä¸­æŒ‡å®šçš„æœ€æ–°ç‰ˆæœ¬ä¸ºä¸»ã€‚pub run å‘½ä»¤å¯ä»¥è°ƒç”¨å½“å‰ Package æˆ–å½“å‰ Package æ‰€ä¾èµ–çš„å…¶å®ƒ Package ä¸­çš„ Dart è„šæœ¬ã€‚pub global å‘½ä»¤å¯ä»¥è®©ä½ ä½¿ç”¨é‚£äº›å¯ä»¥å…¨å±€å¯ç”¨çš„ Packageã€‚pub publish #å‘å¸ƒ ä¿®æ”¹æºç è°ƒè¯• &#x2F;path&#x2F;to&#x2F;flutter&#x2F;bin&#x2F;cache&#x2F;flutter_tools.stamp å½“ä½ ä¿®æ”¹äº†flutter toolsçš„æºç ï¼Œåˆ é™¤ä¸Šé¢è¿™ä¸ªæ–‡ä»¶ï¼Œä»£ç å³å¯ç”Ÿæ•ˆ å‚è€ƒ Flutter Tools æ–­ç‚¹è°ƒè¯•","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"åŒ—äº¬æ¸¸ç©æ”»ç•¥ï¼šæ¸…ååŒ—å¤§","date":"2023-12-24T13:26:04.320Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/æ¸…ååŒ—å¤§/","text":"å†å²èƒŒæ™¯æ™¯ç‚¹ä»‹ç»åšé›…å¡”æœªåæ¹–å›¾ä¹¦é¦†è·¯çº¿æ¸¸å®¢åªèƒ½ä»ä¸œä¾§é—¨è¿›å…¥ï¼ˆåœ°é“ç«™åŒ—äº¬å¤§å­¦Aå£å‘åŒ—ï¼‰ï¼Œè¦æ±‚19:00å‰ç”±ä¸œä¾§é—¨ç¦»å¼€ã€‚ å°±é¤å®¶å›­å››å±‚ã€å†œå›­ä¸‰å±‚ã€è‰ºå›­äºŒå±‚ã€å‹ºå›­è¥¿é¤å… é—¨ç¥¨é¢„çº¦åŒ—å¤§å…¬ä¼—å·é¢„çº¦ï¼Œæ¯å¤©æ—©ä¸Š8ç‚¹å¼€æ”¾ï¼Œæå‰ä¸€å‘¨é¢„çº¦ã€‚","tags":[{"name":"æ—…æ¸¸ æ¸…ååŒ—å¤§","slug":"æ—…æ¸¸-æ¸…ååŒ—å¤§","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E6%B8%85%E5%8D%8E%E5%8C%97%E5%A4%A7/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"åŒ—äº¬æ¸¸ç©æ”»ç•¥ï¼šé•¿åŸ","date":"2023-12-24T13:26:04.320Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/é•¿åŸ/","text":"æ™¯ç‚¹ä»‹ç»å…«è¾¾å²­é•¿åŸ ä»‹ç»ï¼šæ˜¯æ˜é•·åŸçš„ä¸€å€‹éš˜å£ï¼Œå²”é“åŸã€å¤ç‚®ã€å…³åŸã€æ•Œæ¥¼ã€çƒ½ç«å°ã€æˆ˜å° ç‡Ÿæ¥­æ™‚é–“ï¼š 07:30-16:00ç‡Ÿæ¥­ åœ°å€ï¼šåŒ—äº¬å¸‚å»¶æ…¶å€G6äº¬è—é«˜é€Ÿ58è™Ÿå‡ºå£ tipsï¼šå¦‚æœæƒ³ä¸€å¤©å†…æ¸¸é•¿åŸå’Œåä¸‰é™µï¼Œå»ºè®®æŠ¥å›¢ä¸€æ—¥æ¸¸ï¼Œä¸¤åœ°ç›¸è·ç”šè¿œ æ¸…æ²³ç«™åé«˜é“ç›´è¾¾å…«è¾¾å²­é•¿åŸï¼ˆ20åˆ†é’Ÿï¼‰ æ…•ç”°å³ªé•¿åŸï¼ˆæ¨èï¼‰ ä»‹ç» å¸é©¬å°é•¿åŸ ä»‹ç»ï¼šä½äºåŒ—äº¬å¸‚çš„è¿œéƒŠï¼Œæ¥è¿‘å¤åŒ—æ°´é•‡ï¼Œæ˜¯é•¿åŸä¸­ä¿å­˜å¾—æœ€ä¸ºå®Œå¥½çš„ä¸€æ®µï¼Œä¹Ÿæ˜¯æœ€ä¸ºå±é™©çš„ä¸€æ®µé•¿åŸ å±…åº¸å…³é•¿åŸ ä»‹ç»ï¼šä½äºåŒ—äº¬å¸‚æ˜Œå¹³åŒºçš„ä¸€æ®µé•¿åŸï¼Œä¹Ÿæ˜¯å†å²ä¸Šé‡è¦çš„å†›äº‹å…³å£ã€‚å…¶å¾—åäºå…¶åœ°ç†ä½ç½®ï¼Œâ€œå±…â€å’Œâ€œåº¸â€åœ¨å¤æ±‰è¯­ä¸­åˆ†åˆ«ä»£è¡¨â€œä¸­é—´â€å’Œâ€œé™©è¦â€ï¼Œå› æ­¤ï¼Œâ€œå±…åº¸å…³â€æ„ä¸ºâ€œå¤„åœ¨é™©è¦ä¸­é—´çš„å…³å£â€ é‡‘å±±å²­é•¿åŸ ä»‹ç»ï¼šé‡‘å±±å²­é•¿åŸä½äºæ²³åŒ—çœæ‰¿å¾·å¸‚ï¼Œæ˜¯é•¿åŸçš„ç²¾åæ®µè½ä¹‹ä¸€ã€‚å®ƒä»¥é›„ä¼Ÿå£®è§‚çš„é•¿åŸå’Œç¾ä¸½çš„è‡ªç„¶é£å…‰è€Œé—»åã€‚é‡‘å±±å²­é•¿åŸèœ¿èœ’äºå±±å²­ä¹‹é—´ï¼ŒåŸå¢™ã€æ•Œæ¥¼ã€é©¬é¢å’Œçƒ½ç«å°ç­‰é•¿åŸå…ƒç´ ä¿å­˜å®Œå¥½ã€‚é‡‘å±±å²­é•¿åŸæ˜¯é•¿åŸæ‘„å½±çš„çƒ­é—¨åœ°ç‚¹ï¼Œä¹Ÿæ˜¯å¾’æ­¥è€…çš„å¤©å ‚ è·¯çº¿é—¨ç¥¨é¢„çº¦","tags":[{"name":"æ—…æ¸¸ é•¿åŸ","slug":"æ—…æ¸¸-é•¿åŸ","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E9%95%BF%E5%9F%8E/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"åŒ—äº¬æ¸¸ç©æ”»ç•¥ï¼šé¢å’Œå›­","date":"2023-12-24T13:26:04.320Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/é¢å’Œå›­/","text":"å†å²èƒŒæ™¯è·¯çº¿ è¥¿éƒŠå®¾é¦†ååœ°é“åˆ°åŒ—å®«é—¨ç«™ åŒ—å®«é—¨èµ°å‡ ç™¾ç±³åˆ°åŒ—å¦‚æ„é—¨ å®¿äº‘æªåŸå…³ çŸ³èˆ«ã€æ¸…æ™èˆ«ç”»ä¸­æ¸¸é•¿å»Šæ’äº‘é—¨ä¹˜èˆ¹å»å—æ¹–å²›åä¸ƒå­”æ¡¥å…«æ–¹äº­é“œç‰›æ–‡æ˜Œé˜ç‰æ¾œå ‚ä¹å¯¿å ‚ä»å¯¿æ®¿ä¸œå®«é—¨è¥¿è‹‘ç«™","tags":[{"name":"æ—…æ¸¸ é¢å’Œå›­","slug":"æ—…æ¸¸-é¢å’Œå›­","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E9%A2%90%E5%92%8C%E5%9B%AD/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"åŒ—äº¬æ¸¸ç©æ”»ç•¥ï¼šæ­ç‹åºœ","date":"2023-12-24T13:26:04.312Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/æ­ç‹åºœ/","text":"æ­ç‹åºœ ä»‹ç»ï¼šå’Œç…ä½å¤„ï¼Œæ­äº²ç‹ä½å¤„ï¼Œé“¶å®‰æ®¿ã€å˜‰ä¹å ‚ã€é”¡æ™‹æ–‹ã€ç‹åºœèŠ±å›­ã€‚æˆæ¥¼å†…å¯æ¬£èµåŒ—äº¬ä¼ ç»ŸèŠ‚ç›®æ¼”å‡ºã€å–èŒ¶ã€å“å°åƒ åœ°å€ï¼šåŒ—äº¬å¸‚è¥¿åŸå€å‰æµ·è¥¿è¡—17è™Ÿ è·¯çº¿ï¼š tipsï¼šç¦å…éœ€è¦é¢„çº¦ æ¸¸ç©è·¯çº¿","tags":[{"name":"æ—…æ¸¸ æ­ç‹åºœ","slug":"æ—…æ¸¸-æ­ç‹åºœ","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E6%81%AD%E7%8E%8B%E5%BA%9C/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"åŒ—äº¬æ¸¸ç©æ”»ç•¥ï¼šæ•…å®«","date":"2023-12-24T13:26:04.312Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/æ•…å®«/","text":"å†å²èƒŒæ™¯æ•…å®«æ˜¯ä¸­å›½æ˜æ¸…ä¸¤æœäºŒåå››ä½çš‡å¸çš„çš‡å®«ã€‚æ•…å®«å§‹å»ºäºæ˜æˆç¥–æ°¸ä¹å››å¹´ï¼ˆ1406å¹´ï¼‰ï¼Œæ°¸ä¹åå…«å¹´ï¼ˆ1420å¹´ï¼‰è½æˆã€‚ æ•…å®«å—åŒ—é•¿961ç±³ï¼Œä¸œè¥¿å®½753ç±³ï¼Œå››é¢å›´æœ‰é«˜10ç±³çš„åŸå¢™ï¼Œå¤–æœ‰59ç±³å®½çš„æŠ¤åŸæ²³ç¯ç»•ã€‚æœ‰å››åº§åŸé—¨ï¼Œå—é¢ä¸ºåˆé—¨ï¼ŒåŒ—é¢ä¸ºç¥æ­¦é—¨ï¼Œä¸œé¢ä¸ºä¸œåé—¨ï¼Œè¥¿é¢ä¸ºè¥¿åé—¨ã€‚åŸå¢™çš„å››è§’ï¼Œå„æœ‰ä¸€åº§é£å§¿ç»°çº¦çš„è§’æ¥¼ï¼Œæ°‘é—´æœ‰ä¹æ¢åå…«æŸ±ä¸ƒåäºŒæ¡è„Šä¹‹è¯´ï¼Œæ¥å½¢å®¹å…¶ç»“æ„çš„å¤æ‚ã€‚åŸå†…çš„å»ºç­‘åˆ†ä¸ºå¤–æœå’Œå†…å»·ä¸¤éƒ¨åˆ†ã€‚å¤–æœçš„ä¸­å¿ƒä¸ºå¤ªå’Œæ®¿ã€ä¸­å’Œæ®¿ã€ä¿å’Œæ®¿ï¼Œç»Ÿç§°ä¸‰å¤§æ®¿ï¼Œæ˜¯å›½å®¶ä¸¾è¡Œå¤§å…¸ç¤¼çš„åœ°æ–¹ã€‚ä¸‰å¤§æ®¿å·¦å³ä¸¤ç¿¼è¾…ä»¥æ–‡åæ®¿ã€æ­¦è‹±æ®¿ä¸¤ç»„å»ºç­‘ã€‚å†…å»·çš„ä¸­å¿ƒæ˜¯ä¹¾æ¸…å®«ã€äº¤æ³°æ®¿ã€å¤å®å®«ï¼Œç»Ÿç§°åä¸‰å®«ï¼Œæ˜¯çš‡å¸å’Œçš‡åå±…ä½çš„æ­£å®«ã€‚å…¶åä¸ºå¾¡èŠ±å›­ã€‚åä¸‰å®«ä¸¤ä¾§æ’åˆ—ç€ä¸œã€è¥¿å…­å®«ï¼Œæ˜¯åå¦ƒä»¬å±…ä½ä¼‘æ¯çš„åœ°æ–¹ã€‚ä¸œå…­å®«ä¸œä¾§æ˜¯å¤©ç©¹å®æ®¿ç­‰ä½›å ‚å»ºç­‘ï¼Œè¥¿å…­å®«è¥¿ä¾§æ˜¯ä¸­æ­£æ®¿ç­‰ä½›å ‚å»ºç­‘ã€‚å¤–æœã€å†…å»·ä¹‹å¤–è¿˜æœ‰å¤–ä¸œè·¯ã€å¤–è¥¿è·¯ä¸¤éƒ¨åˆ†å»ºç­‘ã€‚ ä¸»è¦å»ºç­‘æ•…å®«åœ¨è¾›äº¥é©å‘½ä¹‹å‰ç§°ä¸ºâ€œç´«ç¦åŸâ€ã€‚å®ƒçš„åå­—æ¥è‡ªâ€œç´«å¾®æ˜Ÿå£â€ï¼Œä¸­å›½å¤ä»£æ˜Ÿåƒå­¦å®¶æŠŠå¤©ä¸Šçš„æ˜Ÿæ˜Ÿåˆ†ä¸ºä¸‰å£ï¼Œå››è±¡ï¼ŒäºŒåå…«æ˜Ÿå®¿ç­‰ã€‚å…¶ä¸­ä¸‰å£æŒ‡ç´«å¾®æ˜Ÿå£ï¼Œå¤ªå¾®æ˜Ÿå£å’Œå¤©å¸‚æ˜Ÿå£ã€‚ç´«å¾®æ˜Ÿå£å±…äºæ­£ä¸­ï¼Œæ®ä¼ çš‡å¤©ä¸Šå¸çš„å±…æ‰€ï¼ˆç´«å®«ï¼‰å°±åœ¨ç´«å¾®æ˜Ÿå£ä¸­ï¼Œäººé—´çš‡å¸è‡ªç§°â€œå¤©å­â€ä¾¿ä»¿çš‡å¤©ä¸Šå¸å±…æ‰€çš„åå­—ç”¨å…¶â€œç´«â€å­—ä¸ºç´«ç¦åŸã€‚æ•…å®«æ˜¯ä»¥é»„ç“¦ã€çº¢å¢™ã€é‡‘é¥°ã€ç™½çŸ³æ„æˆçš„å»ºç­‘ç¾¤ã€‚å…¶ä¸­é»„è‰²ç‰ç’ƒç“¦æ˜¯å¤©å­çš„è±¡å¾ã€‚ åŸæ± æ•…å®«æœ‰4åº§ä¸»è¦çš„åŸé—¨ï¼Œåˆ†åˆ«æ˜¯å—é¢åˆé—¨ã€åŒ—é¢ç¥æ­¦é—¨ã€ä¸œé¢ä¸œåé—¨ã€å’Œè¥¿é¢è¥¿åé—¨ã€‚ åˆé—¨å»ºäºæ˜æ°¸ä¹åå…«å¹´ï¼ˆ1420å¹´ï¼‰ï¼Œæ¸…é¡ºæ²»å¹´é—´é‡å»ºã€‚æ¥¼é˜å·å³¨ï¼Œååˆ†å£®è§‚ï¼Œæ˜¯æ•…å®«å»ºç­‘ç¾¤çš„ç¬¬ä¸€é«˜æ¥¼ã€‚å¹³é¢å‘ˆå€’â€œå‡¹â€å­—å‹ï¼Œåˆ†ä¸Šä¸‹ä¸¤éƒ¨åˆ†ã€‚ä¸Šéƒ¨æ­£ä¸­ä¸ºé—¨æ¥¼ä¸€åº§ï¼Œé¢é˜”9é—´ï¼Œè¿›æ·±5é—´ï¼Œé‡æªåº‘æ®¿é¡¶ã€‚ä¸¤ä¾§æœ‰é‡æªæ”’å°–é¡¶çš„æ–¹äº­ã€‚ä¸‹éƒ¨ä¸ºæ•¦å°ï¼Œæ­£ä¸­å¼€ä¸‰é—¨ï¼Œä¸¤ä¾§å„æœ‰ä¸€æ–é—¨ã€‚ä¸­é—¨ä¸ºçš‡å¸å‡ºå…¥ä¸“ç”¨ï¼Œä½†åœ¨æ¸…ä»£ï¼Œæ–°ç§‘çŠ¶å…ƒã€æ¦œçœ¼ã€æ¢èŠ±åœ¨å‘æ¦œä¹‹æ—¥å¯ä»¥ä»è¯¥é—¨è¿›å‡ºä¸€æ¬¡ã€‚æ­¤å¤–ï¼Œçš‡å¸ç»“å©šæ—¶ï¼Œçš‡åå¯ä»¥ä¹˜è½¿ä»ä¸­é—¨è¿›å…¥ï¼Œå…¶ä»–æ–‡æ­¦å®˜å‘˜ä»å·¦é—¨è¿›å‡ºï¼Œå®—å®¤ç‹å…¬ä»å³é—¨è¿›å‡ºã€‚æ¸…ä»£æ—¶ï¼Œåˆé—¨è¿˜æ˜¯çš‡å¸æ¯å¹´å†¬è‡³é¢å‘ä¸‹ä¸€å¹´å†ä¹¦ä¹‹å¤„ã€‚é‡æœ‰æˆ˜äº‰è·èƒœï¼Œä¹Ÿåœ¨æ­¤å¤„ä¸¾è¡Œå‡¯æ—‹ã€â€œçŒ®ä¿˜â€çš„ä»ªå¼ã€‚åˆé—¨å‰ä¸¤ä¾§æœ‰é˜™å·¦é—¨ã€é˜™å³é—¨ã€‚ ç¥æ­¦é—¨å»ºäºæ˜æ°¸ä¹åå…«å¹´ï¼ˆ1420å¹´ï¼‰ï¼ŒåŸåâ€œç„æ­¦é—¨â€ã€‚æ¸…åº·ç†™å¸ï¼ˆç„çƒ¨ï¼‰å³ä½ä¸ºé¿è®³æ‰€ä»¥å°†å…¶æ˜“åâ€œç¥æ­¦é—¨â€ã€‚åŸæ¥é—¨æ¥¼ä¸Šè®¾æœ‰é’Ÿé¼“ï¼Œæ¯æ—¥èµ·æ›´ã€é»„æ˜æ—¶é¸£é’Ÿ108å“ã€‚æ¸…ä»£ï¼Œè¯¥é—¨æ˜¯å¸åå·¡å¹¸å’Œå»äº¬è¥¿å„å›­æ—¶è¿›å‡ºçš„å¤§é—¨ã€‚å½“é€‰ç§€å¥³æ—¶ï¼Œæ­¤é—¨ä¹Ÿæ˜¯è¢«é€‰å¥³å­å‡ºå…¥ç´«ç¦åŸçš„é€šé“ã€‚ ä¸œåé—¨å’Œè¥¿åé—¨åˆ†åˆ«æ˜¯æ•…å®«çš„ä¸œè¥¿ä¸¤é“ä¾§é—¨ã€‚ å¤–æœå¤–æœä¸­è·¯-å¤ªå’Œé—¨å¹¿åœºæ˜¯ç´«ç¦åŸå†…æœ€å¤§çš„å®«é—¨ï¼Œä¹Ÿæ˜¯ç´«ç¦åŸå¤–æœå®«æ®¿çš„æ­£é—¨ã€‚æ˜¯è‡ªå¤©å®‰é—¨å—ä¾§å‘åŒ—è¿›ç´«ç¦åŸæ—¶ç»è¿‡çš„ç¬¬å››é“é—¨ï¼ˆå‰ä¸‰é“ä¾æ¬¡ä¸ºå¤©å®‰é—¨ã€ç«¯é—¨ã€åˆé—¨ï¼‰ã€‚å¤ªå’Œé—¨é¢é˜”ä¹é—´ï¼Œè¿›æ·±ä¸‰é—´ã€‚æ˜åˆç§°â€œå¥‰å¤©é—¨â€ï¼Œåç§°â€œçš‡æé—¨â€ï¼Œæ¸…æœæ—¶ç§°â€œå¤ªå’Œé—¨â€ï¼Œå…¨é«˜äºŒåä¸‰ç‚¹å…«ç±³ã€‚ç°å­˜çš„å¤ªå’Œé—¨æ˜¯å…‰ç»ªå¹´é—´é‡å»ºçš„ã€‚æ˜æœè§„å®šï¼Œæ–‡æ­¦å®˜å‘˜æ¯å¤©æ‹‚æ™“åœ¨å¥‰å¤©é—¨æ—©æœï¼Œçš‡å¸ä¹Ÿäº²è‡ªåˆ°æ­¤å¤„æ¥å—æœæ‹œå’Œå¤„ç†æ”¿åŠ¡ï¼Œç§°ä¸ºâ€œå¾¡é—¨å¬æ”¿â€ã€‚æ¸…åˆï¼Œçš‡å¸æ›¾åœ¨å¤ªå’Œé—¨å—æœã€èµå®´ç­‰ï¼Œä½†å¾¡é—¨å¬æ”¿æ”¹åœ¨ä¹¾æ¸…é—¨ä¸¾è¡Œã€‚ å¤–æœä¸­è·¯-å‰ä¸‰æ®¿å¤ªå’Œæ®¿ã€ä¸­å’Œæ®¿ã€ä¿å’Œæ®¿åˆç§°â€œä¸‰å¤§æ®¿â€ã€‚è¿™ä¸‰å¤§æ®¿è¿åŒä¸ä¸œä¾§æ–‡åæ®¿ã€è¥¿ä¾§æ­¦è‹±æ®¿åˆç§°ä¸ºâ€œå¤–æœâ€ã€‚ å¤ªå’Œæ®¿ï¼šä¿—ç§°â€œé‡‘éŠ®æ®¿â€ï¼Œæ˜åˆç§°â€œå¥‰å¤©æ®¿â€ï¼Œåç§°â€œçš‡ææ®¿â€ï¼Œæ¸…æœæ—¶ç§°â€œå¤ªå’Œæ®¿â€ã€‚è¢ä¸–å‡¯ç™»åŸºæ—¶ä¸€åº¦æ”¹åä¸ºâ€œæ‰¿è¿æ®¿â€ã€‚â€œå¤ªå’Œâ€äºŒå­—å–è‡ªã€Šæ˜“ç»ã€‹ä¹¾å¦â€œä¹¾é“å˜åŒ–ï¼Œå„æ­£æ€§å‘½ï¼Œä¿åˆå¤ªå’Œï¼Œä¹ƒåˆ©è´â€ä¸€å¥ï¼Œæ˜¯è¯´å®‡å®™é—´ä¸€åˆ‡å…³ç³»éƒ½å¾—åˆ°åè°ƒçš„æ„æ€ã€‚å»ºåœ¨æœ‰æ±‰ç™½ç‰å›´æ çš„ä¸‰å±‚é«˜å¤§éœ²å°ä¸Šï¼Œä¸ºâ€œå‰ä¸‰æ®¿â€ä¹‹ç¬¬ä¸€æ®¿ï¼Œæ®¿é«˜ä¸‰åäº”ç±³ï¼Œé¢ç§¯2381å¹³æ–¹ç±³ï¼Œæ˜¯ä¸­å›½æœ€å¤§çš„ä¸€åº§æœ¨ç»“æ„å®«æ®¿ã€‚é¢é˜”åä¸€é—´ï¼Œè¿›æ·±äº”é—´ï¼Œä¸ºä¸­å›½å¤ä»£æ®¿å®‡æœ€é«˜ç­‰çº§çš„é‡æªåº‘æ®¿é¡¶ã€‚æªè§’æœ‰åä¸ªèµ°å…½ï¼Œä¸ºä¸­å›½å¤å»ºç­‘ä¹‹ç‰¹ä¾‹ã€‚å¤ªå’Œæ®¿æ˜¯ä¸¾è¡Œæ–°çš‡å¸ç™»åŸºã€é¢å¸ƒé‡è¦è¯ä¹¦ã€â€œé‡‘æ®¿ä¼ èƒªâ€ï¼ˆå…¬å¸ƒæ–°è¿›å£«åå•ï¼‰ã€æ´¾å¤§å°†å‡ºå¾ä»¥åŠæ¯å¹´å…ƒæ—¦èŠ‚ã€å†¬è‡³èŠ‚ã€çš‡å¸ç”Ÿæ—¥ï¼Œå†Œå°çš‡åï¼Œä¸ºå¤ªçš‡æˆ–å¤ªååŠ å¾½å·ç­‰ç­‰é‡å¤§ä»ªå¼çš„åœ°æ–¹ã€‚ ä¸­å’Œæ®¿ï¼šåœ¨æ˜åˆæ—¶ç§°ä¸ºâ€œåç›–æ®¿â€ï¼Œåæ¥ç§°ä¸ºâ€œä¸­ææ®¿â€ï¼Œè‡³æ¸…ä»£æ—¶ç§°ä¸ºâ€œä¸­å’Œæ®¿â€ã€‚è¢ä¸–å‡¯ç™»åŸºæ—¶ä¸€åº¦æ”¹åä¸ºâ€œä½“å…ƒæ®¿â€ã€‚â€œä¸­å’Œâ€äºŒå­—æ˜¯è¯´å‡¡äº‹è¦åšåˆ°ä¸åä¸å€šï¼Œæ‰èƒ½ä½¿å„æ–¹é¢å…³ç³»å¤„ç†å¾—åå’Œè°ƒé¡ºï¼Œç¬¦åˆä¸­åº¸ä¹‹é“ã€‚é¢é˜”ã€è¿›æ·±å„3é—´ã€‚å››è§’æ”’å°–é¡¶ã€‚å†…è®¾å®åº§ï¼Œçš‡å¸å‚åŠ å¤§å…¸å‰å…ˆåœ¨æ­¤ä¼‘æ¯ï¼Œæˆ–ç”±è¿‘è‡£æ¼”ä¹ ç¤¼ä»ªã€‚ ä¿å’Œæ®¿ï¼šåœ¨æ˜åˆæ—¶ç§°ä¸ºâ€œè°¨èº«æ®¿â€ï¼Œåç§°â€œå»ºææ®¿â€ï¼Œæ¸…æœæ—¶ç§°â€œä¿å’Œæ®¿â€ã€‚è¢ä¸–å‡¯ç™»åŸºæ—¶ä¸€åº¦å¤åä¸ºâ€œå»ºææ®¿â€ã€‚â€œä¿å’Œâ€äºŒå­—æ˜¯è¯´è¦ä¿æŒäº‹ç‰©é—´çš„åè°ƒå…³ç³»ã€‚é¢é˜”ä¹é—´ï¼Œè¿›æ·±äº”é—´ã€‚é‡æªæ­‡å±±é¡¶ã€‚å®´è¯·å¤–è—©ç‹å…¬å¤§è‡£çš„åœºæ‰€ã€‚ä»ä¹¾éš†å¼€å§‹ï¼Œæ®¿è¯•ç”±å¤ªå’Œæ®¿ç§»åˆ°æ­¤ä¸¾è¡Œã€‚ å¤–æœä¸œè·¯ æ–‡åæ®¿ æ–‡åé—¨ ä¸»æ•¬æ®¿ æœ¬ä»æ®¿ã€é›†ä¹‰æ®¿ æ–‡æ¸Šé˜ ä¼ å¿ƒæ®¿ï¼šä½äºç´«ç¦åŸä¸œå—éš…çš„æ–‡åæ®¿ä¸œä¾§ï¼Œä¸ºæ¸…æœçš‡å¸å¾¡ç»ç­µå‰ä¸¾è¡Œâ€œç¥­å‘Šç¤¼â€ä¹‹æ‰€ã€‚ æ²»ç‰²æ‰€ æ™¯è¡Œé—¨ å¤§åº–äº• éŠ®ä»ªå« éŠ®é©¾åº“ã€ä»ªä»—åº“ å†…é˜ å†…é˜å¤§å ‚ï¼ˆå¤§å­¦å£«å ‚ï¼‰ æ±‰ç¥¨ç­¾æˆ¿ã€è’™å¤å ‚ã€æ±‰æœ¬å ‚ã€æ»¡æœ¬å ‚ã€ç¥ç‰ˆæˆ¿ã€æ»¡ç¥¨ç­¾æˆ¿ã€ç¨½æŸ¥æˆ¿ã€æ»¡ç¥¨ç­¾æ¡£å­æˆ¿ã€å…¸ç±å…ã€æ±‰æœ¬åº“ å†…é˜å¤§åº“ï¼ˆçº¢æœ¬åº“ã€å®å½•åº“ï¼‰ ç®­äº­ å¤–æœè¥¿è·¯-æ­¦è‹±æ®¿ æ­¦è‹±é—¨ æ•¬æ€æ®¿ å‡é“æ®¿ã€ç„•ç« æ®¿ æ’å¯¿æ–‹ã€æµ´å¾·å ‚ æ–­è™¹æ¡¥ æ–¹ç•¥é¦†ã€å›å­å­¦ã€ç¼…å­å­¦ å’¸å®‰å®«ï¼ˆå®è•´æ¥¼ï¼‰ å—è–°æ®¿ã€å¾¡ä¹¦å¤„ æ¿€æ¡¶å¤„ å—å¤§åº“ï¼ˆæ­¦å™¨åº“ã€ç¯åº“ã€æœ¨åº“ã€éä©åº“ï¼‰ã€å¹²è‚‰åº“ã€å¤–ç“·å™¨åº“ å†…å»·å†…å»·ä¸­è·¯-ä¹¾æ¸…é—¨å¹¿åœº ä¹¾æ¸…é—¨ï¼šä¹¾æ¸…é—¨å¹¿åœºæ˜¯ä¸€ä¸ªä¸œè¥¿é•¿ã€å—åŒ—çª„çš„çŸ©å½¢å¹¿åœºã€‚å¹¿åœºè¥¿é¢æ˜¯éš†å®—é—¨ï¼Œä¸œé¢æ˜¯æ™¯è¿é—¨ã€‚è¿™ä¸ªå°å¹¿åœºæ˜¯æ•…å®«å¤–æœå’Œå†…å»·çš„åˆ†ç•Œã€‚æ¸…åˆâ€œå¾¡é—¨å¬æ”¿â€åœ¨æ­¤ä¸¾è¡Œã€‚æ¸…åº·ç†™æ—¶ï¼Œåœ¨æ­¤å¤„å¬æ”¿æœ€å¤šï¼Œè‡³å’¸ä¸°ä»¥åå°±ä¸å†å®è¡Œäº†ã€‚ä¹¾æ¸…é—¨è¥¿ä¾§æœ‰ä¸€æ’æ¶ˆé˜²ï¼Œä¸œä¸ºä¾å«å€¼æˆ¿ï¼Œè¥¿ä¸ºå†…åŠ¡åºœå€¼æˆ¿ï¼Œä¸­é—´ä¸ºå†›æœºå€¼æˆ¿ï¼Œä¿—ç§°â€œå†›æœºå¤„â€ã€‚ æ™¯è¿é—¨ã€éš†å®—é—¨ å†›æœºå¤„ å†…å»·ä¸­è·¯-åä¸‰å®« ä¹¾æ¸…å®«ï¼šæ•…å®«â€œåä¸‰å®«â€ä¹‹ç¬¬ä¸€å®«ã€‚è¿å»Šé¢é˜”9é—´ï¼Œè¿›æ·±5é—´ï¼Œé‡æªåº‘æ®¿é¡¶ã€‚å´‡ç¥¯äºæ­¤å®«å†…è¿«å‘¨çš‡åæ‚¬æ¢è‡ªå°½ã€‚æ¸…åº·ç†™æ—¶ä¸ºåº·ç†™å¹¼å¹´æ—¶ä»£å¯å®¤ã€‚å†…æœ‰â€œæ­£å¤§å…‰æ˜â€åŒ¾ï¼Œæ¸…æœé›æ­£è®¾â€œç§˜å¯†ç«‹å‚¨â€åˆ¶åº¦åä¼ ä½è¯ä¹¦è—æ­¤åŒ¾åã€‚æ­¤å¤„ä¸ºæ˜æ¸…ä¸¤æœç¤¼åˆ¶ä¸Šçš„çš‡å¸æ­£å¯ï¼Œç›´åˆ°æ¸…åˆä¹Ÿæ˜¯çš‡å¸åœ¨ç´«ç¦åŸé‡Œçš„å¯å®«ï¼Œå’Œå¬è§ç‹å…¬å¤§è‡£ï¼Œå¤„ç†æ”¿åŠ¡çš„åœ°æ–¹ã€‚è€Œè‡³æ¸…ä»£ç¬¬ä¸‰ä¸ªçš‡å¸é›æ­£ç§»å±…å…»å¿ƒæ®¿åï¼Œçš‡å¸å°±ä¸å±…ä½äºæ­¤ã€‚ æ—¥ç²¾é—¨ã€æœˆåé—¨ ç«¯å‡æ®¿ã€æ‡‹å‹¤æ®¿ æ˜­ä»æ®¿ã€å¼˜å¾·æ®¿ äº¤æ³°æ®¿ï¼šæ•…å®«â€œåä¸‰å®«â€ä¹‹ç¬¬äºŒå®«ã€‚é¢é˜”è¿›æ·±åŒ€ä¸º3é—´ï¼Œå•æªæ”’å°–é¡¶ã€‚è¯¥æ®¿æ˜¯çš‡åè¿‡ç”Ÿæ—¥ä¸¾åŠå¯¿åº†æ´»åŠ¨çš„åœ°æ–¹ã€‚ å¤å®å®«ï¼šæ•…å®«â€œåä¸‰å®«â€ä¹‹ç¬¬ä¸‰å®«ã€‚æ¸…é¡ºæ²»åäºŒå¹´ï¼ˆ1655å¹´ï¼‰ï¼Œè¯¥å®«ä»¿ç…§æ²ˆé˜³æ•…å®«é‡å»ºã€‚é¢é˜”è¿å»Š9é—´ï¼Œè¿›æ·±3é—´ï¼Œé‡æªåº‘æ®¿é¡¶ã€‚æ­¤å¤„ä¸ºæ˜æ¸…ä¸¤æœç¤¼åˆ¶åº¦ä¸Šçš„çš‡åæ­£å¯ï¼Œæ˜æœçš‡åä¸€èˆ¬ä¹Ÿå±…ä½äºæ­¤å¤„ã€‚æ¸…æœå…¥å…³åï¼Œä»¿ç…§æ²ˆé˜³æ¸…å®å®«çš„å¸ƒå±€è¿›è¡Œäº†æ”¹é€ è€Œæˆä¸ºæ·±å…·æ»¡æ—ç‰¹è‰²çš„å»ºç­‘ï¼Œå…¶ä¸­æ®¿èº«è¥¿äº”é—´ä¸ºè¨æ»¡æ•™ç¥æ®¿ï¼Œä¸œä¸¤é—´çš„æš–é˜ä¸ºå¸åæˆå©šçš„å¤§å©šå–œæˆ¿ã€‚ å†…å»·ä¸­è·¯-å¾¡èŠ±å›­ å¤©ä¸€é—¨ã€é’¦å®‰æ®¿ ç»›é›ªè½©ã€å…»æ€§æ–‹ ä¸‡æ˜¥äº­ã€åƒç§‹äº­ æµ®ç¢§äº­ã€æ¾„ç‘äº­ å †ç§€å±±ã€å»¶æ™–é˜ æ‘›è—»å ‚ã€ä½è‚²æ–‹ å‡é¦™äº­ã€ç‰ç¿ äº­ å››ç¥ç¥  é¡ºè´é—¨ã€æ‰¿å…‰é—¨ã€å»¶å’Œé—¨ã€é›†ç¦é—¨ å†…å»·è¥¿è·¯â”€å…»å¿ƒæ®¿å…»å¿ƒæ®¿ï¼šæ¸…æœè‡ªé›æ­£ä¹‹åï¼Œçš‡å¸åœ¨æ•…å®«å†…çš„å®é™…å±…æ‰€ã€‚æ…ˆç¦§ã€æ…ˆå®‰äºŒå¤ªåå‚å¸˜å¬æ”¿å°±åœ¨å…»å¿ƒæ®¿ä¸œæš–é˜ã€‚å†…è®¾å®åº§ã€å¾¡æ¡ˆï¼Œçš‡å¸åœ¨æ­¤åŠç†æ—¥å¸¸æ”¿åŠ¡åŠæ¥è§å¤§è‡£ã€‚ å†…å»·è¥¿è·¯â”€è¥¿å…­å®« æ°¸å¯¿å®« å¤ªææ®¿ï¼ˆå¯ç¥¥å®«ï¼‰ ä½“å…ƒæ®¿ æ€¡æ€§è½©ã€ä¹é“å ‚ é•¿æ˜¥å®« ç»¥å¯¿æ®¿ã€æ‰¿ç¦§æ®¿ æ€¡æƒ…ä¹¦å² ç›Šå¯¿æ–‹ã€ä¹å¿—è½© ç¿Šå¤å®« å»¶æ´ªæ®¿ï¼ˆåº†äº‘æ–‹ï¼‰ã€å…ƒå’Œæ®¿ï¼ˆé“å¾·å ‚ï¼‰ ä½“å’Œæ®¿ å¹³åº·å®¤ã€ç›Šå¯¿æ–‹ å‚¨ç§€å®« å…»å’Œæ®¿ã€ç¼“ç¦æ®¿ ä¸½æ™¯è½© å‡¤å…‰å®¤ã€çŒ—å…°é¦† å’¸ç¦å®« åŒé“å ‚ å†…å»·è¥¿è·¯â”€é‡åå®«åŒºï¼ˆåŸä¹¾è¥¿äº”æ‰€ï¼‰ æ¼±èŠ³æ–‹ æ¼±èŠ³æ–‹æˆå° é‡åå®«ï¼šä¹¾éš†çš‡å¸ä¿®å»ºï¼Œæ˜¯ç¬ƒä¿¡è—ä¼ ä½›æ•™ä¹¾éš†ä¿¡ä»°ä½›å ‚ï¼šé‡åæ˜¯å¤ä»£å…¸ç±å¯¹èˆœå¸æ•¬ç§°ï¼Œå¤§è‡£å¼ å»·ç‰å»ºè®®ä»¥æ­¤ä¸ºå®«åŒºå‘½åï¼Œä¹¾éš†æ¬£ç„¶é‡‡çº³ã€‚ å´‡æ•¬æ®¿ è‘†ä¸­æ®¿ã€æµ´å¾·æ®¿ ç¿ äº‘é¦† é‡åå®«å¨æˆ¿ å»ºç¦å®« æŠšè¾°æ®¿ æƒ é£äº­ å»ºç¦å®«èŠ±å›­ å»¶æ˜¥é˜ã€æ•¬èƒœæ–‹ã€ç¢§ç³é¦†ã€å‡æ™–å ‚ã€ç‰å£¶å†°ã€ç§¯ç¿ äº­ã€å‰äº‘æ¥¼ é™æ€¡è½©ã€æ…§æ›œæ¥¼ å†…å»·è¥¿è·¯â”€å»¶åº†æ®¿ã€ä¸­æ­£æ®¿ å»¶åº†æ®¿ ä¸­æ­£æ®¿ é›¨èŠ±é˜ï¼šä½åœ¨é‡åå®«è¥¿å—ç«¯ï¼Œæ˜¯ç´«ç¦åŸå†…æœ€å…·è—ä¼ ä½›æ•™é£æ ¼å»ºç­‘ï¼Œå†…ä¸ºå–‡å˜›ä½›å ‚è©è¨ä½›åƒæ•°å°Š æ¢µå®—æ¥¼ å®åæ®¿ é¦™äº‘äº­ æ·¡è¿œæ¥¼ å†…å»·å¤–è¥¿è·¯ æ…ˆå®å®« æ…ˆå®é—¨ å¤§ä½›å ‚ è¥¿ä¸‰æ‰€ï¼ˆå¤´æ‰€æ®¿ã€äºŒæ‰€æ®¿ã€ä¸‰æ‰€æ®¿ï¼‰ å¯¿ä¸‰å®«ï¼ˆè¥¿å®«æ®¿ã€ä¸­å®«æ®¿ã€ä¸œå®«æ®¿ï¼‰ å¯¿åº·å®« æ…ˆå®å®«èŠ±å›­ ä¸´æºªäº­ å«æ¸…æ–‹ã€å»¶å¯¿å ‚ å’¸è‹¥é¦† å®ç›¸æ¥¼ã€å‰äº‘æ¥¼ æ…ˆè«æ¥¼ å¯¿å®‰å®« æ˜¥ç¦§æ®¿ ç¦å®œæ–‹ã€è±å¯¿å ‚ è‹±åæ®¿ è‹±åé—¨ è‹±åæ®¿ç¢‘äº­ å†…å»·ä¸œè·¯â”€æ–‹å®«ã€æ¯“åº†å®«ã€å¥‰å…ˆæ®¿ æ–‹å®« è¯šè‚ƒæ®¿ æ¯“åº†å®«ï¼šæ¸…æœçš‡å¸åå²ä»¥åè‡ªç«‹ç”Ÿæ´»ä¹‹å¯å®«ã€‚ ç»§å¾·å ‚ æƒ‡æœ¬æ®¿ å¥‰å…ˆæ®¿ å†…å»·ä¸œè·¯â”€ä¸œå…­å®« æ™¯ä»å®« æ‰¿ä¹¾å®« è´é¡ºæ–‹ã€æ˜å¾·å ‚ é”ºç²¹å®« è†ºå¤©åº†ã€ç»¥ä¸‡é‚¦ å»¶ç¦§å®« çµæ²¼è½© æ°¸å’Œå®« åŒé¡ºæ–‹ æ™¯é˜³å®« å¾¡ä¹¦æˆ¿ é™è§‚æ–‹ã€å¤é‰´æ–‹ å†…å»·ä¸œè·¯â”€ä¹¾ä¸œäº”æ‰€ å¦‚æ„é¦† å¯¿è¯å±€ æ•¬äº‹æˆ¿ å››æ‰§åº“ å¤è‘£æˆ¿ å†…å»·ä¸œè·¯å…¶ä»–é™¢è½ ç„ç©¹å®æ®¿ èŒ¶åº“ã€ç¼åº“ æ™¯å±±æ™¯å±±å…¬å›­ä½äºä¸­å›½åŒ—äº¬å¸‚è¥¿åŸåŒºçš„æ™¯å±±å‰è¡—ï¼Œè¥¿ä¸´åŒ—æµ·ï¼Œå—ä¸æ•…å®«ç¥æ­¦é—¨éš”è¡—ç›¸æœ›ï¼Œæ˜¯å…ƒã€æ˜ã€æ¸…ä¸‰ä»£çš„å¾¡è‹‘ã€‚å…¬å›­åè½åœ¨æ˜æ¸…åŒ—äº¬åŸçš„ä¸­è½´çº¿ä¸Šï¼Œå…¬å›­ä¸­å¿ƒçš„æ™¯å±±ï¼Œæ›¾æ˜¯å…¨åŸçš„åˆ¶é«˜ç‚¹ã€‚ åœ¨å…ƒã€æ˜ã€æ¸…ä¸‰ä»£ï¼Œæ™¯å±±åŠå…¶é™„å±å»ºç­‘ä¸ä»…æ˜¯ä¸€åº§ä¾›æ¸¸èµçš„çš‡å®¶å›­æ—ï¼Œè¿˜å…·æœ‰ä¹ å°„ã€åœçµã€ç¥­ç¥–ã€å®˜å­¦ã€èº¬è€•ã€æˆæ›²ã€å®—æ•™ç­‰å¤šé‡åŠŸèƒ½ã€‚ç›®å‰å…¬å›­å åœ°23å…¬é¡·ï¼Œå›­å†…æ¾æŸè‘±éƒï¼Œæ¸¸äººå¦‚ç»‡ï¼Œæ˜¯åŒ—äº¬çš‡åŸå†…ç‹¬å…·ç‰¹è‰²çš„æ‰€åœ¨ã€‚ è·¯çº¿ æŒ‰ç…§çº¢è‰²è·¯çº¿å›¾è¿›è¡Œæ¸¸ç©ï¼Œå‡ºç¥æ­¦é—¨åˆ°æ™¯å±±ä¿¯ç°æ•´ä¸ªçš‡åŸ å‚è€ƒ https://zh.wikipedia.org/zh-hans/%E6%95%85%E5%AE%AB https://zh.wikipedia.org/wiki/%E6%99%AF%E5%B1%B1%E5%85%AC%E5%9B%AD","tags":[{"name":"æ—…æ¸¸ æ•…å®«","slug":"æ—…æ¸¸-æ•…å®«","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E6%95%85%E5%AE%AB/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"","date":"2023-12-24T13:26:04.303Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/åƒ/","text":"","tags":[],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"},{"name":"åŒ—äº¬æ¸¸ç©æ”»ç•¥","slug":"éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/%E5%8C%97%E4%BA%AC%E6%B8%B8%E7%8E%A9%E6%94%BB%E7%95%A5/"}]},{"title":"åŒ—äº¬æ¸¸ç©æ”»ç•¥ï¼šå¤©å›","date":"2023-12-24T13:26:04.303Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/å¤©å›/","text":"å†å²èƒŒæ™¯ ä»‹ç»ï¼šæ˜ã€æ¸…å…©æœçš‡å¸ç¥­å¤©ã€æ±‚é›¨å’Œç¥ˆç¦±è±æ”¶çš„å°ˆç”¨ç¥­å£‡ï¼Œæ•´å€‹å¤©å£‡åˆ†ç‚ºå…§å£‡ã€å¤–å£‡å…©éƒ¨åˆ†ï¼Œç¥ˆå¹´æ®¿ã€å›éŸ³å£ç­‰çŸ¥åçš„å»ºç¯‰éƒ½ä½æ–¼å…§å£‡ã€‚éŠç©å¤©å£‡ï¼Œé™¤äº†è§€æ„Ÿå—å¤ä»£å¸ç‹ç¥­å¤©çš„å®å¤§å ´é¢å¤–ï¼Œå›éŸ³å£ã€ä¸‰éŸ³çŸ³ç­‰å·§å¦™çš„è¨­è¨ˆä¹Ÿå€¼å¾—ä¸€çœ‹ åœ°å€ï¼šåŒ—äº¬å¸‚æ±åŸå€å¤©å£‡è·¯ç”²1è™Ÿ è´­ç¥¨æŒ‡å—ï¼š24ç‚¹æ”¾ç¥¨ï¼Œå…¬ä¼—å·è´­ç¥¨ æ¸¸ç©è·¯çº¿ ä»ä¸œé—¨å…¥ï¼Œé€šè¿‡ä¸ƒæ˜ŸçŸ³å’Œä¸ƒåäºŒé•¿å»Šåˆ°è¾¾æœ€æ ¸å¿ƒçš„æ™¯ç‚¹ç¥ˆå¹´æ®¿ã€‚ ä»ç¥ˆå¹´æ®¿é€šè¿‡ä¸¹é™›æ¡¥å¾€å—åˆ°è¾¾çš‡ç©¹å®‡ã€ä¸‰éŸ³çŸ³å’Œå›éŸ³å£ï¼Œå†å¾€å—åˆ°è¾¾åœœä¸˜å›ã€‚ æœ€åæ‚¨è¿˜å¯ä»¥å»è¥¿è¾¹çš„ä¸‡å¯¿äº­ã€ç™¾èŠ±å›­ã€å’Œæ–‹å®«å‚è§‚ã€‚","tags":[{"name":"æ—…æ¸¸ å¤©å›","slug":"æ—…æ¸¸-å¤©å›","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E5%A4%A9%E5%9D%9B/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"","date":"2023-12-24T13:26:04.294Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/ä½/","text":"","tags":[],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"},{"name":"åŒ—äº¬æ¸¸ç©æ”»ç•¥","slug":"éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/%E5%8C%97%E4%BA%AC%E6%B8%B8%E7%8E%A9%E6%94%BB%E7%95%A5/"}]},{"title":"åŒ—äº¬æ¸¸ç©æ”»ç•¥ï¼šåä¸‰é™µ","date":"2023-12-24T13:26:04.294Z","path":"wiki/éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥/åä¸‰é™µ/","text":"å†å²èƒŒæ™¯åä¸‰é™µæ˜¯æ˜æœçš‡å¸çš„å¢“è‘¬å»ºç­‘ç¾¤ã€‚è‡ªæ°¸ä¹ä¸ƒå¹´äº”æœˆï¼ˆ1409å¹´ï¼‰èµ·ç”¨ï¼Œç›´åˆ°å®‰è‘¬å´‡ç¥¯å¸åç»“æŸï¼Œå†æ—¶230å¤šå¹´ï¼Œå…±è‘¬æœ‰13ä½çš‡å¸ï¼Œ23ä½çš‡åã€2ä½å¤ªå­ã€30ä½™åå¦ƒå«”ã€1ä½å¤ªç›‘ï¼Œæ˜¯å…¨çƒä¿å­˜æœ€å®Œæ•´çš„çš‡é™µå¢“è‘¬ç¾¤ä¹‹ä¸€ã€‚ æ˜æœå…±æœ‰16ä½çš‡å¸ï¼Œä½†åŒ—äº¬çš„æ˜åä¸‰é™µåªæœ‰13ä½çš‡å¸ï¼Œæœªå…¥é™µè€…å› ç”±å„å¼‚ã€‚æ˜æœå¼€å›½çš‡å¸æœ±å…ƒç’‹æ—©å¹´å»ºéƒ½äºå—äº¬ï¼Œæ­»åè‘¬äºå—äº¬ç´«é‡‘å±±çš„â€œå­é™µâ€ï¼›ç»§ä½çš„é•¿å­™æƒ å¸æœ±å…ç‚†ï¼Œåœ¨å…¶å”çˆ¶ç‡•ç‹æœ±æ££ï¼ˆå³åæ¥çš„æˆç¥–ï¼‰å‘èµ·â€œé–éš¾ä¹‹å½¹â€æ”»ç ´å—äº¬ä¹‹åä¸‹è½ä¸æ˜ï¼ŒåŠ ä¸Šæˆç¥–ä¸æ‰¿è®¤å…¶å¸ä½ï¼Œå› æ­¤æ²¡æœ‰å¸é™µï¼›ç¬¬ä¸ƒå¸ä»£å®—æœ±ç¥é’°ï¼Œåœ¨å…¶å…„è‹±å®—äºåœŸæœ¨å ¡ä¹‹å˜è¢«ç“¦å‰Œæ‰€ä¿˜ä¹‹åç™»ä¸Šå¸ä½ã€‚åæ¥è‹±å®—å¤è¾Ÿï¼Œæœ±ç¥é’°é€Ÿæ­»ï¼Œè‹±å®—ä¸æ‰¿è®¤å…¶å¸ä½ï¼Œæ£æ¯å…¶åœ¨å¤©å¯¿å±±ä¿®å»ºçš„å¯¿é™µã€‚è¿˜æœ‰ä¸€è¯´ï¼Œå¯¿é™µè¢«æ”¹å»ºä¸ºåœ¨ä½ä»…29å¤©çš„å…‰å®—é™µå¢“ï¼Œæ”¹åä¸ºåº†é™µã€‚å®ªå®—ä»¥äº²ç‹èº«ä»½å°†ä»–è‘¬äºåŒ—äº¬è¥¿éƒŠé‡‘å±±ã€‚é‡‘å±±æ˜¯å®‰è‘¬å¦ƒå«”ã€æ—©å¤­çš„äº²ç‹å…¬ä¸»ï¼ˆçš‡å­çš‡å¥³ï¼‰çš„çš‡å®¶é™µåŒºã€‚è€Œæ™¯æ³°é™µæ‰€åœ¨åœ°ï¼Œä»Šä¸ºç‰æ³‰å±±ã€‚ åä¸‰é™µçš„ä¸»é™µæ˜¯æœ±æ££äº1409å¹´è‡³1413å¹´æœ€æ—©å…´å»ºçš„é•¿é™µï¼Œä»–å½“æ—¶ç»â€œè½¦é©¾ä¸´è§†â€ï¼Œé’¦å®šå±±åä¸ºâ€œå¤©å¯¿å±±â€ï¼Œ1424å¹´ä»–äºåŒ—å¾é‘é¼é€”ä¸­é©¾å´©ï¼Œåå®‰è‘¬äºæ­¤ï¼Œä½†é•¿é™µå·¥ç¨‹ç›´è‡³1427å¹´å§‹å…¨éƒ¨ç«£å·¥ã€‚æœŸåè¿‘20å¹´çš„å…´å»ºï¼Œå½¢æˆé•¿è¾¾7å…¬é‡Œå¤šçš„å®Œæ•´å»ºç­‘ç¾¤ã€‚ 13åº§é™µå¢“ä¸­ï¼Œæ°¸ä¹å¸çš„é•¿é™µã€å˜‰é–å¸çš„æ°¸é™µå’Œä¸‡å†å¸çš„å®šé™µï¼Œå‡æ˜¯ç”Ÿå‰æ‰€å»ºï¼Œè§„æ¨¡äº¦æœ€å¤§ï¼Œå…¶ä½™é™µå¢“åˆ™æ˜¯æ­»åæ‰åŠ¨å·¥ï¼Œå¤§çº¦ä¼šç”¨åŠå¹´ä¿®å»ºã€‚å´‡ç¥¯å¸å› ä¸ºæ˜¯äº¡å›½ä¹‹å›ï¼Œå¹¶æ²¡æœ‰æ­£å¼å»ºé™µï¼Œç°æ—¶çš„é™µå¢“æ˜¯ä»¥å…¶å¦ƒç”°æ°çš„å¢“ç©´æ”¹å»ºã€‚ ç›®å‰ï¼Œé•¿é™µã€å®šé™µã€æ˜­é™µã€åº·é™µå’Œç¥é“å¯ä¾›æ¸¸å®¢å‚è§‚ï¼Œå…¶ä½™é™µå‡æœªå¼€æ”¾ã€‚ é£æ°´å¸ƒå±€ åä¸‰é™µèƒŒé çš„å¤©å¯¿å±±éº“å±äºå¤ªè¡Œå±±è„‰ï¼Œè¥¿é€šå±…åº¸å…³ï¼ŒåŒ—é€šé»„èŠ±é•‡ï¼Œå—å‘æ˜Œå¹³å·ï¼Œæˆä¸ºåä¸‰é™µåŠäº¬å¸ˆä¹‹åŒ—é¢å±éšœã€‚å¤ªè¡Œå±±èµ·æ³½å·ï¼Œèœ¿èœ’ç»µäº˜åŒ—èµ°åƒç™¾é‡Œå±±è„‰ä¸æ–­ï¼Œè‡³å±…åº¸å…³ã€‚æ˜æœ«æ¸…åˆå­¦è€…é¡¾ç‚æ­¦æ›¾æŒ‡ï¼šâ€œç¾¤å±±è‡ªå—æ¥ï¼ŒåŠ¿è‹¥è›Ÿé¾™ç¿”ï¼›ä¸œè¶¾è¸å¢é¾™ï¼Œè¥¿è„Šé©°å¤ªè¡Œï¼›åå°»åé»„èŠ±ï¼ˆæŒ‡é»„èŠ±é•‡ï¼‰ï¼Œå‰é¢ä¸´ç¥äº¬ï¼›ä¸­æœ‰ä¸‡å¹´å®…ï¼Œåæ›°åº·å®¶åº„ï¼›å¯å®¹ç™¾ä¸‡äººï¼Œè±ç„¶å¼€æ˜å ‚ã€‚â€æ˜ä»£è§†æ­¤ä¸ºé£æ°´åœ°ï¼Œé™µåŒºä»¥å¸¸ç»¿çš„æ¾æŸæ ‘ä¸ºä¸»ã€‚ åä¸‰é™µåŸæœ‰ä¸€åœˆå›´å¢™ï¼ˆéƒ¨åˆ†ä¾å±±åŠ¿ï¼Œæ— äººå·¥å¢™ä½“ï¼‰ï¼Œå›´å¢™ä¸Šæœ‰ä¸¤é—¨ã€åå£ã€‚ä¸¤é—¨ä¸ºå¤§çº¢é—¨å’Œå°çº¢é—¨ï¼Œåå£ä¸ºæ¦¨å­å£ã€è¥¿å±±å£ã€å¾·èƒœå£ã€é›å­å£ã€é”¥çŸ³å£ã€è´¤åº„å£ã€ç°å²­å£ã€è€å›å ‚å£ã€ä¸œå±±å£å’Œä¸­å±±å£ã€‚è¿™äº›å±±å£ä¸ºæ°´å…³ï¼ˆæ³„æ´ªå£ï¼‰æˆ–äº¤é€šè¦é“ã€‚å›´å¢™åŠå±±å£å¤§éƒ¨åˆ†ä¸ºæ˜æœå˜‰é–å¹´é—´ï¼Œä¸ºä¿æŠ¤é™µå¯å®‰å…¨è€Œä¿®å»ºã€‚æ¸…æœä»¥åï¼Œæ‰å…è®¸å®ˆé™µäººä½åœ¨å¢™å†…ï¼Œé™µå¯å‘¨å›´ä¹Ÿæ‰æ¸æ¸å‡ºç°æ‘åº„ã€‚å›´å¢™å’Œå±±å£ç°ä»…å­˜ä¸€äº›é—è¿¹ã€‚[2] çŸ³ç‰ŒåŠä½äºç¥é“çš„æœ€å—ç«¯ï¼ˆä¹Ÿæ˜¯ç›®å‰é™µåŒºæœ€å—ç«¯ä¿ç•™çš„åœ°é¢å»ºç­‘ï¼‰ï¼Œå»ºäºå˜‰é–åä¹å¹´ï¼ˆ1540å¹´ï¼‰ï¼Œæ­¤åæ˜ä»£å‰å¾€é™µåŒºçš„å®˜å‘˜éƒ½è¦ä»æ­¤ä¸‹èˆ†æ”¹éª‘é©¬å‰è¡Œï¼Œä»¥ç¤ºå°Šæ•¬ã€‚çŸ³ç‰ŒåŠåŒ—1.5å…¬é‡Œä¸ºé™µåŒºé—¨æˆ·å¤§çº¢é—¨ã€‚å¤§çº¢é—¨ä¸ºå•æªåº‘æ®¿é¡¶ï¼Œé»„ç‰ç’ƒç“¦ï¼Œä¸‹è¾Ÿåˆ¸é—¨ä¸‰æ´ã€‚ä¸­é—¨ä¸ºå¸åæ£ºæ¤ã€ç¥å¾¡ç‰©ç­‰é€šè¿‡ï¼Œä¸œé—¨ä¸ºçš‡å¸å‰æ¥æœæ‹œé€šé“ï¼Œè¥¿é—¨ä¸ºå¤§è‡£ä»¬çš„é€šé“[3]ã€‚ æ˜åä¸‰é™µä¾å±±è€Œå»ºï¼Œæ²¿è¢­å—äº¬å­é™µçš„æ¨¡å¼ï¼Œå³é™¤ç¥é“å…±ç”¨å¤–ï¼Œå„é™µéƒ½æ˜¯å‰ä¸ºç¥­äº«åŒºï¼Œåä¸ºå¢“å†¢åŒºã€‚é™µå¢“è§„æ ¼ç›¸è¿‘ï¼Œå„æ®å±±å¤´ï¼Œé™µä¸é™µä¹‹é—´ç›¸è·500ç±³è‡³8000ç±³ä¸ç­‰ã€‚é™¤æ€é™µååœ¨è¥¿å—ä¸€éš…å¤–ï¼Œå…¶ä½™å‡æˆæ‰‡é¢å½¢åˆ†åˆ—äºé•¿é™µå·¦å³ã€‚äº¦æœ‰é™µä»¿å­é™µä¹‹åˆ¶ï¼Œç§°æœ‰ä¸€åº§å«â€œå“‘å·´é™¢â€çš„å»ºç­‘ï¼Œæˆ–æ›´è®¾ä¸€åº§ç‰ç’ƒç…§å£ä½œä¸ºå±å¹•éšœã€‚ æ¯åº§é™µå¢“çš„é™µé—¨è®¾æœ‰ç¢‘äº­ï¼Œç¢‘æ–‡è®°è½½çš‡å¸ç”Ÿå‰çš„ä¸šç»©ï¼Œåº”ç”±å—£çš‡å¸æ¥æ’°å†™ã€‚ä½†è‡ªä»æ˜ä»å®—ä¸ºå…¶çˆ¶æœ±æ££å†™äº†ä¸€ç¯‡3500å­—çš„çºªåŠŸç¢‘æ–‡åï¼Œå†ä¹Ÿæ²¡æœ‰å—£çš‡å¸ç»­å†™ã€‚æ‰€ä»¥ç°åœ¨é™¤äº†é•¿é™µç¢‘å¤–ï¼Œå…¶ä½™å„é™µéƒ½æˆäº†æ— å­—ç¢‘ã€‚ ä»¥è§„æ¨¡è¾ƒå¤§çš„å®šé™µï¼ˆä¸‡å†å¸å¢“ï¼‰ä¸ºä¾‹ï¼Œå…¶åœ°é¢å»ºç­‘çš„æ€»å¸ƒå±€ï¼Œå‘ˆå‰æ–¹ååœ†ï¼Œè±¡å¾â€œå¤©åœ†åœ°æ–¹â€ã€‚åœ°é¢å»ºç­‘å åœ°18ä¸‡å¹³æ–¹ç±³ï¼Œå‰æœ‰å®½é˜”é™¢è½ä¸‰è¿›ï¼Œåæœ‰é«˜å¤§å®åŸä¸€åº§ã€‚é™µå¢“æœ‰ç¥ ç¥­ç½²ã€å®°ç‰²äº­ã€å®šé™µç›‘ã€ç¥å®«ç›‘ã€ç¥é©¬æˆ¿ç­‰é™„å±ç­‰å»ºç­‘ç‰©300å¤šé—´ï¼Œå¾€åæ˜¯é™µå›­æœ€å¤–é¢çš„å›´å¢™ï¼å¤–ç½—åŸï¼ˆå›´å¢™å¤–çš„å›´å¢™ï¼‰ã€‚ çš‡å¸é™µåˆ—è¡¨ é™µå çš‡å¸å å¹´å· é•¿é™µ æœ±æ££ æ°¸ä¹ çŒ®é™µ æœ±é«˜ç‚½ æ´ªç†™ æ™¯é™µ æœ±ç»åŸº å®£å¾· è£•é™µ æœ±ç¥é•‡ æ­£ç»Ÿå¤©é¡º æ™¯æ³°é™µ æœ±ç¥é’° æ™¯æ³° èŒ‚é™µ æœ±è§æ·± æˆåŒ– æ³°é™µ æœ±ç¥æ¨˜ å¼˜æ²» æ˜¾é™µ æœ±ç¥æ¬ åº·é™µ æœ±åšç…§ æ­£å¾· æ°¸é™µ æœ±åšç†œ å˜‰é– æ˜­é™µ æœ±è½½å– éš†åº† å®šé™µ æœ±ç¿Šé’§ ä¸‡å† åº†é™µ æœ±å¸¸æ´› æ³°æ˜Œ å¾·é™µ æœ±ç”±æ ¡ å¤©å¯ æ€é™µ æœ±ç”±æ£€ å´‡ç¥¯ é•¿é™µæ˜é•¿é™µæ˜¯æ˜æœç¬¬ä¸‰ä½çš‡å¸æˆç¥–æœ±æ££å’Œçš‡åå¾æ°çš„åˆè‘¬é™µå¯ã€‚åœ¨åä¸‰é™µä¸­å»ºç­‘è§„æ¨¡æœ€å¤§ï¼Œè¥å»ºæ—¶é—´æœ€æ—©ï¼Œåœ°é¢å»ºç­‘ä¹Ÿä¿å­˜å¾—æœ€ä¸ºå®Œå¥½ã€‚å®ƒæ˜¯åä¸‰é™µä¸­çš„ç¥–é™µ å®šé™µæœ±ç¿Šé’§å’Œä¸¤çš‡åçš„åˆè‘¬å¢“ æ˜­é™µè·¯çº¿æ˜åä¸‰é™µå¼€æ”¾çš„é™µå¢“æ™¯åŒºåªæœ‰ä¸‰ä¸ªï¼šæ˜­é™µã€å®šé™µå’Œé•¿é™µ è·¯çº¿ï¼šå®šé™µâ€”&gt;é•¿é™µ ä¹˜ååœ°é“æˆ–è€…å…¬äº¤åˆ°è¾¾å¾·èƒœé—¨ï¼Œå¹¶åœ¨å¾·èƒœé—¨ä¹˜å872è·¯å…¬äº¤è½¦ç›´è¾¾æ˜åä¸‰é™µï¼ˆ872ä¸ºæ—…æ¸¸å¤§å·´ï¼Œè¡Œé©¶å¤§çº¦1å°æ—¶ï¼Œåˆ°è¾¾å¤§å®«é—¨ç«™ï¼‰ ä¹˜ååœ°é“æ˜Œå¹³çº¿åˆ°è¾¾ç»ˆç‚¹å—é‚µç«™ï¼Œå†æ¢ä¹˜å…¬äº¤67è·¯åˆ°è¾¾åä¸‰é™µ ä¹˜å345æ”¯çº¿æˆ–886ã€888è·¯å…¬äº¤è½¦åˆ°è¾¾æ˜Œå¹³ä¸œå…³æ€»ç«™ï¼Œå†æ¢ä¹˜314è·¯å…¬äº¤è½¦åˆ°è¾¾åä¸‰é™µ ç¥é“-&gt;é•¿é™µ-&gt;å®šé™µ-&gt;ç¥é“ é•¿é™µç¥¾æ©æ®¿â€“å»ºç­‘ç»å…¸ã€é‡‘ä¸æ¥ æœ¨å¤§æ®¿","tags":[{"name":"æ—…æ¸¸ åä¸‰é™µ","slug":"æ—…æ¸¸-åä¸‰é™µ","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E5%8D%81%E4%B8%89%E9%99%B5/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"æ•°æ®åŸ‹ç‚¹æ–¹æ¡ˆ","date":"2023-12-24T13:26:04.191Z","path":"wiki/æŠ€æœ¯å¼€å‘/æŠ€æœ¯æ–¹æ¡ˆ/åŸ‹ç‚¹æ–¹æ¡ˆ/","text":"æ•°æ®åŸ‹ç‚¹æ˜¯ä¸€ç§æ•°æ®é‡‡é›†æ–¹æ³•ï¼Œä¸»è¦ç”¨äºæ”¶é›†ç”¨æˆ·åœ¨ä½¿ç”¨äº§å“æˆ–æœåŠ¡è¿‡ç¨‹ä¸­çš„è¡Œä¸ºã€æ“ä½œã€äº‹ä»¶ç­‰æ•°æ®ã€‚è¿™äº›æ•°æ®å¯ä»¥å¸®åŠ©åˆ†æç”¨æˆ·è¡Œä¸ºã€ä¼˜åŒ–äº§å“è®¾è®¡ã€æå‡ç”¨æˆ·ä½“éªŒç­‰æ–¹é¢ã€‚ æ•°æ®åŸ‹ç‚¹çš„è§„èŒƒå®šä¹‰åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ é‡‡é›†ç›®æ ‡æ˜ç¡®ï¼šæ˜ç¡®éœ€è¦é‡‡é›†çš„æ•°æ®ç±»å‹ã€ç›®çš„å’ŒèŒƒå›´ã€‚ æ•°æ®å‡†ç¡®æ€§ï¼šç¡®ä¿é‡‡é›†çš„æ•°æ®çœŸå®ã€æ— è¯¯ï¼Œé¿å…æ•°æ®æ±¡æŸ“ã€‚ æ•°æ®å®Œæ•´æ€§ï¼šç¡®ä¿é‡‡é›†åˆ°çš„æ•°æ®èƒ½å¤Ÿå…¨é¢åæ˜ ç”¨æˆ·è¡Œä¸ºã€‚ ä½ä¾µå…¥æ€§ï¼šå°½é‡ä¸å½±å“ç”¨æˆ·æ­£å¸¸ä½¿ç”¨äº§å“æˆ–æœåŠ¡ã€‚ é«˜æ€§èƒ½ï¼šå°½é‡å‡å°‘æ•°æ®é‡‡é›†å¯¹äº§å“æˆ–æœåŠ¡æ€§èƒ½çš„å½±å“ã€‚ æ•°æ®å®‰å…¨ï¼šä¿æŠ¤ç”¨æˆ·éšç§ï¼Œé˜²æ­¢æ•°æ®æ³„éœ²ã€‚ å®ç°è¿‡ç¨‹ ç¡®å®šå…³é”®äº‹ä»¶ï¼šé¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®šéœ€è¦è§‚å¯Ÿçš„å…³é”®äº‹ä»¶ã€‚ä¾‹å¦‚ç”¨æˆ·è®¿é—®é¦–é¡µã€æµè§ˆå•†å“ã€ç‚¹å‡»å•†å“ã€åŠ å…¥è´­ç‰©è½¦ã€æäº¤è®¢å•ç­‰ã€‚ ç¼–å†™åŸ‹ç‚¹ä»£ç ï¼šé’ˆå¯¹è¿™äº›å…³é”®äº‹ä»¶ï¼Œæˆ‘ä»¬ä¼šåœ¨APPçš„ç›¸åº”ä½ç½®ç¼–å†™åŸ‹ç‚¹ä»£ç ã€‚è¿™äº›ä»£ç å°±åƒæ˜¯æˆ‘ä»¬çš„â€œæ‘„åƒå¤´â€ï¼Œè´Ÿè´£æ•æ‰ç”¨æˆ·çš„è¡Œä¸ºä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œåœ¨å•†å“è¯¦æƒ…é¡µçš„â€œåŠ å…¥è´­ç‰©è½¦â€æŒ‰é’®ä¸Šï¼Œæˆ‘ä»¬ä¼šæ·»åŠ ä¸€æ®µä»£ç ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿™ä¸ªæŒ‰é’®æ—¶ï¼Œä»£ç ä¼šè‡ªåŠ¨æ‰§è¡Œï¼Œè®°å½•ç”¨æˆ·çš„æ“ä½œã€‚ æ”¶é›†æ•°æ®ï¼šåŸ‹ç‚¹ä»£ç æ‰§è¡Œæ—¶ï¼Œä¼šå°†ç”¨æˆ·çš„è¡Œä¸ºä¿¡æ¯å‘é€åˆ°æˆ‘ä»¬çš„æ•°æ®æœåŠ¡å™¨ã€‚è¿™äº›ä¿¡æ¯åŒ…æ‹¬ç”¨æˆ·IDã€æ“ä½œæ—¶é—´ã€äº‹ä»¶ç±»å‹ï¼ˆå¦‚ç‚¹å‡»ã€æµè§ˆï¼‰ã€äº‹ä»¶åç§°ï¼ˆå¦‚åŠ å…¥è´­ç‰©è½¦ï¼‰ç­‰ã€‚ æ•°æ®å¤„ç†ï¼šæ•°æ®æœåŠ¡å™¨æ”¶åˆ°è¿™äº›ä¿¡æ¯åï¼Œä¼šå¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ã€æ•´ç†å’Œå­˜å‚¨ï¼Œä»¥ä¾¿åç»­åˆ†æä½¿ç”¨ã€‚ æ•°æ®åˆ†æï¼šè¿è¥å’Œäº§å“å›¢é˜Ÿå¯ä»¥é€šè¿‡æ•°æ®åˆ†æå·¥å…·æŸ¥è¯¢å’Œåˆ†æè¿™äº›æ•°æ®ï¼Œå‘ç°ç”¨æˆ·åœ¨è´­ç‰©è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œä¾‹å¦‚æŸä¸ªç¯èŠ‚çš„æµå¤±ç‡è¾ƒé«˜ã€æŸä¸ªåŠŸèƒ½çš„ä½¿ç”¨ç‡è¾ƒä½ç­‰ã€‚ ä¼˜åŒ–æ”¹è¿›ï¼šæ ¹æ®åˆ†æç»“æœï¼Œè¿è¥å’Œäº§å“å›¢é˜Ÿå¯ä»¥å¯¹APPè¿›è¡Œä¼˜åŒ–æ”¹è¿›ã€‚ä¾‹å¦‚è°ƒæ•´å•†å“å±•ç¤ºã€ä¼˜åŒ–è´­ç‰©æµç¨‹ã€å¢åŠ ä¼˜æƒ æ´»åŠ¨ç­‰ã€‚å¹¶æŒç»­å…³æ³¨æ•°æ®å˜åŒ–ï¼Œè¯„ä¼°ä¼˜åŒ–æ•ˆæœã€‚ åŸ‹ç‚¹ç±»å‹ ä¸šåŠ¡åŸ‹ç‚¹ï¼Œäº§å“è¦æ±‚çš„åŸ‹ç‚¹ï¼Œæ¯”å¦‚åˆ†äº«æ¬¡æ•°ï¼Œç‚¹å‡»è´­ç‰©è½¦æ¬¡æ•°ï¼ŒæŸä¸ªé¡µé¢çš„æ›å…‰æ¬¡æ•° æŠ€æœ¯åŸ‹ç‚¹ï¼Œæ¯”å¦‚é¡µé¢åŠ è½½æ—¶é—´ï¼Œç½‘ç»œè¯·æ±‚æ—¶é—´ï¼Œå†…å­˜å ç”¨ã€è‡ªå®šä¹‰å¼‚å¸¸æ”¶é›†ç­‰ å¯¹äºå¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä»£ç ä¸­æ·»åŠ ä¸€äº›åŸ‹ç‚¹çš„é€»è¾‘ï¼Œæ¯”å¦‚æŒ‰é’®ç‚¹å‡»ã€é¡µé¢æ›å…‰ç­‰ï¼Œè¿™äº›ä»£ç ä¼šåç»­ç»´æŠ¤æ€§è¾ƒå·®ï¼Œäºæ˜¯å‡ºç°äº†æ— åŸ‹ç‚¹æ–¹æ¡ˆï¼Œè¿™äº›æ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡AOPçš„æ–¹å¼ï¼Œè‡ªåŠ¨æ’å…¥åŸ‹ç‚¹ä»£ç ï¼Œä»è€Œå‡å°‘å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚æˆ‘ä»¬å®é™…çš„å·¥ä½œå½“ä¸­ä¼šä½¿ç”¨å¤šå¥—æ–¹æ¡ˆï¼Œæ¯”å¦‚å‹ç›Ÿç”¨æ¥æ”¶é›†åŸºæœ¬ç”¨æˆ·æ´»è·ƒä¿¡æ¯ã€å¼‚å¸¸ä¿¡æ¯ï¼›GrowingIOç”¨æ¥æ”¶é›†ä¸šåŠ¡åŸ‹ç‚¹ä¿¡æ¯ã€‚ åŸ‹ç‚¹æ•°æ®å¹³å° Google Analytics å‹ç›Ÿ GrowingIO Sensors Analyticsï¼ˆç¥ç­–ï¼‰ å‚è€ƒ ChatGPTï¼šä¸€æ–‡ææ‡‚æ•°æ®åŸ‹ç‚¹çš„è®¤çŸ¥ã€æ–¹æ¡ˆã€ä»£ç å®ç° ç¾å›¢ç‚¹è¯„å‰ç«¯æ— ç—•åŸ‹ç‚¹å®è·µ","tags":[{"name":"åŸ‹ç‚¹ æŠ€æœ¯æ–¹æ¡ˆ","slug":"åŸ‹ç‚¹-æŠ€æœ¯æ–¹æ¡ˆ","permalink":"http://airshu.github.io/tags/%E5%9F%8B%E7%82%B9-%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æŠ€æœ¯æ–¹æ¡ˆ","slug":"æŠ€æœ¯å¼€å‘/æŠ€æœ¯æ–¹æ¡ˆ","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/"}]},{"title":"æ•°æ®åŸ‹ç‚¹æ–¹æ¡ˆ","date":"2023-12-24T13:26:04.191Z","path":"wiki/æŠ€æœ¯å¼€å‘/æŠ€æœ¯æ–¹æ¡ˆ/Appå‡çº§æ–¹æ¡ˆ/","text":"","tags":[{"name":"åŸ‹ç‚¹ æŠ€æœ¯æ–¹æ¡ˆ","slug":"åŸ‹ç‚¹-æŠ€æœ¯æ–¹æ¡ˆ","permalink":"http://airshu.github.io/tags/%E5%9F%8B%E7%82%B9-%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æŠ€æœ¯æ–¹æ¡ˆ","slug":"æŠ€æœ¯å¼€å‘/æŠ€æœ¯æ–¹æ¡ˆ","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/"}]},{"title":"Firefoxæ’ä»¶æ¨è","date":"2023-12-24T13:26:04.184Z","path":"wiki/å·¥å…·è½¯ä»¶/Firefoxæ’ä»¶æ¨è/","text":"AdGuardå»å¹¿å‘Šç¥å™¨ https://github.com/AdGuardTeam/AdGuardBrowserExtension In My Pocketå°†ç½‘é¡µå†…å®¹ç¼“å­˜èµ·æ¥ï¼Œæ–¹ä¾¿ä»¥åé˜…è¯»ï¼ŒæŸ¥çœ‹ã€‚ JSON Liteå¯¹jsonç±»å‹æ ¼å¼åŒ–æ˜¾ç¤º OctotreeGithubçš„æ–‡ä»¶ç›®å½•ç”¨æ ‘å½¢è¡¨ç¤º Greasemonkeyè„šæœ¬ç®¡ç†å™¨ Dark Readerè®¾ç½®é»‘è‰²ä¸»é¢˜ å°è±¡ç¬”è®°Â·å‰ªè—ä¿å­˜ç½‘é¡µå†…å®¹åˆ°Evernote iCloudä¹¦ç­¾åŒæ­¥Firefoxå’ŒSafiraä¹¦ç­¾ New Tab Suspenderå†…å­˜å ç”¨è¿‡å¤§æ—¶ï¼Œè‡ªåŠ¨æŒ‚èµ·æ ‡ç­¾é¡µã€‚çœå†…å­˜ Sideberyä¾§è¾¹æ æ ‡ç­¾é¡µç®¡ç†å™¨ã€‚å¦‚æœä½¿ç”¨çš„ç¬”è®°æœ¬ï¼Œå±å¹•çš„é«˜åº¦æ˜¯å¾ˆçè´µçš„ï¼Œåœ¨ä½¿ç”¨æµè§ˆå™¨æ—¶æˆ‘ä¼šå°½é‡èŠ‚çœé«˜åº¦ï¼Œæ¯”å¦‚å°†ä¹¦ç­¾æ éšè—ï¼Œä¹¦ç­¾æ”¾åˆ°è·Ÿåœ°å€æ åŒä¸€è¡Œã€‚æ ‡ç­¾æ ä¹Ÿå¯ä»¥éšè—ï¼ŒSideberyå¯ç”¨äºåœ¨ä¾§è¾¹ç®¡ç†æ ‡ç­¾ï¼Œç›¸æ¯”é»˜è®¤çš„æ ‡ç­¾æ ï¼Œå®ƒæ›´æ–¹ä¾¿ã€‚å¯ä»¥åˆ†ç»„ç®¡ç†ï¼Œæ ‡ç­¾å¯ä»¥æŒ‰æ ‘å½¢æ’åˆ—ï¼Œæ¨èä½¿ç”¨ã€‚ å¦‚ä½•éšè—Firefoxçš„æ ‡ç­¾æ Firefoxçš„æ ‡ç­¾æ æ˜¯ä¸èƒ½éšè—çš„ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ä¿®æ”¹userChrome.cssæ–‡ä»¶æ¥å®ç°ã€‚ è®¾ç½® about:configä¸­è®¾ç½®ï¼štoolkit.legacyUserProfileCustomizations.stylesheetsä¸ºtrue åˆ›å»ºuserChrome.cssæ–‡ä»¶ï¼Œæ‰“å¼€å¸®åŠ©-&gt;æ•…éšœæ’é™¤ä¿¡æ¯-&gt;ç‚¹å‡»é…ç½®æ–‡ä»¶å¤¹ï¼Œè¿›å…¥é…ç½®æ–‡ä»¶å¤¹ï¼Œåˆ›å»ºchromeæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºuserChrome.cssæ–‡ä»¶ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#main-window:not([drawtitle=&quot;true&quot;]):not([inFullscreen=&quot;true&quot;]) #nav-bar &#123; margin-left : 30px; /* leftTop drag area */ border-right: 140px solid var(--toolbar-bgcolor); &#125;:root[sizemode=&quot;maximized&quot;] #nav-bar &#123; margin-top: 10px !important; /* Top drag area */ margin-left : 0px !important; /* hidden leftTop drag area in Fullscreen mode*/ border-right: 140px solid var(--toolbar-bgcolor); &#125;:root[privatebrowsingmode=&quot;temporary&quot;] #nav-bar &#123; border-right: 180px solid var(--toolbar-bgcolor) !important; &#125;/* move down to hidden titlebar */#titlebar &#123; margin-bottom: -45px !important;&#125;/* move down 3 button on rightTop */.titlebar-buttonbox-container &#123; margin-bottom: -5px !important;&#125;:root[sizemode=&quot;maximized&quot;] .titlebar-buttonbox-container &#123; margin-bottom: -15px !important;&#125;/* move down private icon */.private-browsing-indicator &#123; margin-bottom: -8px !important;&#125;:root[sizemode=&quot;maximized&quot;] .private-browsing-indicator &#123; margin-bottom: -18px !important;&#125;/* hidden horizontal tabbar on top */#tabbrowser-tabs[orient=&quot;horizontal&quot;] &#123; visibility: collapse !important;&#125;#sidebar-box[sidebarcommand=&quot;_0ad88674-2b41-4cfb-99e3-e206c74a0076_-sidebar-action&quot;] sidebarheader &#123; visibility: collapse !important; &#125;","tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"ç¯å¢ƒæ­å»º","date":"2023-12-24T13:26:04.163Z","path":"wiki/JavaScript/ReactNative/ç¯å¢ƒæ­å»º/","text":"Mac ç¯å¢ƒæ­å»º1234567891011121314# å®‰è£…nodebrew install node# å®‰è£…æ–‡ä»¶ç›‘æ§ï¼Œæ–¹ä¾¿å¼€å‘brew install watchman# ä½¿ç”¨nrmå·¥å…·åˆ‡æ¢æ·˜å®æºnpx nrm use taobao# å¦‚æœä¹‹åéœ€è¦åˆ‡æ¢å›å®˜æ–¹æºå¯ä½¿ç”¨npx nrm use npm Hello World12345678910111213# æ–°å»ºé¡¹ç›®npx react-native init AwesomeProject# å¯åŠ¨Metronpm start yarn start# è¿è¡ŒAndroidç«¯npm run androidyarn androidnpm run iosyarn ios ç«¯å£é…ç½®12345678# å¯åŠ¨metroä¿®æ”¹ç«¯å£ï¼Œå»ºè®®ä½¿ç”¨è¿™ç§æ–¹å¼npm run start --verbose -- --port 8082# é»˜è®¤ä¼šç›‘å¬8081ç«¯å£# é…ç½®ç¯å¢ƒå˜é‡æŒ‡å®šç«¯å£ï¼ŒæœªéªŒè¯æ˜¯å¦æœ‰æ•ˆexport RCT_METRO_PORT=9091npx react-native start --port 9091 nvmæ¨èä½¿ç”¨nvmæ¥åšnodeå¤šç‰ˆæœ¬ç®¡ç† 123456789101112131415# æŸ¥çœ‹å·²å®‰è£…çš„nodeç‰ˆæœ¬nvm list# å®‰è£…æŒ‡å®šç‰ˆæœ¬nvm install v12.18.3# å¸è½½æŒ‡å®šç‰ˆæœ¬nvm uninstall v12.18.3# å½“å‰é¡¹ç›®æŒ‡å®šnodeç‰ˆæœ¬nvm use v12.18.3# è®¾ç½®å…¨å±€é»˜è®¤ç‰ˆæœ¬nvm alias default v12.18.3 å‚è€ƒ https://github.com/crazycodeboy/RNStudyNotes","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"è°ƒè¯•æ–¹å¼","date":"2023-12-24T13:26:04.163Z","path":"wiki/JavaScript/ReactNative/è°ƒè¯•æ–¹å¼/","text":"ä½¿ç”¨æµç¨‹ å¯åŠ¨MetroæœåŠ¡ npm startï¼Œå¯ä»¥è®¾ç½®ä¸åŒç«¯å£å·npm run start â€“verbose â€“ â€“port 8082 å¯åŠ¨é¡¹ç›®npm run android æ‰“å¼€å¼€å‘è€…èœå•ï¼Œç‚¹å‡»Debugï¼Œå¦‚æœæ²¡æœ‰æ‰“å¼€æµè§ˆå™¨è°ƒè¯•çª—å£ï¼Œå¯å°è¯•åœ¨Settingsé¡µé¢é…ç½®IPï¼šPortï¼Œè®¾ç½®ç«¯å£è½¬å‘ å¼€å‘äººå‘˜èœå• AndroidçœŸæœºè°ƒè¯•æ–¹å¼:æ‘‡ä¸€æ‘‡æ‰‹æœºï¼Œå¼¹å‡ºè°ƒè¯•çª—å£ VS Codeä¸­æŒ‰F1ï¼Œè¾“å…¥reactnativeï¼šæ˜¾ç¤ºå¼€å‘äººå‘˜èœå• é€šè¿‡adbå‘½ä»¤ï¼šadb shell input keyevent 82 è°ƒè¯•èœå•Reloadå¦‚æœåªæ˜¯ä¿®æ”¹äº†JSæ–‡ä»¶ï¼Œå¯é€šè¿‡æ­¤èœå•é‡æ–°loadã€‚å¦‚æœä¿®æ”¹äº†èµ„æºæ–‡ä»¶åˆ™éœ€è¦é‡æ–°ç¼–è¯‘é¡¹ç›®ã€‚ Change Bundle Locationæ”¹å˜æ‰“åŒ…åçš„åœ°å€ Show Element Inspectoræ˜¾ç¤ºå…ƒç´ æ£€æŸ¥å™¨ Disable Fast Refreshç¦æ­¢å¿«é€Ÿåˆ·æ–° Show Perf Monitoræ˜¾ç¤ºç›‘æ§çª—å£ SettingsEnable Sampling ProfilerDebugç‚¹å‡»Debugï¼Œä¼šæ‰“å¼€æµè§ˆå™¨è°ƒè¯•çª—å£ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡å¼€å‘è€…å·¥å…·è¿›è¡Œdebugã€‚å¯ä»¥åœ¨æµè§ˆå™¨é¡µé¢reload Androidç«¯å¦‚ä½•debug é¡¹ç›®æ ¹ç›®å½•å¯åŠ¨é¡¹ç›®ï¼Œç¡®ä¿package serverå¯åŠ¨ã€‚localhost:8081å¯ä»¥è®¿é—® å¯¹äºAndroid5.0+ï¼Œç«¯å£è½¬å‘ï¼Œadb reverse tcp:8081 tcp:8081ï¼Œ æ‰“å¼€å¼€å‘è€…èœå•ï¼Œé€‰æ‹©Settingï¼Œé…ç½®Debug server host &amp; port for deviceï¼Œè¾“å…¥ip:8081 ç‚¹å‡»èœå•ä¸­çš„Reload å¸¸è§é—®é¢˜æ€»ç»“Invariant Violation: Calling synchronous methods on native modules is not supported in Chromehttps://stackoverflow.com/questions/61067004/invariant-violation-calling-synchronous-methods-on-native-modules-is-not-suppor Error: Unable to resolve module .&#x2F;debugger-ui&#x2F;debuggerWorker.xxxx.jså°è¯•æ‰“å¼€React Native Debug Menu é¡µé¢ï¼Œé‡æ–°å…³é—­æ‰“å¼€debug https://github.com/facebook/react-native/issues/28844","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"åŸºç¡€çŸ¥è¯†","date":"2023-12-24T13:26:04.161Z","path":"wiki/JavaScript/ReactNative/åŸºç¡€çŸ¥è¯†/","text":"facebookå…ˆå¼€æºäº†Reactï¼Œç„¶ååŸºäºReactï¼Œå¼€æºäº†å¯ä»¥åœ¨Appä¸Šç”¨çš„React Nativeã€‚å…ˆäº†è§£ä¸€ä¸‹ReactReact å…¥é—¨å®ä¾‹æ•™ç¨‹ Reactæ˜¯ä¸€ä¸ªJavaScriptåº“ï¼Œç”¨äºç®€å•çš„åˆ›å»ºç”¨æˆ·ç•Œé¢ï¼›React Nativeåˆ™å¯ä»¥ç”¨äºæ‰‹æœºAndroidã€iOSåº”ç”¨ã€‚ å¼€å‘Reactéœ€è¦å¼•å…¥ï¼š react.jsï¼šæ ¸å¿ƒåº“ react-dom.jsï¼šä¸DOMç›¸å…³ browser.min.jsï¼šå°†JSXè½¬ä¸ºJavaScriptè¯­æ³• ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ mounting:å·²æ’å…¥çœŸå®DOM updating:æ­£åœ¨è¢«é‡æ–°æ¸²æŸ“ unmounting:å·²ç§»å‡ºçœŸå®DOM Reactä¸ºæ¯ä¸ªçŠ¶æ€æä¾›äº†ä¸¤ç§å¤„ç†å‡½æ•°ï¼Œwillå‡½æ•°è½½è¿›å…¥çŠ¶æ€ä¹‹å‰è°ƒç”¨ï¼Œdidå‡½æ•°åœ¨è¿›å…¥çŠ¶æ€ä¹‹åè°ƒç”¨ 123456789componentWillMount()componentDidMount()componentWillUpdate(object nextProps, object nextState)componentDidUpdate(object prevProps, object prevState)componentWillUnmount()//ç‰¹æ®ŠçŠ¶æ€çš„å¤„ç†å‡½æ•°componentWillReceiveProps(object nextProps)ï¼šå·²åŠ è½½ç»„ä»¶æ”¶åˆ°æ–°çš„å‚æ•°æ—¶è°ƒç”¨shouldComponentUpdate(object nextProps, object nextState)ï¼šç»„ä»¶åˆ¤æ–­æ˜¯å¦é‡æ–°æ¸²æŸ“æ—¶è°ƒç”¨ ä¸“æœ‰åè¯ Reactï¼šçº¯JSæ¡†æ¶ï¼Œç”¨ JS å®ç°äº† Virtual Dom, å®ç°äº†æ•°æ®é©±åŠ¨ç¼–ç¨‹çš„æ¨¡å¼, è€Œä¸” React è¿˜æå‡ºäº†ç‹¬ç‰¹çš„ JSX è¯­æ³•, å®ç°äº†åœ¨ JS å°±å¯ä»¥å†™ HTML å’Œ CSS ä»£ç , é…åˆè™šæ‹Ÿ DOM å°±å®ç°äº†åŸºäº MVC çš„å‰ç«¯æ¡†æ¶ Babel:Babel æ˜¯ä¸€ä¸ªé«˜åº¦å¯é…ç½®çš„ç¼–è¯‘å™¨ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä½¿ç”¨è¾ƒæ–°çš„ JavaScript è¯­è¨€åŠŸèƒ½ï¼ˆä»¥åŠæ‰©å±•ï¼Œå¦‚ JSXï¼‰ï¼Œå°†â€œå‘ä¸‹â€ç¼–è¯‘ä¸ºæ›´å¹¿æ³›çš„å¼•æ“æ”¯æŒçš„è¾ƒæ—§ç‰ˆæœ¬çš„ JavaScript React Nativeï¼šJavaScript Core + React.js + Bridges JavaScriptCoreï¼šJSå¼•æ“ï¼Œç”¨æ¥è§£é‡Šå’Œæ‰§è¡ŒJavaScriptä»£ç ã€‚åœ¨React Nativeä¸­ï¼Œè´Ÿè´£bundleäº§å‡ºçš„JSä»£ç çš„è§£æå’Œæ‰§è¡Œ JS Engineï¼šReact Nativeéœ€è¦ä¸€ä¸ªJSè¿è¡Œç¯å¢ƒï¼ŒRNä¼šæŠŠåº”ç”¨çš„JSä»£ç ç¼–è¯‘æˆä¸€ä¸ªJSæ–‡ä»¶ï¼ˆx.x.bundleï¼‰ï¼ŒRNæ¡†æ¶çš„ç›®æ ‡å°±æ˜¯è§£é‡Šè¿è¡Œè¿™ä¸ªJSè„šæœ¬æ–‡ä»¶ï¼Œå¦‚æœæ˜¯Nativeæ‰©å±•çš„APIï¼Œåˆ™ç›´æ¥é€šè¿‡bridgeè°ƒç”¨Nativeæ–¹æ³•ï¼Œæœ€åŸºç¡€çš„æ¯”å¦‚ç»˜åˆ¶UIç•Œé¢ï¼Œæ˜ å°„Virtual DOMåˆ°çœŸå®çš„UIç»„ä»¶ä¸­ã€‚ Hermes Engineï¼šæ–°ä¸€ä»£JavaScriptå¼•æ“ï¼Œç›¸å¯¹äºJavaScriptCoreå’ŒV8å¼•æ“ï¼Œå„æ–¹é¢æ€§èƒ½æ˜¾è‘—æå‡ã€‚ Bridgeï¼š RCTRootViewï¼š RCTBridgeï¼š åŠ è½½å’Œåˆå§‹åŒ–ä¸“ç”¨ç±», ç”¨äºå‰æœŸ JS çš„åˆå§‹åŒ–å’ŒåŸç”Ÿä»£ç çš„åŠ è½½ è´Ÿè´£åŠ è½½å„ä¸ª Bridge æ¨¡å—ä¾› JS è°ƒç”¨ æ‰¾åˆ°å¹¶æ³¨å†Œå®ç°äº† RCTBridgeModule protocol çš„ç±» åˆ›å»ºæŒæœ‰ RCTBatchedBridge RCTBatchedBridgeï¼šè´Ÿè´£ Native å’Œ JS ä¹‹é—´çš„ç›¸äº’è°ƒç”¨, ä¹Ÿå°±æ˜¯ä¿¡æ¯é€šä¿¡ RCTJavaScriptLoaderï¼šå®ç°è¿œç¨‹ä»£ç çš„æ ¸å¿ƒ, çƒ­æ›´æ–°, å¼€å‘ç¯å¢ƒä»£ç åŠ è½½. é™æ€ jsbundle åŠ è½½ RCTContextExecutorï¼šå°è£…äº† JS å’Œ Native ä»£ç çš„äº’ç›¸è°ƒç”¨é€»è¾‘ RCTModuleDataï¼šåŠ è½½ç®¡ç†æ‰€æœ‰ä¸ JS äº¤äº’çš„åŸç”Ÿä»£ç , æŠŠäº¤äº’ä»£ç å°è£…æˆ JS æ¨¡å— RCTModuleMethodï¼š è®°å½•æ‰€æœ‰åŸç”Ÿä»£ç çš„å¯¼å‡ºå‡½æ•°åœ°å€, åŒæ—¶ç”Ÿæˆå¯¹åº”çš„å­—ç¬¦ä¸²æ˜ å°„åˆ°æ”¹å‡½æ•°åœ°å€ ç¿»è¯‘æ‰€æœ‰ J2N call MessageQueueï¼š metroï¼šfacebookå®˜æ–¹æ¨å‡ºçš„æ‰“åŒ…å·¥å…· JSIï¼šJavaScript Interfaceï¼ŒJSI æ˜¯ä¸€ä¸ªè½»é‡çº§çš„é€šç”¨çš„ API æ¡†æ¶ï¼Œå¯ä»¥åº”ç”¨äºä»»æ„çš„ JavaScript virtual machine fabricï¼šUI Manageræ–°åç§°ï¼Œæ•´ä¸ªæ¡†æ¶ä¸­æ–°UIå±‚ codepushï¼šç”¨äºçƒ­æ›´æ–° JS Threadï¼šè¯»å–å’Œç¼–è¯‘æ‰€æœ‰JavaScriptä»£ç  UI Threadï¼šåŸç”Ÿæ¸²æŸ“å’Œè°ƒç”¨ Shadow Threadï¼šé€šè¿‡Yogaå¼•æ“è®¡ç®—å¸ƒå±€ï¼Œå°†ç»“æœå‘é€ç»™Native UI å¸¸ç”¨çš„API ReactContextï¼šç»§æ‰¿äºContextWrapperï¼Œæ˜¯React Nativeåº”ç”¨çš„ä¸Šä¸‹æ–‡ï¼Œç®¡ç†ç€CatalystInstanceä»¥åŠä¸‰å¤§çº¿ç¨‹ï¼ˆUIThreadã€NativeModulesThreadã€JSThreadï¼‰ ReactApplicationContext: ReactContextçš„å­ç±» ThemedReactContextï¼š ReactInstanceManagerï¼šæ€»çš„ç®¡ç†ç±»ï¼Œç®¡ç†ReactPackageã€ReactContextã€ReactRootViewã€æ§åˆ¶ç”Ÿå‘½å‘¨æœŸï¼ŒåŒæ—¶è¿˜å¯ä»¥è®¾ç½®JavaScriptå¼•æ“ ReactRootViewï¼šReact Nativeæ¸²æŸ“çš„åŸç”Ÿå®¹å™¨ï¼Œç»§æ‰¿äºFrameLayout CatalystInstanceï¼šJavaå±‚ã€C++å±‚ã€JavaScriptå±‚é€šä¿¡çš„æ€»ç®¡ç†ç±»ï¼Œç®¡ç†ç€Javaå±‚ã€JavaScriptå±‚Moduleæ˜ å°„è¡¨ä¸å›è°ƒï¼Œæ˜¯ä¸‰ç«¯é€šä¿¡çš„æ¡¥æ¢ã€‚å®ç°ç±»ä¸ºCatalystInstanceImplï¼Œæ”¯æŒå‘JavaScriptæ³¨å…¥å…¨å±€å˜é‡ã€åŠ¨æ€åŠ è½½è„šæœ¬æ–‡ä»¶ã€è·å–NativeModules &amp; JSModules ReactBridgeï¼šé€šä¿¡æ¡¥ï¼Œä¸‰ç«¯é€šä¿¡çš„æ¡¥æ¢ JavaScriptModuleï¼šJS Moduleï¼Œè´Ÿè´£JavaScriptåˆ°Javaçš„æ˜ å°„è°ƒç”¨æ ¼å¼ç”Ÿå‘½ï¼Œç”±CatalystInstanceç»Ÿä¸€ç®¡ç† NativeModuleï¼šJava Moduleï¼Œè´Ÿè´£Javaåˆ°JavaScriptçš„æ˜ å°„è°ƒç”¨æ ¼å¼å£°æ˜ï¼Œç”±CatalystInstanceç»Ÿä¸€ç®¡ç† JavaScriptModuleRegistry:JavaScriptModuleæ³¨å†Œè¡¨ï¼Œè´Ÿè´£ç®¡ç†ä¸æŸ¥æ‰¾JavaScriptModule JSCExecutor.cpp: è„šæœ¬å¼•æ“ï¼Œå°è£…äº†Webkitçš„JavaScriptCore UIManagerï¼šå¤„ç†UIçš„æ¸²æŸ“ï¼ŒJavaScriptå±‚é€šè¿‡C++å±‚æŠŠåˆ›å»ºçš„Viewçš„è¯·æ±‚å‘é€ç»™Javaå±‚çš„UIManagerModule Androidå¸¸ç”¨APIï¼š ReactRootViewï¼šå®¹å™¨è§†å›¾ï¼Œéœ€è¦setContentView ReactPackage: ä¸€ä¸ªjs bundleçš„ä¿¡æ¯ï¼Œéœ€è¦æ³¨å†Œåˆ°ReactInstanceManager ReactContextBaseJavaModule: ä¸€ä¸ªpackageå¯¹åº”ä¸€ä¸ªmoduleï¼Œé‡Œé¢ä¼šå®ç°nativeçš„æ–¹æ³•ç»™jsç”¨ ReactInstanceManagerï¼šæ€»ç®¡ç†ç±»ï¼Œåˆ›å»ºReactContextã€CatalystInstanceï¼Œè§£æReactPackageï¼Œé…åˆReactRootViewç®¡ç†Viewçš„åˆ›å»ºä¸ç”Ÿå‘½å‘¨æœŸ ReactNativeHostï¼šåŒ…å«ReactInstanceManagerï¼Œæ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ï¼Œä¸€èˆ¬è¦å®ç°getPackagesæ–¹æ³•è¿”å›æ‰€æœ‰bundle ReactActivityï¼šå°è£…å¥½çš„Activityï¼Œæ–¹ä¾¿ä½¿ç”¨ ReactFragmentï¼š ReactActivityDelegateï¼šå§”æ‰˜ç±»ï¼Œå¯ä»¥å®ç°å„ç§å›è°ƒ ReactDelegateï¼šReactActivityDelegateçš„æˆå‘˜å˜é‡ ReactApplicationï¼šå¦‚æœä½¿ç”¨ReactActivityï¼Œåˆ™Applicationéœ€è¦å®ç°è¿™ä¸ªæ¥å£ï¼Œå°†packageè¿›è¡Œæ³¨å†Œ MainReactPackage: åŒ…å«é»˜è®¤æ”¯æŒçš„packageï¼Œå¯¹åº”modulesæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚toastã€storeageç­‰ç­‰ï¼Œå¯ä»¥ç›´æ¥åœ¨jsç«¯ä½¿ç”¨ å¸¸ç”¨Modulesï¼š AppearanceModuleï¼š CameraRollManagerï¼šå…è®¸JSè®¿é—®ç›¸æœºå’Œæ‘„åƒå¤´ ClipboardModuleï¼šå‰ªåˆ‡æ¿æ“ä½œ DatePickerDialogModuleï¼šåŸç”Ÿæ—¥æœŸé€‰æ‹© DeviceInfoModuleï¼šè®¾å¤‡ä¿¡æ¯ DialogModuleï¼šæ˜¾ç¤ºåŸç”Ÿå¼¹çª— NetworkingModuleï¼šç½‘ç»œè®¿é—® PermissionsModuleï¼šæƒé™ç®¡ç† ShareModuleï¼šç³»ç»Ÿåˆ†äº« StatusBarModuleï¼šçŠ¶æ€æ è®¾ç½® AsyncStorageModuleï¼šå­˜å‚¨é”®å€¼å¯¹ AndroidInfoModuleï¼šè·å–Androidçš„ä¸€äº›å¸¸é‡ä¿¡æ¯ï¼Œæ¯”å¦‚å‚å•†ã€ç‰ˆæœ¬ä¿¡æ¯ç­‰ ToastModuleï¼šåŸç”Ÿtoast å¸¸ç”¨å‘½ä»¤ npm npx yarn JSXES6ç‰¹æ€§class module export import Named imports and exports Import from modules å‚è€ƒ React Native åŸç†ä¸å®è·µ https://github.com/sucese/react-native https://www.reactnative.express/","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"npmä½¿ç”¨","date":"2023-12-24T13:26:04.160Z","path":"wiki/JavaScript/ReactNative/npm/","text":"npmnpmé…ç½®æ–‡ä»¶ä¸º$Home&#x2F;.npmrc 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152# æŸ¥çœ‹npmé…ç½®æ–‡ä»¶ç›®å½•npm config get userconfig# æŸ¥çœ‹é…ç½®é¡¹npm config lsnpm config ls -l #æŸ¥çœ‹æ‰€æœ‰é…ç½®é¡¹npm config list# ç¼–è¾‘é…ç½®æ–‡ä»¶npm config edit# è·å–æºåœ°å€npm config get registry# è®¾ç½®æºåœ°å€# https://registry.npmjs.orgnpm config set registry http://10.193.204.59:8888/repository/group-npm/# åˆ›å»ºpackage.jsonæ–‡ä»¶npm init# æŸ¥çœ‹æ‰€æœ‰ä¾èµ–é¡¹npm list# æŸ¥çœ‹å…·ä½“ä¾èµ–çš„ç‰ˆæœ¬npm info react-native# å…¨å±€å®‰è£…xxnpm install electron@12 -g# å®‰è£…yarn npmæ›¿ä»£å·¥å…·npm install -g yarn# æ›´æ–°npm update -g xxx# å¸è½½npm uninstall --save xx # saveæŒ‡ä»package.jsonæ–‡ä»¶ä¸­åˆ é™¤npm publish npmrcé…ç½®æ–‡ä»¶123echo -n &#x27;admin:admin&#x27; | openssl base64 nvm12345678# æŸ¥çœ‹å½“å‰å®‰è£…çš„nodeç‰ˆæœ¬nvm list# è®¾ç½®é»˜è®¤çš„nodeç‰ˆæœ¬nvm alias default v18.17.1 npmä¸npxçš„åŒºåˆ«npmä»5.2.0å¼€å§‹å¢åŠ äº†npxå‘½ä»¤ npx ä½¿ç”¨æ•™ç¨‹ npxæ˜¯ä»€ä¹ˆå‘½ä»¤ï¼Ÿnpxå’Œnpmæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"Reactå…¥é—¨","date":"2023-12-24T13:26:04.159Z","path":"wiki/JavaScript/React/åŸºç¡€çŸ¥è¯†/Reactå…¥é—¨/","text":"Reactæ—¶ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„åº“ï¼Œä½¿ç”¨JSXï¼ˆJavaScriptå’ŒXMLï¼‰çš„HTML-in-JavaScriptè¯­æ³•ã€‚è¯¥è¯­æ³•èƒ½æå‡ç¼–ç æ•ˆç‡ï¼Œæµè§ˆå™¨æ˜¯æ— æ³•ç›´æ¥è§£æJSXçš„ï¼Œé€šè¿‡Babelæˆ–Parcelä¹‹ç±»çš„å·¥å…·è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆæµè§ˆå™¨èƒ½è§£æçš„JSä»£ç ã€‚ Reactä¾èµ–Node.jsã€‚NodeåŒ…å«npmï¼ˆNodeç¨‹åºåŒ…ç®¡ç†å™¨ï¼‰å’Œnpxï¼ˆNodeç¨‹åºåŒ…è¿è¡Œå™¨ï¼‰ åˆ›å»ºReacté¡¹ç›® 1234#é»˜è®¤ä½¿ç”¨yarnnpx create-react-app moz-todo-react --use-npmcd moz-todo-reactnpm start é¡¹ç›®æ–‡ä»¶ç»“æ„123456789101112131415161718moz-todo-reactâ”œâ”€â”€ README.mdâ”œâ”€â”€ node_modulesâ”œâ”€â”€ package.jsonâ”œâ”€â”€ package-lock.jsonâ”œâ”€â”€ .gitignoreâ”œâ”€â”€ publicâ”‚ â”œâ”€â”€ favicon.icoâ”‚ â”œâ”€â”€ index.html #Reactå°†srcçš„ä»£ç åµŒå…¥åˆ°è¿™ä¸ªæ–‡ä»¶â”‚ â””â”€â”€ manifest.jsonâ””â”€â”€ src â”œâ”€â”€ App.css â”œâ”€â”€ App.js â”œâ”€â”€ App.test.js â”œâ”€â”€ index.css â”œâ”€â”€ index.js â”œâ”€â”€ logo.svg â””â”€â”€ serviceWorker.js Reactç¤ºä¾‹-ä»£åŠåˆ—è¡¨ å®˜æ–¹æ–‡æ¡£","tags":[{"name":"React","slug":"React","permalink":"http://airshu.github.io/tags/React/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"React","slug":"JavaScript/React","permalink":"http://airshu.github.io/categories/JavaScript/React/"},{"name":"åŸºç¡€çŸ¥è¯†","slug":"JavaScript/React/åŸºç¡€çŸ¥è¯†","permalink":"http://airshu.github.io/categories/JavaScript/React/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"}]},{"title":"Redux","date":"2023-12-24T13:26:04.130Z","path":"wiki/JavaScript/React/redux/","text":"äº†è§£å†å² Fluxï¼šhttps://www.ruanyifeng.com/blog/2016/01/flux.html åŸºæœ¬æ¦‚å¿µå’ŒAPIStoreStoreæ˜¯ä¿å­˜æ•°æ®çš„åœ°æ–¹ï¼Œä½ å¯ä»¥æŠŠå®ƒçœ‹æˆä¸€ä¸ªå®¹å™¨ã€‚æ•´ä¸ªåº”ç”¨åªèƒ½æœ‰ä¸€ä¸ªStoreã€‚ Reduxæä¾›createStoreè¿™ä¸ªå‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆStoreã€‚ 123456789import &#123; createStore &#125; from &#x27;redux&#x27;;const store = createStore(fn);store.getState()store.dispatch()store.subscribe() StateStoreå¯¹è±¡åŒ…å«æ‰€æœ‰æ•°æ®ã€‚å¦‚æœæƒ³å¾—åˆ°æŸä¸ªæ—¶ç‚¹çš„æ•°æ®ï¼Œå°±è¦å¯¹Storeç”Ÿæˆå¿«ç…§ã€‚è¿™ç§æ—¶ç‚¹çš„æ•°æ®é›†åˆï¼Œå°±å«åšStateã€‚ å½“å‰æ—¶åˆ»çš„Stateï¼Œå¯ä»¥é€šè¿‡store.getState()æ‹¿åˆ°ã€‚ 1234import &#123; createStore &#125; from &#x27;redux&#x27;;const store = createStore(fn);const state = store.getState(); Reduxè§„å®šï¼Œä¸€ä¸ªStateå¯¹åº”ä¸€ä¸ªViewã€‚åªè¦Stateç›¸åŒï¼ŒViewå°±ç›¸åŒã€‚ä½ çŸ¥é“Stateï¼Œå°±çŸ¥é“Viewæ˜¯ä»€ä¹ˆæ ·ï¼Œåä¹‹äº¦ç„¶ã€‚ ActionStateçš„å˜åŒ–ï¼Œä¼šå¯¼è‡´Viewçš„å˜åŒ–ã€‚ä½†æ˜¯ï¼Œç”¨æˆ·æ¥è§¦ä¸åˆ°Stateï¼Œåªèƒ½æ¥è§¦åˆ°Viewã€‚æ‰€ä»¥ï¼ŒStateçš„å˜åŒ–å¿…é¡»æ˜¯Viewå¯¼è‡´çš„ã€‚Actionå°±æ˜¯Viewå‘å‡ºçš„é€šçŸ¥ï¼Œè¡¨ç¤ºStateåº”è¯¥è¦å‘ç”Ÿå˜åŒ–äº†ã€‚ Actionæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å…¶ä¸­çš„typeå±æ€§æ˜¯å¿…é¡»çš„ï¼Œè¡¨ç¤ºActionçš„åç§°ã€‚å…¶ä»–å±æ€§å¯ä»¥è‡ªç”±è®¾ç½®ï¼Œç¤¾åŒºæœ‰ä¸€ä¸ªè§„èŒƒå¯ä»¥å‚è€ƒã€‚ 1234&#123; type: &#x27;ADD_TODO&#x27;, payload: &#x27;Learn Redux&#x27;&#125; Action CreatorViewè¦å‘é€å¤šå°‘ç§æ¶ˆæ¯ï¼Œå°±ä¼šæœ‰å¤šå°‘ç§Actionã€‚å¦‚æœéƒ½æ‰‹å†™ï¼Œä¼šå¾ˆéº»çƒ¦ã€‚å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥ç”ŸæˆActionï¼Œè¿™ä¸ªå‡½æ•°å°±å«Action Creatorã€‚ 12345678const ADD_TODO = &#x27;æ·»åŠ  TODO&#x27;;function addTodo (text) &#123; return &#123; type: ADD_TODO, text &#125;&#125; store.dispatch()store.dispatch()æ˜¯Viewå‘å‡ºActionçš„å”¯ä¸€æ–¹æ³•ã€‚ 1234567import &#123; createStore &#125; from &#x27;redux&#x27;;const store = createStore(fn);store.dispatch(&#123; type: &#x27;ADD_TODO&#x27;, payload: &#x27;Learn Redux&#x27;&#125;); ReducerStoreæ”¶åˆ°Actionä»¥åï¼Œå¿…é¡»ç»™å‡ºä¸€ä¸ªæ–°çš„Stateï¼Œè¿™æ ·Viewæ‰ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™ç§Stateçš„è®¡ç®—è¿‡ç¨‹å°±å«åšReducerã€‚ Reduceræ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—Actionå’Œå½“å‰Stateä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„Stateã€‚ Reducer å¿…éœ€ç¬¦åˆä»¥ä¸‹è§„åˆ™ï¼š ä»…ä½¿ç”¨ state å’Œ action å‚æ•°è®¡ç®—æ–°çš„çŠ¶æ€å€¼ ç¦æ­¢ç›´æ¥ä¿®æ”¹ stateã€‚å¿…é¡»é€šè¿‡å¤åˆ¶ç°æœ‰çš„ state å¹¶å¯¹å¤åˆ¶çš„å€¼è¿›è¡Œæ›´æ”¹çš„æ–¹å¼æ¥åš ä¸å¯å˜æ›´æ–°ï¼ˆimmutable updatesï¼‰ã€‚ ç¦æ­¢ä»»ä½•å¼‚æ­¥é€»è¾‘ã€ä¾èµ–éšæœºå€¼æˆ–å¯¼è‡´å…¶ä»–â€œå‰¯ä½œç”¨â€çš„ä»£ç  1234567891011121314const defaultState = 0;const reducer = (state = defaultState, action) =&gt; &#123; switch (action.type) &#123; case &#x27;ADD&#x27;: return state + action.payload; default: return state; &#125;&#125;;const state = reducer(1, &#123; type: &#x27;ADD&#x27;, payload: 2&#125;); store.subscribe()Storeå…è®¸ä½¿ç”¨store.subscribeæ–¹æ³•è®¾ç½®ç›‘å¬å‡½æ•°ï¼Œä¸€æ—¦Stateå‘ç”Ÿå˜åŒ–ï¼Œå°±è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚ 1234import &#123; createStore &#125; from &#x27;redux&#x27;;const store = createStore(fn);store.subscribe(listener); 123456789# å®‰è£…Redux Toolkitnpm install @reduxjs/toolkityarn add @reduxjs/toolkit#npx create-react-app my-app --template reduxnpx create-react-app my-app --template redux-typescript React ReduxReact Toolkitå‚è€ƒ https://redux-toolkit-cn.netlify.app/introduction/quick-start https://react-redux.js.org/introduction/getting-started","tags":[{"name":"JavaScript Redux","slug":"JavaScript-Redux","permalink":"http://airshu.github.io/tags/JavaScript-Redux/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"React","slug":"JavaScript/React","permalink":"http://airshu.github.io/categories/JavaScript/React/"}]},{"title":"å¼‚å¸¸åˆ†æ","date":"2023-12-24T13:26:04.081Z","path":"wiki/Flutter/æœªåˆ†ç±»/å¼‚å¸¸åˆ†æ/","text":"Crashæ–‡ä»¶ ç¬¦å·åŒ–iOS crashsdkæ–‡æ¡£æ˜¯ä»€ä¹ˆæ„æ€ è½¬è½½Symbolicating stack traces for engine crashesFlutter å¼•æ“å´©æºƒåˆ†ææ–¹æ³•ç®€ä»‹","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"rtw","date":"2023-12-24T13:26:04.080Z","path":"wiki/Flutter/å¼€æºåº“/rtw/","text":"https://pub.dev/packages/rfw rfwï¼ˆRemote Flutter Widgetsï¼‰åº“æ˜¯ä¸€ä¸ªç”¨äºåœ¨ Flutter åº”ç”¨ç¨‹åºä¸­æ¸²æŸ“è¿œç¨‹éƒ¨ä»¶æ ‘çš„åº“ã€‚å®ƒæä¾›äº†ä¸€ç§åŠ¨æ€åŠ è½½å’Œæ¸²æŸ“è¿œç¨‹éƒ¨ä»¶çš„æœºåˆ¶ï¼Œä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®è¿œç¨‹æ•°æ®æ¥æ„å»ºç”¨æˆ·ç•Œé¢ã€‚ rfw åº“çš„ä½œç”¨åŒ…æ‹¬ï¼š åŠ¨æ€åŠ è½½è¿œç¨‹éƒ¨ä»¶ï¼šrfw åº“å…è®¸åº”ç”¨ç¨‹åºä»è¿œç¨‹ä½ç½®åŠ¨æ€åŠ è½½éƒ¨ä»¶æ ‘çš„æè¿°ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥å°†éƒ¨ä»¶æ ‘çš„æè¿°å­˜å‚¨åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œå¹¶åœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶æ ¹æ®éœ€è¦åŠ è½½å’Œæ¸²æŸ“è¿™äº›éƒ¨ä»¶ã€‚ è¿œç¨‹æ•°æ®é©±åŠ¨çš„ç”¨æˆ·ç•Œé¢ï¼šé€šè¿‡ä½¿ç”¨ rfw åº“ï¼Œæ‚¨å¯ä»¥æ ¹æ®è¿œç¨‹æ•°æ®æ¥æ„å»ºç”¨æˆ·ç•Œé¢ã€‚æ‚¨å¯ä»¥å°†ç”¨æˆ·ç•Œé¢çš„æè¿°å­˜å‚¨åœ¨è¿œç¨‹ä½ç½®ï¼Œå¹¶åœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶æ ¹æ®è¿œç¨‹æ•°æ®æ¥åŠ¨æ€æ„å»ºå’Œæ›´æ–°ç”¨æˆ·ç•Œé¢ã€‚ æ”¯æŒåŠ¨æ€æ›´æ–°å’Œå˜åŒ–ï¼šrfw åº“æ”¯æŒåŠ¨æ€æ›´æ–°å’Œå˜åŒ–ã€‚å½“è¿œç¨‹éƒ¨ä»¶æ ‘æˆ–è¿œç¨‹æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ rfw åº“æ¥æ›´æ–°åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ï¼Œè€Œæ— éœ€é‡æ–°ç¼–è¯‘å’Œéƒ¨ç½²åº”ç”¨ç¨‹åºã€‚ çµæ´»çš„è¿œç¨‹éƒ¨ä»¶ç®¡ç†ï¼šrfw åº“æä¾›äº†ä¸€å¥—çµæ´»çš„è¿œç¨‹éƒ¨ä»¶ç®¡ç†æœºåˆ¶ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ rfw åº“æ¥ç®¡ç†è¿œç¨‹éƒ¨ä»¶çš„åŠ è½½ã€ç¼“å­˜å’Œæ›´æ–°ï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°é«˜æ•ˆçš„è¿œç¨‹éƒ¨ä»¶æ¸²æŸ“ã€‚","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"ã€Šæ¸è¡Œæ¸è¿œçš„çº¢åˆ©ã€‹è¯»ä¹¦ç¬”è®°","date":"2023-08-19T09:57:33.298Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ¸è¡Œæ¸è¿œçš„çº¢åˆ©/","text":"","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"Nexusç¬”è®°","date":"2023-08-19T09:57:33.298Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/Nexusç¬”è®°/","text":"Nexusä½œä¸ºç§æœ‰ä»“åº“ï¼Œå¯ä»¥ç”¨æ¥å­˜å‚¨jarã€aarã€jsåº“ï¼Œä¸€èˆ¬å…¬å¸å†…å¯ä»¥æ­å»ºä¸€ä¸ªç”¨æ¥å­˜å‚¨å…±ç”¨çš„åº“ï¼Œä¸€æ¥å¯ä»¥æå‡åŒæ­¥æ—¶é—´ï¼Œä¸€æ¥ç»Ÿä¸€ç®¡ç†åŸºç¡€åº“ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚ æ­å»ºç¯å¢ƒ123456789101112131415161718192021222324# ä¸‹è½½å®‰è£…åŒ…https://www.sonatype.com/products/sonatype-nexus-oss# è§£å‹åˆ°$HOME/toolsæ–‡ä»¶å¤¹ä¸‹# è®¾ç½®è½¯é“¾ls -s /Users/liuyunxia/tools/nexus-3.55.0-01-mac/nexus-3.55.0-01 /Users/liuyunxia/tools/nexus-3.55.0-01-mac/nexus-latest# å¾€ ~/.bash_profile æ–‡ä»¶æ·»åŠ å¦‚ä¸‹ä¸¤è¡Œexport NEXUS_HOME=/Users/liuyunxia/tools/nexus-3.55.0-01-mac/nexus-latestPATH=$PATH:$NEXUS_HOME/bin# æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä½¿æ·»åŠ åˆ° ~/.profile æ–‡ä»¶çš„é…ç½®ç”Ÿæ•ˆsource ~/.bash_profilenexus startnexus stopnexus restart æ–°å»ºnpmç§æœ‰ä»“åº“ ä½¿ç”¨ Maven Publish æ’ä»¶ ä½¿ç”¨nexus3é…ç½®npmç§æœ‰ä»“åº“","tags":[{"name":"mac","slug":"mac","permalink":"http://airshu.github.io/tags/mac/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"rebase","date":"2023-08-19T09:57:33.298Z","path":"wiki/æŠ€æœ¯å¼€å‘/Git/rebase/","text":"å½“æ‰§è¡Œrebaseæ“ä½œæ—¶ï¼Œgitä¼šä»ä¸¤ä¸ªåˆ†æ”¯çš„å…±åŒç¥–å…ˆå¼€å§‹æå–å¾…å˜åŸºåˆ†æ”¯ä¸Šçš„ä¿®æ”¹ï¼Œç„¶åå°†å¾…å˜åŸºåˆ†æ”¯æŒ‡å‘åŸºåˆ†æ”¯çš„æœ€æ–°æäº¤ï¼Œæœ€åå°†åˆšæ‰æå–çš„ä¿®æ”¹åº”ç”¨åˆ°åŸºåˆ†æ”¯çš„æœ€æ–°æäº¤çš„åé¢ã€‚ åœ¨æˆ‘ä»¬çš„å®é™…æ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šå‘ç°è¦å¯¹å¤šæ¬¡commitè¿›è¡Œå†²çªå¤„ç†å°±æ˜¯å› ä¸ºè¦ç”Ÿæˆæ–°çš„æäº¤è®°å½• åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œrebaseä¸€èˆ¬ç”¨äºåˆå¹¶ä¸»åˆ†æ”¯ä»£ç åˆ°å¼€å‘åˆ†æ”¯ å‚è€ƒ git rebaseè¯¦è§£ï¼ˆå›¾è§£+æœ€ç®€å•ç¤ºä¾‹ï¼Œä¸€æ¬¡å°±æ‡‚ï¼‰ åˆ†æ”¯çš„åˆå¹¶ git-rebase","tags":[{"name":"Git","slug":"Git","permalink":"http://airshu.github.io/tags/Git/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Git","slug":"æŠ€æœ¯å¼€å‘/Git","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Git/"}]},{"title":"Gitä½¿ç”¨æŠ€å·§","date":"2023-08-19T09:57:33.297Z","path":"wiki/æŠ€æœ¯å¼€å‘/Git/Gitä½¿ç”¨æŠ€å·§/","text":"amendå°†æœ¬åœ°æäº¤å’Œæœ€åä¸€æ¬¡æäº¤åˆå¹¶æˆä¸€ä¸ªæ–°çš„æäº¤ 1git commit --amend rebase äº¤äº’å¼å˜åŸº9ä½¿ç”¨åœºæ™¯ è°ƒæ•´æäº¤è®°å½•çš„é¡ºåºï¼ˆé€šè¿‡é¼ æ ‡æ‹–æ”¾æ¥å®Œæˆï¼‰ åˆ é™¤ä½ ä¸æƒ³è¦çš„æäº¤ï¼ˆé€šè¿‡åˆ‡æ¢ pick çš„çŠ¶æ€æ¥å®Œæˆï¼Œå…³é—­å°±æ„å‘³ç€ä½ ä¸æƒ³è¦è¿™ä¸ªæäº¤è®°å½•ï¼‰ åˆå¹¶æäº¤ï¼Œå…è®¸ä½ æŠŠå¤šä¸ªæäº¤è®°å½•åˆå¹¶æˆä¸€ä¸ª 123456789101112131415161718192021222324252627282930# Commands:# p, pick &lt;commit&gt; = use commit# r, reword &lt;commit&gt; = use commit, but edit the commit message# e, edit &lt;commit&gt; = use commit, but stop for amending# s, squash &lt;commit&gt; = use commit, but meld into previous commit# f, fixup [-C | -c] &lt;commit&gt; = like &quot;squash&quot; but keep only the previous# commit&#x27;s log message, unless -C is used, in which case# keep only this commit&#x27;s message; -c is same as -C but# opens the editor# x, exec &lt;command&gt; = run command (the rest of the line) using shell# b, break = stop here (continue rebase later with &#x27;git rebase --continue&#x27;)# d, drop &lt;commit&gt; = remove commit# l, label &lt;label&gt; = label current HEAD with a name# t, reset &lt;label&gt; = reset HEAD to a label# m, merge [-C &lt;commit&gt; | -c &lt;commit&gt;] &lt;label&gt; [# &lt;oneline&gt;]# . create a merge commit using the original merge commit&#x27;s# . message (or the oneline, if no original merge commit was# . specified); use -c &lt;commit&gt; to reword the commit message## These lines can be re-ordered; they are executed from top to bottom.## If you remove a line here THAT COMMIT WILL BE LOST.## However, if you remove everything, the rebase will be aborted.## åˆå¹¶æœ€è¿‘4æ¡æäº¤è®°å½•ï¼Œ -i è¡¨ç¤ºäº¤äº’ç•Œé¢git rebase -i HEAD~4 å‘½ä»¤å‚æ•°p, pick &#x3D; use commitpickï¼Œç®€å†™pï¼Œæ„æ€æ˜¯ä½¿ç”¨commitã€‚git-rebaseå†…çš„commitsé»˜è®¤éƒ½æ˜¯pickå‘½ä»¤ï¼Œæ„æ€æ˜¯é€‰æ‹©è¿™ä¸ªcommitï¼Œä¸éœ€è¦ä»»ä½•æ”¹åŠ¨ r, reword &#x3D; use commit, but edit the commit messagereword, ç®€å†™rï¼Œæ„æ€æ˜¯ä½¿ç”¨commitï¼Œä½†æ˜¯éœ€è¦ç¼–è¾‘ï¼ˆä¿®æ”¹ï¼‰commit messageã€‚ e, edit &#x3D; use commit, but stop for amendingeditï¼Œç®€å†™eï¼Œæ„æ€æ˜¯å¯ä»¥æš‚æ—¶åœæ­¢rebaseï¼Œæ­¤æ—¶å…è®¸ä¿®æ”¹æ–‡ä»¶å†…å®¹ã€å…è®¸ä¿®æ”¹commit messageï¼Œç„¶åç»§ç»­rebaseã€‚ s, squash &#x3D; use commit, but meld into previous commitsquashï¼Œç®€å†™sï¼Œæ„æ€æ˜¯ä½¿ç”¨commitï¼Œä½†æ˜¯æŠŠä¿®æ”¹çš„å†…å®¹èå…¥åˆ°ä¸Šä¸€ä¸ªcommitï¼Œè¿™ä¸ªå‘½ä»¤ç”¨æ¥åˆå¹¶å¤šä¸ªcommitã€‚ f, fixup &#x3D; like â€œsquashâ€, but discard this commitâ€™s log messagefixupï¼Œ ç®€å†™fï¼Œä¸squashæ„æ€ä¸€æ ·ï¼Œä½†æ˜¯ç›´æ¥ä¸¢å¼ƒcommit messageã€‚ x, exec &#x3D; run command(the rest of the line) using shellexecï¼Œç®€å†™xï¼Œæ„æ€æ˜¯åœ¨rebaseè¿‡ç¨‹ä¸­æ‰§è¡Œè„šæœ¬å‘½ä»¤ã€‚ d, drop &#x3D; remove commitdropï¼Œç®€å†™dï¼Œæ„æ€æ˜¯ç§»é™¤commit å‚è€ƒ Android Studio å®æˆ˜ git-rebase äº¤äº’å¼å˜åŸºé«˜é˜¶æŠ€å·§","tags":[{"name":"Git","slug":"Git","permalink":"http://airshu.github.io/tags/Git/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Git","slug":"æŠ€æœ¯å¼€å‘/Git","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Git/"}]},{"title":"Gitä½¿ç”¨ç¬”è®°","date":"2023-08-19T09:57:33.297Z","path":"wiki/æŠ€æœ¯å¼€å‘/Git/Gitä½¿ç”¨ç¬”è®°/","text":"åŸºæœ¬æ¦‚å¿µ Working Space&#x2F;Working Directoryï¼šå·¥ä½œåŒº&#x2F;å·¥ä½œç›®å½•ï¼Œå¹³æ—¶å­˜æ”¾é¡¹ç›®ä»£ç çš„åœ°æ–¹ Index&#x2F;Stageï¼šæš‚å­˜åŒºï¼Œç”¨äºä¸´æ—¶å­˜æ”¾ä½ çš„æ”¹åŠ¨ï¼Œäº‹å®ä¸Šå®ƒåªæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜å³å°†æäº¤åˆ°æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯ Local Repositoryï¼šæœ¬åœ°ä»“åº“ Stashï¼šç”¨äºä¿å­˜å·¥ä½œåŒºçš„ä¸´æ—¶çŠ¶æ€ï¼Œæ–¹ä¾¿åç»­æ¢å¤ Remote Repositoryï¼šè¿œç¨‹ä»“åº“ åŸºæœ¬å‘½ä»¤123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990git init # è¾“å‡º Initialized empty Git repository in .git/ å»ºç«‹ç©ºä»“åº“git add . #æ·»åŠ åˆ°ä»“åº“ æŠŠæ‰€æœ‰ä¿®æ”¹æäº¤åˆ°æš‚å­˜åŒº(Stage)git commit -m &quot;æäº¤æ³¨é‡Š&quot; #æäº¤åˆ°ä»“åº“ æŠŠæš‚å­˜åŒºçš„æ‰€æœ‰ä¿®æ”¹æäº¤åˆ°åˆ†æ”¯git push remote_branch local_branch #å°†æœ¬åœ°åº“æäº¤åˆ°è¿œç¨‹åº“git status #æŸ¥çœ‹ä¿®æ”¹çŠ¶æ€git log #æ˜¾ç¤ºä»æœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—git log -2ï¼š #æŸ¥çœ‹æœ€è¿‘å‡ æ¡è®°å½•git clone git@github.com:xxx/gitskills.git #å…‹éš†ä»“åº“#checkout æ£€æŸ¥å·¥ä½œç›®å½•ä»£ç ä¸æœ¬åœ°ä»“åº“ä¸­çš„ä»£ç çš„å·®å¼‚git checkout -b dev #åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ï¼Œç›¸å½“äºä¸‹é¢çš„ä¸¤å¥git branch experimental #åˆ›å»ºåˆ†æ”¯git checkout experimental #åˆ‡æ¢åˆ°åˆ†æ”¯git fetch -u origin master #æ‹‰å–è¿œç¨‹ä»“åº“åä¸ºoriginçš„masteråˆ†æ”¯ä»£ç åˆ°æœ¬åœ°ä»“åº“ï¼Œå¹¶ä¸ä¿®æ”¹æœ¬åœ°å·¥ä½œç›®å½•çš„ä»£ç ï¼Œå¦‚æœè¦ä¿®æ”¹ï¼Œåˆ™è¿›è¡Œgit mergeå˜æ›´åˆå¹¶#merge å°†è¿œç¨‹ä»“åº“çš„å˜æ›´ï¼Œæ›´æ–°åˆ°æœ¬åœ°å·¥ä½œç›®å½•ä¸­git merge åˆ†æ”¯å #åˆå¹¶åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ä¸Š#git pullç›¸å½“äºgit fetch + git merge#git pull --rebase ç›¸å½“äº git fetch + git rebase#remote ç”¨äºç®¡ç†è¿œç¨‹ä»“åº“git remote -v #æŸ¥çœ‹ç°æœ‰çš„è¿œç¨‹ä»“åº“#æ·»åŠ ä¸€ä¸ªè¿œç¨‹ä»“åº“git remote add &lt;ä»“åº“åå­—&gt; &lt;ä»“åº“çš„URL&gt;git remote add pb git://github.com/paulboone/ticgit.git #æ·»åŠ ä¸€ä¸ªè¿œç¨‹ä»“åº“ å¹¶ç”¨pbå‘½åã€‚git remote rm paul #åˆ é™¤è¿œç¨‹ä»“åº“git remote rename pb paul #é‡åè¿œç¨‹ä»“åº“ æœ¬åœ°ä¹Ÿä¼šè·Ÿç€ä¿®æ”¹git remote set-url origin xxx.git # ä¿®æ”¹è¿œç¨‹ä»“åº“#git push -u &lt;è¿œç¨‹ä»“åº“åå­—&gt; &lt;è¿œç¨‹ä»“åº“çš„æŸä¸€åˆ†æ”¯åå­—&gt;git push -u test mater #å°†æœ¬åœ°ä»“åº“çš„å˜æ›´æ¨é€è¿œç¨‹ä»“åº“çš„masteråˆ†æ”¯git push origin æ ‡ç­¾å #æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“git push origin --tags #æ¨é€æ‰€æœ‰æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“git push origin :refs/tags/æ ‡ç­¾å #ä»è¿œç¨‹ä»“åº“ä¸­åˆ é™¤æ ‡ç­¾git push origin --delete &lt;branchname&gt; #åˆ é™¤è¿œç¨‹åˆ†æ”¯git push origin :&lt;branchName&gt; #åˆ é™¤è¿œç¨‹åˆ†æ”¯#æš‚å­˜æ“ä½œï¼šgit stash æš‚å­˜å½“å‰ä¿®æ”¹git stash apply æ¢å¤æœ€è¿‘çš„ä¸€æ¬¡æš‚å­˜git stash pop æ¢å¤æš‚å­˜å¹¶åˆ é™¤æš‚å­˜è®°å½•git stash list æŸ¥çœ‹æš‚å­˜åˆ—è¡¨git stash drop æš‚å­˜å(ä¾‹ï¼šstash@&#123;0&#125;) ç§»é™¤æŸæ¬¡æš‚å­˜git stash clear æ¸…é™¤æš‚å­˜#å›é€€æ“ä½œï¼š#GitæœåŠ¡æœ‰ä¸€ä¸ªå«HEADçš„ç‰ˆæœ¬æŒ‡é’ˆï¼Œå½“ç”¨æˆ·ç”³è¯·è¿˜åŸæ•°æ®æ—¶ï¼Œå…¶å®å°±æ˜¯å°†HEADæŒ‡é’ˆæŒ‡å‘åˆ°æŸä¸ªç‰¹å®šçš„æäº¤ç‰ˆæœ¬ã€‚#git reset é€šè¿‡æŠŠåˆ†æ”¯è®°å½•å›é€€å‡ ä¸ªæäº¤è®°å½•æ¥å®ç°æ’¤é”€æ”¹åŠ¨ã€‚ä½ å¯ä»¥å°†è¿™æƒ³è±¡æˆâ€œæ”¹å†™å†å²â€ã€‚git reset å‘ä¸Šç§»åŠ¨åˆ†æ”¯ï¼ŒåŸæ¥æŒ‡å‘çš„æäº¤è®°å½•å°±è·Ÿä»æ¥æ²¡æœ‰æäº¤è¿‡ä¸€æ ·ã€‚åœ¨resetåï¼Œ C2 æ‰€åšçš„å˜æ›´è¿˜åœ¨ï¼Œä½†æ˜¯å¤„äºæœªåŠ å…¥æš‚å­˜åŒºçŠ¶æ€ã€‚#è™½ç„¶åœ¨ä½ çš„æœ¬åœ°åˆ†æ”¯ä¸­ä½¿ç”¨ git reset å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯è¿™ç§â€œæ”¹å†™å†å²â€çš„æ–¹æ³•å¯¹å¤§å®¶ä¸€èµ·ä½¿ç”¨çš„è¿œç¨‹åˆ†æ”¯æ˜¯æ— æ•ˆçš„å“¦ï¼#ä¸ºäº†æ’¤é”€æ›´æ”¹å¹¶åˆ†äº«ç»™åˆ«äººï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ git revertã€‚æ–°æäº¤è®°å½• C2&#x27; å¼•å…¥äº†æ›´æ”¹ â€”â€” è¿™äº›æ›´æ”¹åˆšå¥½æ˜¯ç”¨æ¥æ’¤é”€ C2 è¿™ä¸ªæäº¤çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ C2&#x27; çš„çŠ¶æ€ä¸ C1 æ˜¯ç›¸åŒçš„ã€‚git reset --hard HEAD^ #å›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬git reset --hard ahdhs1(commit_id) #å›é€€åˆ°æŸä¸ªç‰ˆæœ¬git checkout -- file #æ’¤é”€ä¿®æ”¹çš„æ–‡ä»¶(å¦‚æœæ–‡ä»¶åŠ å…¥åˆ°äº†æš‚å­˜åŒºï¼Œåˆ™å›é€€åˆ°æš‚å­˜åŒºçš„ï¼Œå¦‚æœæ–‡ä»¶åŠ å…¥åˆ°äº†ç‰ˆæœ¬åº“ï¼Œåˆ™è¿˜åŸè‡³åŠ å…¥ç‰ˆæœ¬åº“ä¹‹åçš„çŠ¶æ€)git reset HEAD file #æ’¤å›æš‚å­˜åŒºçš„æ–‡ä»¶ä¿®æ”¹åˆ°å·¥ä½œåŒºgit revert HEAD#æ ‡ç­¾æ“ä½œï¼š#tagçš„ä½œç”¨æ˜¯æ–¹ä¾¿ç”¨æˆ·å›æ»šæ“ä½œï¼Œåªéœ€è¦è®°ä½tagçš„åå­—å°±èƒ½è¿…é€Ÿå›æ»šgit tag #åˆ—å‡ºæ‰€æœ‰æ ‡ç­¾åˆ—è¡¨ï¼Œå¯ä»¥æŒ‰ç…§æ ‡ç­¾è¿›è¡Œcheckoutgit tag æ ‡ç­¾å #æ·»åŠ æ ‡ç­¾(é»˜è®¤å¯¹å½“å‰ç‰ˆæœ¬)git tag æ ‡ç­¾å commit_id #å¯¹æŸä¸€æäº¤è®°å½•æ‰“æ ‡ç­¾git tag -a æ ‡ç­¾å -m &#x27;æè¿°&#x27; #åˆ›å»ºæ–°æ ‡ç­¾å¹¶å¢åŠ å¤‡æ³¨git show æ ‡ç­¾å #æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯git tag -d æ ‡ç­¾å #åˆ é™¤æœ¬åœ°æ ‡ç­¾#git rmæäº¤åˆ é™¤æ–‡ä»¶çš„å˜æ›´åˆ°æš‚å­˜åŒºgit diff test.txt æœ¬åœ°å·¥ä½œç›®å½•ä¸­åˆ°æ–‡ä»¶ä¸æœ¬åœ°ä»“åº“ä¸­çš„æ–‡ä»¶å¯¹æ¯”# æ—¶å…‰æœºï¼ŒæŸ¥çœ‹æäº¤è®°å½•git reflog # å–æ¶ˆxxxçš„ä¿®æ”¹å†…å®¹git restore xxx Gitåˆ†æ”¯ç®¡ç†masteråˆ†æ”¯ä¸€èˆ¬ç”¨äºå‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œdevåˆ†æ”¯ç”¨äºå¼€å‘ï¼Œæ¯ä¸ªäººä»devåˆ†æ”¯åˆ›å»ºè‡ªå·±çš„ä¸ªäººåˆ†æ”¯ï¼Œå¼€å‘å®Œåˆå¹¶åˆ°devåˆ†æ”¯ï¼Œæœ€ååˆå¹¶åˆ°masteråˆ†æ”¯ã€‚ 123456789101112git branch æŸ¥çœ‹æ‰€æœ‰å·²å­˜åœ¨çš„åˆ†æ”¯git branch -a æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯git branch -v æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯çš„æœ€åä¸€æ¬¡æ“ä½œgit branch -vv æŸ¥çœ‹å½“å‰åˆ†æ”¯git brabch -b åˆ†æ”¯å origin/åˆ†æ”¯å //åˆ›å»ºè¿œç¨‹åˆ†æ”¯åˆ°æœ¬åœ°git branch --merged //æŸ¥çœ‹åˆ«çš„åˆ†æ”¯å’Œå½“å‰åˆ†æ”¯åˆå¹¶è¿‡çš„åˆ†æ”¯git branch --no-merged //æŸ¥çœ‹æœªä¸å½“å‰åˆ†æ”¯åˆå¹¶çš„åˆ†æ”¯git branch -d xxx åˆ é™¤æœ¬åœ°åˆ†æ”¯git branch -D crazy-idea å¼ºåˆ¶åˆ é™¤åˆ†æ”¯git merge åŠŸèƒ½1 #åˆå¹¶åŠŸèƒ½1åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯git branch -d åŠŸèƒ½1 # åˆ é™¤åŠŸèƒ½1åˆ†æ”¯ï¼ˆå½“å‰ä¸èƒ½åœ¨åŠŸèƒ½1åˆ†æ”¯ã€åˆ é™¤çš„æ˜¯æœ¬åœ°åˆ†æ”¯ï¼‰ gitignoreæ–‡ä»¶ç”¨æ¥å­˜å‚¨ä¸éœ€è¦è¿›è¡Œç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶ æ–‡ä»¶åŒ¹é…è§„åˆ™12345*.log # è¡¨ç¤ºå¿½ç•¥é¡¹ç›®ä¸­æ‰€æœ‰ä»¥.logç»“å°¾çš„æ–‡ä»¶123?.log # å¿½ç•¥æ‰€æœ‰ä»¥123åŠ ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œä¸”ä»¥.logç»“å°¾çš„æ–‡ä»¶/error.log # å¿½ç•¥æ ¹ç›®å½•ä¸‹çš„error.logæ–‡ä»¶**/java/ # å¿½ç•¥æ‰€æœ‰javaç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶!/error.log # è¡¨ç¤ºåœ¨å‰é¢çš„åŒ¹é…è§„åˆ™ä¸­ï¼Œè¢«å¿½ç•¥äº†çš„æ–‡ä»¶ï¼Œä½ ä¸æƒ³å®ƒè¢«å¿½ç•¥ï¼Œé‚£ä¹ˆå°±å¯ä»¥åœ¨æ–‡ä»¶å‰é¢åŠ å¹å· æ‹‰å–ä½“ç§¯å¾ˆå¤§çš„ä»“åº“12345678910111213141516git clone --depth 1 ä»“åº“åœ°å€git fetch --unshallow#ä»¥ä¸Šæ–¹å¼åªæœ‰ä¸»åˆ†æ”¯#æ‹‰å–æ‰€æœ‰åˆ†æ”¯git fetch -all#æ‹‰å–æŸä¸€ä¸ªåˆ†æ”¯git branch -agit remote set-branches origin &#x27;è¿œç¨‹åˆ†æ”¯åç§°â€™git fetch --depth 1 origin è¿œç¨‹åˆ†æ”¯åç§°git checkout â€˜è¿œç¨‹åˆ†æ”¯åç§°â€™ ä»“åº“ä¹‹é—´çš„è¿ç§»æ•´ä¸ªä»“åº“è¿ç§»123git clone --bare æ—§ä»“åº“åœ°å€git push --mirror æ–°ä»“åº“åœ°å€ è¿ç§»ä¸€ä¸ªåˆ†æ”¯12git remote add æœ¬åœ°åˆ†æ”¯ æ–°ä»“åº“åœ°å€ //å…³è”è¿œç¨‹åˆ†æ”¯git push è¿œç¨‹åˆ†æ”¯ æœ¬åœ°åˆ†æ”¯ //æäº¤åˆ†æ”¯ SourceTreeCould not read from remote repositoryè§£å†³åŠæ³•12345cd ~/.ssh# ç¡®è®¤å°†å…¬é’¥æ·»åŠ åˆ°æœåŠ¡å™¨# éªŒè¯ssh -T git@github.comssh-add id-rsa Sourcetreeä½¿ç”¨Permission deniedé”™è¯¯1234567git@github.com: Permission denied (publickey).fatal: Could not read from remote repository.Please make sure you have the correct access rightsand the repository exists. Macæ¯æ¬¡é‡å¯ä¹‹åå°±æ— æ³•åœ¨Sourcetreeè¿æ¥æœåŠ¡å™¨äº†ï¼ŒåŸå› æ˜¯ç§é’¥æ²¡æœ‰æ·»åŠ åˆ°é’¥åŒ™é“¾ä¸­ï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12345678910111213141516#ssh-addå‚æ•°-Dï¼šåˆ é™¤ssh-agentä¸­çš„æ‰€æœ‰å¯†é’¥.-dï¼šä»ssh-agentä¸­çš„åˆ é™¤å¯†é’¥-e pkcs11ï¼šåˆ é™¤PKCS#11å…±äº«åº“pkcs1æä¾›çš„é’¥åŒ™ã€‚-s pkcs11ï¼šæ·»åŠ PKCS#11å…±äº«åº“pkcs1æä¾›çš„é’¥åŒ™ã€‚-Lï¼šæ˜¾ç¤ºssh-agentä¸­çš„å…¬é’¥-lï¼šæ˜¾ç¤ºssh-agentä¸­çš„å¯†é’¥-t lifeï¼šå¯¹åŠ è½½çš„å¯†é’¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶ssh-agentå°†è‡ªåŠ¨å¸è½½å¯†é’¥-Xï¼šå¯¹ssh-agentè¿›è¡Œè§£é”-xï¼šå¯¹ssh-agentè¿›è¡ŒåŠ é”ssh-add -K !/.ssh/id_rsa#æŸ¥çœ‹ssh-agentä¸­çš„å¯†é’¥ssh-add -l ç§»åŠ¨HEAD12345678# åˆ‡æ¢åˆ°æŒ‡å®šidgit checkout commit_id# æŒ‡å®šæäº¤git branch -f branch_name HEAD~1# ä¸Šä¸€ä¸ªæäº¤git branch -f branch_name HEAD^","tags":[{"name":"Git","slug":"Git","permalink":"http://airshu.github.io/tags/Git/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Git","slug":"æŠ€æœ¯å¼€å‘/Git","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Git/"}]},{"title":"cherry-pick","date":"2023-08-19T09:57:33.297Z","path":"wiki/æŠ€æœ¯å¼€å‘/Git/cherry-pick/","text":"cherry-pickåƒæ‘˜æ¡ƒå­ä¸€æ ·ï¼Œå¯ä»¥é€‰æ‹©å…·ä½“æŸä¸ªcommitè®°å½•åˆ°å½“å‰åˆ†æ”¯ 12# é€‰æ‹©ä¸¤ä¸ªæäº¤è®°å½•åˆ°æœ¬åˆ†æ”¯git cherry-pick commit_1 commit_2","tags":[{"name":"Git","slug":"Git","permalink":"http://airshu.github.io/tags/Git/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Git","slug":"æŠ€æœ¯å¼€å‘/Git","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Git/"}]},{"title":"merge","date":"2023-08-19T09:57:33.297Z","path":"wiki/æŠ€æœ¯å¼€å‘/Git/merge/","text":"mergeç”¨äºåˆ†æ”¯çš„åˆå¹¶ 123git merge branch_name å‚æ•°-ffï¼šå¿«é€Ÿåˆå¹¶ â€“ff-onlyï¼šåªæœ‰èƒ½å¿«é€Ÿåˆå¹¶çš„æ—¶å€™æ‰åˆå¹¶â€“no-ffï¼šä¸ä½¿ç”¨å¿«é€Ÿåˆå¹¶ï¼Œç”Ÿæˆä¸€æ¬¡æ–°çš„æäº¤è®°å½• å¦‚æœè®¾ç½®äº†æ­¤å‚æ•°ï¼Œå³ä½¿å¯ä»¥å¿«é€Ÿåˆå¹¶ï¼Œä¹Ÿä¼šç”Ÿæˆä¸€æ¬¡æ–°çš„æäº¤è®°å½• â€“squashï¼šå‹ç¼©åˆå¹¶ï¼Œå°†å¾…åˆå¹¶çš„åˆ†æ”¯çš„å†…å®¹å‹ç¼©æˆä¸€ä¸ªæ–°çš„æäº¤åˆå¹¶è¿›æ¥æ­¤ç§æ–¹å¼ç”¨äºå°†å¤šä¸ªæäº¤è®°å½•åˆå¹¶æˆä¸€ä¸ªæäº¤è®°å½•ï¼Œæ¯”å¦‚è¿›è¡Œgerrit reviewæ—¶ä½¿ç”¨","tags":[{"name":"Git","slug":"Git","permalink":"http://airshu.github.io/tags/Git/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Git","slug":"æŠ€æœ¯å¼€å‘/Git","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Git/"}]},{"title":"Macæ–°ç³»ç»Ÿç¯å¢ƒé…ç½®","date":"2023-08-19T09:57:33.296Z","path":"wiki/å·¥å…·è½¯ä»¶/Mac/Macæ–°ç³»ç»Ÿç¯å¢ƒé…ç½®/","text":"å®‰è£…å¿…å¤‡è½¯ä»¶å®‰è£…AlfredåŸºæœ¬é…ç½® é…ç½®å¸¸ç”¨æ–‡æœ¬ å®‰è£…Sublime Textå®‰è£…å®‰è£…å¿…å¤‡workflowå®‰è£…TinyCalå®‰è£…Commander Oneå®‰è£…Firefoxå®‰è£…ClashXå®‰è£…BetterZipå®‰è£…LX Musicå®‰è£…å¼€å‘ç¯å¢ƒå¼€å‘IDE Android Studio XCode Pycharm Visual Studio Code Postman å®‰è£…iterm+oh my zshå®‰è£…Rubyç‰ˆæœ¬ç®¡ç†ä½¿ç”¨rbenv å®‰è£…Pythoç‰ˆæœ¬ç®¡ç†ä½¿ç”¨pyenv å®‰è£…Javaç‰ˆæœ¬ç®¡ç†ä½¿ç”¨jenv å®‰è£…Flutterç‰ˆæœ¬ç®¡ç†ä½¿ç”¨fvm","tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"æ»‘åŠ¨åŸç†","date":"2023-08-19T09:57:33.295Z","path":"wiki/Flutter/æºç åˆ†æ/æ»‘åŠ¨åŸç†/","text":"ç”¨åˆ°çš„API Viewportï¼šè§†çª—ï¼Œæ»‘åŠ¨å¯ä»¥çœ‹è§çš„åŒºåŸŸ Scrollableï¼šå¯¹æ‰‹åŠ¿çš„å¤„ç†ï¼Œå®ç°æ»‘åŠ¨æ•ˆæœ Sliverï¼šç”¨äºåœ¨Viewporté‡Œé¢å¸ƒå±€å’Œæ¸²æŸ“å†…å®¹ ScrollPosition ScrollDragController ScrollConfiguration ScrollBehavior ScrollActivity ScrollPhysicsï¼šå¯æ»šåŠ¨æ§ä»¶çš„ç‰©ç†ç‰¹æ€§ BouncingScrollPhysics ï¼šå…è®¸æ»šåŠ¨è¶…å‡ºè¾¹ç•Œï¼Œä½†ä¹‹åå†…å®¹ä¼šåå¼¹å›æ¥ã€‚ ClampingScrollPhysics ï¼š é˜²æ­¢æ»šåŠ¨è¶…å‡ºè¾¹ç•Œï¼Œå¤¹ä½ ã€‚ AlwaysScrollableScrollPhysics ï¼šå§‹ç»ˆå“åº”ç”¨æˆ·çš„æ»šåŠ¨ã€‚ NeverScrollableScrollPhysics ï¼šä¸å“åº”ç”¨æˆ·çš„æ»šåŠ¨ã€‚ åœ¨Flutterä¸­ï¼š ListViewä½¿ç”¨çš„æ˜¯SliverFixedExtentListæˆ–SliverList GridViewä½¿ç”¨çš„æ˜¯SliverGrid PageViewä½¿ç”¨çš„æ˜¯SliverFillViewport SingleChildScrollViewå†…å®¹æ˜¯å•ä¸ªRenderObject æ»‘åŠ¨è¿‡ç¨‹ setCanDragæ­£å¼æ¿€æ´» Scrollableä¸­DragGestureRecognizerç›‘å¬å„ç§äº‹ä»¶onDown,å¯¹åº”ScrollableStateä¸­_handleDragDownå¼€å§‹ï¼Œå¯¹åº”ScrollPositionçš„hold ScrollableStateä¸­_handleDragStartï¼Œå¯¹åº”ScrollPositionçš„dragï¼Œæ„é€ ScrollDragControllerï¼Œåˆ‡æ¢çŠ¶æ€ ScrollableStateä¸­_handleDragUpdateï¼Œå¯¹åº”Dragçš„updateï¼Œæ‰‹æŒ‡æ»‘åŠ¨å“åº”ï¼Œ ScrollableStateçš„_handleDragUpdateï¼Œå¯¹åº”Dragçš„onEndï¼Œ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171class ScrollableState &#123; // å¯¹åº”onDownï¼Œ void _handleDragDown(DragDownDetails details) &#123; assert(_drag == null); assert(_hold == null); _hold = position.hold(_disposeHold);//ScrollPositionçš„holdæ–¹æ³•åˆ›å»ºäº†HoldScrollActivity &#125; void _handleDragStart(DragStartDetails details) &#123; // It&#x27;s possible for _hold to become null between _handleDragDown and // _handleDragStart, for example if some user code calls jumpTo or otherwise // triggers a new activity to begin. assert(_drag == null); _drag = position.drag(details, _disposeDrag); assert(_drag != null); assert(_hold == null); &#125; void _handleDragUpdate(DragUpdateDetails details) &#123; // _drag might be null if the drag activity ended and called _disposeDrag. assert(_hold == null || _drag == null); _drag?.update(details);//ScrollDragControllerè¿›è¡Œupdate &#125; void _handleDragEnd(DragEndDetails details) &#123; // _drag might be null if the drag activity ended and called _disposeDrag. assert(_hold == null || _drag == null); _drag?.end(details); assert(_drag == null); &#125;&#125;class ScrollPositionWithSingleContext &#123; @override ScrollHoldController hold(VoidCallback holdCancelCallback) &#123; final double previousVelocity = activity!.velocity; final HoldScrollActivity holdActivity = HoldScrollActivity( delegate: this, onHoldCanceled: holdCancelCallback, ); beginActivity(holdActivity); _heldPreviousVelocity = previousVelocity; return holdActivity; &#125; ScrollDragController? _currentDrag; @override Drag drag(DragStartDetails details, VoidCallback dragCancelCallback) &#123; final ScrollDragController drag = ScrollDragController( delegate: this, details: details, onDragCanceled: dragCancelCallback, carriedVelocity: physics.carriedMomentum(_heldPreviousVelocity), motionStartDistanceThreshold: physics.dragStartDistanceMotionThreshold, ); beginActivity(DragScrollActivity(this, drag)); assert(_currentDrag == null); _currentDrag = drag; return drag; &#125; //åˆ‡æ¢çŠ¶æ€ @override void beginActivity(ScrollActivity? newActivity) &#123; _heldPreviousVelocity = 0.0; if (newActivity == null) &#123; return; &#125; assert(newActivity.delegate == this); super.beginActivity(newActivity); _currentDrag?.dispose(); _currentDrag = null; if (!activity!.isScrolling) &#123; updateUserScrollDirection(ScrollDirection.idle); &#125; &#125;/// æ»‘åŠ¨ç»“æŸæ—¶çš„å¤„ç†ï¼Œé¦–å…ˆé€šè¿‡ ScrollPhysics åˆ›å»ºä¸€ä¸ª Simulationï¼Œç„¶åå°†å…¶ä¼ ç»™ BallisticScrollActivityã€‚ä» BallisticScrollActivity çš„æ„é€ å‡½æ•°å¯ä»¥çœ‹åˆ°ï¼Œæœ¬è´¨ä¸Šæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶çœ‹ä½œæ˜¯ä¸€ä¸ªç”±åŠ¨ç”»é©±åŠ¨çš„æ»‘åŠ¨è¿‡ç¨‹ï¼Œåªä¸è¿‡è¿™ä¸ªåŠ¨ç”»æ˜¯æ ¹æ®ä¸€ä¸ªç»™å®šçš„åˆå§‹é€Ÿåº¦åˆ›å»ºçš„ @override void goBallistic(double velocity) &#123; assert(hasPixels); final Simulation? simulation = physics.createBallisticSimulation(this, velocity); if (simulation != null) &#123; //BallisticScrollActivity ä¸ DrivenScrollActivity çš„ç›¸ä¼¼åº¦å¾ˆé«˜ï¼Œå®ƒä»¬éƒ½æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­å…ˆæ ¹æ®æä¾›çš„ä¿¡æ¯ï¼ˆsimulationï¼Œdurationã€curveç­‰ï¼‰åˆ›å»ºä¸€ä¸ª AnimationControllerï¼Œç„¶åç›‘å¬æ›´æ–°å’Œç»“æŸäº‹ä»¶ï¼Œåœ¨ _tick ä¸­æ›´æ–°åç§»å€¼ï¼Œåœ¨ _end ä¸­ç»“æŸè‡ªå·±ã€‚ beginActivity(BallisticScrollActivity(this, simulation, context.vsync)); &#125; else &#123; goIdle(); &#125; &#125;&#125;class ScrollDragController &#123; @override void update(DragUpdateDetails details) &#123; assert(details.primaryDelta != null); _lastDetails = details; double offset = details.primaryDelta!; //_lastDetails æ˜¯ä¸ºäº†åœ¨ä¹‹åå‘é€é€šçŸ¥çš„æ—¶å€™ï¼ŒåŠ ä¸Šè¿™ä¸ªæ»‘åŠ¨äº‹ä»¶ä¿¡æ¯ï¼Œæ¯”å¦‚ dispatchScrollUpdateNotification if (offset != 0.0) &#123; _lastNonStationaryTimestamp = details.sourceTimeStamp; &#125; // By default, iOS platforms carries momentum and has a start threshold // (configured in [BouncingScrollPhysics]). The 2 operations below are // no-ops on Android. _maybeLoseMomentum(offset, details.sourceTimeStamp); offset = _adjustForScrollStartThreshold(offset, details.sourceTimeStamp); if (offset == 0.0) &#123; return; &#125; if (_reversed) &#123; offset = -offset; &#125; delegate.applyUserOffset(offset);//ä¼ é€’ç»™ScrollPhysicsï¼Œä¸åŒçš„physicsä¸åŒçš„æ•ˆæœ &#125;///æ˜¯å¦æŸå¤±åŠ¨é‡çš„åˆ¤æ–­///è¿™ä¸ªè¿‡ç¨‹çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†åˆ¤æ–­æ˜¯å¦æŸå¤±åŠ¨é‡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œä¸€èˆ¬åœ¨ ios çš„æ»‘åŠ¨ä¸­ï¼Œè¿ç»­å¿«é€Ÿæ»‘åŠ¨çš„æ—¶å€™ï¼Œé€Ÿåº¦æ˜¯ä¼šç§¯ç´¯çš„ï¼Œæ‰€ä»¥åé¢ä¼šè¶Šæ»‘è¶Šå¿«ï¼Œè€Œ flutter ä¸ºäº†ä¿æŒè¿™ä¸€ç‰¹æ€§ï¼Œå°±æœ‰äº†åŠ¨é‡ç§¯ç´¯è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼Œç›®å‰ä¹Ÿåªåœ¨ BouncingScrollPhysics ä¸­æ‰æœ‰ /// Determines whether to lose the existing incoming velocity when starting /// the drag. void _maybeLoseMomentum(double offset, Duration? timestamp) &#123; if (_retainMomentum &amp;&amp; offset == 0.0 &amp;&amp; (timestamp == null || // If drag event has no timestamp, we lose momentum. timestamp - _lastNonStationaryTimestamp! &gt; momentumRetainStationaryDurationThreshold)) &#123; // If pointer is stationary for too long, we lose momentum. _retainMomentum = false; &#125; &#125;///å½“æ»‘åŠ¨æ‰‹åŠ¿ç»“æŸæ—¶ï¼Œè¿œä¸æ„å‘³ç€æ•´ä¸ªæ»‘åŠ¨çš„ç»“æŸï¼Œä¸ºäº†ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬èµ‹äºˆæ»‘åŠ¨é€Ÿåº¦çš„æ¦‚å¿µï¼Œé‚£å®ƒçš„æ»‘åŠ¨ä¹Ÿå°±æœ‰åŠ¨é‡ï¼Œæ‰€ä»¥åœæ­¢ä¸èƒ½åªæ˜¯æˆ›ç„¶è€Œæ­¢ï¼Œéœ€è¦ä¸€ä¸ªæ…¢æ…¢åœä¸‹æ¥çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å°±æœ‰äº† BallisticScrollActivity æ‰€ä»£è¡¨çš„å‡é€Ÿè¿‡ç¨‹ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹çš„ä¸»è¦æ§åˆ¶è€…ï¼Œå®é™…ä¸º ScrollPhysics æ‰€ç”Ÿæˆçš„ Simulationï¼Œä¸åŒçš„ Simulation ç›¸è·ç”šè¿œ @override void end(DragEndDetails details) &#123; assert(details.primaryVelocity != null); // We negate the velocity here because if the touch is moving downwards, // the scroll has to move upwards. It&#x27;s the same reason that update() // above negates the delta before applying it to the scroll offset. double velocity = -details.primaryVelocity!; if (_reversed) &#123; velocity = -velocity; &#125; _lastDetails = details; if (_retainMomentum) &#123; // Build momentum only if dragging in the same direction. final bool isFlingingInSameDirection = velocity.sign == carriedVelocity!.sign; // Build momentum only if the velocity of the last drag was not // substantially lower than the carried momentum. final bool isVelocityNotSubstantiallyLessThanCarriedMomentum = velocity.abs() &gt; carriedVelocity!.abs() * momentumRetainVelocityThresholdFactor; if(isFlingingInSameDirection &amp;&amp; isVelocityNotSubstantiallyLessThanCarriedMomentum) &#123; velocity += carriedVelocity!; &#125; &#125; //æ­¤æ—¶å°±æ˜¯è®¡ç®—ä¸€ä¸‹å½“å‰çš„æ»‘åŠ¨é€Ÿåº¦ï¼Œä»¥ä¾¿åé¢è¿›å…¥ BallisticScrollActivity é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ goBallistic è°ƒç”¨ delegate.goBallistic(velocity); &#125;&#125; å‚è€ƒ Flutteræ»‘åŠ¨ä½“ç³» Flutterï¼šå›¾æ–‡è§£ææ»‘åŠ¨åˆ—è¡¨åŸç†","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"çƒ­é‡è½½åŸç†","date":"2023-08-19T09:57:33.295Z","path":"wiki/Flutter/æºç åˆ†æ/çƒ­é‡è½½åŸç†/","text":"åœ¨å¼€å‘é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥ç‚¹å‡»Hot Reloadæˆ–Hot RestartæŒ‰é’®å¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œæ›´æ–°ï¼Œé‚£Flutteræ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ é¦–æ¬¡ç¼–è¯‘ï¼šç¬¬ä¸€æ¬¡å¯åŠ¨ä¼šç”Ÿæˆå…¨é‡app.dillæ–‡ä»¶ï¼› å¢é‡ç¼–è¯‘ï¼šå¯¹ä¿®æ”¹çš„æ–‡ä»¶ç¼–è¯‘ç”Ÿæˆapp.dill.incremental.dillå¢é‡æ–‡ä»¶ï¼› æ›´æ–°æ–‡ä»¶ï¼šå°†å¢é‡äº§ç‰©æ¨é€åˆ°è®¾å¤‡ä¸­ï¼› UIæ›´æ–°ï¼šDartVMæ”¶åˆ°å¢é‡æ–‡ä»¶åè¿›è¡Œåˆå¹¶ï¼Œå¹¶é€šçŸ¥Flutterå¼•æ“æ›´æ–°UI æ•´ä¸ªè¿‡ç¨‹å¹¶æ²¡æœ‰è®©Appé‡å¯ï¼Œä»è€Œè¾¾åˆ°é«˜æ•ˆå¼€å‘è°ƒè¯•æ•ˆæœ å‚è€ƒ è§£è¯»Flutterä¸­çƒ­é‡è½½åŸç†","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"Element","date":"2023-08-19T09:57:33.294Z","path":"wiki/Flutter/æºç åˆ†æ/Element/","text":"æ¦‚å¿µWidgetæ˜¯UIå…ƒç´ çš„é…ç½®æ•°æ®ï¼ŒElementä»£è¡¨å±å¹•æ˜¾ç¤ºå…ƒç´ ã€‚ä¸»è¦ä½œç”¨ï¼š ç»´æŠ¤è¿™æ£µElement Treeï¼Œæ ¹æ®Widget Treeçš„å˜åŒ–æ¥æ›´æ–°Element Treeï¼ŒåŒ…æ‹¬ï¼šèŠ‚ç‚¹çš„æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ã€ç§»åŠ¨ç­‰ï¼› å°†Widgetå’ŒRenderObjectå…³è”åˆ°Element Treeä¸Šã€‚ ComponentElementï¼šç”¨æ¥ç»„åˆå…¶ä»–æ›´åŸºç¡€çš„Elementï¼Œå¼€å‘æ—¶å¸¸ç”¨åˆ°çš„StatelessWidgetå’ŒStatefulWidgetç›¸å¯¹åº”çš„Elementï¼šStatelessElementå’ŒStatefulElementã€‚å…¶å­èŠ‚ç‚¹å¯¹åº”çš„Widgetéœ€è¦é€šè¿‡buildæ–¹æ³•åˆ›å»ºï¼Œè¯¥ç±»å‹Elementåªæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚ RenderObjectElementï¼šæ¸²æŸ“ç±»Elementï¼Œå¯¹åº”Renderer Widgetï¼Œæ˜¯æ¡†æ¶æœ€æ ¸å¿ƒçš„Elementã€‚RenderObjectElementä¸»è¦åŒ…æ‹¬LeafRenderObjectElementï¼ŒSingleChildRenderObjectElementï¼Œå’ŒMultiChildRenderObjectElementã€‚ LeafRenderObjectElementå¯¹åº”çš„Widgetæ˜¯LeafRenderObjectWidgetï¼Œæ²¡æœ‰å­èŠ‚ç‚¹ï¼› SingleChildRenderObjectElementå¯¹åº”çš„Widgetæ˜¯SingleChildRenderObjectWidgetï¼Œæœ‰ä¸€ä¸ªå­èŠ‚ç‚¹ï¼› MultiChildRenderObjectElementå¯¹åº”çš„Widgetæ˜¯MultiChildRenderObjecWidgetï¼Œæœ‰å¤šä¸ªå­èŠ‚ç‚¹ã€‚ é‡è¦å±æ€§å’Œæ–¹æ³•å±æ€§123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960Map&lt;Type, InheritedElement&gt;? _inheritedWidgets;Set&lt;InheritedElement&gt; _dependencies;class InheritedElement extends ProxyElement &#123; final Map&lt;Element, Object?&gt; _dependents = HashMap&lt;Element, Object?&gt;(); void _updateInheritance() &#123; assert(_lifecycleState == _ElementLifecycle.active); final Map&lt;Type, InheritedElement&gt;? incomingWidgets = _parent?._inheritedWidgets; if (incomingWidgets != null) _inheritedWidgets = HashMap&lt;Type, InheritedElement&gt;.of(incomingWidgets); else _inheritedWidgets = HashMap&lt;Type, InheritedElement&gt;(); _inheritedWidgets![widget.runtimeType] = this; &#125;&#125;abstract class Element extends DiagnosticableTree implements BuildContext &#123; // æ§½ï¼Œç”¨æ¥å­˜å‚¨ä¸€äº›é¢å¤–ä¿¡æ¯ï¼Œæ¯”å¦‚åæ ‡ Object? get slot =&gt; _slot; Object? _slot; // element treeä¸Šçš„æ·±åº¦ late int _depth; // å¼€å‘äººå‘˜éœ€è¦å¤„ç†çš„Widget Widget _widget; BuildOwner _owner;//ç”¨æ¥å¤„ç†Elementçš„å¯¹è±¡ï¼Œå…¨å±€ä¸€ä¸ªï¼Œå°†element treeè½¬æ¢æˆrenderobject tree @override InheritedWidget dependOnInheritedElement(InheritedElement ancestor, &#123; Object? aspect &#125;) &#123; assert(ancestor != null); _dependencies ??= HashSet&lt;InheritedElement&gt;(); _dependencies!.add(ancestor); ancestor.updateDependencies(this, aspect); return ancestor.widget; &#125; @override T? dependOnInheritedWidgetOfExactType&lt;T extends InheritedWidget&gt;(&#123;Object? aspect&#125;) &#123; assert(_debugCheckStateIsActiveForAncestorLookup()); final InheritedElement? ancestor = _inheritedWidgets == null ? null : _inheritedWidgets![T]; if (ancestor != null) &#123; return dependOnInheritedElement(ancestor, aspect: aspect) as T; &#125; _hadUnsatisfiedDependencies = true; return null; &#125; @override InheritedElement? getElementForInheritedWidgetOfExactType&lt;T extends InheritedWidget&gt;() &#123; assert(_debugCheckStateIsActiveForAncestorLookup()); final InheritedElement? ancestor = _inheritedWidgets == null ? null : _inheritedWidgets![T]; return ancestor; &#125;&#125; ä»æ ¹èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼Œä»¥runtimeTypeä½œä¸ºkeyï¼Œä¿å­˜æœ€æ–°çš„Elementå¯¹è±¡ã€‚getElementForInheritedWidgetOfExactTypeæ–¹æ³•å¯ä»¥é€šè¿‡ç±»å‹æŸ¥æ‰¾ç¦»è‡ªå·±æœ€è¿‘çš„ç±»å‹çš„å¯¹è±¡ã€‚dependOnInheritedWidgetOfExactTypeæ–¹æ³•ä¼šæ³¨å†Œä¾èµ–ï¼Œå½“InheritedWidgetå‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šæ›´æ–°ä¾èµ–å®ƒçš„å­ç»„ä»¶ã€‚ updateChild123456789/// çˆ¶èŠ‚ç‚¹é€šè¿‡è¯¥æ–¹æ³•æ¥ä¿®æ”¹å­èŠ‚ç‚¹å¯¹åº”çš„Widget/// newWidget == null è¯´æ˜å­èŠ‚ç‚¹å¯¹åº”çš„Widgetå·²è¢«ç§»é™¤ï¼Œç›´æ¥remove child element/// child == null è¯´æ˜newWidgetæ˜¯æ–°æ’å…¥çš„ï¼Œé€šè¿‡inflateWidgetåˆ›å»ºå­èŠ‚ç‚¹/// child != null åˆ†ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š/// 1. child.widget == newWidgetï¼Œè¯´æ˜æ²¡å˜åŒ–ï¼Œè‹¥child.slot != newSlot è¡¨æ˜å­èŠ‚ç‚¹åœ¨å…„å¼ŸèŠ‚ç‚¹é—´ç§»åŠ¨äº†ä½ç½®ï¼Œé€šè¿‡updateSlotForChildä¿®æ”¹child.slotå³å¯ï¼›/// 2. widget.canUpdateåˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨newWidgetä¿®æ”¹child elementï¼Œè‹¥å¯ä»¥åˆ™è°ƒç”¨updateæ–¹æ³•ï¼›/// 3. å¦åˆ™å…ˆå°†child elementç§»é™¤ï¼Œå¹¶é€šè¿‡newWidgetåˆ›å»ºæ–°çš„elementå­èŠ‚ç‚¹ã€‚Element? updateChild(Element? child, Widget? newWidget, Object? newSlot) &#123; &#125; updateElement12345678910111213void update(covariant Widget newWidget) &#123; _widget = newWidget;&#125;void rebuild() &#123; if (_lifecycleState != _ElementLifecycle.active || !_dirty) return; Element? debugPreviousBuildTarget; performRebuild();//ComponentElementä¸­è°ƒç”¨buildã€updateChild&#125;Element? updateChild(Element? child, Widget? newWidget, Object? newSlot) &#123;&#125; StatelessElement1234567@overridevoid update(StatelessWidget newWidget) &#123; super.update(newWidget); assert(widget == newWidget); _dirty = true; rebuild();&#125; rebuildè°ƒç”¨performRebuildï¼Œè°ƒç”¨å½“å‰buildæ–¹æ³•å’ŒupdateChildã€‚ StatefulElement123456789101112131415161718192021222324252627class StatefulElement extends ComponentElement &#123; //å¼€å‘è€…æ“ä½œçš„å¯¹è±¡ï¼ŒåŒæ ·æœ‰ç›¸åº”ç”Ÿå‘½å‘¨æœŸï¼Œå‚è€ƒ_StateLifecycle State&lt;StatefulWidget&gt;? _state; @override void update(StatefulWidget newWidget) &#123; super.update(newWidget); final StatefulWidget oldWidget = state._widget!; _dirty = true; state._widget = widget as StatefulWidget; try &#123; _debugSetAllowIgnoredCallsToMarkNeedsBuild(true); final Object? debugCheckForReturnedFuture = state.didUpdateWidget(oldWidget) as dynamic; assert(() &#123; if (debugCheckForReturnedFuture is Future) &#123; &#125; return true; &#125;()); &#125; finally &#123; _debugSetAllowIgnoredCallsToMarkNeedsBuild(false); &#125; rebuild(); &#125;&#125; å¤„ç†Stateï¼š ä¿®æ”¹_widgetå±æ€§ è°ƒç”¨didUpdateWidgetæ›´æ–°å±æ€§ ç„¶åå‡ºå‘rebuildæ“ä½œã€‚ ProxyElement123456789101112131415@overridevoid update(ProxyWidget newWidget) &#123; final ProxyWidget oldWidget = widget; super.update(newWidget); updated(oldWidget); _dirty = true; rebuild();&#125;@protectedvoid updated(covariant ProxyWidget oldWidget) &#123; notifyClients(oldWidget);&#125; updateæ–¹æ³•ä¼šé€šçŸ¥å…³è”å¯¹è±¡Widgetæœ‰æ›´æ–°ã€‚ä¸åŒå­ç±»çš„notifyClientså®ç°ä¸åŒã€‚ RenderObjectElement123456789101112131415@overridevoid update(covariant RenderObjectWidget newWidget) &#123; super.update(newWidget); assert(widget == newWidget); assert(() &#123; _debugUpdateRenderObjectOwner(); return true; &#125;()); _performRebuild(); // calls widget.updateRenderObject()&#125;void _performRebuild() &#123; widget.updateRenderObject(this, renderObject); _dirty = false;&#125; SingleChildRenderObject1234567@overridevoid update(SingleChildRenderObjectWidget newWidget) &#123; super.update(newWidget); assert(widget == newWidget); _child = updateChild(_child, widget.child, null);&#125; MultiChildRenderObject123456@overridevoid update(MultiChildRenderObjectWidget newWidget) &#123; super.update(newWidget); _children = updateChildren(_children, widget.children, forgottenChildren: _forgottenChildren); _forgottenChildren.clear();&#125; updateChildrenä¸­å¤„ç†å­èŠ‚ç‚¹çš„æ’å…¥ã€ç§»åŠ¨ã€æ›´æ–°ã€åˆ é™¤ç­‰æ“ä½œã€‚ inflateWidget12345678910111213141516Element inflateWidget(Widget newWidget, Object? newSlot) &#123; final Key? key = newWidget.key; if (key is GlobalKey) &#123; //å¦‚æœå¸¦æœ‰GlobalKeyï¼Œé¦–å…ˆåœ¨inactive Elementsåˆ—è¡¨ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰å¤„äºinactiveçŠ¶æ€çš„èŠ‚ç‚¹ï¼ˆå³åˆšä»æ ‘ä¸Šç§»é™¤ï¼‰ï¼Œå¦‚æ‰¾åˆ°å°±ç›´æ¥å¤æ´»è¯¥èŠ‚ç‚¹ã€‚ final Element? newChild = _retakeInactiveElement(key, newWidget); if (newChild != null) &#123; newChild._activateWithParent(this, newSlot); final Element? updatedChild = updateChild(newChild, newWidget, newSlot); return updatedChild!; &#125; &#125; final Element newChild = newWidget.createElement(); newChild.mount(this, newSlot);//æŒ‚è½½åˆ°æ ‘ä¸Š return newChild;&#125; mountElement12345678910111213141516void mount(Element? parent, Object? newSlot) &#123; _parent = parent; _slot = newSlot; _lifecycleState = _ElementLifecycle.active; _depth = _parent != null ? _parent!.depth + 1 : 1; if (parent != null) &#123; _owner = parent.owner;//ä¼ é€’ownerç»™å­èŠ‚ç‚¹ &#125; final Key? key = widget.key; if (key is GlobalKey) &#123; owner!._registerGlobalKey(key, this);//GlobalKeyæ³¨å†Œè‡ªå·±ï¼Œæ–¹ä¾¿å…¶ä»–åœ°æ–¹ä½¿ç”¨ &#125; _updateInheritance();&#125; ComponentElement123456789101112131415@overridevoid mount(Element? parent, Object? newSlot) &#123; super.mount(parent, newSlot); assert(_child == null); assert(_lifecycleState == _ElementLifecycle.active); _firstBuild(); assert(_child != null);&#125;void _firstBuild() &#123; // StatefulElement overrides this to also call state.didChangeDependencies. rebuild(); // This eventually calls performRebuild.&#125; ç»„åˆå‹ Element åœ¨æŒ‚è½½æ—¶ä¼šæ‰§è¡Œ_firstBuild-&gt;rebuildæ“ä½œã€‚ RenderObjectElement123456void mount(Element parent, dynamic newSlot) &#123; super.mount(parent, newSlot); _renderObject = widget.createRenderObject(this); attachRenderObject(newSlot); _dirty = false;&#125; åˆ›å»ºRenderObjectå¹¶æ’å…¥åˆ°æ ‘ä¸Šã€‚ SingleChildRenderObjectElement12345@overridevoid mount(Element parent, dynamic newSlot) &#123; super.mount(parent, newSlot); _child = updateChild(_child, widget.child, null);//åˆ›å»ºæ–°Elementå®ä¾‹&#125; MultiChildRenderObjectElement12345678910void mount(Element parent, dynamic newSlot) &#123; super.mount(parent, newSlot); _children = List&lt;Element&gt;(widget.children.length); Element previousChild; for (int i = 0; i &lt; _children.length; i += 1) &#123; final Element newChild = inflateWidget(widget.children[i], previousChild); _children[i] = newChild; previousChild = newChild; &#125;&#125; å¯¹æ¯ä¸ªå­èŠ‚ç‚¹è°ƒç”¨inflateWidgetã€‚ markNeedsBuild12345678910void markNeedsBuild() &#123; if (!_active) return; if (dirty) return; _dirty = true; owner.scheduleBuildFor(this);&#125; æ ‡è®°éœ€è¦é‡å»ºï¼Œå…¶ä½œç”¨æ˜¯å°†å½“å‰ElementåŠ å…¥_dirtyElementsï¼Œä»¥ä¾¿åœ¨ä¸‹ä¸€å¸§å¯ä»¥rebuildã€‚ä»¥ä¸‹åœºæ™¯ä¼šè°ƒç”¨markNeedsBuildï¼š State.setState Element.reassembleï¼šdebug hot reload Element.didChangeDependenciesï¼š StatefulElement.activate rebuild1234567void rebuild() &#123; if (!_active || !_dirty) return; performRebuild();&#125; æ´»è·ƒçš„æˆ–è„èŠ‚ç‚¹ä¼šæ‰§è¡ŒperformRebuildï¼Œä»¥ä¸‹åœºæ™¯ä¼šè°ƒç”¨rebuildï¼š å¯¹äºdirty elementï¼Œåœ¨æ–°ä¸€å¸§ç»˜åˆ¶è¿‡ç¨‹ä¸­ç”±BuildOwner.buildScope åœ¨elementæŒ‚è½½æ—¶ï¼Œç”±Element.mountè°ƒç”¨ åœ¨updateæ–¹æ³•å†…è¢«è°ƒç”¨ performRebuildComponentElement123456void performRebuild() &#123; Widget built; built = build(); _child = updateChild(_child, built, slot);&#125; ç»„åˆå‹Elementï¼Œå…ˆbuildè‡ªå·±ï¼Œå†æ›´æ–°å­èŠ‚ç‚¹ RenderObjectElement1234void performRebuild() &#123; widget.updateRenderObject(this, renderObject); _dirty = false;&#125; ç”Ÿå‘½å‘¨æœŸElementæœ‰4ç§çŠ¶æ€ï¼šinitialï¼Œactiveï¼Œinactiveï¼Œdefunctã€‚å…¶å¯¹åº”çš„æ„ä¹‰å¦‚ä¸‹ï¼š initialï¼šåˆå§‹çŠ¶æ€ï¼ŒElementåˆšåˆ›å»ºæ—¶å°±æ˜¯è¯¥çŠ¶æ€ã€‚ã€ activeï¼šæ¿€æ´»çŠ¶æ€ã€‚æ­¤æ—¶Elementçš„Parentå·²ç»é€šè¿‡mountå°†è¯¥Elementæ’å…¥Element Treeçš„æŒ‡å®šçš„æ’æ§½å¤„ï¼ˆSlotï¼‰ï¼ŒElementæ­¤æ—¶éšæ—¶å¯èƒ½æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ inactiveï¼šæœªæ¿€æ´»çŠ¶æ€ã€‚å½“Widget Treeå‘ç”Ÿå˜åŒ–ï¼ŒElementå¯¹åº”çš„Widgetå‘ç”Ÿå˜åŒ–ï¼ŒåŒæ—¶ç”±äºæ–°æ—§Widgetçš„Keyæˆ–è€…çš„RunTimeTypeä¸åŒ¹é…ç­‰åŸå› å¯¼è‡´è¯¥Elementä¹Ÿè¢«ç§»é™¤ï¼Œå› æ­¤è¯¥Elementçš„çŠ¶æ€å˜ä¸ºæœªæ¿€æ´»çŠ¶æ€ï¼Œè¢«ä»å±å¹•ä¸Šç§»é™¤ã€‚å¹¶å°†è¯¥Elementä»Element Treeä¸­ç§»é™¤ï¼Œå¦‚æœè¯¥Elementæœ‰å¯¹åº”çš„RenderObjectï¼Œè¿˜ä¼šå°†å¯¹åº”çš„RenderObjectä»Render Treeç§»é™¤ã€‚ä½†æ˜¯ï¼Œæ­¤Elementè¿˜æ˜¯æœ‰è¢«å¤ç”¨çš„æœºä¼šï¼Œä¾‹å¦‚é€šè¿‡GlobalKeyè¿›è¡Œå¤ç”¨ã€‚ defunctï¼šå¤±æ•ˆçŠ¶æ€ã€‚å¦‚æœä¸€ä¸ªå¤„äºæœªæ¿€æ´»çŠ¶æ€çš„Elementåœ¨å½“å‰å¸§åŠ¨ç”»ç»“æŸæ—¶è¿˜æ˜¯æœªè¢«å¤ç”¨ï¼Œæ­¤æ—¶ä¼šè°ƒç”¨è¯¥Elementçš„unmountå‡½æ•°ï¼Œå°†Elementçš„çŠ¶æ€æ”¹ä¸ºdefunctï¼Œå¹¶å¯¹å…¶ä¸­çš„èµ„æºè¿›è¡Œæ¸…ç†ã€‚ ComponentElementåˆ›å»º æ›´æ–° é”€æ¯ RenderObjectElementåˆ›å»º æ›´æ–° é”€æ¯ æ€»ç»“Elementç»§æ‰¿è‡ªBuildContextï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¹³å¸¸ä½¿ç”¨çš„contextå…¶å®å°±æ˜¯Elementã€‚å„ç§ofæ–¹æ³•å…¶å®å°±æ˜¯æ“ä½œElementæ ‘æ¥è·å–ç›¸åº”å¯¹è±¡ã€‚ å‚è€ƒ æ·±å…¥æµ…å‡º Flutter Framework ä¹‹ Element","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"PaintingContext","date":"2023-08-19T09:57:33.294Z","path":"wiki/Flutter/æºç åˆ†æ/PaintingContext/","text":"æ¦‚è¦ ç»§æ‰¿è‡ªClipContextï¼Œæä¾›è£å‰ªç›¸å…³è¾…åŠ©æ–¹æ³• _currentLayerã€_recorderã€_canvasç”¨äºå…·ä½“çš„ç»˜åˆ¶æ“ä½œ _containerLayer åŸºæœ¬æ¦‚å¿µCanvasCanvasæ˜¯ Engine(C++) å±‚åˆ° Framework(Dart) å±‚çš„æ¡¥æ¥ï¼ŒçœŸæ­£çš„åŠŸèƒ½åœ¨ Engine å±‚å®ç°ã€‚Canvas å‘ Framework å±‚æ›éœ²äº†ä¸ç»˜åˆ¶ç›¸å…³çš„åŸºç¡€æ¥å£ï¼Œå¦‚ï¼šdrawã€clipã€transformä»¥åŠscaleç­‰ï¼ŒRenderObject æ­£æ˜¯é€šè¿‡è¿™äº›åŸºç¡€æ¥å£å®Œæˆç»˜åˆ¶ä»»åŠ¡çš„ã€‚ é€šè¿‡è¿™å¥—æ¥å£è¿›è¡Œçš„æ‰€æœ‰æ“ä½œéƒ½å°†è¢«PictureRecorderè®°å½•ä¸‹æ¥ã€‚ é™¤äº†æ­£å¸¸çš„ç»˜åˆ¶æ“ä½œ(draw*)ï¼ŒCanvas è¿˜æ”¯æŒçŸ©é˜µå˜æ¢(transformation matrix)ã€åŒºåŸŸè£å‰ª(clip region)ï¼Œå®ƒä»¬å°†ä½œç”¨äºå…¶ååœ¨è¯¥ Canvas ä¸Šè¿›è¡Œçš„æ‰€æœ‰ç»˜åˆ¶æ“ä½œã€‚ 123456789101112131415void scale(double sx, [double sy]);void rotate(double radians) native;void transform(Float64List matrix4);void clipRect(Rect rect, &#123; ClipOp clipOp = ClipOp.intersect, bool doAntiAlias = true &#125;);void clipPath(Path path, &#123;bool doAntiAlias = true&#125;);void drawColor(Color color, BlendMode blendMode);void drawLine(Offset p1, Offset p2, Paint paint);void drawRect(Rect rect, Paint paint);void drawCircle(Offset c, double radius, Paint paint);void drawImage(Image image, Offset p, Paint paint);void drawParagraph(Paragraph paragraph, Offset offset); Pictureå…¶æœ¬è´¨æ˜¯ä¸€ç³»åˆ—ã€Œgraphical operationsã€çš„é›†åˆï¼Œå¯¹ Framework å±‚é€æ˜ã€‚Future toImage(int width, int height)ï¼Œé€šè¿‡toImageæ–¹æ³•å¯ä»¥å°†å…¶è®°å½•çš„æ‰€æœ‰æ“ä½œç»å…‰æ …åŒ–åç”ŸæˆImageå¯¹è±¡ã€‚ PictureRecorderå…¶ä¸»è¦ä½œç”¨æ˜¯è®°å½•åœ¨Canvasä¸Šæ‰§è¡Œçš„ã€Œgraphical operationsã€ï¼Œé€šè¿‡Picture#endRecordingæœ€ç»ˆç”ŸæˆPictureã€‚ Sceneä¸€ç³»åˆ— Pictureã€Texture åˆæˆçš„ç»“æœã€‚UI å¸§åˆ·æ–°æ—¶ï¼Œåœ¨ Rendering Pipeline ä¸­ Flutter UI ç» buildã€layoutã€paint ç­‰æ­¥éª¤åæœ€ç»ˆç”Ÿæˆ Sceneã€‚å…¶åé€šè¿‡window.renderå°†è¯¥ Scene é€å…¥ Engine å±‚ï¼Œæœ€ç»ˆç» GPU å…‰æ …åŒ–åæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚ SceneBuilderç”¨äºå°†å¤šä¸ªå›¾å±‚(Layer)ã€Pictureã€Texture åˆæˆä¸º Sceneã€‚ 1234567891011121314151617181920212223242526272829303132333435363738void main() &#123; PictureRecorder recorder = PictureRecorder(); // åˆå§‹åŒ– Canvas æ—¶ï¼Œä¼ å…¥ PictureRecorder å®ä¾‹ // ç”¨äºè®°å½•å‘ç”Ÿåœ¨è¯¥ canvas ä¸Šçš„æ‰€æœ‰æ“ä½œ // Canvas canvas = Canvas(recorder); Paint circlePaint= Paint(); circlePaint.color = Colors.blueAccent; // è°ƒç”¨ Canvas çš„ç»˜åˆ¶æ¥å£ï¼Œç”»ä¸€ä¸ªåœ†å½¢ // canvas.drawCircle(Offset(400, 400), 300, circlePaint); // ç»˜åˆ¶ç»“æŸï¼Œç”ŸæˆPicture // Picture picture = recorder.endRecording(); SceneBuilder sceneBuilder = SceneBuilder(); sceneBuilder.pushOffset(0, 0); // å°† picture é€å…¥ SceneBuilder // sceneBuilder.addPicture(Offset(0, 0), picture); sceneBuilder.pop(); // ç”Ÿæˆ Scene // Scene scene = sceneBuilder.build(); window.onDrawFrame = () &#123; // å°† scene é€å…¥ Engine å±‚è¿›è¡Œæ¸²æŸ“æ˜¾ç¤º // window.render(scene); &#125;; window.scheduleFrame();&#125; å‚è€ƒ æ·±å…¥æµ…å‡º Flutter Framework ä¹‹ PaintingContext","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"flutter Androidç«¯ç¼–è¯‘æµç¨‹","date":"2023-08-19T09:57:33.294Z","path":"wiki/Flutter/æºç åˆ†æ/flutter Androidç«¯ç¼–è¯‘æµç¨‹/","text":"Androidç¼–è¯‘æºç æµç¨‹ settings.gradleé…ç½® 123456789101112131415161718// å½“å‰ app moduleinclude &#x27;:app&#x27;/** * 1ã€è¯»å–android/local.propertiesæ–‡ä»¶å†…å®¹ * 2ã€è·å–flutter.sdkçš„å€¼ï¼Œä¹Ÿå°±æ˜¯ä½ æœ¬åœ°flutter SDKå®‰è£…ç›®å½• * 3ã€gradle è„šæœ¬å¸¸è§„æ“ä½œ apply flutter SDKè·¯å¾„ä¸‹/packages/flutter_tools/gradle/app_plugin_loader.gradleæ–‡ä»¶ */def localPropertiesFile = new File(rootProject.projectDir, &quot;local.properties&quot;)def properties = new Properties()assert localPropertiesFile.exists()localPropertiesFile.withReader(&quot;UTF-8&quot;) &#123; reader -&gt; properties.load(reader) &#125;def flutterSdkPath = properties.getProperty(&quot;flutter.sdk&quot;)assert flutterSdkPath != null, &quot;flutter.sdk not set in local.properties&quot;apply from: &quot;$flutterSdkPath/packages/flutter_tools/gradle/app_plugin_loader.gradle&quot; æŸ¥çœ‹app_plugin_loader.gradleæ–‡ä»¶ 1234567891011121314151617181920212223242526272829import groovy.json.JsonSlurper//å¾—åˆ°è‡ªå·±æ–°å»ºçš„ flutter é¡¹ç›®çš„æ ¹è·¯å¾„ï¼Œå› ä¸ºå·²ç»è¢«è‡ªå·±æ–°å»ºçš„ project applyï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯é¡¹ç›®æ ¹è·¯å¾„å“¦def flutterProjectRoot = rootProject.projectDir.parentFile//è·å–è‡ªå·±é¡¹ç›®æ ¹è·¯å¾„ä¸‹çš„.flutter-plugins-dependencies jsoné…ç½®æ–‡ä»¶// Note: if this logic is changed, also change the logic in module_plugin_loader.gradle.def pluginsFile = new File(flutterProjectRoot, &#x27;.flutter-plugins-dependencies&#x27;)if (!pluginsFile.exists()) &#123; return&#125;/** * 1ã€é€šè¿‡groovyçš„JsonSlurperè§£æjsonæ–‡ä»¶å†…å®¹ã€‚ * 2ã€ç®€å•æ ¡éªŒjsonå†…å®¹å­—æ®µçš„ç±»å‹åˆæ³•æ€§ã€‚ * 3ã€æŠŠå®‰å“å¹³å°ä¾èµ–çš„Flutter pluginså…¨éƒ¨è‡ªåŠ¨includeè¿›æ¥ */def object = new JsonSlurper().parseText(pluginsFile.text)assert object instanceof Mapassert object.plugins instanceof Mapassert object.plugins.android instanceof List// Includes the Flutter plugins that support the Android platform.object.plugins.android.each &#123; androidPlugin -&gt; assert androidPlugin.name instanceof String assert androidPlugin.path instanceof String def pluginDirectory = new File(androidPlugin.path, &#x27;android&#x27;) assert pluginDirectory.exists() include &quot;:$&#123;androidPlugin.name&#125;&quot; project(&quot;:$&#123;androidPlugin.name&#125;&quot;).projectDir = pluginDirectory&#125; æˆ‘ä»¬åœ¨flutteré¡¹ç›®ä¸­é…ç½®ä¸åŒçš„pluginã€packageï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ.flutter-plugins-dependenciesï¼Œapp_plugin_loader.gradleä¼šå°†å…¶ä¸­çš„Androidéƒ¨åˆ†åº“æ·»åŠ è¿›æ¥ï¼Œç”¨Android Studioæ‰“å¼€androidæ–‡ä»¶å¤¹ï¼Œä¼šè‡ªåŠ¨åŠ è½½è¿™äº›åº“ã€‚ åœ¨androidæ–‡ä»¶å¤¹ä¸‹çš„build.gradleä¸­: 12345678//......çœç•¥æ— å…³ç´§è¦çš„å¸¸è§é…ç½®// çœ‹åˆ°äº†å§ï¼Œä»–å°†æ‰€æœ‰ android ä¾èµ–çš„æ„å»ºäº§ç‰©æŒªåˆ°äº†æ ¹ç›®å½•ä¸‹çš„ build ä¸­ï¼Œæ‰€æœ‰äº§ç‰©éƒ½åœ¨é‚£å„¿rootProject.buildDir = &#x27;../build&#x27;subprojects &#123; project.buildDir = &quot;$&#123;rootProject.buildDir&#125;/$&#123;project.name&#125;&quot; project.evaluationDependsOn(&#x27;:app&#x27;) //è¿è¡Œå…¶ä»–é…ç½®ä¹‹å‰ï¼Œå…ˆè¿è¡Œappä¾èµ–&#125; ç„¶åçœ‹appæ¨¡å—ä¸‹çš„build.gradle 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657/** * 1ã€è¯»å–local.propertiesé…ç½®ä¿¡æ¯ã€‚ * 2ã€è·å–flutter.sdkè·¯å¾„ã€‚ * 3ã€è·å–flutter.versionCodeå€¼ï¼Œæ­¤å€¼åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ä»pubspec.yamlä¸­è¯»å–èµ‹å€¼ï¼Œæ‰€ä»¥ä¿®æ”¹ç‰ˆæœ¬å·è¯·ä¿®æ”¹yamlã€‚ * 4ã€è·å–flutter.versionNameå€¼ï¼Œæ­¤å€¼åœ¨ç¼–è¯‘æ—¶è‡ªåŠ¨ä»pubspec.yamlä¸­è¯»å–èµ‹å€¼ï¼Œæ‰€ä»¥ä¿®æ”¹ç‰ˆæœ¬å·è¯·ä¿®æ”¹yamlã€‚ */def localProperties = new Properties()def localPropertiesFile = rootProject.file(&#x27;local.properties&#x27;)if (localPropertiesFile.exists()) &#123; localPropertiesFile.withReader(&#x27;UTF-8&#x27;) &#123; reader -&gt; localProperties.load(reader) &#125;&#125;def flutterRoot = localProperties.getProperty(&#x27;flutter.sdk&#x27;)if (flutterRoot == null) &#123; throw new GradleException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)&#125;def flutterVersionCode = localProperties.getProperty(&#x27;flutter.versionCode&#x27;)if (flutterVersionCode == null) &#123; flutterVersionCode = &#x27;1&#x27;&#125;def flutterVersionName = localProperties.getProperty(&#x27;flutter.versionName&#x27;)if (flutterVersionName == null) &#123; flutterVersionName = &#x27;1.0&#x27;&#125;//å¸¸è§„æ“ä½œï¼Œä¸è§£é‡Šapply plugin: &#x27;com.android.application&#x27;apply plugin: &#x27;kotlin-android&#x27;//é‡ç‚¹1ï¼šapply äº† flutter SDK ä¸‹é¢çš„packages/flutter_tools/gradle/flutter.gradleè„šæœ¬æ–‡ä»¶apply from: &quot;$flutterRoot/packages/flutter_tools/gradle/flutter.gradle&quot;android &#123; compileSdkVersion 30 sourceSets &#123; main.java.srcDirs += &#x27;src/main/kotlin&#x27; &#125; defaultConfig &#123; applicationId &quot;cn.yan.f1&quot; minSdkVersion 21 targetSdkVersion 30 versionCode flutterVersionCode.toInteger() //èµ‹å€¼ä¸ºyamlä¸­è¯»å–çš„å€¼ versionName flutterVersionName //èµ‹å€¼ä¸ºyamlä¸­è¯»å–çš„å€¼ &#125; //......çœç•¥å¸¸è§„æ“ä½œï¼Œä¸è§£é‡Š&#125;//é‡ç‚¹2ï¼šä¸€ä¸ªæ‹“å±•é…ç½®ï¼ŒæŒ‡å®šsourceè·¯å¾„ä¸ºå½“å‰çš„ä¸¤çº§çˆ¶çº§ï¼Œä¹Ÿå°±æ˜¯é¡¹ç›®æ ¹ç›®å½•flutter &#123; source &#x27;../..&#x27;&#125;//......çœç•¥å¸¸è§„æ“ä½œï¼Œä¸è§£é‡Š çœ‹çœ‹é‡ç‚¹1flutter.gradleæ–‡ä»¶ï¼Œå®ƒå®é™…ä¸Šè¿è¡Œäº†flutter.groovyè¿™ä¸ªæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128//......çœç•¥ä¸€å †importå¤´æ–‡ä»¶/** * å¸¸è§„è„šæœ¬é…ç½®ï¼šè„šæœ¬ä¾èµ–ä»“åº“åŠä¾èµ–çš„ AGP ç‰ˆæœ¬ * å¦‚æœä½ è‡ªå·±æ²¡æœ‰å…¨å±€é…å›½å†…mavené•œåƒï¼Œä¿®æ”¹è¿™é‡Œrepositoriesä¹Ÿå¯ä»¥ã€‚ * å¦‚æœä½ é¡¹ç›®å¯¹äºAGPè¿™ä¸ªç‰ˆæœ¬ä¸å…¼å®¹ï¼Œè‡ªå·±ä¿®æ”¹è¿™é‡Œç„¶åå…¼å®¹ä¹Ÿå¯ä»¥ã€‚ */buildscript &#123; repositories &#123; google() jcenter() &#125; dependencies &#123; classpath &#x27;com.android.tools.build:gradle:4.1.0&#x27; &#125;&#125;//java8ç¼–è¯‘é…ç½®android &#123; compileOptions &#123; sourceCompatibility 1.8 targetCompatibility 1.8 &#125;&#125;//åˆ apply äº†ä¸€ä¸ªæ’ä»¶ï¼Œåªæ˜¯è¿™ä¸ªæ’ä»¶æºç ç›´æ¥å®šä¹‰åœ¨ä¸‹æ–¹apply plugin: FlutterPlugin//FlutterPluginæ’ä»¶å®ç°æºç ï¼Œå‚è€ƒæ ‡å‡†æ’ä»¶å†™æ³•ä¸€æ ·ï¼ŒåŸºæœ¬è¯­æ³•ä¸è§£é‡Šï¼Œè¿™é‡Œé‡ç‚¹çœ‹é€»è¾‘ã€‚class FlutterPlugin implements Plugin&lt;Project&gt; &#123; //...... //é‡ç‚¹å…¥å£ï¼ï¼ï¼ï¼ï¼ï¼ @Override void apply(Project project) &#123; this.project = project //1ã€é…ç½®mavenä»“åº“åœ°å€ï¼Œç¯å¢ƒå˜é‡æœ‰é…ç½®FLUTTER_STORAGE_BASE_URLå°±ä¼˜å…ˆç”¨ï¼Œæ²¡å°±ç¼ºçœ String hostedRepository = System.env.FLUTTER_STORAGE_BASE_URL ?: DEFAULT_MAVEN_HOST String repository = useLocalEngine() ? project.property(&#x27;local-engine-repo&#x27;) : &quot;$hostedRepository/download.flutter.io&quot; project.rootProject.allprojects &#123; repositories &#123; maven &#123; url repository &#125; &#125; &#125; //2ã€åˆ›å»ºappæ¨¡å—ä¸­é…ç½®çš„flutter&#123; source: &#x27;../../&#x27;&#125;é—­åŒ…extensions project.extensions.create(&quot;flutter&quot;, FlutterExtension) //3ã€æ·»åŠ flutteræ„å»ºç›¸å…³çš„å„ç§task this.addFlutterTasks(project) //4ã€åˆ¤æ–­ç¼–è¯‘å‘½ä»¤flutter build apk --split-per-abiæ˜¯å¦æ·»åŠ --split-per-abiå‚æ•°ï¼Œæœ‰çš„è¯å°±æ‹†åˆ†æˆå¤šä¸ªabiåŒ…ã€‚ if (shouldSplitPerAbi()) &#123; project.android &#123; splits &#123; abi &#123; // Enables building multiple APKs per ABI. enable true // Resets the list of ABIs that Gradle should create APKs for to none. reset() // Specifies that we do not want to also generate a universal APK that includes all ABIs. universalApk false &#125; &#125; &#125; &#125; //5ã€åˆ¤æ–­ç¼–è¯‘å‘½ä»¤æ˜¯å¦æ·»åŠ deferred-component-nameså‚æ•°ï¼Œæœ‰å°±é…ç½®android dynamicFeatures bundleç‰¹æ€§ã€‚ if (project.hasProperty(&#x27;deferred-component-names&#x27;)) &#123; String[] componentNames = project.property(&#x27;deferred-component-names&#x27;).split(&#x27;,&#x27;).collect &#123;&quot;:$&#123;it&#125;&quot;&#125; project.android &#123; dynamicFeatures = componentNames &#125; &#125; //6ã€åˆ¤æ–­ç¼–è¯‘å‘½ä»¤æ˜¯å¦æ·»åŠ --target-platform=xxxABIå‚æ•°ï¼Œæ²¡æœ‰å°±ç”¨ç¼ºçœï¼Œæœ‰å°±çœ‹è¿™ä¸ªABIæ˜¯å¦flutteræ”¯æŒçš„ï¼Œæ”¯æŒå°±é…ç½®ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚ getTargetPlatforms().each &#123; targetArch -&gt; String abiValue = PLATFORM_ARCH_MAP[targetArch] project.android &#123; if (shouldSplitPerAbi()) &#123; splits &#123; abi &#123; include abiValue &#125; &#125; &#125; &#125; &#125; //7ã€é€šè¿‡å±æ€§é…ç½®è·å–flutter.sdkï¼Œæˆ–è€…é€šè¿‡ç¯å¢ƒå˜é‡FLUTTER_ROOTè·å–ï¼Œéƒ½æ²¡æœ‰å°±æŠ›å‡ºç¯å¢ƒå¼‚å¸¸ã€‚ String flutterRootPath = resolveProperty(&quot;flutter.sdk&quot;, System.env.FLUTTER_ROOT) if (flutterRootPath == null) &#123; throw new GradleException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file or with a FLUTTER_ROOT environment variable.&quot;) &#125; flutterRoot = project.file(flutterRootPath) if (!flutterRoot.isDirectory()) &#123; throw new GradleException(&quot;flutter.sdk must point to the Flutter SDK directory&quot;) &#125; //8ã€è·å–Flutter Engineçš„ç‰ˆæœ¬å·ï¼Œå¦‚æœé€šè¿‡local-engine-repoå‚æ•°ä½¿ç”¨æœ¬åœ°è‡ªå·±ç¼–è¯‘çš„Engineåˆ™ç‰ˆæœ¬ä¸º+ï¼Œå¦åˆ™è¯»å–SDKç›®å½•ä¸‹bin\\internal\\engine.versionæ–‡ä»¶å€¼ï¼Œä¸€ä¸²ç±»ä¼¼MD5çš„å€¼ã€‚ engineVersion = useLocalEngine() ? &quot;+&quot; // Match any version since there&#x27;s only one. : &quot;1.0.0-&quot; + Paths.get(flutterRoot.absolutePath, &quot;bin&quot;, &quot;internal&quot;, &quot;engine.version&quot;).toFile().text.trim() //9ã€ä¾æ®å¹³å°è·å–å¯¹åº”flutterå‘½ä»¤è„šæœ¬ï¼Œéƒ½ä½äºSDKç›®å½•ä¸‹bin\\ä¸­ï¼Œåå­—ä¸ºflutter String flutterExecutableName = Os.isFamily(Os.FAMILY_WINDOWS) ? &quot;flutter.bat&quot; : &quot;flutter&quot; flutterExecutable = Paths.get(flutterRoot.absolutePath, &quot;bin&quot;, flutterExecutableName).toFile(); //10ã€è·å–flutteræ··æ·†é…ç½®æ¸…å•ï¼Œä½äºSDKè·¯å¾„ä¸‹packages\\flutter_tools\\gradle\\flutter_proguard_rules.proã€‚ //é‡Œé¢é…ç½®åªæœ‰ -dontwarn io.flutter.plugin.** å’Œ -dontwarn android.** String flutterProguardRules = Paths.get(flutterRoot.absolutePath, &quot;packages&quot;, &quot;flutter_tools&quot;, &quot;gradle&quot;, &quot;flutter_proguard_rules.pro&quot;) project.android.buildTypes &#123; //11ã€æ–°å¢profileæ„å»ºç±»å‹ï¼Œåœ¨å½“å‰projectä¸‹çš„android.buildTypesä¸­è¿›è¡Œé…ç½® profile &#123; initWith debug //initWithæ“ä½œå¤åˆ¶æ‰€æœ‰debugé‡Œé¢çš„å±æ€§ if (it.hasProperty(&quot;matchingFallbacks&quot;)) &#123; matchingFallbacks = [&quot;debug&quot;, &quot;release&quot;] &#125; &#125; //...... &#125; //...... //12ã€ç»™æ‰€æœ‰buildTypesæ·»åŠ ä¾èµ–ï¼ŒaddFlutterDependencies project.android.buildTypes.all this.&amp;addFlutterDependencies &#125; //......&#125;//flutter&#123;&#125;é—­åŒ…Extensionå®šä¹‰class FlutterExtension &#123; String source String target&#125;//...... æ¥ä¸‹æ¥çœ‹çœ‹addFluterTasksæ–¹æ³•ï¼Œè¿™æ˜¯æ•´ä¸ªç¼–è¯‘çš„é‡ç‚¹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566private void addFlutterTasks(Project project) &#123; //gradleé¡¹ç›®é…ç½®è¯„ä¼°å¤±è´¥åˆ™è¿”å›ï¼Œå¸¸è§„æ“ä½œï¼Œå¿½ç•¥ if (project.state.failure) &#123; return &#125; //1ã€ä¸€å †å±æ€§è·å–ä¸èµ‹å€¼æ“ä½œ String[] fileSystemRootsValue = null if (project.hasProperty(&#x27;filesystem-roots&#x27;)) &#123; fileSystemRootsValue = project.property(&#x27;filesystem-roots&#x27;).split(&#x27;\\\\|&#x27;) &#125; String fileSystemSchemeValue = null if (project.hasProperty(&#x27;filesystem-scheme&#x27;)) &#123; fileSystemSchemeValue = project.property(&#x27;filesystem-scheme&#x27;) &#125; Boolean trackWidgetCreationValue = true if (project.hasProperty(&#x27;track-widget-creation&#x27;)) &#123; trackWidgetCreationValue = project.property(&#x27;track-widget-creation&#x27;).toBoolean() &#125; String extraFrontEndOptionsValue = null if (project.hasProperty(&#x27;extra-front-end-options&#x27;)) &#123; extraFrontEndOptionsValue = project.property(&#x27;extra-front-end-options&#x27;) &#125; String extraGenSnapshotOptionsValue = null if (project.hasProperty(&#x27;extra-gen-snapshot-options&#x27;)) &#123; extraGenSnapshotOptionsValue = project.property(&#x27;extra-gen-snapshot-options&#x27;) &#125; String splitDebugInfoValue = null if (project.hasProperty(&#x27;split-debug-info&#x27;)) &#123; splitDebugInfoValue = project.property(&#x27;split-debug-info&#x27;) &#125; Boolean dartObfuscationValue = false if (project.hasProperty(&#x27;dart-obfuscation&#x27;)) &#123; dartObfuscationValue = project.property(&#x27;dart-obfuscation&#x27;).toBoolean(); &#125; Boolean treeShakeIconsOptionsValue = false if (project.hasProperty(&#x27;tree-shake-icons&#x27;)) &#123; treeShakeIconsOptionsValue = project.property(&#x27;tree-shake-icons&#x27;).toBoolean() &#125; String dartDefinesValue = null if (project.hasProperty(&#x27;dart-defines&#x27;)) &#123; dartDefinesValue = project.property(&#x27;dart-defines&#x27;) &#125; String bundleSkSLPathValue; if (project.hasProperty(&#x27;bundle-sksl-path&#x27;)) &#123; bundleSkSLPathValue = project.property(&#x27;bundle-sksl-path&#x27;) &#125; String performanceMeasurementFileValue; if (project.hasProperty(&#x27;performance-measurement-file&#x27;)) &#123; performanceMeasurementFileValue = project.property(&#x27;performance-measurement-file&#x27;) &#125; String codeSizeDirectoryValue; if (project.hasProperty(&#x27;code-size-directory&#x27;)) &#123; codeSizeDirectoryValue = project.property(&#x27;code-size-directory&#x27;) &#125; Boolean deferredComponentsValue = false if (project.hasProperty(&#x27;deferred-components&#x27;)) &#123; deferredComponentsValue = project.property(&#x27;deferred-components&#x27;).toBoolean() &#125; Boolean validateDeferredComponentsValue = true if (project.hasProperty(&#x27;validate-deferred-components&#x27;)) &#123; validateDeferredComponentsValue = project.property(&#x27;validate-deferred-components&#x27;).toBoolean() &#125; def targetPlatforms = getTargetPlatforms() ......&#125; å¯ä»¥çœ‹åˆ°ï¼ŒaddFlutterTasks æ–¹æ³•çš„ç¬¬ä¸€éƒ¨åˆ†æ¯”è¾ƒç®€å•ï¼ŒåŸºæœ¬éƒ½æ˜¯ä» Project ä¸­è¯»å–å„è‡ªé…ç½®å±æ€§ä¾›åç»­æ­¥éª¤ä½¿ç”¨ã€‚æ‰€ä»¥æˆ‘ä»¬æ¥ç€ç»§ç»­çœ‹ addFlutterTasks è¿™ä¸ªæ–¹æ³•æ­¥éª¤ 1 ä¹‹åçš„éƒ¨åˆ† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135private void addFlutterTasks(Project project) &#123; //ä¸€å †å±æ€§è·å–ä¸èµ‹å€¼æ“ä½œ //...... //1ã€å®šä¹‰ addFlutterDeps ç®­å¤´å‡½æ•°ï¼Œå‚æ•°variantä¸ºæ ‡å‡†æ„å»ºå¯¹åº”çš„æ„å»ºç±»å‹ def addFlutterDeps = &#123; variant -&gt; if (shouldSplitPerAbi()) &#123; //2ã€å¸¸è§„æ“ä½œï¼šå¦‚æœæ˜¯æ„å»ºå¤šä¸ªå˜ä½“apkæ¨¡å¼å°±å¤„ç†vcé—®é¢˜ variant.outputs.each &#123; output -&gt; //ç”±äºGPå•†åº—ä¸å…è®¸åŒä¸€ä¸ªåº”ç”¨çš„å¤šä¸ªAPKå…¨éƒ½å…·æœ‰ç›¸åŒçš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œå› æ­¤åœ¨ä¸Šä¼ åˆ°Playå•†åº—ä¹‹å‰ï¼Œæ‚¨éœ€è¦ç¡®ä¿æ¯ä¸ªAPKéƒ½æœ‰è‡ªå·±å”¯ä¸€çš„versionCodeï¼Œè¿™é‡Œå°±æ˜¯åšè¿™ä¸ªäº‹æƒ…çš„ã€‚ //å…·ä½“å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ https://developer.android.com/studio/build/configure-apk-splits def abiVersionCode = ABI_VERSION.get(output.getFilter(OutputFile.ABI)) if (abiVersionCode != null) &#123; output.versionCodeOverride = abiVersionCode * 1000 + variant.versionCode &#125; &#125; &#125; //3ã€è·å–ç¼–è¯‘ç±»å‹ï¼ŒvariantBuildModeå€¼ä¸ºdebugã€profileã€releaseä¹‹ä¸€ String variantBuildMode = buildModeFor(variant.buildType) //4ã€ä¾æ®å‚æ•°ç”Ÿæˆä¸€ä¸ªtaskåå­—ï¼Œè­¬å¦‚è¿™é‡Œçš„compileFlutterBuildDebugã€compileFlutterBuildProfileã€compileFlutterBuildRelease String taskName = toCammelCase([&quot;compile&quot;, FLUTTER_BUILD_PREFIX, variant.name]) //5ã€ç»™å½“å‰projectåˆ›å»ºcompileFlutterBuildDebugã€compileFlutterBuildProfileã€compileFlutterBuildRelease Task //å®ç°ä¸ºFlutterTaskï¼Œä¸»è¦ç”¨æ¥ç¼–è¯‘Flutterä»£ç ï¼Œè¿™ä¸ªtaskç¨åå•ç‹¬åˆ†æ FlutterTask compileTask = project.tasks.create(name: taskName, type: FlutterTask) &#123; //å„ç§taskå±æ€§èµ‹å€¼æ“ä½œï¼ŒåŸºæœ¬éƒ½æ¥è‡ªä¸Šé¢çš„å±æ€§è·å–æˆ–è€…åŒ¹é…åˆ†æ flutterRoot this.flutterRoot flutterExecutable this.flutterExecutable buildMode variantBuildMode localEngine this.localEngine localEngineSrcPath this.localEngineSrcPath //é»˜è®¤dartå…¥å£lib/main.dartã€å¯ä»¥é€šè¿‡targetå±æ€§è‡ªå®šä¹‰æŒ‡å‘ targetPath getFlutterTarget() verbose isVerbose() fastStart isFastStart() fileSystemRoots fileSystemRootsValue fileSystemScheme fileSystemSchemeValue trackWidgetCreation trackWidgetCreationValue targetPlatformValues = targetPlatforms sourceDir getFlutterSourceDirectory() //å­¦åˆ°ä¸€ä¸ªå°æŠ€èƒ½ï¼ŒåŸæ¥ä¸­é—´APIæ˜¯AndroidProject.FD_INTERMEDIATESï¼Œè¿™ä¹Ÿæ˜¯flutterä¸­é—´äº§ç‰©ç›®å½• intermediateDir project.file(&quot;$&#123;project.buildDir&#125;/$&#123;AndroidProject.FD_INTERMEDIATES&#125;/flutter/$&#123;variant.name&#125;/&quot;) extraFrontEndOptions extraFrontEndOptionsValue extraGenSnapshotOptions extraGenSnapshotOptionsValue splitDebugInfo splitDebugInfoValue treeShakeIcons treeShakeIconsOptionsValue dartObfuscation dartObfuscationValue dartDefines dartDefinesValue bundleSkSLPath bundleSkSLPathValue performanceMeasurementFile performanceMeasurementFileValue codeSizeDirectory codeSizeDirectoryValue deferredComponents deferredComponentsValue validateDeferredComponents validateDeferredComponentsValue //æœ€ååšä¸€æ³¢æƒé™ç›¸å…³å¤„ç† doLast &#123; project.exec &#123; if (Os.isFamily(Os.FAMILY_WINDOWS)) &#123; commandLine(&#x27;cmd&#x27;, &#x27;/c&#x27;, &quot;attrib -r $&#123;assetsDirectory&#125;/* /s&quot;) &#125; else &#123; commandLine(&#x27;chmod&#x27;, &#x27;-R&#x27;, &#x27;u+w&#x27;, assetsDirectory) &#125; &#125; &#125; &#125; //é¡¹ç›®æ„å»ºä¸­é—´äº§ç‰©çš„æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯æ ¹ç›®å½•ä¸‹build/intermediates/flutter/debug/libs.jaræ–‡ä»¶ File libJar = project.file(&quot;$&#123;project.buildDir&#125;/$&#123;AndroidProject.FD_INTERMEDIATES&#125;/flutter/$&#123;variant.name&#125;/libs.jar&quot;) //6ã€åˆ›å»ºpackLibsFlutterBuildProfileã€packLibsFlutterBuildDebugã€packLibsFlutterBuildReleaseä»»åŠ¡ï¼Œä¸»è¦æ˜¯äº§ç‰©çš„å¤åˆ¶æŒªä½ç½®æ“ä½œï¼ŒJar ç±»å‹çš„ task //ä½œç”¨å°±æ˜¯æŠŠbuild/intermediates/flutter/debug/ä¸‹ä¾æ®abiç”Ÿæˆçš„app.soé€šè¿‡jarå‘½ä»¤æ‰“åŒ…æˆbuild/intermediates/flutter/debug/libs.jar Task packFlutterAppAotTask = project.tasks.create(name: &quot;packLibs$&#123;FLUTTER_BUILD_PREFIX&#125;$&#123;variant.name.capitalize()&#125;&quot;, type: Jar) &#123; //ç›®æ ‡è·¯å¾„ä¸ºbuild/intermediates/flutter/debugç›®å½• destinationDir libJar.parentFile //æ–‡ä»¶åä¸ºlibs.jar archiveName libJar.name //ä¾èµ–å‰é¢æ­¥éª¤5å®šä¹‰çš„compileFlutterBuildDebugï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªtaskåŸºæœ¬ä½œç”¨æ˜¯äº§ç‰©å¤„ç† dependsOn compileTask //targetPlatformså–å€¼ä¸ºandroid-armã€android-arm64ã€android-x86ã€android-x64 targetPlatforms.each &#123; targetPlatform -&gt; //abiå–å€¼ä¸ºarmeabi-v7aã€arm64-v8aã€x86ã€x86_64 String abi = PLATFORM_ARCH_MAP[targetPlatform] //æ•°æ®æ¥æºæ¥è‡ªæ­¥éª¤5çš„compileFlutterBuildDebugä»»åŠ¡ä¸­é—´äº§ç‰©ç›®å½• //å³æŠŠbuild/intermediates/flutter/debug/ä¸‹ä¾æ®abiç”Ÿæˆçš„app.soé€šè¿‡jarå‘½ä»¤æ‰“åŒ…æˆä¸€ä¸ªbuild/intermediates/flutter/debug/libs.jaræ–‡ä»¶ from(&quot;$&#123;compileTask.intermediateDir&#125;/$&#123;abi&#125;&quot;) &#123; include &quot;*.so&quot; // Move `app.so` to `lib/&lt;abi&gt;/libapp.so` rename &#123; String filename -&gt; return &quot;lib/$&#123;abi&#125;/lib$&#123;filename&#125;&quot; &#125; &#125; &#125; &#125; //å‰é¢æœ‰ä»‹ç»è¿‡addApiDependenciesä½œç”¨ï¼ŒæŠŠ packFlutterAppAotTask äº§ç‰©åŠ åˆ°ä¾èµ–é¡¹é‡Œé¢å‚ä¸ç¼–è¯‘ //ç±»ä¼¼implementation files(&#x27;libs.jar&#x27;)ï¼Œç„¶åé‡Œé¢çš„soä¼šåœ¨é¡¹ç›®æ‰§è¡Œæ ‡å‡†mergeDebugNativeLibs taskæ—¶æ‰“åŒ…è¿›æ ‡å‡†libç›®å½• addApiDependencies(project, variant.name, project.files &#123; packFlutterAppAotTask &#125;) // å½“æ„å»ºæœ‰is-pluginå±æ€§æ—¶åˆ™ç¼–è¯‘aar boolean isBuildingAar = project.hasProperty(&#x27;is-plugin&#x27;) //7ã€å½“æ˜¯Flutter Moduleæ–¹å¼ï¼Œå³Flutterä»¥aarä½œä¸ºå·²å­˜åœ¨nativeå®‰å“é¡¹ç›®ä¾èµ–æ—¶æ‰æœ‰è¿™äº›:flutter:æ¨¡å—ä¾èµ–ï¼Œå¦åˆ™æ²¡æœ‰è¿™äº›task //å¯ä»¥å‚è§æ–°å»ºçš„FlutterModuleä¸­.android/include_flutter.groovyä¸­gradle.project(&quot;:flutter&quot;).projectDirå®ç° Task packageAssets = project.tasks.findByPath(&quot;:flutter:package$&#123;variant.name.capitalize()&#125;Assets&quot;) Task cleanPackageAssets = project.tasks.findByPath(&quot;:flutter:cleanPackage$&#123;variant.name.capitalize()&#125;Assets&quot;) //åˆ¤æ–­æ˜¯å¦ä¸ºFlutterModuleä¾èµ– boolean isUsedAsSubproject = packageAssets &amp;&amp; cleanPackageAssets &amp;&amp; !isBuildingAar //8ã€æ–°å»ºcopyFlutterAssetsDebug taskï¼Œç›®çš„å°±æ˜¯copyäº§ç‰©ï¼Œä¹Ÿå°±æ˜¯assetså½’æ¡£ //å¸¸è§„mergeä¸­é—´äº§ç‰©ç±»ä¼¼ï¼Œä¸å†è¿‡å¤šè§£é‡Šï¼Œå°±æ˜¯æŠŠæ­¥éª¤5 taskäº§ç‰©çš„assetsç›®å½•åœ¨mergeAssetsæ—¶å¤åˆ¶åˆ°ä¸»åŒ…ä¸­é—´äº§ç‰©ç›®å½• Task copyFlutterAssetsTask = project.tasks.create( name: &quot;copyFlutterAssets$&#123;variant.name.capitalize()&#125;&quot;, type: Copy, ) &#123; dependsOn compileTask with compileTask.assets if (isUsedAsSubproject) &#123; dependsOn packageAssets dependsOn cleanPackageAssets into packageAssets.outputDir return &#125; // `variant.mergeAssets` will be removed at the end of 2019. def mergeAssets = variant.hasProperty(&quot;mergeAssetsProvider&quot;) ? variant.mergeAssetsProvider.get() : variant.mergeAssets dependsOn mergeAssets dependsOn &quot;clean$&#123;mergeAssets.name.capitalize()&#125;&quot; mergeAssets.mustRunAfter(&quot;clean$&#123;mergeAssets.name.capitalize()&#125;&quot;) into mergeAssets.outputDir &#125; if (!isUsedAsSubproject) &#123; def variantOutput = variant.outputs.first() def processResources = variantOutput.hasProperty(&quot;processResourcesProvider&quot;) ? variantOutput.processResourcesProvider.get() : variantOutput.processResources processResources.dependsOn(copyFlutterAssetsTask) &#125; return copyFlutterAssetsTask &#125; // end def addFlutterDeps ......&#125; ä»¥ä¸Šå¤§éƒ¨åˆ†ä»£ç åªæ˜¯ä¸ºäº†æ‰§è¡Œä»¥ä¸‹è„šæœ¬æ—¶å‡†å¤‡é…ç½®å‚æ•° 123456789101112flutter assemble --no-version-check \\--depfile build/app/intermediates/flutter/release/flutter_build.d \\--output build/app/intermediates/flutter/release/ \\-dTargetFile=lib/main.dart \\-dTargetPlatform=android \\-dBuildMode=release \\-dDartObfuscation=true \\android_aot_bundle_release_android-arm \\android_aot_bundle_release_android-arm64 \\android_aot_bundle_release_android-x86 \\android_aot_bundle_release_android-x64 Flutter SDKä¸‹bin&#x2F;flutterç¼–è¯‘å‘½ä»¤åˆ†æflutterè„šæœ¬å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334#!/usr/bin/env bash#1ã€è¯¥å‘½ä»¤ä¹‹åå‡ºç°çš„ä»£ç ï¼Œä¸€æ—¦å‡ºç°äº†è¿”å›å€¼éé›¶ï¼Œæ•´ä¸ªè„šæœ¬å°±ä¼šç«‹å³é€€å‡ºï¼Œé‚£ä¹ˆå°±å¯ä»¥é¿å…ä¸€äº›è„šæœ¬çš„å±é™©æ“ä½œã€‚set -e#2ã€æ¸…ç©ºCDPATHå˜é‡å€¼unset CDPATH# åœ¨Macä¸Šï¼Œreadlink -fä¸èµ·ä½œç”¨ï¼Œå› æ­¤follow_linksä¸€æ¬¡éå†ä¸€ä¸ªé“¾æ¥çš„è·¯å¾„ï¼Œç„¶åéå†cdè¿›å…¥é“¾æ¥ç›®çš„åœ°å¹¶æ‰¾å‡ºå®ƒã€‚# è¿”å›çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„å¿…é¡»æ˜¯Dartçš„URIè§£æå™¨å¯ç”¨çš„æ ¼å¼ï¼Œå› ä¸ºDartå‘½ä»¤è¡Œå·¥å…·å°†å…¶å‚æ•°è§†ä¸ºæ–‡ä»¶URIï¼Œè€Œä¸æ˜¯æ–‡ä»¶åã€‚# ä¾‹å¦‚ï¼Œå¤šä¸ªè¿ç»­çš„æ–œæ åº”è¯¥å‡å°‘ä¸ºä¸€ä¸ªæ–œæ ï¼Œå› ä¸ºåŒæ–œæ è¡¨ç¤ºURIçš„authorityã€‚function follow_links() ( cd -P &quot;$(dirname -- &quot;$1&quot;)&quot; file=&quot;$PWD/$(basename -- &quot;$1&quot;)&quot; while [[ -h &quot;$file&quot; ]]; do cd -P &quot;$(dirname -- &quot;$file&quot;)&quot; file=&quot;$(readlink -- &quot;$file&quot;)&quot; cd -P &quot;$(dirname -- &quot;$file&quot;)&quot; file=&quot;$PWD/$(basename -- &quot;$file&quot;)&quot; done echo &quot;$file&quot;)# è¿™ä¸ªå˜é‡çš„å€¼å°±æ˜¯Flutter SDKæ ¹ç›®å½•ä¸‹çš„bin/flutterPROG_NAME=&quot;$(follow_links &quot;$&#123;BASH_SOURCE[0]&#125;&quot;)&quot;BIN_DIR=&quot;$(cd &quot;$&#123;PROG_NAME%/*&#125;&quot; ; pwd -P)&quot;OS=&quot;$(uname -s)&quot;# å¹³å°å…¼å®¹if [[ $OS =~ MINGW.* || $OS =~ CYGWIN.* ]]; then exec &quot;$&#123;BIN_DIR&#125;/flutter.bat&quot; &quot;$@&quot;fi#3ã€sourceå¯¼å…¥è¿™ä¸ªshellè„šæœ¬åæ‰§è¡Œå…¶å†…éƒ¨çš„shared::executeæ–¹æ³•source &quot;$BIN_DIR/internal/shared.sh&quot;shared::execute &quot;$@&quot; å…³æ³¨shared.shæ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778#......function shared::execute() &#123; #1ã€é»˜è®¤FLUTTER_ROOTå€¼ä¸ºFlutterSDKæ ¹è·¯å¾„ export FLUTTER_ROOT=&quot;$(cd &quot;$&#123;BIN_DIR&#125;/..&quot; ; pwd -P)&quot; #2ã€å¦‚æœå­˜åœ¨å°±å…ˆæ‰§è¡Œbootstrapè„šæœ¬ï¼Œé»˜è®¤SDKä¸‹é¢æ˜¯æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶çš„ï¼Œæˆ‘çŒœæ˜¯é¢„ç•™ç»™æˆ‘ä»¬è‡ªå®šä¹‰åˆå§‹åŒ–æŒ‚è½½ç”¨çš„ã€‚ BOOTSTRAP_PATH=&quot;$FLUTTER_ROOT/bin/internal/bootstrap.sh&quot; if [ -f &quot;$BOOTSTRAP_PATH&quot; ]; then source &quot;$BOOTSTRAP_PATH&quot; fi #3ã€ä¸€å †åŸºäºFlutterSDKè·¯å¾„çš„ä½ç½®å®šä¹‰ FLUTTER_TOOLS_DIR=&quot;$FLUTTER_ROOT/packages/flutter_tools&quot; SNAPSHOT_PATH=&quot;$FLUTTER_ROOT/bin/cache/flutter_tools.snapshot&quot; STAMP_PATH=&quot;$FLUTTER_ROOT/bin/cache/flutter_tools.stamp&quot; SCRIPT_PATH=&quot;$FLUTTER_TOOLS_DIR/bin/flutter_tools.dart&quot; DART_SDK_PATH=&quot;$FLUTTER_ROOT/bin/cache/dart-sdk&quot; DART=&quot;$DART_SDK_PATH/bin/dart&quot; PUB=&quot;$DART_SDK_PATH/bin/pub&quot; #4ã€è·¯å¾„æ–‡ä»¶å¹³å°å…¼å®¹ï¼Œå¸¸è§„æ“ä½œï¼Œå¿½ç•¥ case &quot;$(uname -s)&quot; in MINGW*) DART=&quot;$DART.exe&quot; PUB=&quot;$PUB.bat&quot; ;; esac #5ã€æµ‹è¯•è¿è¡Œè„šæœ¬çš„è´¦å·æ˜¯å¦ä¸ºè¶…çº§è´¦å·ï¼Œæ˜¯çš„è¯è­¦å‘Šæç¤ºï¼ŒDockerå’ŒCIç¯å¢ƒä¸è­¦å‘Šã€‚ if [[ &quot;$EUID&quot; == &quot;0&quot; &amp;&amp; ! -f /.dockerenv &amp;&amp; &quot;$CI&quot; != &quot;true&quot; &amp;&amp; &quot;$BOT&quot; != &quot;true&quot; &amp;&amp; &quot;$CONTINUOUS_INTEGRATION&quot; != &quot;true&quot; ]]; then &gt;&amp;2 echo &quot; Woah! You appear to be trying to run flutter as root.&quot; &gt;&amp;2 echo &quot; We strongly recommend running the flutter tool without superuser privileges.&quot; &gt;&amp;2 echo &quot; /&quot; &gt;&amp;2 echo &quot;ğŸ“&quot; fi #6ã€æµ‹è¯•gitå‘½ä»¤è¡Œç¯å¢ƒé…ç½®æ˜¯å¦æ­£å¸¸ï¼Œä¸æ­£å¸¸å°±æŠ›å‡ºé”™è¯¯ã€‚ if ! hash git 2&gt;/dev/null; then &gt;&amp;2 echo &quot;Error: Unable to find git in your PATH.&quot; exit 1 fi #7ã€FlutterSDKæ˜¯å¦æ¥è‡ªcloneç­‰æµ‹è¯•ã€‚ if [[ ! -e &quot;$FLUTTER_ROOT/.git&quot; ]]; then &gt;&amp;2 echo &quot;Error: The Flutter directory is not a clone of the GitHub project.&quot; &gt;&amp;2 echo &quot; The flutter tool requires Git in order to operate properly;&quot; &gt;&amp;2 echo &quot; to install Flutter, see the instructions at:&quot; &gt;&amp;2 echo &quot; https://flutter.dev/get-started&quot; exit 1 fi # To debug the tool, you can uncomment the following lines to enable checked # mode and set an observatory port: # FLUTTER_TOOL_ARGS=&quot;--enable-asserts $FLUTTER_TOOL_ARGS&quot; # FLUTTER_TOOL_ARGS=&quot;$FLUTTER_TOOL_ARGS --observe=65432&quot; #7ã€æ—¥å¸¸ç¼–è¯‘é‡åˆ°å‘½ä»¤lockæ–‡ä»¶é”ä½é—®é¢˜å°±æ˜¯ä»–ï¼Œæœ¬è´¨è¯¥æ–¹æ³•å°±æ˜¯åˆ›å»º/bin/cacheç›®å½•å¹¶ç»´æŒé”çŠ¶æ€ç­‰äº‹æƒ…ï¼Œä¸æ˜¯æˆ‘ä»¬å…³å¿ƒçš„é‡ç‚¹ã€‚ upgrade_flutter 7&lt; &quot;$PROG_NAME&quot; #8ã€ç›¸å…³å‚æ•°å€¼ï¼Œåˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“çš„ï¼Œé—®å°±æ˜¯è‡ªå·±åœ¨æºç å¯¹åº”ä½ç½®echoè¾“å‡ºæ‰“å°çš„ # BIN_NAME=flutterã€PROG_NAME=FLUTTER_SDK_DIR/bin/flutter # DART=FLUTTER_SDK_DIR/bin/cache/dart-sdk/bin/dart # FLUTTER_TOOLS_DIR=FLUTTER_SDK_DIR/packages/flutter_tools # FLUTTER_TOOL_ARGS=ç©º # SNAPSHOT_PATH=FLUTTER_SDK_DIR/bin/cache/flutter_tools.snapshot # @=build apk BIN_NAME=&quot;$(basename &quot;$PROG_NAME&quot;)&quot; case &quot;$BIN_NAME&quot; in flutter*) # FLUTTER_TOOL_ARGS aren&#x27;t quoted below, because it is meant to be # considered as separate space-separated args. &quot;$DART&quot; --disable-dart-dev --packages=&quot;$FLUTTER_TOOLS_DIR/.packages&quot; $FLUTTER_TOOL_ARGS &quot;$SNAPSHOT_PATH&quot; &quot;$@&quot; ;; dart*) &quot;$DART&quot; &quot;$@&quot; ;; *) &gt;&amp;2 echo &quot;Error! Executable name $BIN_NAME not recognized!&quot; exit 1 ;; esac&#125; å¯ä»¥çœ‹åˆ°ï¼Œç”±äº Flutter SDK å†…éƒ¨å†…ç½®äº† Dartï¼Œæ‰€ä»¥å½“é…ç½®ç¯å¢ƒå˜é‡å flutterã€dart å‘½ä»¤éƒ½å¯ä»¥ä½¿ç”¨äº†ã€‚è€Œæˆ‘ä»¬å®‰è£… Flutter SDK åé¦–å…ˆåšçš„äº‹æƒ…å°±æ˜¯æŠŠ SDK çš„ bin ç›®å½•é…ç½®åˆ°äº†ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æ‰§è¡Œçš„ flutter build apkã€flutter upgradeã€flutter pub xxx ç­‰å‘½ä»¤æœ¬è´¨éƒ½æ˜¯èµ°è¿›äº†ä¸Šé¢è¿™äº›è„šæœ¬ï¼Œä¸” flutter å‘½ä»¤åªæ˜¯å¯¹ dart å‘½ä»¤çš„ä¸€ä¸ªåŒ…è£…ï¼Œæ‰€ä»¥æ‰§è¡Œflutter pub getå…¶å®ç­‰ä»·äºdart pub getã€‚æ‰€ä»¥å‡è®¾æˆ‘ä»¬æ‰§è¡Œflutter build apkå‘½ä»¤ï¼Œæœ¬è´¨èµ°åˆ°ä¸Šé¢è„šæœ¬æœ€ç»ˆæ‰§è¡Œçš„å‘½ä»¤å¦‚ä¸‹ï¼š 12345FLUTTER_SDK_DIR/bin/cache/dart-sdk/bin/dart \\--disable-dart-dev --packages=FLUTTER_SDK_DIR/packages/flutter_tools/.packages \\FLUTTER_SDK_DIR/bin/cache/flutter_tools.snapshot \\build apk ä¸Šé¢å‘½ä»¤è¡Œä¸­ FLUTTER_SDK_DIR ä»£è¡¨çš„å°±æ˜¯ Flutter SDK çš„æ ¹ç›®å½•ï¼Œâ€“packageså¯ä»¥ç†è§£æˆæ˜¯ä¸€å † SDK ç›¸å…³ä¾èµ–ï¼ŒFLUTTER_SDK_DIR&#x2F;bin&#x2F;cache&#x2F;flutter_tools.snapshotå°±æ˜¯FLUTTER_SDK_DIR&#x2F;packages&#x2F;flutter_toolsçš„ç¼–è¯‘äº§ç‰©ã€‚æ‰€ä»¥ï¼Œä¸Šé¢å…¶å®é€šè¿‡ dart å‘½ä»¤æ‰§è¡Œflutter_tools.snapshotæ–‡ä»¶ä¹Ÿå°±æ˜¯ç­‰ä»·äºæ‰§è¡Œflutter_tools.dartçš„main()æ–¹æ³•ã€‚å› æ­¤ä¸Šé¢å‘½ä»¤ç»§ç»­ç®€åŒ–å¤§è‡´å¦‚ä¸‹: 123dart --disable-dart-dev --packages=xxx flutter_tools.dart build apk ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬æ‰§è¡Œçš„ä»»ä½• flutter å‘½ä»¤ï¼Œæœ¬è´¨éƒ½æ˜¯æŠŠå‚æ•°ä¼ é€’åˆ°äº†FLUTTER_SDK_DIR&#x2F;packages&#x2F;flutter_tools&#x2F;bin&#x2F;flutter_tools.dartæºç çš„ main æ–¹æ³•ä¸­ flutter_toolsä¼šæ‰§è¡Œflutter_tools&#x2F;libæ–‡ä»¶å¤¹ä¸­çš„ä»£ç ï¼Œä¸åŒçš„å‚æ•°å¯¹åº”commandsä¸­ä¸åŒçš„æ–‡ä»¶ï¼Œæ¯”å¦‚buildå¯¹åº”lib&#x2F;src&#x2F;commands&#x2F;build.dart å‚è€ƒ Flutter Android å·¥ç¨‹ç»“æ„åŠåº”ç”¨å±‚ç¼–è¯‘æºç æ·±å…¥åˆ†æ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"å¼•æ“å¯åŠ¨æµç¨‹ï¼ˆä¸€ï¼‰","date":"2023-08-19T09:57:33.294Z","path":"wiki/Flutter/æºç åˆ†æ/å¼•æ“å¯åŠ¨æµç¨‹(ä¸€)/","text":"Flutteræ˜¯å¦‚ä½•åœ¨Androidçš„åŸºç¡€ä¸Šå¯åŠ¨çš„å‘¢ï¼ŸæŸ¥çœ‹Flutteré¡¹ç›®çš„Androidç«¯ä»£ç ï¼Œä¼šå‘ç°Activityæ˜¯ç»§æ‰¿FlutterActivityï¼ŒApplicationæ˜¯ç»§æ‰¿FlutterApplicationçš„ï¼Œé‚£ä¹ˆä»–ä»¬æ˜¯å¦‚ä½•é“¾æ¥Nativeå’ŒFlutterçš„å‘¢ï¼Ÿ FlutterApplicationï¼š onCreateè¿‡ç¨‹ä¸­è¿›è¡Œåˆå§‹åŒ–é…ç½®ï¼ŒåŠ è½½libflutter.soï¼Œæ³¨å†ŒJNIæ–¹æ³• FlutterActivityï¼šonCreateè¿‡ç¨‹ä¸­è¿›è¡Œåˆ›å»ºFlutterViewã€Dartè™šæ‹Ÿæœºã€Enigineã€Isolateã€taskRunnerç­‰å¯¹è±¡ï¼Œæœ€ç»ˆæ‰§è¡Œåˆ°Dartçš„mainæ–¹æ³• FlutterApplicationå¯åŠ¨æµç¨‹FlutterActivityå¯åŠ¨æµç¨‹å‚è€ƒ æ·±å…¥ç†è§£Flutterå¼•æ“å¯åŠ¨","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"ç¼–è¯‘Flutteræºç ","date":"2023-08-19T09:57:33.293Z","path":"wiki/Flutter/æœªåˆ†ç±»/ç¼–è¯‘Flutteræºç /","text":"Macä¸‹ç¼–è¯‘EngineEngineå®ç°äº†Flutterçš„æ ¸å¿ƒåº“ï¼ŒåŒ…æ‹¬åŠ¨ç”»ã€å›¾å½¢ã€æ–‡ä»¶ã€ç½‘ç»œã€è®¿é—®æ”¯æŒã€æ’ä»¶æ¶æ„ã€Dartçš„è¿è¡Œæ—¶ã€ç¼–è¯‘å·¥å…·é“¾ç­‰ å‡†å¤‡å·¥ä½œ1234567# å‡†å¤‡depot_toolså·¥å…·# å‡è®¾å½“å‰ç›®å½•æ˜¯$HOME/Flutter/sourcecd $HOME/Flutter/sourcegit clone https://chromium.googlesource.com/chromium/tools/depot_tools.git#æ·»åŠ ç¯å¢ƒå˜é‡export PATH=$PATH:$HOME/Flutter/source/depot_tools ä¸‹è½½æºç  è¿›å…¥githubçš„flutterå®˜ç½‘ï¼Œforkä¸€ä»½engineçš„æºç ï¼šhttps://github.com/flutter/engine åœ¨$HOME&#x2F;Flutter&#x2F;sourceç›®å½•æ–°å»º.gclientæ–‡ä»¶ 12345678910solutions = [ &#123; &quot;managed&quot;: False, &quot;name&quot;: &quot;src/flutter&quot;, &quot;url&quot;: &quot;git@github.com:airshu/engine.git&quot;,//è¿™é‡Œä½¿ç”¨è‡ªå·±çš„ä»“åº“åœ°å€ &quot;custom_deps&quot;: &#123;&#125;, &quot;deps_file&quot;: &quot;DEPS&quot;, &quot;safesync_url&quot;: &quot;&quot;, &#125;,] è¿è¡Œå‘½ä»¤ï¼šgclient sync åŒæ­¥æœ€æ–°çš„åˆ†æ”¯ä»£ç  123456cd src/fluttergit remote add upstream git@github.com:flutter/engine.gitcd ..gclient sync è°ƒæ•´ç‰ˆæœ¬123456789#æŸ¥çœ‹engineå¯¹åº”ç‰ˆæœ¬è·å–commit idvim src/flutter/bin/internal/engine.version# è°ƒæ•´ä»£ç cd engine/src/fluttergit reset --hard &lt;commit id&gt;gclient sync -D --with_branch_heads --with_tags ç¼–è¯‘iOSå¹³å°1234567891011121314151617181920212223cd xxx/source #sourceç›®å½•ä¸ºè‡ªå®šä¹‰çš„æºç ç›®å½•# ä¸‹è½½å¯¹åº”Engineçš„Flutter Frameworkæºç  https://github.com/flutter/fluttercd flutter# ä¸å»ºè®®ä½¿ç”¨masteråˆ†æ”¯ï¼Œè¿™é‡Œä½¿ç”¨2.5.1çš„åˆ†æ”¯git pull origin flutter-2.5-candidate.1:flutter-2.5-candidate.1# æŸ¥çœ‹è¯¥åˆ†æ”¯çš„æäº¤ç‰ˆæœ¬å·cat bin/internal/engine.version# è¿›å…¥src/flutterç›®å½•ï¼Œåˆ‡æ¢åˆ†æ”¯cd ../src/fluttergit checkout -b a877f6fed68e1b961f76ec0fece9e7c684679e75cd ..gclient sync./flutter/tools/gn --ios --unoptimized./flutter/tools/gn --unoptimizedninja -C out/ios_debug_unopt &amp;&amp; ninja -C out/host_debug_unopt# ä½¿ç”¨cd xxx/source./flutter/bin/flutter create hello_worldcd hello_world# ç”¨æœ¬åœ°ç¼–è¯‘çš„Engineè¿è¡Œé¡¹ç›®../flutter/bin/flutter run --local-engine-src-path ~/flutter/source/src --local-engine=ios_debug_unopt ç¼–è¯‘Androidå¹³å°12345678910111213141516# é¢„ç¼–è¯‘è®¾å¤‡ä¾§å¯æ‰§è¡Œæ–‡ä»¶./flutter/tools/gn --android --unoptimized#é¢„ç¼–è¯‘arm64è®¾å¤‡çš„é¢„ç¼–è¯‘æ–‡ä»¶./flutter/tools/gn --android --android-cpu arm64 --unoptimized #é¢„ç¼–è¯‘host-sideå¯æ‰§è¡Œæ–‡ä»¶./flutter/tools/gn --unoptimized## æ„å»º# æ„å»ºè®¾å¤‡ä¾§å¯æ‰§è¡Œæ–‡ä»¶ninja -C out/android_debug_unopt -j 8# æ„å»ºarm64å¹³å°ninja -C out/android_debug_unopt_arm64# ç¼–è¯‘host-sideæ–‡ä»¶ninja -C out/host_debug_unopt Debugæºç Debug Javaå±‚æºç  å°†engine&#x2F;src&#x2F;flutter&#x2F;shell&#x2F;platform&#x2F;androidï¼ˆFlutterå¼•æ“é¡¹ç›®ï¼‰ç›®å½•å¯¼å…¥Android Studio ç”¨æœ¬åœ°Engineè¿è¡ŒFlutteré¡¹ç›® 1234#local-engine-src-pathæŒ‡å‘æºç ç›®å½•#local-engineæŒ‡å‘ç¼–è¯‘çš„ç›®æ ‡#ä¹Ÿå¯ä»¥ç›´æ¥åœ¨gradle.propertiesä¸­é…ç½®è¿™ä¸¤ä¸ªå±æ€§../flutter/bin/flutter run --local-engine=android_debug_unopt --local-engine-src-path=/Users/xpeng/flutter/source/src Flutterå¼•æ“é¡¹ç›®è¿›è¡Œattachï¼Œé€‰ä¸­Show all processes æ³¨æ„ attachçš„æ—¶å€™ï¼Œæœ‰äº›ä»£ç å·²ç»è¿è¡Œè¿‡äº†ã€‚å¦‚æœæƒ³è¦æ—©ä¸€ç‚¹æ–­ç‚¹ï¼Œå¯ä»¥ä½¿ç”¨Debug.waitForDebugger()ï¼Œåº”ç”¨ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°æœ‰Debuggerè¿æ¥æ‰æ‰§è¡Œã€‚ 1234567891011// æ·»åŠ Appæ–‡ä»¶ï¼Œé…ç½®Applicationpackage com.yourdomain.your_app_nameimport android.os.Debugimport io.flutter.app.FlutterApplicationclass App:FlutterApplication() &#123; override fun onCreate() &#123; Debug.waitForDebugger() super.onCreate() &#125;&#125; Debug C++å±‚æºç å‚è€ƒ Flutter å¼•æ“ç¼–è¯‘ã€è¿è¡Œä¸è°ƒè¯• Flutter-Engine-C-æºç è°ƒè¯•åˆæ¢ ç¼–è¯‘å‰ç¯å¢ƒå‡†å¤‡ ç¼–è¯‘æ–‡æ¡£","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"AspectD","date":"2023-08-19T09:57:33.292Z","path":"wiki/Flutter/å¼€æºåº“/AspectD/","text":"AOPçš„ä½œç”¨ å‡å°‘ä»£ç å…¥ä¾µçš„åŸ‹ç‚¹ æ€§èƒ½ç›‘æ§ å‚è€ƒ å’¸é±¼aspectd è´å£³Beike_AspectD Flutter aspectd ï¼ˆäºŒï¼‰æºç è§£æ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"æ€§èƒ½ä¼˜åŒ–ä¹‹åˆ†å¸§æ¸²æŸ“","date":"2023-08-19T09:57:33.292Z","path":"wiki/Flutter/æœªåˆ†ç±»/æ€§èƒ½ä¼˜åŒ–ä¹‹åˆ†å¸§æ¸²æŸ“/","text":"https://github.com/LianjiaTech/keframe https://github.com/fzyzcjy/flutter_smooth ListViewæµç•…åº¦ç¿»å€ï¼ï¼Flutterå¡é¡¿åˆ†æå’Œé€šç”¨ä¼˜åŒ–æ–¹æ¡ˆ Flutter åˆ†å¸§ä¸Šå±æºç æµ…æ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"extended_image","date":"2023-08-19T09:57:33.292Z","path":"wiki/Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³/extended_image/","text":"https://pub.dev/packages/extended_image https://github.com/fluttercandies/extended_image&#x2F;blob&#x2F;master&#x2F;README-ZH.md Androidä¸­å›¾ç‰‡å ç”¨å†…å­˜è®¡ç®—æ–¹æ³• å¼ºå¤§çš„å®˜æ–¹ Image æ‰©å±•ç»„ä»¶, æ”¯æŒåŠ è½½ä»¥åŠå¤±è´¥æ˜¾ç¤ºï¼Œç¼“å­˜ç½‘ç»œå›¾ç‰‡ï¼Œç¼©æ”¾æ‹–æ‹½å›¾ç‰‡ï¼Œå›¾ç‰‡æµè§ˆï¼Œæ»‘åŠ¨é€€å‡ºé¡µé¢ï¼Œç¼–è¾‘å›¾ç‰‡(è£å‰ªæ—‹è½¬ç¿»è½¬)ï¼Œä¿å­˜ï¼Œç»˜åˆ¶è‡ªå®šä¹‰æ•ˆæœç­‰åŠŸèƒ½ å›¾ç‰‡å¤„ç†è¿‡ç¨‹ä¸­çš„ä¸€äº›æŠ€å·§ ç½‘ç»œå›¾ç‰‡è®°å¾—è¿›è¡Œå‹ç¼©ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºç°å†…å­˜æº¢å‡ºé—®é¢˜ å¯¹äºå¸¸ç”¨çš„ä¸å˜çš„å›¾ç‰‡ï¼Œå¯ä»¥æ·»åŠ ç£ç›˜ç¼“å­˜ï¼Œé¿å…æ¯æ¬¡éƒ½ä»ç½‘ç»œåŠ è½½","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"å›¾ç‰‡ç›¸å…³","slug":"Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/%E5%9B%BE%E7%89%87%E7%9B%B8%E5%85%B3/"}]},{"title":"ImageåŸºç¡€","date":"2023-08-19T09:57:33.292Z","path":"wiki/Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³/imageåŸºç¡€/","text":"å›¾ç‰‡ä¹Ÿæ˜¯ä¸€ç§äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå›¾ç‰‡çš„åŸå§‹æ•°æ®ä¸­æ¯ä¸ªåƒç´ åœ¨å†…å­˜ä¸­ä¸€èˆ¬å ç”¨2-4ä¸ªå­—èŠ‚ type bits memory ARGB_8888 32 4wh ARBG_4444 16 2wh RGB_565 16 2wh ALPHA_8 8 1wh Flutterä¸­å¸¸è§çš„å›¾ç‰‡ç›¸å…³APIRawImageå±æ€§colorã€colorBlendModecoloræŒ‡å®šæ··åˆè‰²ï¼ŒcolorBlendModeæŒ‡å®šæ··åˆæ¨¡å¼ fitç¼©æ”¾æ–¹å¼ï¼Œå¦‚æœåªè®¾ç½®widthã€heightçš„å…¶ä¸­ä¸€ä¸ªï¼Œåˆ™å¦ä¸€ä¸ªå±æ€§ä¼šæŒ‰ç…§fitçš„è®¾ç½®æ¥ç¼©æ”¾ fillï¼šæ‹‰ä¼¸å¡«å…… containï¼šè¿™æ˜¯å›¾ç‰‡çš„é»˜è®¤é€‚åº”è§„åˆ™ï¼Œå›¾ç‰‡ä¼šåœ¨ä¿è¯å›¾ç‰‡æœ¬èº«é•¿å®½æ¯”ä¸å˜çš„æƒ…å†µä¸‹ç¼©æ”¾ä»¥é€‚åº”å½“å‰æ˜¾ç¤ºç©ºé—´ï¼Œå›¾ç‰‡ä¸ä¼šå˜å½¢ coverï¼šä¼šæŒ‰å›¾ç‰‡çš„é•¿å®½æ¯”æ”¾å¤§åå±…ä¸­å¡«æ»¡æ˜¾ç¤ºç©ºé—´ï¼Œå›¾ç‰‡ä¸ä¼šå˜å½¢ï¼Œè¶…å‡ºæ˜¾ç¤ºç©ºé—´éƒ¨åˆ†ä¼šè¢«å‰ªè£ fitWidthï¼šå›¾ç‰‡çš„å®½åº¦ä¼šç¼©æ”¾åˆ°æ˜¾ç¤ºç©ºé—´çš„å®½åº¦ï¼Œé«˜åº¦ä¼šæŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼Œç„¶åå±…ä¸­æ˜¾ç¤ºï¼Œå›¾ç‰‡ä¸ä¼šå˜å½¢ï¼Œè¶…å‡ºæ˜¾ç¤ºç©ºé—´éƒ¨åˆ†ä¼šè¢«å‰ªè£ fitHeightï¼šå›¾ç‰‡çš„é«˜åº¦ä¼šç¼©æ”¾åˆ°æ˜¾ç¤ºç©ºé—´çš„é«˜åº¦ï¼Œå®½åº¦ä¼šæŒ‰æ¯”ä¾‹ç¼©æ”¾ï¼Œç„¶åå±…ä¸­æ˜¾ç¤ºï¼Œå›¾ç‰‡ä¸ä¼šå˜å½¢ï¼Œè¶…å‡ºæ˜¾ç¤ºç©ºé—´éƒ¨åˆ†ä¼šè¢«å‰ªè£ noneï¼šå›¾ç‰‡æ²¡æœ‰é€‚åº”ç­–ç•¥ï¼Œä¼šåœ¨æ˜¾ç¤ºç©ºé—´å†…æ˜¾ç¤ºå›¾ç‰‡ï¼Œå¦‚æœå›¾ç‰‡æ¯”æ˜¾ç¤ºç©ºé—´å¤§ï¼Œåˆ™æ˜¾ç¤ºç©ºé—´åªä¼šæ˜¾ç¤ºå›¾ç‰‡ä¸­é—´éƒ¨åˆ† scaleDownï¼š Imageå°è£…äº†RawImageï¼Œæ–¹ä¾¿ä½¿ç”¨ 123456789Widget image = Image.asset(&quot;images/yuan.png&quot;);Widget image = Image.network(&quot;http://img.rangaofei.cn/01b18.jpg&quot;);Widget image = Image.file(file);Widget image = Image.memory(byteList); å±æ€§ imageï¼šImageProviderç±»å‹ï¼Œå®šä¹‰äº†å›¾ç‰‡æ•°æ®è·å–å’ŒåŠ è½½çš„ç›¸å…³æ¥å£ CircleAvataråœ†å½¢å›¾ç‰‡ 12345678CircleAvatar( child: Text(&quot;å¤´åƒ&quot;), backgroundImage: AssetImage(&quot;images/yuan.png&quot;), backgroundColor: Colors.red, radius: 50.0,), DecorationImage1234Container( decoration: BoxDecoration( image: DecorationImage(image: AssetImage(&quot;images/yuan.png&quot;))),); Ink.image1Ink.image(image: AssetImage(&quot;images/timg.jpeg&quot;)); ImageIcon1ImageIcon(AssetImage(&quot;images/timg.jpeg&quot;)); FadeInImageæ³¨æ„flutteré»˜è®¤æä¾›å›¾ç‰‡å†…å­˜çš„ç¼“å­˜ï¼Œä½†æ²¡æœ‰ç£ç›˜ç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨flutter_cached_network_imageæ¥åšç£ç›˜ç¼“å­˜ æºç åˆ†æç›¸å…³ç±»ï¼š Imageï¼šç”¨æ¥æ˜¾ç¤ºå›¾ç‰‡ _ImageStateï¼šçŠ¶æ€ç±»ï¼Œå¤„ç†ç”Ÿå‘½å‘¨æœŸã€è°ƒç”¨åŠ è½½ ImageProviderï¼šå›¾ç‰‡æä¾›è€…ï¼Œç”¨äºåŠ è½½å›¾ç‰‡ï¼Œä¾‹å¦‚NetworkImageã€ResizeImage ImageStreamCompleterï¼šå›¾ç‰‡èµ„æºçš„ç®¡ç†ç±» ImageStreamï¼šå›¾ç‰‡èµ„æºçš„å¥æŸ„ï¼ŒæŒæœ‰å›¾ç‰‡èµ„æºï¼ŒåŠ è½½å®Œæ¯•åçš„å›è°ƒå’Œå›¾ç‰‡èµ„æºçš„ç®¡ç†ç€ï¼ŒImageStreamCompleterå¯¹è±¡å°±æ˜¯å›¾ç‰‡èµ„æºçš„ç®¡ç†ç±» MultiFrameImageStreamCompleterï¼šå¤šå¸§å›¾ç‰‡è§£æå™¨ ImageStreamListenerï¼šç›‘å¬å›¾ç‰‡çš„åŠ è½½ç»“æœï¼ŒåŠ è½½å®Œæˆåä¼šè¿›è¡Œå›è°ƒï¼Œç„¶ååˆ·æ–°é¡µé¢æ˜¾ç¤º å‚è€ƒ Flutterå®æˆ˜ï¼šå›¾ç‰‡åŠICON Flutterå®æˆ˜ï¼šå›¾ç‰‡åŠ è½½åŸç†ä¸ç¼“å­˜ Flutterä¸­çš„Imageå…¥é—¨è®²è§£ Flutterå›¾ç‰‡å†…å­˜ä¼˜åŒ–å®è·µ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"å›¾ç‰‡ç›¸å…³","slug":"Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/%E5%9B%BE%E7%89%87%E7%9B%B8%E5%85%B3/"}]},{"title":"Flutterå­¦ä¹ èµ„æºæ±‡æ€»","date":"2023-08-19T09:57:33.291Z","path":"wiki/Flutter/Flutterå­¦ä¹ èµ„æºæ±‡æ€»/","text":"å®˜æ–¹æ–‡æ¡£åº“ Flutteræ¸²æŸ“æœºåˆ¶â€”UIçº¿ç¨‹ Flutteræ¸²æŸ“æœºåˆ¶â€”GPUçº¿ç¨‹ æ·±å…¥ç†è§£Flutterå¼•æ“å¯åŠ¨ æ·±å…¥ç†è§£Dartè™šæ‹Ÿæœºå¯åŠ¨ æ·±å…¥ç†è§£Flutteråº”ç”¨å¯åŠ¨ æ·±å…¥ç†è§£setStateæ›´æ–°æœºåˆ¶ æ·±å…¥ç†è§£FlutteråŠ¨ç”»åŸç† æ·±å…¥ç†è§£Flutteræ¶ˆæ¯æœºåˆ¶ Flutter UI æ¸²æŸ“æµ…æï¼ˆäº”ï¼‰Layout Flutter UI æ¸²æŸ“æµ…æï¼ˆå…­ï¼‰Paint Flutter UI æ¸²æŸ“æµ…æï¼ˆä¸ƒï¼‰Composite è·å–å¹¶è¿˜åŸFlutter-Engine-Crashå †æ ˆ http://gityuan.com http://w4lle.com https://fucknmb.com","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"Androidé¢è¯•é¢˜æ”¶é›†","date":"2023-08-19T09:57:33.291Z","path":"wiki/Android/æœªåˆ†ç±»/Androidé¢è¯•é¢˜æ”¶é›†/","text":"https://github.com/Moosphan/Android-Daily-Interview https://github.com/lizhangqu/CoreLink","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æœªåˆ†ç±»","slug":"Android/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Android/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"Handlerä½¿ç”¨ä¸å½“é€ æˆçš„OOM","date":"2023-08-19T09:57:33.291Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜/Handlerä½¿ç”¨ä¸å½“é€ æˆçš„OOM/","text":"é—®é¢˜é‡ç°ç¼–å†™ä»¥ä¸‹ä»£ç  123456789101112131415161718public class OOMHandlerActivity extends Activity &#123; private Handler mHandler = new Handler() &#123; @Override public void handleMessage(Message msg) &#123; super.handleMessage(msg); ((EditText) findViewById(R.id.oom_handler_edit_text)).setText(&quot;aaaas&quot;); &#125; &#125;; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_oom_handler); mHandler.sendEmptyMessageDelayed(1, 1000 * 60); //è¿™é‡Œæ³¨æ„ï¼Œå½“å»¶è¿Ÿæ—¶é—´è¾ƒå°æ—¶ï¼ŒProfileä¸­Leaksæ˜¾ç¤ºä¸º0 &#125;&#125; ä½¿ç”¨Android Studioè‡ªå¸¦çš„Profileè¿›è¡Œç›‘æ§ï¼Œæ‰“å¼€OOMHandlerActivityé¡µé¢ï¼Œç„¶åè¿”å›ä¸Šä¸€ä¸ªé¡µé¢ã€‚Dumpå†…å­˜åï¼Œä¼šå‡ºç°ä»¥ä¸‹æç¤ºï¼š åŸå› åˆ†æä¾æ®Handlerçš„å®ç°åŸç†ï¼Œæˆ‘ä»¬å¯çŸ¥ï¼Œå†…å­˜æ³„æ¼çš„å¼•ç”¨é“¾å¦‚ä¸‹ï¼š ä¸»çº¿ç¨‹ â€”&gt; threadlocal â€”&gt; Looper â€”&gt; MessageQueue â€”&gt; Message â€”&gt; Handler â€”&gt; Activity è§£å†³åŠæ³•å¯¹äºHandlerçš„ä½¿ç”¨æŠ€å·§ï¼Œæˆ‘ä»¬åº”è¯¥ï¼š ä½¿ç”¨é™æ€å†…éƒ¨ç±»çš„æ–¹å¼ å¦‚æœéœ€è¦å¤„ç†å®¿ä¸»ï¼Œåˆ™é€šè¿‡å¼±å¼•ç”¨çš„ä¼ å…¥è¿›æ¥ Activityç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œé‡Šæ”¾Handlerèµ„æº å‚è€ƒä»¥ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package com.lqd.androidpractice.oom.handler;import android.app.Activity;import android.content.Context;import android.os.Bundle;import android.os.Handler;import android.os.Message;import android.widget.TextView;import com.lqd.androidpractice.R;import java.lang.ref.WeakReference;/** * @author: Airshu * @Date 2021/6/18 */public class OOMHandlerRightActivity extends Activity &#123; private MyHandler mHandler = new MyHandler(this); private TextView mTextView; //ä½¿ç”¨é™æ€å†…éƒ¨ç±» private static class MyHandler extends Handler &#123; private WeakReference&lt;Context&gt; reference;//ä½¿ç”¨å¼±å¼•ç”¨ public MyHandler(Context context) &#123; reference = new WeakReference&lt;&gt;(context); &#125; @Override public void handleMessage(Message msg) &#123; OOMHandlerRightActivity activity = (OOMHandlerRightActivity) reference.get(); if (activity != null) &#123; activity.mTextView.setText(&quot;&quot;); &#125; &#125; &#125; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_oom_handler); mTextView = (TextView) findViewById(R.id.textview); mHandler.sendEmptyMessageDelayed(1, 1000 * 60); &#125; @Override protected void onDestroy() &#123; super.onDestroy(); mHandler.removeCallbacksAndMessages(null);//Activityé”€æ¯æ—¶åŒæ—¶ç§»é™¤handlerçš„ç›‘å¬ &#125;&#125; å‚è€ƒ https://www.cnblogs.com/jimuzz/p/14187408.html","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"OOMä¸“é¢˜","slug":"Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/OOM%E4%B8%93%E9%A2%98/"}]},{"title":"HTTPåè®®","date":"2023-07-15T01:43:36.912Z","path":"wiki/ç¨‹åºè¯­è¨€/ç½‘ç»œç¼–ç¨‹/HTTPåè®®/","text":"HTTP åè®®çš„è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡çš„ç»“æ„åŸºæœ¬ç›¸åŒï¼Œä¸»è¦ç”±ä¸‰å¤§éƒ¨åˆ†ç»„æˆï¼š çŠ¶æ€è¡Œï¼ˆstatus lineï¼‰ï¼šæè¿°å“åº”çš„åŸºæœ¬ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯æœåŠ¡å™¨å“åº”çš„çŠ¶æ€ï¼› å¤´éƒ¨å­—æ®µé›†åˆï¼ˆheaderï¼‰ï¼šä½¿ç”¨ key-value å½¢å¼æ›´è¯¦ç»†åœ°è¯´æ˜æŠ¥æ–‡ï¼› æ¶ˆæ¯æ­£æ–‡ï¼ˆentityï¼‰ï¼šå®é™…å“åº”çš„æ•°æ®ï¼Œå®ƒä¸ä¸€å®šæ˜¯çº¯æ–‡æœ¬ï¼Œå¯ä»¥æ˜¯å›¾ç‰‡ã€è§†é¢‘ç­‰äºŒè¿›åˆ¶æ•°æ®ã€‚ headerå‚æ•°è¯·æ±‚å¤´ Request URL( è¯· æ±‚ çš„ åœ° å€ ) Request Method(è¯·æ±‚çš„æ–¹å¼) Status Code(çŠ¶æ€ç ) Accept: &#x2F;(å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„èµ„æºç±»å‹) Accept-Language: en-us( å®¢ æˆ· ç«¯ æ¥ æ”¶ çš„ è¯­ è¨€ ç±» å‹ ) Connection: Keep-Alive(ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³») Host:localhost:8080(è¿æ¥çš„ç›®æ ‡ä¸»æœºå’Œç«¯å£å·) Referer: http://localhost/links.asp(å‘Šè¯‰æœåŠ¡å™¨æˆ‘æ¥è‡ªå“ªé‡Œ) User-Agent:Mozilla&#x2F;4.0(å®¢æˆ·ç«¯ç‰ˆæœ¬å·çš„åå­—) Accept-Encoding:gzip, deflate(å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„å‹ç¼©æ•°æ®çš„ç±»å‹) If-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT( ç¼“ å­˜ æ—¶ é—´ ) Cookie(å®¢æˆ·ç«¯æš‚å­˜æœåŠ¡ç«¯çš„ä¿¡æ¯) Date: Tue, 11 Jul 2000 18:23:51 GMT(å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯çš„æ—¶é—´) å“åº” Location:http://www.baidu.com(æœåŠ¡ç«¯éœ€è¦å®¢æˆ·ç«¯è®¿é—®çš„é¡µé¢è·¯å¾„) Server:apache tomcat(æœåŠ¡ç«¯çš„WebæœåŠ¡ç«¯å) Content-Encoding:gzip(æœåŠ¡ç«¯èƒ½å¤Ÿå‘é€å‹ç¼©ç¼–ç ç±»å‹) Content-Length:80(æœåŠ¡ç«¯å‘é€çš„å‹ç¼©æ•°æ®çš„é•¿åº¦) Content-Language:zh-cn(æœåŠ¡ç«¯å‘é€çš„è¯­è¨€ç±»å‹) Content-Type:text&#x2F;html;charset&#x3D;GB2312(æœåŠ¡ç«¯å‘é€çš„ç±»å‹åŠé‡‡ç”¨çš„ç¼–ç æ–¹å¼) Last-Modified:Tue, 11 Jul 2000 18:23:51 GMT(æœåŠ¡ç«¯å¯¹è¯¥èµ„æºæœ€åä¿®æ”¹çš„æ—¶é—´) Refresh:1;url&#x3D;http://www.it315.org(æœåŠ¡ç«¯è¦æ±‚å®¢æˆ·ç«¯ä¸€ç§’é’Ÿåï¼Œåˆ·æ–°ï¼Œç„¶åè®¿é—®æŒ‡å®šçš„é¡µé¢ è·¯å¾„) Content-Disposition:attachment;filename&#x3D;aaa.zip(æœåŠ¡ç«¯è¦æ±‚å®¢æˆ·ç«¯ä»¥ä¸‹è½½æ–‡ä»¶çš„æ–¹å¼æ‰“å¼€ è¯¥æ–‡ä»¶) Transfer-Encoding:chunked(åˆ†å—ä¼ é€’æ•°æ®åˆ°å®¢æˆ·ç«¯) Set-Cookie:SS&#x3D;Q0&#x3D;5Lb_nQ;path&#x3D;&#x2F;search(æœåŠ¡ç«¯å‘é€åˆ°å®¢æˆ·ç«¯çš„æš‚å­˜æ•°æ®) Expires:-1&#x2F;&#x2F;3ç§(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®) Cache-Control:no-cache(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®) Pragma:no-cache(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®) Connection: close(1.0)&#x2F;(1.1)Keep-Alive(ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³») Date: Tue, 11 Jul 2000 18:23:51 GMT(æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯çš„æ—¶é—´) Cache-Controlï¼šç¼“å­˜é…ç½® private: å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ public: å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ max-age&#x3D;xxx: ç¼“å­˜çš„å†…å®¹å°†åœ¨ xxx ç§’åå¤±æ•ˆ no-cache: éœ€è¦ä½¿ç”¨å¯¹æ¯”ç¼“å­˜æ¥éªŒè¯ç¼“å­˜æ•°æ®(åé¢ä»‹ç») no-store: æ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šç¼“å­˜ï¼Œå¼ºåˆ¶ç¼“å­˜ï¼Œå¯¹æ¯”ç¼“å­˜éƒ½ä¸ä¼šè§¦å‘ çŠ¶æ€ç 1xx1Ã—Ã— ç±»çŠ¶æ€ç å±äºæç¤ºä¿¡æ¯ï¼Œæ˜¯åè®®å¤„ç†çš„ä¸­é—´çŠ¶æ€ï¼Œå®é™…èƒ½å¤Ÿç”¨åˆ°çš„æ—¶å€™å¾ˆå°‘ã€‚ 2xx2Ã—Ã— ç±»çŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨æ”¶åˆ°å¹¶æˆåŠŸå¤„ç†äº†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè¿™ä¹Ÿæ˜¯å®¢æˆ·ç«¯æœ€æ„¿æ„çœ‹åˆ°çš„çŠ¶æ€ç ã€‚ â€œ200 OKâ€æ˜¯æœ€å¸¸è§çš„æˆåŠŸçŠ¶æ€ç ï¼Œè¡¨ç¤ºä¸€åˆ‡æ­£å¸¸ï¼ŒæœåŠ¡å™¨å¦‚å®¢æˆ·ç«¯æ‰€æœŸæœ›çš„é‚£æ ·è¿”å›äº†å¤„ç†ç»“æœã€‚ â€œ204 No Contentâ€æ˜¯å¦ä¸€ä¸ªå¾ˆå¸¸è§çš„æˆåŠŸçŠ¶æ€ç ï¼Œå®ƒçš„å«ä¹‰ä¸â€œ200 OKâ€åŸºæœ¬ç›¸åŒï¼Œä½†å“åº”å¤´åæ²¡æœ‰ body æ•°æ®ã€‚ â€œ206 Partial Contentâ€ ä¸€èˆ¬ç”¨äºåˆ†å—ä¸‹è½½æˆ–æ–­ç‚¹ç»­ä¼ çš„åŸºç¡€ï¼Œåœ¨å®¢æˆ·ç«¯å‘é€â€œèŒƒå›´è¯·æ±‚â€ã€è¦æ±‚è·å–èµ„æºçš„éƒ¨åˆ†æ•°æ®æ—¶å‡ºç°ï¼Œå®ƒä¸ 200 ä¸€æ ·ï¼Œä¹Ÿæ˜¯æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½† body é‡Œçš„æ•°æ®ä¸æ˜¯èµ„æºçš„å…¨éƒ¨ï¼Œè€Œæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚çŠ¶æ€ç  206 é€šå¸¸è¿˜ä¼šä¼´éšç€å¤´å­—æ®µâ€œContent-Rangeâ€ï¼Œè¡¨ç¤ºå“åº”æŠ¥æ–‡é‡Œ body æ•°æ®çš„å…·ä½“èŒƒå›´ï¼Œä¾›å®¢æˆ·ç«¯ç¡®è®¤ï¼Œä¾‹å¦‚â€œContent-Range: bytes 0-66&#x2F;888â€ï¼Œæ„æ€æ˜¯æ­¤æ¬¡è·å–çš„æ˜¯æ€»è®¡ 888 ä¸ªå­—èŠ‚çš„å‰ 66 ä¸ªå­—èŠ‚ã€‚ 3xx3Ã—Ã— ç±»çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„èµ„æºå‘ç”Ÿäº†å˜åŠ¨ï¼Œå®¢æˆ·ç«¯å¿…é¡»ç”¨æ–°çš„ URI é‡æ–°å‘é€è¯·æ±‚è·å–èµ„æºï¼Œä¹Ÿå°±æ˜¯é€šå¸¸æ‰€è¯´çš„â€œé‡å®šå‘â€ï¼ŒåŒ…æ‹¬â€œè‘—åâ€çš„ 301ã€302 è·³è½¬ã€‚ â€œ301 Moved Permanentlyâ€ä¿—ç§°â€œæ°¸ä¹…é‡å®šå‘â€ï¼Œå«ä¹‰æ˜¯æ­¤æ¬¡è¯·æ±‚çš„èµ„æºå·²ç»ä¸å­˜åœ¨äº†ï¼Œéœ€è¦æ”¹ç”¨æ–°çš„ URI å†æ¬¡è®¿é—®ã€‚ä¸å®ƒç±»ä¼¼çš„æ˜¯â€œ302 Foundâ€ï¼Œæ›¾ç»çš„æè¿°çŸ­è¯­æ˜¯â€œMoved Temporarilyâ€ï¼Œä¿—ç§°â€œä¸´æ—¶é‡å®šå‘â€ï¼Œæ„æ€æ˜¯è¯·æ±‚çš„èµ„æºè¿˜åœ¨ï¼Œä½†éœ€è¦æš‚æ—¶ç”¨å¦ä¸€ä¸ª URI æ¥è®¿é—®ã€‚ â€œ304 Not Modifiedâ€ æ˜¯ä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„çŠ¶æ€ç ï¼Œå®ƒç”¨äº If-Modified-Since ç­‰æ¡ä»¶è¯·æ±‚ï¼Œè¡¨ç¤ºèµ„æºæœªä¿®æ”¹ï¼Œç”¨äºç¼“å­˜æ§åˆ¶ã€‚å®ƒä¸å…·æœ‰é€šå¸¸çš„è·³è½¬å«ä¹‰ï¼Œä½†å¯ä»¥ç†è§£æˆâ€œé‡å®šå‘å·²åˆ°ç¼“å­˜çš„æ–‡ä»¶â€ï¼ˆå³â€œç¼“å­˜é‡å®šå‘â€ï¼‰ã€‚ 4xx4Ã—Ã—ç±»çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚æŠ¥æ–‡æœ‰è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†ï¼Œå®ƒæ˜¯å…·æœ‰çœŸæ­£çš„â€œé”™è¯¯ç â€å«ä¹‰çš„çŠ¶æ€ç äº†ã€‚ â€œ400 Bad Requestâ€æ˜¯ä¸€ä¸ªé€šç”¨çš„é”™è¯¯ç ï¼Œè¡¨ç¤ºè¯·æ±‚æŠ¥æ–‡æœ‰é”™è¯¯ï¼Œä½†å…·ä½“æ˜¯æ•°æ®æ ¼å¼é”™è¯¯ã€ç¼ºå°‘è¯·æ±‚å¤´æˆ–è€…è¿˜æ˜¯å…¶ä»–é”™è¯¯åˆ™ä¸ä¼šæ˜ç¡®æŒ‡ç¤ºï¼Œå› æ­¤åœ¨Webå¼€å‘æ—¶ä¸€èˆ¬ä¼šå°½é‡é¿å…ç»™å®¢æˆ·ç«¯è¿”å› 400ï¼Œä½¿ç”¨å…¶ä»–æ›´æœ‰æ˜ç¡®å«ä¹‰çš„çŠ¶æ€ç ã€‚ â€œ403 Forbiddenâ€å®é™…ä¸Šä¸æ˜¯å®¢æˆ·ç«¯çš„è¯·æ±‚å‡ºé”™ï¼Œè€Œæ˜¯è¡¨ç¤ºæœåŠ¡å™¨ç¦æ­¢è®¿é—®èµ„æºã€‚åŸå› å¯èƒ½å¤šç§å¤šæ ·ï¼Œä¾‹å¦‚ä¿¡æ¯æ•æ„Ÿã€æ³•å¾‹ç¦æ­¢ç­‰ã€‚ â€œ404 Not Foundâ€å¯èƒ½æ˜¯æˆ‘ä»¬æœ€å¸¸çœ‹åˆ°çš„ä¸€ä¸ªçŠ¶æ€ç ï¼Œå®ƒä¸€èˆ¬æŒ‡èµ„æºåœ¨æœ¬æœåŠ¡å™¨ä¸Šæœªæ‰¾åˆ°ï¼Œæ‰€ä»¥æ— æ³•æä¾›ç»™å®¢æˆ·ç«¯ã€‚ 405 Method Not Allowedï¼šä¸å…è®¸ä½¿ç”¨æŸäº›æ–¹æ³•æ“ä½œèµ„æºï¼Œä¾‹å¦‚ä¸å…è®¸ POST åªèƒ½ GETï¼› 406 Not Acceptableï¼šèµ„æºæ— æ³•æ»¡è¶³å®¢æˆ·ç«¯è¯·æ±‚çš„æ¡ä»¶ï¼Œä¾‹å¦‚è¯·æ±‚ä¸­æ–‡ä½†åªæœ‰è‹±æ–‡ï¼› 408 Request Timeoutï¼šè¯·æ±‚è¶…æ—¶ï¼ŒæœåŠ¡å™¨ç­‰å¾…äº†è¿‡é•¿çš„æ—¶é—´ï¼› 409 Conflictï¼šå¤šä¸ªè¯·æ±‚å‘ç”Ÿäº†å†²çªï¼Œå¯ä»¥ç†è§£ä¸ºå¤šçº¿ç¨‹å¹¶å‘æ—¶çš„ç«æ€ï¼› 413 Request Entity Too Largeï¼šè¯·æ±‚æŠ¥æ–‡é‡Œçš„ body å¤ªå¤§ï¼› 414 Request-URI Too Longï¼šè¯·æ±‚è¡Œé‡Œçš„ URI å¤ªå¤§ï¼› 429 Too Many Requestsï¼šå®¢æˆ·ç«¯å‘é€äº†å¤ªå¤šçš„è¯·æ±‚ï¼Œè§¦å‘äº†æœåŠ¡å™¨çš„é™åˆ¶ï¼› 431 Request Header Fields Too Largeï¼šè¯·æ±‚å¤´æŸä¸ªå­—æ®µæˆ–æ€»ä½“å¤ªå¤§ã€‚ 5xx5Ã—Ã— ç±»çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚æŠ¥æ–‡æ­£ç¡®ï¼Œä½†æœåŠ¡å™¨åœ¨å¤„ç†æ—¶å†…éƒ¨å‘ç”Ÿäº†é”™è¯¯ï¼Œæ— æ³•è¿”å›åº”æœ‰çš„å“åº”æ•°æ®ï¼Œæ˜¯æœåŠ¡å™¨ç«¯çš„â€œé”™è¯¯ç â€ã€‚ â€œ500 Internal Server Errorâ€ ä¸ 400 ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé€šç”¨çš„é”™è¯¯ç ï¼ŒæœåŠ¡å™¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆé”™è¯¯æˆ‘ä»¬æ˜¯ä¸çŸ¥é“çš„ã€‚ä¸è¿‡å’Œ 400 çš„å“åº”ç›¸åï¼Œå¼€å‘äººå‘˜é€šå¸¸ä¸ä¼šæŠŠæœåŠ¡å™¨å†…éƒ¨çš„å‡ºé”™è¯¦ç»†ä¿¡æ¯è¿”å›ç»™è®¿é—®ç«¯ã€‚è™½ç„¶ä¸åˆ©äºè°ƒè¯•ï¼Œä½†èƒ½å¤Ÿé˜²æ­¢é»‘å®¢çš„çª¥æ¢æˆ–è€…åˆ†æã€‚ â€œ501 Not Implementedâ€ è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„åŠŸèƒ½è¿˜ä¸æ”¯æŒï¼Œç±»ä¼¼äºâ€œå³å°†å¼€ä¸šï¼Œæ•¬è¯·æœŸå¾…â€çš„æ„æ€ã€‚ â€œ502 Bad Gatewayâ€ é€šå¸¸æ˜¯æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†æ—¶è¿”å›çš„é”™è¯¯ç ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è‡ªèº«å·¥ä½œæ­£å¸¸ï¼Œè®¿é—®åç«¯æœåŠ¡å™¨æ—¶å‘ç”Ÿäº†é”™è¯¯ï¼Œä½†å…·ä½“çš„é”™è¯¯åŸå› ä¹Ÿæ˜¯ä¸çŸ¥é“çš„ã€‚ â€œ503 Service Unavailableâ€è¡¨ç¤ºæœåŠ¡å™¨å½“å‰å¾ˆå¿™ï¼Œæš‚æ—¶æ— æ³•å“åº”æœåŠ¡ï¼Œæˆ‘ä»¬ä¸Šç½‘æ—¶æœ‰æ—¶å€™é‡åˆ°çš„â€œç½‘ç»œæœåŠ¡æ­£å¿™ï¼Œè¯·ç¨åé‡è¯•â€çš„æç¤ºä¿¡æ¯å°±æ˜¯çŠ¶æ€ç  503ã€‚ HTTPè¯·æ±‚è¿‡ç¨‹å‚è€ƒ","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç½‘ç»œç¼–ç¨‹","slug":"ç¨‹åºè¯­è¨€/ç½‘ç»œç¼–ç¨‹","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"}]},{"title":"è®¡ç®—æœºç½‘ç»œçŸ¥è¯†æ€»ç»“","date":"2023-07-15T01:43:36.912Z","path":"wiki/ç¨‹åºè¯­è¨€/ç½‘ç»œç¼–ç¨‹/è®¡ç®—æœºç½‘ç»œçŸ¥è¯†æ€»ç»“/","text":"è®¡ç®—æœºç½‘ç»œçš„å¸¦å®½ç½‘ç»œå¯é€šç”¨çš„æœ€é«˜æ•°æ®ç‡ï¼Œå³æ¯ç§’å¤šå°‘æ¯”ç‰¹bitã€‚ è®¡ç®—æœºç½‘ç»œæ€§èƒ½æŒ‡æ ‡ é€Ÿç‡ å¸¦å®½ ååé‡ æ—¶å»¶ï¼ˆdelayæˆ–latencyï¼‰ï¼š ä¼ è¾“æ—¶å»¶ï¼šä»å‘é€æ•°æ®å¸§çš„ç¬¬ä¸€ä¸ªæ¯”ç‰¹ç®—èµ·ï¼Œåˆ°è¯¥å¸§çš„æœ€åä¸€ä¸ªæ¯”ç‰¹å‘é€å®Œæ¯•æ‰€éœ€æ—¶é—´ ä¼ æ’­æ—¶å»¶ï¼šç”µç£æ³¢åœ¨ä¿¡é“ä¸­éœ€è¦ä¼ æ’­ä¸€å®šçš„è·ç¦»è€ŒèŠ±è´¹çš„æ—¶é—´ å¤„ç†æ—¶å»¶ï¼šäº¤æ¢ç»“ç‚¹ä¸ºå­˜å‚¨è½¬å‘è€Œè¿›è¡Œä¸€äº›å¿…è¦çš„å¤„ç†æ‰€èŠ±è´¹çš„æ—¶é—´ æ’é˜Ÿæ—¶å»¶ï¼šç»“ç‚¹ç¼“å­˜é˜Ÿåˆ—ä¸­åˆ†ç»„æ’é˜Ÿæ‰€ç»å†çš„æ—¶å»¶ æ—¶å»¶å¸¦å®½ç§¯ åˆ©ç”¨ç‡ï¼š ä¿¡é“åˆ©ç”¨ç‡ ç½‘ç»œåˆ©ç”¨ç‡ æ•°æ®é“¾è·¯å±‚ï¼š ä¿¡é“ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼š ç‚¹å¯¹ç‚¹ä¿¡é“ï¼š å¹¿æ’­ä¿¡é“ï¼š å„å±‚ä¼ è¾“çš„æ•°æ®å•ä½ï¼š ç½‘ç»œå±‚ï¼šIPæ•°æ®æŠ¥ æ•°æ®é“¾è·¯å±‚ï¼šå¸§ ç‰©ç†å±‚ï¼šæ¯”ç‰¹ æ•°æ®é“¾è·¯å±‚ä¼ è¾“æ•°æ®æ—¶ä¸‰ä¸ªåŸºæœ¬é—®é¢˜ï¼š å°è£…æˆå¸§ é€æ˜ä¼ è¾“ å·®é”™æ§åˆ¶ ç‚¹å¯¹ç‚¹åè®®ï¼ˆPoint-to-Point Protocolï¼‰ PPPåè®®åº”æ»¡è¶³çš„éœ€æ±‚ï¼š ç®€å• å°è£…æˆå¸§ é€æ˜æ€§ å¤šç§ç½‘ç»œå±‚åè®® å¤šç§ç±»å‹é“¾è·¯ å·®é”™æ£€æµ‹ æ£€æµ‹è¿æ¥çŠ¶æ€ æœ€å¤§ä¼ è¾“å•å…ƒ ç½‘ç»œå±‚åœ°å€åå•† æ•°æ®å‹ç¼©åå•† PPPåè®®ä¸éœ€è¦çš„åŠŸèƒ½ï¼š çº é”™ æµé‡æ§åˆ¶ åºå· å¤šç‚¹çº¿è·¯ åŠåŒå·¥æˆ–å•å·¥é“¾è·¯ PPPåè®®æœ‰ä¸‰ä¸ªç»„æˆéƒ¨åˆ† ä¸€ä¸ªå°†IPæ•°æ®æŠ¥å°è£…åˆ°ä¸²è¡Œé“¾è·¯çš„æ–¹æ³•ï¼› é“¾è·¯æ§åˆ¶åè®®LCP ç½‘ç»œæ§åˆ¶åè®®NCP PPPåè®®ä¹‹ä¸ä½¿ç”¨åºå·å’Œç¡®è®¤æœºåˆ¶ ç½‘é™…åè®®IP IPæ—¶TCP&#x2F;IPä½“ç³»ä¸­ä¸¤ä¸ªæœ€ä¸»è¦çš„åè®®ä¹‹ä¸€ï¼Œä¸IPåè®®é…å¥—ä½¿ç”¨çš„è¿˜æœ‰å››ä¸ªåè®®ï¼š åœ°å€è§£æåè®®ARPï¼ˆAddress Resolution Protocolï¼‰ é€†åœ°å€è§£æåè®®RARPï¼ˆReverse Address Resolution Protocolï¼‰ ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMPï¼ˆInternet Control Message Protocolï¼‰ ç½‘é™…ç»„ç®¡ç†åè®®IGMPï¼ˆInternet Group Management Protocolï¼‰ ç½‘ç»œäº’ç›¸è¿æ¥èµ·æ¥è¦ä½¿ç”¨çš„ä¸€äº›ä¸­é—´è®¾å¤‡ ç‰©ç†å±‚ä¸­ç»§ç³»ç»Ÿï¼šè½¬å‘å™¨ï¼ˆrepeaterï¼‰ã€ä¸­ç»§å™¨ æ•°æ®é“¾è·¯å±‚ä¸­ç»§ç³»ç»Ÿï¼šç½‘æ¡¥æˆ–æ¡¥æ¥å™¨ ç½‘ç»œå±‚ä¸­ç»§ç³»ç»Ÿï¼šè·¯ç”±å™¨ ç½‘æ¡¥å’Œè·¯ç”±å™¨çš„æ··åˆç‰©ï¼šæ¡¥è·¯å™¨ï¼ˆbrouterï¼‰ ç½‘ç»œå±‚ä»¥ä¸Šçš„ä¸­ç»§ç³»ç»Ÿï¼šç½‘å…³ï¼ˆgatewayï¼‰ TCPã€UDPçš„åŒºåˆ« TCPä¸‰æ¬¡æ¡æ‰‹ æ‰€è°“ä¸‰æ¬¡æ¡æ‰‹(Three-way Handshake)ï¼Œæ˜¯æŒ‡å»ºç«‹ä¸€ä¸ª TCP è¿æ¥æ—¶ï¼Œéœ€è¦å®¢æˆ· ç«¯å’ŒæœåŠ¡å™¨æ€»å…±å‘é€ 3 ä¸ªåŒ…ã€‚ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯è¿æ¥æœåŠ¡å™¨æŒ‡å®šç«¯å£ï¼Œå»ºç«‹ TCP è¿æ¥,å¹¶åŒæ­¥è¿æ¥åŒæ–¹çš„åºåˆ—å·å’Œç¡®è®¤å·å¹¶äº¤æ¢ TCP çª—å£å¤§å°ä¿¡æ¯ã€‚ åœ¨ socket ç¼–ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯æ‰§è¡Œ connect()æ—¶ï¼Œå°†è§¦å‘ä¸‰æ¬¡æ¡æ‰‹:å³å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯é€šä¿¡å‰è¦è¿›è¡Œè¿æ¥ï¼Œ3æ¬¡æ¡æ‰‹çš„ä½œç”¨å°±æ˜¯åŒæ–¹éƒ½èƒ½æ˜ç¡®è‡ªå·±å’Œå¯¹æ–¹çš„æ”¶ã€å‘èƒ½åŠ›æ­£å¸¸ã€‚ TCPå››æ¬¡æŒ¥æ‰‹ å‚è€ƒ https://program-think.blogspot.com/2021/03/Computer-Networks-Overview.html","tags":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://airshu.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç½‘ç»œç¼–ç¨‹","slug":"ç¨‹åºè¯­è¨€/ç½‘ç»œç¼–ç¨‹","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"}]},{"title":"HTTPS","date":"2023-07-15T01:43:36.911Z","path":"wiki/ç¨‹åºè¯­è¨€/ç½‘ç»œç¼–ç¨‹/HTTPS/","text":"å·¥ä½œæµç¨‹ Clientå‘èµ·ä¸€ä¸ªHTTPS(æ¯”å¦‚ https://juejin.im/user )çš„è¯·æ±‚ï¼Œæ ¹æ®RFC2818çš„è§„å®šï¼ŒClientçŸ¥é“éœ€è¦è¿æ¥Serverçš„443(é»˜è®¤)ç«¯å£ã€‚ ServeræŠŠäº‹å…ˆé…ç½®å¥½çš„å…¬é’¥è¯ä¹¦(public key certificate)è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ClientéªŒè¯å…¬é’¥è¯ä¹¦:æ¯”å¦‚æ˜¯å¦åœ¨æœ‰æ•ˆæœŸå†…ï¼Œè¯ä¹¦çš„ç”¨é€”æ˜¯ä¸æ˜¯åŒ¹é…Clientè¯·æ±‚çš„ç«™ç‚¹ï¼Œæ˜¯ä¸æ˜¯åœ¨CRLåŠé”€åˆ—è¡¨é‡Œé¢ï¼Œå®ƒçš„ä¸Šä¸€çº§è¯ä¹¦æ˜¯å¦æœ‰æ•ˆï¼Œè¿™æ˜¯ä¸€ä¸ªé€’å½’çš„è¿‡ç¨‹ï¼Œç›´åˆ°éªŒè¯åˆ°æ ¹è¯ä¹¦(æ“ä½œç³»ç»Ÿå†…ç½®çš„Rootè¯ä¹¦æˆ–è€…Clientå†…ç½®çš„Rootè¯ä¹¦)ã€‚å¦‚æœéªŒè¯é€šè¿‡åˆ™ç»§ç»­ï¼Œä¸é€šè¿‡åˆ™æ˜¾ç¤ºè­¦å‘Šä¿¡æ¯ã€‚ Clientä½¿ç”¨ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ç”ŸæˆåŠ å¯†æ‰€ä½¿ç”¨çš„å¯¹ç§°å¯†é’¥ï¼Œç„¶åç”¨è¯ä¹¦çš„å…¬é’¥åŠ å¯†è¿™ä¸ªå¯¹ç§°å¯†é’¥ï¼Œå‘ç»™Serverã€‚ Serverä½¿ç”¨è‡ªå·±çš„ç§é’¥(private key)è§£å¯†è¿™ä¸ªæ¶ˆæ¯ï¼Œå¾—åˆ°å¯¹ç§°å¯†é’¥ã€‚è‡³æ­¤ï¼ŒClientå’ŒServeråŒæ–¹éƒ½æŒæœ‰äº†ç›¸åŒçš„å¯¹ç§°å¯†é’¥ã€‚ Serverä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†â€œæ˜æ–‡å†…å®¹Aâ€ï¼Œå‘é€ç»™Clientã€‚ Clientä½¿ç”¨å¯¹ç§°å¯†é’¥è§£å¯†å“åº”çš„å¯†æ–‡ï¼Œå¾—åˆ°â€œæ˜æ–‡å†…å®¹Aâ€ã€‚ Clientå†æ¬¡å‘èµ·HTTPSçš„è¯·æ±‚ï¼Œä½¿ç”¨å¯¹ç§°å¯†é’¥åŠ å¯†è¯·æ±‚çš„â€œæ˜æ–‡å†…å®¹Bâ€ï¼Œç„¶åServerä½¿ç”¨å¯¹ç§°å¯†é’¥ è§£å¯†å¯†æ–‡ï¼Œå¾—åˆ°â€œæ˜æ–‡å†…å®¹Bâ€ã€‚ å‚è€ƒ","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç½‘ç»œç¼–ç¨‹","slug":"ç¨‹åºè¯­è¨€/ç½‘ç»œç¼–ç¨‹","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"}]},{"title":"å¤æ‚åº¦å®šä¹‰","date":"2023-07-15T01:43:36.911Z","path":"wiki/ç¨‹åºè¯­è¨€/ç®—æ³•/å¤æ‚åº¦å®šä¹‰/","text":"æ—¶é—´å¤æ‚åº¦ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç®—æ³•ä¸­åŸºæœ¬æ“ä½œé‡å¤æ‰§è¡Œçš„æ¬¡æ•°æ˜¯é—®é¢˜è§„æ¨¡nçš„æŸä¸ªå‡½æ•°f(n)ï¼Œè¿›è€Œåˆ†æf(n)éšnçš„å˜ åŒ–æƒ…å†µå¹¶ç¡®å®šT(n)çš„æ•°é‡çº§ã€‚è¿™é‡Œç”¨â€Oâ€æ¥è¡¨ç¤ºæ•°é‡çº§ï¼Œç»™å‡ºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ã€‚ T(n)&#x3D;O(f(n)); å®ƒè¡¨ç¤ºéšç€é—®é¢˜è§„æ¨¡çš„nçš„å¢å¤§ï¼Œç®—æ³•çš„æ‰§è¡Œæ—¶é—´çš„å¢é•¿ç‡å’Œf(n)çš„å¢é•¿ç‡ç›¸åŒï¼Œè¿™ç§°ä½œç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦ï¼Œç®€ç§°æ—¶é—´å¤æ‚åº¦ã€‚ æ—¶é—´å¤æ‚åº¦çš„åˆ†ææ–¹æ³•: æ—¶é—´å¤æ‚åº¦å°±æ˜¯å‡½æ•°ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•° ä¸€èˆ¬é»˜è®¤çš„æ˜¯æœ€åæ—¶é—´å¤æ‚åº¦ï¼Œå³åˆ†ææœ€åæƒ…å†µä¸‹æ‰€èƒ½æ‰§è¡Œçš„æ¬¡æ•° å¿½ç•¥æ‰å¸¸æ•°é¡¹ å…³æ³¨è¿è¡Œæ—¶é—´çš„å¢é•¿è¶‹åŠ¿ï¼Œå…³æ³¨å‡½æ•°å¼ä¸­å¢é•¿æœ€å¿«çš„è¡¨è¾¾å¼ï¼Œå¿½ç•¥ç³»æ•° è®¡ç®—æ—¶é—´å¤æ‚åº¦æ˜¯ä¼°ç®—éšç€nçš„å¢é•¿å‡½æ•°æ‰§è¡Œæ¬¡æ•°çš„å¢é•¿è¶‹åŠ¿ é€’å½’ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º:é€’å½’æ€»æ¬¡æ•° x æ¯æ¬¡é€’å½’ä¸­åŸºæœ¬æ“ä½œæ‰€æ‰§è¡Œçš„æ¬¡æ•° å¸¸ç”¨çš„æ—¶é—´å¤æ‚åº¦æœ‰ä»¥ä¸‹ä¸ƒç§ï¼Œç®—æ³•æ—¶é—´å¤æ‚åº¦ä¾æ¬¡å¢åŠ : O(1)å¸¸æ•°å‹ O(log2 n)å¯¹æ•°å‹ O(n) çº¿æ€§å‹ O(n log2 n)äºŒç»´å‹ O(n^2)å¹³æ–¹å‹ O(n^3)ç«‹æ–¹å‹ O(2^n)æŒ‡æ•°å‹ ç©ºé—´å¤æ‚åº¦ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å¹¶ä¸æ˜¯è®¡ç®—å®é™…å ç”¨çš„ç©ºé—´ï¼Œè€Œæ˜¯è®¡ç®—æ•´ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´å•å…ƒçš„ä¸ªæ•°ï¼Œä¸é—®é¢˜çš„è§„æ¨¡æ²¡æœ‰å…³ç³»ã€‚ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦S(n)å®šä¹‰ä¸ºè¯¥ç®—æ³•æ‰€è€—è´¹ç©ºé—´çš„æ•°é‡çº§ã€‚ S(n)&#x3D;O(f(n)) è‹¥ç®—æ³•æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„è¾…åŠ©ç©ºé—´ç›¸å¯¹äºè¾“å…¥æ•°æ®é‡nè€Œè¨€æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œåˆ™ç§°è¿™ä¸ªç®—æ³•çš„è¾…åŠ©ç©ºé—´ä¸ºO(1); é€’å½’ç®—æ³•çš„ç©ºé—´å¤æ‚åº¦:é€’å½’æ·±åº¦N*æ¯æ¬¡é€’å½’æ‰€è¦çš„è¾…åŠ©ç©ºé—´ï¼Œ å¦‚æœæ¯æ¬¡é€’å½’æ‰€éœ€çš„è¾…åŠ©ç©ºé—´æ˜¯å¸¸æ•°ï¼Œåˆ™é€’å½’çš„ç©ºé—´å¤æ‚åº¦æ˜¯ O(N). ç®—æ³•æ•ˆç‡ç®—æ³•æ•ˆç‡åˆ†æåˆ†ä¸ºä¸¤ç§:ç¬¬ä¸€ç§æ˜¯æ—¶é—´æ•ˆç‡ï¼Œç¬¬äºŒç§æ˜¯ç©ºé—´æ•ˆç‡ã€‚æ—¶é—´æ•ˆç‡è¢«ç§°ä¸ºæ—¶é—´å¤æ‚åº¦ï¼Œ è€Œç©ºé—´æ•ˆç‡è¢«ç§°ä½œç©ºé—´å¤æ‚åº¦ã€‚æ—¶é—´å¤æ‚åº¦ä¸»è¦è¡¡é‡çš„æ˜¯ä¸€ä¸ªç®—æ³•çš„è¿è¡Œé€Ÿåº¦ï¼Œè€Œç©ºé—´å¤æ‚åº¦ä¸» è¦è¡¡é‡ä¸€ä¸ªç®—æ³•æ‰€éœ€è¦çš„é¢å¤–ç©ºé—´ï¼Œåœ¨è®¡ç®—æœºå‘å±•çš„æ—©æœŸï¼Œè®¡ç®—æœºçš„å­˜å‚¨å®¹é‡å¾ˆå°ã€‚æ‰€ä»¥å¯¹ç©ºé—´å¤æ‚åº¦å¾ˆæ˜¯åœ¨ä¹ã€‚ä½†æ˜¯ç»è¿‡è®¡ç®—æœºè¡Œä¸šçš„è¿…é€Ÿå‘å±•ï¼Œè®¡ç®—æœºçš„å­˜å‚¨å®¹é‡å·²ç»è¾¾åˆ°äº†å¾ˆé«˜çš„ç¨‹åº¦ã€‚ æ‰€ä»¥æˆ‘ä»¬å¦‚ä»Šå·²ç»ä¸éœ€è¦å†ç‰¹åˆ«å…³æ³¨ä¸€ä¸ªç®—æ³•çš„ç©ºé—´å¤æ‚åº¦ã€‚","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç®—æ³•","slug":"ç¨‹åºè¯­è¨€/ç®—æ³•","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%AE%97%E6%B3%95/"}]},{"title":"æŸ¥æ‰¾ç®—æ³•","date":"2023-07-15T01:43:36.911Z","path":"wiki/ç¨‹åºè¯­è¨€/ç®—æ³•/æŸ¥æ‰¾/","text":"é¡ºåºæŸ¥æ‰¾é¡ºåºæŸ¥æ‰¾ï¼ˆSequential Searchï¼‰åˆç§°çº¿æ€§æŸ¥æ‰¾ã€‚ä»è¡¨ä¸­ç¬¬ä¸€ä¸ª(æˆ–æœ€åä¸€ä¸ª)è®°å½•å¼€å§‹ï¼Œé€ä¸ªè¿›è¡Œè®°å½•çš„å…³é”®å­—å’Œç»™å®šå€¼æ¯”è¾ƒï¼Œè‹¥æŸä¸ªè®°å½•çš„å…³é”®å­—å’Œç»™å®šå€¼ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼Œå¦‚æœæŸ¥æ‰¾åˆ°è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™æŸ¥æ‰¾ä¸æˆåŠŸã€‚ äºŒåˆ†æŸ¥æ‰¾äºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary Searchï¼‰åˆç§°æŠ˜åŠæŸ¥æ‰¾ã€‚å®ƒçš„å‰ææ˜¯çº¿æ€§è¡¨ä¸­çš„è®°å½•å¿…é¡»æ˜¯å…³é”®ç æœ‰åºï¼Œçº¿æ€§è¡¨å¿…é¡»é‡‡ç”¨é¡ºåºå­˜å‚¨ã€‚æŠ˜åŠæŸ¥æ‰¾çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šåœ¨æœ‰åºè¡¨ä¸­ï¼Œå–ä¸­é—´è®°å½•ä½œä¸ºæ¯”è¾ƒå¯¹è±¡ï¼Œè‹¥ç»™å®šå€¼ä¸ä¸­é—´è®°å½•çš„å…³é”®å­—ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼›è‹¥ç»™å®šå€¼å°äºä¸­é—´è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨ä¸­é—´è®°å½•çš„å·¦åŠåŒºç»§ç»­æŸ¥æ‰¾ï¼›è‹¥ç»™å®šå€¼å¤§äºä¸­é—´è®°å½•çš„å…³é”®å­—ï¼Œåˆ™åœ¨ä¸­é—´è®°å½•çš„å³åŠåŒºç»§ç»­æŸ¥æ‰¾ã€‚ä¸æ–­é‡å¤ä¸Šè¿°è¿‡ç¨‹ï¼Œç›´åˆ°æŸ¥æ‰¾æˆåŠŸï¼Œæˆ–æ‰€æœ‰æŸ¥æ‰¾åŒºåŸŸæ— è®°å½•ï¼ŒæŸ¥æ‰¾å¤±è´¥ä¸ºæ­¢ã€‚ æ’å€¼æŸ¥æ‰¾(Interpolation Search)åŸºäºäºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œå°†æŸ¥æ‰¾ç‚¹çš„é€‰æ‹©æ”¹è¿›ä¸ºè‡ªé€‚åº”é€‰æ‹©ï¼Œå¯ä»¥æé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚å³æ ¹æ®è¦æŸ¥æ‰¾çš„å…³é”®å­—keyä¸æŸ¥æ‰¾è¡¨ä¸­æœ€å¤§æœ€å°è®°å½•çš„å…³é”®å­—æ¯”è¾ƒåçš„æŸ¥æ‰¾æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒå°±åœ¨äºæ’å€¼çš„è®¡ç®—å…¬å¼mid&#x3D;low+(key-a[low])&#x2F;(a[high]-a[low])(high-low)ï¼Œæ›¿æ¢äº†äºŒåˆ†æŸ¥æ‰¾çš„è®¡ç®—å…¬å¼mid&#x3D;low+1&#x2F;2(high-low)ã€‚ è¿™æ ·çš„å¥½å¤„åœ¨äºï¼Œå¯¹è¡¨é•¿è¾ƒé•¿ï¼Œä¸”å…³é”®å­—åˆ†å¸ƒæ¯”è¾ƒå‡åŒ€ï¼Œæ’å€¼æŸ¥æ‰¾ç®—æ³•çš„å¹³å‡æ€§èƒ½è¦æ¯”æŠ˜åŠæŸ¥æ‰¾è¦å¥½çš„å¤šã€‚ä½†æ˜¯å¦‚æœè¡¨ä¸­å…³é”®å­—åˆ†å¸ƒæç«¯ä¸å‡åŒ€ï¼Œé‚£ä¹ˆæ’å€¼æŸ¥æ‰¾è¿˜ä¸å¦‚æŠ˜åŠæŸ¥æ‰¾å‘¢ã€‚ æ–æ³¢é‚£å¥‘æŸ¥æ‰¾(Fibonacci Search)ä¹Ÿæ˜¯ä¸€ç§æ”¹è¿›çš„äºŒåˆ†æŸ¥æ‰¾ï¼Œé€šè¿‡è¿ç”¨é»„é‡‘æ¯”ä¾‹çš„æ¦‚å¿µåœ¨æ•°åˆ—ä¸­é€‰æ‹©æŸ¥æ‰¾ç‚¹è¿›è¡ŒæŸ¥æ‰¾ï¼Œæé«˜æŸ¥æ‰¾æ•ˆç‡ã€‚ æ–æ³¢é‚£å¥‘æŸ¥æ‰¾çš„æ•´ä¸ªè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºï¼š æ„å»ºæ–æ³¢é‚£å¥‘æ•°åˆ—ï¼› è®¡ç®—æ•°ç»„é•¿åº¦å¯¹åº”çš„æ–æ³¢é‚£å¥‘æ•°åˆ—å…ƒç´ ä¸ªæ•°ï¼› å¯¹æ•°ç»„è¿›è¡Œå¡«å……ï¼› å¾ªç¯è¿›è¡ŒåŒºé—´åˆ†å‰²ï¼ŒæŸ¥æ‰¾ä¸­é—´å€¼ï¼› åˆ¤æ–­ä¸­é—´å€¼å’Œç›®æ ‡å€¼çš„å…³ç³»ï¼Œç¡®å®šæ›´æ–°ç­–ç•¥ï¼› äºŒå‰æ ‘æŸ¥æ‰¾å¯¹äºŒå‰æŸ¥æ‰¾æ ‘è¿›è¡Œä¸­åºéå†ï¼Œå³å¯å¾—åˆ°æœ‰åºçš„æ•°åˆ—ã€‚ å¹³è¡¡æ ‘2-3æŸ¥æ‰¾æ ‘çº¢é»‘æ ‘Bæ ‘(B_æ ‘)ã€B+æ ‘Bæ ‘ä¹Ÿç§°B-æ ‘,å®ƒæ˜¯ä¸€é¢—å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ åˆ†å—æŸ¥æ‰¾åˆ†å—æŸ¥æ‰¾åˆç§°ç´¢å¼•é¡ºåºæŸ¥æ‰¾ï¼Œå®ƒæ˜¯é¡ºåºæŸ¥æ‰¾çš„ä¸€ç§æ”¹è¿›æ–¹æ³•ã€‚ ç®—æ³•æ€æƒ³ï¼šå°†nä¸ªæ•°æ®å…ƒç´ â€æŒ‰å—æœ‰åºâ€åˆ’åˆ†ä¸ºmå—ï¼ˆm â‰¤ nï¼‰ã€‚æ¯ä¸€å—ä¸­çš„ç»“ç‚¹ä¸å¿…æœ‰åºï¼Œä½†å—ä¸å—ä¹‹é—´å¿…é¡»â€æŒ‰å—æœ‰åºâ€ï¼›å³ç¬¬1å—ä¸­ä»»ä¸€å…ƒç´ çš„å…³é”®å­—éƒ½å¿…é¡»å°äºç¬¬2å—ä¸­ä»»ä¸€å…ƒç´ çš„å…³é”®å­—ï¼›è€Œç¬¬2å—ä¸­ä»»ä¸€å…ƒç´ åˆéƒ½å¿…é¡»å°äºç¬¬3å—ä¸­çš„ä»»ä¸€å…ƒç´ ï¼Œâ€¦â€¦ ç®—æ³•æµç¨‹ï¼š step1 å…ˆé€‰å–å„å—ä¸­çš„æœ€å¤§å…³é”®å­—æ„æˆä¸€ä¸ªç´¢å¼•è¡¨ï¼› step2 æŸ¥æ‰¾åˆ†ä¸¤ä¸ªéƒ¨åˆ†ï¼šå…ˆå¯¹ç´¢å¼•è¡¨è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾æˆ–é¡ºåºæŸ¥æ‰¾ï¼Œä»¥ç¡®å®šå¾…æŸ¥è®°å½•åœ¨å“ªä¸€å—ä¸­ï¼›ç„¶åï¼Œåœ¨å·²ç¡®å®šçš„å—ä¸­ç”¨é¡ºåºæ³•è¿›è¡ŒæŸ¥æ‰¾ã€‚ å“ˆå¸ŒæŸ¥æ‰¾æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªä¸‹æ ‡èŒƒå›´æ¯”è¾ƒå¤§çš„æ•°ç»„æ¥å­˜å‚¨å…ƒç´ ã€‚å¯ä»¥è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼ˆå“ˆå¸Œå‡½æ•°ï¼Œ ä¹Ÿå«åšæ•£åˆ—å‡½æ•°ï¼‰ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ çš„å…³é”®å­—éƒ½ä¸ä¸€ä¸ªå‡½æ•°å€¼ï¼ˆå³æ•°ç»„ä¸‹æ ‡ï¼‰ç›¸å¯¹åº”ï¼Œäºæ˜¯ç”¨è¿™ä¸ªæ•°ç»„å•å…ƒæ¥å­˜å‚¨è¿™ä¸ªå…ƒç´ ï¼›ä¹Ÿå¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼ŒæŒ‰ç…§å…³é”®å­—ä¸ºæ¯ä¸€ä¸ªå…ƒç´ â€åˆ†ç±»â€ï¼Œç„¶åå°†è¿™ä¸ªå…ƒç´ å­˜å‚¨åœ¨ç›¸åº”â€ç±»â€æ‰€å¯¹åº”çš„åœ°æ–¹ã€‚ä½†æ˜¯ï¼Œä¸èƒ½å¤Ÿä¿è¯æ¯ä¸ªå…ƒç´ çš„å…³é”®å­—ä¸å‡½æ•°å€¼æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œå› æ­¤ææœ‰å¯èƒ½å‡ºç°å¯¹äºä¸åŒçš„å…ƒç´ ï¼Œå´è®¡ç®—å‡ºäº†ç›¸åŒçš„å‡½æ•°å€¼ï¼Œè¿™æ ·å°±äº§ç”Ÿäº†â€å†²çªâ€ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯æŠŠä¸åŒçš„å…ƒç´ åˆ†åœ¨äº†ç›¸åŒçš„â€ç±»â€ä¹‹ä¸­ã€‚åé¢æˆ‘ä»¬å°†çœ‹åˆ°ä¸€ç§è§£å†³â€å†²çªâ€çš„ç®€ä¾¿åšæ³•ã€‚ æ€»çš„æ¥è¯´ï¼Œâ€ç›´æ¥å®šå€â€ä¸â€è§£å†³å†²çªâ€æ˜¯å“ˆå¸Œè¡¨çš„ä¸¤å¤§ç‰¹ç‚¹ã€‚ ä»€ä¹ˆæ˜¯å“ˆå¸Œå‡½æ•°ï¼Ÿ å“ˆå¸Œå‡½æ•°çš„è§„åˆ™æ˜¯ï¼šé€šè¿‡æŸç§è½¬æ¢å…³ç³»ï¼Œä½¿å…³é”®å­—é€‚åº¦çš„åˆ†æ•£åˆ°æŒ‡å®šå¤§å°çš„çš„é¡ºåºç»“æ„ä¸­ï¼Œè¶Šåˆ†æ•£ï¼Œåˆ™ä»¥åæŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦è¶Šå°ï¼Œç©ºé—´å¤æ‚åº¦è¶Šé«˜ã€‚ ç®—æ³•æ€æƒ³ï¼šå“ˆå¸Œçš„æ€è·¯å¾ˆç®€å•ï¼Œå¦‚æœæ‰€æœ‰çš„é”®éƒ½æ˜¯æ•´æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ— åºæ•°ç»„æ¥å®ç°ï¼šå°†é”®ä½œä¸ºç´¢å¼•ï¼Œå€¼å³ä¸ºå…¶å¯¹åº”çš„å€¼ï¼Œè¿™æ ·å°±å¯ä»¥å¿«é€Ÿè®¿é—®ä»»æ„é”®çš„å€¼ã€‚è¿™æ˜¯å¯¹äºç®€å•çš„é”®çš„æƒ…å†µï¼Œæˆ‘ä»¬å°†å…¶æ‰©å±•åˆ°å¯ä»¥å¤„ç†æ›´åŠ å¤æ‚çš„ç±»å‹çš„é”®ã€‚ ç®—æ³•æµç¨‹ï¼š 1ï¼‰ç”¨ç»™å®šçš„å“ˆå¸Œå‡½æ•°æ„é€ å“ˆå¸Œè¡¨ï¼› 2ï¼‰æ ¹æ®é€‰æ‹©çš„å†²çªå¤„ç†æ–¹æ³•è§£å†³åœ°å€å†²çªï¼› å¸¸è§çš„è§£å†³å†²çªçš„æ–¹æ³•ï¼šæ‹‰é“¾æ³•å’Œçº¿æ€§æ¢æµ‹æ³•ã€‚è¯¦ç»†çš„ä»‹ç»å¯ä»¥å‚è§ï¼šæµ…è°ˆç®—æ³•å’Œæ•°æ®ç»“æ„: åä¸€ å“ˆå¸Œè¡¨ã€‚ 3ï¼‰åœ¨å“ˆå¸Œè¡¨çš„åŸºç¡€ä¸Šæ‰§è¡Œå“ˆå¸ŒæŸ¥æ‰¾ã€‚ å“ˆå¸Œè¡¨æ˜¯ä¸€ä¸ªåœ¨æ—¶é—´å’Œç©ºé—´ä¸Šåšå‡ºæƒè¡¡çš„ç»å…¸ä¾‹å­ã€‚å¦‚æœæ²¡æœ‰å†…å­˜é™åˆ¶ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å°†é”®ä½œä¸ºæ•°ç»„çš„ç´¢å¼•ã€‚é‚£ä¹ˆæ‰€æœ‰çš„æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼›å¦‚æœæ²¡æœ‰æ—¶é—´é™åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ— åºæ•°ç»„å¹¶è¿›è¡Œé¡ºåºæŸ¥æ‰¾ï¼Œè¿™æ ·åªéœ€è¦å¾ˆå°‘çš„å†…å­˜ã€‚å“ˆå¸Œè¡¨ä½¿ç”¨äº†é€‚åº¦çš„æ—¶é—´å’Œç©ºé—´æ¥åœ¨è¿™ä¸¤ä¸ªæç«¯ä¹‹é—´æ‰¾åˆ°äº†å¹³è¡¡ã€‚åªéœ€è¦è°ƒæ•´å“ˆå¸Œå‡½æ•°ç®—æ³•å³å¯åœ¨æ—¶é—´å’Œç©ºé—´ä¸Šåšå‡ºå–èˆã€‚ å¤æ‚åº¦åˆ†æï¼š å•çº¯è®ºæŸ¥æ‰¾å¤æ‚åº¦ï¼šå¯¹äºæ— å†²çªçš„Hashè¡¨è€Œè¨€ï¼ŒæŸ¥æ‰¾å¤æ‚åº¦ä¸ºO(1)ï¼ˆæ³¨æ„ï¼Œåœ¨æŸ¥æ‰¾ä¹‹å‰æˆ‘ä»¬éœ€è¦æ„å»ºç›¸åº”çš„Hashè¡¨ï¼‰ã€‚ ä½¿ç”¨Hashï¼Œæˆ‘ä»¬ä»˜å‡ºäº†ä»€ä¹ˆï¼Ÿ æˆ‘ä»¬åœ¨å®é™…ç¼–ç¨‹ä¸­å­˜å‚¨ä¸€ä¸ªå¤§è§„æ¨¡çš„æ•°æ®ï¼Œæœ€å…ˆæƒ³åˆ°çš„å­˜å‚¨ç»“æ„å¯èƒ½å°±æ˜¯mapï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„KV pairï¼Œç»å¸¸ä½¿ç”¨Pythonçš„åšå‹å¯èƒ½æ›´æœ‰è¿™ç§ä½“ä¼šã€‚ä½¿ç”¨mapçš„å¥½å¤„å°±æ˜¯ï¼Œæˆ‘ä»¬åœ¨åç»­å¤„ç†æ•°æ®å¤„ç†æ—¶ï¼Œå¯ä»¥æ ¹æ®æ•°æ®çš„keyå¿«é€Ÿçš„æŸ¥æ‰¾åˆ°å¯¹åº”çš„valueå€¼ã€‚mapçš„æœ¬è´¨å°±æ˜¯Hashè¡¨ï¼Œé‚£æˆ‘ä»¬åœ¨è·å–äº†è¶…é«˜æŸ¥æ‰¾æ•ˆç‡çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä»˜å‡ºäº†ä»€ä¹ˆï¼Ÿ Hashæ˜¯ä¸€ç§å…¸å‹ä»¥ç©ºé—´æ¢æ—¶é—´çš„ç®—æ³•ï¼Œæ¯”å¦‚åŸæ¥ä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¯¹å…¶æŸ¥æ‰¾ï¼Œåªéœ€è¦éå†ä¸”åŒ¹é…ç›¸åº”è®°å½•å³å¯ï¼Œä»ç©ºé—´å¤æ‚åº¦ä¸Šæ¥çœ‹ï¼Œå‡å¦‚æ•°ç»„å­˜å‚¨çš„æ˜¯byteç±»å‹æ•°æ®ï¼Œé‚£ä¹ˆè¯¥æ•°ç»„å ç”¨100byteç©ºé—´ã€‚ç°åœ¨æˆ‘ä»¬é‡‡ç”¨Hashç®—æ³•ï¼Œæˆ‘ä»¬å‰é¢è¯´çš„Hashå¿…é¡»æœ‰ä¸€ä¸ªè§„åˆ™ï¼Œçº¦æŸé”®ä¸å­˜å‚¨ä½ç½®çš„å…³ç³»ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€ä¸ªå›ºå®šé•¿åº¦çš„hashè¡¨ï¼Œæ­¤æ—¶ï¼Œä»ç„¶æ˜¯100byteçš„æ•°ç»„ï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦çš„100byteç”¨æ¥è®°å½•é”®ä¸ä½ç½®çš„å…³ç³»ï¼Œé‚£ä¹ˆæ€»çš„ç©ºé—´ä¸º200byte,è€Œä¸”ç”¨äºè®°å½•è§„åˆ™çš„è¡¨å¤§å°ä¼šæ ¹æ®è§„åˆ™ï¼Œå¤§å°å¯èƒ½æ˜¯ä¸å®šçš„ã€‚ å‚è€ƒ ç®—æ³•å¯è§†åŒ–æ¼”ç¤º","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç®—æ³•","slug":"ç¨‹åºè¯­è¨€/ç®—æ³•","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%AE%97%E6%B3%95/"}]},{"title":"æ’åºç®—æ³•","date":"2023-07-15T01:43:36.911Z","path":"wiki/ç¨‹åºè¯­è¨€/ç®—æ³•/æ’åº/","text":"æ’å…¥æ’åºç›´æ¥æ’å…¥æ’åºå…·ä½“ç®—æ³•ï¼š ä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹ï¼Œè¯¥å…ƒç´ å¯ä»¥è®¤ä¸ºå·²ç»è¢«æ’åºï¼› å–å‡ºä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåœ¨å·²ç»æ’åºçš„å…ƒç´ åºåˆ—ä¸­ä»åå‘å‰æ‰«æï¼› å¦‚æœè¯¥å…ƒç´ ï¼ˆå·²æ’åºï¼‰å¤§äºæ–°å…ƒç´ ï¼Œå°†è¯¥å…ƒç´ ç§»åˆ°ä¸‹ä¸€ä½ç½®ï¼› é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°æ‰¾åˆ°å·²æ’åºçš„å…ƒç´ å°äºæˆ–è€…ç­‰äºæ–°å…ƒç´ çš„ä½ç½®ï¼› å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®åï¼› é‡å¤æ­¥éª¤2-5ã€‚ å¸Œå°”æ’åºå¸Œå°”æ’åº(Shell Sort)æ˜¯æ’å…¥æ’åºçš„ä¸€ç§ï¼Œå®ƒæ˜¯é’ˆå¯¹ç›´æ¥æ’å…¥æ’åºç®—æ³•çš„æ”¹è¿›ã€‚è¯¥æ–¹æ³•åˆç§°ç¼©å°å¢é‡æ’åºï¼Œå› DLï¼Shelläº1959å¹´æå‡ºè€Œå¾—åã€‚ å¸Œå°”æ’åºå®è´¨ä¸Šæ˜¯ä¸€ç§åˆ†ç»„ç›´æ¥æ’å…¥æ–¹æ³•ã€‚ åŸºæœ¬æ€æƒ³ï¼š å¯¹äºnä¸ªå¾…æ’åºçš„æ•°åˆ—ï¼Œå–ä¸€ä¸ªå°äºnçš„æ•´æ•°gap(gapè¢«ç§°ä¸ºæ­¥é•¿)å°†å¾…æ’åºå…ƒç´ åˆ†æˆè‹¥å¹²ä¸ªç»„å­åºåˆ—ï¼Œæ‰€æœ‰è·ç¦»ä¸ºgapçš„å€æ•°çš„è®°å½•æ”¾åœ¨åŒä¸€ä¸ªç»„ä¸­ï¼›ç„¶åï¼Œå¯¹å„ç»„å†…çš„å…ƒç´ è¿›è¡Œç›´æ¥æ’å…¥æ’åºã€‚ è¿™ä¸€è¶Ÿæ’åºå®Œæˆä¹‹åï¼Œæ¯ä¸€ä¸ªç»„çš„å…ƒç´ éƒ½æ˜¯æœ‰åºçš„ã€‚ç„¶åå‡å°gapçš„å€¼ï¼Œå¹¶é‡å¤æ‰§è¡Œä¸Šè¿°çš„åˆ†ç»„å’Œæ’åºã€‚é‡å¤è¿™æ ·çš„æ“ä½œï¼Œå½“gap&#x3D;1æ—¶ï¼Œå³æ‰€æœ‰è®°å½•æ”¾åœ¨åŒä¸€ç»„ä¸­è¿›è¡Œç›´æ¥æ’å…¥æ’åºä¸ºæ­¢, æ•´ä¸ªæ•°åˆ—å°±æ˜¯æœ‰åºçš„ã€‚ é€‰æ‹©æ’åºç›´æ¥é€‰æ‹©æ’åºé¦–å…ˆåœ¨æœªæ’åºåºåˆ—ä¸­æ‰¾åˆ°æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œå­˜æ”¾åˆ°æ’åºåºåˆ—çš„èµ·å§‹ä½ç½®ï¼Œç„¶åï¼Œå†ä»å‰©ä½™æœªæ’åºå…ƒç´ ä¸­ç»§ç»­å¯»æ‰¾æœ€å°ï¼ˆå¤§ï¼‰å…ƒç´ ï¼Œç„¶åæ”¾åˆ°å·²æ’åºåºåˆ—çš„æœ«å°¾ã€‚ä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°æ‰€æœ‰å…ƒç´ å‡æ’åºå®Œæ¯•ã€‚ å †é€‰æ‹©æ’åºä»€ä¹ˆæ˜¯å †ï¼Ÿå †ç»“æ„æœ‰å¾ˆå¤šç§ï¼Œå¦‚äºŒå‰å †ã€Bå †ã€æ–æ³¢é‚£å¥‘å †ã€ä¸‰å…ƒå †ï¼Œæ ‘å †ã€å¼±å †ç­‰ã€‚äºŒå‰å †æ˜¯å †å®ç°ä¸­æœ€æµè¡Œçš„ä¸€ç§ã€‚äºŒå‰å †æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œæ ‘çš„æ‰€æœ‰å†…éƒ¨èŠ‚ç‚¹éƒ½è¢«å®Œå…¨å¡«å……ï¼Œæœ€åä¸€å±‚å¯ä»¥å®Œå…¨å¡«å……çš„æˆ–éƒ¨åˆ†å¡«å……ã€‚é€šä¿—çš„è¯´ï¼Œå †ï¼ˆäºŒå‰å †ï¼‰å¯ä»¥è§†ä¸ºä¸€æ£µå®Œå…¨çš„äºŒå‰æ ‘ã€‚å®Œå…¨äºŒå‰æ ‘çš„ä¸€ä¸ªä¼˜ç§€çš„æ€§è´¨å°±æ˜¯ï¼Œé™¤äº†æœ€åº•å±‚ä¹‹å¤–ï¼Œæ¯ä¸€å±‚éƒ½æ˜¯æ»¡çš„ã€‚å †åˆåˆ†ä¸ºæœ€å¤§å †ï¼ˆå †é¡¶Rootæ˜¯æœ€å¤§å€¼ï¼‰å’Œæœ€å°å †ï¼ˆå †é¡¶Rootæ˜¯æœ€å°å€¼ï¼‰ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œåªè¦ä½ æ˜¯ä¸€ä¸ªå®Œå…¨äºŒå‰æ ‘ï¼Œçˆ¶èŠ‚ç‚¹åˆå¤§äºå­èŠ‚ç‚¹ï¼Œä½ å°±æ˜¯å †ã€‚ å®Œå…¨äºŒå‰æ ‘ + çˆ¶èŠ‚ç‚¹å¤§äº(æˆ–å°äº)å­èŠ‚ç‚¹ &#x3D; å † https://chihokyo.com/post/18/ äº¤æ¢æ’åºå†’æ³¡æ’åºä»æ— åºåºåˆ—å¤´éƒ¨å¼€å§‹ï¼Œè¿›è¡Œä¸¤ä¸¤æ¯”è¾ƒï¼Œæ ¹æ®å¤§å°äº¤æ¢ä½ç½®ï¼Œç›´åˆ°æœ€åå°†æœ€å¤§ï¼ˆå°ï¼‰çš„æ•°æ®å…ƒç´ äº¤æ¢åˆ°äº†æ— åºé˜Ÿåˆ—çš„é˜Ÿå°¾ï¼Œä»è€Œæˆä¸ºæœ‰åºåºåˆ—çš„ä¸€éƒ¨åˆ†ï¼›ä¸‹ä¸€æ¬¡ç»§ç»­è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ‰€æœ‰æ•°æ®å…ƒç´ éƒ½æ’å¥½åºã€‚ å¿«é€Ÿæ’åº https://wiki.jikexueyuan.com/project/easy-learn-algorithm/fast-sort.html å½’å¹¶æ’åºå½’å¹¶æ’åºç®—æ³•å®Œå…¨éµå¾ªåˆ†æ²»æ¨¡å¼ã€‚ç›´è§‚ä¸Šå…¶æ“ä½œå¦‚ä¸‹ï¼š åˆ†è§£ï¼šåˆ†è§£ç­‰æ’åºçš„nä¸ªå…ƒç´ çš„åºåˆ—æˆå„å…·n&#x2F;2ä¸ªå…ƒç´ çš„ä¸¤ä¸ªå­åºåˆ—ï¼›è§£å†³ï¼šä½¿ç”¨å½’å¹¶æ’åºé€’å½’åœ°æ’åºä¸¤ä¸ªå­åºåˆ—ï¼›åˆå¹¶ï¼šåˆå¹¶ä¸¤ä¸ªå·²æ’åºçš„å­åºåˆ—ä»¥äº§ç”Ÿå·²æ’åºçš„ç­”æ¡ˆã€‚ https://zh.wikipedia.org/wiki/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F#Python3 å„ç§å†…æ’åºæ–¹æ³•çš„æ¯”è¾ƒ","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç®—æ³•","slug":"ç¨‹åºè¯­è¨€/ç®—æ³•","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%AE%97%E6%B3%95/"}]},{"title":"çº¿æ€§è¡¨","date":"2023-07-15T01:43:36.910Z","path":"wiki/ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„/çº¿æ€§è¡¨/","text":"å®šä¹‰çº¿æ€§è¡¨ï¼ˆLinear Listï¼‰æ˜¯å…·æœ‰ç›¸åŒç‰¹æ€§çš„æ•°æ®å…ƒç´ çš„ä¸€ä¸ªæœ‰é™åºåˆ—ã€‚è¯¥åºåˆ—ä¸­æ‰€å«å…ƒç´ çš„ä¸ªæ•°å«åšçº¿æ€§è¡¨çš„é•¿åº¦ï¼Œç”¨nè¡¨ç¤ºï¼Œn&gt;&#x3D;0ã€‚å½“n&#x3D;0æ—¶ï¼Œè¡¨ç¤ºçº¿æ€§è¡¨æ˜¯ä¸€ä¸ªç©ºè¡¨ã€‚è®¾åºåˆ—ä¸­ç¬¬iä¸ªå…ƒç´ ä¸ºa1ï¼ˆ1 â‰¤ i â‰¤ nï¼‰ï¼Œåˆ™çº¿æ€§è¡¨çš„ä¸€èˆ¬è¡¨ç¤ºä¸ºï¼š (a1,a2,a3,â€¦,ai,â€¦,an) ç‰¹æ€§ å…ƒç´ åœ¨ä½ç½®ä¸Šæ˜¯æœ‰åºçš„ é•¿åº¦æ˜¯å¯å˜çš„ çº¿æ€§å­˜å‚¨å°†æ•°æ®ä¾æ¬¡å­˜å‚¨åœ¨è¿ç»­çš„æ•´å—ç‰©ç†ç©ºé—´ä¸­ã€‚é¡ºåºè¡¨å­˜å‚¨æ•°æ®æ—¶ï¼Œä¼šæå‰ç”³è¯·ä¸€æ•´å—è¶³å¤Ÿå¤§å°çš„ç‰©ç†ç©ºé—´ï¼Œç„¶åå°†æ•°æ®ä¾æ¬¡å­˜å‚¨èµ·æ¥ï¼Œå­˜å‚¨æ—¶åšåˆ°æ•°æ®å…ƒç´ ä¹‹é—´ä¸ç•™ä¸€ä¸ç¼éš™ã€‚ é“¾å¼å­˜å‚¨æ•°æ®åˆ†æ•£çš„å­˜å‚¨åœ¨ç‰©ç†ç©ºé—´ä¸­ï¼Œé€šè¿‡ä¸€æ ¹çº¿ä¿å­˜ç€å®ƒä»¬ä¹‹é—´çš„é€»è¾‘å…³ç³»ã€‚ åœ¨çº¿æ€§è¡¨çš„é“¾æ¥å­˜å‚¨ä¸­ï¼Œå­˜å‚¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç»“ç‚¹ç§°ä¸ºè¡¨å¤´ç»“ç‚¹ï¼Œå­˜å‚¨æœ€åä¸€ä¸ªå…ƒç´ çš„ç»“ç‚¹ç§°ä¸ºè¡¨å°¾ç»“ç‚¹ï¼Œå…¶ä½™ä¸ºä¸­é—´ç»“ç‚¹ã€‚æ¯ä¸ªé“¾æ¥è¡¨éƒ½éœ€è¦è®¾ç½®ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘è¡¨å¤´ç»“ç‚¹ï¼Œç§°ä¸ºè¡¨å¤´æŒ‡é’ˆã€‚ä»è¡¨å¤´æŒ‡é’ˆå‡ºå‘ï¼Œæ²¿ç€ç»“ç‚¹çš„é“¾å¯ä»¥è®¿é—®åˆ°æ¯ä¸€ä¸ªç»“ç‚¹ã€‚ é“¾æ¥è¡¨ç”±äºæ¯ä¸ªç»“ç‚¹å¸¦æœ‰æŒ‡é’ˆåŸŸï¼Œå› è€Œåœ¨å­˜å‚¨ç©ºé—´ä¸Šæ¯”çº¿æ€§å­˜å‚¨è¦ä»˜å‡ºè¾ƒå¤§ä»£ä»·ã€‚ç”±äºæ¯ä¸ªç»“ç‚¹çš„å­˜å‚¨ä½ç½®å¯ä»¥ä»»æ„å®‰æ’ï¼Œå› æ­¤æ’å…¥ã€åˆ é™¤æ“ä½œæ–¹ä¾¿åˆçœæ—¶ã€‚ å•é“¾è¡¨ åŒé“¾è¡¨ å¾ªç¯åŒé“¾è¡¨å°¾ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªç»“ç‚¹æ˜¯å¤´ç»“ç‚¹ã€‚ ä»£ç å®ç°","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"åŠ¨æ€è§„åˆ’","date":"2023-07-15T01:43:36.910Z","path":"wiki/ç¨‹åºè¯­è¨€/ç®—æ³•/åŠ¨æ€è§„åˆ’/","text":"","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç®—æ³•","slug":"ç¨‹åºè¯­è¨€/ç®—æ³•","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%AE%97%E6%B3%95/"}]},{"title":"å›æº¯ç®—æ³•","date":"2023-07-15T01:43:36.910Z","path":"wiki/ç¨‹åºè¯­è¨€/ç®—æ³•/å›æº¯ç®—æ³•/","text":"å›æº¯æ³•ï¼ˆBack Tracking Methodï¼‰ï¼ˆæ¢ç´¢ä¸å›æº¯æ³•ï¼‰æ˜¯ä¸€ç§é€‰ä¼˜æœç´¢æ³•ï¼Œåˆç§°ä¸ºè¯•æ¢æ³•ï¼ŒæŒ‰é€‰ä¼˜æ¡ä»¶å‘å‰æœç´¢ï¼Œä»¥è¾¾åˆ°ç›®æ ‡ã€‚ä½†å½“æ¢ç´¢åˆ°æŸä¸€æ­¥æ—¶ï¼Œå‘ç°åŸå…ˆé€‰æ‹©å¹¶ä¸ä¼˜æˆ–è¾¾ä¸åˆ°ç›®æ ‡ï¼Œå°±é€€å›ä¸€æ­¥é‡æ–°é€‰æ‹©ï¼Œè¿™ç§èµ°ä¸é€šå°±é€€å›å†èµ°çš„æŠ€æœ¯ä¸ºå›æº¯æ³•ï¼Œè€Œæ»¡è¶³å›æº¯æ¡ä»¶çš„æŸä¸ªçŠ¶æ€çš„ç‚¹ç§°ä¸ºâ€œå›æº¯ç‚¹â€ã€‚ 12345678910result = []def backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨): if æ»¡è¶³ç»“æŸæ¡ä»¶: result.add(è·¯å¾„) return for é€‰æ‹© in é€‰æ‹©åˆ—è¡¨: åšé€‰æ‹© backtrack(è·¯å¾„, é€‰æ‹©åˆ—è¡¨) æ’¤é”€é€‰æ‹© å‚è€ƒ https://my.oschina.net/u/3024426/blog/4689026","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç®—æ³•","slug":"ç¨‹åºè¯­è¨€/ç®—æ³•","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%AE%97%E6%B3%95/"}]},{"title":"çº¢é»‘æ ‘","date":"2023-07-15T01:43:36.908Z","path":"wiki/ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„/çº¢é»‘æ ‘/","text":"å®šä¹‰çº¢é»‘æ ‘æ˜¯ä¸€ç§è‡ªå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå®ƒå¯ä»¥åœ¨ O($\\log(n)$ ) æ—¶é—´å†…å®ŒæˆæŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ï¼Œè¿™é‡Œçš„næ˜¯æ ‘ä¸­å…ƒç´ çš„æ•°ç›®ã€‚ çº¢é»‘æ ‘æ˜¯æ¯ä¸ªèŠ‚ç‚¹éƒ½å¸¦æœ‰é¢œè‰²å±æ€§çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œé¢œè‰²ä¸ºçº¢è‰²æˆ–é»‘è‰²ã€‚åœ¨äºŒå‰æŸ¥æ‰¾æ ‘å¼ºåˆ¶ä¸€èˆ¬è¦æ±‚ä»¥å¤–ï¼Œå¯¹äºä»»ä½•æœ‰æ•ˆçš„çº¢é»‘æ ‘æˆ‘ä»¬å¢åŠ äº†å¦‚ä¸‹çš„é¢å¤–è¦æ±‚ï¼š èŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–é»‘è‰²ã€‚ æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²ã€‚ æ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ç©ºèŠ‚ç‚¹ï¼ˆNILèŠ‚ç‚¹ï¼‰ã€‚ æ¯ä¸ªçº¢è‰²èŠ‚ç‚¹çš„ä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²ã€‚(ä»æ¯ä¸ªå¶å­åˆ°æ ¹çš„æ‰€æœ‰è·¯å¾„ä¸Šä¸èƒ½æœ‰ä¸¤ä¸ªè¿ç»­çš„çº¢è‰²èŠ‚ç‚¹) ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚ æ“ä½œå› ä¸ºæ¯ä¸€ä¸ªçº¢é»‘æ ‘ä¹Ÿæ˜¯ä¸€ä¸ªç‰¹åŒ–çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œå› æ­¤çº¢é»‘æ ‘ä¸Šçš„åªè¯»æ“ä½œä¸æ™®é€šäºŒå‰æŸ¥æ‰¾æ ‘ä¸Šçš„åªè¯»æ“ä½œç›¸åŒã€‚ç„¶è€Œï¼Œåœ¨çº¢é»‘æ ‘ä¸Šè¿›è¡Œæ’å…¥æ“ä½œå’Œåˆ é™¤æ“ä½œä¼šå¯¼è‡´ä¸å†ç¬¦åˆçº¢é»‘æ ‘çš„æ€§è´¨ã€‚æ¢å¤çº¢é»‘æ ‘çš„æ€§è´¨éœ€è¦å°‘é‡ï¼ˆO($\\log(n)$)çš„é¢œè‰²å˜æ›´ï¼ˆå®é™…æ˜¯éå¸¸å¿«é€Ÿçš„ï¼‰å’Œä¸è¶…è¿‡ä¸‰æ¬¡æ ‘æ—‹è½¬ï¼ˆå¯¹äºæ’å…¥æ“ä½œæ˜¯ä¸¤æ¬¡ï¼‰ã€‚è™½ç„¶æ’å…¥å’Œåˆ é™¤å¾ˆå¤æ‚ï¼Œä½†æ“ä½œæ—¶é—´ä»å¯ä»¥ä¿æŒä¸º O ($\\log(n)$)æ¬¡ã€‚ å·¦æ—‹è½¬ é€†æ—¶é’ˆæ—‹è½¬çº¢é»‘æ ‘çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä½¿å¾—çˆ¶èŠ‚ç‚¹è¢«è‡ªå·±çš„å³å­©å­å–ä»£ï¼Œè€Œè‡ªå·±æˆä¸ºè‡ªå·±çš„å·¦å­©å­ã€‚ä¸‹å›¾ä¸­èº«ä¸ºå³å­©å­çš„Yå–ä»£äº†Xçš„ä½ç½®ï¼Œè€ŒXå˜æˆäº†è‡ªå·±çš„å·¦å­©å­ã€‚æ­¤ä¸ºå·¦æ—‹è½¬ã€‚ å³æ—‹è½¬ é¡ºæ—¶é’ˆæ—‹è½¬çº¢é»‘æ ‘çš„ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œä½¿å¾—çˆ¶èŠ‚ç‚¹è¢«è‡ªå·±çš„å·¦å­©å­å–ä»£ï¼Œè€Œè‡ªå·±æˆä¸ºè‡ªå·±çš„å³å­©å­ã€‚ä¸‹å›¾ä¸­èº«ä¸ºå·¦å­©å­çš„Yå–ä»£äº†Xçš„ä½ç½®ï¼Œè€ŒXå˜æˆäº†è‡ªå·±çš„å³å­©å­ã€‚æ­¤ä¸ºå³æ—‹è½¬ã€‚ æ’å…¥åº”ç”¨åœºæ™¯ JDKçš„é›†åˆç±»TreeMapã€TreeSetã€HashMap å‚è€ƒ https://www.cxyxiaowu.com/3173.html https://zh.wikipedia.org/wiki/%E7%BA%A2%E9%BB%91%E6%A0%91","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"ç¨€ç–çŸ©é˜µå’Œå¹¿ä¹‰è¡¨","date":"2023-07-15T01:43:36.907Z","path":"wiki/ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„/ç¨€ç–çŸ©é˜µå’Œå¹¿ä¹‰è¡¨/","text":"å®šä¹‰çŸ©é˜µçŸ©é˜µæ˜¯ä¸€ä¸ªå…·æœ‰mè¡Œ x nåˆ—çš„æ•°è¡¨ï¼Œå…±åŒ…å«m x nä¸ªæ•°ï¼ˆå…ƒç´ ï¼‰ï¼Œæ¯ä¸ªå…ƒç´ å¤„åœ¨ç¡®å®šè¡Œå’Œåˆ—çš„äº¤ç‚¹ä½ç½®ä¸Šï¼Œéƒ½ä¸ä¸€å¯¹è¡Œå·å’Œåˆ—å·å”¯ä¸€å¯¹åº”ã€‚å½“ä¸€ä¸ªçŸ©é˜µä¸­çš„è¡Œæ•°å’Œåˆ—æ•°ç›¸åŒæ—¶ï¼Œå³m &#x3D; næ—¶åˆ™ç§°ä¸ºné˜¶çŸ©é˜µæˆ–æ–¹é˜µã€‚ ç¨€ç–çŸ©é˜µï¼ˆSparseMatrixï¼‰æ˜¯çŸ©é˜µä¸­çš„ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå…¶éé›¶å…ƒç´ çš„ä¸ªæ•°å°äºé›¶å…ƒç´ çš„ä¸ªæ•°ã€‚ å¯¹äºç¨€ç–çŸ©é˜µä¸­çš„æ¯ä¸ªéé›¶å…ƒç´ ï¼Œå¯ç”¨å®ƒæ‰€åœ¨çš„è¡Œå·ã€åˆ—å·ä»¥åŠå…ƒç´ è¿™ä¸‰å…ƒç»„ï¼ˆiï¼Œjï¼Œaijï¼‰æ¥è¡¨ç¤ºã€‚è‹¥æŠŠæ‰€æœ‰çš„ä¸‰å…ƒç»„æŒ‰ç…§è¡Œå·ä¸ºä¸»åºï¼ˆå³ä¸»å…³é”®å­—ï¼‰ã€åˆ—å·ä¸ºè¾…åºï¼ˆæ¬¡å…³é”®å­—ï¼‰è¿›è¡Œæ’åºï¼Œå°±æ„æˆä¸€ä¸ªè¡¨ç¤ºç¨€ç–çŸ©é˜µçš„ä¸‰å…ƒç»„çº¿æ€§è¡¨ã€‚ ((1,1,3),(1,4,5),(2,3,-2),(3,1,1),(3,3,4),(3,5,6),(5,3,-1)) ç¨€ç–çŸ©é˜µçš„å­˜å‚¨ç»“æ„é¡ºåºå­˜å‚¨é“¾å¼å­˜å‚¨ å¸¦è¡ŒæŒ‡é’ˆå‘é‡çš„é“¾æ¥å­˜å‚¨ åœ¨è¿™ç§é“¾æ¥å­˜å‚¨ä¸­ï¼Œéœ€è¦æŠŠå…·æœ‰ç›¸åŒè¡Œå·çš„ä¸‰å…ƒç»„ç»“ç‚¹æŒ‰ç…§åˆ—å·ä»å°åˆ°å¤§çš„é¡ºåºé“¾æ¥æˆä¸€ä¸ªå•é“¾è¡¨ï¼Œæ¯ä¸ªä¸‰å…ƒç»„ç»“ç‚¹çš„ç±»å‹å¯å®šä¹‰ä¸ºï¼š 1234567class TripleNode: def __init__(self): self.row = 0 self.col = 0 self.val = None self.next = None # æŒ‡å‘åŒä¸€è¡Œçš„ä¸‹ä¸€ä¸ªç»“ç‚¹ ç¨€ç–çŸ©é˜µä¸­çš„æ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªå•é“¾è¡¨ï¼Œæ¯ä¸€ä¸ªå•é“¾è¡¨éƒ½æœ‰ä¸€ä¸ªè¡¨å¤´æŒ‡é’ˆï¼Œä¸ºäº†æŠŠå®ƒä»¬ä¿å­˜èµ·æ¥ï¼Œä¾¿äºè®¿é—®æ¯ä¸€ä¸ªå•é“¾è¡¨ï¼Œéœ€è¦ä¸€ä¸ªè¡ŒæŒ‡é’ˆå‘é‡ï¼Œè¯¥å‘é‡ä¸­çš„ç¬¬iä¸ªåˆ†é‡ç”¨æ¥å­˜å‚¨ç¨€ç–çŸ©é˜µä¸­çš„ç¬¬iè¡Œæ‰€å¯¹åº”çš„å•é“¾è¡¨çš„è¡¨å¤´æŒ‡é’ˆã€‚ 12345678class LMatrix: def __init__(self): self.m = 0 self.n = 0 self.t = 0 # éé›¶å…ƒç´ çš„ä¸ªæ•° self.vector = [] åå­—é“¾æ¥å­˜å‚¨ æ—¢å¸¦è¡ŒæŒ‡é’ˆå‘é‡åˆå¸¦åˆ—æŒ‡é’ˆå‘é‡çš„é“¾æ¥å­˜å‚¨ã€‚åœ¨è¿™ç§é“¾æ¥å­˜å‚¨ä¸­ï¼Œæ¯ä¸ªä¸‰å…ƒç»„ç»“ç‚¹æ—¢å¤„äºåŒä¸€è¡Œçš„å•é“¾è¡¨ä¸­ï¼Œåˆå¤„äºåŒä¸€åˆ—çš„å•é“¾è¡¨ä¸­ï¼Œå³å¤„äºæ‰€åœ¨çš„è¡Œå•é“¾è¡¨å’Œåˆ—å•é“¾è¡¨çš„äº¤ç‚¹å¤„ã€‚ 1234567891011121314151617class CrossNode: def __init__(self): self.row = 0 self.col = 0 self.val = None self.right = None # å­˜å‚¨æŒ‡å‘åŒä¸€è¡Œä¸‹ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆ self.down = None # å­˜å‚¨åŒä¸€åˆ—ä¸‹ä¸€ä¸ªç»“ç‚¹çš„æŒ‡é’ˆclass CLMatrix: def __init__(self): self.m = 0 self.n = 0 self.t = 0 self.rv = [] # è¡Œå‘é‡æŒ‡é’ˆï¼Œå­˜å‚¨è¡Œå•é“¾è¡¨çš„è¡¨å¤´æŒ‡é’ˆ self.cv = [] # åˆ—å‘é‡æŒ‡é’ˆï¼Œå­˜å‚¨åˆ—å•é“¾è¡¨çš„è¡¨å¤´æŒ‡é’ˆ å¹¿ä¹‰è¡¨(Generalized List)ä¸€ä¸ªå¹¿ä¹‰è¡¨æ˜¯nï¼ˆn â‰¥ 0ï¼‰ä¸ªå…ƒç´ çš„ä¸€ä¸ªåºåˆ—ï¼Œå½“n &#x3D; 0æ—¶åˆ™ç§°ä¸ºç©ºè¡¨ã€‚åœ¨ä¸€ä¸ªéç©ºçš„å¹¿ä¹‰è¡¨ä¸­ï¼Œå…¶å…ƒç´ å¯ä»¥æ˜¯æŸä¸€ç¡®å®šç±»å‹çš„å¯¹è±¡ï¼ˆè¿™ç§å…ƒç´ è¢«ç§°ä¸ºå•å…ƒç´ ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”±å•å…ƒç´ æ„æˆçš„è¡¨ï¼ˆè¿™ç§å…ƒç´ å¯ç›¸å¯¹çš„è¢«ç§°ä¸ºå­è¡¨æˆ–è¡¨å…ƒç´ ï¼‰ã€‚æ˜¾ç„¶ï¼Œå¹¿ä¹‰è¡¨çš„å®šä¹‰æ˜¯é€’å½’çš„ã€‚ è®¾aiä¸ºå¹¿ä¹‰è¡¨çš„ç¬¬iä¸ªå…ƒç´ ï¼Œåˆ™å¹¿ä¹‰è¡¨çš„ä¸€èˆ¬è¡¨ç¤ºä¸çº¿æ€§è¡¨ç›¸åŒï¼š (a1,a2,a3,â€¦,ai,â€¦,an) å…¶ä¸­nè¡¨ç¤ºå¹¿ä¹‰è¡¨çš„é•¿åº¦ï¼Œå³å¹¿ä¹‰è¡¨ä¸­æ‰€å«å…ƒç´ çš„ä¸ªæ•°ï¼Œn â‰¥ 0ã€‚ æ·±åº¦ï¼šè¡¨ä¸­æ‹¬å·çš„æœ€å¤§å±‚æ•° è¡¨ç¤ºæ–¹å¼ ç”¨å°å†™å­—æ¯è¡¨ç¤ºå•å…ƒç´ ï¼Œç”¨å¤§å†™å­—æ¯è¡¨ç¤ºè¡¨ A &#x3D; ()Aæ˜¯ç©ºè¡¨ï¼Œé•¿åº¦ä¸º0ï¼Œæ·±åº¦ä¸º1ã€‚ B &#x3D; (e)Bæ˜¯é•¿åº¦ä¸º1çš„å¹¿ä¹‰è¡¨ï¼Œæ·±åº¦ä¸º1ã€‚çº¿æ€§è¡¨ã€‚ C &#x3D; (a, (b,c,d))Cæ˜¯é•¿åº¦ä¸º2çš„å¹¿ä¹‰è¡¨ï¼Œæ·±åº¦ä¸º2ã€‚ D &#x3D; (A, B, C) &#x3D; ((), (e), (a, (b, c, d)))Dæ˜¯é•¿åº¦ä¸º3çš„å¹¿ä¹‰è¡¨ï¼Œæ·±åº¦ä¸º3ã€‚Aã€Bã€Cä¸ºå­è¡¨ã€‚ E &#x3D; ((a, (a,b), ((a,b), c))) ç”¨åœ†åœˆå’Œæ–¹æ¡†åˆ†åˆ«è¡¨ç¤ºè¡¨å’Œå•å…ƒç´ ï¼Œå¹¶ç”¨çº¿æ®µæŠŠè¡¨å’Œå®ƒçš„å…ƒç´ è¿æ¥èµ·æ¥ï¼Œåˆ™å¯å¾—åˆ°ä¸€ä¸ªå¹¿ä¹‰è¡¨çš„å›¾å½¢è¡¨ç¤ºã€‚ æŠ½è±¡æ•°æ®ç±»å‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556ADT GList&#123;æ•°æ®å¯¹è±¡ï¼š D=&#123;ei | i=1,2,...,n; n&gt;0; eiâˆˆAtomSet æˆ–eiâˆˆGList, AtomSetä¸ºæŸä¸ªæ•°æ®å¯¹è±¡ &#125;æ•°æ®å…³ç³»ï¼š R1=&#123;&lt;ei-1,ei&gt; | ei-1,eiâˆˆD, 2&lt;=i&lt;=n&#125;åŸºæœ¬æ“ä½œï¼š InitGList(&amp;L); æ“ä½œç»“æœï¼š åˆ›å»ºç©ºçš„å¹¿ä¹‰è¡¨Lã€‚ CreateGList(&amp;L, S); åˆå§‹æ¡ä»¶ï¼š Sæ˜¯å¹¿ä¹‰è¡¨çš„ä¹¦å†™å½¢å¼ä¸²ã€‚ æ“ä½œç»“æœï¼š ç”±Såˆ›å»ºå¹¿ä¹‰è¡¨Lã€‚ DestroyGList(&amp;L); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š é”€æ¯å¹¿ä¹‰è¡¨Lã€‚ CopyGList(&amp;T, L); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š ç”±å¹¿ä¹‰è¡¨Lå¤åˆ¶å¾—åˆ°å¹¿ä¹‰è¡¨Tã€‚ GListLength(L); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š æ±‚å¹¿ä¹‰è¡¨Lçš„é•¿åº¦ GListenDepth(L); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š æ±‚å¹¿ä¹‰è¡¨Lçš„æ·±åº¦ GListEmpty(L); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š åˆ¤å®šå¹¿ä¹‰è¡¨Læ˜¯å¦ä¸ºç©º GetHead(L); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š å–å¹¿ä¹‰è¡¨Lçš„å¤´ GetTail(L); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š å–å¹¿ä¹‰è¡¨Lçš„å°¾ InsertFirst_GL(&amp;L, e); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š æ’å…¥å…ƒç´ eä½œä¸ºå¹¿ä¹‰è¡¨Lçš„ç¬¬ä¸€å…ƒç´  DeleteFirst_GL(&amp;L, &amp;e); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š åˆ é™¤å¹¿ä¹‰è¡¨Lçš„ç¬¬ä¸€å…ƒç´ ï¼Œå¹¶ç”¨eè¿”å›å…¶å€¼ Traverse_GL(L, Visit()); åˆå§‹æ¡ä»¶ï¼š å¹¿ä¹‰è¡¨Lå­˜åœ¨ æ“ä½œç»“æœï¼š éå†å¹¿ä¹‰è¡¨Lï¼Œç”¨å‡½æ•°Visitå¤„ç†æ¯ä¸ªå…ƒç´ &#125;ADT GList; å­˜å‚¨åœ¨ä¸€ä¸ªå¹¿ä¹‰è¡¨ä¸­ï¼Œå…¶æ•°æ®å…ƒç´ æœ‰å•å…ƒç´ å’Œå­è¡¨ä¹‹åˆ†ï¼Œæ‰€ä»¥åœ¨å¯¹åº”çš„å­˜å‚¨ç»“æ„ä¸­ï¼Œå…¶å­˜å‚¨ç»“ç‚¹ä¹Ÿæœ‰å•å…ƒç´ ç»“ç‚¹å’Œå­è¡¨ç»“ç‚¹ä¹‹åˆ†ã€‚å¯¹äºå•å…ƒç´ ç»“ç‚¹ï¼Œåº”åŒ…æ‹¬å€¼åŸŸå’ŒæŒ‡å‘å…¶åç»§ç»“ç‚¹çš„æŒ‡é’ˆåŸŸï¼›å¯¹äºå­è¡¨ç»“ç‚¹ï¼Œåº”åŒ…æ‹¬æŒ‡å‘å­è¡¨ä¸­ç¬¬ä¸€ä¸ªç»“ç‚¹çš„è¡¨å¤´æŒ‡é’ˆåŸŸå’ŒæŒ‡å‘å…¶åç»§ç»“ç‚¹çš„æŒ‡é’ˆåŸŸã€‚ä¸ºäº†æŠŠå¹¿ä¹‰è¡¨ä¸­çš„å•å…ƒç´ ç»“ç‚¹å’Œå­è¡¨ç»“ç‚¹åŒºåˆ«å¼€ï¼Œè¿˜å¿…é¡»åœ¨æ¯ä¸ªç»“ç‚¹ä¸­å¢è®¾ä¸€ä¸ªæ ‡å¿—åŸŸï¼Œè®©æ ‡å¿—åŸŸå–ä¸åŒçš„å€¼ï¼Œä»è€ŒåŒºåˆ«ä¸åŒçš„ç»“ç‚¹ã€‚ ç”±äºåˆ—è¡¨ä¸­çš„æ•°æ®å…ƒç´ å¯èƒ½ä¸ºåŸå­æˆ–åˆ—è¡¨ï¼Œ ç”±æ­¤éœ€è¦ä¸¤ç§ç»“æ„çš„ç»“ç‚¹ï¼š ä¸€ç§æ˜¯è¡¨ç»“ç‚¹ï¼Œç”¨äºè¡¨ç¤ºåˆ—è¡¨ï¼›ä¸€ç§æ˜¯åŸå­ç»“ç‚¹ï¼Œç”¨ä»¥è¡¨ç¤ºåŸå­ã€‚è‹¥åˆ—è¡¨ä¸ç©ºï¼Œåˆ™å¯åˆ†è§£æˆè¡¨å¤´å’Œè¡¨å°¾ï¼›åä¹‹ï¼Œä¸€å¯¹ç¡®å®šçš„è¡¨å¤´å’Œè¡¨å°¾å¯å”¯ä¸€ç¡®å®šåˆ—è¡¨ã€‚ç”±æ­¤ï¼Œä¸€ä¸ªè¡¨ç»“ç‚¹å¯ç”±3ä¸ªåŸŸç»„æˆï¼š æ ‡å¿—åŸŸã€æŒ‡ç¤ºè¡¨å¤´çš„æŒ‡é’ˆåŸŸå’ŒæŒ‡ç¤ºè¡¨å°¾çš„æŒ‡é’ˆåŸŸï¼› è€ŒåŸå­ç»“ç‚¹åªéœ€ä¸¤ä¸ªåŸŸï¼š æ ‡å¿—åŸŸå’Œå€¼åŸŸã€‚ å¤´å°¾é“¾è¡¨å­˜å‚¨ç»“æ„123456789101112131415161718//------ å¹¿ä¹‰è¡¨çš„å¤´å°¾é“¾è¡¨å­˜å‚¨è¡¨ç¤º -------typedef enum&#123; ATOM, //ATOM == 0: åŸå­ LIST //LIST == 1: å­è¡¨&#125;ElemTag;typedef GLNode&#123; ElemTag tag; //å…¬å…±éƒ¨åˆ†ï¼Œç”¨äºåŒºåˆ†åŸå­ç»“ç‚¹å’Œè¡¨ç»“ç‚¹ union&#123; //åŸå­ç»“ç‚¹å’Œè¡¨ç»“ç‚¹çš„è”åˆéƒ¨åˆ† AtomType atom; //atomæ˜¯åŸå­ç»“ç‚¹çš„å€¼åŸŸï¼ŒAtomTypeç”±ç”¨æˆ·å®šä¹‰ struct&#123; struct GLNode *hp; struct GLNode *tp; &#125;ptr; //ptræ˜¯è¡¨èŠ‚ç‚¹çš„æŒ‡é’ˆåŸŸï¼Œptr.hpå’Œptr.tpåˆ†åˆ«æŒ‡å‘è¡¨å¤´å’Œè¡¨å°¾ &#125;&#125;*GList; //å¹¿ä¹‰è¡¨ç±»å‹ æ‰©å±•çº¿æ€§é“¾è¡¨å­˜å‚¨ç»“æ„123456789101112131415161718//------ å¹¿ä¹‰è¡¨çš„æ‰©å±•çº¿æ€§é“¾è¡¨å­˜å‚¨è¡¨ç¤º -------typedef enum&#123; ATOM, //ATOM == 0: åŸå­ LIST //LIST == 1: å­è¡¨&#125;ElemTag;typedef GLNode&#123; ElemTag tag; //å…¬å…±éƒ¨åˆ†ï¼Œç”¨äºåŒºåˆ†åŸå­ç»“ç‚¹å’Œè¡¨ç»“ç‚¹ union&#123; //åŸå­ç»“ç‚¹å’Œè¡¨ç»“ç‚¹çš„è”åˆéƒ¨åˆ† AtomType atom; //atomæ˜¯åŸå­ç»“ç‚¹çš„å€¼åŸŸï¼ŒAtomTypeç”±ç”¨æˆ·å®šä¹‰ struct GLNode *hp; //è¡¨ç»“ç‚¹çš„è¡¨å¤´æŒ‡é’ˆ &#125;; struct GLNode *tp; //ç›¸å½“äºçº¿æ€§é“¾è¡¨çš„nextï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ç»“ç‚¹&#125;*GList; å‚è€ƒ https://www.scipy.org/ SciPyä½¿ç”¨å¤šä¸ªæ•°æ®ç»“æ„ä¸ºåˆ›å»ºç¨€ç–çŸ©é˜µæä¾›äº†å·¥å…·ï¼Œä»¥åŠå°†ç¨ å¯†çŸ©é˜µè½¬åŒ–ä¸ºç¨€ç–çŸ©é˜µçš„å·¥å…·ã€‚ csc_matrix: Compressed Sparse Column format csr_matrix: Compressed Sparse Row format bsr_matrix: Block Sparse Row format lil_matrix: List of Lists format dok_matrix: Dictionary of Keys format coo_matrix: COOrdinate format (aka IJV, triplet format) dia_matrix: DIAgonal format","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"å¹³è¡¡äºŒå‰æ ‘AVL","date":"2023-07-15T01:43:36.903Z","path":"wiki/ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„/å¹³è¡¡äºŒå‰æ ‘AVL/","text":"å®šä¹‰å¹³è¡¡äºŒå‰æ ‘ä¹Ÿå«è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ˆSelf-Balancing Binary Search Treeï¼‰ï¼Œæ‰€ä»¥å…¶æœ¬è´¨ä¹Ÿæ˜¯ä¸€é¢—äºŒå‰æœç´¢æ ‘ã€‚åœ¨AVLæ ‘ä¸­ï¼Œä»»ä¸€èŠ‚ç‚¹å¯¹åº”çš„ä¸¤æ£µå­æ ‘çš„æœ€å¤§é«˜åº¦å·®ä¸º1ï¼Œå› æ­¤å®ƒä¹Ÿè¢«ç§°ä¸ºé«˜åº¦å¹³è¡¡æ ‘ã€‚èŠ‚ç‚¹çš„å¹³è¡¡å› å­æ˜¯å®ƒçš„å·¦å­æ ‘çš„é«˜åº¦å‡å»å®ƒçš„å³å­æ ‘çš„é«˜åº¦ï¼ˆæœ‰æ—¶ç›¸åï¼‰ã€‚å¸¦æœ‰å¹³è¡¡å› å­1ã€0æˆ– -1çš„èŠ‚ç‚¹è¢«è®¤ä¸ºæ˜¯å¹³è¡¡çš„ã€‚å¸¦æœ‰å¹³è¡¡å› å­ -2æˆ–2çš„èŠ‚ç‚¹è¢«è®¤ä¸ºæ˜¯ä¸å¹³è¡¡çš„ï¼Œå¹¶éœ€è¦é‡æ–°å¹³è¡¡è¿™ä¸ªæ ‘ï¼ˆæ—‹è½¬æ“ä½œï¼‰ã€‚ æœ€å°å¤±è¡¡å­æ ‘ï¼šåœ¨æ–°æ’å…¥çš„ç»“ç‚¹å‘ä¸ŠæŸ¥æ‰¾ï¼Œä»¥ç¬¬ä¸€ä¸ªå¹³è¡¡å› å­çš„ç»å¯¹å€¼è¶…è¿‡1çš„ç»“ç‚¹ä¸ºæ ¹çš„å­æ ‘ç§°ä¸ºæœ€å°ä¸å¹³è¡¡å­æ ‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ£µå¤±è¡¡çš„æ ‘ï¼Œæ˜¯æœ‰å¯èƒ½æœ‰å¤šæ£µå­æ ‘åŒæ—¶å¤±è¡¡çš„ã€‚è€Œè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åªè¦è°ƒæ•´æœ€å°çš„ä¸å¹³è¡¡å­æ ‘ï¼Œå°±èƒ½å¤Ÿå°†ä¸å¹³è¡¡çš„æ ‘è°ƒæ•´ä¸ºå¹³è¡¡çš„æ ‘ã€‚Ã å¹³è¡¡äºŒå‰æ ‘çš„å¤±è¡¡è°ƒæ•´ä¸»è¦æ˜¯é€šè¿‡æ—‹è½¬æœ€å°å¤±è¡¡å­æ ‘æ¥å®ç°çš„ã€‚æ ¹æ®æ—‹è½¬çš„æ–¹å‘æœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼Œå·¦æ—‹ä¸å³æ—‹ã€‚ æ—‹è½¬çš„ç›®çš„å°±æ˜¯å‡å°‘é«˜åº¦ï¼Œé€šè¿‡é™ä½æ•´æ£µæ ‘çš„é«˜åº¦æ¥å¹³è¡¡ã€‚å“ªè¾¹çš„æ ‘é«˜ï¼Œå°±æŠŠé‚£è¾¹çš„æ ‘å‘ä¸Šæ—‹è½¬ã€‚ å·¦æ—‹ èŠ‚ç‚¹çš„å³å­©å­æ›¿ä»£æ­¤èŠ‚ç‚¹ä½ç½® å³å­©å­çš„å·¦å­æ ‘å˜ä¸ºè¯¥èŠ‚ç‚¹çš„å³å­æ ‘ èŠ‚ç‚¹æœ¬èº«å˜ä¸ºå³å­©å­çš„å·¦å­æ ‘ å³æ—‹ èŠ‚ç‚¹çš„å·¦å­©å­ä»£è¡¨æ­¤èŠ‚ç‚¹ èŠ‚ç‚¹çš„å·¦å­©å­çš„å³å­æ ‘å˜ä¸ºèŠ‚ç‚¹çš„å·¦å­æ ‘ å°†æ­¤èŠ‚ç‚¹ä½œä¸ºå·¦å­©å­èŠ‚ç‚¹çš„å³å­æ ‘ã€‚ AVLæ ‘çš„å››ç§æ’å…¥èŠ‚ç‚¹æ–¹å¼å¹³è¡¡äºŒå‰æ ‘æ’å…¥èŠ‚ç‚¹çš„æƒ…å†µåˆ†ä¸ºä»¥ä¸‹å››ç§ï¼š æ’å…¥æ–¹å¼ æè¿° æ—‹è½¬æ–¹å¼ LL åœ¨ A çš„å·¦å­æ ‘æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸Šæ’å…¥èŠ‚ç‚¹è€Œç ´åå¹³è¡¡ å³æ—‹è½¬ RR åœ¨ A çš„å³å­æ ‘æ ¹èŠ‚ç‚¹çš„å³å­æ ‘ä¸Šæ’å…¥èŠ‚ç‚¹è€Œç ´åå¹³è¡¡ å·¦æ—‹è½¬ LR åœ¨Açš„å·¦å­æ ‘æ ¹èŠ‚ç‚¹çš„å³å­æ ‘ä¸Šæ’å…¥èŠ‚ç‚¹è€Œç ´åå¹³è¡¡ å…ˆå·¦æ—‹åå³æ—‹ RL åœ¨ A çš„å³å­æ ‘æ ¹èŠ‚ç‚¹çš„å·¦å­æ ‘ä¸Šæ’å…¥èŠ‚ç‚¹è€Œç ´åå¹³è¡¡ å…ˆå³æ—‹åå·¦æ—‹ è¯¦ç»†åˆ†æåˆ é™¤AVL æ ‘å’ŒäºŒå‰æŸ¥æ‰¾æ ‘çš„åˆ é™¤æ“ä½œæƒ…å†µä¸€è‡´ï¼Œéƒ½åˆ†ä¸ºå››ç§æƒ…å†µï¼š åˆ é™¤å¶å­èŠ‚ç‚¹ åˆ é™¤çš„èŠ‚ç‚¹åªæœ‰å·¦å­æ ‘ åˆ é™¤çš„èŠ‚ç‚¹åªæœ‰å³å­æ ‘ åˆ é™¤çš„èŠ‚ç‚¹æ—¢æœ‰å·¦å­æ ‘åˆæœ‰å³å­æ ‘ åªä¸è¿‡AVLæ ‘åœ¨åˆ é™¤èŠ‚ç‚¹åéœ€è¦é‡æ–°æ£€æŸ¥å¹³è¡¡æ€§å¹¶ä¿®æ­£ï¼ŒåŒæ—¶ï¼Œåˆ é™¤æ“ä½œä¸æ’å…¥æ“ä½œåçš„å¹³è¡¡ä¿®æ­£åŒºåˆ«åœ¨äºï¼Œæ’å…¥æ“ä½œååªéœ€è¦å¯¹æ’å…¥æ ˆä¸­çš„å¼¹å‡ºçš„ç¬¬ä¸€ä¸ªéå¹³è¡¡èŠ‚ç‚¹è¿›è¡Œä¿®æ­£ï¼Œè€Œåˆ é™¤æ“ä½œéœ€è¦ä¿®æ­£æ ˆä¸­çš„æ‰€æœ‰éå¹³è¡¡èŠ‚ç‚¹ã€‚ åˆ é™¤æ“ä½œçš„å¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š ä»¥å‰ä¸‰ç§æƒ…å†µä¸ºåŸºç¡€å°è¯•åˆ é™¤èŠ‚ç‚¹ï¼Œå¹¶å°†è®¿é—®èŠ‚ç‚¹å…¥æ ˆã€‚ å¦‚æœå°è¯•åˆ é™¤æˆåŠŸï¼Œåˆ™ä¾æ¬¡æ£€æŸ¥æ ˆé¡¶èŠ‚ç‚¹çš„å¹³è¡¡çŠ¶æ€ï¼Œé‡åˆ°éå¹³è¡¡èŠ‚ç‚¹ï¼Œå³è¿›è¡Œæ—‹è½¬å¹³è¡¡ï¼Œç›´åˆ°æ ˆç©ºã€‚ å¦‚æœå°è¯•åˆ é™¤å¤±è´¥ï¼Œè¯æ˜æ˜¯ç¬¬å››ç§æƒ…å†µã€‚è¿™æ—¶å…ˆæ‰¾åˆ°è¢«åˆ é™¤èŠ‚ç‚¹çš„å³å­æ ‘æœ€å°èŠ‚ç‚¹å¹¶åˆ é™¤å®ƒï¼Œå°†è®¿é—®èŠ‚ç‚¹ç»§ç»­å…¥æ ˆã€‚ å†ä¾æ¬¡æ£€æŸ¥æ ˆé¡¶èŠ‚ç‚¹çš„å¹³è¡¡çŠ¶æ€å’Œä¿®æ­£ç›´åˆ°æ ˆç©ºã€‚ å¯¹äºåˆ é™¤æ“ä½œé€ æˆçš„éå¹³è¡¡çŠ¶æ€çš„ä¿®æ­£ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šå¯¹å·¦æˆ–è€…å³å­æ ‘çš„åˆ é™¤æ“ä½œç›¸å½“äºå¯¹å³æˆ–è€…å·¦å­æ ‘çš„æ’å…¥æ“ä½œï¼Œç„¶åå†å¯¹åº”ä¸Šæ’å…¥çš„å››ç§æƒ…å†µé€‰æ‹©ç›¸åº”çš„æ—‹è½¬å°±å¥½äº†ã€‚ è¯¦ç»†åˆ†æå‚è€ƒ https://blog.csdn.net/jyy305/article/details/70949010 https://zhuanlan.zhihu.com/p/56066942 https://www.cs.usfca.edu/~galles&#x2F;visualization&#x2F;AVLtree.html","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"æ ˆå’Œé˜Ÿåˆ—","date":"2023-07-15T01:43:36.903Z","path":"wiki/ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„/æ ˆå’Œé˜Ÿåˆ—/","text":"æ ˆæ ˆï¼ˆStackï¼‰ï¼Œä¹Ÿå«åè¿›å…ˆå‡ºè¡¨ï¼ˆLast In First Outï¼‰ï¼Œæ˜¯ä¸€ç§è¿ç®—å—é™çš„çº¿æ€§è¡¨ï¼Œå…¶é™åˆ¶æ˜¯ä»…å…è®¸åœ¨è¡¨çš„ä¸€ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤è¿ç®—ã€‚è¿™ä¸€ç«¯ç§°ä¸ºæ ˆé¡¶ï¼Œæ ˆé¡¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ è¢«ç§°ä¸ºæ ˆé¡¶å…ƒç´ ï¼Œç›¸å¯¹çš„ï¼Œå¦ä¸€ç«¯ç§°ä¸ºæ ˆåº•ã€‚å‘ä¸€ä¸ªæ ˆæ’å…¥æ–°å…ƒç´ ç§°ä¸ºè¿›æ ˆæˆ–å…¥æ ˆï¼Œä»ä¸€ä¸ªæ ˆåˆ é™¤å…ƒç´ åˆç§°ä¸ºå‡ºæ ˆæˆ–é€€æ ˆã€‚ å­˜å‚¨ç»“æ„æ ˆåˆ†ä¸ºé¡ºåºæ ˆå’Œé“¾å¼æ ˆï¼Œå¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–é“¾è¡¨ï¼ˆå•å‘é“¾è¡¨ã€åŒå‘é“¾è¡¨æˆ–å¾ªç¯é“¾è¡¨ï¼‰ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ã€‚ é¡ºåºå­˜å‚¨é“¾å¼å­˜å‚¨é˜Ÿåˆ—é˜Ÿåˆ—ï¼ˆQueueï¼‰ï¼Œä¹Ÿå«å…ˆè¿›å…ˆå‡ºè¡¨ï¼ˆFirst In First Outï¼‰ä»…å…è®¸åœ¨è¡¨çš„ä¸€ç«¯ï¼ˆé˜Ÿå°¾rearï¼‰è¿›è¡Œæ’å…¥ï¼Œåœ¨è¡¨çš„å¦ä¸€ç«¯ï¼ˆé˜Ÿé¦–frontï¼‰è¿›è¡Œåˆ é™¤ã€‚","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"æ ‘","date":"2023-07-15T01:43:36.903Z","path":"wiki/ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„/æ ‘/","text":"å®šä¹‰ æ ‘æ˜¯ç”±nï¼ˆn&gt;&#x3D;1ï¼‰ä¸ªæœ‰é™èŠ‚ç‚¹ç»„æˆä¸€ä¸ªå…·æœ‰å±‚æ¬¡å…³ç³»çš„é›†åˆã€‚æŠŠå®ƒå«åšâ€œæ ‘â€æ˜¯å› ä¸ºå®ƒçœ‹èµ·æ¥åƒä¸€æ£µå€’æŒ‚çš„æ ‘ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯æ ¹æœä¸Šï¼Œè€Œå¶æœä¸‹çš„ã€‚å®ƒå…·æœ‰ä»¥ä¸‹çš„ç‰¹ç‚¹ï¼š æ¯ä¸ªèŠ‚ç‚¹æœ‰é›¶ä¸ªæˆ–å¤šä¸ªå­èŠ‚ç‚¹ï¼› æ²¡æœ‰çˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹ç§°ä¸ºæ ¹èŠ‚ç‚¹ï¼› æ¯ä¸€ä¸ªéæ ¹èŠ‚ç‚¹æœ‰ä¸”åªæœ‰ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ï¼› é™¤äº†æ ¹èŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªå­èŠ‚ç‚¹å¯ä»¥åˆ†ä¸ºå¤šä¸ªä¸ç›¸äº¤çš„å­æ ‘ï¼› æ ‘çš„æœ¯è¯­ èŠ‚ç‚¹çš„åº¦ï¼šä¸€ä¸ªèŠ‚ç‚¹å«æœ‰çš„å­æ ‘çš„ä¸ªæ•°ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„åº¦ï¼› æ ‘çš„åº¦ï¼šä¸€æ£µæ ‘ä¸­ï¼Œæœ€å¤§çš„èŠ‚ç‚¹çš„åº¦ç§°ä¸ºæ ‘çš„åº¦ï¼› å¶èŠ‚ç‚¹æˆ–ç»ˆç«¯èŠ‚ç‚¹ï¼šåº¦ä¸ºé›¶çš„èŠ‚ç‚¹ï¼› çˆ¶äº²èŠ‚ç‚¹æˆ–çˆ¶èŠ‚ç‚¹ï¼šè‹¥ä¸€ä¸ªèŠ‚ç‚¹å«æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™è¿™ä¸ªèŠ‚ç‚¹ç§°ä¸ºå…¶å­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼› å­©å­èŠ‚ç‚¹æˆ–å­èŠ‚ç‚¹ï¼šä¸€ä¸ªèŠ‚ç‚¹å«æœ‰çš„å­æ ‘çš„æ ¹èŠ‚ç‚¹ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼› å…„å¼ŸèŠ‚ç‚¹ï¼šå…·æœ‰ç›¸åŒçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹äº’ç§°ä¸ºå…„å¼ŸèŠ‚ç‚¹ï¼› èŠ‚ç‚¹çš„å±‚æ¬¡ï¼šä»æ ¹å¼€å§‹å®šä¹‰èµ·ï¼Œæ ¹ä¸ºç¬¬1å±‚ï¼Œæ ¹çš„å­èŠ‚ç‚¹ä¸ºç¬¬2å±‚ï¼Œä»¥æ­¤ç±»æ¨ï¼› æ ‘çš„é«˜åº¦æˆ–æ·±åº¦ï¼šæ ‘ä¸­èŠ‚ç‚¹çš„æœ€å¤§å±‚æ¬¡ï¼› å ‚å…„å¼ŸèŠ‚ç‚¹ï¼šçˆ¶èŠ‚ç‚¹åœ¨åŒä¸€å±‚çš„èŠ‚ç‚¹äº’ä¸ºå ‚å…„å¼Ÿï¼› èŠ‚ç‚¹çš„ç¥–å…ˆï¼šä»æ ¹åˆ°è¯¥èŠ‚ç‚¹æ‰€ç»åˆ†æ”¯ä¸Šçš„æ‰€æœ‰èŠ‚ç‚¹ï¼› å­å­™ï¼šä»¥æŸèŠ‚ç‚¹ä¸ºæ ¹çš„å­æ ‘ä¸­ä»»ä¸€èŠ‚ç‚¹éƒ½ç§°ä¸ºè¯¥èŠ‚ç‚¹çš„å­å­™ã€‚ æ£®æ—ï¼šç”±mï¼ˆm â‰¥ 0ï¼‰æ£µäº’ä¸ç›¸äº¤çš„æ ‘çš„é›†åˆç§°ä¸ºæ£®æ—ï¼› æ ‘çš„ç§ç±» æ— åºæ ‘ï¼š æ ‘ä¸­ä»»æ„èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰é¡ºåºå…³ç³»ï¼Œè¿™ç§æ ‘ç§°ä¸ºæ— åºæ ‘ï¼Œä¹Ÿç§°ä¸ºè‡ªç”±æ ‘ æœ‰åºæ ‘ æ ‘ä¸­ä»»æ„èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¹‹é—´æœ‰é¡ºåºå…³ç³»ï¼Œè¿™ç§æ ‘ç§°ä¸ºæœ‰åºæ ‘ äºŒå‰æ ‘ï¼šæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå«æœ‰ä¸¤ä¸ªå­æ ‘çš„æ ‘ç§°ä¸ºäºŒå‰æ ‘ å®Œå…¨äºŒå‰æ ‘ï¼šå¯¹äºä¸€é¢—äºŒå‰æ ‘ï¼Œå‡è®¾å…¶æ·±åº¦ä¸ºd(d&gt;1)ã€‚é™¤äº†ç¬¬då±‚å¤–ï¼Œå…¶å®ƒå„å±‚çš„èŠ‚ç‚¹æ•°ç›®å‡å·²è¾¾æœ€å¤§å€¼ï¼Œä¸”ç¬¬då±‚æ‰€æœ‰èŠ‚ç‚¹ä»å·¦å‘å³è¿ç»­åœ°ç´§å¯†æ’åˆ—ï¼Œè¿™æ ·çš„äºŒå‰æ ‘è¢«ç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ï¼Œå…¶ä¸­æ»¡äºŒå‰æ ‘çš„å®šä¹‰æ˜¯æ‰€æœ‰å¶èŠ‚ç‚¹éƒ½åœ¨æœ€åº•å±‚çš„å®Œå…¨äºŒå‰æ ‘; å¹³è¡¡äºŒå‰æ ‘ï¼šå½“ä¸”ä»…å½“ä»»ä½•èŠ‚ç‚¹çš„ä¸¤æ£µå­æ ‘çš„é«˜åº¦å·®ä¸å¤§äº1çš„äºŒå‰æ ‘ï¼› æ’åºäºŒå‰æ ‘ï¼š éœå¤«æ›¼æ ‘ï¼ˆç”¨äºä¿¡æ¯ç¼–ç ï¼‰ï¼šå¸¦æƒè·¯å¾„æœ€çŸ­çš„äºŒå‰æ ‘ç§°ä¸ºå“ˆå¤«æ›¼æ ‘æˆ–æœ€ä¼˜äºŒå‰æ ‘ï¼› Bæ ‘ï¼šä¸€ç§å¯¹è¯»å†™æ“ä½œè¿›è¡Œä¼˜åŒ–çš„è‡ªå¹³è¡¡çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œèƒ½å¤Ÿä¿æŒæ•°æ®æœ‰åºï¼Œæ‹¥æœ‰å¤šä½™ä¸¤ä¸ªå­æ ‘ã€‚ æ ‘çš„æ€§è´¨ æ ‘ä¸­çš„èŠ‚ç‚¹æ•°ç­‰äºæ‰€æœ‰èŠ‚ç‚¹çš„åº¦æ•°åŠ 1ã€‚ åº¦ä¸ºkçš„æ ‘ä¸­ç¬¬iå±‚ä¸Šè‡³å¤šæœ‰ki-1ä¸ªèŠ‚ç‚¹ï¼ˆi â‰¥ 1ï¼‰ã€‚ æ·±åº¦ä¸ºhçš„kå‰æ ‘è‡³å¤šæœ‰ä¸ªèŠ‚ç‚¹ $\\frac{k^{h}-1}{h-1}$ ä¸ªèŠ‚ç‚¹ã€‚ å…·æœ‰nä¸ªèŠ‚ç‚¹çš„kå‰æ ‘çš„æœ€å°æ·±åº¦ä¸º âŒˆ$\\log_{k} (n(k-1)+1)$âŒ‰ äºŒå‰æ ‘ äºŒå‰æ ‘ï¼ˆBinary Treeï¼‰æ˜¯æŒ‡æ ‘çš„åº¦ä¸º2çš„æœ‰åºæ ‘ã€‚æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å­æ ‘çš„æ ¹èŠ‚ç‚¹ç§°ä¸ºå·¦å­©å­ï¼ˆleft childï¼‰ï¼Œå³å­æ ‘çš„æ ¹èŠ‚ç‚¹ç§°ä¸ºå³å­©å­ï¼ˆright childï¼‰ã€‚ æ€§è´¨ äºŒå‰æ ‘ä¸Šç»ˆç«¯èŠ‚ç‚¹æ•°ç­‰äºåŒåˆ†æ”¯èŠ‚ç‚¹æ•°åŠ 1ã€‚ äºŒå‰æ ‘ä¸Šç¬¬iå±‚è‡³å¤šæœ‰2i-1ä¸ªèŠ‚ç‚¹ï¼ˆi â‰¥ 1ï¼‰ã€‚ æ·±åº¦ä¸ºhçš„äºŒå‰æ ‘è‡³å¤šæœ‰2h-1ä¸ªèŠ‚ç‚¹ã€‚ å¯¹å®Œå…¨äºŒå‰æ ‘ä¸­ç¼–å·ä¸ºiçš„èŠ‚ç‚¹ï¼ˆ1 â‰¤ i â‰¤ nï¼Œ n â‰¥ 1ï¼Œnä¸ºèŠ‚ç‚¹æ•° ï¼‰æœ‰ï¼š è‹¥i â‰¤ âŒŠn&#x2F;2âŒ‹ï¼Œå³2i â‰¤ nï¼Œåˆ™ç¼–å·ä¸ºiçš„èŠ‚ç‚¹ä¸ºåˆ†æ”¯èŠ‚ç‚¹ï¼Œå¦åˆ™ä¸ºå¶å­èŠ‚ç‚¹ã€‚ è‹¥nä¸ºå¥‡æ•°ï¼Œåˆ™æ¯ä¸ªåˆ†æ”¯èŠ‚ç‚¹éƒ½æ—¢æœ‰å·¦å­©å­ï¼Œåˆæœ‰å³å­©å­ï¼›è‹¥nä¸ºå¶æ•°ï¼Œåˆ™ç¼–å·æœ€å¤§çš„åˆ†æ”¯èŠ‚ç‚¹ï¼ˆç¼–å·ä¸ºn&#x2F;2ï¼‰åªæœ‰å·¦å­©å­ï¼Œæ²¡æœ‰å³å­©å­ï¼Œå…¶ä½™åˆ†æ”¯èŠ‚ç‚¹å·¦ã€å³å­©å­éƒ½æœ‰ã€‚ è‹¥ç¼–å·ä¸ºiçš„èŠ‚ç‚¹å³å·¦å­©å­ï¼Œåˆ™å·¦å­©å­èŠ‚ç‚¹çš„ç¼–å·ä¸º2iï¼›è‹¥ç¼–å·ä¸ºiçš„èŠ‚ç‚¹æœ‰å³å­©å­ï¼Œåˆ™å³å­©å­èŠ‚ç‚¹çš„ç¼–å·ä¸º2i+1ã€‚ é™¤æ ‘æ ¹èŠ‚ç‚¹å¤–ï¼Œè‹¥ä¸€ä¸ªèŠ‚ç‚¹çš„ç¼–å·ä¸ºiï¼Œåˆ™ä»–çš„åŒäº²èŠ‚ç‚¹çš„ç¼–å·ä¸º âŒŠi&#x2F;2âŒ‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“iä¸ºå¶æ•°æ—¶ï¼Œå…¶åŒäº²èŠ‚ç‚¹çš„ç¼–å·ä¸ºi&#x2F;2ï¼Œå®ƒæ—¶åŒäº²èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œ å½“iä¸ºå¥‡æ•°æ—¶ï¼Œå…¶åŒäº²èŠ‚ç‚¹çš„ç¼–å·ä¸º(i-1)&#x2F;2ï¼Œå®ƒæ˜¯åŒäº²èŠ‚ç‚¹çš„å³å­©å­ã€‚ å…·æœ‰nä¸ªï¼ˆn &gt; 0ï¼‰èŠ‚ç‚¹çš„å®Œå…¨äºŒå‰æ ‘çš„æ·±åº¦ä¸ºâŒˆ$\\log_{2} (n+1)$âŒ‰æˆ–âŒŠ$\\log_{2} n$âŒ‹+1ã€‚ äºŒå‰æ ‘çš„å­˜å‚¨ç»“æ„ äºŒå‰æ ‘çš„éå† éå†äºŒå‰æ ‘çš„é—®é¢˜å¯ä»¥åˆ†ä¸ºï¼š è®¿é—®æ ¹èŠ‚ç‚¹ éå†å·¦å­æ ‘ éå†å³å­æ ‘ éå†æ–¹å¼åˆ†ä¸ºï¼šDLRã€LDRã€LRDã€DRLã€RDLã€RLDã€‚ å‰åºéå†ç®—æ³• ä¸­åºéå†ç®—æ³• åç»­éå†ç®—æ³• çº¿ç´¢äºŒå‰æ ‘äºŒå‰æ ‘çš„çº¿ç´¢åŒ–å¯¹äºŒå‰æ ‘è¿›è¡ŒæŸç§éå†å¾—åˆ°çš„èŠ‚ç‚¹åºåˆ—ï¼Œå¯ä»¥çœ‹åšä¸€ä¸ªçº¿æ€§è¡¨ï¼Œåœ¨è¯¥çº¿æ€§è¡¨ä¸­ï¼Œé™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå‰é©±ï¼Œé™¤æœ€åä¸€ä¸ªèŠ‚ç‚¹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåç»§ã€‚ä¸ºäº†åŒèŠ‚ç‚¹åœ¨äºŒå‰æ ‘ä¸­å…·æœ‰çš„å‰é©±ï¼ˆå³åŒäº²ï¼‰å’Œåç»§ï¼ˆå³å­©å­ï¼‰åŒºåˆ«å¼€æ¥ï¼Œåœ¨å®¹æ˜“æ··æ·†çš„åœ°æ–¹ï¼Œæˆ‘ä»¬é€šå¸¸æŠŠåºåˆ—ä¸­èŠ‚ç‚¹çš„å‰é©±æˆ–åç»§å† ä»¥æŸç§éå†çš„åç§°ï¼Œå¦‚æŠŠä¸­åºåºåˆ—ä¸­èŠ‚ç‚¹çš„å‰é©±ç§°åšä¸­åºå‰é©±ï¼ŒèŠ‚ç‚¹çš„åç»§ç§°åšä¸­åºåç»§ã€‚ å¯¹äºä¸€é¢—å…·æœ‰nä¸ªèŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œå¯¹åº”çš„äºŒå‰é“¾è¡¨ä¸­å…±æœ‰2nä¸ªæŒ‡é’ˆåŸŸï¼Œå…¶ä¸­n-1ä¸ªç”¨äºæŒ‡å‘é™¤æ ‘æ ¹èŠ‚ç‚¹çš„å…¶ä½™n-1ä¸ªèŠ‚ç‚¹ï¼Œå¦æœ‰n+1ä¸ªæŒ‡é’ˆåŸŸç©ºç€ã€‚è‹¥æŠŠæ¯ä¸ªèŠ‚ç‚¹ä¸­ç©ºç€çš„å·¦æŒ‡é’ˆåŸŸå’Œå³æŒ‡é’ˆåŸŸç”¨äºåˆ†åˆ«æŒ‡å‘æŸç§éå†æ¬¡åºçš„å‰é©±èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹ï¼Œåˆ™åœ¨éå†è¿™ç§äºŒå‰æ ‘æ—¶ï¼Œå¯ç”±æ­¤ä¿¡æ¯ç›´æ¥æ‰¾åˆ°åœ¨è¯¥éå†æ¬¡åºä¸‹çš„å‰é©±èŠ‚ç‚¹æˆ–åç»§èŠ‚ç‚¹ï¼Œä»è€Œæ¯”é€’å½’éå†æé«˜äº†éå†é€Ÿåº¦å’ŒèŠ‚çœäº†å»ºç«‹ç³»ç»Ÿæ ˆæ‰€ä½¿ç”¨çš„å­˜å‚¨ç©ºé—´ã€‚è¿™ç§åœ¨èŠ‚ç‚¹çš„ç©ºæŒ‡é’ˆåŸŸä¸­å­˜æ”¾çš„è¯¥èŠ‚ç‚¹åœ¨æŸæ¬¡éå†æ¬¡åºä¸‹çš„å‰é©±èŠ‚ç‚¹æˆ–åç»§èŠ‚ç‚¹çš„æŒ‡é’ˆå«åšçº¿ç´¢ï¼Œå…¶ä¸­åœ¨ç©ºçš„å·¦æŒ‡é’ˆåŸŸä¸­å­˜æ”¾çš„æŒ‡å‘å…¶å‰é©±èŠ‚ç‚¹çš„æŒ‡é’ˆå«åšå·¦çº¿ç´¢æˆ–å‰é©±çº¿ç´¢ï¼Œåœ¨ç©ºçš„å³æŒ‡é’ˆåŸŸä¸­å­˜æ”¾çš„æŒ‡å‘å…¶åç»§èŠ‚ç‚¹çš„æŒ‡é’ˆå«åšå³çº¿ç´¢æˆ–åç»§çº¿ç´¢ã€‚å¯¹ä¸€é¢—äºŒå‰æ ‘ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹çš„ç©ºæŒ‡é’ˆåŸŸæŒ‰ç…§æŸç§éå†æ¬¡åºåŠ çº¿ç´¢çš„è¿‡ç¨‹å«åšçº¿ç´¢åŒ–ï¼Œè¢«çº¿ç´¢åŒ–äº†çš„äºŒå‰æ ‘å«åšçº¿ç´¢äºŒå‰æ ‘ã€‚ äºŒå‰æ’åºæ ‘å®šä¹‰äºŒå‰æ’åºæ ‘ï¼ˆBinary Sort Treeï¼‰åˆç§°ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆBinary Search Treeï¼‰ï¼Œå®ƒæˆ–è€…æ˜¯ä¸€é¢—ç©ºæ ‘ï¼Œæˆ–è€…æ˜¯ä¸€é¢—å…·æœ‰å¦‚ä¸‹ç‰¹å¾çš„éç©ºäºŒå‰æ ‘ï¼š è‹¥å®ƒçš„å·¦å­æ ‘éç©ºï¼Œåˆ™å·¦å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å…³é”®å­—å°äºæ ¹èŠ‚ç‚¹çš„å…³é”®å­—ï¼› è‹¥å®ƒçš„å³å­æ ‘éç©ºï¼Œåˆ™å³å­æ ‘ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„å…³é”®å­—å‡å¤§äºï¼ˆè‹¥å…è®¸å…·æœ‰ç›¸åŒçš„å…³é”®å­—çš„èŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™å¤§äºç­‰äºï¼‰æ ¹èŠ‚ç‚¹çš„å…³é”®å­—ï¼› å·¦ã€å³å­æ ‘æœ¬èº«åˆæ˜¯äºŒå‰æ’åºæ ‘ã€‚ æŸ¥æ‰¾å’Œæ’å…¥å½“äºŒå‰æŸ¥æ‰¾æ ‘ä¸ä¸ºç©ºæ—¶ï¼š é¦–å…ˆå°†ç»™å®šå€¼ä¸æ ¹èŠ‚ç‚¹çš„å…³é”®å­—æ¯”è¾ƒï¼Œè‹¥ç›¸ç­‰ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸ è‹¥å°äºæ ¹èŠ‚ç‚¹çš„å…³é”®å­—å€¼ï¼Œé€’å½’æŸ¥å·¦å­æ ‘ è‹¥å¤§äºæ ¹èŠ‚ç‚¹çš„å…³é”®å­—å€¼ï¼Œé€’å½’æŸ¥å³å­æ ‘ è‹¥å­æ ‘ä¸ºç©ºï¼ŒæŸ¥æ‰¾ä¸æˆåŠŸ äºŒå‰æ’åºæ ‘æ˜¯ä¸€ç§åŠ¨æ€æ ‘è¡¨ã€‚å…¶ç‰¹ç‚¹æ˜¯ï¼šæ ‘çš„ç»“æ„é€šå¸¸ä¸æ˜¯ä¸€æ¬¡ç”Ÿæˆçš„ï¼Œè€Œæ˜¯åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œå½“æ ‘ä¸­ä¸å­˜åœ¨å…³é”®å­—ç­‰äºç»™å®šå€¼çš„èŠ‚ç‚¹æ—¶å†è¿›è¡Œæ’å…¥ã€‚æ–°æ’å…¥çš„èŠ‚ç‚¹ä¸€å®šæ˜¯ä¸€ä¸ªæ–°æ·»åŠ çš„å¶å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ˜¯æŸ¥æ‰¾ä¸æˆåŠŸæ—¶æŸ¥æ‰¾è·¯å¾„ä¸Šè®¿é—®çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å­©å­æˆ–å³å­©å­èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š åˆ é™¤äºŒå‰æŸ¥æ‰¾æ ‘çš„åˆ é™¤æ“ä½œåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š å¦‚æœå¾…åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå¯ä»¥ç«‹å³è¢«åˆ é™¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚æœèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªå„¿å­ï¼Œåˆ™å°†æ­¤èŠ‚ç‚¹parentçš„æŒ‡é’ˆæŒ‡å‘æ­¤èŠ‚ç‚¹çš„å„¿å­ï¼Œç„¶ååˆ é™¤èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¦‚æœèŠ‚ç‚¹æœ‰ä¸¤ä¸ªå„¿å­ï¼Œåˆ™å°†å…¶å³å­æ ‘çš„æœ€å°æ•°æ®ä»£æ›¿æ­¤èŠ‚ç‚¹çš„æ•°æ®ï¼Œå¹¶å°†å…¶å³å­æ ‘çš„æœ€å°æ•°æ®åˆ é™¤ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å‚è€ƒ https://pegasuswang.github.io/python_data_structures_and_algorithms&#x2F;17_%E4%BA%8C%E5%8F%89%E6%9F%A5%E6%89%BE%E6%A0%91&#x2F;binary_search_tree&#x2F; å“ˆå¤«æ›¼æ ‘ï¼ˆæœ€ä¼˜äºŒå‰æ ‘ï¼‰ è·¯å¾„å’Œè·¯å¾„é•¿åº¦ è‹¥åœ¨ä¸€é¢—æ ‘ä¸­å­˜åœ¨ç€ä¸€ä¸ªèŠ‚ç‚¹åºåˆ—k1ï¼Œk2ï¼Œâ€¦.kjï¼Œä½¿å¾—kjæ˜¯kj+1çš„åŒäº²ï¼ˆ1 â‰¤ i &lt; jï¼‰ï¼Œåˆ™ç§°æ­¤èŠ‚ç‚¹åºåˆ—æ˜¯ä»k1ï½kjçš„è·¯å¾„ï¼Œå› æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ä¸ªåŒäº²èŠ‚ç‚¹ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯è¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å”¯ä¸€è·¯å¾„ã€‚ä»k1ï½kjæ‰€ç»è¿‡çš„åˆ†æ”¯æ•°ç§°ä¸ºè¿™ä¸¤ç‚¹ä¹‹é—´çš„è·¯å¾„é•¿åº¦ï¼Œå®ƒç­‰äºè·¯å¾„ä¸Šçš„èŠ‚ç‚¹æ•°å‡1ã€‚ èŠ‚ç‚¹çš„æƒå’Œå¸¦æƒè·¯å¾„é•¿åº¦ åœ¨è®¸å¤šåº”ç”¨ä¸­ï¼Œå¸¸å¸¸å°†æ ‘ä¸­çš„èŠ‚ç‚¹èµ‹ä¸Šä¸€ä¸ªæœ‰ç€æŸç§æ„ä¹‰çš„å®æ•°ï¼Œæˆ‘ä»¬ç§°æ­¤å®æ•°ä¸ºè¯¥èŠ‚ç‚¹çš„æƒã€‚èŠ‚ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦è§„å®šä¸ºä»æ ‘æ ¹èŠ‚ç‚¹åˆ°è¯¥èŠ‚ç‚¹ä¹‹é—´çš„è·¯å¾„é•¿åº¦äºè¯¥èŠ‚ç‚¹ä¸Šæƒçš„ä¹˜ç§¯ã€‚ æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦ æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦å®šä¹‰ä¸ºæ ‘ä¸­æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„å¸¦æƒè·¯å¾„é•¿åº¦ä¹‹å’Œï¼Œé€šå¸¸è®°ä¸ºï¼š $\\sum_{i&#x3D;1}^n {w_{i}}l_{i}$ å…¶ä¸­nè¡¨ç¤ºå¶å­èŠ‚ç‚¹çš„æ•°ç›®ï¼Œwiå’Œliåˆ†åˆ«è¡¨ç¤ºå¶å­èŠ‚ç‚¹kiçš„æƒå€¼å’Œæ ¹åˆ°kiä¹‹é—´çš„è·¯å¾„é•¿åº¦ã€‚ å“ˆå¤«æ›¼æ ‘ å“ˆå¤«æ›¼æ ‘ï¼ˆHuffmanï¼‰æ ‘åˆç§°æœ€ä¼˜äºŒå‰æ ‘ã€‚å®ƒæ˜¯nä¸ªå¸¦æƒå¶å­èŠ‚ç‚¹æ„æˆçš„æ‰€æœ‰äºŒå‰æ ‘ä¸­ï¼Œå¸¦æƒè·¯å¾„é•¿åº¦WPLæœ€å°çš„äºŒå‰æ ‘ã€‚ æ„é€ å“ˆå¤«æ›¼æ ‘ æ ¹æ®ç»™å®šçš„nä¸ªæƒå€¼{w1,w2,â€¦,wn}æ„æˆäºŒå‰æ ‘é›†åˆF&#x3D;{T1,T2,â€¦,Tn},å…¶ä¸­æ¯æ£µäºŒå‰æ ‘Tiä¸­åªæœ‰ä¸€ä¸ªå¸¦æƒä¸ºwiçš„æ ¹èŠ‚ç‚¹,å…¶å·¦å³å­æ ‘ä¸ºç©ºã€‚ åœ¨Fä¸­é€‰å–ä¸¤æ£µæ ¹èŠ‚ç‚¹æƒå€¼æœ€å°çš„æ ‘ä½œä¸ºå·¦å³å­æ ‘æ„é€ ä¸€æ£µæ–°çš„äºŒå‰æ ‘,ä¸”ç½®æ–°çš„äºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹çš„æƒå€¼ä¸ºå·¦å³å­æ ‘æ ¹èŠ‚ç‚¹çš„æƒå€¼ä¹‹å’Œã€‚ åœ¨Fä¸­åˆ é™¤è¿™ä¸¤æ£µæ ‘,åŒæ—¶å°†æ–°çš„äºŒå‰æ ‘åŠ å…¥Fä¸­ã€‚ é‡å¤2ã€3,ç›´åˆ°Fåªå«æœ‰ä¸€æ£µæ ‘ä¸ºæ­¢.(å¾—åˆ°å“ˆå¤«æ›¼æ ‘)ã€‚ å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLæ ‘ï¼‰äºŒå‰æœç´¢æ ‘ä¸­ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘æ·±åº¦å·®çš„ç»å¯¹å€¼ä¸å¤§äº1ã€‚ (aï¼‰æ‰€ç¤ºä¸º AVL æ ‘ï¼Œè€Œï¼ˆbï¼‰æ‰€ç¤ºåˆ™ä¸æ˜¯ AVL æ ‘ã€‚ é‚£ä¹ˆï¼Œå¦‚ä½•åˆ¤æ–­ä¸€æ£µæ ‘æ˜¯å¦ç¬¦åˆ AVL æ ‘çš„æ€§è´¨ï¼Ÿç­”æ¡ˆå°±æ˜¯ç»´æŠ¤æ¯ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­ã€‚æ¯ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­å³ä¸ºèŠ‚ç‚¹å·¦å­æ ‘çš„æ·±åº¦å‡å»å³å­æ ‘çš„æ·±åº¦å¾—åˆ°çš„å·®ã€‚åœ¨ç¬¦åˆ AVL æ€§è´¨çš„æƒ…å†µä¸‹ï¼Œå¹³è¡¡å› å­åªèƒ½å– -1ã€0ã€1ã€‚ æ­£å› ä¸ºè¿™æ ·ï¼Œåœ¨æ’å…¥æˆ–åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ä¹‹åï¼Œè¦ä»æ’å…¥æˆ–åˆ é™¤çš„ä½ç½®æ²¿é€šå‘æ ¹çš„è·¯å¾„å›æº¯ï¼Œæ›´æ–°è¿™äº›ç»è¿‡çš„èŠ‚ç‚¹çš„å¹³è¡¡å› å­ã€‚åœ¨æ£€æµ‹åˆ°å½“å‰èŠ‚ç‚¹çš„å¹³è¡¡å› å­çš„ç»å¯¹å€¼å¤§äº1æ—¶ï¼Œåœæ­¢å›æº¯ï¼Œæ ¹æ®å›æº¯è·¯å¾„ä¸­å½“å‰èŠ‚ç‚¹ä»¥åŠå½“å‰èŠ‚ç‚¹æ·±åº¦+1 å’Œæ·±åº¦+2 ä¸¤å±‚èŠ‚ç‚¹çš„ä½ç½®ï¼Œé€‰æ‹©æ—‹è½¬æ–¹æ³•å¯¹äºŒå‰æ ‘çš„ç»“æ„è¿›è¡Œè°ƒæ•´ã€‚ å¦‚æœä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ä¸­çš„èŠ‚ç‚¹å‘ç”Ÿäº†å˜åŒ–ï¼Œä½¿äºŒå‰æ ‘ä¸å†å¹³è¡¡ï¼Œæ­¤æ—¶éœ€è¦é‡‡ç”¨å¹³è¡¡åŒ–æ—‹è½¬æ¥è°ƒæ•´æ ‘çš„ç»“æ„ï¼Œä½¿å¾—åœ¨ä¸ç ´åäºŒå‰æœç´¢æ ‘æ€§è´¨çš„æƒ…å†µä¸‹ï¼Œè®©äºŒå‰æ ‘é‡æ–°è¾¾åˆ°å¹³è¡¡ã€‚ å¹³è¡¡åŒ–æ—‹è½¬åˆ†ä¸ºä¸¤ç§ï¼šå•å‘æ—‹è½¬å’ŒåŒå‘æ—‹è½¬ã€‚å¦‚æœå›æº¯è·¯å¾„ä¸­å½“å‰èŠ‚ç‚¹ä»¥åŠä¸‹ä¸¤å±‚èŠ‚ç‚¹å¤„äºä¸€æ¡ç›´çº¿ä¸Šï¼Œå°±å¯ä»¥é‡‡ç”¨å•å‘æ—‹è½¬ã€‚å¦‚æœåœ¨ä¸‹ä¸¤å±‚çš„èŠ‚ç‚¹ä¸­ï¼Œæ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ˜¯çˆ¶äº²èŠ‚ç‚¹çš„å³å­©å­ï¼Œé‚£ä¹ˆå¦‚å›¾ 3 æ‰€ç¤ºï¼Œæ­¤æ—¶é‡‡ç”¨å•å‘å·¦æ—‹ã€‚ ç”±äºæ­¤å¤„ A&lt;B&lt;Cï¼Œæ‰€ä»¥å·¦æ—‹åå¹¶ä¸ç ´åäºŒå‰æœç´¢æ ‘çš„æ€§è´¨ï¼Œè€Œåˆšå¥½ä½¿å¾—å¹³è¡¡å› å­æ¢å¤åˆ°ç¬¦åˆ AVL æ ‘æ€§è´¨çš„å¤§å°ã€‚ è¿™æ ·çš„è¿‡ç¨‹åŒæ ·å¯ä»¥ç”¨å›¾æ¥å±•ç¤ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨å›¾ 4 è¿™æ ·ä¸€æ£µå¹³è¡¡äºŒå‰æ ‘ä¸­æ’å…¥èŠ‚ç‚¹åï¼Œæ•´æ£µæ ‘å°±å˜å¾—ä¸å¹³è¡¡äº†ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ–¹çš„æ•°å­—å°±æ˜¯è¯¥èŠ‚ç‚¹çš„å¹³è¡¡å› å­ï¼Œè€Œé•¿æ–¹å½¢ä»£è¡¨å­æ ‘ï¼Œé•¿æ–¹å½¢é‡Œé¢çš„å¼å­ç­‰äºå®ƒçš„æ·±åº¦ã€‚ è¦æƒ³è°ƒæ•´äºŒå‰æ ‘çš„ç»“æ„ï¼Œè¿™é‡Œå°±è¦ç”¨åˆ°å¹³è¡¡å·¦æ—‹äº†ã€‚æˆ‘ä»¬å–æ¯ä¸€æ£µå­æ ‘çš„æ ¹èŠ‚ç‚¹æ¥ä»£è¡¨è¿™ä¸€æ•´æ£µå­æ ‘ï¼Œç”¨ä¸€å…± 5 ä¸ªèŠ‚ç‚¹æ¥æ¼”ç¤ºå•å‘å·¦æ—‹çš„è¿‡ç¨‹ã€‚å›¾ 5 æ‰€ç¤ºå°±æ˜¯å•å‘å·¦æ—‹çš„æ•ˆæœã€‚ å¹³è¡¡æ ‘çš„ç»“æ„æœ€åè¢«è°ƒæ•´æˆäº†å›¾ 6 æ‰€ç¤ºè¿™æ ·ï¼Œè€Œå¹³è¡¡å› å­ä¹Ÿé‡æ–°å˜å¾—ç¬¦åˆ AVL æ ‘æ€§è´¨äº†ã€‚ åŒæ ·çš„é“ç†ï¼Œå¦‚æœéœ€è¦è¿›è¡Œå¹³è¡¡æ—‹è½¬æ—¶ï¼Œå½“å‰èŠ‚ç‚¹çš„ä¸‹ä¸¤å±‚èŠ‚ç‚¹éƒ½æ˜¯çˆ¶èŠ‚ç‚¹çš„å·¦å­©å­ï¼Œé‚£ä¹ˆå°±éœ€è¦é‡‡ç”¨å•å‘å³æ—‹ã€‚å•å‘å³æ—‹çš„é“ç†å’Œå•å‘å·¦æ—‹éå¸¸ç›¸ä¼¼ï¼Œä¸‹é¢å°±ä¸»è¦ç”¨å›¾æ¥æ¼”ç¤ºï¼Œä¸å¤šåšè®²è§£äº†ã€‚å•å‘å³æ—‹çš„è¿‡ç¨‹å¦‚å›¾ 7ï½å›¾ 9 æ‰€ç¤ºã€‚ å‚è€ƒ https://www.cxyxiaowu.com/1663.html","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"Bæ ‘ã€B+æ ‘","date":"2023-07-15T01:43:36.896Z","path":"wiki/ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„/Bæ ‘/","text":"Bæ ‘Bæ ‘ä¹Ÿç§°B-æ ‘,å®ƒæ˜¯ä¸€é¢—å¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ã€‚æè¿°ä¸€é¢—Bæ ‘æ—¶éœ€è¦æŒ‡å®šå®ƒçš„é˜¶æ•°ï¼Œé˜¶æ•°è¡¨ç¤ºäº†ä¸€ä¸ªç»“ç‚¹æœ€å¤šæœ‰å¤šå°‘ä¸ªå­©å­ç»“ç‚¹ï¼Œä¸€èˆ¬ç”¨å­—æ¯mè¡¨ç¤ºé˜¶æ•°ã€‚å½“må–2æ—¶ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è§çš„äºŒå‰æœç´¢æ ‘ã€‚ ä¸€é¢—mé˜¶çš„Bæ ‘å®šä¹‰å¦‚ä¸‹ï¼š æ¯ä¸ªç»“ç‚¹æœ€å¤šåŒ…å«mä¸ªå­ç»“ç‚¹ï¼›ä¸”M&gt;2 æ ¹ç»“ç‚¹çš„å„¿å­æ•°ä¸º[2, M] é™¤æ ¹ç»“ç‚¹ä»¥å¤–ï¼Œéå¶å­ç»“ç‚¹çš„å­ç»“ç‚¹æ•°ä¸º[M&#x2F;2, M] æ¯ä¸ªç»“ç‚¹å­˜æ”¾è‡³å°‘M&#x2F;2-1ï¼ˆå–ä¸Šæ•´ï¼‰å’Œè‡³å¤šM-1ä¸ªå…³é”®å­—ï¼›ï¼ˆè‡³å°‘2ä¸ªå…³é”®å­—ï¼‰ éå¶å­ç»“ç‚¹çš„å…³é”®å­—ä¸ªæ•°&#x3D;æŒ‡å‘å„¿å­çš„æŒ‡é’ˆä¸ªæ•°-1ï¼› éå¶å­ç»“ç‚¹çš„å…³é”®å­—ï¼šK[1], K[2], â€¦, K[M-1]ï¼›ä¸”K[i] &lt; K[i+1]ï¼› éå¶å­ç»“ç‚¹çš„æŒ‡é’ˆï¼šP[1], P[2], â€¦, P[M]ï¼›å…¶ä¸­P[1]æŒ‡å‘å…³é”®å­—å°äºK[1]çš„å­æ ‘ï¼ŒP[M]æŒ‡å‘å…³é”®å­—å¤§äºK[M-1]çš„å­æ ‘ï¼Œå…¶å®ƒP[i]æŒ‡å‘å…³é”®å­—å±äº(K[i-1], K[i])çš„å­æ ‘ï¼› æ‰€æœ‰å¶å­ç»“ç‚¹ä½äºåŒä¸€å±‚ï¼› æ’å…¥æ’å…¥åœ¨å¶èŠ‚ç‚¹çº§åˆ«å®Œæˆã€‚è¦å°†é¡¹ç›®æ’å…¥Bæ ‘ï¼Œéœ€è¦éµå¾ªä»¥ä¸‹ç®—æ³•ã€‚ éå†Bæ ‘ä»¥æ‰¾åˆ°å¯æ’å…¥èŠ‚ç‚¹çš„é€‚å½“å¶èŠ‚ç‚¹ã€‚ å¦‚æœå¶èŠ‚ç‚¹åŒ…å«å°‘äºm-1ä¸ªé”®ï¼Œåˆ™æŒ‰é€’å¢é¡ºåºæ’å…¥å…ƒç´ ã€‚ å¦åˆ™ï¼Œå¦‚æœå¶èŠ‚ç‚¹åŒ…å«m-1ä¸ªé”®ï¼Œåˆ™æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚ æŒ‰å…ƒç´ çš„é€’å¢é¡ºåºæ’å…¥æ–°å…ƒç´ ã€‚ å°†èŠ‚ç‚¹æ‹†åˆ†ä¸ºä¸­é—´çš„ä¸¤ä¸ªèŠ‚ç‚¹ã€‚ å°†ä¸­å€¼å…ƒç´ æ¨é€åˆ°å…¶çˆ¶èŠ‚ç‚¹ã€‚ å¦‚æœçˆ¶èŠ‚ç‚¹è¿˜åŒ…å«m-1ä¸ªé”®ï¼Œåˆ™æŒ‰ç…§ç›¸åŒçš„æ­¥éª¤å°†å…¶æ‹†åˆ†ã€‚ åˆ é™¤è¿˜åœ¨å¶èŠ‚ç‚¹å¤„æ‰§è¡Œåˆ é™¤ã€‚ è¦åˆ é™¤çš„èŠ‚ç‚¹å¯ä»¥æ˜¯å¶èŠ‚ç‚¹æˆ–å†…éƒ¨èŠ‚ç‚¹ã€‚ éœ€è¦éµå¾ªä»¥ä¸‹ç®—æ³•æ‰èƒ½ä»Bæ ‘ä¸­åˆ é™¤èŠ‚ç‚¹ã€‚ æ‰¾åˆ°å¶èŠ‚ç‚¹ã€‚ å¦‚æœå¶èŠ‚ç‚¹ä¸­æœ‰å¤šäºm&#x2F;2ä¸ªé”®ï¼Œåˆ™ä»èŠ‚ç‚¹ä¸­åˆ é™¤æ‰€éœ€çš„é”®ã€‚ å¦‚æœå¶èŠ‚ç‚¹ä¸åŒ…å«m&#x2F;2ä¸ªé”®ï¼Œåˆ™é€šè¿‡ä»8ä¸ªæˆ–å·¦å…„å¼Ÿä¸­è·å–å…ƒç´ æ¥å®Œæˆé”®ã€‚ å¦‚æœå·¦ä¾§å…„å¼ŸåŒ…å«å¤šäºm&#x2F;2ä¸ªå…ƒç´ ï¼Œåˆ™å°†å…¶æœ€å¤§å…ƒç´ æ¨é€åˆ°å…¶çˆ¶å…ƒç´ ï¼Œå¹¶å°†æ’å…¥å…ƒç´ å‘ä¸‹ç§»åŠ¨åˆ°åˆ é™¤é”®çš„èŠ‚ç‚¹ã€‚ å¦‚æœå³ä¾§å…„å¼ŸåŒ…å«å¤šäºm&#x2F;2ä¸ªå…ƒç´ ï¼Œåˆ™å°†å…¶æœ€å°å…ƒç´ å‘ä¸Šæ¨é€åˆ°çˆ¶èŠ‚ç‚¹ï¼Œå¹¶å°†æ’å…¥å…ƒç´ å‘ä¸‹ç§»åŠ¨åˆ°åˆ é™¤é”®çš„èŠ‚ç‚¹ã€‚ å¦‚æœå…„å¼ŸèŠ‚ç‚¹éƒ½ä¸åŒ…å«å¤šäºm&#x2F;2ä¸ªå…ƒç´ ï¼Œåˆ™é€šè¿‡è¿æ¥ä¸¤ä¸ªå¶èŠ‚ç‚¹å’Œçˆ¶èŠ‚ç‚¹çš„æ’å…¥å…ƒç´ æ¥åˆ›å»ºæ–°çš„å¶èŠ‚ç‚¹ã€‚ å¦‚æœçˆ¶èŠ‚ç‚¹çš„èŠ‚ç‚¹å°‘äºm&#x2F;2ï¼Œé‚£ä¹ˆä¹Ÿåº”åœ¨çˆ¶èŠ‚ç‚¹ä¸Šåº”ç”¨ä¸Šè¿°è¿‡ç¨‹ã€‚ å¦‚æœè¦åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å†…éƒ¨èŠ‚ç‚¹ï¼Œåˆ™å°†èŠ‚ç‚¹æ›¿æ¢ä¸ºå…¶æœ‰åºåç»§æˆ–å‰ä¸€ä¸ªèŠ‚ç‚¹ã€‚ ç”±äºåç»§æˆ–å‰ä»»å°†å§‹ç»ˆä½äºå¶èŠ‚ç‚¹ä¸Šï¼Œå› æ­¤è¯¥è¿‡ç¨‹å°†ç±»ä¼¼äºä»å¶èŠ‚ç‚¹ä¸­åˆ é™¤èŠ‚ç‚¹ã€‚ åº”ç”¨åœºæ™¯ æŸ¥æ‰¾ç£ç›˜ä¸­çš„å¤§é‡æ•°æ®ã€‚ æ•°æ®åº“ä¸­çš„ç´¢å¼•ã€‚ å‚è€ƒ https://www.yiibai.com/data_structure&#x2F;b-tree.html B+æ ‘B+æ ‘æ˜¯Bæ ‘çš„å˜ä½“ï¼Œæœ‰ç€æ›´é«˜çš„æŸ¥è¯¢æ€§èƒ½ã€‚ å‚è€ƒ https://www.cnblogs.com/nullzx/p/8729425.html","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"å›¾","date":"2023-07-15T01:43:36.896Z","path":"wiki/ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„/å›¾/","text":"å®šä¹‰å›¾ï¼ˆGraphï¼‰æ˜¯å›¾å½¢ç»“æ„çš„ç®€ç§°ã€‚ G &#x3D; (V, E) Vç§°ä¸ºé¡¶ç‚¹é›†ï¼ˆVertices setï¼‰ï¼ŒEç§°ä¸ºè¾¹é›†ï¼ˆEdges setï¼‰ã€‚Eçš„å…ƒç´ æ˜¯ä¸€ä¸ªäºŒå…ƒç»„æ•°å¯¹ï¼Œç”¨(x,y)è¡¨ç¤ºï¼Œå…¶ä¸­x,yâˆˆVã€‚ å…¶ä¸­Væ˜¯éç©ºçš„é¡¶ç‚¹é›†åˆï¼Œå³V &#x3D; {Vi|0â‰¤iâ‰¤n-1,nâ‰¥1, Vi$\\in$VertexType}ï¼Œå…¶ä¸­VertexTypeè¡¨ç¤ºä»»ä½•ç±»å‹ï¼Œnä¸ºé¡¶ç‚¹æ•°ï¼›Eæ˜¯Vä¸ŠäºŒå…ƒå…³ç³»çš„é›†åˆã€‚ V(G1) &#x3D; {0,1,2,3,4,5,}E(G1) &#x3D; {(0,1),(0,2),(0,3),(0,4),(1,4),(2,4),(3,5),(4,5)}V(G2) &#x3D; {0,1,2,3,4}E(G2) &#x3D; {&lt;0,1&gt;,&lt;0,2&gt;,&lt;1,2&gt;,&lt;1,4&gt;,&lt;2,1&gt;,&lt;2,3&gt;,&lt;4,3&gt;} G1ä¸ºæ— å‘å›¾ï¼ˆundirected graphï¼‰ï¼Œå›¾ä¸­æ¯ä¸ªå…ƒç´ ä¸ºä¸€ä¸ªæ— åºäºŒå…ƒç»„ (u,v)ï¼Œç§°ä½œæ— å‘è¾¹ (Undirected edge)ï¼Œç®€ç§°**è¾¹ (Edge)ï¼Œå…¶ä¸­ u,vâˆˆVã€‚è®¾ e&#x3D;(u,v)ï¼Œåˆ™ u,v ç§°ä¸º e çš„ç«¯ç‚¹ (End-vertex)**ã€‚ G2ä¸ºæœ‰å‘å›¾ï¼ˆdirected graphï¼‰ï¼Œæ¯ä¸€ä¸ªå…ƒç´ ä¸ºä¸€ä¸ª (æœ‰åº) äºŒå…ƒç»„ (u,v)ï¼Œæœ‰æ—¶ä¹Ÿå†™ä½œ uâ†’vï¼Œç§°ä½œæœ‰å‘è¾¹ (Directed edge) æˆ–å¼§ (Arc)ï¼Œåœ¨ä¸å¼•èµ·æ··æ·†çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥ç§°ä½œè¾¹ã€‚è®¾ e&#x3D;uâ†’vï¼Œåˆ™æ­¤æ—¶ u ç§°ä¸º e çš„èµ·ç‚¹ (Origin)ï¼Œv ç§°ä¸º e çš„ç»ˆç‚¹ (Terminus)ï¼Œèµ·ç‚¹å’Œç»ˆç‚¹ä¹Ÿç§°ä¸º e çš„ç«¯ç‚¹ã€‚ å¯¹äº V ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ç§°å…¶ä¸º**é¡¶ç‚¹ (Vertex)æˆ–èŠ‚ç‚¹ (Node)**ï¼Œç®€ç§°ç‚¹ (Vertex)ï¼Œé¡¶ç‚¹çš„é›†åˆç§°ä¸ºç‚¹é›† (Vertex set)ï¼Œè¾¹çš„é›†åˆç§°ä¸ºè¾¹é›† (Edge set)ã€‚ å›¾ G çš„ç‚¹é›†å’Œè¾¹é›†å¯ä»¥è¡¨ç¤ºä¸º V(G) å’Œ E(G)ï¼Œåœ¨ä¸å¼•èµ·æ··æ·†çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½è¡¨ç¤ºæˆ V,Eã€‚å›¾ G çš„ç‚¹æ•° |V(G)| ä¹Ÿè¢«ç§°ä½œå›¾ G çš„é˜¶ (Order)ã€‚ åŸºæœ¬æœ¯è¯­ é¡¶ç‚¹çš„åº¦ã€å…¥åº¦ã€å‡ºåº¦åº¦ï¼šé¡¶ç‚¹vçš„åº¦ï¼ˆDegreeï¼‰æ˜¯å’Œvç›¸å…³è”çš„è¾¹çš„æ•°ç›®ï¼Œè®°ä¸ºTD(v)ã€‚ å¯¹äºæœ‰å‘å›¾G&#x3D;(V,{E})ï¼Œå¦‚æœå¼§âˆˆEï¼Œåˆ™ç§°é¡¶ç‚¹vé‚»æ¥åˆ°é¡¶ç‚¹vâ€™ï¼Œé¡¶ç‚¹vâ€™é‚»æ¥è‡ªé¡¶ç‚¹vã€‚å¼§å’Œé¡¶ç‚¹vï¼Œvâ€™ç›¸å…³è”ã€‚ä»¥é¡¶ç‚¹vä¸ºå¤´å¼§çš„æ•°ç›®ç§°ä¸ºvçš„å…¥åº¦ï¼ˆInDegreeï¼‰ï¼Œè®°ä¸ºID(v)ï¼›ä»¥vä¸ºå°¾çš„å¼§çš„æ•°ç›®ç§°ä¸ºvçš„å‡ºåº¦ï¼ˆOutDegreeï¼‰ï¼Œè®°ä¸ºOD(v)ï¼› é¡¶ç‚¹vçš„åº¦ä¸ºTD(v)&#x3D;ID(v)+OD(v)ã€‚ å®Œå…¨å›¾ã€ç¨ å¯†å›¾ã€ç¨€ç–å›¾å®Œå…¨å›¾ï¼šæ¯ä¸ªé¡¶ç‚¹éƒ½ä¸å…¶ä»–é¡¶ç‚¹ç›¸é‚»æ¥çš„å›¾ã€‚ æœ‰å¾ˆå°‘æ¡è¾¹æˆ–å¼§ï¼ˆè¾¹çš„æ¡æ•°|E|è¿œå°äº|V|Â²ï¼‰çš„å›¾ç§°ä¸ºç¨€ç–å›¾ï¼ˆsparse graphï¼‰ï¼Œåä¹‹è¾¹çš„æ¡æ•°|E|æ¥è¿‘|V|Â²ï¼Œç§°ä¸ºç¨ å¯†å›¾ï¼ˆdense graphï¼‰ã€‚ è·¯å¾„å’Œå›è·¯ä¾æ¬¡éå†é¡¶ç‚¹åºåˆ—ä¹‹é—´çš„è¾¹æ‰€å½¢æˆçš„è½¨è¿¹ã€‚ä¸‹å›¾ä¸­ä¾æ¬¡è®¿é—®é¡¶ç‚¹ V0 ã€V3 å’Œ V2 ï¼Œåˆ™æ„æˆä¸€æ¡è·¯å¾„ã€‚ è¿é€šå’Œè¿é€šåˆ†é‡åœ¨æ— å‘å›¾ G ä¸­ï¼Œå¦‚æœä»é¡¶ç‚¹ v åˆ°é¡¶ç‚¹ vâ€™ æœ‰è·¯å¾„ï¼Œåˆ™ç§° v å’Œ vâ€™ æ˜¯è¿é€šçš„ã€‚ å¦‚æœå¯¹äºå›¾ä¸­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹ vi ã€vj âˆˆEï¼Œ viï¼Œå’Œvjéƒ½æ˜¯è¿é€šçš„ï¼Œåˆ™ç§° G æ˜¯è¿é€šå›¾ï¼Œå¦åˆ™å›¾ä¸ºéè¿é€šå›¾ã€‚ éè¿é€šå›¾ï¼š è¿é€šå›¾ï¼š å¼ºè¿é€šå›¾å’Œå¼ºè¿é€šåˆ†é‡åœ¨æœ‰å‘å›¾Gä¸­ï¼Œå¦‚æœä¸¤ä¸ªé¡¶ç‚¹vi,vjé—´ï¼ˆvi&gt;vjï¼‰æœ‰ä¸€æ¡ä»viåˆ°vjçš„æœ‰å‘è·¯å¾„ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€æ¡ä»vjåˆ°viçš„æœ‰å‘è·¯å¾„ï¼Œåˆ™ç§°ä¸¤ä¸ªé¡¶ç‚¹å¼ºè¿é€š(strongly connected)ã€‚å¦‚æœæœ‰å‘å›¾Gçš„æ¯ä¸¤ä¸ªé¡¶ç‚¹éƒ½å¼ºè¿é€šï¼Œç§°Gæ˜¯ä¸€ä¸ªå¼ºè¿é€šå›¾ã€‚æœ‰å‘å›¾çš„æå¤§å¼ºè¿é€šå­å›¾ï¼Œç§°ä¸ºå¼ºè¿é€šåˆ†é‡(strongly connected components)ã€‚ ç½‘â€œæƒâ€æŒ‡è¾¹ä¸Šé¢çš„ä¿¡æ¯ï¼Œä¸€èˆ¬ä¸ºæ•°å­—ã€‚ æ¯æ¡è¾¹ä¸Šéƒ½å¸¦æœ‰æƒçš„å›¾å«åšç½‘ã€‚ å­˜å‚¨ç»“æ„12345678910111213141516171819ADT å›¾(Graph)Data é¡¶ç‚¹çš„æœ‰ç©·éç©ºé›†åˆå’Œè¾¹çš„é›†åˆã€‚Operation CreateGraph(*G, V, VR): æŒ‰ç…§é¡¶ç‚¹é›†Vå’Œè¾¹å¼§é›†VRçš„å®šä¹‰æ„é€ å›¾Gã€‚ DestroyGraph(*G): å›¾Gå­˜åœ¨åˆ™é”€æ¯ã€‚ LocateVex(G, u): è‹¥å›¾Gä¸­å­˜åœ¨é¡¶ç‚¹uï¼Œåˆ™è¿”å›å›¾ä¸­çš„ä½ç½®ã€‚ GetVex(G, v): è¿”å›å›¾Gä¸­é¡¶ç‚¹vçš„å€¼ã€‚ PutVex(G, v, value): å°†å›¾Gä¸­é¡¶ç‚¹vèµ‹å€¼valueã€‚ FirstAdjVex(G, *v): è¿”å›é¡¶ç‚¹vçš„ä¸€ä¸ªé‚»æ¥é¡¶ç‚¹ï¼Œè‹¥é¡¶ç‚¹åœ¨Gä¸­æ— é‚»æ¥é¡¶ç‚¹è¿”å›ç©ºã€‚ NextAdjVex(G, v, *w): è¿”å›é¡¶ç‚¹vç›¸å¯¹äºé¡¶ç‚¹wçš„ä¸‹ä¸€ä¸ªé‚»æ¥é¡¶ç‚¹ï¼Œ è‹¥wæ˜¯vçš„æœ€åä¸€ä¸ªé‚»æ¥ç‚¹åˆ™è¿”å›â€œç©ºâ€ã€‚ InsertVex(*G, v): åœ¨å›¾Gä¸­å¢æ·»æ–°é¡¶ç‚¹vã€‚ DeleteVex(*G, v): åˆ é™¤å›¾Gä¸­é¡¶ç‚¹våŠå…¶ç›¸å…³çš„å¼§ã€‚ InsertArc(*G, v, w): åœ¨å›¾Gä¸­å¢æ·»å¼§&lt;v,w&gt;ï¼Œè‹¥Gæ˜¯æ— å‘å›¾ï¼Œè¿˜éœ€è¦å¢æ·»å¯¹ç§°å¼§&lt;w,v&gt;ã€‚ DeleteArc(*G, v, w): åœ¨å›¾Gä¸­åˆ é™¤å¼§&lt;v,w&gt;ï¼Œè‹¥Gæ˜¯æ— å‘å›¾ï¼Œåˆ™è¿˜åˆ é™¤å¯¹ç§°å¼§&lt;w,v&gt;ã€‚ DFSTraverse(G): å¯¹å›¾Gä¸­è¿›è¡Œæ·±åº¦ä¼˜å…ˆéå†ï¼Œåœ¨éå†è¿‡ç¨‹å¯¹æ¯ä¸ªé¡¶ç‚¹è°ƒç”¨ã€‚ HFSTraverse(G): å¯¹å›¾Gä¸­è¿›è¡Œå¹¿åº¦ä¼˜å…ˆéå†ï¼Œåœ¨éå†è¿‡ç¨‹å¯¹æ¯ä¸ªé¡¶ç‚¹è°ƒç”¨ã€‚endADT é‚»æ¥çŸ©é˜µï¼ˆAdjacency Matrixï¼‰ç”¨ä¸¤ä¸ªæ•°ç»„æ¥è¡¨ç¤ºå›¾ã€‚ä¸€ä¸ªä¸€ç»´çš„æ•°ç»„å­˜å‚¨å›¾ä¸­é¡¶ç‚¹ä¿¡æ¯ï¼Œä¸€ä¸ªäºŒç»´æ•°ç»„ï¼ˆç§°ä¸ºé‚»æ¥çŸ©é˜µï¼‰å­˜å‚¨å›¾ä¸­çš„è¾¹æˆ–å¼§çš„ä¿¡æ¯ã€‚ å¯¹äº n ä¸ªç‚¹ï¼Œæ„é€ ä¸€ä¸ª n * n çš„çŸ©é˜µï¼Œå¦‚æœæœ‰ä»ç‚¹ i åˆ°ç‚¹ j çš„è¾¹ï¼Œå°±å°†çŸ©é˜µçš„ä½ç½® matrix[i][j] ç½®ä¸º 1ã€‚ é€šå¸¸ä¼šå°†å›¾ G ä¸­çš„ç»“ç‚¹ç¼–ä¸º1ï¼Œ2ï¼Œâ€¦ï¼Œ|V| ï¼ˆè¿™ç§ç¼–å·å¯ä»¥æ˜¯ä»»æ„çš„ï¼‰ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ª |V| Ã—|V| çš„çŸ©é˜µ A&#x3D;(aij) è¡¨ç¤ºï¼Œè¯¥çŸ©é˜µæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š å¯ä»¥çœ‹å‡ºé‚»æ¥çŸ©é˜µæ˜¯åœ¨æ— å‘å›¾çš„è¡¨ç¤ºä¸­æ˜¯è½¬ç½®çŸ©é˜µï¼Œè€Œåœ¨æœ‰å‘å›¾ä¸­åˆ™ä¸æ˜¯ã€‚ å¯¹äºå¸¦æƒå›¾æ¥è¯´ï¼Œå¯ä»¥å°†aijç”¨æ¥å­˜å‚¨æƒå€¼ï¼Œå¦‚æœä¸¤ç»“ç‚¹æ— è¿æ¥ï¼Œç”¨0æˆ–æ— ç©·è¡¨ç¤ºï¼š æ— å‘å›¾é‚»æ¥çŸ©é˜µçš„ç‰¹å¾ æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µå¯¹ç§°ä¸”å”¯ä¸€ã€‚ æœ‰å‘å›¾çš„é‚»æ¥çŸ©é˜µçš„ç¬¬ i è¡Œéé›¶å…ƒç´ ä¸ªæ•°ä¸ºç¬¬ i ä¸ªé¡¶ç‚¹çš„å‡ºåº¦ï¼›ç¬¬ j åˆ—éé›¶å…ƒç´ ä¸ªæ•°ä¸ºç¬¬ j ä¸ªé¡¶ç‚¹çš„å…¥åº¦ã€‚ å¯å¿«é€Ÿåˆ¤æ–­ä¸¤ç»“ç‚¹é—´æ˜¯å¦æœ‰è¾¹ã€‚ A[i][j] &#x3D; 1ä»£è¡¨é¡¶ç‚¹iä¸é¡¶ç‚¹jé‚»æ¥ï¼ŒA[i][j] &#x3D; 0ä»£è¡¨é¡¶ç‚¹iä¸é¡¶ç‚¹jä¸é‚»æ¥ã€‚ é¡¶ç‚¹ä¸è‡ªèº«ä¹‹é—´å¹¶æœªé‚»æ¥å…³ç³»ï¼Œå› æ­¤è¾¹æ•°ç»„çš„å¯¹è§’çº¿ä¸Šçš„å…ƒç´ å‡ä¸º0ã€‚ é¡¶ç‚¹çš„åº¦å³ä¸ºé¡¶ç‚¹æ‰€åœ¨çš„è¡Œæˆ–è€…åˆ—1çš„æ•°ç›®ã€‚ æœ‰å‘å›¾é‚»æ¥çŸ©é˜µçš„ç‰¹å¾ é¡¶ç‚¹æ•°ç»„é•¿åº¦ä¸ºå›¾çš„é¡¶ç‚¹æ•°ç›®nã€‚è¾¹æ•°ç»„ä¸ºn X nçš„äºŒç»´æ•°ç»„ã€‚ è¾¹æ•°ç»„ä¸­ï¼Œæ•°ç»„å…ƒç´ ä¸º1ï¼Œå³A[i][j] &#x3D; 1,ä»£è¡¨ç¬¬iä¸ªé¡¶ç‚¹ä¸ç¬¬jä¸ªé¡¶ç‚¹é‚»æ¥ï¼Œä¸”iä¸ºå°¾ï¼Œjä¸ºå¤´ã€‚ A[i][j] &#x3D; 0ä»£è¡¨é¡¶ç‚¹ä¸é¡¶ç‚¹ä¸é‚»æ¥ã€‚ åœ¨æœ‰å‘å›¾ä¸­ï¼Œç”±äºè¾¹å­˜åœ¨æ–¹å‘æ€§ï¼Œå› æ­¤æ•°ç»„ä¸ä¸€å®šä¸ºå¯¹ç§°æ•°ç»„ã€‚ å¯¹è§’çº¿ä¸Šå…ƒç´ ä¸º0ã€‚ ç¬¬iè¡Œä¸­ï¼Œ1çš„æ•°ç›®ä»£è¡¨ç¬¬iä¸ªé¡¶ç‚¹çš„å‡ºåº¦ã€‚ä¾‹å¦‚ï¼šé¡¶ç‚¹V1çš„å‡ºåº¦ä¸º2ï¼Œåˆ™é¡¶ç‚¹V1æ‰€åœ¨è¡Œçš„1çš„æ•°ç›®ä¸º2ã€‚ ç¬¬jåˆ—ä¸­ï¼Œ1çš„æ•°ç›®ä»£è¡¨ç¬¬jä¸ªé¡¶ç‚¹çš„å…¥åº¦ã€‚ä¾‹å¦‚ï¼šV3çš„å…¥åº¦ä¸º1ï¼Œåˆ™V3æ‰€åœ¨åˆ—ä¸­1çš„æ•°ç›®ä¸º1ã€‚ é‚»æ¥è¡¨ï¼ˆadjacency listï¼‰é‚»æ¥é“¾è¡¨ï¼ˆadjacency listï¼‰ç”±å›¾ä¸­çš„æ¯ä¸€ä¸ªç»“ç‚¹åŠå…¶ç›¸é‚»ç»“ç‚¹ç”Ÿæˆä»¥è¯¥ç»“ç‚¹ä¸ºå¤´ç»“ç‚¹çš„ä¸€ç»„é“¾è¡¨ã€‚ å½“å¤„ç†ç¨€ç–å›¾æ—¶ï¼Œç›¸å¯¹äºé‚»æ¥çŸ©é˜µï¼Œé‚»æ¥é“¾è¡¨æ— éœ€ä¸€æ¬¡å°±åˆ†é…é‚£ä¹ˆå¤§çš„ç©ºé—´ï¼Œè€Œæ˜¯åœ¨éå†å›¾çš„è¿‡ç¨‹ä¸­ä¸€ç‚¹ä¸€ç‚¹åœ°åˆ†é…ï¼Œå®ƒæ˜¯ä¸€ç§é¡ºåºåˆ†é…å’Œé“¾å¼åˆ†é…ç›¸ç»“åˆçš„å­˜å‚¨ç»“æ„ã€‚å¦‚è¿™ä¸ªè¡¨å¤´ç»“ç‚¹æ‰€å¯¹åº”çš„é¡¶ç‚¹å­˜åœ¨ç›¸é‚»é¡¶ç‚¹ï¼Œåˆ™æŠŠç›¸é‚»é¡¶ç‚¹ä¾æ¬¡å­˜æ”¾äºè¡¨å¤´ç»“ç‚¹æ‰€æŒ‡å‘çš„å•å‘é“¾è¡¨ä¸­ã€‚ è™½ç„¶é‚»æ¥é“¾è¡¨æ˜¯ä¸€ç§éå¸¸èŠ‚çº¦ç©ºé—´çš„ç»“æ„ï¼Œä½†åœ¨æ— å‘å›¾ä¸­ç”¨é‚»æ¥é“¾è¡¨è¡¨ç¤ºä¹Ÿä¼šå‡ºç°æ•°æ®å†—ä½™ã€‚è¿™æ˜¯å› ä¸ºè¡¨å¤´ç»“ç‚¹Aæ‰€æŒ‡é“¾è¡¨ä¸­å­˜åœ¨ä¸€ä¸ªæŒ‡å‘Cçš„è¡¨ç»“ç‚¹çš„åŒæ—¶ï¼Œè¡¨å¤´ç»“ç‚¹Cæ‰€æŒ‡é“¾è¡¨ä¹Ÿä¼šå­˜åœ¨ä¸€ä¸ªæŒ‡å‘Açš„è¡¨ç»“ç‚¹ã€‚ é‚»æ¥è¡¨å­˜å‚¨æ–¹æ³•æ˜¯ä¸€ç§æ•°ç»„å­˜å‚¨å’Œé“¾å¼å­˜å‚¨ç›¸ç»“åˆçš„å­˜å‚¨æ–¹æ³•ã€‚åœ¨é‚»æ¥è¡¨ä¸­ï¼Œå¯¹å›¾ä¸­çš„æ¯ä¸ªé¡¶ç‚¹å»ºç«‹ä¸€ä¸ªå•é“¾è¡¨ï¼Œç¬¬ i ä¸ªå•é“¾è¡¨ä¸­çš„ç»“ç‚¹ä¾é™„äºé¡¶ç‚¹ Vi çš„è¾¹ï¼ˆå¯¹æœ‰å‘å›¾æ˜¯ä»¥é¡¶ç‚¹Viä¸ºå°¾çš„å¼§ï¼‰ã€‚é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ç§°ä¸ºè¡¨èŠ‚ç‚¹ï¼Œå…±æœ‰ 3ä¸ªåŸŸï¼Œå…·ä½“ç»“æ„è§ä¸‹å›¾ï¼š è¡¨ç»“ç‚¹ç”±ä¸‰ä¸ªåŸŸç»„æˆï¼Œadjvexå­˜å‚¨ä¸Vié‚»æ¥çš„ç‚¹åœ¨å›¾ä¸­çš„ä½ç½®ï¼Œnextarcå­˜å‚¨ä¸‹ä¸€æ¡è¾¹æˆ–å¼§çš„ç»“ç‚¹ï¼Œinfoå­˜å‚¨ä¸è¾¹æˆ–å¼§ç›¸å…³çš„ä¿¡æ¯å¦‚æƒå€¼ã€‚ é™¤è¡¨ç»“ç‚¹å¤–ï¼Œéœ€è¦åœ¨æ•°ç»„ä¸­å­˜å‚¨å¤´ç»“ç‚¹ï¼Œå¤´ç»“ç‚¹ç”±ä¸¤ä¸ªåŸŸç»„æˆï¼Œåˆ†åˆ«æŒ‡å‘é“¾è¡¨ä¸­ç¬¬ä¸€ä¸ªé¡¶ç‚¹å’Œå­˜å‚¨Viçš„åæˆ–å…¶ä»–ä¿¡æ¯ã€‚å…·ä½“ç»“æ„å¦‚ä¸‹å›¾ï¼š å…¶ä¸­ï¼ŒdataåŸŸä¸­å­˜å‚¨é¡¶ç‚¹ç›¸å…³ä¿¡æ¯ï¼ŒfirstarcæŒ‡å‘é“¾è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚ æ— å‘å›¾é‡‡ç”¨é‚»æ¥è¡¨æ–¹å¼å­˜å‚¨ é‡‡ç”¨é‚»æ¥è¡¨æ–¹å¼å­˜å‚¨å›¾ 6.1 ä¸­çš„æ— å‘å›¾ï¼Œç»˜å›¾è¿‡ç¨‹ä¸­å¿½ç•¥è¾¹èŠ‚ç‚¹çš„infoä¿¡æ¯ï¼Œå¤´ç»“ç‚¹ä¸­çš„ data åŸŸå­˜å‚¨é¡¶ç‚¹åç§°ã€‚ä»¥V1é¡¶ç‚¹ä¸ºä¾‹ï¼ŒV1é¡¶ç‚¹çš„é‚»æ¥é¡¶ç‚¹ä¸ºV2ã€V3ã€V4ï¼Œåˆ™å¯ä»¥åˆ›å»º3ä¸ªè¡¨èŠ‚ç‚¹ï¼Œè¡¨èŠ‚ç‚¹ä¸­adjvexåˆ†åˆ«å­˜å‚¨V2ã€V3ã€V4çš„ç´¢å¼•1ã€2ã€3ï¼ŒæŒ‰ç…§æ­¤æ–¹å¼ï¼Œå¾—åˆ°çš„é‚»æ¥è¡¨ä¸ºï¼š ç‰¹å¾ æ•°ç»„ä¸­å¤´èŠ‚ç‚¹çš„æ•°ç›®ä¸ºå›¾çš„é¡¶ç‚¹æ•°ç›®ã€‚ é“¾è¡¨çš„é•¿åº¦å³ä¸ºé¡¶ç‚¹çš„åº¦ã€‚ä¾‹å¦‚ï¼šV1é¡¶ç‚¹çš„åº¦ä¸º3ï¼Œåˆ™ä»¥V1ä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨ä¸­è¡¨èŠ‚ç‚¹çš„æ•°ç›®ä¸º3ã€‚ æœ‰å‘å›¾é‡‡ç”¨é‚»æ¥é“¾è¡¨æ–¹å¼å­˜å‚¨ é‡‡ç”¨é‚»æ¥è¡¨æ–¹å¼å­˜å‚¨å›¾6.3ä¸­çš„æœ‰å‘å›¾ï¼Œç»˜å›¾è¿‡ç¨‹ä¸­å¿½ç•¥è¾¹èŠ‚ç‚¹çš„infoä¿¡æ¯ï¼Œå¤´ç»“ç‚¹ä¸­çš„dataåŸŸå­˜å‚¨é¡¶ç‚¹åç§°ã€‚ä»¥V1é¡¶ç‚¹ä¸ºä¾‹ï¼ŒV1é¡¶ç‚¹çš„é‚»æ¥é¡¶ç‚¹ä¸ºV2ã€V3ã€V4ï¼Œä½†æ˜¯ä»¥V1é¡¶ç‚¹ä¸ºå°¾çš„è¾¹åªæœ‰ä¸¤æ¡ï¼Œå³å’Œå› æ­¤ï¼Œåˆ›å»º2ä¸ªè¡¨èŠ‚ç‚¹ã€‚è¡¨èŠ‚ç‚¹ä¸­adjvexåˆ†åˆ«å­˜å‚¨V3ã€V4çš„ç´¢å¼•2ã€3ï¼ŒæŒ‰ç…§æ­¤æ–¹å¼ï¼Œå¾—åˆ°çš„é‚»æ¥è¡¨ä¸ºï¼š ç‰¹å¾ æ•°ç»„ä¸­è¡¨èŠ‚ç‚¹çš„æ•°ç›®ä¸ºå›¾çš„é¡¶ç‚¹æ•°ç›®ã€‚ é“¾è¡¨çš„é•¿åº¦å³ä¸ºé¡¶ç‚¹çš„å‡ºåº¦ã€‚ä¾‹å¦‚V1çš„å‡ºåº¦ä¸º2ï¼ŒV1ä¸ºå¤´èŠ‚ç‚¹çš„é“¾è¡¨ä¸­ï¼Œè¡¨èŠ‚ç‚¹çš„æ•°ç›®ä¸º2ã€‚ é¡¶ç‚¹Viçš„å…¥åº¦ä¸ºé‚»æ¥è¡¨ä¸­æ‰€æœ‰adjvexå€¼åŸŸä¸ºiçš„è¡¨ç»“ç‚¹æ•°ç›®ã€‚ä¾‹å¦‚ï¼šé¡¶ç‚¹V3çš„å…¥åº¦ä¸º4ï¼Œåˆ™é“¾è¡¨ä¸­æ‰€æœ‰adjvexå€¼åŸŸä¸º2çš„è¡¨ç»“ç‚¹æ•°ç›®ä¸º4ã€‚ é€†é‚»æ¥è¡¨åœ¨é‚»æ¥è¡¨ä¸­ï¼Œå¯ä»¥è½»æ˜“çš„å¾—å‡ºé¡¶ç‚¹çš„å‡ºåº¦ï¼Œä½†æ˜¯æƒ³è¦å¾—åˆ°é¡¶ç‚¹çš„å…¥åº¦ï¼Œåˆ™éœ€è¦éå†æ•´ä¸ªé“¾è¡¨ã€‚ä¸ºäº†ä¾¿äºç¡®å®šé¡¶ç‚¹çš„å…¥åº¦ï¼Œå¯ä»¥å»ºç«‹æœ‰å‘å›¾çš„é€†é‚»æ¥è¡¨ã€‚é€†é‚»æ¥è¡¨çš„å»ºç«‹ä¸é‚»æ¥è¡¨ç›¸åã€‚ åå­—é“¾è¡¨å¯¹äºæœ‰å‘å›¾è€Œè¨€ï¼Œé‚»æ¥é“¾è¡¨çš„ç¼ºé™·æ˜¯è¦æŸ¥è¯¢æŸä¸ªé¡¶ç‚¹çš„å…¥åº¦æ—¶éœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼Œè€Œé€†é‚»æ¥é“¾è¡¨åœ¨æŸ¥è¯¢æŸä¸ªé¡¶ç‚¹çš„å‡ºåº¦æ—¶è¦éå†æ•´ä¸ªé“¾è¡¨ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œåå­—é“¾è¡¨å°†é‚»æ¥é“¾è¡¨å’Œé€†é‚»æ¥é“¾è¡¨ç»¼åˆäº†èµ·æ¥ï¼Œè€Œå¾—åˆ°çš„ä¸€ç§åå­—é“¾è¡¨ã€‚åœ¨åå­—é“¾è¡¨ä¸­ï¼Œæ¯ä¸€æ¡è¾¹å¯¹åº”ä¸€ç§è¾¹èŠ‚ç‚¹ï¼Œæ¯ä¸€ä¸ªé¡¶ç‚¹å¯¹åº”ä¸ºé¡¶ç‚¹èŠ‚ç‚¹ã€‚ é¡¶ç‚¹ç»“ç‚¹ é¡¶ç‚¹èŠ‚ç‚¹å³ä¸ºå¤´èŠ‚ç‚¹ï¼Œç”±3ä¸ªåŸŸæ„æˆï¼Œå…·ä½“å½¢å¼å¦‚ä¸‹ï¼š å…¶ä¸­ï¼ŒdataåŸŸå­˜å‚¨ä¸é¡¶ç‚¹ç›¸å…³çš„ä¿¡æ¯ï¼Œfirstinå’Œfirstoutåˆ†åˆ«æŒ‡å‘ä»¥æ­¤é¡¶ç‚¹ä¸ºå¤´æˆ–å°¾çš„ç¬¬ä¸€ä¸ªè¾¹èŠ‚ç‚¹ã€‚ è¾¹ç»“ç‚¹ åœ¨è¾¹èŠ‚ç‚¹ä¸ºé“¾è¡¨èŠ‚ç‚¹ï¼Œå…±æœ‰5ä¸ªåŸŸï¼Œå…·ä½“å½¢å¼å¦‚ä¸‹ï¼š å…¶ä¸­ï¼Œå°¾åŸŸtailvexå’Œå¤´åŸŸheadvexåˆ†åˆ«æŒ‡å‘å°¾å’Œå¤´çš„é¡¶ç‚¹åœ¨å›¾ä¸­çš„ä½ç½®ã€‚é“¾åŸŸhlinkæŒ‡å‘å¤´ç›¸åŒçš„ä¸‹ä¸€æ¡è¾¹ï¼Œé“¾åŸŸtlinkæŒ‡å‘å°¾ç›¸åŒçš„ä¸‹ä¸€æ¡è¾¹ã€‚info å­˜å‚¨æ­¤æ¡è¾¹çš„ç›¸å…³ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼š é‡‡ç”¨åå­—é“¾è¡¨çš„æ–¹å¼å­˜å‚¨å›¾çš„æœ‰å‘å›¾ï¼Œç»˜å›¾è¿‡ç¨‹å¿½ç•¥è¾¹èŠ‚ç‚¹ä¸­çš„infoä¿¡æ¯ï¼Œè¡¨å¤´èŠ‚ç‚¹ä¸­çš„dataåŸŸå­˜å‚¨é¡¶ç‚¹åç§°ã€‚ä»¥V1é¡¶ç‚¹ä¸ºä¾‹ï¼Œé¡¶ç‚¹èŠ‚ç‚¹çš„dataåŸŸå­˜å‚¨V1é¡¶ç‚¹åï¼Œfirstinå­˜å‚¨ä»¥V1é¡¶ç‚¹ä¸ºå¤´ç¬¬ä¸€ä¸ªè¾¹èŠ‚ç‚¹ï¼Œä»¥V1é¡¶ç‚¹ä¸ºå¤´è¾¹ä¸ºï¼Œfirstoutå­˜å‚¨ä»¥ä»¥V1é¡¶ç‚¹ä¸ºå°¾ç¬¬ä¸€ä¸ªè¾¹èŠ‚ç‚¹ï¼Œå¯¹åº”è¾¹ä¸ºã€‚æŒ‰ç…§æ­¤è§„åˆ™ï¼Œå¾—åˆ°çš„åå­—é“¾è¡¨å­˜å‚¨ä¸ºï¼š é‚»æ¥å¤šé‡è¡¨å¯¹äºæ— å‘å›¾è€Œè¨€ï¼Œå…¶æ¯æ¡è¾¹åœ¨é‚»æ¥é“¾è¡¨ä¸­éƒ½éœ€è¦ä¸¤ä¸ªç»“ç‚¹æ¥è¡¨ç¤ºï¼Œè€Œé‚»æ¥å¤šé‡è¡¨æ­£æ˜¯å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œè®©åŒä¸€æ¡è¾¹åªç”¨ä¸€ä¸ªç»“ç‚¹è¡¨ç¤ºå³å¯ã€‚é‚»æ¥å¤šé‡è¡¨ä»¿ç…§äº†åå­—é“¾è¡¨çš„æ€æƒ³ï¼Œå¯¹é‚»æ¥é“¾è¡¨çš„è¾¹è¡¨ç»“ç‚¹è¿›è¡Œäº†æ”¹è¿›ã€‚ å…¶ä¸­ï¼Œivexå’Œjvexæ˜¯æŒ‡æŸæ¡è¾¹ä¾é™„çš„ä¸¤ä¸ªé¡¶ç‚¹åœ¨é¡¶ç‚¹è¡¨ä¸­çš„ä¸‹æ ‡ã€‚ ilinkæŒ‡å‘ä¾é™„é¡¶ç‚¹ivexçš„ä¸‹ä¸€æ¡è¾¹ï¼ŒjlinkæŒ‡å‘ä¾é™„é¡¶ç‚¹jvexçš„ä¸‹ä¸€æ¡è¾¹ã€‚infoå­˜å‚¨è¾¹çš„ç›¸å…³ä¿¡æ¯ã€‚ é‡æ–°å®šä¹‰çš„é¡¶ç‚¹ç»“æ„å¦‚ä¸‹å›¾ï¼š å…¶ä¸­ï¼Œdataå­˜å‚¨é¡¶ç‚¹çš„ç›¸å…³ä¿¡æ¯ï¼ŒfirstedgeæŒ‡å‘ç¬¬ä¸€æ¡ä¾é™„äºè¯¥é¡¶ç‚¹çš„è¾¹ã€‚ æ‰€ç¤ºçš„æ— å‘å›¾ï¼Œé‡‡ç”¨é‚»æ¥å¤šé‡è¡¨å­˜å‚¨ï¼Œä»¥ V0 ä¸ºä¾‹ï¼Œé¡¶ç‚¹èŠ‚ç‚¹çš„dataåŸŸå­˜å‚¨V0åç§°ï¼Œfirstedge æŒ‡å‘(V0 , V1)è¾¹ï¼Œè¾¹èŠ‚ç‚¹ä¸­çš„ilinkæŒ‡å‘ä¾é™„V0é¡¶ç‚¹çš„ä¸‹ä¸€æ¡è¾¹(V0 , V3)ï¼ŒjlinkæŒ‡å‘ä¾é™„V1é¡¶ç‚¹çš„ä¸‹ä¸€æ¡è¾¹(V1 , V2)ï¼ŒæŒ‰ç…§æ­¤æ–¹å¼å»ºç«‹é‚»æ¥å¤šé‡è¡¨ï¼š å…³è”çŸ©é˜µé‚»æ¥çŸ©é˜µå’Œé‚»æ¥é“¾è¡¨éƒ½æ˜¯ç”¨æ¥è¡¨ç¤ºå›¾ä¸­å„ä¸ªç‚¹å’Œæ¯ä¸ªç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œè€Œå…³è”çŸ©é˜µï¼ˆincidence matrixï¼‰å³ç”¨ä¸€ä¸ªçŸ©é˜µæ¥è¡¨ç¤ºå„ä¸ªç‚¹å’Œæ¯æ¡è¾¹ä¹‹é—´çš„å…³ç³»ã€‚ è®¾æ— å‘å›¾ G&#x3D;(V,E)ï¼Œå…¶ä¸­é¡¶ç‚¹é›† V&#x3D;v1,v2,â‹¯,vn, è¾¹é›† E&#x3D;e1,e2,â‹¯,emï¼Œç”¨ aij è¡¨ç¤ºé¡¶ç‚¹viä¸è¾¹ej å…³è”çš„æ¬¡æ•°ï¼Œå¯èƒ½å–å€¼ä¸º0, 1, 2, â€¦.ï¼Œæˆ‘ä»¬ç§°æ‰€å¾—çŸ©é˜µA&#x3D;A(G)&#x3D;(aij)nÃ—mä¸ºå›¾ G çš„å…³è”çŸ©é˜µã€‚ å¯¹äºå…³è”çŸ©é˜µç¬¬ä¸€è¡Œ1 1 1 0ï¼Œè¡¨ç¤ºç‚¹v1å’Œå„è¾¹çš„å…³ç³»ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œv1å’Œe1,e2,e3ç›¸è¿ï¼Œå’Œe4æœªè¿ï¼Œæ•…å…³è”çŸ©é˜µçš„å€¼ä¸º1 1 1 0. ä¸‹é¢å„è¡Œä¸ºç‚¹v2ï¼Œv3,v4 å’Œå„è¾¹çš„å…³è”ï¼Œä»¥æ­¤ç±»æ¨ã€‚å› æ­¤æ¯ä¸€è¡Œå€¼çš„æ€»å’Œä¸ºè¯¥ç‚¹çš„åº¦ã€‚ å¯¹äºæœ‰å‘å›¾ï¼Œè‹¥bij&#x3D;1ï¼Œè¡¨ç¤ºè¾¹jç¦»å¼€ç‚¹iã€‚ è‹¥ bij&#x3D; -1ï¼Œ è¡¨ç¤ºè¾¹jè¿›å…¥ç‚¹iã€‚ è‹¥ bij &#x3D; 0ï¼Œè¡¨ç¤ºè¾¹jå’Œç‚¹iä¸ç›¸å…³è”ã€‚ å›¾çš„éå† æ·±åº¦ä¼˜å…ˆæœç´¢éå†ï¼ˆDFS: Depdth First Searchï¼‰å¹¿åº¦ä¼˜å…ˆæœç´¢éå†ï¼ˆBFS: Breadth First Searchï¼‰éè¿é€šå›¾çš„éå† å›¾çš„ç”Ÿæˆæ ‘å’Œæœ€å°ç”Ÿæˆæ ‘æ™®é‡Œå§†ç®—æ³•å…‹é²æ–¯å¡å°”ç®—æ³•æœ€çŸ­è·¯å¾„ ä»ä¸€é¡¶ç‚¹åˆ°å…¶ä½™é¡¶ç‚¹çš„æœ€çŸ­è·¯å¾„æ¯å¯¹é¡¶ç‚¹ä¹‹é—´çš„æœ€çŸ­è·¯å¾„æ‹“æ‰‘æ’åº å…³é”®è·¯å¾„å‚è€ƒ https://www.cxyxiaowu.com/1293.html","tags":[{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}]},{"title":"é¡¹ç›®ç»“æ„","date":"2023-07-15T01:43:36.895Z","path":"wiki/JavaScript/ReactNative/é¡¹ç›®ç»“æ„/","text":"androidï¼š#Android é¡¹ç›® iosï¼š node_modulesï¼š é¡¹ç›®ä¾èµ– app.jsonï¼š æè¿°appä¿¡æ¯ App.jsï¼š RNä»£ç  index.jsï¼š å…¥å£æ–‡ä»¶ package.json: ä¾èµ–ä¿¡æ¯å’Œç‰ˆæœ¬ä¿¡æ¯ metro.config.js: babel.config.js:","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"å¼€å‘æµç¨‹çš„æ€è€ƒ","date":"2023-07-15T01:43:36.895Z","path":"wiki/æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†/å¼€å‘æµç¨‹çš„æ€è€ƒ/","text":"ç›®å‰å¤§å¤šæ•°äº’è”ç½‘å…¬å¸çš„å¼€å‘æµç¨‹å¦‚ä¸‹å›¾ï¼š éœ€æ±‚æ”¶é›†ä¸€ä¸ªæ–°åŠŸèƒ½çš„å‡ºç°ï¼Œå¯èƒ½æ¥è‡ªå¤šä¸ªåœ°æ–¹ã€‚è¿è¥è§‰å¾—æœ‰äº†XXåŠŸèƒ½ï¼Œç”¨æˆ·é‡å°±èƒ½å¢åŠ XXå€ï¼›äº§å“è§‰å¾—XXç«Ÿå“åšäº†XXåŠŸèƒ½ï¼Œæˆ‘ä»¬ä¹Ÿè¦åšä¸ªä¸€æ¨¡ä¸€æ ·çš„ï¼›å¼€å‘è§‰å¾—XXåº“åˆæå‡äº†XXæ€§èƒ½ã€‚ç‰ˆæœ¬åˆæœŸï¼Œä¸€èˆ¬ç”±äº§å“ç»Ÿä¸€æ”¶é›†ç›¸å…³éœ€æ±‚ã€‚ äº§å“æ–‡æ¡£ã€è®¾è®¡æ–‡æ¡£è¿™ä¸ªé˜¶æ®µï¼Œäº§å“å¼€å§‹æ•´ç†å‰é¢æ”¶é›†åˆ°çš„ideaã€‚ä»–ä¸å¤ªæ¸…æ¥šçš„ç‚¹å¯èƒ½ä¼šæ‰¾å¼€å‘ã€æµ‹è¯•ã€‚æ¯”å¦‚XXåŠŸèƒ½æŠ€æœ¯ä¸Šæ˜¯å¦å¯è¡Œã€‚ç„¶åå¼€å§‹å†™äº§å“æ–‡æ¡£ã€‚å®Œæˆåï¼Œä¼šè¿›è¡Œéœ€æ±‚å®£è®²ï¼Œå¼€å‘ã€æµ‹è¯•åŒäº‹ä¼šå‚ä¸ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¼€å‘ã€æµ‹è¯•ä¼šæå‡ºè‡ªå·±çš„æ„è§ï¼Œäº§å“æ–¹è¿›è¡Œè§£ç­”ã€‚æ²¡é—®é¢˜åï¼Œè¯¥éœ€æ±‚ä¼šè¿›å…¥è®¾è®¡é˜¶æ®µã€‚è¿™ä¸ªé˜¶æ®µä¸­ï¼Œå¼€å‘äººå‘˜ä¼šæ ¹æ®éœ€æ±‚è¿›è¡Œæ¦‚è¦è®¾è®¡ï¼Œæ¯”å¦‚äº†è§£éœ€è¦ç”¨åˆ°çš„æŠ€æœ¯ï¼Œçœ‹çœ‹é‡Œé¢æœ‰ä»€ä¹ˆå‘ã€‚ å¼€å‘é˜¶æ®µå½“è®¾è®¡ç¨¿å®Œæˆåï¼Œè¯¥éœ€æ±‚ä¼šè¿›å…¥åˆ°å¼€å‘é˜¶æ®µã€‚å¼€å‘äººå‘˜æ‹¿åˆ°éœ€æ±‚åï¼Œä¸€èˆ¬çš„å°å‚å°±å¼€å§‹å¯¹ç€äº§å“æ–‡æ¡£ã€è®¾è®¡ç¨¿å¼€å‘äº†ï¼Œå¤§å‚ä¼šåšè¯¦ç»†è®¾è®¡ï¼Œæ¯”å¦‚ç”»æµç¨‹å›¾ã€‚å¼€å‘å®Œæˆåï¼Œå°å‚å°±ç›´æ¥è¿›å…¥æµ‹è¯•é˜¶æ®µäº†ï¼Œåšçš„ç¨å¾®å¥½ç‚¹ï¼Œå¼€å‘ä¼šè¿›è¡Œç®€å•çš„è‡ªæˆ‘æµ‹è¯•ï¼Œç¨å¾®å†å¥½ç‚¹çš„ï¼Œå¯èƒ½ä¼šè‡ªå·±å†™äº›æµ‹è¯•è„šæœ¬ã€‚è€Œå¤§å‚ä¼šæœ‰å…¶ä»–çš„ä¸€äº›æµç¨‹ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼Œå¼€å‘å®Œæˆåï¼Œè¿›è¡Œä»£ç Reviewã€‚å¼€å‘çš„è¿‡ç¨‹ä¸­è¿˜ç‰µæ‰¯åˆ°å‰åç«¯è”è°ƒï¼Œæ‰€ä»¥åœ¨åˆšå¼€å§‹å¼€å‘æ—¶ï¼ŒåšåŒä¸€ä¸ªéœ€æ±‚çš„ä¸åŒç«¯åŒäº‹åº”è¯¥æ²Ÿé€šå¥½è”è°ƒç›¸å…³äº‹å®œã€‚ å¼€å‘é˜¶æ®µï¼Œæµ‹è¯•åŒäº‹ä¹Ÿä¼šåŒæ­¥äº†è§£éœ€æ±‚ï¼Œå¹¶å®Œæˆç›¸å…³æµ‹è¯•ç”¨ä¾‹ã€‚ æµ‹è¯•é˜¶æ®µè¿™ä¸ªé˜¶æ®µå°±æ˜¯å‘ç°bugã€æ”¹bugçš„å¾ªç¯ï¼Œå½“æŠŠæµ‹è¯•å‘ç°çš„æ‰€æœ‰bugæ”¹å®Œåï¼Œå°±è¾¾åˆ°ç°åº¦æ¡ä»¶äº†ã€‚ ä¸Šçº¿é˜¶æ®µä¸Šçº¿ä¹‹å‰å‡†å¤‡ä¸€ä»½ä¸Šçº¿æ¸…å•ï¼Œåˆ—å‡ºè¯¥æ¬¡ç‰ˆæœ¬æ‰€æœ‰éœ€è¦éƒ¨ç½²çš„é¡¹ï¼Œæ ‡æ³¨å¤„ç†äººã€å¤„ç†æ—¶é—´ã€å¤„ç†çŠ¶æ€ã€‚å¯¹äºæ¯”è¾ƒå¤§çš„éœ€æ±‚ï¼Œè¿™ä¸€æ­¥éå¸¸é‡è¦ï¼Œæ–¹ä¾¿å¤§å®¶æ£€æŸ¥æ˜¯å¦æœ‰é—æ¼ã€‚ ç°åº¦çš„ä½œç”¨æ˜¯è¿›è¡Œå°‘é‡çš„æ›´æ–°ï¼Œæ£€æŸ¥æ–°ä¸Šçº¿çš„éœ€æ±‚æ˜¯å¦å­˜åœ¨é—®é¢˜ï¼Œå°†é£é™©é™åˆ°æœ€ä½ã€‚å½“ç°åº¦ä¸€æ®µæ—¶é—´åï¼ŒAppçš„å´©æºƒç‡åœ¨æ­£å¸¸èŒƒå›´å†…æ—¶ï¼Œå³å¯å®‰æ’æ­£å¼ä¸Šçº¿ã€‚ ä¸Šçº¿åå¼‚å¸¸æ”¶é›†ï¼Œé€šè¿‡å„ç§æ–¹å¼æ”¶é›†çº¿ä¸Šçš„bugï¼Œå‘ç°æµ‹è¯•æ²¡æœ‰å‘ç°çš„é—®é¢˜ æ€»ç»“æœ¬æ¬¡è¿­ä»£çš„äº§å“éœ€æ±‚å˜æ›´æƒ…å†µã€å¼€å‘bugæƒ…å†µï¼ŒbugæŒ‰ç…§ä¸¥é‡æ€§è¿›è¡Œå½’ç±»ï¼Œæ€»ç»“å‡ºç°çš„åŸå› ï¼Œç§¯ç´¯æ²‰æ·€ æ€è€ƒæœ‰äº›å°å‚ä¸ºäº†èƒ½å¿«é€Ÿçš„ä¸Šçº¿ï¼Œä¼šçœæ‰å…¶ä¸­çš„ä¸€äº›ç¯èŠ‚ï¼Œè€Œé‚£äº›ç¯èŠ‚æ°æ°åˆæ˜¯å¾ˆé‡è¦çš„ã€‚ä¸ºä»€ä¹ˆä¼šç»å¸¸åœ¨çº¿ä¸Šå‡ºé”…ï¼Œä¸€æ–¹é¢æ¥è‡ªæµ‹è¯•çš„ä¸ä¸¥è°¨ï¼Œæ¼æ‰äº†æŸäº›ä½¿ç”¨åœºæ™¯æ²¡æµ‹è¯•ï¼Œæˆ–è€…è¯´å°±æ˜¯æ²¡å‘ç°é‚£äº›é—®é¢˜ã€‚ä¸€æ–¹é¢ä¹Ÿæ¥è‡ªå¼€å‘äººå‘˜ï¼Œä»–ä»¬ä¸ºäº†èµ¶å¿«ï¼Œä¸ä¼šèŠ±å¾ˆå¤šå¿ƒæ€å»è€ƒè™‘ä»£ç çš„å¤ç”¨ã€æ€§èƒ½é—®é¢˜ã€‚ç»“æœé€ æˆé—®é¢˜é¢‘ç¹å‡ºç°ã€‚ ä»£ç reviewä¸ªäººè§‰å¾—æ˜¯éå¸¸æœ‰å¿…è¦å»åšçš„ä¸€ä»¶äº‹æƒ…ï¼Œè®©èµ„æ·±çš„å·¥ç¨‹å¸ˆæ¥reviewå…¶ä»–äººçš„ä»£ç ï¼Œä¸€æ–¹é¢èƒ½å‘ç°é—®é¢˜ï¼Œä¸€æ–¹é¢å¯¹äºè¢«reviewæ–¹ï¼Œä¹Ÿæ˜¯å¿«é€Ÿæå‡çš„å¥½æœºä¼šã€‚ è¿˜æœ‰å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ï¼Œè¿™äº›è™½ç„¶åšçš„æ—¶å€™å¯èƒ½ä¼šå¤šèŠ±ä¸€äº›æ—¶é—´ï¼Œä½†å½“é¡¹ç›®ä¸æ–­è¿­ä»£ï¼Œä»–ä»¬ä¹Ÿæ˜¯å‘ç°é—®é¢˜çš„é‡è¦æ–¹å¼ã€‚ç°å®ç¯å¢ƒä¸­ï¼Œå¾ˆå¤šå°å‚éƒ½æ˜¯ä¸ä¼šè€ƒè™‘è¿™æ–¹é¢çš„ã€‚ ç°åœ¨å¸‚é¢ä¸Šå‡ºç°äº†å¾ˆå¤šé¡¹ç›®ç®¡ç†çš„å·¥å…·ï¼Œä¸ªäººæ˜¯ä¸å»ºè®®åŒæ—¶ä½¿ç”¨å¤šä¸ªå·¥å…·ã€‚æ¥å›åˆ‡æ¢éº»çƒ¦ï¼Œæ•°æ®ä¹Ÿæ— æ³•ç»Ÿä¸€å¤„ç†ã€‚å…¶å®å¤§å®¶éƒ½å¤§åŒå°å¼‚ï¼Œè€Œä¸”å¤§éƒ¨åˆ†çš„å®šåˆ¶åŒ–ç¨‹åº¦å¾ˆæ˜¯è›®é«˜çš„ï¼Œå®Œå…¨å¯ä»¥åœ¨ä¸€æ¬¾å·¥å…·ä¸­ï¼Œè¿›è¡Œç›¸å…³çš„å®šåˆ¶æ¥è¾¾åˆ°è‡ªå·±çš„ç›®çš„ã€‚æ¯”å¦‚TAPDå°±å®ç°äº†ä»éœ€æ±‚æ”¶é›†åˆ°é¡¹ç›®ä¸Šçº¿æ•´ä¸ªæµç¨‹çš„ç®¡ç†æ–¹æ¡ˆã€‚ é¡¹ç›®çš„è¿›åº¦å¯ä»¥é€šè¿‡ç›¸åº”çš„å·¥å…·æ¥ç®¡ç†ï¼Œé¡¹ç›®çš„è´¨é‡åˆ™æ›´å¤šçš„åº”è¯¥é€šè¿‡äººæ¥ç®¡ç†ã€‚åªæœ‰è®©å›¢é˜Ÿæˆå‘˜çš„æŠ€æœ¯éƒ½å˜å¾—å¼ºå¤§äº†ï¼Œæ•´ä½“çš„ä»£ç è´¨é‡æ‰ä¼šç¨³å®šã€‚å…‰æŠ“è¿›åº¦ä¸ç®¡è´¨é‡ï¼Œé¡¹ç›®è¿Ÿæ—©æœ‰ä¸€ç‚¹ä¼šæ‰åˆ°å¤§å‘é‡Œé¢ã€‚","tags":[{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/tags/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"}]},{"title":"Macç˜¦èº«","date":"2023-07-15T01:43:36.895Z","path":"wiki/å·¥å…·è½¯ä»¶/Mac/Macç˜¦èº«/","text":"","tags":[{"name":"mac","slug":"mac","permalink":"http://airshu.github.io/tags/mac/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"},{"name":"Mac","slug":"å·¥å…·è½¯ä»¶/Mac","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/Mac/"}]},{"title":"Macè½¯ä»¶å®‰è£…ç¬”è®°","date":"2023-07-15T01:43:36.895Z","path":"wiki/å·¥å…·è½¯ä»¶/Mac/Macè½¯ä»¶å®‰è£…ç¬”è®°/","text":"brewå‘½ä»¤1234567brew services list æŸ¥çœ‹æœåŠ¡çŠ¶æ€brew services run mysql # å¯åŠ¨mysql æœåŠ¡brew services start mysql # å¯åŠ¨ mysql æœåŠ¡ï¼Œå¹¶æ³¨å†Œå¼€æœºè‡ªå¯brew services stop mysql # åœæ­¢ mysql æœåŠ¡ï¼Œå¹¶å–æ¶ˆå¼€æœºè‡ªå¯brew services restart mysql # é‡å¯ mysql æœåŠ¡ï¼Œå¹¶æ³¨å†Œå¼€æœºè‡ªå¯brew services cleanup # æ¸…é™¤å·²å¸è½½åº”ç”¨çš„æ— ç”¨é…ç½® mysql123456789101112131415161718brew install mysqlbrew services start mysqlbrew services stop mysqlmysql -urootSHOW VARIABLES LIKE &#x27;validate_password%&#x27;; //æŸ¥çœ‹å¯†ç åˆå§‹ç­–ç•¥SET GLOBAL validate_password.policy=LOW; //è®¾ç½®æŸä¸ªå±æ€§SET GLOBAL validate_password.length=6; //ä¿®æ”¹å¯†ç ALTER USER &#x27;root&#x27;@&#x27;localhost&#x27; IDENTIFIED WITH caching_sha2_password BY &#x27;yourpasswd&#x27;;flush privileges;describe user; //æŸ¥çœ‹è¡¨å­—æ®µ ä½¿ç”¨mysqlçš„é…ç½®è„šæœ¬ï¼š&#x2F;usr&#x2F;local&#x2F;opt&#x2F;mysql&#x2F;bin&#x2F;mysql_secure_installation &#x2F;&#x2F;mysql æä¾›çš„é…ç½®å‘å¯¼å¯åŠ¨è¿™ä¸ªè„šæœ¬å é‡ç½®å¯†ç 123456$ brew services stop mysql$ pkill mysqld$ rm -rf /usr/local/var/mysql/ # NOTE: this will delete your existing database!!!$ brew postinstall mysql$ brew services restart mysql$ mysql -u root","tags":[{"name":"mac","slug":"mac","permalink":"http://airshu.github.io/tags/mac/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"},{"name":"Mac","slug":"å·¥å…·è½¯ä»¶/Mac","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/Mac/"}]},{"title":"çƒ­æ›´æ–°","date":"2023-07-15T01:43:36.894Z","path":"wiki/JavaScript/ReactNative/çƒ­æ›´æ–°/","text":"åŸºæœ¬ä½¿ç”¨ å®‰è£…CodePush CLI æ³¨å†Œè´¦å· æ³¨å†ŒApp åŸç”Ÿç«¯é…ç½® RNä»£ç é›†æˆ å‘å¸ƒ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556#å®‰è£…appcenterå·¥å…·npm install -g appcenter-cli#ç™»å½•appcenter login#ç™»å‡ºappcenter logoutappcenter tokens listappcenter tokens delete &lt;machineName&gt;#æŸ¥çœ‹è´¦æˆ·ä¿¡æ¯appcenter profile list# 1ã€åˆ›å»ºiOSåº”ç”¨appcenter apps create -d MyApp-iOS -o iOS -p React-Native# 2ã€åˆ›å»ºAndroidåº”ç”¨appcenter apps create -d MyApp-Android -o Android -p React-Native# æŸ¥è¯¢è´¦å·ä¸‹çš„æ‰€æœ‰åº”ç”¨appcenter apps listappcenter apps delete -a &lt;ownerName&gt;/&lt;appName&gt;# ownerNameï¼šç”¨æˆ·åç§°# appNameï¼šåˆ›å»ºçš„åº”ç”¨åç§°# åˆ›å»ºéƒ¨ç½²appcenter codepush deployment add -a &lt;ownerName&gt;/&lt;appName&gt; Staging# é…ç½®ç”Ÿäº§ç¯å¢ƒappcenter codepush deployment add -a &lt;ownerName&gt;/&lt;appName&gt; Productionn# ownerNameï¼šç”¨æˆ·åç§°# appNameï¼šåˆ›å»ºçš„åº”ç”¨åç§°# åˆ é™¤åº”ç”¨çš„å¼€å‘ç¯å¢ƒappcenter codepush deployment remove -a &lt;ownerName&gt;/&lt;appName&gt; Staging# åˆ é™¤åº”ç”¨çš„ç”Ÿäº§ç¯å¢ƒappcenter codepush deployment remove -a &lt;ownerName&gt;/&lt;appName&gt; Production#æŸ¥è¯¢åº”ç”¨keyappcenter codepush deployment list -a &lt;ownerName&gt;/&lt;appName&gt; -k#å‘å¸ƒappcenter codepush release-react -a airdady/test -t 1.0.11 -o ./build -d Staging","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"AndroidåŸç”ŸUIç»„ä»¶","date":"2023-07-15T01:43:36.892Z","path":"wiki/JavaScript/ReactNative/AndroidåŸç”ŸUIç»„ä»¶/","text":"æä¾›åŸç”Ÿè§†å›¾çš„æµç¨‹ï¼š åˆ›å»ºä¸€ä¸ªViewManagerå­ç±» å®ç°createViewInstance å¯¼å‡ºè§†å›¾çš„å±æ€§è®¾ç½®å™¨ï¼šä½¿ç”¨@ReactPropï¼ˆæˆ–@ReactPropGroupï¼‰æ³¨è§£ æŠŠè¿™ä¸ªè§†å›¾ç®¡ç†å™¨æ³¨å†Œåˆ°åº”ç”¨ç¨‹åºåŒ…çš„createViewManagers å®ç°JavaScriptæ¨¡å— å‚è€ƒ AndroidåŸç”ŸUIç»„ä»¶","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"AndroidåŸç”Ÿæ¨¡å—","date":"2023-07-15T01:43:36.892Z","path":"wiki/JavaScript/ReactNative/AndroidåŸç”Ÿæ¨¡å—/","text":"æ¨¡å—çš„å®šä¹‰è¦å®ç°é€šä¿¡ï¼Œéœ€è¦å…ˆå®šä¹‰ReactContexBaseJavaModuleï¼Œå¹¶å°†ReactPackageæ³¨å†Œåˆ°ReactInstanceManagerä¸­ ReactMethodåœ¨moduleä¸­å®šä¹‰å¯ä»¥è¢«JSè°ƒç”¨çš„å‡½æ•° 1. ä½¿ç”¨é›†æˆåˆ°ç°æœ‰Androidåº”ç”¨ä¸­çš„IndexModuleæ–‡ä»¶ï¼Œæ·»åŠ ä¸€ä¸ªReactMethod1234567891011121314151617181920212223242526272829public class IndexModule extends ReactContextBaseJavaModule &#123; @NonNull @Override public String getName() &#123; return &quot;IndexModule&quot;; &#125; @ReactMethod public void show(String message, int duration) &#123; Toast.makeText(getReactApplicationContext(), message, duration).show(); &#125; private static final String DURATION_SHORT_KEY = &quot;SHORT&quot;; private static final String DURATION_LONG_KEY = &quot;LONG&quot;; //è¿”å›çš„å¸¸é‡å¯ä¾›JSä½¿ç”¨ @Nullable @Override public Map&lt;String, Object&gt; getConstants() &#123; final Map&lt;String, Object&gt; constants = new HashMap&lt;&gt;(); constants.put(DURATION_SHORT_KEY, Toast.LENGTH_SHORT); constants.put(DURATION_LONG_KEY, Toast.LENGTH_LONG); return constants; &#125;&#125; ReactMethodæ”¯æŒçš„å‚æ•°ç±»å‹æ˜ å°„å…³ç³» Boolean -&gt; Bool Integer -&gt; Number Double -&gt; Number Float -&gt; Number String -&gt; String Callback -&gt; function ReadableMap -&gt; Object ReadableArray -&gt; Array 2. jsè°ƒç”¨1234567891011121314//ToastExample.jsimport &#123;NativeModules&#125; from &#x27;react-native&#x27;;//indexå¯¹äºIndexModuleä¸­getNameçš„è¿”å›å€¼export default NativeModules.index;//å…¶ä»–åœ°æ–¹ä½¿ç”¨import ToastExample from &#x27;./ToastExample&#x27;;ToastExample.show(&#x27;hoho&#x27;, ToastExample.SHORT); å›è°ƒå‡½æ•°CallbackCallbackå¯ä»¥åœ¨JSè°ƒç”¨åŸç”Ÿçš„æ–¹æ³•é‡Œå›è°ƒJSæ–¹æ³• 123456789//Callbackæµ‹è¯•@ReactMethodpublic void testCallback(String param1, Callback successCallback, Callback errorCallback) &#123; try &#123; successCallback.invoke(param1); &#125; catch (Exception e) &#123; errorCallback.invoke(&quot;error:&quot; + e.getMessage()); &#125;&#125; 123456789&lt;Button onPress=&#123;()=&gt;&#123; NativeModules.IndexModule.testCallback(&quot;æµ‹è¯•å›è°ƒ&quot;, (msg)=&gt;&#123; NativeModules.IndexModule.show(msg, NativeModules.IndexModule.SHORT); &#125;, (error) =&gt; &#123; NativeModules.IndexModule.show(error, NativeModules.IndexModule.SHORT); &#125;);&#125;&#125; title=&#123;&quot;Callbackæµ‹è¯•&quot;&#125;&gt;&lt;/Button&gt; Promiseä½¿ç”¨Promiseï¼Œå¯ä»¥åœ¨å£°æ˜äº†asyncçš„å¼‚æ­¥å‡½æ•°å†…ä½¿ç”¨awaitå…³é”®å­—æ¥è°ƒç”¨ 1234@ReactMethodpublic void testPromise(String param1, Promise promise) &#123; promise.resolve(param1);&#125; 12345678&lt;Button onPress=&#123;async ()=&gt; &#123; var result = await NativeModules.IndexModule.testPromise(&#x27;Awesome&#x27;); NativeModules.IndexModule.show(result, NativeModules.IndexModule.SHORT);&#125;&#125; title=&#123;&quot;æµ‹è¯•Promise&quot;&#125;&gt;&lt;/Button&gt; å‘é€äº‹ä»¶åŸç”Ÿæ¨¡å—å¯ä»¥åœ¨æ²¡æœ‰è¢«è°ƒç”¨çš„æƒ…å†µä¸‹é€šè¿‡RCTDeviceEventEmitterå¾€JavaScriptå‘é€äº‹ä»¶é€šçŸ¥ï¼Œ 1234567891011121314151617181920@ReactMethodpublic void testSendEvent(String param1) &#123; WritableMap params = Arguments.createMap(); params.putString(&quot;eventProperty&quot;, param1); setEvent(&quot;EventReminder&quot;, params);&#125;/** * å¾€JSå‘é€äº‹ä»¶ * @param eventName * @param params */public void setEvent(String eventName, WritableMap params) &#123; getReactApplicationContext().getJSModule(DeviceEventManagerModule.RCTDeviceEventEmitter.class) .emit(eventName, params);&#125; 12345678910111213141516171819202122232425&lt;Button onPress=&#123;()=&gt; &#123; NativeModules.IndexModule.testSendEvent(&#x27;emitttt&#x27;);&#125;&#125; title=&#123;&quot;æµ‹è¯•Event Emitter&quot;&#125;&gt;&lt;/Button&gt;//ç›‘å¬åŸç”Ÿäº‹ä»¶function compnentDidMount() &#123; const eventEmitter = new NativeEventEmitter(NativeModules.IndexModule); this.listener = eventEmitter.addListener(&#x27;EventReminder&#x27;, (reminder) =&gt; &#123; console.log(reminder.name); console.log(reminder.location); console.log(reminder.date); //toaståŸç”Ÿä¾§å‘é€çš„æ¶ˆæ¯ NativeModules.IndexModule.show(reminder.eventProperty, NativeModules.IndexModule.SHORT); &#125;);&#125;function componentWillUnmount() &#123; this.listener &amp;&amp; this.listener.remove();&#125;compnentDidMount(); ä»startActivityResultä¸­è·å–ç»“æœè¿ç”¨Promiseï¼Œå½“JSè°ƒç”¨æŸä¸ªåŸç”Ÿæ–¹æ³•ï¼ŒåŸç”Ÿæ‰“å¼€å¦ä¸€ä¸ªåŸç”Ÿç•Œé¢ï¼ŒåŸç”Ÿç•Œé¢è¿”å›çš„æ•°æ®é€šè¿‡Promiseå†è¿”å›ç»™JSã€‚é€šè¿‡ä»¥ä¸‹ä»£ç æ¥ç›‘å¬å›è°ƒ 1reactContext.addActivityEventListener(mActivityResultListener); å…·ä½“å®ä¾‹åˆ›å»ºä¸€ä¸ªImagePickerModule 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687package com.lqd.androidpractice.rn.modules;import android.util.Log;import androidx.annotation.NonNull;import com.facebook.react.bridge.ActivityEventListener;import com.facebook.react.bridge.BaseActivityEventListener;import com.facebook.react.bridge.Promise;import com.facebook.react.bridge.ReactApplicationContext;import com.facebook.react.bridge.ReactContextBaseJavaModule;import com.facebook.react.bridge.ReactMethod;public class ImagePickerModule extends ReactContextBaseJavaModule &#123; private static final int IMAGE_PICKER_REQUEST = 467081; private static final String E_ACTIVITY_DOES_NOT_EXIST = &quot;E_ACTIVITY_DOES_NOT_EXIST&quot;; private static final String E_PICKER_CANCELLED = &quot;E_PICKER_CANCELLED&quot;; private static final String E_FAILED_TO_SHOW_PICKER = &quot;E_FAILED_TO_SHOW_PICKER&quot;; private static final String E_NO_IMAGE_DATA_FOUND = &quot;E_NO_IMAGE_DATA_FOUND&quot;; @NonNull @Override public String getName() &#123; return &quot;ImagePickerModule&quot;; &#125; private Promise mPickerPromise; private final ActivityEventListener mActivityEventListener = new BaseActivityEventListener() &#123; @Override public void onActivityResult(int requestCode, int resultCode, android.content.Intent data) &#123; if (requestCode == IMAGE_PICKER_REQUEST) &#123; if (mPickerPromise != null) &#123; if (resultCode == android.app.Activity.RESULT_CANCELED) &#123; mPickerPromise.reject(E_PICKER_CANCELLED, &quot;Image picker was cancelled&quot;); &#125; else if (resultCode == android.app.Activity.RESULT_OK) &#123; android.net.Uri uri = data.getData(); if (uri == null) &#123; mPickerPromise.reject(E_NO_IMAGE_DATA_FOUND, &quot;No image data found&quot;); &#125; else &#123; mPickerPromise.resolve(uri.toString()); &#125; &#125; mPickerPromise = null; &#125; &#125; &#125; &#125;; public ImagePickerModule(ReactApplicationContext reactContext) &#123; super(reactContext); reactContext.addActivityEventListener(mActivityEventListener); &#125; /** * JSè°ƒç”¨é€‰æ‹©å›¾ç‰‡ï¼Œå¹¶å›è°ƒç»™JS * @param promise */ @ReactMethod public void pickImage(final Promise promise) &#123; Log.d(&quot;ImagePickerModule&quot;, &quot;pickImage&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&quot;); android.app.Activity currentActivity = getCurrentActivity(); if (currentActivity == null) &#123; promise.reject(E_ACTIVITY_DOES_NOT_EXIST, &quot;Activity doesn&#x27;t exist&quot;); return; &#125; // Store the promise to resolve/reject when picker returns data mPickerPromise = promise; try &#123; final android.content.Intent galleryIntent = new android.content.Intent(); galleryIntent.setType(&quot;image/*&quot;); galleryIntent.setAction(android.content.Intent.ACTION_GET_CONTENT); final android.content.Intent chooserIntent = android.content.Intent.createChooser(galleryIntent, &quot;Pick an image&quot;); currentActivity.startActivityForResult(chooserIntent, IMAGE_PICKER_REQUEST); &#125; catch (android.content.ActivityNotFoundException e) &#123; mPickerPromise.reject(E_FAILED_TO_SHOW_PICKER, e); mPickerPromise = null; &#125; &#125;&#125; JSæµ‹è¯• 12345678&lt;Button onPress=&#123; async ()=&gt;&#123; var result = await NativeModules.ImagePickerModule.pickImage(); console.log(result);&#125;&#125; title=&#123;&quot;æµ‹è¯•Activity Result&quot;&#125;&gt;&lt;/Button&gt; ç›‘å¬ç”Ÿå‘½å‘¨æœŸäº‹ä»¶12345678910111213141516171819//ç›‘å¬ç”Ÿå‘½å‘¨æœŸå›è°ƒreactContext.addLifecycleEventListener(new LifecycleEventListener() &#123; @Override public void onHostResume() &#123; &#125; @Override public void onHostPause() &#123; &#125; @Override public void onHostDestroy() &#123; &#125;&#125;);","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"package.jsonè¯´æ˜","date":"2023-07-15T01:43:36.892Z","path":"wiki/JavaScript/ReactNative/package.json/","text":"12345678910111213141516171819202122232425262728293031323334353637&#123; &quot;name&quot;: &quot;app_name&quot;,//åº”ç”¨å &quot;version&quot;: &quot;1.1.1&quot;,//ç‰ˆæœ¬ï¼Œç”¨äºå±•ç¤º &quot;versionCode&quot;: 99,//ç‰ˆæœ¬å· &quot;private&quot;: true, &quot;scripts&quot;: &#123; //å¸¸ç”¨çš„å‘½ä»¤å°è£… &quot;start&quot;: &quot;&quot;, &quot;clear&quot;: &quot;&quot;, &quot;publish&quot;: &quot;&quot;, &quot;android&quot;: &quot;&quot;, &quot;ios&quot;: &quot;&quot; &#125;, &quot;engines&quot;: &#123;&#125;, &quot;repository&quot;: &#123; &quot;type&quot;: &quot;git&quot;, &quot;url&quot;: &quot;&quot; &#125;, &quot;keywords&quot;: &#123;&#125;, &quot;author&quot;: &#123; &quot;name&quot;: &quot;&quot;, &quot;email&quot;: &quot;&quot; &#125;, &quot;license&quot;: &quot;&quot;, &quot;bugs&quot;: &#123; &quot;url&quot;: &quot;&quot; &#125;, &quot;homepage&quot;: &#123;&#125;, &quot;dependencies&quot;: &#123;//é¡¹ç›®çš„ä¾èµ– &quot;react&quot;: &quot;18.2.0&quot;, &quot;react-native&quot;: &quot;0.71.7&quot; &#125;, &quot;devDependencies&quot;: &#123;//å¼€å‘çš„æ—¶å€™ä¾èµ– &#125;&#125;","tags":[{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"}]},{"title":"React JSæºç åˆ†æ","date":"2023-07-15T01:43:36.892Z","path":"wiki/JavaScript/React/æºç åˆ†æ/reactjsæºç åˆ†æ/","text":"å‚è€ƒ reactjsæºç åˆ†æ-ä¸‹ç¯‡ï¼ˆæ›´æ–°æœºåˆ¶å®ç°åŸç†ï¼‰","tags":[{"name":"React","slug":"React","permalink":"http://airshu.github.io/tags/React/"}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"React","slug":"JavaScript/React","permalink":"http://airshu.github.io/categories/JavaScript/React/"},{"name":"æºç åˆ†æ","slug":"JavaScript/React/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/JavaScript/React/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"FlutteråŠ¨ç”»","date":"2023-07-15T01:43:36.891Z","path":"wiki/Flutter/FlutteråŠ¨ç”»/","text":"https://flutter.cn/docs/development/ui/animations åŠ¨ç”»çš„åŸºæœ¬ç»„æˆAnimationä½œç”¨ï¼šä¿å­˜åŠ¨ç”»çš„å·®å€¼å’ŒçŠ¶æ€ã€‚æ•´ä¸ªåŠ¨ç”»æ‰§è¡Œè¿‡ç¨‹å¯ä»¥æ˜¯çº¿æ€§çš„ã€æ›²çº¿çš„ã€ä¸€ä¸ªæ­¥è¿›å‡½æ•°æ´»ç€ä»»ä½•å…¶ä»–æ›²çº¿ï¼Œç”±Curveæ¥å†³å®šã€‚ addListener ç»™Animationæ·»åŠ å¸§ç›‘å¬å™¨ addStatusListener åŠ¨ç”»å¼€å§‹ã€ç»“æŸã€æ­£å‘æˆ–åå‘æ—¶çš„å›è°ƒ Curveä½œç”¨ï¼šå®šä¹‰åŠ¨ç”»æ›²çº¿ å†…ç½®Curvesæ›²çº¿ï¼š linearï¼šåŒ€é€Ÿ decelerateï¼šåŒ€å‡é€Ÿ easeï¼šå¼€å§‹åŠ é€Ÿåé¢å‡é€Ÿ easeInï¼šå¼€å§‹æ…¢åé¢å¿« easeOutï¼šå¼€å§‹å¿«åé¢æ…¢ easeInOutï¼šå¼€å§‹æ…¢ï¼Œç„¶ååŠ é€Ÿï¼Œæœ€åå†å‡é€Ÿ AnimationControllerä½œç”¨ï¼šç”¨äºæ§åˆ¶åŠ¨ç”»ï¼ŒåŒ…å«å¯åŠ¨forwardã€åœæ­¢stopã€åå‘æ’­æ”¾reverseç­‰ Tickerå½“åˆ›å»ºAnimationControlleræ—¶ï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªvsyncå‚æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªTickerProviderç±»å‹ã€‚é€šå¸¸æˆ‘ä»¬ä¼šå°†SingleTickerProviderStateMixinæ·»åŠ åˆ°Stateçš„å®šä¹‰ä¸­ï¼Œç„¶åå°†Stateå¯¹è±¡ä½œä¸ºvsyncçš„å€¼ã€‚ SingleTickerProviderStateMixinå’ŒTickerProviderStateMixinï¼Œè¿™ä¸¤ä¸ªç±»çš„åŒºåˆ«å°±æ˜¯æ˜¯å¦æ”¯æŒåˆ›å»ºå¤šä¸ªTickerProvider Tweené»˜è®¤æƒ…å†µä¸‹ï¼ŒAnimationControllerå¯¹è±¡å€¼çš„èŒƒå›´æ˜¯[0.0ï¼Œ1.0]ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æ„å»ºUIçš„åŠ¨ç”»å€¼åœ¨ä¸åŒçš„èŒƒå›´æˆ–ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨Tweenæ¥æ·»åŠ æ˜ å°„ä»¥ç”Ÿæˆä¸åŒçš„èŒƒå›´æˆ–æ•°æ®ç±»å‹çš„å€¼ã€‚ä¾‹å¦‚ï¼Œåƒä¸‹é¢ç¤ºä¾‹ï¼ŒTweenç”Ÿæˆ[-200.0ï¼Œ0.0]çš„å€¼ 1final Tween doubleTween = Tween&lt;double&gt;(begin: -200.0, end: 0.0); Tweenæ„é€ å‡½æ•°éœ€è¦beginå’Œendä¸¤ä¸ªå‚æ•°ã€‚Tweençš„å”¯ä¸€èŒè´£å°±æ˜¯å®šä¹‰ä»è¾“å…¥èŒƒå›´åˆ°è¾“å‡ºèŒƒå›´çš„æ˜ å°„ã€‚è¾“å…¥èŒƒå›´é€šå¸¸ä¸º[0.0ï¼Œ1.0]ï¼Œä½†è¿™ä¸æ˜¯å¿…é¡»çš„ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰éœ€è¦çš„èŒƒå›´ã€‚Tweenç»§æ‰¿è‡ªAnimatableï¼Œè€Œä¸æ˜¯ç»§æ‰¿è‡ªAnimationï¼ŒAnimatableä¸­ä¸»è¦å®šä¹‰åŠ¨ç”»å€¼çš„æ˜ å°„è§„åˆ™ã€‚ 123456789101112final Tween colorTween = ColorTween(begin: Colors.transparent, end: Colors.black54);final AnimationController controller = AnimationController( duration: const Duration(milliseconds: 500), vsync: this,);Animation&lt;int&gt; alpha = IntTween(begin: 0, end: 255).animate(controller);final Animation curve = CurvedAnimation(parent: controller, curve: Curves.easeOut);Animation&lt;int&gt; alpha = IntTween(begin: 0, end: 255).animate(curve); Tweenå¯¹è±¡ä¸å­˜å‚¨ä»»ä½•çŠ¶æ€ï¼Œç›¸åï¼Œå®ƒæä¾›äº†evaluate(Animation animation)æ–¹æ³•ï¼Œå®ƒå¯ä»¥è·å–åŠ¨ç”»å½“å‰æ˜ å°„å€¼ã€‚ Animationå¯¹è±¡çš„å½“å‰å€¼å¯ä»¥é€šè¿‡value()æ–¹æ³•å–åˆ°ã€‚evaluateå‡½æ•°è¿˜æ‰§è¡Œä¸€äº›å…¶ä»–å¤„ç†ï¼Œä¾‹å¦‚åˆ†åˆ«ç¡®ä¿åœ¨åŠ¨ç”»å€¼ä¸º0.0å’Œ1.0æ—¶è¿”å›å¼€å§‹å’Œç»“æŸçŠ¶æ€ Tweençš„å­ç±»ï¼š ColorTween ConstantTween CurveTween IntTween RectTween ReverseTween SizeTween StepTween åŸºæœ¬ç”¨æ³•12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152class ScaleAnimationRoute extends StatefulWidget &#123; const ScaleAnimationRoute(&#123;Key? key&#125;) : super(key: key); @override _ScaleAnimationRouteState createState() =&gt; _ScaleAnimationRouteState();&#125;//éœ€è¦ç»§æ‰¿TickerProviderï¼Œå¦‚æœæœ‰å¤šä¸ªAnimationControllerï¼Œåˆ™åº”è¯¥ä½¿ç”¨TickerProviderStateMixinã€‚class _ScaleAnimationRouteState extends State&lt;ScaleAnimationRoute&gt; with SingleTickerProviderStateMixin &#123; late Animation&lt;double&gt; animation; late AnimationController controller; @override initState() &#123; super.initState(); controller = AnimationController( duration: const Duration(seconds: 2), vsync: this, ); //åŒ€é€Ÿ //å›¾ç‰‡å®½é«˜ä»0å˜åˆ°300 animation = Tween(begin: 0.0, end: 300.0).animate(controller); animation.addListener(() &#123; setState(() =&gt; &#123;&#125;); &#125;); //å¯åŠ¨åŠ¨ç”»(æ­£å‘æ‰§è¡Œ) controller.forward(); &#125; @override Widget build(BuildContext context) &#123; return Center( child: Image.asset( &quot;imgs/avatar.png&quot;, width: animation.value, height: animation.value, ), ); &#125; @override dispose() &#123; //è·¯ç”±é”€æ¯æ—¶éœ€è¦é‡Šæ”¾åŠ¨ç”»èµ„æº controller.dispose(); super.dispose(); &#125;&#125; ä»¥ä¸Šå†™æ³•å°è£…åä¾¿æ˜¯AnimatedBuilder 1234AnimatedBuilder(&#123; child: xx, animation: yy,//ç»‘å®šAnimation&#125;); éšå¼åŠ¨ç”»Implicit Animations ImplicitlyAnimatedWidgetçš„å­ç±»ï¼Œå¯ä»¥æ–¹ä¾¿çš„è®¾ç½®å„ç§å„ç§å±æ€§çš„åŠ¨ç”»ã€‚éšå¼åŠ¨ç”»åªéœ€è¦ä¼ é€’durationï¼Œå³å¯è‡ªè¡Œé©±åŠ¨ã€‚ç®€å•çš„åŠ¨ç”»åœºæ™¯å¯ä½¿ç”¨ã€‚ ç³»ç»Ÿå®ç°çš„éšå¼åŠ¨ç”» AnimatedContainerï¼šContainerå±æ€§å˜åŒ–è¿‡æ¸¡åŠ¨ç”» AnimatedAlignï¼šalignmentå˜åŒ–è¿‡æ¸¡åŠ¨ç”» AnimatedOpacityï¼šé€æ˜åº¦ AnimatedPositionedï¼šé…åˆStackä½¿ç”¨ AnimatedRotation AnimatedScale AnimatedSlide AnimatedSwitcher AnimatedSize AnimatedCrossFade AnimatedTheme AnimatedPositionedDirectional AnimatedPhysicalModel AnimatedPadding å¸¸ç”¨å±æ€§ durationï¼šè®¾ç½®åŠ¨ç”»æ—¶é•¿ curveï¼šè®¾ç½®åŠ¨ç”»æ›²çº¿ onEndï¼šåŠ¨ç”»ç»“æŸå›è°ƒ è‡ªå®šä¹‰éšå¼åŠ¨ç”»ä½¿ç”¨TweenAnimationBuilderï¼Œè¯¥ Widget ä½¿ç”¨çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¼ é€’ duration å‚æ•°åŠ¨ç”»æ—¶é—´ã€tween å‚æ•°åŠ¨ç”»è¦è®¾ç½®çš„å€¼çš„èŒƒå›´ï¼ˆè¡¥é—´ï¼‰ã€é‡è¦çš„è¿˜æœ‰ builder å‚æ•°ï¼Œbuilderå‡½æ•°çš„å‚æ•°åŒ…å«contextã€è¡¥é—´å‚æ•°tweençš„ç±»å‹ã€è¿˜æœ‰child 123456789101112131415161718TweenAnimationBuilder&lt;double&gt;( tween: Tween&lt;double&gt;(begin: 0, end: 2 * pi), duration: Duration(seconds: 2), builder: (BuildContext context, double angle, Widget child) &#123; return Transform.rotate( angle: angle, child: Container( color: Colors.red, width: 100, height: 100, ), ); &#125;,), æ˜¾ç¤ºåŠ¨ç”»Explicit Animations ç»§æ‰¿è‡ªAnimatedWidgetï¼Œé€šè¿‡ä¼ å…¥listenableæ¥é©±åŠ¨è§†å›¾å˜åŒ–ã€‚è‡ªå·±æ¥æ§åˆ¶åŠ¨ç”»çš„è¿è¡Œ AlignTransition AnimatedBuilder DecoratedBoxTransition DefaultTextStyleTransition RelativePositionedTransition RotationTransitionï¼šæ—‹è½¬ ScaleTransitionï¼šç¼©æ”¾åŠ¨ç”»ï¼Œå¯ä»¥æŒ‡å®šä¸­å¿ƒç‚¹ FadeTransitionï¼šé€æ˜åº¦åŠ¨ç”» SizeTransitionï¼šå®½é«˜å˜åŒ–ï¼Œä¸ä¼šå¼•èµ·å†…å®¹çš„å˜å½¢ SlideTransitionï¼šä½ç§»åŠ¨ç”» äº¤ç»‡åŠ¨ç”»å¤šä¸ªåŠ¨ç”»äº¤é”™åœ¨ä¸€èµ·ï¼Œé€šè¿‡ä¸€ä¸ªcontrolleræ§åˆ¶ã€‚ 12345// å¤šä¸ªtweenç»‘å®šcontrollerAnimationController controller = AnimationController();Tween&lt;double&gt;(begin: 0, end: 100).animate(CurvedAnimation(parent: controller, curve: Interval(0.0, 0.5, curve: Curves.ease)));ColorTween(begin: Colors.green, end: Colors.red,).amimate(CurvedAnimation(parent: controller, curve: Interval(0.5, 0.8, curve: Curves.ease,))); è‡ªå®šä¹‰åŠ¨ç”»å‚è€ƒ Flutterå®æˆ˜-åŠ¨ç”» æ·±å…¥ç†è§£FlutteråŠ¨ç”»åŸç†","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"å›¾ç‰‡å†…å­˜ä¼˜åŒ–","date":"2023-07-15T01:43:36.891Z","path":"wiki/Flutter/æœªåˆ†ç±»/å›¾ç‰‡å†…å­˜ä¼˜åŒ–/","text":"Flutterä¸­å›¾ç‰‡å†…å­˜ä¼˜åŒ–ç­–ç•¥ï¼š ä½¿ç”¨ResizeImage ä½¿ç”¨cacheWidthã€cacheHeight Androidä¸­å›¾ç‰‡å ç”¨å†…å­˜è®¡ç®—æ–¹æ³• Flutterå›¾ç‰‡åŠ è½½ä¼˜åŒ–æ¢ç´¢ FlutteråŠ è½½å¤§å›¾å†…å­˜é—®é¢˜å¤„ç†","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"flutter_image_compress","date":"2023-07-15T01:43:36.891Z","path":"wiki/Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³/flutter_image_compress/","text":"https://pub.dev/packages/flutter_image_compress https://github.com/fluttercandies/flutter_image_compress å›¾ç‰‡å‹ç¼©å·¥å…· 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061// 1. compress file and get Uint8List// æ ¹æ®é…ç½®å‹ç¼©å›¾ç‰‡Future&lt;Uint8List&gt; testCompressFile(File file) async &#123; var result = await FlutterImageCompress.compressWithFile( file.absolute.path, minWidth: 2300, minHeight: 1500, quality: 94, rotate: 90, ); print(file.lengthSync()); print(result.length); return result;&#125;// 2. compress file and get file.// å°†å›¾ç‰‡å‹ç¼©æˆæ–°çš„å›¾ç‰‡Future&lt;File&gt; testCompressAndGetFile(File file, String targetPath) async &#123; var result = await FlutterImageCompress.compressAndGetFile( file.absolute.path, targetPath, quality: 88, rotate: 180, ); print(file.lengthSync()); print(result.lengthSync()); return result;&#125;// 3. compress asset and get Uint8List.// å‹ç¼©assetçš„å›¾ç‰‡ï¼Œè¿”å›Uint8Listç±»å‹Future&lt;Uint8List&gt; testCompressAsset(String assetName) async &#123; var list = await FlutterImageCompress.compressAssetImage( assetName, minHeight: 1920, minWidth: 1080, quality: 96, rotate: 180, ); return list;&#125;// 4. compress Uint8List and get another Uint8List.// å¯¹Uint8Listå›¾ç‰‡æ•°æ®è¿›è¡Œå‹ç¼©Future&lt;Uint8List&gt; testComporessList(Uint8List list) async &#123; var result = await FlutterImageCompress.compressWithList( list, minHeight: 1920, minWidth: 1080, quality: 96, rotate: 135, ); print(list.length); print(result.length); return result;&#125; å¸¸ç”¨å‚æ•° rotate éœ€è¦æ—‹è½¬ï¼Œå¯ä½¿ç”¨æ­¤å‚æ•° quality å›¾ç‰‡è´¨é‡ï¼Œå¦‚æœæ˜¯pngæ ¼å¼ï¼Œåœ¨iOSç«¯ä¼šè¢«å¿½ç•¥ format æ”¯æŒjpegã€pngï¼Œé»˜è®¤æ˜¯jpeg","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"å›¾ç‰‡ç›¸å…³","slug":"Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/%E5%9B%BE%E7%89%87%E7%9B%B8%E5%85%B3/"}]},{"title":"image_cropper","date":"2023-07-15T01:43:36.891Z","path":"wiki/Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³/image_cropper/","text":"https://pub.dev/packages/image_cropper https://github.com/hnvn/flutter_image_cropper å›¾ç‰‡è£å‰ªåº“ï¼Œå°è£…äº†uCropã€TOCropViewControllerå’Œcroppie","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"å›¾ç‰‡ç›¸å…³","slug":"Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/%E5%9B%BE%E7%89%87%E7%9B%B8%E5%85%B3/"}]},{"title":"Androidä¸­å›¾ç‰‡å ç”¨å†…å­˜è®¡ç®—æ–¹æ³•","date":"2023-07-15T01:43:36.890Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/Androidä¸­å›¾ç‰‡å ç”¨å†…å­˜è®¡ç®—æ–¹æ³•/","text":"æˆ‘ä»¬åœ¨ç”µè„‘ä¸Šçœ‹åˆ°çš„ png æ ¼å¼æˆ–è€… jpg æ ¼å¼çš„å›¾ç‰‡ï¼Œpng(jpg) åªæ˜¯è¿™å¼ å›¾ç‰‡çš„å®¹å™¨ï¼Œå®ƒä»¬æ˜¯ç»è¿‡ç›¸å¯¹åº”çš„å‹ç¼©ç®—æ³•å°†åŸå›¾æ¯ä¸ªåƒç´ ç‚¹ä¿¡æ¯è½¬æ¢ç”¨å¦ä¸€ç§æ•°æ®æ ¼å¼è¡¨ç¤ºï¼Œä»¥æ­¤è¾¾åˆ°å‹ç¼©ç›®çš„ï¼Œå‡å°‘å›¾ç‰‡æ–‡ä»¶å¤§å°ã€‚è€Œå½“æˆ‘ä»¬é€šè¿‡ä»£ç ï¼Œå°†è¿™å¼ å›¾ç‰‡åŠ è½½è¿›å†…å­˜æ—¶ï¼Œä¼šå…ˆè§£æå›¾ç‰‡æ–‡ä»¶æœ¬èº«çš„æ•°æ®æ ¼å¼ï¼Œç„¶åè¿˜åŸä¸ºä½å›¾ï¼Œä¹Ÿå°±æ˜¯ Bitmap å¯¹è±¡ï¼ŒBitmap çš„å¤§å°å–å†³äºåƒç´ ç‚¹çš„æ•°æ®æ ¼å¼ä»¥åŠåˆ†è¾¨ç‡ä¸¤è€…ã€‚ ç»“è®ºï¼š å ç”¨å†…å­˜å¤§å°çš„è®¡ç®—å…¬å¼ï¼šåˆ†è¾¨ç‡ * åƒç´ ç‚¹å¤§å°ï¼›Androidä¸­åƒç´ ç‚¹å¤§å°æœ‰ï¼š 123456789101112131415161718192021222324252627282930313233/** * å¯ç”¨çš„bitmapé…ç½®ï¼Œ ä¸€ä¸ªbitmapé…ç½®æè¿°çš„æ˜¯æ¯ä¸ªåƒç´ çš„å­˜å‚¨æ ¼å¼ï¼Œè¿™å°†ä¼šå½±å“åˆ°å›¾ç‰‡çš„è´¨é‡ (é¢œè‰²æ·± * åº¦) ä»¥åŠæ˜¾ç¤ºé€æ˜/åŠé€æ˜é¢œè‰²çš„èƒ½åŠ› */public enum Config &#123; // è¿™äº›æšä¸¾ä¸­çš„å€¼å¿…é¡»è¦ä¸Skiaå›¾åƒå¼•æ“çš„SkBitmap.hä¸­å¯¹åº”å€¼ä¸€ä¸€å¯¹åº” /** * åªæœ‰ä¸€ä¸ªalphaé€šé“ * æ¯ä¸ªåƒç´ å 1ä¸ªå­—èŠ‚ */ ALPHA_8 (1), /** *æ¯ä¸ªåƒç´ å ç”¨2ä¸ªå­—èŠ‚ï¼Œåªæœ‰RGB 3ä¸ªé€šé“ï¼Œæ²¡æœ‰alpha é€šé“ * çº¢è‰²çš„ç²¾åº¦æ˜¯5 bits, ç»¿è‰²ç²¾åº¦æ˜¯6 bitsï¼Œè“è‰²ç²¾åº¦æ˜¯5 */ RGB_565 (3), /** * æ¯ä¸ªåƒç´ å ç”¨2ä¸ªå­—èŠ‚. * (è™½ç„¶å ç”¨å†…å­˜åªæœ‰ ARGB8888 çš„ä¸€åŠï¼Œä¸è¿‡å·²ç»è¢«å®˜æ–¹å«Œå¼ƒ) */ @Deprecated ARGB_4444 (4), /** * æ¯ä¸ªåƒç´ å ç”¨4ä¸ªå­—èŠ‚. æ¯ä¸ªé€šé“ (RGBçš„3ä¸ªé€šé“å’Œalpha * çš„1ä¸ªé€æ˜åº¦é€šé“) çš„è¿›åº¦æ˜¯8bit (256ä¸ªå¯èƒ½å€¼) * è¿™ç§é…ç½®æ˜¯æœ€çµæ´»çš„ï¼Œ è´¨é‡æœ€å¥½ï¼Œå°½é‡ä½¿ç”¨è¿™ç§æ ¼å¼. */ ARGB_8888 (5);&#125; åŒä¸€å¼ å›¾æ”¾åœ¨ä¸åŒåœ°æ–¹åˆ†è¾¨ç‡ä¸ä¸€æ ·ï¼Œä¸åŒresç›®å½•å ç”¨å†…å­˜å¤§å°ä¸ä¸€æ ·ã€‚æœ¬åœ°ç£ç›˜ã€ç½‘ç»œç­‰æŒ‰ç…§åŸå›¾çš„åˆ†è¾¨ç‡æ¥è®¡ç®—ï¼›resç›®å½•ä¸­çš„å›¾ç‰‡ï¼Œåˆ†è¾¨ç‡ä¼šè¿›è¡Œè½¬æ¢ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š æ–°åˆ†è¾¨ç‡&#x3D;åŸå›¾æ¨ªå‘åˆ†è¾¨ç‡ï¼ˆè®¾å¤‡dpi&#x2F;ç›®å½•å¯¹åº”çš„dpiï¼‰åŸå›¾çºµå‘åˆ†è¾¨ç‡*ï¼ˆè®¾å¤‡çš„dpi&#x2F;ç›®å½•å¯¹åº”çš„dpiï¼‰ ä¼˜åŒ–å†…å­˜çš„æ–¹æ³•ï¼š è®¾ç½®åƒç´ ç‚¹çš„ä½¿ç”¨æ–¹å¼ï¼Œæ¯”å¦‚ä½¿ç”¨RGB_565 é™ä½åˆ†è¾¨ç‡inSampleSize å‚è€ƒ Androidä¸­ä¸€å¼ å›¾ç‰‡å æ®çš„å†…å­˜å¤§å°æ˜¯å¦‚ä½•è®¡ç®—","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"è™šæ‹Ÿä¸»æœºçš„ç©æ³•","date":"2023-06-17T02:29:30.110Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/è™šæ‹Ÿä¸»æœºçš„ç©æ³•/","text":"ä»£ç†ç¥å™¨Shadowsockså®‰è£… wget --no-check-certificate -O shadowsocks.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh chmod +x shadowsocks.sh ./shadowsocks.sh 2&gt;&amp;1 | tee shadowsocks.log æ“ä½œ å¯åŠ¨ï¼š/etc/init.d/shadowsocks start åœæ­¢ï¼š/etc/init.d/shadowsocks stop é‡å¯ï¼š/etc/init.d/shadowsocks restart çŠ¶æ€ï¼š/etc/init.d/shadowsocks status è®¾ç½®å¯†ç  æŸ¥çœ‹ssæœåŠ¡å™¨æ‰€å¼€æ”¾çš„ç«¯å£ ss -lntp | grep ssserver æŸ¥çœ‹ssçš„é…ç½®æ–‡ä»¶ ps aux | grep ssserver ä¿®æ”¹å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œé‡å¯ ä»€ä¹ˆæ˜¯socksä»£ç†Socks æ˜¯ä¸ªç”µè·¯çº§çš„åº•å±‚ç½‘å…³ï¼Œæ˜¯ DavidKoblas åœ¨ 1990 å¹´å¼€å‘çš„ï¼Œ æ­¤åå°±ä¸€ç›´ä½œä¸º Internet RFC æ ‡å‡†çš„å¼€æ”¾æ ‡å‡†ã€‚Socks ä¸è¦æ±‚åº”ç”¨ç¨‹åºéµå¾ªç‰¹å®šçš„æ“ä½œç³»ç»Ÿå¹³å°ï¼ŒSocks ä»£ç†ä¸åº”ç”¨å±‚ä»£ç†ã€ HTTP å±‚ä»£ç†ä¸åŒï¼ŒSocks ä»£ç†åªæ˜¯ç®€å•åœ°ä¼ é€’æ•°æ®åŒ…ï¼Œè€Œä¸å¿…å…³å¿ƒæ˜¯ä½•ç§åº”ç”¨åè®®(æ¯”å¦‚ FTPã€HTTP å’Œ NNTP è¯·æ±‚)ã€‚æ‰€ä»¥ï¼ŒSocks ä»£ç†æ¯”å…¶ä»–åº”ç”¨å±‚ä»£ç†è¦å¿«å¾—å¤šã€‚ äº‘å‚¨å­˜å·¥å…·seafiledocker run -d --name seafile -e SEAFILE_SERVER_HOSTNAME=seafile.example.com -e SEAFILE_ADMIN_EMAIL=xxxj@gmail.com -e SEAFILE_ADMIN_PASSWORD=123456 -v /opt/seafile-data:/shared -p 8088:80 seafileltd/seafile:latest æ­å»ºMavenä»“åº“docker pull sonatype/ docker run -d -p 8081:8081 --name nexus -v /home/alone/nexus-data:/nexus-data sonatype/nexus3 /home/alone/nexus-data:/nexus-dataè¡¨ç¤ºæ•°æ®å­˜å‚¨ç›®å½• æ­å»ºFTPæœåŠ¡å™¨ä¿®æ”¹sshç«¯å£vim &#x2F;etc&#x2F;ssh&#x2F;sshd_configä¿®æ”¹Port 2222é‡å¯æœåŠ¡&#x2F;etc&#x2F;init.d&#x2F;ssh restart å®‰è£…v2ray123456789101112131415161718192021222324252627282930313233343536373839404142å¸è½½v2raysystemctl stop v2raysystemctl disable v2rayservice v2ray stopupdate-rc.d -f v2ray removerm -rf /etc/v2ray/* #(é…ç½®æ–‡ä»¶)rm -rf /usr/bin/v2ray/* #(ç¨‹åº)rm -rf /var/log/v2ray/* #(æ—¥å¿—)rm -rf /lib/systemd/system/v2ray.service #(systemd å¯åŠ¨é¡¹)rm -rf /etc/init.d/v2ray #(sysv å¯åŠ¨é¡¹)wget https://install.direct/go.shsudo bash go.shwget https://git.io/v2ray.sh## å¯åŠ¨systemctl start v2ray## åœæ­¢systemctl stop v2ray## é‡å¯systemctl restart v2ray## å¼€æœºè‡ªå¯systemctl enable v2rayæŸ¥çœ‹çŠ¶æ€service v2ray statuscenter osä½¿ç”¨## æŸ¥çœ‹å·²å¼€æ”¾ç«¯å£firewall-cmd --zone=public --list-ports## æ·»åŠ å¼€æ”¾ç«¯å£firewall-cmd --zone=public --add-port=80/tcp --permanent","tags":[{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"http://airshu.github.io/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"Rubyç‰ˆæœ¬ç®¡ç†å·¥å…·rbenv","date":"2023-06-17T02:29:30.106Z","path":"wiki/å·¥å…·è½¯ä»¶/rbenv/","text":"ç±»ä¼¼Javaã€Pythonã€Flutterï¼ŒRubyä¹Ÿè¿›è¡Œç‰ˆæœ¬ç®¡ç†ï¼Œä¸»æµæœ‰rvmã€rbenvä¸¤ç§æ–¹æ¡ˆï¼Œè¿™é‡Œå› ä¸ºJavaé€‰æ‹©jenvï¼Œçœ‹åå­—é€‰çš„rbenvã€‚å…¶å®å¤§å®¶çš„åŸç†éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡ä¿®æ”¹Pathæ¥æŒ‡å®šå¯¹åº”ç‰ˆæœ¬ å®‰è£…å’Œä½¿ç”¨12345678910111213141516171819202122232425262728293031323334brew install rbenv ruby-build# æ·»åŠ ä»¥ä¸‹å†…å®¹åˆ°zshrcæ–‡ä»¶ä¸­eval &quot;$(rbenv init - zsh)&quot;# æŸ¥çœ‹æœ€æ–°ç¨³å®šç‰ˆæœ¬å·rbenv install -l# åˆ—å‡ºæœ¬åœ°æ‰€æœ‰ç‰ˆæœ¬rbenv install -L# å®‰è£…å…·ä½“ç‰ˆæœ¬rbenv install 3.1.2# æŒ‡å®šå…¨å±€ç‰ˆæœ¬rbenv global 3.1.2# æŒ‡å®šå½“å‰ç›®å½•ä½¿ç”¨çš„ç‰ˆæœ¬rbenv local 3.1.2# å¸è½½å…·ä½“æŸä¸ªç‰ˆæœ¬rbenv uninstall 3.1.2# å±•ç¤ºå®‰è£…çš„ç‰ˆæœ¬ rbenv versions# å±•ç¤ºå½“å‰ä½¿ç”¨çš„ç‰ˆæœ¬rbenv version# å¸è½½rbenvrm -rf &quot;$(rbenv root)&quot;brew uninstall rbenv å‚è€ƒ https://github.com/rbenv/rbenv","tags":[],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"Mac OSå¸¸ç”¨å‘½ä»¤","date":"2023-06-17T02:29:30.091Z","path":"wiki/å·¥å…·è½¯ä»¶/Mac/MacOSå¸¸ç”¨å‘½ä»¤/","text":"12345678# æŸ¥çœ‹ç«¯å£ä½¿ç”¨sudo lsof -i :8088# æ€æ‰è¿›ç¨‹kill -9 pid","tags":[{"name":"mac","slug":"mac","permalink":"http://airshu.github.io/tags/mac/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"},{"name":"Mac","slug":"å·¥å…·è½¯ä»¶/Mac","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/Mac/"}]},{"title":"é«˜æ•ˆçš„ä½¿ç”¨Mac","date":"2023-06-17T02:29:30.091Z","path":"wiki/å·¥å…·è½¯ä»¶/Mac/é«˜æ•ˆçš„ä½¿ç”¨Mac/","text":"Effective use of XXXç³»åˆ— Effective use of Mac Effective use of iPhone Effective use of Windows Effective use of Firefox Effective use of Alfred å¯¹äºé«˜æ•ˆä½¿ç”¨çš„ç†è§£ æ‰€è°“çš„é«˜æ•ˆï¼Œåœ¨ç¬”è€…çœ‹æ¥å°±æ˜¯å¯ä»¥ä¸€æ­¥å®Œæˆçš„äº‹æƒ…ï¼Œä¸€å®šä¸è¦èŠ±ä¸¤æ­¥ã€‚è™½ç„¶Macæœ¬èº«çš„æ“ä½œå·²ç»æ¯”è¾ƒäººæ€§åŒ–äº†ï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤šåœ°æ–¹å¯ä»¥å€¼å¾—æˆ‘ä»¬ä¼˜åŒ–çš„ã€‚ä¸‹é¢åˆ—ä¸€äº›åœºæ™¯åˆ†æä¸€ä¸‹ã€‚ åœºæ™¯ä¸€ï¼šæƒ³åœ¨ä¸åŒè½¯ä»¶ä¹‹é—´å¿«é€Ÿåˆ‡æ¢ã€‚ä¸€èˆ¬çš„åšæ³•æ˜¯ä½¿ç”¨Command+Tabè¿›è¡Œå·²ç»æ‰“å¼€çš„è½¯ä»¶é—´åˆ‡æ¢ï¼Œä½¿ç”¨èšç„¦æœç´¢è½¯ä»¶åè¿›è¡Œæ‰“å¼€ã€‚å…¶å®å¯ä»¥ä½¿ç”¨å¿«æ·é”®è¿›è¡Œåˆ‡æ¢ï¼Œå‚è€ƒAlfredçš„ç”¨æ³•ã€‚ åœºæ™¯äºŒï¼šæ¯”å¦‚å½“å‰åœ¨æ–‡æœ¬ç¼–è¾‘å™¨é¡µé¢å†™æ–‡ç« ï¼Œçªç„¶æƒ³åˆ°æŸä¸ªä¸œè¥¿éœ€è¦å»ç™¾åº¦æœç´¢ä¸€ä¸‹ã€‚ä¸€èˆ¬çš„åšæ³•æ˜¯ï¼Œä½¿ç”¨Command+Tabåˆ‡æ¢åˆ°æµè§ˆå™¨ï¼Œåœ¨æµè§ˆå™¨ä¸­æ–°å»ºtabé¡µï¼Œè¾“å…¥baidu.comï¼Œè¾“å…¥å…³é”®å­—ï¼Œè¿›è¡Œæœç´¢ã€‚è€Œä½¿ç”¨Alfredï¼Œåˆ™å¯ä»¥ä¼˜åŒ–ä¸ºï¼šAlt+spaceæ‰“å¼€Alfredæœç´¢æ¡†ï¼Œè¾“å…¥bd+ç©ºæ ¼ï¼Œè¾“å…¥å…³é”®å­—ï¼Œå›è½¦ï¼Œå³å¯è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨æœç´¢é¡µã€‚ åœºæ™¯ä¸‰ï¼šåœ¨åšå¤åˆ¶ç²˜è´´çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™æƒ³å¯¹ä»¥å‰å¤åˆ¶è¿‡çš„å†…å®¹è¿›è¡Œç²˜è´´ã€‚ åœºæ™¯å››ï¼šæœ‰ä¸€äº›ä½¿ç”¨ç‡éå¸¸é«˜çš„è¯ï¼Œæ¯”å¦‚QQå·ã€é‚®ç®±ã€æ‰‹æœºå·ã€èº«ä»½è¯å·ç­‰ä¿¡æ¯ï¼Œéœ€è¦ä¸åœçš„è¾“å…¥ï¼Œå¦‚æœå¯ä»¥åšåˆ°è¾“å…¥å‡ ä¸ªå…³é”®å­—å°±èƒ½å…¨éƒ¨è¾“å‡ºå²‚ä¸æ˜¯æå‡äº†å¾ˆå¤šæ—¶é—´ï¼Ÿ å¥½äº†ï¼Œä¸‹é¢æ­£å¼å¼€å§‹åŠ¨æ‰‹å§ï¼ æ­¤æ–‡è‡´åŠ›äºæé«˜ä½¿ç”¨æ•ˆç‡ï¼ŒåŸºæœ¬çš„æ“ä½œè¯·è¯»è€…è‡ªè¡Œé˜…è¯»å®˜æ–¹æ–‡æ¡£æˆ–å…¶ä»–æ–‡æ¡£ã€‚ Macçš„åŸºæœ¬ä¼˜åŒ–è®¿è¾¾çš„ä¼˜åŒ–æ˜¾ç¤ºéšè—æ–‡ä»¶æ–¹æ³•ä¸€ï¼š ä½¿ç”¨å¿«æ·é”®Command+Shift+. æ–¹æ³•äºŒï¼š ç»ˆç«¯ä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼Œè¿™ç§æ–¹å¼ä¼šé•¿ä¹…ç”Ÿæ•ˆã€‚ 1234éšè—defaults write com.apple.finder AppleShowAllFiles -boolean true;killall Finderæ˜¾ç¤ºdefaults write com.apple.finder AppleShowAllFiles -boolean false;killall Finder é¡¶éƒ¨æ æ˜¾ç¤ºå®Œæ•´è·¯å¾„å¯ä»¥é€šè¿‡åœ¨è®¿è¾¾ä¸­è®¾ç½®æ˜¾ç¤ºè·¯å¾„æ çš„æ–¹å¼æ˜¾ç¤ºï¼Œä¸è¿‡è¿™ç§æ–¹å¼ä¼šåœ¨è®¿è¾¾åº•éƒ¨å¤šä¸€æ ã€‚å¯ä»¥é€šè¿‡ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚ 123456æ˜¾ç¤ºå®Œæ•´è·¯å¾„defaults write com.apple.finder _FXShowPosixPathInTitle -bool TRUE;killall Finderéšè—å®Œæ•´è·¯å¾„defaults delete com.apple.finder _FXShowPosixPathInTitle;killall Finder æ ‡ç­¾çš„ä½¿ç”¨è¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½ï¼Œå°†æ–‡ä»¶&#x2F;æ–‡ä»¶å¤¹æ ‡è®°æˆä¸åŒçš„æ ‡ç­¾ï¼Œç„¶åé€šè¿‡ç‚¹å‡»æ ‡ç­¾æ¥å¿«é€Ÿå®šä½ã€‚å¯¹äºç›®å½•å±‚æ¬¡å¾ˆæ·±çš„æ–‡ä»¶éå¸¸æœ‰ç”¨ã€‚ ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œå³é”®æŸä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»æŸä¸ªæ ‡ç­¾å³å¯ã€‚æ ‡ç­¾ä¹Ÿå¯ä»¥è¿›è¡Œç®¡ç†ï¼Œæ ‡ç­¾çš„å›¾æ ‡ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œé€‰ä¸­æ ‡ç­¾æ ä¸­æŸä¸ªæ ‡ç­¾ï¼Œä½¿ç”¨command+control+ç©ºæ ¼ã€‚ å¯¹äºä½¿ç”¨é¢‘ç‡éå¸¸é«˜çš„æ–‡ä»¶å¤¹ï¼Œå¯ä»¥ç›´æ¥æ‹–æ‹½åˆ°ä¸ªäººæ”¶è—æ ï¼Œä¹Ÿå¯ä»¥æ‹–æ‹½åˆ°å·¥å…·æ  å¼€æœºå¯åŠ¨è„šæœ¬è®¾ç½®é¦–å…ˆåˆ›å»ºä¸€ä¸ªshellæ–‡ä»¶ï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚å®ç°ä¸€äº›é€»è¾‘ï¼Œæ¯”å¦‚ï¼š 123456789#å¼€æœºå¯åŠ¨è„šæœ¬# å¼€æœºéœ€è¦å¯åŠ¨çš„ç¨‹åºopen /Applications/DingTalk.appopen /Applications/QQ.app# å…¶ä»–æ“ä½œ#exit ç„¶åç»™è¿™ä¸ªæ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™ï¼Œchmod +x æ–‡ä»¶åã€‚ç„¶åè®¾ç½®æ‰“å¼€æ–¹å¼ä¸ºç»ˆç«¯ã€‚ ç„¶åæ‰“å¼€ç³»ç»Ÿåå¥½è®¾ç½®â€“&gt;ç”¨æˆ·ä¸ç¾¤ç»„â€“&gt;ç™»å½•é¡¹ï¼Œæ·»åŠ æ–°å»ºçš„shellæ–‡ä»¶ã€‚ Macä¸Šçš„æé«˜æ•ˆç‡çš„è½¯ä»¶Alfredï¼ˆç¥å™¨ï¼‰ç”±äºæ­¤è½¯ä»¶éå¸¸å¼ºå¤§ï¼Œå› æ­¤å•ç‹¬å†™ä¸€ç¯‡æ¥ä»‹ç»å®ƒï¼Œ[ç‚¹å‡»æŸ¥çœ‹]() switchhostï¼ˆhostsåˆ‡æ¢ï¼‰è¯¥è½¯ä»¶æ˜¯ç”¨æ¥åšhostsç®¡ç†çš„ï¼Œå¯¹äºç¨‹åºå‘˜æ¥è¯´éå¸¸å‹å¥½ï¼Œç”¨æ³•ä¹Ÿå¾ˆç®€å•ã€‚å¯ä»¥å»ºç«‹ä¸€ä¸ªä¸ªtabæ¥åˆ†ç»„ç®¡ç†ï¼Œæ¯ä¸ªtabå¯ä»¥çš„æ˜¾ç¤ºéšè—äº’ä¸å½±å“ã€‚ç‚¹å‡»è¡Œå·å¯ä»¥å¯¹è¯¥è¡Œè¿›è¡Œå¿«é€Ÿæ³¨é‡Šæˆ–è€…å–æ¶ˆæ³¨é‡Šã€‚ [img] iTermï¼ˆç»ˆç«¯çš„æ›¿ä»£å“ï¼‰é…ç½® èµ„æºç®¡ç†å™¨å·¥å…·Commander Oneä¸å®Œå–„çš„åœ°æ–¹ï¼š è·¯å¾„æ æ— æ³•ç›´æ¥ç¼–è¾‘ï¼Œä¸æ–¹ä¾¿ç›´æ¥è·³è½¬åˆ°æŸä¸ªè·¯å¾„ã€‚Total Commanderçš„è·¯å¾„æ˜¯å¯ç¼–è¾‘çš„ã€‚ æ— æ³•ç›´æ¥ä½¿ç”¨å¿«æ·é”®å°†å½“å‰é¡µé¢æ˜¾ç¤ºåˆ°å¦å¤–ä¸€æµ‹ã€‚Total Commanderå¯ä»¥ç›´æ¥ä½¿ç”¨Ctrl+â†â†’æ¥æ“ä½œã€‚ ä¸å¯é…ç½®ç¼–è¾‘æ‰€ä½¿ç”¨çš„è½¯ä»¶ï¼Œåªèƒ½ç”¨é»˜è®¤çš„ã€‚ BatterZipï¼ˆæ–‡ä»¶è§£å‹å‹ç¼©ï¼‰Sublime Textï¼ˆæ–‡ä»¶ç¼–è¾‘å™¨ï¼‰è½»é‡çº§æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¯é…ç½®æ€§å¾ˆå¼ºã€‚ CleanMyMacï¼ˆä¼˜åŒ–å·¥å…·ï¼‰Dashï¼ˆç¨‹åºå‘˜APIæŸ¥è¯¢å·¥å…·ï¼‰iShotï¼ˆæˆªå›¾ã€å½•å±å·¥å…·ï¼‰Commander Oneï¼ˆè®¿è¾¾æ›¿ä»£å“ï¼‰KeyCueï¼ˆæ˜¾ç¤ºå¿«æ·é”®ï¼‰Macå¸¸ç”¨å‘½ä»¤12345678910111213141516# finderä¸­æ ‡é¢˜æ æ˜¾ç¤ºå…¨è·¯å¾„~ defaults write com.apple.finder _FXShowPosixPathInTitle -bool TRUE;killall Finder# finderä¸­æ ‡é¢˜æ åªæ˜¾ç¤ºæ–‡ä»¶å¤¹åå­—~ defaults delete com.apple.finder _FXShowPosixPathInTitle;killall Finder# å…³é—­å£°éŸ³$ sudo nvram SystemAudioVolume=%80# å¦‚æœæƒ³è¦æ¢å¤æ­£å¸¸çš„å¼€æœºå£°éŸ³ï¼Œåªè¦åœ¨ç»ˆç«¯ä¸­å†æ¬¡è¾“å…¥å¦‚ä¸‹å‘½ä»¤å³å¯ï¼š$ sudo nvram -d SystemAudioVolumelsof -i:port æŸ¥è¯¢ç«¯å£å¯¹åº”çš„è¿›ç¨‹idkill pid æ€æ­»è¿›ç¨‹ å‚è€ƒ","tags":[{"name":"mac","slug":"mac","permalink":"http://airshu.github.io/tags/mac/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"},{"name":"Mac","slug":"å·¥å…·è½¯ä»¶/Mac","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/Mac/"}]},{"title":"Mac M1ä½¿ç”¨é—®é¢˜è®°å½•","date":"2023-06-17T02:29:30.090Z","path":"wiki/å·¥å…·è½¯ä»¶/Mac/Mac M1ä½¿ç”¨é—®é¢˜è®°å½•/","text":"Pythonå‘½ä»¤ä½¿ç”¨ä¸åŒCPUæ¶æ„ mach-o file, but is an incompatible architecture (have â€˜x86_64â€™, need â€˜arm64eâ€™) 12345# ä½¿ç”¨è‹¹æœæ¶æ„arch -arm64 python xxx.py# ä½¿ç”¨intelæ¶æ„arch -x86_64 python xxx.py æ³¨æ„ï¼šæœ‰æ—¶å€™ç»ˆç«¯å·¥å…·ä¼šè®¾ç½®å¼€å¯ç½—èµ›å¡”ï¼Œè¿™ä¸ªæ—¶å€™é»˜è®¤ä¼šä½¿ç”¨intelæ¶æ„çš„ã€‚","tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"èµ„æºå¤„ç†","date":"2023-06-17T02:29:30.088Z","path":"wiki/Python/PyQt/èµ„æºå¤„ç†/","text":"","tags":[{"name":"Qt","slug":"Qt","permalink":"http://airshu.github.io/tags/Qt/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"QListWidget","date":"2023-06-17T02:29:30.081Z","path":"wiki/Python/PyQt/QListWidget/","text":"ä¸€äº›æŠ€å·§è®©QListWidgetçš„é«˜åº¦è·Ÿç€å†…å®¹çš„é«˜åº¦å˜åŒ–12345678910111213141516from PySide import QtGui, QtCoreapp = QtGui.QApplication([])window = QtGui.QWidget()layout = QtGui.QVBoxLayout(window)list = QtGui.QListWidget()list.addItems([&#x27;Winnie Puh&#x27;, &#x27;Monday&#x27;, &#x27;Tuesday&#x27;, &#x27;Minnesota&#x27;, &#x27;Dracula Calista Flockhart Meningitis&#x27;, &#x27;Once&#x27;, &#x27;123345&#x27;, &#x27;Fin&#x27;])list.setHorizontalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)list.setVerticalScrollBarPolicy(QtCore.Qt.ScrollBarAlwaysOff)list.setFixedSize(list.sizeHintForColumn(0) + 2 * list.frameWidth(), list.sizeHintForRow(0) * list.count() + 2 * list.frameWidth())layout.addWidget(list)window.show()app.exec_() å‚è€ƒ https://stackoverflow.com/questions/6337589/qlistwidget-adjust-size-to-content","tags":[{"name":"Qt","slug":"Qt","permalink":"http://airshu.github.io/tags/Qt/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"emojiè¡¨æƒ…å¤„ç†","date":"2023-06-17T02:29:30.081Z","path":"wiki/Python/PyQt/emojiè¡¨æƒ…å¤„ç†/","text":"åœ¨QLabelä¸Šæ˜¾ç¤ºemojiè¡¨æƒ…ï¼Œwin10å’Œwin7æ˜¾ç¤ºçš„æ•ˆæœä¸ä¸€æ ·ï¼Œwin10èƒ½æ˜¾ç¤ºå‡ºå½©è‰²çš„ï¼Œä½†win7åªèƒ½æ˜¾ç¤ºé»‘ç™½è‰²ï¼Œä¸”æœ‰äº›è¡¨æƒ…ç”šè‡³ä¸èƒ½æ˜¾ç¤ºã€‚ ä¸åŒç³»ç»Ÿçš„å®ç°æ•ˆæœéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¦å®ç°ç»Ÿä¸€ï¼Œæœ€å¥½çš„æ–¹å¼å°±æ˜¯è‡ªå·±å®ç°ï¼Œé€šè¿‡å…¶unicodeå€¼å»ºç«‹ä¸€å¥—å¯¹åº”çš„å›¾ç‰‡ï¼Œæ˜¾ç¤ºçš„æ—¶å€™ï¼Œç›´æ¥ç»˜åˆ¶æœ¬åœ°çš„å›¾ç‰‡ã€‚è€Œä¸èµ°ç³»ç»Ÿæ¸²æŸ“ã€‚ å‚è€ƒ https://appuals.com/how-to-get-windows-10-emojis-on-windows-7-8/ è¿™ç¯‡æ–‡ç« è¯´æ˜win7æ˜¯ä¸æ”¯æŒçš„ç³»ç»Ÿæ˜¾ç¤ºå½©è‰²emojiçš„ https://github.com/carpedm20/emoji unicodeå€¼å’Œå¯¹åº”è¡¨æƒ…çš„å­—ç¬¦ä¸²ä¹‹é—´çš„äº’ç›¸è½¬æ¢ï¼Œæœ‰ä¸€äº›éæ ‡å‡†çš„emojiè¡¨æƒ…ï¼Œæ¯”å¦‚**:thumbs_up:**è¡¨ç¤º ğŸ‘ https://github.com/googlefonts/noto-emoji google å½©è‰²å­—ä½“åº“ https://github.com/DeeDeeG/noto-color-emoji-font","tags":[{"name":"PyQt","slug":"PyQt","permalink":"http://airshu.github.io/tags/PyQt/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"Qtä¸­åœ†å½¢å¤´åƒ","date":"2023-06-17T02:29:30.081Z","path":"wiki/Python/PyQt/åœ†å½¢å¤´åƒ/","text":"ä¸šåŠ¡éœ€æ±‚ä¸­ç»å¸¸éœ€è¦å¤´åƒæ˜¯åœ†å½¢çš„ï¼Œä¸€äº›æ•°å­—åº•éƒ¨æœ‰åœ†å½¢èƒŒæ™¯ï¼Œäºæ˜¯å°†å…¶æ•´ç†å‡ºæ¥ï¼Œä»¥ä¾¿ä»¥åæ–¹ä¾¿çš„ä½¿ç”¨ã€‚ 123456789101112131415161718192021class CircleThumbWiget(QWidget): def __init__(self, parent=None, radius=40): &quot;&quot;&quot; radius è¡¨ç¤ºè¿™ä¸ªåœ†å½¢æ§ä»¶çš„å¤§å° &quot;&quot;&quot; super(CircleThumbWiget, self).__init__(parent) self.imageLabel = QLabel(self) self.imageLabel.setScaledContents(True) self.imageLabel.setGeometry(0, 0, radius, radius) defaultPixmap = QPixmap(&quot;resources/icon/default_user.png&quot;) self.imageLabel.setPixmap(defaultPixmap) # è¿™é‡Œä½¿ç”¨ä¸€å¼ å‘¨è¾¹é€æ˜çš„åœ†å½¢çš„pngå›¾ç‰‡ img = QImage(&quot;resources/icon/default_user_mask.png&quot;) bg = QPixmap.fromImage(img.scaled(QSize(radius, radius), Qt.IgnoreAspectRatio)) palette = self.palette() palette.setBrush(QPalette.Background, QBrush(bg)) self.setPalette(palette) self.setMask(bg.mask()) def setPixmap(self, pixmap): self.imageLabel.setPixmap(pixmap) å¹³æ»‘çš„åœ†å½¢å¤´åƒ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283from PyQt5.QtCore import Qt, QRectfrom PyQt5.QtGui import QBrush, QImage, QPainter, QPixmap, QWindowfrom PyQt5.QtWidgets import QLabel, QVBoxLayout, QWidgetdef mask_image(imgdata, imgtype=&#x27;png&#x27;, size=64): &quot;&quot;&quot;Return a ``QPixmap`` from *imgdata* masked with a smooth circle. *imgdata* are the raw image bytes, *imgtype* denotes the image type. The returned image will have a size of *size* Ã— *size* pixels. &quot;&quot;&quot; # Load image and convert to 32-bit ARGB (adds an alpha channel): image = QImage.fromData(imgdata, imgtype) image.convertToFormat(QImage.Format_ARGB32) # Crop image to a square: imgsize = min(image.width(), image.height()) rect = QRect( (image.width() - imgsize) / 2, (image.height() - imgsize) / 2, imgsize, imgsize, ) image = image.copy(rect) # Create the output image with the same dimensions and an alpha channel # and make it completely transparent: out_img = QImage(imgsize, imgsize, QImage.Format_ARGB32) out_img.fill(Qt.transparent) # Create a texture brush and paint a circle with the original image onto # the output image: brush = QBrush(image) # Create texture brush painter = QPainter(out_img) # Paint the output image painter.setBrush(brush) # Use the image texture brush painter.setPen(Qt.NoPen) # Don&#x27;t draw an outline painter.setRenderHint(QPainter.Antialiasing, True) # Use AA painter.drawEllipse(0, 0, imgsize, imgsize) # Actually draw the circle painter.end() # We are done (segfault if you forget this) # Convert the image to a pixmap and rescale it. Take pixel ratio into # account to get a sharp image on retina displays: pr = QWindow().devicePixelRatio() pm = QPixmap.fromImage(out_img) pm.setDevicePixelRatio(pr) size *= pr pm = pm.scaled(size, size, Qt.KeepAspectRatio, Qt.SmoothTransformation) return pmclass Window(QWidget): &quot;&quot;&quot;Simple window that shows our masked image and text label.&quot;&quot;&quot; def __init__(self): super().__init__() imgpath = &quot;U:/xxx/logo.png&quot; imgdata = open(imgpath, &#x27;rb&#x27;).read() ext = imgpath.split(&quot;.&quot;)[-1] pixmap = mask_image(imgdata, ext) ilabel = QLabel() ilabel.setScaledContents(True) ilabel.setFixedWidth(26) ilabel.setFixedHeight(26) ilabel.setPixmap(pixmap) layout = QVBoxLayout() layout.addWidget(ilabel, 0, Qt.AlignCenter) self.setLayout(layout)if __name__ == &#x27;__main__&#x27;: import sys from PyQt5.QtWidgets import QApplication app = QApplication(sys.argv) w = Window() w.show() sys.exit(app.exec_()) å‚è€ƒ https://stefan.sofa-rockers.org/2018/05/04/how-to-mask-an-image-with-a-smooth-circle-in-pyqt5/","tags":[{"name":"Qt","slug":"Qt","permalink":"http://airshu.github.io/tags/Qt/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"å¿«æ·é”®å¤„ç†","date":"2023-06-17T02:29:30.081Z","path":"wiki/Python/PyQt/å¿«æ·é”®å¤„ç†/","text":"å±è”½alt+F4ç­‰å¿«æ·é”®12345678910111213141516171819202122232425262728class GlobalEventFilter(QAbstractNativeEventFilter): def __init__(self): super(GlobalEventFilter, self).__init__() def nativeEventFilter(self, event_type, sip_voidptr): if event_type == &quot;windows_generic_MSG&quot; or event_type == &quot;windows_dispatcher_MSG&quot;: msg = MSG.from_address(sip_voidptr.__init__()) if msg.message in [WM_KEYDOWN, WM_SYSKEYDOWN]: if VK_F4 == msg.wParam and win32api.GetKeyState(VK_MENU) &amp; 0xF000: return True, 1 # True ä»£è¡¨æˆ‘å¤„ç†äº†æ¶ˆæ¯ï¼Œä¸éœ€è¦Qtå¤„ç† elif VK_ESCAPE == msg.wParam: return True, 1 # å±è”½escé”® return False, 1class App(QApplication): def __init__(self, *args): super(App, self).__init__(*args) self.global_event_filter = GlobalEventFilter() self.intallNativeEventFilter(self.global_event_filter) def exit_app(self): self.removeNativeEventFilter(self.global_event_filter)","tags":[{"name":"PyQt","slug":"PyQt","permalink":"http://airshu.github.io/tags/PyQt/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"ç¼–è¯‘PyQt5","date":"2023-06-17T02:29:30.081Z","path":"wiki/Python/PyQt/ç¼–è¯‘PyQt5/","text":"ç›®å½•ï¼š å®˜æ–¹æ–‡æ¡£ç¿»è¯‘ ç¼–è¯‘MinGWç‰ˆæœ¬ ç¼–è¯‘VSç‰ˆæœ¬ ä¸‹è½½SIPSIPå¿…ç°åœ¨ç¼–è¯‘å’Œä½¿ç”¨PyQt5ä¹‹å‰å®‰è£…ã€‚ä½ å¯ä»¥ä»https://www.riverbankcomputing.com/software/sip/downloadä½¿ç”¨æœ€æ–°çš„å‘å¸ƒç‰ˆæœ¬çš„æºç ã€‚ SIPçš„å®‰è£…è¯´æ˜è¯·å‚é˜…http://pyqt.sourceforge.net/Docs/sip4/installation.html å½“ç¼–è¯‘v5.11æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬æ—¶ï¼Œä½ å¿…é¡»é…é¥°SIPæ¥åˆ›å»ºç§æœ‰çš„å¤‡ä»½ã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š python configure.py â€“sip-module PyQt5.sip â€“no-tools ä¸‹è½½PyQt5ä½ å¯ä»¥ä»https://www.riverbankcomputing.com/software/pyqt/download5ä¸‹è½½æœ€æ–°çš„æºç  å¦‚æœä½ ä½¿ç”¨å•†ä¸šç‰ˆçš„PyQt5ï¼Œåˆ™éœ€è¦è´­ä¹°å•†ä¸šæˆæƒï¼Œå¹¶ä¸‹è½½å±äºä½ çš„pyqt-commercial.sipæˆæƒæ–‡ä»¶ é…ç½®PyQt5è§£å‹åï¼Œä½ åº”è¯¥é˜…è¯»ç›¸åº”å¹³å°çš„READMEæ–‡ä»¶ã€‚ å¦‚æœä½ ä½¿ç”¨å•†ä¸šç‰ˆçš„PyQt5ï¼Œä½ å¿…é¡»å¤åˆ¶ä½ çš„pyqt-commercial.sipæˆæƒæ–‡ä»¶åˆ°sipæ–‡ä»¶å¤¹ï¼Œæˆ–è€…ä½¿ç”¨â€“license-dirå‚æ•°æŒ‡å®šã€‚ ä½ éœ€è¦ç¡®å®šä½ çš„ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®ã€‚ ä¸ºäº†é…ç½®æ„å»ºPyQt5ï¼Œä½ éœ€è¦è¿è¡Œä»¥ä¸‹è„šæœ¬ï¼š 1python3 configure.py è„šæœ¬å®Œæ•´çš„å‚æ•°å±æ€§å¦‚ä¸‹ï¼š -h, --help å±•ç¤ºå¸®åŠ©ä¿¡æ¯ --allow-sip-warnings 5.9.1ç‰ˆæœ¬çš„æ–°ç‰¹æ€§ã€‚ Normally any warning message generated by sip is treated as an error. This option causes warning messages to be considered non-fatal. It is normally only required if a later version of sip is being used that has deprecated a feature used by this version of PyQt5. --assume-shared Normally Qt is checked to see if it has been built as shared libraries. Some Linux distributions configure their Qt builds to make this check unreliable. This option ignores the result of the check and assumes that Qt has been built as shared libraries. --bindir pyuic5, pyrcc5 and pylupdate5å·¥å…·å°†ä¼šå®‰è£…åˆ°çš„ç›®å½•ã€‚ --concatenate The C++ source files for a Python module will be concatenated. This results in significantly reduced compilation times. Most, but not all, C++ compilers can handle the large files that result. See also the â€“concatenate-split option. --concatenate-split If the â€“concatenate option is used to concatenate the C++ source files then this option determines how many files are created. The default is 1. --configuration æŒ‡å®šé…ç½®æ–‡ä»¶ contains the configuration of the PyQt5 build to be used instead of dynamically introspecting the system and is typically used when cross-compiling. See Configuring with Configuration Files. --confirm-license ä½¿ç”¨æˆæƒè¯ä¹¦ Using this confirms that you accept the terms of the PyQt5 license. If it is omitted then you will be asked for confirmation during configuration. --dbus æ ¹æ®&#x2F;dbusç›®å½•æ‰¾åˆ°dbus-python.hå¤´æ–‡ä»¶ The dbus-python.h header file of the dbus-python package can be found in the directory&#x2F;dbus. --debug The PyQt5 modules will be built with debugging symbols. On Windows configure.py must be run using a debug version of Python. --designer-plugindir æŒ‡å®šQt Designerå®‰è£…ç›®å½• --destdir æŒ‡å®šPyQt5å®‰è£…ç›®å½•ã€‚é»˜è®¤å®‰è£…åœ¨Pythonçš„site-packagesç›®å½•ã€‚å¦‚æœä½ ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œåˆ™PYTHONPATHå¿…é¡»æŒ‡å®šåœ¨ The PyQt5 Python package will be installed in the directory. The default is the Python installationâ€™s site-packages directory. If you use this option then the PYTHONPATH environment variable must include. --disable 5.5.1æ–°ç‰¹æ€§ Normally all PyQt5 modules are enabled and are built if the corresponding Qt library can be found. This option will suppress the check for &gt;. The option may be specified any number of times. --disable-feature 5.10.1æ–°ç‰¹æ€§ A PyQt5 module may be configured differently depending on the corresponding Qt configuration. This takes the form of a set of features that may be disabled. Normally this is determined automatically. This option will explicitly disable the &gt; feature. The option may be specified any number of times. --enable Normally all PyQt5 modules are enabled and are built if the corresponding Qt library can be found. Using this option only those modules specifically enabled will be built. The option may be specified any number of times. Note that using this option suppresses the checks that are normally made to determine how the module should be configured, i.e. which features should be disabled. --license-dir æŒ‡å®šæˆæƒè¯ä¹¦çš„ç›®å½• The license files needed by the commercial version of PyQt5 can be found in the directory. --link-full-dll 5.8ç‰ˆæœ¬æ–°ç‰¹æ€§ On Windows the full Python API and the limited API (as used by PyQt) are implemented in different DLLs. Normally the limited DLL is linked (unless a debug version of the Python interpreter is being used to run configure.py). This option forces the full API DLL to be linked instead. --no-designer-plugin Qt Designer æ’ä»¶å°†ä¸ä¼šè¢«ç¼–è¯‘ --no-dist-info 5.11æ–°ç‰¹æ€§ This disables the creation of the PEP 376 .dist-info directory. Starting with this version a .dist-info directory is created. This contains meta-data about the installation including version information for dependent packages. It also means that pip can be used to uninstall the package. --no-docstrings PyQt5æ¨¡å—ä¸ä¼šåŒ…å«è‡ªåŠ¨äº§ç”Ÿçš„æ–‡æ¡£å­—ç¬¦ä¸² The PyQt5 modules will not contain automatically generated docstrings. --no-python-dbus The Qt support for the standard Python DBus bindings is disabled. --no-qml-plugin qmlscene æ’ä»¶ä¸ä¼šè¢«ç¼–è¯‘ --no-qsci-api The PyQt5.api QScintilla API file is not installed even if QScintilla does appear to be installed. --no-sip-files The .sip files for the PyQt5 modules will not be installed. --no-stubs New in version 5.6. The PEP 484 type hint stub files for the PyQt5 modules will not be installed. This option is ignored (and the stub files are not installed) for versions of Python earlier than v3.5. --no-tools New in version 5.3. The pyuic5, pyrcc5 and pylupdate5 tools will not be built. --no-timestamp Normally the header comments of each generated C&#x2F;C++ source file includes a timestamp corresponding to when the file was generated. This option suppresses the inclusion of the timestamp. --protected-is-public On certain platforms the size of PyQt5 modules can be significantly reduced by redefining the C++ protected keyword as public during compilation. This option enables this behaviour and is the default on Linux and macOS. --protected-not-public The default redefinition of protected to public during compilation on Linux and macOS is disabled. --pyuic5-interpreter is the name of the Python interpreter used in the pyuic5 wrapper. The default is platform dependent. --qmake Qtâ€™s qmake program is used to determine how your Qt installation is laid out. Normally qmake is found on your PATH. This option can be used to specify a particular instance of qmake to use. --qml-debug New in version 5.8. Enable the QML debugging infrastructure. This should not be enabled in a production environment. --qml-plugindir The Python plugin for qmlscene will be installed in the directory. --qsci-api The PyQt5.api QScintilla API file is installed even if QScintilla does not appear to be installed. This option is implied if the â€“qsci-api-destdir option is specified. --qsci-api-destdir The QScintilla API file will be installed in the python subdirectory of the api subdirectory of the directory. --qtconf-prefix New in version 5.6. A qt.conf file is embedded in the PyQt5.QtCore module with Prefix set to which is assumed to be relative to the directory that the PyQt5.QtCore module will be installed in. --sip The sip program is used to generate PyQt5â€™s C++ source code. Normally sip is found on your PATH. This option can be used to specify a particular instance of sip to use. --sip-incdir The sip.h header file can be found in the directory. --sipdir The .sip files for the PyQt5 modules will be installed in the directory. --spec The argument -spec SPEC will be passed to qmake. The default behaviour is platform specific. On Windows configure.py will choose the value that is correct for the version of Python that is being used. (However if you have built Python yourself then you may need to explicitly specify .) On macOS configure.py will try and avoid macx-xcode if possible.) --static The PyQt5 modules will be built as static libraries. This is useful when building a custom interpreter with the PyQt5 modules built in to the interpreter. --stubsdir New in version 5.6. The PEP 484 type hint stub files for the PyQt5 modules will be installed in the directory. By default they will be stored in the same directory where (by default) the corresponding extension modules would be installed. This option is ignored (and the stub files are not installed) for versions of Python earlier than v3.5. --sysroot New in version 5.3. is the name of an optional directory that replaces sys.prefix in the names of other directories (specifically those specifying where the various PyQt5 components will be installed and where the Python include and library directories can be found). It is typically used when cross-compiling or when building a static version of PyQt5. See Configuring with Configuration Files. --target-py-version New in version 5.3. is the major and minor version (e.g. 3.4) of the version of Python being targetted. By default the version of Python being used to run the configure.py script is used. It is typically used when cross-compiling. See Configuring with Configuration Files. --trace The generated PyQt5 modules contain additional tracing code that is enabled using SIPâ€™s sip.settracemask() function. --verbose Compiler commands and any output issued during configuration is displayed instead of being suppressed. Use this if configure.py is having problems to see what exactly is going wrong. --version æ˜¾ç¤ºç‰ˆæœ¬å· ç¼–è¯‘PyQt5make make install é…ç½®é…ç½®æ–‡ä»¶é…ç½®æ–‡ä»¶çš„æ ¼å¼å¦‚ä¸‹ï¼š ä½¿ç”¨[]æ¥è¡¨ç¤ºä¸€éƒ¨åˆ†çš„åå­— é…ç½®çš„æ¡ç›®ä¸ºå•ä¸€çš„è¡Œï¼Œç”¨&#x3D;åˆ†å¼€çš„é”®å€¼å¯¹ åœ¨å€¼ä¸­å¯ä»¥ä½¿ç”¨%(name)çš„æ–¹å¼æ¥åµŒå¥—å…¶ä»–çš„å€¼ æ³¨é‡Šéœ€è¦ä»¥#å¼€å¤´ ç©ºç™½è¡Œè¢«å¿½ç•¥ é…ç½®æ–‡ä»¶é€šè¿‡å®šä¹‰ä¸åŒçš„[]éƒ¨åˆ†æ¥ä½¿ç”¨ä¸åŒçš„ç‰ˆæœ¬ã€‚configure.pyå°†ä¼šé€‰æ‹©å¯¹åº”çš„Qtç‰ˆæœ¬ã€‚æ¯”å¦‚ï¼Œå¦‚æœé…ç½®æ–‡ä»¶åŒ…å«Qt v5.1å’ŒQt v5.3ï¼Œä½ ä½¿ç”¨Qt v5.2.1ï¼Œåˆ™ä¼šé€‰æ‹©Qt v5.1çš„ç‰ˆæœ¬ã€‚ configure.pyæä¾›äº†ä»¥ä¸‹é¢„åˆ¶å˜é‡ï¼š py_major å¯¹åº”Pythonå®‰è£…æœ€å¤§çš„ç‰ˆæœ¬ py_minor å¯¹åº”Pythonå®‰è£…æœ€å°çš„ç‰ˆæœ¬ sysroot ç³»ç»Ÿæ ¹ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨â€“sysrooté€‰é¡¹æŒ‡å®š ä¸‹é¢æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶çš„å®ä¾‹ï¼š # The target Python installation. py_platform = linux py_inc_dir = %(sysroot)/usr/include/python%(py_major).%(py_minor) py_pylib_dir = %(sysroot)/usr/lib/python%(py_major).%(py_minor)/config py_pylib_lib = python%(py_major).%(py_minor)mu # The target PyQt installation. pyqt_module_dir = %(sysroot)/usr/lib/python%(py_major)/dist-packages pyqt_bin_dir = %(sysroot)/usr/bin pyqt_sip_dir = %(sysroot)/usr/share/sip/PyQt5 pyuic_interpreter = /usr/bin/python%(py_major).%(py_minor) pyqt_disabled_features = PyQt_Desktop_OpenGL PyQt_qreal_double # Qt configuration common to all versions. qt_shared = True [Qt 5.1] pyqt_modules = QtCore QtDBus QtDesigner QtGui QtHelp QtMultimedia QtMultimediaWidgets QtNetwork QtOpenGL QtPrintSupport QtQml QtQuick QtSensors QtSerialPort QtSql QtSvg QtTest QtWebKit QtWebKitWidgets QtWidgets QtXmlPatterns _QOpenGLFunctions_ES2 ä¸‹é¢çš„å€¼å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šï¼š qt_shared è®¾ç½®Qtæ˜¯å¦æ˜¯åŠ¨æ€å…±äº«æ–‡ä»¶ï¼Œé»˜è®¤å€¼ä¸ºFalse py_platform Pythonç›®æ ‡å¹³å° py_debug is set if a debug version of the target Python is being used. py_inc_dir is the target Python include directory, i.e. the directory containing the Python.h file. py_pylib_dir is the target Python library directory. py_pylib_lib is the target Python interpreter library. It should not include any platform-specific prefix or suffix. pyqt_disabled_features is the space separated list of features (as defined by SIPâ€™s %Feature directive) that should be disabled. pyqt_module_dir is the target directory where the PyQt5 modules will be installed. It can be overridden by the â€“destdir option. pyqt_modules is the space separated list of PyQt5 modules that will be built. It can be overridden by the â€“enable option. pyqt_bin_dir is the name of the target directory where the PyQt5 related executables will be installed. It can be overridden by the â€“bindir option. pyqt_sip_dir is the name of the target directory where the PyQt5 .sip files will be installed. It can be overridden by the â€“sipdir option. pyuic_interpreter is the name of the Python interpreter (as it would be called from the target system) that will be used to run pyuic5. It can be overridden by the â€“pyuic5-interpreter option. å‚è€ƒ http://pyqt.sourceforge.net/Docs/PyQt5/installation.html","tags":[{"name":"PyQt5","slug":"PyQt5","permalink":"http://airshu.github.io/tags/PyQt5/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"ç¼–è¯‘QtWebEngine","date":"2023-06-17T02:29:30.081Z","path":"wiki/Python/PyQt/ç¼–è¯‘QtWebEngine/","text":"ç”±äºQtWebEngineæœ¬èº«å¹¶ä¸æ”¯æŒH.264ç¼–ç çš„éŸ³è§†é¢‘ï¼Œç°è‡ªè¡Œç¼–è¯‘ï¼Œæ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹ï¼š ä¾èµ–å‡†å¤‡VS2015 Update3 ä¸‹è½½åœ°å€ å®‰è£…Qt 5.10.1ï¼šå®‰è£…çš„æ—¶å€™é€‰æ‹©å¸¦æºç  ä¸‹è½½åœ°å€ å®‰è£…Python 2.7.5ä»¥ä¸Šç‰ˆæœ¬ ä¸‹è½½åœ°å€ Perl ä¸‹è½½åœ°å€ Bisonå’ŒFlex ä¸‹è½½åœ°å€ Gperf ä¸‹è½½åœ°å€ Windows SDK è¦æ±‚10.0.10586ç‰ˆæœ¬ä»¥ä¸Š ç¯å¢ƒå‡†å¤‡å¦‚æœå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼Œåˆ™å°†ç³»ç»Ÿè¯­è¨€è®¾ç½®ä¸ºè‹±æ–‡ 1ninja: build stopped: subcommand failed. NMAKE : fatal error U1077: &#x27;call&#x27; : return code &#x27;0x1&#x27; Stop. NMAKE : fatal error U1077: &#x27;&quot;C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.14.26428\\bin\\HostX64\\x64\\nmake.exe&quot;&#x27; : return code &#x27;0x2&#x27; Stop. NMAKE : fatal error U1077: &#x27;(&#x27; : return code &#x27;0x2&#x27; Stop. NMAKE : fatal error U1077: &#x27;cd&#x27; : return code &#x27;0x2&#x27; Stop. NMAKE : fatal error U1077: &#x27;cd&#x27; : return code &#x27;0x2&#x27; Stop ç¼–è¯‘rem è¿è¡ŒVCç¯å¢ƒ &quot;D:\\Program Files (x86)\\Microsoft Visual Studio 14.0\\VC\\bin\\vcvars32.bat&quot; set PYTHON_PATH=D:\\Python\\Python27-32 set PERL_PATH=E:\\Perl\\bin set Bison_Flex_PATH=D:\\Qt\\Qt5.10.1\\5.10.1\\build_depends\\win_flex_bison set Gperf_PATH=D:\\Qt\\Qt5.10.1\\5.10.1\\build_depends\\gperf-3.0.1-bin\\bin set PATH=%PYTHON_PATH%;%PERL_PATH%;%Bison_Flex_PATH%;%Gperf_PATH%;%PATH% rem é…ç½® &quot;D:\\Qt\\Qt5.10.1\\5.10.1\\msvc2015\\bin\\qmake.exe&quot; -- -webengine-proprietary-codecs rem ç¼–è¯‘ã€å®‰è£… nmake &amp;&amp; namek install å‚è€ƒ https://wiki.qt.io/Building_Qt_5_from_Git http://doc.qt.io/qt-5/build-sources.html http://doc.qt.io/qt-5/windows-requirements.html https://www.pressc.cn/1044.html https://blog.afach.de/?page_id&#x3D;399","tags":[{"name":"Qt QtWebEngine","slug":"Qt-QtWebEngine","permalink":"http://airshu.github.io/tags/Qt-QtWebEngine/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"Qtè§†å›¾æ¨¡å‹","date":"2023-06-17T02:29:30.081Z","path":"wiki/Python/PyQt/è§†å›¾æ¨¡å‹/","text":"æ•°æ®ï¼ˆDataï¼‰ï¼šæ˜¯å®é™…çš„æ•°æ®ï¼Œå¦‚æ•°æ®åº“çš„ä¸€ä¸ªæ•°æ®è¡¨æˆ–SQLæŸ¥è¯¢ç»“æœï¼Œå†…å­˜ä¸­çš„ä¸€ä¸ª StringListï¼Œæˆ–ç£ç›˜æ–‡ä»¶ç»“æ„ç­‰ã€‚ è§†å›¾æˆ–è§†å›¾ç»„ä»¶ï¼ˆViewï¼‰ï¼šæ˜¯å±å¹•ä¸Šçš„ç•Œé¢ç»„ä»¶ï¼Œè§†å›¾ä»æ•°æ®æ¨¡å‹è·å¾—æ¯ä¸ªæ•°æ®é¡¹çš„æ¨¡å‹ç´¢å¼•ï¼ˆmodel indexï¼‰ï¼Œé€šè¿‡æ¨¡å‹ç´¢å¼•è·å–æ•°æ®ï¼Œç„¶åä¸ºç•Œé¢ç»„ä»¶æä¾›æ˜¾ç¤ºæ•°æ®ã€‚Qt æä¾›ä¸€äº›ç°æˆçš„æ•°æ®è§†å›¾ç»„ä»¶ï¼Œå¦‚ QListViewã€QTreeView å’Œ QTableView ç­‰ã€‚ æ¨¡å‹æˆ–æ•°æ®æ¨¡å‹ï¼ˆModelï¼‰ï¼šä¸å®é™…æ•°æ®é€šä¿¡ï¼Œå¹¶ä¸ºè§†å›¾ç»„ä»¶æä¾›æ•°æ®æ¥å£ã€‚å®ƒä»åŸå§‹æ•°æ®æå–éœ€è¦çš„å†…å®¹ï¼Œç”¨äºè§†å›¾ç»„ä»¶è¿›è¡Œæ˜¾ç¤ºå’Œç¼–è¾‘ã€‚Qt ä¸­æœ‰ä¸€äº›é¢„å®šä¹‰çš„æ•°æ®æ¨¡å‹ï¼Œå¦‚ QStringListModel å¯ä½œä¸º StringList çš„æ•°æ®æ¨¡å‹ï¼ŒQSqlTableModel å¯ä»¥ä½œä¸ºæ•°æ®åº“ä¸­ä¸€ä¸ªæ•°æ®è¡¨çš„æ•°æ®æ¨¡å‹ã€‚ å§”æ‰˜ï¼ˆDelegateï¼‰ï¼šæ ¹æ®æ•°æ®ç»˜åˆ¶UI æ¨¡å‹ã€è§†å›¾å’Œä»£ç†ä¹‹é—´ä½¿ç”¨ä¿¡å·å’Œæ§½é€šä¿¡ã€‚å½“æºæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ•°æ®æ¨¡å‹å‘å°„ä¿¡å·é€šçŸ¥è§†å›¾ç»„ä»¶ï¼›å½“ç”¨æˆ·åœ¨ç•Œé¢ä¸Šæ“ä½œæ•°æ®æ—¶ï¼Œè§†å›¾ç»„ä»¶å‘å°„ä¿¡å·è¡¨ç¤ºè¿™äº›æ“ä½œä¿¡æ¯ï¼›å½“ç¼–è¾‘æ•°æ®æ—¶ï¼Œä»£ç†å‘å°„ä¿¡å·å‘ŠçŸ¥æ•°æ®æ¨¡å‹å’Œè§†å›¾ç»„ä»¶ç¼–è¾‘å™¨çš„çŠ¶æ€ã€‚ è§†å›¾è§†å›¾ç»„ä»¶ï¼ˆViewï¼‰å°±æ˜¯æ˜¾ç¤ºæ•°æ®æ¨¡å‹çš„æ•°æ®çš„ç•Œé¢ç»„ä»¶ï¼ŒQt æä¾›çš„è§†å›¾ç»„ä»¶å¦‚ä¸‹ï¼š QListViewï¼šç”¨äºæ˜¾ç¤ºå•åˆ—çš„åˆ—è¡¨æ•°æ®ï¼Œé€‚ç”¨äºä¸€ç»´æ•°æ®çš„æ“ä½œã€‚ QTreeViewï¼šç”¨äºæ˜¾ç¤ºæ ‘çŠ¶ç»“æ„æ•°æ®ï¼Œé€‚ç”¨äºæ ‘çŠ¶ç»“æ„æ•°æ®çš„æ“ä½œã€‚ QTableViewï¼šç”¨äºæ˜¾ç¤ºè¡¨æ ¼çŠ¶æ•°æ®ï¼Œé€‚ç”¨äºäºŒç»´è¡¨æ ¼å‹æ•°æ®çš„æ“ä½œã€‚ QColumnViewï¼šç”¨å¤šä¸ªQListViewæ˜¾ç¤ºæ ‘çŠ¶å±‚æ¬¡ç»“æ„ï¼Œæ ‘çŠ¶ç»“æ„çš„ä¸€å±‚ç”¨ä¸€ä¸ªQListViewæ˜¾ç¤ºã€‚ QHeaderViewï¼šæä¾›è¡Œè¡¨å¤´æˆ–åˆ—è¡¨å¤´çš„è§†å›¾ç»„ä»¶ï¼Œå¦‚QTableViewçš„è¡Œè¡¨å¤´å’Œåˆ—è¡¨å¤´ã€‚ æ¨¡å‹åœ¨ model&#x2F;viewæ¶æ„ä¸­ï¼Œmodelæä¾›ä¸€ç§æ ‡å‡†æ¥å£ï¼Œä¾›è§†å›¾å’Œå§”æ‰˜è®¿é—®æ•°æ®ã€‚åœ¨Qtä¸­ï¼Œè¿™ä¸ªæ¥å£ç”±QAbstractItemModelç±»è¿›è¡Œå®šä¹‰ã€‚ä¸ç®¡åº•å±‚æ•°æ®æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Œåªè¦æ˜¯QAbstractItemModelçš„å­ç±»ï¼Œéƒ½æä¾›ä¸€ç§è¡¨æ ¼å½¢å¼çš„å±‚æ¬¡ç»“æ„ã€‚è§†å›¾åˆ©ç”¨ç»Ÿä¸€çš„è½¬æ¢æ¥è®¿é—®æ¨¡å‹ä¸­çš„æ•°æ®ã€‚ ä¸‹é¢æ˜¯å„ç§modelçš„ç»„ç»‡ç¤ºæ„å›¾ã€‚æˆ‘ä»¬åˆ©ç”¨æ­¤å›¾æ¥ç†è§£ä»€ä¹ˆå«â€œä¸€ç§è¡¨æ ¼å½¢å¼çš„å±‚æ¬¡ç»“æ„â€ã€‚ List Modelè™½ç„¶æ˜¯çº¿æ€§çš„åˆ—è¡¨ï¼Œä¹Ÿæœ‰ä¸€ä¸ª Root Itemï¼ˆæ ¹èŠ‚ç‚¹ï¼‰ï¼Œä¹‹ä¸‹æ‰æ˜¯å‘ˆçº¿æ€§çš„ä¸€ä¸ªä¸ªæ•°æ®ï¼Œè€Œè¿™äº›æ•°æ®å®é™…å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªåªæœ‰ä¸€åˆ—çš„è¡¨æ ¼ï¼Œä½†æ˜¯å®ƒæ˜¯æœ‰å±‚æ¬¡çš„ï¼Œå› ä¸ºæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚Table Model å°±æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œåªæ˜¯ä¹Ÿå­˜åœ¨ä¸€ä¸ªæ ¹èŠ‚ç‚¹ã€‚Tree Model ä¸»è¦é¢å‘å±‚æ¬¡æ•°æ®ï¼Œè€Œæ¯ä¸€å±‚æ¬¡éƒ½å¯ä»¥éƒ½å¾ˆå¤šåˆ—ï¼Œå› æ­¤ä¹Ÿæ˜¯ä¸€ä¸ªå¸¦æœ‰å±‚æ¬¡çš„è¡¨æ ¼ã€‚ ä¸ºäº†èƒ½å¤Ÿä½¿å¾—æ•°æ®çš„æ˜¾ç¤ºåŒå­˜å‚¨åˆ†ç¦»ï¼Œæˆ‘ä»¬å¼•å…¥æ¨¡å‹ç´¢å¼•ï¼ˆmodel indexï¼‰çš„æ¦‚å¿µã€‚é€šè¿‡ç´¢å¼•ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®æ¨¡å‹çš„ç‰¹å®šå…ƒç´ çš„ç‰¹å®šéƒ¨åˆ†ã€‚è§†å›¾å’Œå§”æ‰˜ä½¿ç”¨ç´¢å¼•æ¥è¯·æ±‚æ‰€éœ€è¦çš„æ•°æ®ã€‚ç”±æ­¤å¯ä»¥çœ‹å‡ºï¼Œåªæœ‰æ¨¡å‹è‡ªå·±éœ€è¦çŸ¥é“å¦‚ä½•è·å¾—æ•°æ®ï¼Œæ¨¡å‹æ‰€ç®¡ç†çš„æ•°æ®ç±»å‹å¯ä»¥ä½¿ç”¨é€šç”¨çš„æ–¹å¼è¿›è¡Œå®šä¹‰ã€‚ç´¢å¼•ä¿å­˜æœ‰åˆ›å»ºçš„å®ƒçš„é‚£ä¸ªæ¨¡å‹çš„æŒ‡é’ˆï¼Œè¿™ä½¿å¾—åŒæ—¶æ“ä½œå¤šä¸ªæ¨¡å‹æˆä¸ºå¯èƒ½ã€‚ 1QAbstractItemModel *model = index.model(); æ¨¡å‹ç´¢å¼•æä¾›äº†æ‰€éœ€è¦çš„ä¿¡æ¯çš„ä¸´æ—¶ç´¢å¼•ï¼Œå¯ä»¥ç”¨äºé€šè¿‡æ¨¡å‹å–å›æˆ–è€…ä¿®æ”¹æ•°æ®ã€‚ç”±äºæ¨¡å‹éšæ—¶å¯èƒ½é‡æ–°ç»„ç»‡å…¶å†…éƒ¨çš„ç»“æ„ï¼Œå› æ­¤æ¨¡å‹ç´¢å¼•å¾ˆå¯èƒ½å˜æˆä¸å¯ç”¨çš„ï¼Œæ­¤æ—¶ï¼Œå°±ä¸åº”è¯¥ä¿å­˜è¿™äº›æ•°æ®ã€‚å¦‚æœä½ éœ€è¦é•¿æœŸæœ‰æ•ˆçš„æ•°æ®ç‰‡æ®µï¼Œå¿…é¡»åˆ›å»ºæŒä¹…ç´¢å¼•ã€‚æŒä¹…ç´¢å¼•ä¿è¯å…¶å¼•ç”¨çš„æ•°æ®åŠæ—¶æ›´æ–°ã€‚ä¸´æ—¶ç´¢å¼•ï¼ˆä¹Ÿå°±æ˜¯é€šå¸¸ä½¿ç”¨çš„ç´¢å¼•ï¼‰ç”±QModelIndexç±»æä¾›ï¼ŒæŒä¹…ç´¢å¼•åˆ™æ˜¯QPersistentModelIndexç±»ã€‚ ä¸ºäº†å®šä½æ¨¡å‹ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦ä¸‰ä¸ªå±æ€§ï¼šè¡Œå·ã€åˆ—å·ä»¥åŠçˆ¶ç´¢å¼•ã€‚ æˆ‘ä»¬å‰é¢ä»‹ç»è¿‡æ¨¡å‹çš„åŸºæœ¬å½¢å¼ï¼šæ•°æ®ä»¥äºŒç»´è¡¨çš„å½¢å¼è¿›è¡Œå­˜å‚¨ã€‚æ­¤æ—¶ï¼Œä¸€ä¸ªæ•°æ®å¯ä»¥ç”±è¡Œå·å’Œåˆ—å·è¿›è¡Œå®šä½ã€‚æ³¨æ„ï¼Œæˆ‘ä»¬ä»…ä»…æ˜¯ä½¿ç”¨â€œäºŒç»´è¡¨â€è¿™ä¸ªåè¯ï¼Œå¹¶ä¸æ„å‘³ç€æ¨¡å‹å†…éƒ¨çœŸçš„æ˜¯ä»¥äºŒç»´æ•°ç»„çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼›æ‰€è°“â€œè¡Œå·â€â€œåˆ—å·â€ï¼Œä¹Ÿä»…ä»…æ˜¯ä¸ºæ–¹ä¾¿æè¿°è¿™ç§å¯¹åº”å…³ç³»ï¼Œå¹¶ä¸çœŸçš„æ˜¯æœ‰è¡Œåˆ—ä¹‹åˆ†ã€‚é€šè¿‡æŒ‡å®šè¡Œå·å’Œåˆ—å·ï¼Œæˆ‘ä»¬å¯ä»¥å®šä½ä¸€ä¸ªå…ƒç´ é¡¹ï¼Œå–å‡ºå…¶ä¿¡æ¯ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬è·å¾—çš„æ˜¯ä¸€ä¸ªç´¢å¼•å¯¹è±¡ï¼š 123456QModelIndex index = model-&gt;index(row, column, ...);QModelIndex QAbstractItemModel::index(int row, int column, const QModelIndex &amp;parent=QModelIndex()) const åœ¨ä¸€ä¸ªç®€å•çš„è¡¨æ ¼ä¸­ï¼Œæ¯ä¸€ä¸ªé¡¹éƒ½å¯ä»¥ç”±è¡Œå·å’Œåˆ—å·ç¡®å®šã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€æä¾›ä¸¤ä¸ªå‚æ•°å³å¯è·å–åˆ°è¡¨æ ¼ä¸­çš„æŸä¸€ä¸ªæ•°æ®é¡¹ï¼š 123QModelIndex indexA = model-&gt;index(0, 0, QModelIndex());QModelIndex indexB = model-&gt;index(1, 1, QModelIndex());QModelIndex indexC = model-&gt;index(2, 1, QModelIndex()); å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å§‹ç»ˆæ˜¯ QModelIndex() åœ¨ç±»ä¼¼è¡¨æ ¼çš„è§†å›¾ä¸­ï¼Œæ¯”å¦‚åˆ—è¡¨å’Œè¡¨æ ¼ï¼Œè¡Œå·å’Œåˆ—å·è¶³ä»¥å®šä½ä¸€ä¸ªæ•°æ®é¡¹ã€‚ä½†æ˜¯ï¼Œå¯¹äºæ ‘å‹ç»“æ„ï¼Œä»…æœ‰ä¸¤ä¸ªå‚æ•°å°±ä¸è¶³å¤Ÿäº†ã€‚è¿™æ˜¯å› ä¸ºæ ‘å‹ç»“æ„æ˜¯ä¸€ä¸ªå±‚æ¬¡ç»“æ„ï¼Œè€Œå±‚æ¬¡ç»“æ„ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½æœ‰å¯èƒ½æ˜¯å¦å¤–ä¸€ä¸ªè¡¨æ ¼ã€‚æ‰€ä»¥ï¼Œæ¯ä¸€ä¸ªé¡¹éœ€è¦æŒ‡æ˜å…¶çˆ¶èŠ‚ç‚¹ã€‚å‰é¢è¯´è¿‡ï¼Œåœ¨æ¨¡å‹å¤–éƒ¨åªèƒ½ç”¨è¿‡ç´¢å¼•è®¿é—®å†…éƒ¨æ•°æ®ï¼Œå› æ­¤ï¼Œindex()å‡½æ•°è¿˜éœ€è¦ä¸€ä¸ª parent å‚æ•°ï¼š 1QModelIndex index = model-&gt;index(row, column, parent); å›¾ä¸­ï¼ŒA å’Œ C éƒ½æ˜¯æ¨¡å‹ä¸­çš„é¡¶çº§é¡¹ï¼š 12QModelIndex indexA = model-&gt;index(0, 0, QModelIndex());QModelIndex indexC = model-&gt;index(2, 1, QModelIndex()); A è¿˜æœ‰è‡ªå·±çš„å­é¡¹ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç è·å– B çš„ç´¢å¼•ï¼š 1QModelIndex indexB = model-&gt;index(1, 0, indexA); ç”±æ­¤æˆ‘ä»¬çœ‹åˆ°ï¼Œå¦‚æœåªæœ‰è¡Œå·å’Œåˆ—å·ä¸¤ä¸ªå‚æ•°ï¼ŒB çš„è¡Œå·æ˜¯ 1ï¼Œåˆ—å·æ˜¯ 0ï¼Œè¿™åŒä¸ A åŒçº§çš„è¡Œå·æ˜¯ 1ï¼Œåˆ—å·æ˜¯ 0 çš„é¡¹ç›¸åŒï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡ parent å±æ€§åŒºåˆ«å¼€æ¥ã€‚ ä»¥ä¸Šæˆ‘ä»¬è®¨è®ºäº†æœ‰å…³ç´¢å¼•çš„å®šä½ã€‚ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹æ¨¡å‹çš„å¦å¤–ä¸€ä¸ªéƒ¨åˆ†ï¼šæ•°æ®è§’è‰²ã€‚æ¨¡å‹å¯ä»¥é’ˆå¯¹ä¸åŒçš„ç»„ä»¶ï¼ˆæˆ–è€…ç»„ä»¶çš„ä¸åŒéƒ¨åˆ†ï¼Œæ¯”å¦‚æŒ‰é’®çš„æç¤ºä»¥åŠæ˜¾ç¤ºçš„æ–‡æœ¬ç­‰ï¼‰æä¾›ä¸åŒçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼ŒQt::DisplayRoleç”¨äºè§†å›¾çš„æ–‡æœ¬æ˜¾ç¤ºã€‚é€šå¸¸æ¥è¯´ï¼Œæ•°æ®é¡¹åŒ…å«ä¸€ç³»åˆ—ä¸åŒçš„æ•°æ®è§’è‰²ï¼Œè¿™äº›è§’è‰²å®šä¹‰åœ¨Qt::ItemDataRoleæšä¸¾ä¸­ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šç´¢å¼•ä»¥åŠè§’è‰²æ¥è·å¾—æ¨¡å‹æ‰€æä¾›çš„æ•°æ®ï¼š 1QVariant value = model-&gt;data(index, role); é€šè¿‡ä¸ºæ¯ä¸€ä¸ªè§’è‰²æä¾›æ°å½“çš„æ•°æ®ï¼Œæ¨¡å‹å¯ä»¥å‘Šè¯‰è§†å›¾å’Œå§”æ‰˜å¦‚ä½•å‘ç”¨æˆ·æ˜¾ç¤ºå†…å®¹ã€‚ä¸åŒç±»å‹çš„è§†å›¾å¯ä»¥é€‰æ‹©å¿½ç•¥è‡ªå·±ä¸éœ€è¦çš„æ•°æ®ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ æˆ‘ä»¬æ‰€éœ€è¦çš„é¢å¤–æ•°æ®ã€‚ æ€»ç»“ä¸€ä¸‹ï¼š æ¨¡å‹ä½¿ç”¨ç´¢å¼•æ¥æä¾›ç»™è§†å›¾å’Œå§”æ‰˜æœ‰å…³æ•°æ®é¡¹çš„ä½ç½®çš„ä¿¡æ¯ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œæ¨¡å‹ä¹‹å¤–çš„å¯¹è±¡æ— éœ€çŸ¥é“åº•å±‚çš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼› æ•°æ®é¡¹é€šè¿‡è¡Œå·ã€åˆ—å·ä»¥åŠçˆ¶é¡¹ä¸‰ä¸ªåæ ‡è¿›è¡Œå®šä½ï¼› æ¨¡å‹ç´¢å¼•ç”±æ¨¡å‹åœ¨å…¶å®ƒç»„ä»¶ï¼ˆè§†å›¾å’Œå§”æ‰˜ï¼‰è¯·æ±‚æ—¶æ‰ä¼šè¢«åˆ›å»ºï¼› å¦‚æœä½¿ç”¨index()å‡½æ•°è¯·æ±‚è·å¾—ä¸€ä¸ªçˆ¶é¡¹çš„å¯ç”¨ç´¢å¼•ï¼Œè¯¥ç´¢å¼•ä¼šæŒ‡å‘æ¨¡å‹ä¸­è¿™ä¸ªçˆ¶é¡¹ä¸‹é¢çš„æ•°æ®é¡¹ã€‚è¿™ä¸ªç´¢å¼•æŒ‡å‘è¯¥é¡¹çš„ä¸€ä¸ªå­é¡¹ï¼›å¦‚æœä½¿ç”¨index()å‡½æ•°è¯·æ±‚è·å¾—ä¸€ä¸ªçˆ¶é¡¹çš„ä¸å¯ç”¨ç´¢å¼•ï¼Œè¯¥ç´¢å¼•æŒ‡å‘æ¨¡å‹çš„æœ€é¡¶çº§é¡¹ï¼› è§’è‰²ç”¨äºåŒºåˆ†æ•°æ®é¡¹çš„ä¸åŒç±»å‹çš„æ•°æ®ã€‚ ä¸‹é¢å›åˆ°å‰é¢æˆ‘ä»¬æ›¾ç»è§è¿‡çš„æ¨¡å‹QFileSystemModelï¼Œçœ‹çœ‹å¦‚ä½•ä»æ¨¡å‹è·å–æ•°æ®ã€‚ 123QFileSystemModel *model = new QFileSystemModel;QModelIndex parentIndex = model-&gt;index(QDir::currentPath());int numRows = model-&gt;rowCount(parentIndex); åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†QFileSystemModelçš„å®ä¾‹ï¼Œä½¿ç”¨QFileSystemModelé‡è½½çš„index()è·å–ç´¢å¼•ï¼Œç„¶åä½¿ç”¨rowCount()å‡½æ•°è®¡ç®—å½“å‰ç›®å½•ä¸‹æœ‰å¤šå°‘æ•°æ®é¡¹ï¼ˆä¹Ÿå°±æ˜¯è¡Œæ•°ï¼‰ã€‚å‰é¢ä¸€ç« ä¸­è¿·è¿·ç³Šç³Šçš„ä»£ç ï¼Œç°åœ¨å·²ç»ç›¸å½“æ¸…æ¥šäº†ã€‚ ä¸ºç®€å•èµ·è§ï¼Œä¸‹é¢æˆ‘ä»¬åªå…³å¿ƒæ¨¡å‹ç¬¬ä¸€åˆ—ã€‚æˆ‘ä»¬éå†æ‰€æœ‰æ•°æ®ï¼Œå–å¾—ç¬¬ä¸€åˆ—ç´¢å¼•ï¼š 12for (int row = 0; row &lt; numRows; ++row) &#123; QModelIndex index = model-&gt;index(row, 0, parentIndex); æˆ‘ä»¬ä½¿ç”¨index()å‡½æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¯ä¸€è¡Œè¡Œå·ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€åˆ—ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯parentIndexï¼Œä¹Ÿå°±æ˜¯å½“å‰ç›®å½•ä½œä¸ºçˆ¶é¡¹ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¨¡å‹çš„data()å‡½æ•°è·å–æ¯ä¸€é¡¹çš„æ•°æ®ã€‚æ³¨æ„ï¼Œè¯¥å‡½æ•°è¿”å›å€¼æ˜¯QVariantï¼Œå®é™…æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥è½¬æ¢æˆQStringï¼š 1QString text = model-&gt;data(index, Qt::DisplayRole).toString();// ä½¿ç”¨ text æ•°æ® ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ˜¾ç¤ºäº†ä»æ¨¡å‹è·å–æ•°æ®çš„ä¸€äº›æœ‰ç”¨çš„å‡½æ•°ï¼š æ¨¡å‹çš„æ•°ç›®ä¿¡æ¯å¯ä»¥é€šè¿‡rowCount()å’ŒcolumnCount()è·å¾—ã€‚è¿™äº›å‡½æ•°éœ€è¦åˆ¶å®šçˆ¶é¡¹ï¼› ç´¢å¼•ç”¨äºè®¿é—®æ¨¡å‹ä¸­çš„æ•°æ®ã€‚æˆ‘ä»¬éœ€è¦åˆ©ç”¨è¡Œå·ã€åˆ—å·ä»¥åŠçˆ¶é¡¹ä¸‰ä¸ªå‚æ•°æ¥è·å¾—è¯¥ç´¢å¼•ï¼› å½“æˆ‘ä»¬ä½¿ç”¨QModelIndex()åˆ›å»ºä¸€ä¸ªç©ºç´¢å¼•ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬è·å¾—çš„å°±æ˜¯æ¨¡å‹ä¸­æœ€é¡¶çº§é¡¹ï¼› æ•°æ®é¡¹åŒ…å«äº†ä¸åŒè§’è‰²çš„æ•°æ®ã€‚ä¸ºè·å–ç‰¹å®šè§’è‰²çš„æ•°æ®ï¼Œå¿…é¡»æŒ‡å®šè¿™ä¸ªè§’è‰²ã€‚ QStringListModelã€QDirModelã€QFileSystemModelç­‰é¢„å®šä¹‰model QStandardItemModel å¯å½“ä½œåˆ—è¡¨æ¨¡å‹ã€è¡¨æ ¼æ¨¡å‹ã€æ ‘æ¨¡å‹æ¥ä½¿ç”¨çš„é€šç”¨æ¨¡å‹ QAbstractItemModelè‡ªå®šä¹‰æ¨¡å‹ QStandardItemModelå¸¸ç”¨API flags(const QModelIndex &amp;index):è¿”å›è¢«ç»™æ¨¡å‹ç´¢å¼•indexçš„æ ‡å¿— data(const QModelIndex &amp;index, int role &#x3D; Qt::DisplayRole):è¿”å›æ¨¡å‹ç´¢å¼•indexçš„åº•å±‚æ•°æ®ï¼ˆä¸€ä¸ªæ¨¡å‹ç´¢å¼•åŒ…æ‹¬æŸä¸€å…ƒç´ çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡Œï¼Œåˆ—ï¼Œä»¥åŠæ•°æ®ï¼‰ï¼Œç”¨äºè§†å›¾å’Œå§”æ‰˜è®¿é—®æ•°æ® headerData(int selection, Qt::Orientation orientation, int role &#x3D;Qt::DisplayRole):è¿”å›æŸéƒ¨åˆ†å¯¹åº”æ–¹å‘ä¸Šçš„è¡¨å¤´ ï¼Œä¸ºViewsæä¾›æ˜¾ç¤ºåœ¨Viewsé¡¶éƒ¨ï¼ˆå³æœ€ä¸Šæ–¹å’Œæœ€å·¦è¾¹ï¼‰çš„æ ‡è¯† rowCount(const QModelIndex &amp;parent&#x3D;QModelIndex()):è¿”å›è¢«ç»™çš„æ¨¡å‹ç´¢å¼•ä¸‹æœ‰å¤šå°‘è¡Œï¼Œè¿”å›çš„æ˜¯parentçš„å­©å­æ•°ã€‚è€Œä¸æ˜¯æ•´ä¸ªè¡Œæ•°ã€‚å¦‚æœæ²¡æœ‰å­å…ƒç´ ï¼Œåˆ™è¿”å›0ã€‚ columnCount(const QModelIndex &amp;parent&#x3D;QModelIndex()):è¿™ä¸ªå‡½æ•°é€šå¸¸ä¸ç»™å®šçš„parentæ— å…³ï¼Œæ‰€æ¶‰åŠçš„ç±»æœ‰å‡ åˆ—å°±è¿”å›å‡  setData(const QModelIndex &amp;index, const QVariant &amp;value, int role&#x3D;Qt::EditRole):ç”¨æ¥è®¾ç½®æ¨¡å‹ç´¢å¼•indexä¸­å­˜å‚¨çš„æ•°æ® setHeaderData(int section, Qt::Orientation orientation, const QVariant &amp;value, int role &#x3D; Qt::EditRole): insertRows(int position, int rows, const QModelIndex &amp;index &#x3D; QModelIndex()):è¿›è¡Œæ’å…¥æ“ä½œæ—¶ï¼Œå‰ååˆ†åˆ«éœ€è¦è°ƒç”¨beginInsertRows()å’ŒendInsertRows()å‡½æ•° å§”æ‰˜ï¼ˆDelegateï¼‰ä»£ç†å°±æ˜¯åœ¨è§†å›¾ç»„ä»¶ä¸Šä¸ºç¼–è¾‘æ•°æ®æä¾›ç¼–è¾‘å™¨ï¼Œå¦‚åœ¨è¡¨æ ¼ç»„ä»¶ä¸­ç¼–è¾‘ä¸€ä¸ªå•å…ƒæ ¼çš„æ•°æ®æ—¶ï¼Œç¼ºçœæ˜¯ä½¿ç”¨ä¸€ä¸ª QLineEdit ç¼–è¾‘æ¡†ã€‚ä»£ç†è´Ÿè´£ä»æ•°æ®æ¨¡å‹è·å–ç›¸åº”çš„æ•°æ®ï¼Œç„¶åæ˜¾ç¤ºåœ¨ç¼–è¾‘å™¨é‡Œï¼Œä¿®æ”¹æ•°æ®åï¼Œåˆå°†å…¶ä¿å­˜åˆ°æ•°æ®æ¨¡å‹ä¸­ã€‚ QAbstractltemDelegate æ˜¯æ‰€æœ‰ä»£ç†ç±»çš„åŸºç±»ï¼Œä½œä¸ºæŠ½è±¡ç±»ï¼Œå®ƒä¸èƒ½ç›´æ¥ä½¿ç”¨ã€‚å®ƒçš„ä¸€ä¸ªå­ç±» QStyledltemDelegateï¼Œæ˜¯ Qt çš„è§†å›¾ç»„ä»¶ç¼ºçœä½¿ç”¨çš„ä»£ç†ç±»ã€‚ QStyledItemDelegateå¸¸ç”¨API updateEditorGeometryï¼šè®¾ç½®ç¼–è¾‘å™¨editorçš„å°ºå¯¸å’Œä½ç½® painterï¼š ç»˜åˆ¶ç»™å®šæ¨¡å‹ç´¢å¼•indexæ‰€å¯¹åº”çš„é¡¹ setEditorDataï¼š ä½¿ç”¨ç»™å®šæ¨¡å‹ç´¢å¼•indexæ‰€å¯¹åº”çš„æ¨¡å‹é¡¹çš„æ•°æ®æ¥å¡«å……ç¼–è¾‘å™¨editor setModelDataï¼šä»ç¼–è¾‘å™¨editorä¸­è·å–æ•°æ®å¹¶è®¾ç½®ä¸ºç»™å®šæ¨¡å‹ç´¢å¼•indexæ‰€å¯¹åº”çš„æ¨¡å‹é¡¹çš„æ•°æ® setHintï¼š è¿”å›å§”æ‰˜éœ€è¦çš„ã€æ˜¾ç¤ºæˆ–ç¼–è¾‘ç»™å®šæ¨¡å‹ç´¢å¼•indexæ‰€ä»£è¡¨çš„é¡¹çš„å°ºå¯¸ updateEditorGeometryï¼š è®¾ç½®ç¼–è¾‘å™¨editorçš„å°ºå¯¸å’Œä½ç½® å®ä¾‹å‚è€ƒ https://doc.qt.io/qt-5/model-view-programming.html","tags":[{"name":"PyQt","slug":"PyQt","permalink":"http://airshu.github.io/tags/PyQt/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"PyQt5å¼€å‘å¿ƒå¾—","date":"2023-06-17T02:29:30.080Z","path":"wiki/Python/PyQt/PyQt5å¼€å‘å¿ƒå¾—/","text":"å…¶å®å¤§éƒ¨åˆ†çš„å®¢æˆ·ç«¯å¼€å‘éƒ½æœ‰å…±é€šæ€§ã€‚ä¸€å¥—GUI APIï¼ŒButtonã€Textã€Dialogç­‰ç­‰ï¼Œç»˜åˆ¶æœºåˆ¶ï¼Œäº‹ä»¶ä¼ é€’æœºåˆ¶ï¼Œéƒ½æ˜¯æ ¹æ®ä¸åŒå¹³å°çš„ç‰¹æ€§åšäº†å°è£…ã€‚ä½†å¼€å‘çš„æ—¶å€™ï¼Œç”¨æ³•æ˜¯ç±»ä¼¼çš„ã€‚è€ŒPythonç”±äºè¯­æ³•çš„ç®€æ˜“æ€§ï¼Œå¼€å‘æ•ˆç‡æ¯”ä½¿ç”¨C++ç‰ˆçš„Qté«˜å¾ˆå¤šã€‚æ‰€è°“çš„æ€§èƒ½æŸè€—å…¶å®åœ¨å¤§éƒ¨åˆ†çš„åº”ç”¨ä¸­æ˜¯å¯ä»¥å¿½ç•¥çš„ã€‚ åŸºç¡€ç»“æ„çš„æ­å»ºä¸ç®¡æ˜¯åšä¸€ä¸ªé¡¹ç›®è¿˜æ˜¯å¤šä¸ªé¡¹ç›®ï¼Œå‡†å¤‡ä¸€å¥—åŸºç¡€æ¡†æ¶ï¼Œå¯¹å¼€å‘æ•ˆç‡æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚è¿™ä¸ªåŸºç¡€æ¡†æ¶é€šå¸¸åŒ…æ‹¬ï¼š åŸºç¡€ç»“æ„ åŸºç¡€å·¥å…·ç±»ã€å·¥å…·å‡½æ•°ï¼šå­—ç¬¦ä¸²å¤„ç†ã€æ—¶é—´å¤„ç†ã€æ—¥æœŸå¤„ç†ã€çº¿ç¨‹å¤„ç†ã€ç½‘ç»œè¯·æ±‚ã€æ‹–æ‹½å·¥å…·ã€ç¼©æ”¾å·¥å…·ã€èµ„æºä¸‹è½½å·¥å…·ã€ åŸºç¡€æ§ä»¶ï¼šå¼¹çª—æç¤ºã€ç¡®è®¤æ¡†ã€webviewçš„å°è£…å’Œé€šè®¯æ¨¡å—ã€loadingæ¡†ã€å…¨å±€æ ·å¼å¤„ç† æ—¥å¿—å·¥å…·ï¼š æ•°æ®æ¨¡æ‹Ÿå·¥å…·ï¼šmock å•å…ƒæµ‹è¯•æ¡†æ¶ï¼š æ€§èƒ½åˆ†æå·¥å…·ï¼šåˆ†æä»£ç è´¨é‡ æ‰“åŒ…å·¥å…·ï¼šåˆ†å‘å®‰è£…åŒ… æ›´æ–°å·¥å…· å¼‚å¸¸æ•è·åˆ†æå·¥å…·ï¼šåˆ†æçº¿ä¸Šå¯èƒ½å­˜åœ¨çš„é—®é¢˜ é¡¹ç›®æ¡†æ¶çš„æ­å»ºï¼šåˆ†å±‚ã€æŠ½è±¡ã€è§£è€¦ã€MVCæ€æƒ³çš„ä½“ç°ã€‚éšç€ä¸šåŠ¡çš„å¢é•¿ï¼Œåœ¨é‡æ„ä»£ç çš„æ—¶å€™è¦éµå¾ªé«˜å†…èšã€ä½è€¦åˆçš„æ€æƒ³ã€‚ å…³äºçº¿ç¨‹çš„ä½¿ç”¨éšç€ä¸šåŠ¡çš„å¢é•¿ï¼Œé¡¹ç›®ä¼šè¶Šæ¥è¶Šå¤æ‚ï¼Œä¸å¯é¿å…çš„ä¼šä½¿ç”¨åˆ°å¤šçº¿ç¨‹ã€‚ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œè¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š çº¿ç¨‹è¦åŠæ—¶é‡Šæ”¾ æ¯”å¦‚æœ‰ä¸€ä¸ªåœºæ™¯ï¼Œç”¨æˆ·ç‚¹å‡»æŸä¸ªæŒ‰é’®ï¼Œéœ€è¦å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œç„¶åå°†æ•°æ®æ›´æ–°åˆ°æ–‡æœ¬æ¡†ä¸­ã€‚ä½ éœ€è¦åœ¨éUIçº¿ç¨‹ä¸­è¯·æ±‚httpæ¥å£ï¼Œæ”¶åˆ°æœåŠ¡å™¨å“åº”åï¼Œåˆ‡æ¢å›UIçº¿ç¨‹æ›´æ–°ã€‚ä½†æœ‰æ—¶å€™ç”±äºç½‘ç»œåŸå› ï¼Œå“åº”çš„æ—¶é—´è¾ƒé•¿ï¼Œåœ¨æ”¶åˆ°å“åº”ç»“æœæ—¶ï¼ŒUIå·²ç»è¢«é”€æ¯äº†ã€‚æ‰€ä»¥è¦æ³¨æ„åœ¨UIé”€æ¯çš„åŒæ—¶ï¼Œå¯¹åº”çš„çº¿ç¨‹éƒ½è¦è¿›è¡Œé‡Šæ”¾ã€‚åŒæ ·çš„åœºæ™¯è¿˜æœ‰ä¸‹è½½å™¨ï¼Œå„ç§å®šæ—¶æ“ä½œã€‚éƒ½è¦è¿›è¡ŒåŠæ—¶çš„æ¸…ç†ã€‚ æœ€å¥½èƒ½å°è£…å‡ ä¸ªå·¥å…·ç±»ã€å·¥å…·å‡½æ•°ï¼Œç»Ÿä¸€ç®¡ç†ã€‚ QTimeråˆå§‹åŒ–æ—¶å¸¦ä¸Šparentï¼Œåˆ›å»ºå’Œstartåœ¨åŒä¸€ä¸ªçº¿ç¨‹ Modelåˆå§‹åŒ–çš„æ—¶å€™éœ€è¦ä¼ å…¥parent å…³äºæ€§èƒ½è™½ç„¶å‰é¢è¯´æ€§èƒ½é—®é¢˜å¯ä»¥å¿½ç•¥ï¼Œä½†å¦‚æœä½ å¾ˆéšæ„çš„åœ¨ä¸»çº¿ç¨‹ä¸­åšä¸€äº›é¢‘ç¹çš„å¤æ‚çš„è¿ç®—ï¼ŒUIä¹Ÿæ˜¯ä¼šå¡é¡¿çš„ã€‚è¿™é‡Œä»‹ç»ä¸€ç‚¹è‡ªå·±çš„ç»éªŒã€‚ éUIæ“ä½œå°½é‡å…¨éƒ¨æ”¾åˆ°éUIçº¿ç¨‹å¤„ç†ã€‚ å¯¹äºéå¸¸é¢‘ç¹çš„æ“ä½œä½¿ç”¨é—´éš”ï¼Œæ¯”å¦‚1ç§’ä¸­è°ƒç”¨ä¸€æ¬¡ã€‚ç›´ç™½è¯´å°±æ˜¯é™ä½UIåˆ·æ–°çš„é¢‘ç‡ã€‚ ç”±äºpython GILçš„å­˜åœ¨ï¼Œå½“æŸäº›è®¡ç®—éœ€è¦æ¶ˆè€—è¾ƒå¤šCPUæ—¶ï¼Œéœ€è¦è€ƒè™‘æ˜¯å¦å°†å…¶ç§»åˆ°C&#x2F;C++ä¸­å¤„ç†ã€‚ ä½¿ç”¨æ›´ä¼˜ç§€çš„jsonå¤„ç†åº“ å…³äºç¨‹åºå´©æºƒhttp://enki-editor.org/2014/08/23/Pyqt_mem_mgmt.html https://stackoverflow.com/questions/11945183/what-are-good-practices-for-avoiding-crashes-hangs-in-pyqt http://python-camelot.s3.amazonaws.com/gpl/release/pyqt/doc/advanced/development.html å¸¸è§é—®é¢˜æ±‡æ€»libpng warning: iCCP: known incorrect sRGB profile UpdateLayeredWindowIndirect failed for ptDst&#x3D; ç¨‹åºä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œå…³é—­æŸä¸ªçª—å£ï¼Œä¼šé€ æˆæ•´ä¸ªç¨‹åºå´©æºƒã€‚crashrptæ•è·åˆ°çš„dumpæŒ‡å‘çš„æ˜¯Qtçš„æŸä¸ªå‡½æ•°ã€‚å¯æ— æ³•å®šä½åˆ°ä¸šåŠ¡å±‚çš„ä»£ç ã€‚åæ‰“åŒ…æˆdebugæ¨¡å¼ï¼Œåœ¨å´©æºƒçš„æ—¶å€™æ§åˆ¶å°è¾“å‡ºäº†ä»¥ä¸Šä¿¡æ¯ï¼Œgoogleè¿›è¡Œæœç´¢ï¼Œçœ‹åˆ°äº†è¿™é‡Œï¼Œæƒ³èµ·æ¥è¾¹æ¡†é˜´å½±çš„å®ç°å°±æ˜¯ä½¿ç”¨äº†QGraphicsDropShadowEffectæ»¤é•œã€‚å»æ‰åï¼Œæœç„¶æ²¡æœ‰å†å‡ºç°äº†ã€‚ å¦‚ä½•å½»åº•é”€æ¯QWidget close() åœ¨Qtä¸­ï¼Œæ¯ä¸ª QObject å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªlistï¼Œç”¨æ¥ä¿å­˜æ‰€æœ‰çš„ childrenï¼Œè¿˜æœ‰ä¸€ä¸ªæŒ‡é’ˆï¼Œä¿å­˜è‡ªå·±çš„parentã€‚å½“å®ƒè‡ªå·±ææ„æ—¶ï¼Œå®ƒä¼šå°†è‡ªå·±ä»parentçš„åˆ—è¡¨ä¸­åˆ é™¤ï¼Œå¹¶ä¸”ææ„æ‰æ‰€æœ‰çš„childrenã€‚ è°ƒç”¨close()æ–¹æ³•åé¦–å…ˆå®ƒä¼šå‘widgetå‘é€ä¸€ä¸ªå…³é—­äº‹ä»¶ï¼ˆQCloseEventï¼‰ã€‚å¦‚æœwidgetæ¥å—äº†å…³é—­äº‹ä»¶ï¼ˆQCloseEventï¼‰ï¼Œçª—å£å°†ä¼šéšè—ï¼ˆå®é™…ä¸Šè°ƒç”¨hide()ï¼‰ã€‚å¦‚æœwidgetä¸æ¥å—å…³é—­äº‹ä»¶ï¼Œé‚£ä¹ˆçª—å£å°†ä»€ä¹ˆä¹Ÿä¸åšã€‚é»˜è®¤æƒ…å†µä¸‹widgetä¼šæ¥å—å…³é—­äº‹ä»¶,æˆ‘ä»¬å¯ä»¥é‡å†™QCloseEventäº‹ä»¶ï¼Œå¯ä»¥é€‰æ‹©æ¥å—æˆ–è€…ä¸æ¥å—ã€‚ å¦‚æœwidgetè®¾ç½®äº†Qt::WA_DeleteOnCloseå±æ€§ï¼Œwidgetå°†ä¼šè¢«é‡Šæ”¾ã€‚ä¸ç®¡widgetæ˜¯å¦å¯è§ï¼Œå…³é—­äº‹ä»¶éƒ½ä¼šä¼ é€’ç»™widgetã€‚å³æ¥æ”¶åˆ°QCloseEventäº‹ä»¶åï¼Œé™¤äº†è°ƒç”¨hide()æ–¹æ³•å°†çª—å£éšè—ï¼ŒåŒæ—¶ä¼šè°ƒç”¨deleteLater()æ–¹æ³•å°†çª—å£é‡Šæ”¾æ‰ï¼Œä¸ä¼šå†å ç”¨èµ„æºã€‚ æ‰€ä»¥è¯´è°ƒç”¨close()å¹¶ä¸ä¸€å®šå°±ä¼šå°†çª—å£å¯¹è±¡é”€æ¯ã€‚è€Œåªæœ‰è®¾ç½®äº† Qt::WA_DeleteOnCloseå±æ€§æ‰ä¼šåˆ é™¤é”€æ¯ã€‚å¦‚æœè¿™ä¸ªå±æ€§æ²¡æœ‰è®¾ç½®ï¼Œclose()çš„ä½œç”¨å’Œhideï¼ˆï¼‰ï¼Œsetvisibleï¼ˆfalseï¼‰ä¸€æ ·ï¼Œåªä¼šéšè—çª—å£å¯¹è±¡è€Œå·²ï¼Œå¹¶ä¸ä¼šé”€æ¯è¯¥å¯¹è±¡ã€‚ deleteLater() èµ°Qtçš„äº‹ä»¶å¾ªç¯ï¼Œå»¶è¿Ÿåˆ é™¤ã€‚ sip.delete(widget) è°ƒç”¨äº†Qtçš„deleteæ¥åˆ é™¤å¯¹è±¡ QWidgetçš„Qt.WA_TranslucentBackgroundé»˜è®¤å€¼æ˜¯Falseã€‚ 123456789101112131415class FooWidget(QWidget): def __init__(self): super(FooWidget, self).__init__() self.setAttribute(Qt.WA_TranslucentBackground, True) def closeEvent(self, event): # accepté€€å‡ºï¼Œingoreå–æ¶ˆé€€å‡ºï¼Œé»˜è®¤å€¼ä¸ºaccept print(&#x27;closeEvent&#x27;)self.foo = FooWidget()self.foo.close()self.foo = None å‚è€ƒ https://blog.csdn.net/GoForwardToStep/article/details/53647146 https://doc.qt.io http://c.biancheng.net/view/1864.html","tags":[{"name":"Qt","slug":"Qt","permalink":"http://airshu.github.io/tags/Qt/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"}]},{"title":"å¼‚æ­¥ç¼–ç¨‹","date":"2023-06-17T02:29:30.077Z","path":"wiki/Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹/å¼‚æ­¥ç¼–ç¨‹/","text":"isolateæœºåˆ¶Dartæ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œå®ƒçš„å¹¶å‘æœºåˆ¶å«isolateã€‚APPçš„å¯åŠ¨å…¥å£mainå‡½æ•°å°±æ˜¯ä¸€ä¸ªç±»ä¼¼Androidä¸»çº¿ç¨‹çš„ä¸€ä¸ªä¸»isolateã€‚å’ŒJavaçš„Threadä¸åŒçš„æ˜¯ï¼ŒDartä¸­çš„isolateæ— æ³•å…±äº«å†…å­˜ã€‚ 123456789101112131415161718// å¯¼å…¥isolateåŒ…import &#x27;dart:isolate&#x27;;// ä½¿ç”¨asyncå…³é”®è¯å°†mainå‡½æ•°æ ‡è®°ä¸ºä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œè¿™æ ·æ‰èƒ½ä½¿ç”¨awaitå…³é”®è¯void main() async &#123; // ä½¿ç”¨awaitå…³é”®è¯ç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆ await Isolate.spawn&lt;String&gt;(subTask, &quot;Task1 parameter&quot;); // mainå‡½æ•°ç»“æŸæ ‡è®° print(&quot;main func end.&quot;);&#125;// Isolateå…¥å£å‡½æ•°å®šä¹‰ï¼Œæ¥å—ä¸€ä¸ªStringå‚æ•°void subTask(String msg) &#123; print(&quot;subTask recv: $msg&quot;);&#125; æ¶ˆæ¯æœºåˆ¶Dartåœ¨æ‰§è¡Œå®Œmainå‡½æ•°åï¼Œå°±ä¼šç”±Loopå¼€å§‹æ‰§è¡Œä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­çš„Eventã€‚é¦–å…ˆLoopæ£€æŸ¥å¾®æœåŠ¡é˜Ÿåˆ—ï¼Œä¾æ¬¡æ‰§è¡ŒEventï¼Œå½“å¾®æœåŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œåï¼Œå°±æ£€æŸ¥Event queueé˜Ÿåˆ—ä¾æ¬¡æ‰§è¡Œï¼Œåœ¨æ‰§è¡ŒEvent queueçš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ‰§è¡Œå®Œä¸€ä¸ªEventå°±å†æ£€æŸ¥ä¸€æ¬¡å¾®æœåŠ¡é˜Ÿåˆ—ã€‚æ‰€ä»¥å¾®æœåŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§é«˜ï¼Œå¯ä»¥åˆ©ç”¨å¾®æœåŠ¡è¿›è¡Œæ’é˜Ÿã€‚ Futureåœ¨ Dart åº“ä¸­éšå¤„å¯è§ Future å¯¹è±¡ï¼Œé€šå¸¸å¼‚æ­¥å‡½æ•°è¿”å›çš„å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Futureã€‚ å½“ä¸€ä¸ª future æ‰§è¡Œå®Œåï¼Œä»–é‡Œé¢çš„å€¼å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œå¯ä»¥ä½¿ç”¨then()æ¥åœ¨futureå®Œæˆçš„æ—¶å€™æ‰§è¡Œå…¶ä»–ä»£ç ã€‚Futureå¯¹è±¡å…¶å®å°±ä»£è¡¨äº†åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªäº‹ä»¶çš„ç»“æœã€‚ Streamè¡¨ç¤ºå‘å‡ºçš„ä¸€ç³»åˆ—çš„å¼‚æ­¥æ•°æ®ã€‚Streamæ˜¯ä¸€ä¸ªå¼‚æ­¥æ•°æ®æºï¼Œå®ƒæ˜¯Dartä¸­å¤„ç†å¼‚æ­¥äº‹ä»¶æµçš„ç»Ÿä¸€APIã€‚ Futureè¡¨ç¤ºç¨åè·å¾—çš„ä¸€ä¸ªæ•°æ®ï¼Œæ‰€æœ‰å¼‚æ­¥çš„æ“ä½œçš„è¿”å›å€¼éƒ½ç”¨Futureæ¥è¡¨ç¤ºã€‚ä½†æ˜¯Futureåªèƒ½è¡¨ç¤ºä¸€æ¬¡å¼‚æ­¥è·å¾—çš„æ•°æ®ã€‚è€ŒStreamè¡¨ç¤ºå¤šæ¬¡å¼‚æ­¥è·å¾—çš„æ•°æ®ã€‚æ¯”å¦‚ IO å¤„ç†çš„æ—¶å€™ï¼Œæ¯æ¬¡åªä¼šè¯»å–ä¸€éƒ¨åˆ†æ•°æ®å’Œä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶çš„å†…å®¹ç›¸æ¯”ï¼ŒStreamçš„å¥½å¤„æ˜¯å¤„ç†è¿‡ç¨‹ä¸­å†…å­˜å ç”¨è¾ƒå°ã€‚è€ŒFileçš„ readAsString()æ˜¯ä¸€æ¬¡æ€§è¯»å–æ•´ä¸ªæ–‡ä»¶çš„å†…å®¹è¿›æ¥ï¼Œè™½ç„¶è·å¾—å®Œæ•´å†…å®¹å¤„ç†èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœæ–‡ä»¶å¾ˆå¤§çš„è¯å°±ä¼šå¯¼è‡´å†…å­˜å ç”¨è¿‡å¤§çš„é—®é¢˜ã€‚ 1234567new File(&quot;/Users/enjoy/app-release.apk&quot;).openRead().listen((List&lt;int&gt; bytes) &#123; print(&quot;streamæ‰§è¡Œ&quot;); //æ‰§è¡Œå¤šæ¬¡ &#125;); new File(&quot;/Users/enjoy/app-release.apk&quot;).readAsBytes().then((_)&#123; print(&quot;futureæ‰§è¡Œ&quot;); //æ‰§è¡Œ1æ¬¡ &#125;); listen()å…¶å®å°±æ˜¯è®¢é˜…è¿™ä¸ªStreamï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªStreamSubscriptionè®¢é˜…è€…ã€‚è®¢é˜…è€…è‚¯å®šå°±æä¾›äº†å–æ¶ˆè®¢é˜…çš„cancel()ï¼Œå»æ‰åæˆ‘ä»¬çš„listenä¸­å°±æ¥ä¸åˆ°ä»»ä½•ä¿¡æ¯äº†ã€‚é™¤äº†cancel()å–æ¶ˆæ–¹æ³•ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨onData()é‡ç½®listeneæ–¹æ³•ï¼ŒonDoneç›‘å¬å®Œæˆç­‰ç­‰æ“ä½œã€‚ 12345678910111213141516StreamSubscription&lt;List&lt;int&gt;&gt; listen = new File(&quot;/Users/enjoy/app-release.apk&quot;).openRead().listen((List&lt;int&gt; bytes) &#123; print(&quot;streamæ‰§è¡Œ&quot;);&#125;);listen.onData((_)&#123; print(&quot;æ›¿ä»£listene&quot;);&#125;);listen.onDone(()&#123; print(&quot;ç»“æŸ&quot;);&#125;);listen.onError((e,s)&#123; print(&quot;å¼‚å¸¸&quot;);&#125;);//æš‚åœï¼Œå¦‚æœæ²¡æœ‰ç»§ç»­åˆ™ä¼šé€€å‡ºç¨‹åºlisten.pause();//ç»§ç»­listen.resume(); å¹¿æ’­æ¨¡å¼Streamæœ‰ä¸¤ç§è®¢é˜…æ¨¡å¼ï¼šå•è®¢é˜…å’Œå¤šè®¢é˜…ã€‚å•è®¢é˜…å°±æ˜¯åªèƒ½æœ‰ä¸€ä¸ªè®¢é˜…è€…ï¼Œä¸Šé¢çš„ä½¿ç”¨æˆ‘ä»¬éƒ½æ˜¯å•è®¢é˜…æ¨¡å¼ï¼Œè€Œå¹¿æ’­æ˜¯å¯ä»¥æœ‰å¤šä¸ªè®¢é˜…è€…ã€‚é€šè¿‡ Stream.asBroadcastStream() å¯ä»¥å°†ä¸€ä¸ªå•è®¢é˜…æ¨¡å¼çš„ Stream è½¬æ¢æˆä¸€ä¸ªå¤šè®¢é˜…æ¨¡å¼çš„ Streamï¼ŒisBroadcast å±æ€§å¯ä»¥åˆ¤æ–­å½“å‰ Stream æ‰€å¤„çš„æ¨¡å¼ã€‚ 123456789101112131415var stream = new File(&quot;/Users/enjoy/app-release.apk&quot;).openRead(); stream.listen((List&lt;int&gt; bytes) &#123; &#125;); //é”™è¯¯ å•è®¢é˜…åªèƒ½æœ‰ä¸€ä¸ªè®¢é˜…è€…// stream.listen((_)&#123;// print(&quot;streamæ‰§è¡Œ&quot;);// &#125;); var broadcastStream = new File(&quot;/Users/enjoy/app-release.apk&quot;).openRead().asBroadcastStream(); broadcastStream.listen((_)&#123; print(&quot;è®¢é˜…è€…1&quot;); &#125;); broadcastStream.listen((_)&#123; print(&quot;è®¢é˜…è€…2&quot;); &#125;); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤šè®¢é˜…æ¨¡å¼å¦‚æœæ²¡æœ‰åŠæ—¶æ·»åŠ è®¢é˜…è€…åˆ™å¯èƒ½ä¸¢æ•°æ®ã€‚ 1234567891011121314151617181920//é»˜è®¤æ˜¯å•è®¢é˜… var stream = Stream.fromIterable([1, 2, 3]); //3såæ·»åŠ è®¢é˜…è€… ä¸ä¼šä¸¢å¤±æ•°æ® new Timer(new Duration(seconds: 3), () =&gt; stream.listen(print)); //åˆ›å»ºä¸€ä¸ªæµç®¡ç†å™¨ å¯¹ä¸€ä¸ªstreamè¿›è¡Œç®¡ç† var streamController = StreamController.broadcast(); //æ·»åŠ  streamController.add(1); //å…ˆå‘å‡ºäº‹ä»¶å†è®¢é˜… æ— æ³•æ¥åˆ°é€šçŸ¥ streamController.stream.listen((i)&#123; print(&quot;broadcast:$i&quot;); &#125;); //è®°å¾—å…³é—­ streamController.close(); //è¿™é‡Œæ²¡æœ‰ä¸¢å¤±ï¼Œå› ä¸ºstreamé€šè¿‡asBroadcastStreamè½¬ä¸ºäº†å¤šè®¢é˜…ï¼Œä½†æ˜¯æœ¬è´¨æ˜¯å•è®¢é˜…æµï¼Œå¹¶ä¸æ”¹å˜åŸå§‹ stream çš„å®ç°ç‰¹æ€§ var broadcastStream = Stream.fromIterable([1, 2, 3]).asBroadcastStream(); new Timer(new Duration(seconds: 3), () =&gt; broadcastStream.listen(print)); async&#x2F;awaitä½¿ç”¨asyncå’Œawaitçš„ä»£ç æ˜¯å¼‚æ­¥çš„ï¼Œä½†æ˜¯çœ‹èµ·æ¥å¾ˆåƒåŒæ­¥ä»£ç ã€‚å½“æˆ‘ä»¬éœ€è¦è·å¾—Açš„ç»“æœï¼Œå†æ‰§è¡ŒBæ—¶ï¼Œä½ éœ€è¦then()-&gt;then(),ä½†æ˜¯åˆ©ç”¨asyncä¸awaitèƒ½å¤Ÿéå¸¸å¥½çš„è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜ï¼š 123456789//async è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•,awaitå¿…é¡»å†asyncæ–¹æ³•ä¸­ä½¿ç”¨//å¼‚æ­¥æ–¹æ³•åªèƒ½è¿”å› voidå’ŒFutureFuture&lt;String&gt; readFile() async &#123; //await ç­‰å¾…futureæ‰§è¡Œå®Œæˆå†æ‰§è¡Œåç»­ä»£ç  String content = await new File(&quot;/Users/alone/enjoy/a.txt&quot;).readAsString(); String content2 = await new File(&quot;/Users/alone/enjoy/a.txt&quot;).readAsString(); //è‡ªåŠ¨è½¬æ¢ä¸º future return content;&#125;","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"æ¶ˆæ¯æœºåˆ¶","date":"2023-06-17T02:29:30.077Z","path":"wiki/Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹/æ¶ˆæ¯æœºåˆ¶/","text":"æ¦‚è¿°Dartåœ¨æ‰§è¡Œå®Œmainå‡½æ•°åï¼Œå°±ä¼šç”±Loopå¼€å§‹æ‰§è¡Œä¸¤ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­çš„Eventã€‚é¦–å…ˆLoopæ£€æŸ¥å¾®æœåŠ¡é˜Ÿåˆ—ï¼Œä¾æ¬¡æ‰§è¡ŒEventï¼Œå½“å¾®æœåŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œåï¼Œå°±æ£€æŸ¥Event queueé˜Ÿåˆ—ä¾æ¬¡æ‰§è¡Œï¼Œåœ¨æ‰§è¡ŒEvent queueçš„è¿‡ç¨‹ä¸­ï¼Œæ²¡æ‰§è¡Œå®Œä¸€ä¸ªEventå°±å†æ£€æŸ¥ä¸€æ¬¡å¾®æœåŠ¡é˜Ÿåˆ—ã€‚æ‰€ä»¥å¾®æœåŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§é«˜ï¼Œå¯ä»¥åˆ©ç”¨å¾®æœåŠ¡è¿›è¡Œæ’é˜Ÿã€‚ eventé˜Ÿåˆ—ï¼šåŒ…å«æ‰€æœ‰å¤–æ¥çš„äº‹ä»¶ï¼šI&#x2F;Oï¼Œmouse eventsï¼Œdrawing eventsï¼Œtimersï¼Œisolateä¹‹é—´çš„messageç­‰ã€‚ microtaské˜Ÿåˆ—ï¼šåœ¨Dartä¸­æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºæœ‰æ—¶å€™äº‹ä»¶å¤„ç†æƒ³è¦åœ¨ç¨åå®Œæˆä¸€äº›ä»»åŠ¡ä½†åˆå¸Œæœ›æ˜¯åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ªäº‹ä»¶æ¶ˆæ¯ä¹‹å‰ã€‚ æ€»ç»“ Dartäº‹ä»¶å¾ªç¯æ‰§è¡Œä¸¤ä¸ªé˜Ÿåˆ—é‡Œçš„äº‹ä»¶ï¼ševenté˜Ÿåˆ—å’Œmicrotaské˜Ÿåˆ—ã€‚ eventé˜Ÿåˆ—çš„äº‹ä»¶æ¥è‡ªdartï¼ˆfutureï¼Œtimerï¼Œisolate messageç­‰ï¼‰å’Œç³»ç»Ÿï¼ˆç”¨æˆ·è¾“å…¥ï¼ŒI&#x2F;Oç­‰ï¼‰ã€‚ ç›®å‰ä¸ºæ­¢ï¼Œmicrotaské˜Ÿåˆ—çš„äº‹ä»¶åªæ¥è‡ªdartã€‚ äº‹ä»¶å¾ªç¯ä¼šä¼˜å…ˆæ¸…ç©ºmicrotaské˜Ÿåˆ—ï¼Œç„¶åæ‰ä¼šå»å¤„ç†eventé˜Ÿåˆ—ã€‚ å½“ä¸¤ä¸ªé˜Ÿåˆ—éƒ½æ¸…ç©ºåï¼Œdartå°±ä¼šé€€å‡ºã€‚ mainæ–¹æ³•ï¼Œæ¥è‡ªeventé˜Ÿåˆ—å’Œmicrotaské˜Ÿåˆ—çš„æ‰€æœ‰äº‹ä»¶éƒ½è¿è¡Œåœ¨Dartçš„main isolateä¸­ã€‚ å½“ä½ è¦å®‰æ’ä¸€ä¸ªä»»åŠ¡æ—¶ï¼Œè¯·éµå®ˆä»¥ä¸‹è§„åˆ™ï¼š å¦‚æœå¯ä»¥ï¼Œå°½é‡å°†ä»»åŠ¡æ”¾å…¥eventé˜Ÿåˆ—ä¸­ã€‚ ä½¿ç”¨Futureçš„thenæ–¹æ³•æˆ–whenCompleteæ–¹æ³•æ¥æŒ‡å®šä»»åŠ¡é¡ºåºã€‚ ä¸ºäº†ä¿æŒä½ appçš„å¯å“åº”æ€§ï¼Œå°½é‡ä¸è¦å°†å¤§è®¡ç®—é‡çš„ä»»åŠ¡æ”¾å…¥è¿™ä¸¤ä¸ªé˜Ÿåˆ—ã€‚ å¤§è®¡ç®—é‡çš„ä»»åŠ¡æ”¾å…¥é¢å¤–çš„isolateä¸­ã€‚ å‚è€ƒ Dartä¸æ¶ˆæ¯å¾ªç¯æœºåˆ¶ç¿»è¯‘","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"async and await","date":"2023-06-17T02:29:30.075Z","path":"wiki/Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹/async_await/","text":"asyncç”¨äºå£°æ˜æ–¹æ³•æ˜¯å¼‚æ­¥çš„ awaitç”¨äºè°ƒç”¨å¼‚æ­¥æ–¹æ³•ä½¿ç”¨ï¼Œè¡¨ç¤ºç­‰å¾…å¼‚æ­¥æ–¹æ³•æ‰§è¡Œå®Œæˆåå†æ‰§è¡Œåç»­çš„ä»£ç  async å’Œ await å…³é”®å­—ç”¨äºå®ç°å¼‚æ­¥ç¼–ç¨‹ï¼Œå¹¶ä¸”è®©ä½ çš„ä»£ç çœ‹èµ·æ¥å°±åƒæ˜¯åŒæ­¥çš„ä¸€æ ·ã€‚ å¿…é¡»åœ¨å¸¦æœ‰ async å…³é”®å­—çš„ å¼‚æ­¥å‡½æ•° ä¸­ä½¿ç”¨ awaitã€‚ await è¡¨è¾¾å¼çš„è¿”å›å€¼é€šå¸¸æ˜¯ä¸€ä¸ª Future å¯¹è±¡ï¼›å¦‚æœä¸æ˜¯çš„è¯ä¹Ÿä¼šè‡ªåŠ¨å°†å…¶åŒ…è£¹åœ¨ä¸€ä¸ª Future å¯¹è±¡é‡Œã€‚ Future å¯¹è±¡ä»£è¡¨ä¸€ä¸ªæ‰¿è¯ºï¼Œ await è¡¨è¾¾å¼ä¼šé˜»å¡ç›´åˆ°éœ€è¦çš„å¯¹è±¡è¿”å›ã€‚ å£°æ˜å¼‚æ­¥å‡½æ•°å¼‚æ­¥å‡½æ•° æ˜¯å‡½æ•°ä½“ç”± async å…³é”®å­—æ ‡è®°çš„å‡½æ•°ã€‚ å°†å…³é”®å­— async æ·»åŠ åˆ°å‡½æ•°å¹¶è®©å…¶è¿”å›ä¸€ä¸ª Future å¯¹è±¡ã€‚å¦‚æœå‡½æ•°æ²¡æœ‰è¿”å›æœ‰æ•ˆå€¼ï¼Œéœ€è¦è®¾ç½®å…¶è¿”å›ç±»å‹ä¸º Futureã€‚ 123456String lookUpVersion() =&gt; &#x27;1.0.0&#x27;;// æ”¹æˆå¼‚æ­¥å‡½æ•°Future&lt;String&gt; lookUpVersion() async =&gt; &#x27;1.0.0&#x27;; å‚è€ƒ sync* å’Œ async* ã€yield å’Œyield* ã€async å’Œ await","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"è¿ç®—ç¬¦","date":"2023-06-17T02:29:30.074Z","path":"wiki/Flutter/Dart/åŸºç¡€/è¿ç®—ç¬¦/","text":"æè¿° è¿ç®—ç¬¦ ä¸€å…ƒåç¼€ è¡¨è¾¾å¼++ è¡¨è¾¾å¼â€“ () [] . ?. ä¸€å…ƒå‰ç¼€ -è¡¨è¾¾å¼ !è¡¨è¾¾å¼ ~è¡¨è¾¾å¼ ++è¡¨è¾¾å¼ â€“è¡¨è¾¾å¼ ä¹˜é™¤æ³• * &#x2F; % ~&#x2F; åŠ å‡æ³• + - ä½è¿ç®— &lt;&lt; &gt;&gt; &gt;&gt;&gt; äºŒè¿›åˆ¶ä¸ &amp; äºŒè¿›åˆ¶å¼‚æˆ– ^ äºŒè¿›åˆ¶æˆ– ï½œ å…³ç³»å’Œç±»å‹æµ‹è¯• &gt;&#x3D; &gt; &lt;&#x3D; &lt; as is is! ç›¸ç­‰åˆ¤æ–­ &#x3D;&#x3D; !&#x3D; é€»è¾‘ä¸ &amp;&amp; é€»è¾‘æˆ– ï½œï½œ ç©ºåˆ¤æ–­ ?? æ¡ä»¶è¡¨è¾¾å¼ è¡¨è¾¾å¼ 1 ? è¡¨è¾¾å¼ 2 : è¡¨è¾¾å¼ 3 çº§è” .. ?.. .. ?.. èµ‹å€¼ &#x3D; *&#x3D; &#x2F;&#x3D; +&#x3D; -&#x3D; &amp;&#x3D; ^&#x3D; ç­‰ç­‰â€¦â€¦ èµ‹å€¼æ“ä½œç¬¦12b ??= value; // å¦‚æœ b æ˜¯ nullï¼Œåˆ™ value èµ‹å€¼ç»™ bï¼› // å¦‚æœä¸æ˜¯ nullï¼Œåˆ™ b çš„å€¼ä¿æŒä¸å˜ æ¡ä»¶è¡¨è¾¾å¼12345678910- `condition ? expr1 : expr2` å¦‚æœ *condition* æ˜¯ trueï¼Œæ‰§è¡Œ *expr1* (å¹¶è¿”å›æ‰§è¡Œçš„ç»“æœ)ï¼› å¦åˆ™æ‰§è¡Œ *expr2* å¹¶è¿”å›å…¶ç»“æœã€‚- `expr1 ?? expr2` å¦‚æœ *expr1* ä¸ä¸ºnullï¼Œè¿”å›å…¶å€¼ï¼› å¦åˆ™æ‰§è¡Œ *expr2* å¹¶è¿”å›å…¶ç»“æœã€‚ çº§è”æ“ä½œç¬¦å¯ä»¥å®ç°é“¾å¼è°ƒç”¨ã€‚ 1234//StringBuffer writeå°±æ˜¯Javaçš„appendvar sb = new StringBuffer();sb..write(&#x27;foo&#x27;)..write(&#x27;bar&#x27;); å®‰å…¨æ“ä½œç¬¦1234String sb;//ç©ºæŒ‡é’ˆprint(sb.length);print(sb?.length); åˆ¤æ–­ç±»å‹è¿ç®—ç¬¦ æ“ä½œç¬¦ æè¿° as ç±»å‹è½¬æ¢ is å¦‚æœå¯¹è±¡æ˜¯æŒ‡å®šç±»å‹åˆ™è¿”å› true is! å¦‚æœå¯¹è±¡æ˜¯æŒ‡å®šç±»å‹åˆ™è¿”å› false å…¶ä»–è¿ç®—ç¬¦ è¿ç®—ç¬¦ åå­— æè¿° () ä½¿ç”¨æ–¹æ³• ä»£è¡¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³• [] è®¿é—® List è®¿é—® List ä¸­ç‰¹å®šä½ç½®çš„å…ƒç´  . è®¿é—®æˆå‘˜ æˆå‘˜è®¿é—®ç¬¦ ?. æ¡ä»¶è®¿é—®æˆå‘˜ ä¸ä¸Šè¿°æˆå‘˜è®¿é—®ç¬¦ç±»ä¼¼ï¼Œä½†æ˜¯å·¦è¾¹çš„æ“ä½œå¯¹è±¡ä¸èƒ½ä¸º nullï¼Œä¾‹å¦‚ foo?.barï¼Œå¦‚æœ foo ä¸º null åˆ™è¿”å› null ï¼Œå¦åˆ™è¿”å› bar","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"Future","date":"2023-06-17T02:29:30.074Z","path":"wiki/Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹/Future/","text":"Future æ˜¯åœ¨æœªæ¥æŸä¸ªæ—¶é—´è·å¾—æƒ³è¦å¯¹è±¡çš„ä¸€ç§æ‰‹æ®µã€‚Future è¡¨ç¤ºä¸€ä¸ªä¸ä¼šç«‹å³å®Œæˆçš„è®¡ç®—è¿‡ç¨‹ã€‚ä¸æ™®é€šå‡½æ•°ç›´æ¥è¿”å›ç»“æœä¸åŒçš„æ˜¯å¼‚æ­¥å‡½æ•°è¿”å›ä¸€ä¸ªå°†ä¼šåŒ…å«ç»“æœçš„ Futureã€‚è¯¥ Future ä¼šåœ¨ç»“æœå‡†å¤‡å¥½æ—¶é€šçŸ¥è°ƒç”¨è€…ã€‚ Futureä¸­é™¤äº†microtaskå¤–ï¼Œå…¶ä»–ä»»åŠ¡éƒ½æ˜¯æ·»åŠ åˆ°Eventé˜Ÿåˆ—ä¸­æ‰§è¡Œã€‚ FutureçŠ¶æ€ è¿è¡ŒçŠ¶æ€(pending)ï¼Œè¡¨ç¤ºä»»åŠ¡è¿˜æœªå®Œæˆï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼ å®ŒæˆçŠ¶æ€(completed)ï¼Œè¡¨ç¤ºä»»åŠ¡å·²ç»ç»“æŸï¼ˆæœ‰ç»“æœæˆ–è€…å¼‚å¸¸ï¼‰ åˆ›å»ºFuture Future() Future.microtask() Future.sync() Future.value() Future.delayed() Future.error() Future.foreach(Iterable elements, FutureOr action(T element)) Future.anyï¼ˆfuturesï¼‰ Future.doWhile() å¤„ç†å¼‚æ­¥æ“ä½œçš„ç»“æœ Future.then() ä»»åŠ¡æ‰§è¡Œå®Œæˆä¼šè¿›å…¥è¿™é‡Œï¼Œèƒ½å¤Ÿè·å¾—è¿”å›çš„æ‰§è¡Œç»“æœã€‚ Future.catchError() æœ‰ä»»åŠ¡æ‰§è¡Œå¤±è´¥ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ•è·å¼‚å¸¸ã€‚ Future.whenComplete() å½“ä»»åŠ¡åœæ­¢æ—¶ï¼Œæœ€åä¼šæ‰§è¡Œè¿™é‡Œã€‚ å‚è€ƒ Flutterè¿›é˜¶ç¯‡ï¼ˆ4ï¼‰â€“ Flutterçš„Futureå¼‚æ­¥è¯¦è§£ Flutterä¸­çš„å¼‚æ­¥ç¼–ç¨‹â€”â€”Future","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"Stream","date":"2023-06-17T02:29:30.074Z","path":"wiki/Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹/Stream/","text":"Stream æ˜¯ä¸€ç³»åˆ—å¼‚æ­¥äº‹ä»¶çš„åºåˆ—ã€‚å…¶ç±»ä¼¼äºä¸€ä¸ªå¼‚æ­¥çš„ Iterableï¼Œä¸åŒçš„æ˜¯å½“ä½ å‘ Iterable è·å–ä¸‹ä¸€ä¸ªäº‹ä»¶æ—¶å®ƒä¼šç«‹å³ç»™ä½ ï¼Œä½†æ˜¯ Stream åˆ™ä¸ä¼šç«‹å³ç»™ä½ è€Œæ˜¯åœ¨å®ƒå‡†å¤‡å¥½æ—¶å‘Šè¯‰ä½ ã€‚ Streamçš„ç±»å‹ï¼š Single-Subscription æœ€å¸¸è§çš„ç±»å‹æ˜¯ä¸€ä¸ª Stream åªåŒ…å«äº†æŸä¸ªä¼—å¤šäº‹ä»¶åºåˆ—çš„ä¸€ä¸ªã€‚è€Œè¿™äº›äº‹ä»¶éœ€è¦æŒ‰é¡ºåºæä¾›å¹¶ä¸”ä¸èƒ½ä¸¢å¤±ã€‚å½“ä½ è¯»å–ä¸€ä¸ªæ–‡ä»¶æˆ–æ¥æ”¶ä¸€ä¸ªç½‘é¡µè¯·æ±‚æ—¶å°±éœ€è¦ä½¿ç”¨è¿™ç§ç±»å‹çš„ Streamã€‚ è¿™ç§ Stream åªèƒ½è®¾ç½®ä¸€æ¬¡ç›‘å¬ã€‚é‡å¤è®¾ç½®åˆ™ä¼šä¸¢å¤±åŸæ¥çš„äº‹ä»¶ï¼Œè€Œå¯¼è‡´ä½ æ‰€ç›‘å¬åˆ°çš„å‰©ä½™å…¶å®ƒäº‹ä»¶æ¯«æ— æ„ä¹‰ã€‚å½“ä½ å¼€å§‹ç›‘å¬æ—¶ï¼Œæ•°æ®å°†ä»¥å—çš„å½¢å¼æä¾›å’Œè·å–ã€‚ Broadcast å¦ä¸€ç§æµæ˜¯é’ˆå¯¹å•ä¸ªæ¶ˆæ¯çš„ï¼Œè¿™ç§æµå¯ä»¥ä¸€æ¬¡å¤„ç†ä¸€ä¸ªæ¶ˆæ¯ã€‚ä¾‹å¦‚å¯ä»¥å°†å…¶ç”¨äºæµè§ˆå™¨çš„é¼ æ ‡äº‹ä»¶ã€‚ ä½ å¯ä»¥åœ¨ä»»ä½•æ—¶å€™ç›‘å¬è¿™ç§ Streamï¼Œä¸”åœ¨æ­¤ä¹‹åä½ å¯ä»¥è·å–åˆ°ä»»ä½•è§¦å‘çš„äº‹ä»¶ã€‚è¿™ç§æµå¯ä»¥åœ¨åŒä¸€æ—¶é—´è®¾ç½®å¤šä¸ªä¸åŒçš„ç›‘å¬å™¨åŒæ—¶ç›‘å¬ï¼ŒåŒæ—¶ä½ ä¹Ÿå¯ä»¥åœ¨å–æ¶ˆä¸Šä¸€ä¸ªè®¢é˜…åå†æ¬¡å¯¹å…¶å‘èµ·ç›‘å¬ã€‚ Stream ä¹Ÿæœ‰åŒæ­¥æµå’Œå¼‚æ­¥æµä¹‹åˆ†ã€‚å®ƒä»¬çš„åŒºåˆ«åœ¨äºåŒæ­¥æµä¼šåœ¨æ‰§è¡Œ addï¼ŒaddError æˆ– close æ–¹æ³•æ—¶ç«‹å³å‘æµçš„ç›‘å¬å™¨ StreamSubscription å‘é€äº‹ä»¶ï¼Œè€Œå¼‚æ­¥æµæ€»æ˜¯åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ä»£ç æ‰§è¡Œå®Œæˆååœ¨å‘é€äº‹ä»¶ã€‚ ç›¸å…³ç±»ï¼š Stream StreamControllerï¼šæµçš„æ§åˆ¶å™¨ StreamSinkï¼šäº‹ä»¶è¾“å…¥å£ StreamSubscriptionï¼šç”¨äºç®¡ç†äº‹ä»¶çš„æ³¨å†Œã€æš‚åœä¸å–æ¶ˆç­‰ StreamTransformer MultiStreamController åˆ›å»ºStreamå¤„ç†Streamçš„æ–¹æ³•123456789101112131415161718192021Future&lt;T&gt; get first;Future&lt;bool&gt; get isEmpty;Future&lt;T&gt; get last;Future&lt;int&gt; get length;Future&lt;T&gt; get single;Future&lt;bool&gt; any(bool Function(T element) test);Future&lt;bool&gt; contains(Object? needle);Future&lt;E&gt; drain&lt;E&gt;([E? futureValue]);Future&lt;T&gt; elementAt(int index);Future&lt;bool&gt; every(bool Function(T element) test);Future&lt;T&gt; firstWhere(bool Function(T element) test, &#123;T Function()? orElse&#125;);Future&lt;S&gt; fold&lt;S&gt;(S initialValue, S Function(S previous, T element) combine);Future forEach(void Function(T element) action);Future&lt;String&gt; join([String separator = &#x27;&#x27;]);Future&lt;T&gt; lastWhere(bool Function(T element) test, &#123;T Function()? orElse&#125;);Future pipe(StreamConsumer&lt;T&gt; streamConsumer);Future&lt;T&gt; reduce(T Function(T previous, T element) combine);Future&lt;T&gt; singleWhere(bool Function(T element) test, &#123;T Function()? orElse&#125;);Future&lt;List&lt;T&gt;&gt; toList();Future&lt;Set&lt;T&gt;&gt; toSet(); ä¿®æ”¹Streamçš„æ–¹æ³•12345678910Stream&lt;R&gt; cast&lt;R&gt;();Stream&lt;S&gt; expand&lt;S&gt;(Iterable&lt;S&gt; Function(T element) convert);Stream&lt;S&gt; map&lt;S&gt;(S Function(T event) convert);Stream&lt;T&gt; skip(int count);Stream&lt;T&gt; skipWhile(bool Function(T element) test);Stream&lt;T&gt; take(int count);Stream&lt;T&gt; takeWhile(bool Function(T element) test);Stream&lt;T&gt; where(bool Function(T event) test); StreamController1234567891011121314onListen æ³¨å†Œç›‘å¬æ—¶å›è°ƒonPause å½“æµæš‚åœæ—¶å›è°ƒonResume å½“æµæ¢å¤æ—¶å›è°ƒonCancel å½“ç›‘å¬å™¨è¢«å–æ¶ˆæ—¶å›è°ƒsync å½“å€¼ä¸ºtrueæ—¶è¡¨ç¤ºåŒæ­¥æ§åˆ¶å™¨SynchronousStreamControllerï¼Œé»˜è®¤å€¼ä¸ºfalseï¼Œè¡¨ç¤ºå¼‚æ­¥æ§åˆ¶å™¨factory StreamController( &#123;void onListen(), void onPause(), void onResume(), onCancel(), bool sync: false&#125;) StreamTransformer123456789handleDataï¼šå“åº”ä»æµä¸­å‘å‡ºçš„ä»»ä½•æ•°æ®äº‹ä»¶ã€‚æä¾›çš„å‚æ•°æ˜¯æ¥è‡ªå‘å‡ºäº‹ä»¶çš„æ•°æ®ï¼Œä»¥åŠEventSink&lt;T&gt;ï¼Œè¡¨ç¤ºæ­£åœ¨è¿›è¡Œæ­¤è½¬æ¢çš„å½“å‰æµçš„å®ä¾‹handleErrorï¼šå“åº”ä»æµä¸­å‘å‡ºçš„ä»»ä½•é”™è¯¯äº‹ä»¶handleDoneï¼šå½“æµä¸å†æœ‰æ•°æ®è¦å¤„ç†æ—¶è°ƒç”¨ã€‚é€šå¸¸åœ¨æµçš„close()æ–¹æ³•è¢«è°ƒç”¨æ—¶å›è°ƒfactory StreamTransformer.fromHandlers(&#123; void handleData(S data, EventSink&lt;T&gt; sink), void handleError(Object error, StackTrace stackTrace, EventSink&lt;T&gt; sink), void handleDone(EventSink&lt;T&gt; sink)&#125;) å‚è€ƒ Dart è¯­è¨€å¼‚æ­¥ç¼–ç¨‹ä¹‹Stream åœ¨ Dart é‡Œä½¿ç”¨ Stream å…¨é¢æ·±å…¥ç†è§£Stream","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"}]},{"title":"æ³›å‹","date":"2023-06-17T02:29:30.072Z","path":"wiki/Flutter/Dart/åŸºç¡€/æ³›å‹/","text":"æ³›å‹çš„å¥½å¤„ é€‚å½“åœ°æŒ‡å®šæ³›å‹å¯ä»¥æ›´å¥½åœ°å¸®åŠ©ä»£ç ç”Ÿæˆã€‚ ä½¿ç”¨æ³›å‹å¯ä»¥å‡å°‘ä»£ç é‡å¤ã€‚ ä½¿ç”¨é›†åˆå­—é¢é‡Listã€Set ä»¥åŠ Map å­—é¢é‡ä¹Ÿå¯ä»¥æ˜¯å‚æ•°åŒ–çš„ã€‚å®šä¹‰å‚æ•°åŒ–çš„ List åªéœ€åœ¨ä¸­æ‹¬å·å‰æ·»åŠ  ï¼›å®šä¹‰å‚æ•°åŒ–çš„ Map åªéœ€è¦åœ¨å¤§æ‹¬å·å‰æ·»åŠ  &lt;keyType, valueType&gt;ï¼š 1234567var names = &lt;String&gt;[&#x27;Seth&#x27;, &#x27;Kathy&#x27;, &#x27;Lars&#x27;];var uniqueNames = &lt;String&gt;&#123;&#x27;Seth&#x27;, &#x27;Kathy&#x27;, &#x27;Lars&#x27;&#125;;var pages = &lt;String, String&gt;&#123; &#x27;index.html&#x27;: &#x27;Homepage&#x27;, &#x27;robots.txt&#x27;: &#x27;Hints for web robots&#x27;, &#x27;humans.txt&#x27;: &#x27;We are people, not machines&#x27;&#125;; ä½¿ç”¨ç±»å‹å‚æ•°åŒ–çš„æ„é€ å‡½æ•°12345678910var nameSet = Set&lt;String&gt;.from(names);var views = Map&lt;int, View&gt;();//Dartçš„æ³›å‹ç±»å‹æ˜¯ å›ºåŒ–çš„ï¼Œè¿™æ„å‘³ç€å³ä¾¿åœ¨è¿è¡Œæ—¶ä¹Ÿä¼šä¿æŒç±»å‹ä¿¡æ¯var names = &lt;String&gt;[];names.addAll([&#x27;Seth&#x27;, &#x27;Kathy&#x27;, &#x27;Lars&#x27;]);print(names is List&lt;String&gt;); // true é™åˆ¶å‚æ•°åŒ–ç±»å‹1234class Foo&lt;T extends Object&gt; &#123; // Any type provided to Foo for T must be non-nullable.&#125; æ³›å‹æ–¹æ³•12345678T first&lt;T&gt;(List&lt;T&gt; ts) &#123; // Do some initial work or error checking, then... T tmp = ts[0]; // Do some additional checking or processing... return tmp;&#125; æ–¹æ³• first çš„æ³›å‹ T å¯ä»¥åœ¨å¦‚ä¸‹åœ°æ–¹ä½¿ç”¨ï¼š å‡½æ•°çš„è¿”å›å€¼ç±»å‹ (T)ã€‚ å‚æ•°çš„ç±»å‹ (List)ã€‚ å±€éƒ¨å˜é‡çš„ç±»å‹ (T tmp)ã€‚","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"ç±»","date":"2023-06-17T02:29:30.072Z","path":"wiki/Flutter/Dart/åŸºç¡€/ç±»/","text":"éšå¼æ¥å£æ¯ä¸€ä¸ªç±»éƒ½éšå¼åœ°å®šä¹‰äº†ä¸€ä¸ªæ¥å£å¹¶å®ç°äº†è¯¥æ¥å£ï¼Œè¿™ä¸ªæ¥å£åŒ…å«æ‰€æœ‰è¿™ä¸ªç±»çš„å®ä¾‹æˆå‘˜ä»¥åŠè¿™ä¸ªç±»æ‰€å®ç°çš„å…¶å®ƒæ¥å£ã€‚å¦‚æœæƒ³è¦åˆ›å»ºä¸€ä¸ª A ç±»æ”¯æŒè°ƒç”¨ B ç±»çš„ API ä¸”ä¸æƒ³ç»§æ‰¿ B ç±»ï¼Œåˆ™å¯ä»¥å®ç° B ç±»çš„æ¥å£ã€‚ æ‰©å±•ä¸€ä¸ªç±»ä½¿ç”¨ extends å…³é”®å­—æ¥åˆ›å»ºä¸€ä¸ªå­ç±»ï¼Œå¹¶å¯ä½¿ç”¨ super å…³é”®å­—å¼•ç”¨ä¸€ä¸ªçˆ¶ç±»ï¼š é‡å†™ç±»æˆå‘˜å­ç±»å¯ä»¥é‡å†™çˆ¶ç±»çš„å®ä¾‹æ–¹æ³•ï¼ˆåŒ…æ‹¬ æ“ä½œç¬¦ï¼‰ã€ Getter ä»¥åŠ Setter æ–¹æ³•ã€‚ä½ å¯ä»¥ä½¿ç”¨ @override æ³¨è§£æ¥è¡¨ç¤ºä½ é‡å†™äº†ä¸€ä¸ªæˆå‘˜ï¼š 12345678910class Television &#123; // Â·Â·Â· set contrast(int value) &#123;...&#125;&#125;class SmartTelevision extends Television &#123; @override set contrast(num value) &#123;...&#125; // Â·Â·Â·&#125; noSuchMethodå¦‚æœè°ƒç”¨äº†å¯¹è±¡ä¸Šä¸å­˜åœ¨çš„æ–¹æ³•æˆ–å®ä¾‹å˜é‡å°†ä¼šè§¦å‘ noSuchMethod æ–¹æ³•ï¼Œä½ å¯ä»¥é‡å†™ noSuchMethod æ–¹æ³•æ¥è¿½è¸ªå’Œè®°å½•è¿™ä¸€è¡Œä¸ºï¼š åªæœ‰ä¸‹é¢å…¶ä¸­ä¸€ä¸ªæ¡ä»¶æˆç«‹æ—¶ï¼Œä½ æ‰èƒ½è°ƒç”¨ä¸€ä¸ªæœªå®ç°çš„æ–¹æ³•ï¼š æ¥æ”¶æ–¹æ˜¯é™æ€çš„ dynamic ç±»å‹ã€‚ æ¥æ”¶æ–¹å…·æœ‰é™æ€ç±»å‹ï¼Œå®šä¹‰äº†æœªå®ç°çš„æ–¹æ³•ï¼ˆæŠ½è±¡äº¦å¯ï¼‰ï¼Œå¹¶ä¸”æ¥æ”¶æ–¹çš„åŠ¨æ€ç±»å‹å®ç°äº† noSuchMethod æ–¹æ³•ä¸”å…·ä½“çš„å®ç°ä¸ Object ä¸­çš„ä¸åŒã€‚ æ‰©å±•æ–¹æ³•æ‰©å±•æ–¹æ³•æ˜¯å‘ç°æœ‰åº“æ·»åŠ åŠŸèƒ½çš„ä¸€ç§æ–¹å¼ã€‚è·Ÿkotlinçš„æ‰©å±•æ–¹æ³•æ•ˆæœä¸€æ ·ã€‚ 12345import &#x27;string_apis.dart&#x27;;...print(&#x27;42&#x27;.padLeft(5)); // Use a String method.print(&#x27;42&#x27;.parseInt()); // Use an extension method. å¯è°ƒç”¨ç±»é€šè¿‡å®ç°ç±»çš„ call() æ–¹æ³•ï¼Œå…è®¸ä½¿ç”¨ç±»ä¼¼å‡½æ•°è°ƒç”¨çš„æ–¹å¼æ¥ä½¿ç”¨è¯¥ç±»çš„å®ä¾‹ã€‚ 12345678class WannabeFunction &#123; String call(String a, String b, String c) =&gt; &#x27;$a $b $c!&#x27;;&#125;var wf = WannabeFunction();var out = wf(&#x27;Hi&#x27;, &#x27;there,&#x27;, &#x27;gang&#x27;);void main() =&gt; print(out); æŠ½è±¡ç±» æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼› ä½¿ç”¨abstractä¿®é¥°ï¼› æŠ½è±¡æ–¹æ³•ä¸éœ€è¦ä½¿ç”¨abstractï¼Œæ²¡æœ‰å®ç°ä½“å³å¯ï¼Œç”¨åˆ†å·ç»“æŸï¼› Dartä¸­ï¼Œextendsåªèƒ½ç»§æ‰¿ä¸€ä¸ªç±»ã€‚æ²¡æœ‰interfaceå…³é”®å­—ï¼Œå¯ä»¥æŠŠæŠ½è±¡ç±»å½“æˆæ¥å£ä½¿ç”¨ã€‚ 1234567891011121314151617/// æŠ½è±¡ç±»abstract class Animal&#123; late String name; //æ•°æ® void display()&#123; //æ™®é€šå‡½æ•° print(&quot;åå­—æ˜¯:$&#123;name&#125;&quot;); &#125; /// å¯ä»¥ä¸ç”¨abstractä¿®é¥° void eat(); //æŠ½è±¡å‡½æ•°&#125;class Dog extends Animal&#123; /// å®ç°æŠ½è±¡æ–¹æ³• @override void eat() &#123; //å®ç°æŠ½è±¡å‡½æ•° print(&quot;eat&quot;); &#125;&#125; å‡½æ•°é‡å†™12345678910111213class Animal &#123; late String name; void run() &#123; print(&#x27;run&#x27;); &#125;&#125;class Tiger extends Animal &#123; @Override void run() &#123; print(&#x27;Tiger run&#x27;); &#125;&#125; ä½¿ç”¨Overrideä¿®é¥°ç¬¦ï¼Œå‡½æ•°åå­—ç›¸åŒã€‚","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"æ•°æ®ç±»å‹","date":"2023-06-17T02:29:30.070Z","path":"wiki/Flutter/Dart/åŸºç¡€/æ•°æ®ç±»å‹/","text":"å†…ç½®ç±»å‹ï¼š æ•°æ®ç±»å‹ï¼šnum å­—ç¬¦ä¸²ç±»å‹ï¼šString å¸ƒå°”ç±»å‹ï¼šbool åˆ—è¡¨ç±»å‹ï¼šlist é›†åˆç±»å‹ï¼šSet æ˜ å°„ç±»å‹ï¼šMap Unicodeï¼šRunes æ ‡è¯†ç¬¦ï¼šSymbols NumbersDart ä¸­æ•°å­—ç±»å‹ç”¨äºè¡¨ç¤ºæ•°å­—æ–‡å­—ï¼ŒDart ä¸­çš„æ•°å­—ç±»å‹åˆ†ä¸ºæ•´æ•°å’ŒåŒç²¾åº¦æ•°ä¸¤ç§ï¼Œæ•´æ•°å€¼ä¸å¤§äº64ä½ï¼Œ å…·ä½“å–å†³äºå¹³å°ã€‚ Dartæ”¯æŒä¸¤ç§Numberç±»å‹ï¼š int double 123456789101112131415161718192021222324int i = 11111;double d = 123123123;// String -&gt; intvar one = int.parse(&#x27;1&#x27;);assert(one == 1);// String -&gt; doublevar onePointOne = double.parse(&#x27;1.1&#x27;);assert(onePointOne == 1.1);// int -&gt; StringString oneAsString = 1.toString();assert(oneAsString == &#x27;1&#x27;);// double -&gt; StringString piAsString = 3.14159.toStringAsFixed(2);assert(piAsString == &#x27;3.14&#x27;);assert((3 &lt;&lt; 1) == 6); // 0011 &lt;&lt; 1 == 0110assert((3 | 4) == 7); // 0011 | 0100 == 0111assert((3 &amp; 4) == 0); // 0011 &amp; 0100 == 0000 StringsDart å­—ç¬¦ä¸²æ˜¯ UTF-16 ç¼–ç çš„å­—ç¬¦åºåˆ—ã€‚ å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼Œå•å¼•å·å’ŒåŒå¼•å·å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œå¦åˆ™éœ€è¦ä½¿ç”¨\\è¿›è¡Œè½¬ä¹‰ã€‚å­—ç¬¦ä¸²ä¸­ä¹Ÿå¯ä»¥å¼•ç”¨å˜é‡ä¸è¡¨è¾¾å¼ã€‚ åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œè¯·ä»¥ ${è¡¨è¾¾å¼} çš„å½¢å¼ä½¿ç”¨è¡¨è¾¾å¼ï¼Œå¦‚æœè¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå¯ä»¥çœç•¥æ‰ {}ã€‚å¦‚æœè¡¨è¾¾å¼çš„ç»“æœä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ Dart ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„ toString æ–¹æ³•æ¥è·å–ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ 12345678910111213141516171819202122232425262728293031var name = &#x27;zhangsan&#x27;;//å¦‚æœæ’å…¥ä¸€ä¸ªç®€å•çš„æ ‡è¯†ç¬¦ï¼Œè€Œåé¢æ²¡æœ‰ç´§è·Ÿæ›´å¤šçš„å­—æ¯æ•°å­—æ–‡æœ¬ï¼Œé‚£ä¹ˆ&#123;&#125;åº”è¯¥è¢«çœç•¥ã€‚var a = &quot;my name is $name!&quot;;var b = &quot;my name is $&#123;name.toUpperCase()&#125;!&quot;;var a = &quot;my name is &quot; &quot;zhangsan&quot;;//å¤šä¸ªå­—ç¬¦ä¸²æ”¾ä¸€èµ·æ‹¼æ¥var c = &quot;my name is&quot; + &quot;zhangsan&quot;;//ä½¿ç”¨+æ‹¼æ¥//ä½¿ç”¨ä¸‰ä¸ªå•å¼•å·æˆ–è€…åŒå¼•å·å¯ä»¥åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²å¯¹è±¡var s1 = &#x27;&#x27;&#x27;You can createmulti-line strings like this one.&#x27;&#x27;&#x27;;var s2 = &quot;&quot;&quot;This is also amulti-line string.&quot;&quot;&quot;;//æä¾›ä¸€ä¸ª `r` å‰ç¼€å¯ä»¥åˆ›å»ºä¸€ä¸ª â€œåŸå§‹ rawâ€ å­—ç¬¦ä¸²print(r&quot;æ¢è¡Œç¬¦ï¼š\\n&quot;); // æ¢è¡Œç¬¦ï¼š\\n r:ä¸éœ€è¦è½¬ä¹‰print(&quot;æ¢è¡Œç¬¦ï¼š\\\\n&quot;); // æ¢è¡Œç¬¦ï¼š\\nvar s1 = &#x27;String &#x27; &#x27;concatenation&#x27; &quot; works even over line breaks.&quot;;assert(s1 == &#x27;String concatenation works even over &#x27; &#x27;line breaks.&#x27;);var s2 = &#x27;The + operator &#x27; + &#x27;works, as well.&#x27;;assert(s2 == &#x27;The + operator works, as well.&#x27;); å¸ƒå°”ç±»å‹æœ‰ä¸€ä¸ªåå­—ä¸º bool çš„ç±»å‹ã€‚ åªæœ‰ä¸¤ä¸ªå¯¹è±¡æ˜¯å¸ƒå°”ç±»å‹çš„ï¼štrue å’Œ false 123456789101112131415// Check for an empty string.var fullName = &#x27;&#x27;;assert(fullName.isEmpty);// Check for zero.var hitPoints = 0;assert(hitPoints &lt;= 0);// Check for null.var unicorn;assert(unicorn == null);// Check for NaN.var iMeantToDoThis = 0 / 0;assert(iMeantToDoThis.isNaN); ListsDartä¸­ï¼Œæ•°ç»„ï¼ˆArrayï¼‰ç”±Listå¯¹è±¡è¡¨ç¤ºå¸¸ç”¨å±æ€§ï¼š lengthï¼šè¿”å›å½“å‰Listçš„é•¿åº¦ã€‚ isEmptyï¼šåˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œè¿”å›boolç±»å‹çš„å€¼ã€‚ isNotEmptyï¼šåˆ¤æ–­æ˜¯å¦ä¸ºä¸ç©ºï¼Œè¿”å›boolç±»å‹çš„å€¼ã€‚ reversedï¼šå€’åºè¾“å‡ºListä¸­çš„å€¼ã€‚è¾“å‡ºç»“æœå¹¶ä¸æ˜¯ä¸€ä¸ªListï¼Œéœ€è¦ä½¿ç”¨toList()æ–¹æ³•å°†å…¶åœ¨è½¬æ¢æˆListã€‚ å¸¸ç”¨æ–¹æ³•ï¼š add(VALUE)ï¼šå‘Listä¸­æ·»åŠ å•ä¸ªæ•°æ®ã€‚ addAll([ARRAY])ï¼šä»¥æ•°ç»„çš„å½¢å¼å‘Listä¸­æ·»åŠ å¤šä¸ªæ•°æ®ã€‚ indexOf(ELEMENT)ï¼šæŸ¥æ‰¾ELEMENTæ˜¯å¦åœ¨Listä¸­ã€‚å¦‚æœå­˜åœ¨ï¼Œè¿”å›å…¶ç´¢å¼•å€¼ï¼›å¦‚æœæ˜¯ä¸å­˜åœ¨ï¼Œè¿”å› -1ã€‚ remove(ELEMENT)ï¼šåˆ é™¤ELEMENTã€‚ removeAt(INDEX)ï¼šåˆ é™¤ç´¢å¼•å€¼ä¸ºINDEXçš„å€¼ã€‚ fillRange(START,END,[ VALUE])ï¼šå°†[START,ENDï¼‰èŒƒå›´å†…çš„å€¼æ”¹ä¸º[VALUE]çš„å€¼ã€‚ insert(INDEX,VALUE)ï¼šåœ¨INDEXå¤„æ’å…¥VALUEã€‚ insert(INDEX,LIST)ï¼šåœ¨INDEXå¤„æ’å…¥LISTã€‚ join(SYMBOL)ï¼šä»¥SYMBOLå°†LISTéš”å¼€ï¼Œå¹¶ä»¥Stringç±»å‹è¿”å›ã€‚ STRING.split(SYMBOL)ï¼šå°†å­—ç¬¦ä¸²ä»¥SYMBOLè¿›è¡Œåˆ‡å‰²ï¼Œå¹¶ä»¥Listç±»å‹è¿”å›ã€‚ 12345678910111213141516171819202122232425var list = [1, 2, 3,]; //è¿™ä¸ªå°¾éšé€—å·å¹¶ä¸ä¼šå½±å“é›†åˆï¼Œä½†å®ƒèƒ½æœ‰æ•ˆé¿å…ã€Œå¤åˆ¶ç²˜è´´ã€çš„é”™è¯¯ã€‚//Lists çš„ä¸‹æ ‡ç´¢å¼•ä» 0 å¼€å§‹ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•æ˜¯ 0. list.length - 1 æ˜¯æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•print(list[list.length-1]);//ä¿®æ”¹å…ƒç´ list[0] = 2;//ä½¿ç”¨newï¼ˆå®é™…ä¸Šnewå¯ä»¥çœå»ï¼‰var list = new List(1);list[0] = 2;//åœ¨ list å­—é¢é‡ä¹‹å‰æ·»åŠ  const å…³é”®å­—ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªä¸å˜çš„ list å¯¹è±¡ï¼ˆç¼–è¯‘æ—¶å¸¸é‡ï¼‰var list = const [1,2,3];i.add(2); ///é”™è¯¯ï¼Œlistä¸å¯å˜List&lt;int&gt; list2 = const [1,2,3];// error// list2.add(5);list2 = [1,2,3,4];print(list2);const List&lt;int&gt; list3 = [4,5,6];// list3.add(7);// error// list3 = [1,2,3,4];print(list3); Dart åœ¨ 2.3 å¼•å…¥äº† æ‰©å±•æ“ä½œç¬¦ï¼ˆâ€¦ï¼‰å’Œ ç©ºæ„ŸçŸ¥æ‰©å±•æ“ä½œç¬¦ï¼ˆâ€¦?ï¼‰ï¼Œå®ƒä»¬æä¾›äº†ä¸€ç§å°†å¤šä¸ªå…ƒç´ æ’å…¥é›†åˆçš„ç®€æ´æ–¹æ³•ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨æ‰©å±•æ“ä½œç¬¦ï¼ˆâ€¦ï¼‰å°†ä¸€ä¸ª List ä¸­çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°å¦ä¸€ä¸ª List ä¸­ï¼š 123var list = [1, 2, 3];var list2 = [0, ...list];assert(list2.length == 4); å¦‚æœæ‰©å±•æ“ä½œç¬¦å³è¾¹å¯èƒ½ä¸º null ï¼Œä½ å¯ä»¥ä½¿ç”¨ null-aware æ‰©å±•æ“ä½œç¬¦ï¼ˆâ€¦?ï¼‰æ¥é¿å…äº§ç”Ÿå¼‚å¸¸ï¼š 123var list;var list2 = [0, ...?list];assert(list2.length == 1); Dart è¿˜åŒæ—¶å¼•å…¥äº† é›†åˆä¸­çš„ if å’Œ é›†åˆä¸­çš„ for æ“ä½œï¼Œåœ¨æ„å»ºé›†åˆæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ¡ä»¶åˆ¤æ–­ (if) å’Œå¾ªç¯ (for)ã€‚ 12345678910111213var nav = [ &#x27;Home&#x27;, &#x27;Furniture&#x27;, &#x27;Plants&#x27;, if (promoActive) &#x27;Outlet&#x27;];var listOfInts = [1, 2, 3];var listOfStrings = [ &#x27;#0&#x27;, for (var i in listOfInts) &#x27;#$i&#x27;];assert(listOfStrings[1] == &#x27;#1&#x27;); Mapsé”®å€¼å¯¹ç›¸å…³çš„å¯¹è±¡ã€‚ é”®å’Œå€¼å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ã€‚æ¯ä¸ªé”®åªå‡ºç°ä¸€æ¬¡ï¼Œ è€Œä¸€ä¸ªå€¼åˆ™å¯ä»¥å‡ºç°å¤šæ¬¡ã€‚Dart ä¸­ Map æä¾›äº† Map å­—é¢é‡ä»¥åŠ Map ç±»å‹ä¸¤ç§å½¢å¼çš„ Mapã€‚ Mapçš„ä¸åŒç±»å‹ï¼š HashMapæ˜¯æ— åºçš„ï¼Œè¿™æ„å‘³ç€å®ƒè¿­ä»£çš„é¡ºåºæ˜¯ä¸ç¡®å®šçš„ LinkedHashMapæŒ‰keyçš„æ’å…¥é¡ºåºè¿›è¡Œè¿­ä»£ SplayTreeMapæŒ‰keyçš„æ’åºé¡ºåºè¿›è¡Œè¿­ä»£ å½“Mapçš„ä¸€ä¸ªæ“ä½œæ­£åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œé€šå¸¸ä¸å…è®¸ä¿®æ”¹Mapï¼ˆæ·»åŠ æˆ–åˆ é™¤keyï¼‰ 12345678910111213//ç›´æ¥å£°æ˜ï¼Œç”¨&#123;&#125;è¡¨ç¤ºï¼Œé‡Œé¢å†™keyå’Œvalueï¼Œæ¯ç»„é”®å€¼å¯¹ä¸­é—´ç”¨é€—å·éš”å¼€var companys = &#123;&#x27;a&#x27;: &#x27;é˜¿é‡Œå·´å·´&#x27;, &#x27;t&#x27;: &#x27;è…¾è®¯&#x27;, &#x27;b&#x27;: &#x27;ç™¾åº¦&#x27;&#125;;var companys2 = new Map();companys2[&#x27;a&#x27;] = &#x27;é˜¿é‡Œå·´å·´&#x27;;companys2[&#x27;t&#x27;] = &#x27;è…¾è®¯&#x27;;companys2[&#x27;b&#x27;] = &#x27;ç™¾åº¦&#x27;;//æ·»åŠ å…ƒç´ companys[&#x27;j&#x27;] = &#x27;äº¬ä¸œ&#x27;;//è·å–ä¸ä¿®æ”¹å…ƒç´ var c = companys[&#x27;c&#x27;]; ///æ²¡æœ‰å¯¹åº”çš„keyè¿”å›nullcompanys[&#x27;a&#x27;] = &#x27;alibaba&#x27;; Setsåœ¨ Dart ä¸­ï¼Œset æ˜¯ä¸€ç»„ç‰¹å®šå…ƒç´ çš„æ— åºé›†åˆã€‚ 12345678910111213141516171819202122//å¯ä»¥ä½¿ç”¨åœ¨ &#123;&#125; å‰åŠ ä¸Šç±»å‹å‚æ•°çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªç©ºçš„ Setï¼Œæˆ–è€…å°† &#123;&#125; èµ‹å€¼ç»™ä¸€ä¸ª Set ç±»å‹çš„å˜é‡ï¼švar names = &lt;String&gt;&#123;&#125;;// Set&lt;String&gt; names = &#123;&#125;; // This works, too.// var names = &#123;&#125;; // Creates a map, not a set.Set&lt;String&gt; set = &#123;&#x27;aaa&#x27;, &#x27;bbb&#x27;&#125;;for(var item in set) &#123; print(item);&#125;set.forEach((element) &#123; print(element);&#125;);//æ˜¯å¦åŒ…å«å…ƒç´ if (set.contains(&quot;aaa&quot;)) &#123; print(&quot;åŒ…å«å…ƒç´ &quot;);&#125;set.clear(); Runesåœ¨ Dart ä¸­ï¼Œrunes å…¬å¼€äº†å­—ç¬¦ä¸²çš„ Unicode ç ä½ã€‚ä½¿ç”¨ characters åŒ… æ¥è®¿é—®æˆ–è€…æ“ä½œç”¨æˆ·æ„ŸçŸ¥çš„å­—ç¬¦ï¼Œä¹Ÿè¢«ç§°ä¸º Unicode (æ‰©å±•) grapheme clustersã€‚ å¦‚æœéœ€è¦è·å¾—ç‰¹æ®Šå­—ç¬¦çš„Unicodeç¼–ç ï¼Œæˆ–è€…éœ€è¦å°†32ä½çš„Unicodeç¼–ç è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œå°±å¯ä»¥å€ŸåŠ©Runesç±»ã€‚ Dartè¡¨è¾¾Unicodeä»£ç ç‚¹çš„å¸¸ç”¨æ–¹æ³•æ˜¯\\uXXXXï¼Œå…¶ä¸­XXXXæ˜¯4ä½åå…­è¿›åˆ¶å€¼ã€‚è¦æŒ‡å®šå¤šäºæˆ–å°‘äº4ä¸ªåå…­è¿›åˆ¶æ•°å­—ï¼Œéœ€è¦å°†å€¼æ”¾åœ¨å¤§æ‹¬å·ä¸­ã€‚ 123456789101112131415161718192021222324252627var clapping = &#x27;\\u&#123;1f44f&#125;&#x27;; ///5ä¸ª16è¿›åˆ¶ éœ€è¦ä½¿ç”¨&#123;&#125;print(clapping);////è·å¾— 16ä½ä»£ç å•å…ƒprint(clapping.codeUnits); //[55357, 56399]//è·å¾—unicodeä»£ç print(clapping.runes.toList()); //[128079]//fromCharCode æ ¹æ®å­—ç¬¦ç åˆ›å»ºå­—ç¬¦ä¸²print( String.fromCharCode(128079));print( String.fromCharCodes(clapping.runes));print( String.fromCharCodes([55357, 56399]));print( String.fromCharCode(0x1f44f));Runes input = new Runes( &#x27;\\u2665 \\u&#123;1f605&#125; \\u&#123;1f60e&#125; \\u&#123;1f47b&#125; \\u&#123;1f596&#125; \\u&#123;1f44d&#125;&#x27;);print(String.fromCharCodes(input));import &#x27;package:characters/characters.dart&#x27;;...var hi = &#x27;Hi ğŸ‡©ğŸ‡°&#x27;;print(hi);print(&#x27;The end of the string: $&#123;hi.substring(hi.length - 1)&#125;&#x27;);print(&#x27;The last character: $&#123;hi.characters.last&#125;\\n&#x27;); SymbolsSymbol è¡¨ç¤º Dart ä¸­å£°æ˜çš„æ“ä½œç¬¦æˆ–è€…æ ‡è¯†ç¬¦ã€‚ å¯ä»¥çœ‹ä½œCä¸­çš„å®ã€‚è¡¨ç¤ºç¼–è¯‘æ—¶çš„ä¸€ä¸ªå¸¸é‡ã€‚ 12345678910111213141516var i = #A; //å¸¸é‡main() &#123; print(i); switch(i)&#123; case #A: print(&quot;A&quot;); break; case #B: print(&quot;B&quot;); break; &#125; var b = Symbol(&quot;b&quot;); print(#b == b); ///true&#125; å‚è€ƒ","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"å‡½æ•°","date":"2023-06-17T02:29:30.068Z","path":"wiki/Flutter/Dart/åŸºç¡€/å‡½æ•°/","text":"Dart æ˜¯ä¸€ç§çœŸæ­£é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œæ‰€ä»¥å³ä¾¿å‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡å¹¶ä¸”ç±»å‹ä¸º Functionï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯ä»¥è¢«èµ‹å€¼ç»™å˜é‡æˆ–è€…ä½œä¸ºå…¶å®ƒå‡½æ•°çš„å‚æ•°ã€‚ä½ ä¹Ÿå¯ä»¥åƒè°ƒç”¨å‡½æ•°ä¸€æ ·è°ƒç”¨ Dart ç±»çš„å®ä¾‹ã€‚ 12345678/// boolå¯ä»¥çœç•¥ï¼Œä½†æœ€å¥½ä¿ç•™ï¼Œæé«˜å¯è¯»æ€§bool isNoble(int atomicNumber) &#123; return _nobleGases[atomicNumber] != null;&#125;//å¦‚æœå‡½æ•°ä½“å†…åªåŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨ç®€å†™è¯­æ³•ï¼Œç§°ä¹‹ä¸ºç®­å¤´å‡½æ•°bool isNoble(int atomicNumber) =&gt; _nobleGases[atomicNumber] != null; åœ¨Javaä¸­ï¼Œè¦å®ç°å›è°ƒï¼Œéœ€è¦å®ç°ä¸€ä¸ªæ¥å£ï¼Œåœ¨Dartä¸­ï¼Œåªéœ€è¦ä¼ é€’ä¸€ä¸ªå›è°ƒå‡½æ•°å³å¯ã€‚ 1234567891011121314void setListener(Function listener)&#123; listener(&quot;Success&quot;);&#125;//æˆ–è€…void setListener(void listener(String result))&#123; listener(&quot;Success&quot;);&#125;//ç¬¬ä¸‰ç§ï¼šç±»å‹å®šä¹‰ å°†è¿”å›å€¼ä¸ºvoideï¼Œå‚æ•°ä¸ºä¸€ä¸ªStringçš„æ–¹æ³•å®šä¹‰ä¸ºä¸€ä¸ªç±»å‹ã€‚typedef void Listener(String result)ï¼›void setListener(Listener listener)&#123; listener(&quot;Success&quot;);&#125; 12345678910//ä¹Ÿå¯ä»¥é€‰æ‹©å¿½ç•¥è¿”å›ç±»å‹(ä¸æ¨è)int add(int i,int j) &#123; return i + j;&#125;//å¯¹äºåªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼çš„æ–¹æ³•ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨ç¼©å†™è¯­æ³•æ¥å®šä¹‰ï¼šadd(i, j) =&gt; i + j;//åœ¨ç®­å¤´ (=&gt;) å’Œåˆ†å· (;) ä¹‹é—´åªèƒ½ä½¿ç”¨ä¸€ä¸ªè¡¨è¾¾å¼ æ„é€ å‡½æ•° å¦‚æœä½ æ²¡æœ‰å£°æ˜æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆ Dart ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ— å‚æ•°çš„æ„é€ å‡½æ•°å¹¶ä¸”è¯¥æ„é€ å‡½æ•°ä¼šè°ƒç”¨å…¶çˆ¶ç±»çš„æ— å‚æ•°æ„é€ æ–¹æ³•ã€‚ å­ç±»ä¸ä¼šç»§æ‰¿çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå¦‚æœå­ç±»æ²¡æœ‰å£°æ˜æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆåªä¼šæœ‰ä¸€ä¸ªé»˜è®¤æ— å‚æ•°çš„æ„é€ å‡½æ•°ã€‚ 1234567891011121314class Point &#123; double x = 0; double y = 0; Point(double x, double y) &#123; // There&#x27;s a better way to do this, stay tuned. this.x = x; this.y = y; &#125; //è¯­æ³•ç³– Point(this.x, this.y);&#125; é»˜è®¤æ„é€ å‡½æ•°å¦‚æœæœªå£°æ˜æ„é€ å‡½æ•°ï¼Œåˆ™ä¼šæä¾›é»˜è®¤æ„é€ å‡½æ•°ã€‚ é»˜è®¤æ„é€ å‡½æ•°æ²¡æœ‰å‚æ•°ï¼Œå¹¶è°ƒç”¨çˆ¶ç±»æ— å‚æ•°æ„é€ å‡½æ•°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå­ç±»ä¸­çš„æ„é€ å‡½æ•°è°ƒç”¨çˆ¶ç±»çš„æœªå‘½åæ— å‚æ•°æ„é€ å‡½æ•°ã€‚ çˆ¶ç±»çš„æ„é€ å‡½æ•°åœ¨å­ç±»æ„é€ å‡½æ•°ä½“çš„å¼€å¤´è¢«è°ƒç”¨ã€‚ å¦‚æœè¿˜ä½¿ç”¨åˆå§‹åŒ–äº†åˆ—è¡¨ï¼Œåˆ™ä¼šåœ¨è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¹‹å‰æ‰§è¡Œã€‚ æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š åˆå§‹åŒ–åˆ—è¡¨ çˆ¶ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•° å­ç±»çš„æ— å‚æ•°æ„é€ å‡½æ•° 1234567891011class Parent&#123; Parent()&#123; print(&#x27;In Parent\\&#x27;s constructor.&#x27;); &#125;&#125;class Child extends Parent&#123; Child()&#123; print(&#x27;In Child\\&#x27;s constructor.&#x27;); &#125;&#125; å¦‚æœçˆ¶ç±»æ²¡æœ‰æœªå‘½åçš„æ— å‚æ•°æ„é€ å‡½æ•°ï¼Œåˆ™å¿…é¡»æ‰‹åŠ¨è°ƒç”¨çˆ¶ç±»ä¸­çš„ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä½“ä¹‹åç”¨å†’å·(:)æŒ‡å®šçˆ¶ç±»æ„é€ å‡½æ•° 12345678910111213class Parent&#123; num x; num y; Parent(this.x, this.y)&#123; print(&#x27;In Parent\\&#x27;s constructor.&#x27;); &#125;&#125;class Child extends Parent&#123; Child(num x, num y) : super(x, y)&#123; print(&#x27;In Child\\&#x27;s constructor.&#x27;); &#125;&#125; å‘½åæ„é€ å‡½æ•°123456789101112131415161718192021222324class Point&#123;num x;num y;Point(this.x, this.y);//åˆ›å»ºä¸€ä¸ªåæ ‡åŸç‚¹ç±»Point.origin()&#123; this.x = 0; this.y = 0;&#125;//åˆ›å»ºä¸€ä¸ªåæ ‡ä¸º(100, 100)çš„ç±»Point.coordinate100()&#123; this.x = 100; this.y = 100;&#125;@overrideString toString() &#123; return (&quot;x: $x, y: $y&quot;);&#125;&#125; é‡å®šå‘æ„é€ å‡½æ•°12345678910class Point &#123; num x, y; //ç±»çš„ä¸»æ„é€ å‡½æ•° Point(this.x, this.y); //é‡å®šå‘åˆ°ä¸»æ„é€ å‡½æ•° Point.alongXAxis(num x) : this(x, 0);&#125; åˆå§‹åŒ–åˆ—è¡¨é™¤äº†è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨æ„é€ å‡½æ•°ä½“æ‰§è¡Œä¹‹å‰åˆå§‹åŒ–å®ä¾‹å˜é‡ã€‚æ¯ä¸ªå®ä¾‹å˜é‡ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚ 1234567// Initializer list sets instance variables before// the constructor body runs.Point.fromJson(Map&lt;String, double&gt; json) : x = json[&#x27;x&#x27;]!, y = json[&#x27;y&#x27;]! &#123; print(&#x27;In Point.fromJson(): ($x, $y)&#x27;);&#125; å¸¸é‡æ„é€ å‡½æ•° å¸¸é‡æ„é€ å‡½æ•°éœ€ä»¥constå…³é”®å­—ä¿®é¥° constæ„é€ å‡½æ•°å¿…é¡»ç”¨äºæˆå‘˜å˜é‡éƒ½æ˜¯finalçš„ç±» æ„å»ºå¸¸é‡å®ä¾‹å¿…é¡»ä½¿ç”¨å®šä¹‰çš„å¸¸é‡æ„é€ å‡½æ•° å¦‚æœå®ä¾‹åŒ–æ—¶ä¸åŠ constä¿®é¥°ç¬¦ï¼Œå³ä½¿è°ƒç”¨çš„æ˜¯å¸¸é‡æ„é€ å‡½æ•°ï¼Œå®ä¾‹åŒ–çš„å¯¹è±¡ä¹Ÿä¸æ˜¯å¸¸é‡å®ä¾‹ 1234567891011121314151617181920212223242526272829class ImutablePoint &#123; final int x; final int y; //å¸¸é‡æ„é€ æ–¹æ³• const ImutablePoint(this.x, this.y);&#125;main() &#123;var ip1 = const ImutablePoint(1, 1);var ip2 = const ImutablePoint(1, 1);var ip3 = const ImutablePoint(1, 2);print(ip1.hashCode == ip2.hashCode);print(ip1 == ip2);print(ip1.hashCode == ip3.hashCode);print(ip1 == ip3);output:truetruefalsefalse&#125; å·¥å‚æ„é€ å‡½æ•°ç”±äºä¸‹åˆ’çº¿å¼€å¤´çš„å˜é‡å’Œæ–¹æ³•æ˜¯ç§æœ‰çš„ï¼Œå¯ä»¥è¿ç”¨æ­¤ç‰¹æ€§å®ç°å•ä¾‹æ¨¡å¼ã€‚ å·¥å‚æ„é€ å‡½æ•°ä¸éœ€è¦æ¯æ¬¡æ„å»ºæ–°çš„å®ä¾‹ï¼Œä¸”ä¸ä¼šè‡ªåŠ¨ç”Ÿæˆå®ä¾‹,è€Œæ˜¯é€šè¿‡ä»£ç æ¥å†³å®šè¿”å›çš„å®ä¾‹å¯¹è±¡ï¼›å·¥å‚æ„é€ å‡½æ•°ç±»ä¼¼äº static é™æ€æˆå‘˜ï¼Œæ— æ³•è®¿é—® this æŒ‡é’ˆï¼›ä¸€èˆ¬éœ€è¦ä¾èµ–å…¶ä»–ç±»å‹æ„é€ å‡½æ•°ã€‚ 123456789101112131415161718192021222324class Singleton &#123; static final Singleton _singleton = Singleton.internal(); factory Singleton() =&gt; _singleton; Singleton.internal();&#125;class CommonPrivacyScreen &#123; final String title; final String url; factory CommonPrivacyScreen.privacy() &#123; return CommonPrivacyScreen(title: &quot;title_privacy&quot;,url: &quot;url_privacy&quot;); &#125; factory CommonPrivacyScreen.agreement() &#123; return CommonPrivacyScreen(title: &quot;title_agreement&quot;,url: &quot;title_agreement&quot;); &#125; CommonPrivacyScreen(&#123;Key key, this.title, this.url&#125;) : super(key: key);&#125; å‚æ•°å‡½æ•°å¯ä»¥æœ‰ä¸¤ç§å½¢å¼çš„å‚æ•°ï¼š å¿…è¦å‚æ•°ï¼šå®šä¹‰åœ¨å‚æ•°åˆ—è¡¨å‰é¢ å¯é€‰å‚æ•°ï¼šå®šä¹‰åœ¨å¿…è¦å‚æ•°åé¢ï¼Œå¯é€‰å‚æ•°å¯ä»¥æ˜¯ å‘½åçš„ æˆ– ä½ç½®çš„ å¯é€‰å‘½åå‚æ•°æŠŠæ–¹æ³•çš„å‚æ•°æ”¾åˆ° &#123;&#125; ä¸­å°±å˜æˆå¯é€‰å‘½åå‚æ•°ï¼Œå‘½åå‚æ•°é»˜è®¤ä¸ºå¯é€‰å‚æ•°ï¼Œé™¤éä»–ä»¬è¢«ç‰¹åˆ«æ ‡è®°ä¸º requiredã€‚ 123456789int add(&#123;int? i, int? j&#125;) &#123; if(i == null || j == null)&#123; return 0; &#125; return i + j;&#125;print(add());print(add(i: 1));print(add(i: 2, j: 4)); å¯é€‰ä½ç½®å‚æ•°æŠŠæ–¹æ³•çš„å‚æ•°æ”¾åˆ° [] ä¸­å°±å˜æˆå¯é€‰ä½ç½®å‚æ•°ï¼Œä¼ å€¼æ—¶æŒ‰ç…§å‚æ•°ä½ç½®é¡ºåºä¼ é€’ã€‚ 12345678910111213class SquareBracketsClass &#123; late int x; late int y; // 1ã€2ä¸ºé»˜è®¤å‚æ•° SquareBracketsClass([int x=1, int y=2]) &#123; this.x = x; this.y = y; &#125;&#125;main() &#123; var squareBracketClass = SquareBracketsClass(3); var squareBracketClass2 = SquareBracketsClass(3, 6);&#125; é»˜è®¤å‚æ•°å€¼Dartä¸­æ²¡æœ‰å‡½æ•°é‡è½½ï¼Œå¯ä»¥ç”¨ &#x3D; ä¸ºå‡½æ•°çš„å‘½åå‚æ•°å’Œä½ç½®å‚æ•°å®šä¹‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼å¿…é¡»ä¸ºç¼–è¯‘æ—¶å¸¸é‡ï¼Œæ²¡æœ‰æŒ‡å®šé»˜è®¤å€¼çš„æƒ…å†µä¸‹é»˜è®¤å€¼ä¸º nullã€‚ 12345/// Sets the [bold] and [hidden] flags ...void enableFlags(&#123;bool bold = false, bool hidden = false&#125;) &#123;...&#125;// bold will be true; hidden will be false.enableFlags(bold: true); å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’å‡½æ•°æ˜¯ä¸€çº§å¯¹è±¡ï¼Œå¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥å°†å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ã€‚ 1234567891011121314void printElement(int element) &#123; print(element);&#125;var list = [1, 2, 3];// Pass printElement as a parameter.list.forEach(printElement);var loudify = (msg) =&gt; &#x27;!!! $&#123;msg.toUpperCase()&#125; !!!&#x27;;assert(loudify(&#x27;hello&#x27;) == &#x27;!!! HELLO !!!&#x27;); åŒ¿åå‡½æ•°å¯ä»¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åå­—çš„æ–¹æ³•ï¼Œç§°ä¹‹ä¸º åŒ¿åå‡½æ•°ã€ Lambda è¡¨è¾¾å¼ æˆ– Closure é—­åŒ…ã€‚ä½ å¯ä»¥å°†åŒ¿åæ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ç„¶åä½¿ç”¨å®ƒï¼Œæ¯”å¦‚å°†è¯¥å˜é‡æ·»åŠ åˆ°é›†åˆæˆ–ä»ä¸­åˆ é™¤ã€‚ åŒ¿åæ–¹æ³•çœ‹èµ·æ¥ä¸å‘½åæ–¹æ³•ç±»ä¼¼ï¼Œåœ¨æ‹¬å·ä¹‹é—´å¯ä»¥å®šä¹‰å‚æ•°ï¼Œå‚æ•°ä¹‹é—´ç”¨é€—å·åˆ†å‰²ã€‚ åé¢å¤§æ‹¬å·ä¸­çš„å†…å®¹åˆ™ä¸ºå‡½æ•°ä½“ï¼š 1234567891011121314([[ç±»å‹] å‚æ•°[, â€¦]]) &#123;å‡½æ•°ä½“;&#125;;([Type] param1, â€¦) &#123; codeBlock; &#125;; var list = [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;, &#x27;5&#x27;];list.forEach((i) &#123; print(list[i]);&#125;); å‚è€ƒ","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"åŸºæœ¬è¯­æ³•","date":"2023-06-17T02:29:30.068Z","path":"wiki/Flutter/Dart/åŸºç¡€/åŸºæœ¬è¯­æ³•/","text":"è¯­è¨€ç‰¹æ€§ ä¸€åˆ‡çš†å¯¹è±¡ã€‚ Dartæ²¡æœ‰ publicã€protectedã€private ç­‰å…³é”®å­—ï¼Œå¦‚æœä¸€ä¸ªæ ‡è¯†ç¬¦ä»¥ _å¼€å¤´åˆ™è¡¨ç¤ºç§æœ‰ã€‚ æ ‡è¯†ç¬¦ä»¥å°å†™å­—æ¯æˆ–ä¸‹åˆ’çº¿_å¼€å¤´ï¼Œåé¢è·Ÿç€å­—ç¬¦å’Œæ•°å­—çš„ä»»æ„ç»„åˆã€‚ å˜é‡å˜é‡æ˜¯ä¸€ä¸ªå¼•ç”¨,æœªåˆå§‹åŒ–çš„å˜é‡å€¼æ˜¯nullã€‚ varå£°æ˜çš„å˜é‡åœ¨èµ‹å€¼çš„é‚£ä¸€åˆ»ï¼Œå†³å®šäº†å®ƒæ˜¯ä»€ä¹ˆç±»å‹ã€‚ 1234567//aå·²ç»ç¡®å®šä¸ºnumï¼Œä¸èƒ½å†èµ‹å€¼å­—ç¬¦ä¸²ï¼Œç¼–è¯‘é”™è¯¯var a = 1;a = &quot;a&quot;;//æ­£ç¡® var b;b = 1;b = &quot;a&quot;; dynamicä¸æ˜¯åœ¨ç¼–è¯‘æ—¶å€™ç¡®å®šå®é™…ç±»å‹çš„, è€Œæ˜¯åœ¨è¿è¡Œæ—¶ã€‚dynamicå£°æ˜çš„å˜é‡è¡Œä¸ºä¸Objectä¸€æ ·ï¼Œä½¿ç”¨ä¸€æ ·ï¼Œå…³é”®åœ¨äºè¿è¡Œæ—¶åŸç†ä¸åŒã€‚ æ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡è‡ªåŠ¨è·å–ä¸€ä¸ªé»˜è®¤å€¼ä¸º nullï¼ˆç±»å‹ä¸ºæ•°å­—çš„å˜é‡å¦‚ä½•æ²¡æœ‰åˆå§‹åŒ–å…¶å€¼ä¹Ÿæ˜¯ nullï¼‰ã€‚ åœ¨å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©åŠ ä¸Šå…·ä½“ ç±»å‹ï¼šint a &#x3D; 1; constã€finalfinalæ˜¯è¿è¡Œæ—¶å¸¸é‡ï¼Œåªèƒ½è¢«è®¾ç½®ä¸€æ¬¡ï¼Œè€Œconstæ˜¯ç¼–è¯‘å™¨å¸¸é‡ï¼Œå®ƒçš„å€¼åœ¨ç¼–è¯‘æœŸå°±å¯ä»¥ç¡®å®šï¼Œç¼–è¯‘æ—¶å¸¸é‡èƒ½å¤Ÿè®©ä»£ç è¿è¡Œçš„æ›´é«˜æ•ˆã€‚ 123456//æ­£ç¡®ï¼Œå·²ç»ç¡®å®šçš„å€¼const a = 1;const b = a + 1;//é”™è¯¯,finalä¸èƒ½åœ¨ç¼–è¯‘æ—¶ç¡®å®šå€¼ï¼Œå› æ­¤constä¹Ÿä¸èƒ½ç¡®å®šå€¼final a = 1;const c = a + 1; å‚è€ƒ Flutter:6ç§æ„é€ å‡½æ•°è¯¦è§£","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"å¼‚å¸¸","date":"2023-06-17T02:29:30.068Z","path":"wiki/Flutter/Dart/åŸºç¡€/å¼‚å¸¸/","text":"","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"æ¥å£","date":"2023-06-17T02:29:30.068Z","path":"wiki/Flutter/Dart/åŸºç¡€/æ¥å£/","text":"å®šä¹‰ä½¿ç”¨implementså…³é”®å­—æ¥ä½¿ç”¨æ¥å£ï¼Œå®ç°ç±»å¿…é¡»å®ç°æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•ã€‚Dartä¸­æ²¡æœ‰interfaceå…³é”®å­—ï¼Œimplementsåå¯ä»¥æ¥ä»»æ„ç±»ã€‚implementsåé¢å¯ä»¥è·Ÿå¤šä¸ªç±»ï¼Œä½¿ç”¨é€—å·éš”å¼€ã€‚ æ¯ä¸€ä¸ªç±»éƒ½éšå¼åœ°å®šä¹‰äº†ä¸€ä¸ªæ¥å£å¹¶å®ç°äº†è¯¥æ¥å£ï¼Œè¿™ä¸ªæ¥å£åŒ…å«æ‰€æœ‰è¿™ä¸ªç±»çš„å®ä¾‹æˆå‘˜ä»¥åŠè¿™ä¸ªç±»æ‰€å®ç°çš„å…¶å®ƒæ¥å£ã€‚ Example12","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"Mixin","date":"2023-06-17T02:29:30.066Z","path":"wiki/Flutter/Dart/åŸºç¡€/Mixin/","text":"å®šä¹‰å­—é¢æ„æ€ç†è§£æˆæ··åˆï¼Œå®ƒå¯ä»¥æ··åˆå¤šä¸ªç±»ï¼Œè¾¾åˆ°å¤šç»§æ‰¿çš„æ•ˆæœã€‚ å½“ç»§æ‰¿å¤šä¸ªmixinï¼Œmixinå†…é‡å†™è¦†ç›–äº†åŒä¸€ä¸ªæ–¹æ³•ï¼Œåˆ™è°ƒç”¨æ–¹æ³•æ—¶ä¼šå‘½ä¸­æœ€åwithçš„mixinå¯¹åº”çš„æ–¹æ³•ã€‚å¦‚æœéœ€è¦é“¾è·¯è°ƒç”¨ï¼Œä½¿ç”¨superã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647mixin A &#123; test() &#123; print(&#x27;A&#x27;); &#125;&#125;mixin B &#123; test() &#123; print(&#x27;B&#x27;); &#125;&#125;class C &#123; test() &#123; print(&#x27;C&#x27;); &#125;&#125;/// ä½¿ç”¨withå…³é”®å­—ï¼Œåè·Ÿä¸€ä¸ªæˆ–å¤šä¸ªmixinæˆ–è€…æ™®é€šç±»class D extends C with A, B &#123;&#125;class E extends C with B, A &#123;&#125;main() &#123; D d = D(); d.test(); E e = E(); e.test();&#125;output:BAclass D extends C with A, B &#123;&#125;å¯ä»¥ç†è§£æˆï¼šclass CA = C with A;class CAB = CA with B;class D extends CAS &#123;&#125;æ‰€ä»¥è¾“å‡ºç»“æœä¸ºBclass E extends C with B, A &#123;&#125;class CB = C with B;class CBA = CB with A;class E extends CBA;æ‰€ä»¥è¾“å‡ºç»“æœä¸ºA ononå…³é”®å­—ç”¨æ¥é™åˆ¶mixinçš„ä½¿ç”¨ï¼Œè¿™ä¸ªmixinåªèƒ½ä½¿ç”¨åœ¨onæŒ‡å®šçš„ç±»æˆ–è€…å…¶å­ç±»ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071abstract class Base &#123; a() &#123; print(&quot;base a()&quot;); &#125; b() &#123; print(&quot;base b()&quot;); &#125; c() &#123; print(&quot;base c()&quot;); &#125;&#125;mixin A on Base &#123; a() &#123; print(&quot;A.a()&quot;); //super.a(); &#125; b() &#123; print(&quot;A.b()&quot;); super.b(); &#125;&#125;mixin A2 on Base &#123; a() &#123; print(&quot;A2.a()&quot;); super.a(); &#125;&#125;class B extends Base &#123; a() &#123; print(&quot;B.a()&quot;); super.a(); &#125; b() &#123; print(&quot;B.b()&quot;); super.b(); &#125; c() &#123; print(&quot;B.c()&quot;); super.c(); &#125;&#125;class G extends B with A, A2 &#123;&#125;testMixins() &#123; G t = new G(); t.a(); t.b(); t.c();&#125;outputï¼šÃŸA2.a()A.a()A.b()B.b()base b()B.c()base c() å‚è€ƒ å½»åº•ç†è§£ Dart mixin æœºåˆ¶ Dart ç±»çš„ç»§æ‰¿ä¸æ··å…¥(Mixin) extends ã€ implements ã€ withçš„ç”¨æ³•ä¸åŒºåˆ«","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"Map","date":"2023-06-17T02:29:30.063Z","path":"wiki/Flutter/Dart/åŸºç¡€/Map/","text":"éå†1234567891011121314151617181920212223242526// ä½¿ç”¨ forEach è¿›è¡Œéå†president.forEach( (key, value)&#123; print(&quot;forEach éå† : $key : $value&quot;);&#125; );// 2 . é€šè¿‡ for å¾ªç¯éå† Map é›†åˆ// è°ƒç”¨ Map å¯¹è±¡çš„ keys æˆå‘˜ , è¿”å›ä¸€ä¸ªç”± é”® Key ç»„æˆçš„æ•°ç»„for (var key in president.keys)&#123; print(&quot;for å¾ªç¯éå† : Key : $key , Value : $&#123;president[key]&#125;&quot;);&#125;// 3 . ä½¿ç”¨ map æ–¹æ³•è¿›è¡Œéå†// éå†è¿‡ç¨‹ä¸­ç”Ÿæˆæ–°çš„ Map é›†åˆ// éå†å , ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Map é›†åˆ// ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•° , å‚æ•°æ˜¯ key value , è¿”å›å€¼æ˜¯æ–°çš„ Map é›†åˆMap president2 = president.map( (key, value)&#123; // è¿™é‡Œå°† Map é›†åˆä¸­çš„ Key å’Œ Value è¿›è¡Œé¢ å€’ , ç”Ÿæˆä¸€ä¸ªæ–°çš„ Map é›†åˆ return MapEntry(value, key); &#125;);// æ‰“å°æ–°çš„ Map é›†åˆprint(president2);","tags":[{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"}]},{"title":"ã€Šä¸‡å†åäº”å¹´ã€‹è¯»ä¹¦ç¬”è®°","date":"2023-04-14T03:07:18.813Z","path":"wiki/è¯»ä¹¦ç¬”è®°/ä¸‡å†åäº”å¹´/","text":"","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"CustomMultiChildLayout","date":"2023-03-07T01:21:45.590Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/CustomMultiChildLayout/","text":"CustomMultiChildLayoutä»å­—é¢æ„æ€å°±è¯´çš„å¾ˆæ¸…æ¥šäº†ï¼Œè‡ªå®šä¹‰å¤šä¸ªå­©å­çš„å¸ƒå±€æ§ä»¶ åŸºæœ¬ç”¨æ³•1234567891011121314151617181920212223242526272829303132333435363738CustomMultiChildLayout( delegate: XXXDelegate(dataList), //å§”æ‰˜ ç”¨äºè®¾ç½®childçš„å¤§å°å’Œä½ç½® children: dataList.map((e) =&gt; LayoutId(id: e[&#x27;id&#x27;], child: const _FigureBlock())).toList(), //è§†å›¾ å¯¹åº”æ¯ä¸ªchildæ˜¾ç¤ºçš„æ ·å­)class _FigureBlock extends StatelessWidget &#123;&#125;class XXXDelegate extends MultiChildLayoutDelegate &#123; XXXDelegate(this.dataList); List dataList; /// å¤„ç†å¤§å°å’Œä½ç½® @override void performLayout(Size size) &#123; for (var element in dataList) &#123; String id = element[&#x27;id&#x27;]; Rect rect = element[&#x27;rect&#x27;]; // çº¦æŸå¯¹åº”idçš„childçš„æ¶ˆæ¯ layoutChild(id, BoxConstraints(maxHeight: rect.height, maxWidth: size.width)); // å¯¹åº”idçš„childçš„ä½ç½® positionChild(id, Offset(rect.left, rect.top)); &#125; &#125; /// æ˜¯å¦éœ€è¦é‡æ–°å¸ƒå±€ @override bool shouldRelayout(_BlockEventMultiChildLayoutDelegate oldDelegate) &#123; return oldDelegate.dataList != dataList; &#125;&#125;","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"}]},{"title":"æ²‰æµ¸å¼å¤„ç†","date":"2023-03-02T10:12:11.971Z","path":"wiki/Flutter/æœªåˆ†ç±»/æ²‰æµ¸å¼å¤„ç†/","text":"åŸºæœ¬ä½¿ç”¨(å…¨å±€ç”Ÿæ•ˆ)Flutterä¾§è®¾ç½®123456789101112131415// é»‘è‰²æ²‰æµ¸å¼çŠ¶æ€æ é¢œè‰² é»‘è‰²æ–‡å­—SystemUiOverlayStyle dark = const SystemUiOverlayStyle( // systemNavigationBarColor: Color(0xFF000000), systemNavigationBarDividerColor: null, //è®¾ç½®å¯¼èˆªæ å’Œå†…å®¹åŒºåŸŸçš„åˆ†å‰²çº¿é¢œè‰² systemNavigationBarIconBrightnessï¼šnull, //è®¾ç½®å¯¼èˆªæ å›¾æ ‡çš„é¢œè‰²ï¼Œå¯é€‰å€¼ä¸ºBrightness.lightæˆ–Brightness.darkã€‚ /// æ³¨æ„å®‰å“è¦æƒ³å®ç°æ²‰æµ¸å¼çš„çŠ¶æ€æ  éœ€è¦åº•éƒ¨è®¾ç½®é€æ˜è‰² statusBarColor: Colors.transparent, // çŠ¶æ€æ é¢œè‰²ä¸ºé€æ˜ systemNavigationBarIconBrightness: Brightness.light, statusBarIconBrightness: Brightness.dark, // è®¾ç½®çŠ¶æ€æ å›¾æ ‡çš„é¢œè‰²ï¼Œå¯é€‰å€¼ä¸ºBrightness.lightæˆ–Brightness.darkã€‚ statusBarBrightness: Brightness.light, // è®¾ç½®çŠ¶æ€æ æ–‡å­—çš„é¢œè‰²ï¼Œå¯é€‰å€¼ä¸ºBrightness.lightæˆ–Brightness.darkã€‚);SystemChrome.setSystemUIOverlayStyle(dark); åŸç”Ÿä¾§è®¾ç½®123456789@Overrideprotected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; getWindow().setStatusBarColor(0);//åŸç”Ÿä¾§è®¾ç½®é€æ˜ &#125;&#125; å•ä¸ªé¡µé¢è®¾ç½®å‚è€ƒ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"èµ„æºä½¿ç”¨","date":"2023-03-01T09:32:48.044Z","path":"wiki/Flutter/æœªåˆ†ç±»/èµ„æºä½¿ç”¨/","text":"Flutter åº”ç”¨ç¨‹åºåŒ…å«ä»£ç å’Œ assetsï¼ˆä¹Ÿä¸ºèµ„æºï¼‰ã€‚èµ„æºæ˜¯è¢«æ‰“åŒ…åˆ°åº”ç”¨ç¨‹åºå®‰è£…åŒ…ä¸­ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶è®¿é—®çš„ä¸€ç§æ–‡ä»¶ã€‚å¸¸è§çš„èµ„æºç±»å‹åŒ…æ‹¬é™æ€æ•°æ®ï¼ˆä¾‹å¦‚ JSON æ–‡ä»¶ï¼‰ï¼Œé…ç½®æ–‡ä»¶ï¼Œå›¾æ ‡å’Œå›¾ç‰‡ï¼ˆJPEGï¼ŒWebPï¼ŒGIFï¼ŒåŠ¨ç”» WebP &#x2F; GIFï¼ŒPNGï¼ŒBMP å’Œ WBMPï¼‰ã€‚ æŒ‡å®šèµ„æºFlutterä½¿ç”¨pubspec.yamlæ–‡ä»¶æ¥é…ç½®æ‰€éœ€è¦çš„èµ„æº 12345flutter: assets: - assets/my_icon.png - assets/background.png - directory/ å¦‚æœè¦åŒ…å«ä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰çš„assetsï¼Œéœ€è¦åœ¨ç›®å½•åç§°çš„ç»“å°¾åŠ ä¸Š/ ä¾èµ–åŒ…ä¸­çš„èµ„æºå›¾ç‰‡åŠ è½½ä¾èµ– package ä¸­çš„å›¾åƒï¼Œå¿…é¡»ç»™ AssetImage æä¾› package å‚æ•°ã€‚ ä¾‹å¦‚ï¼Œä½ çš„åº”ç”¨ç¨‹åºä¾èµ–äºä¸€ä¸ªåä¸º my_icons çš„ packageï¼Œå®ƒçš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 123456789.../pubspec.yaml.../icons/heart.png.../icons/1.5x/heart.png.../icons/2.0x/heart.png...etc.// åŠ è½½imageï¼Œä½¿ç”¨packagereturn const AssetImage(&#x27;icons/heart.png&#x27;, package: &#x27;my_icons&#x27;); å¦‚æœä½ å°è£…äº†ä¸€ä¸ªåº“ï¼Œåº“é‡Œé¢æœ‰è‡ªå·±çš„èµ„æºï¼Œé‚£ä¹ˆåšå›¾ç‰‡å±•ç¤ºçš„æ—¶å€™éƒ½éœ€è¦å¸¦ä¸Špackage å‚è€ƒ æ·»åŠ èµ„æºå’Œå›¾ç‰‡(å®˜æ–¹)","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"ã€Šç½®èº«äº‹å†…ã€‹è¯»ä¹¦ç¬”è®°","date":"2023-02-27T08:13:00.858Z","path":"wiki/è¯»ä¹¦ç¬”è®°/ç½®èº«äº‹å†…/","text":"","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"æ•°æ®ç›‘æ§æ–¹æ¡ˆ","date":"2023-02-27T07:56:31.770Z","path":"wiki/æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯/æ•°æ®ç›‘æ§æ–¹æ¡ˆ/","text":"clientå¯¹ç›¸å…³æ•°æ®è¿›è¡Œä¸ŠæŠ¥ï¼ŒæœåŠ¡ç«¯å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œåå°æä¾›ä¸€ä¸ªç½‘ç«™è¿›è¡Œæ•°æ®å±•ç¤ºï¼Œå±•ç¤ºå¯ä»¥ä½¿ç”¨å„ç§å›¾è¡¨ã€‚Grafanaå°±æä¾›äº†å¦‚æ­¤ä¸€å¥—å¼€æºè§£å†³æ–¹æ¡ˆã€‚ Grafana æ˜¯ä¸€ä¸ªå¼€æºçš„æ•°æ®å¯è§†åŒ–å’Œç›‘æ§å¹³å°ï¼Œå…¶åŸç†å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š æ•°æ®æºè¿æ¥ï¼šGrafana æ”¯æŒè¿æ¥å„ç§æ•°æ®æºï¼Œå¦‚ Prometheusã€Elasticsearchã€InfluxDBã€MySQLã€PostgreSQL ç­‰ï¼Œä»¥è·å–æ•°æ®ã€‚å®ƒé€šè¿‡æ’ä»¶æœºåˆ¶æ¥æ”¯æŒä¸åŒçš„æ•°æ®æºï¼Œå¹¶ä¸”æä¾›äº†ä¸€ç»„ API æ¥è·å–æ•°æ®ã€‚ æ•°æ®å­˜å‚¨ï¼šGrafana ä¸ä¼šå­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡æŸ¥è¯¢æ•°æ®æºæ¥è·å–æ•°æ®ã€‚è¿™æ„å‘³ç€ Grafana çš„æ€§èƒ½å–å†³äºæ•°æ®æºçš„æ€§èƒ½ã€‚ æ•°æ®æŸ¥è¯¢ï¼šGrafana æ”¯æŒä½¿ç”¨ç±» SQL è¯­è¨€è¿›è¡Œæ•°æ®æŸ¥è¯¢ï¼Œå¯ä»¥æŸ¥è¯¢æ—¶é—´åºåˆ—æ•°æ®ã€è¡¨æ ¼æ•°æ®ç­‰ã€‚ æ•°æ®å¯è§†åŒ–ï¼šGrafana æ”¯æŒå„ç§æ•°æ®å¯è§†åŒ–æ–¹å¼ï¼Œå¦‚æŠ˜çº¿å›¾ã€æŸ±çŠ¶å›¾ã€é¥¼å›¾ç­‰ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ Grafana æä¾›çš„ç•Œé¢æ¥åˆ›å»ºå’Œé…ç½®é¢æ¿ï¼Œé€‰æ‹©ä¸åŒçš„æ•°æ®æºå’Œå¯è§†åŒ–æ–¹å¼ï¼Œä»¥æ»¡è¶³ä¸åŒçš„éœ€æ±‚ã€‚ æ’ä»¶æ‰©å±•ï¼šGrafana æä¾›äº†ä¸°å¯Œçš„æ’ä»¶æ‰©å±•æœºåˆ¶ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ’ä»¶æ¥æ‰©å±• Grafana çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ”¯æŒæ›´å¤šçš„æ•°æ®æºã€å¯è§†åŒ–æ–¹å¼ç­‰ã€‚ æ€»ä¹‹ï¼ŒGrafana çš„æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡è¿æ¥æ•°æ®æºã€æŸ¥è¯¢æ•°æ®ã€å¯è§†åŒ–æ•°æ®ç­‰æ–¹å¼ï¼Œæä¾›ç”¨æˆ·å‹å¥½çš„æ•°æ®ç›‘æ§å’Œå¯è§†åŒ–åŠŸèƒ½ã€‚ å‚è€ƒ Grafanaå®˜ç½‘","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}]},{"title":"ã€Šç°ä»£ä¸­å›½çš„å½¢æˆã€‹è¯»ä¹¦ç¬”è®°","date":"2023-02-18T11:01:53.648Z","path":"wiki/è¯»ä¹¦ç¬”è®°/ç°ä»£ä¸­å›½çš„å½¢æˆ/","text":"","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"æƒåŠ›ç»“æ„ã€æ”¿æ²»æ¿€åŠ±å’Œç»æµå¢å¤§","date":"2023-02-18T10:12:49.821Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æƒåŠ›ç»“æ„ã€æ”¿æ²»æ¿€åŠ±å’Œç»æµå¢å¤§/","text":"æœ€è¿‘è¯»äº†ã€ŠæƒåŠ›ç»“æ„ã€æ”¿æ²»æ¿€åŠ±å’Œç»æµå¢å¤§ã€‹è¿™æœ¬ä¹¦ã€‚ä¹¦ä¸­é€šè¿‡åˆ†æå¼€å›½åˆ°è‡³ä»Šæµ™æ±Ÿåœ°åŒºçš„ç»æµå‘å±•ä¸æ”¿æ²»çš„è”ç³»ï¼Œå¾ˆå—å¯å‘ã€‚ æ”¿æ²»äººç‰©çš„é¦–è¦ç›®çš„åœ¨äºç¡®ä¿å…¶æ”¿æ²»ç”Ÿå­˜ åœ°æ–¹æ”¿æ²»ç²¾è‹±å¸¸å¸¸é¢ä¸´ä¸ç¡®å®šçš„æ”¿æ²»å’Œæ”¿ç­–ç¯å¢ƒï¼Œä¸ºä¿è¯å…¶æ”¿æ²»ç”Ÿå­˜ï¼Œå°±å¿…é¡»å‘ä¸Šæˆ–å‘ä¸‹å¯»æ±‚æ”¿æ²»æ”¯æŒã€‚å‰è€…æŒ‡å‘ä¸Šçº§æˆ–æ›´æœ‰æƒåŠ›çš„äººå¯»æ±‚æ”¯æŒå’Œä¿æŠ¤ï¼Œåè€…æŒ‡å‘ä¸‹çº§ç”šè‡³æ›´åŸºå±‚çš„æ”¯æŒè€…å¯»æ±‚æ”¿æ²»æ”¯æŒã€‚æœ€ç»ˆä»ä½•å¤„è·å¾—æ”¿æ²»æ”¯æŒï¼Œå–å†³äºä»–ä»¬åœ¨æƒåŠ›ç»“æ„ä¸­æ‰€å¤„çš„ä½ç½®ã€‚å¦‚æœä»–ä»¬åœ¨æ•´ä¸ªæƒåŠ›ç»“æ„å’Œç½‘ç»œä¸­å¤„äºè¾¹ç¼˜åœ°ä½ï¼Œå‘ä¸Šå¯»æ±‚æ”¿æ²»æ”¯æŒå’Œä¿æŠ¤çš„æ¸ é“ä¸å­˜åœ¨ï¼Œå¯¼è‡´ä»–ä»¬æ— æ³•ä¾é ä¸Šçº§çš„åº‡æŠ¤ï¼Œå› è€Œè¿™äº›è¾¹ç¼˜åŒ–çš„æ”¿æ²»ç²¾è‹±å°±å¿…é¡»ä»æ›´åŸºå±‚çš„åŠ›é‡ä¸­å¯»æ±‚æ”¿æ²»æ”¯æŒï¼Œä»¥æœ€å¤§é™åº¦åœ°æé«˜è‡ªå·±çš„æ”¿æ²»ç”Ÿå­˜æ¦‚ç‡ã€‚ åŸºå±‚æ”¯æŒåŠ›é‡å¯¹è¾¹ç¼˜åŒ–æ”¿æ²»ç²¾è‹±æ”¿æ²»åˆ©ç›Šã€‚ åœ°æ–¹åŒ–äº§æƒä¿æŠ¤æœºåˆ¶èƒ½å¤Ÿé•¿æœŸæœ‰æ•ˆè¿è¡Œçš„æ¡ä»¶ï¼Œå³å¯¼è‡´è¾¹ç¼˜åŒ–æ”¿æ²»ç²¾è‹±å’ŒåŸºå±‚æ”¯æŒè€…ä¹‹é—´å½¢æˆé•¿ä¹…æŒç»­çš„å¯ç½®ä¿¡åˆä½œå…³ç³»çš„ç»“æ„æ€§æ¡ä»¶ï¼Œ æ”¿æ²»å› ç´ è€Œä¸æ˜¯å…¶ä»–å› ç´ æ˜¯è§£é‡Šä¸­å›½ç»æµå¢é•¿ï¼ˆåŒ…æ‹¬åœ°åŒºç»æµå¢é•¿ï¼‰å·®å¼‚çš„æœ€é‡è¦çš„å› ç´  ç›¸ä¿¡æœ‰è¿œè§çš„é¢†å¯¼äººä¸€å®šä¼šä¸»åŠ¨é‡‡å–æ”¹é©æªæ–½ä»¥é€‚åº”æ—¶ä»£çš„è¦æ±‚ ä¸€äº›æ€è€ƒ ä¸€ä¸ªå›½å®¶çš„å†³ç­–å±‚çš„æ¯ä¸€ä¸ªå†³å®šéƒ½åº”è¯¥æ…é‡ï¼Œå¦‚æœçš‡å¸å…¨å‡­è‡ªå·±çš„å–œå¥½æ¥åˆ¶å®šå›½ç­–ï¼Œé‚£ä¹ˆè¿™ä¸ªå›½å®¶æ³¨å®šæ´»ä¸é•¿ä¹…ã€‚ é«˜å±‚æ¨è¡Œé›†ä½“åˆ¶ï¼ŒåŸºå±‚å®˜å‘˜ä¸ºäº†ç§ç§åŸå› ï¼Œå¯èƒ½ä¼šå¯¹ä»»åŠ¡å±‚å±‚åŠ ç ï¼Œä¹Ÿå¯èƒ½â€œçä¸€åªçœ¼é—­ä¸€åªçœ¼â€ï¼Œå½±å“åˆ°åº•å±‚äººæ°‘çš„åŸºæœ¬åˆ©ç›Šã€‚çœ‹èµ·æ¥äº‹äº‹æœ‰å› æœï¼›åœ¨æˆ‘ä»¬çš„å¹³å¸¸ç”Ÿæ´»ä¸­ï¼Œå¯ä»¥å¤šå»æ€è€ƒè¿™ä¸ªäº‹æƒ…å…¶æ·±å±‚æ¬¡çš„åŸå› ï¼Œèƒ½å¯¹äº‹ç‰©çœ‹çš„æ›´é€å½»ã€‚ é¥¥è’æ—¶æœŸåº”è¯¥æ²¡æœ‰æˆ–è€…å¾ˆå°‘ä½“åˆ¶å†…çš„äººé¥¿æ­»å§ï¼Ÿå¦‚æœå¯ä»¥é‡æ¥ï¼Œå¯èƒ½ä¼šé€‰æ‹©åŠªåŠ›è¿›å…¥ä½“åˆ¶å†…äº†â€¦ å‚è€ƒ æƒåŠ›ç»“æ„ã€æ”¿æ²»æ¿€åŠ±å’Œç»æµå¢é•¿","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"è¯ä¹¦çš„å‘","date":"2023-02-17T10:30:29.258Z","path":"wiki/ç¨‹åºè¯­è¨€/iOS/è¯ä¹¦çš„å‘/","text":"","tags":[{"name":"iOS","slug":"iOS","permalink":"http://airshu.github.io/tags/iOS/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"iOS","slug":"ç¨‹åºè¯­è¨€/iOS","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/iOS/"}]},{"title":"åµŒå…¥AndroidåŸç”ŸView","date":"2023-02-10T01:27:36.057Z","path":"wiki/Flutter/Androidç«¯/åµŒå…¥AndroidåŸç”ŸView/","text":"å‚è€ƒ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Androidç«¯","slug":"Flutter/Androidç«¯","permalink":"http://airshu.github.io/categories/Flutter/Android%E7%AB%AF/"}]},{"title":"Flutterä¸Androidé€šä¿¡","date":"2023-02-09T05:50:04.727Z","path":"wiki/Flutter/Androidç«¯/Flutterä¸Androidé€šä¿¡/","text":"PlatformChannelFlutterå¯ä»¥é€šè¿‡PlatformChannelä¸åŸç”Ÿä¾§äº’å‘æ¶ˆæ¯ï¼Œæœ‰ä¸‰ç§ç±»å‹ï¼š MethodChannelï¼šç”¨äºä¼ é€’æ–¹æ³•è°ƒç”¨ EventChannelï¼šç”¨äºä¼ é€’äº‹ä»¶ï¼ˆå•å‘ï¼‰ BasicMessageChannelï¼šç”¨äºä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚å¯ä»¥è·å–nativeå±‚çš„å›¾ç‰‡æ•°æ®è¿›è¡Œå±•ç¤º ä¸€äº›æ¦‚å¿µ BinaryMessenger BinaryMessenger æ˜¯ PlatformChannel ä¸ Flutter ç«¯çš„é€šä¿¡çš„å·¥å…·ï¼Œå…¶é€šä¿¡ä½¿ç”¨çš„æ¶ˆæ¯æ ¼å¼ä¸ºäºŒè¿›åˆ¶æ ¼å¼æ•°æ®ï¼ŒBinaryMessenger åœ¨ Android ä¸­æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„å®ç°ç±»ä¸º FlutterNativeView Codec Codec æ˜¯æ¶ˆæ¯ç¼–è§£ç å™¨ï¼Œä¸»è¦ç”¨äºå°†äºŒè¿›åˆ¶æ ¼å¼çš„æ•°æ®è½¬åŒ–ä¸º Handler èƒ½å¤Ÿè¯†åˆ«çš„æ•°æ®ï¼ŒFlutter å®šä¹‰äº†ä¸¤ç§ Codecï¼šMessageCodec å’Œ MethodCodecã€‚MessageCodec ç”¨äºäºŒè¿›åˆ¶æ ¼å¼æ•°æ®ä¸åŸºç¡€æ•°æ®ä¹‹é—´çš„ç¼–è§£ç ï¼ŒBasicMessageChannel æ‰€ä½¿ç”¨çš„ç¼–è§£ç å™¨æ˜¯ MessageCodecã€‚MethodChannel å’Œ EventChannel æ‰€ä½¿ç”¨çš„ç¼–è§£ç å‡ä¸º MethodCodec Handler Flutter å®šä¹‰äº†ä¸‰ç§ç±»å‹çš„ Handlerï¼Œå®ƒä»¬ä¸ PlatformChannel ç±»å‹ä¸€ä¸€å¯¹åº”ï¼Œåˆ†åˆ«æ˜¯ MessageHandlerã€MethodHandlerã€StreamHandlerã€‚åœ¨ä½¿ç”¨ PlatformChannel æ—¶ï¼Œä¼šä¸ºå®ƒæ³¨å†Œä¸€ä¸ª Handlerï¼ŒPlatformChannel ä¼šå°†è¯¥äºŒè¿›åˆ¶æ•°æ®é€šè¿‡ Codec è§£ç ä¸ºè½¬åŒ–ä¸º Handler èƒ½å¤Ÿè¯†åˆ«çš„æ•°æ®ï¼Œå¹¶äº¤ç»™ Handler å¤„ç†ã€‚å½“ Handler å¤„ç†å®Œæ¶ˆæ¯ä¹‹åï¼Œä¼šé€šè¿‡å›è°ƒå‡½æ•°è¿”å› resultï¼Œå°† result é€šè¿‡ç¼–è§£ç å™¨ç¼–ç ä¸ºäºŒè¿›åˆ¶æ ¼å¼æ•°æ®ï¼Œé€šè¿‡ BinaryMessenger å‘é€å› Flutter ç«¯ MethodChannelFlutterä¾§å†™æ³•123456789101112131415// æ„é€ ä¸€ä¸ªMethodChannel å‚æ•°å®šä¹‰ä¸€ä¸ªå”¯ä¸€çš„é€šé“åstatic const platform = MethodChannel(&#x27;methodChannelDemo&#x27;);// è°ƒç”¨nativeçš„æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ–¹æ³•åï¼Œç¬¬äºŒä¸ªä¸ºå‚æ•°// å¯ä»¥è®¾ç½®è¿”å›ç±»å‹// resultä¸ºnativeçš„æ–¹æ³•çš„è¿”å›å€¼ final result = await platform.invokeMethod&lt;int&gt;(&#x27;increment&#x27;, &#123;&#x27;count&#x27;: 1&#125;);// ç›‘å¬åº•å±‚æ¥çš„æ–¹æ³•å›è°ƒplatform.setMethodCallHandler((MethodCall call)&#123;if(call.method == &#x27;callDart&#x27;) &#123;&#125;&#125;); nativeä¾§å†™æ³•12345678910111213141516171819202122232425262728293031323334353637override fun configureFlutterEngine(flutterEngine: FlutterEngine) &#123; val channel = MethodChannel(flutterEngine.dartExecutor, &quot;methodChannelDemo&quot;) .setMethodCallHandler &#123; call, result -&gt; val count: Int? = call.argument&lt;Int&gt;(&quot;count&quot;) if (count == null) &#123; result.error(&quot;INVALID ARGUMENT&quot;, &quot;Value of count cannot be null&quot;, null) &#125; else &#123; when (call.method) &#123; &quot;increment&quot; -&gt; result.success(count + 1) &quot;decrement&quot; -&gt; result.success(count - 1) else -&gt; result.notImplemented() &#125; &#125; &#125; //è°ƒç”¨dartä¾§çš„æ–¹æ³• å‚æ•°åˆ†åˆ«ä¸ºæ–¹æ³•ã€å‚æ•°ã€å›è°ƒ channel.invokeMethod(&quot;callDart&quot;, &quot;Hello&quot;, object: MethodChannel.Result &#123; override fun success(result: Any?) &#123; &#125; override fun error(errorCode: String, errorMessage: String?, errorDetails: Any?) &#123; &#125; override fun notImplemented() &#123; &#125; &#125;)&#125; EventChannelFlutterä¾§å†™æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/// ç›‘å¬streamStreamBuilder&lt;AccelerometerReadings&gt;( stream: Accelerometer.readings, builder: (context, snapshot) &#123; if (snapshot.hasError) &#123; return Text((snapshot.error as PlatformException).message!); &#125; else if (snapshot.hasData) &#123; return Column( mainAxisAlignment: MainAxisAlignment.center, children: [ Text( &#x27;x axis: $&#123;snapshot.data!.x.toStringAsFixed(3)&#125;&#x27;, style: textStyle, ), Text( &#x27;y axis: $&#123;snapshot.data!.y.toStringAsFixed(3)&#125;&#x27;, style: textStyle, ), Text( &#x27;z axis: $&#123;snapshot.data!.z.toStringAsFixed(3)&#125;&#x27;, style: textStyle, ) ], ); &#125; return Text( &#x27;No Data Available&#x27;, style: textStyle, ); &#125;, )class Accelerometer &#123; static const _eventChannel = EventChannel(&#x27;eventChannelDemo&#x27;); /// Method responsible for providing a stream of [AccelerometerReadings] to listen /// to value changes from the Accelerometer sensor. static Stream&lt;AccelerometerReadings&gt; get readings &#123; return _eventChannel.receiveBroadcastStream().map( (dynamic event) =&gt; AccelerometerReadings( event[0] as double, event[1] as double, event[2] as double, ), ); &#125;&#125;class AccelerometerReadings &#123; /// Acceleration force along the x-axis. final double x; /// Acceleration force along the y-axis. final double y; /// Acceleration force along the z-axis. final double z; AccelerometerReadings(this.x, this.y, this.z);&#125; Nativeä¾§å†™æ³•123456789101112131415161718192021222324252627282930313233343536373839val sensorManger: SensorManager = getSystemService(Context.SENSOR_SERVICE) as SensorManagerval accelerometerSensor: Sensor = sensorManger.getDefaultSensor(Sensor.TYPE_ACCELEROMETER)// æ„é€ EventChannel å®šä¹‰å”¯ä¸€æ ‡å¿—EventChannel(flutterEngine.dartExecutor, &quot;eventChannelDemo&quot;) .setStreamHandler(AccelerometerStreamHandler(sensorManger, accelerometerSensor))// ç»§æ‰¿EventChannel.StreamHandlerclass AccelerometerStreamHandler(sManager: SensorManager, s: Sensor) : EventChannel.StreamHandler, SensorEventListener &#123; private val sensorManager: SensorManager = sManager private val accelerometerSensor: Sensor = s private lateinit var eventSink: EventChannel.EventSink override fun onListen(arguments: Any?, events: EventChannel.EventSink?) &#123; if (events != null) &#123; eventSink = events sensorManager.registerListener(this, accelerometerSensor, SensorManager.SENSOR_DELAY_UI) &#125; &#125; override fun onCancel(arguments: Any?) &#123; sensorManager.unregisterListener(this) &#125; override fun onAccuracyChanged(sensor: Sensor?, accuracy: Int) &#123;&#125; override fun onSensorChanged(sensorEvent: SensorEvent?) &#123; if (sensorEvent != null) &#123; val axisValues = listOf(sensorEvent.values[0], sensorEvent.values[1], sensorEvent.values[2]) eventSink.success(axisValues)//å‘flutterå‘é€æ•°æ® &#125; else &#123; eventSink.error(&quot;DATA_UNAVAILABLE&quot;, &quot;Cannot get accelerometer data&quot;, null) &#125; &#125;&#125; BasicMessageChannelå¯ä»¥ç”¨æ¥ä¼ é€’å¦‚å›¾ç‰‡ç­‰æ•°æ®ï¼Œæœ‰ä»¥ä¸‹ç¼–ç æ ¼å¼ï¼š StandardMessageCodec BinaryCodec JSONMessageCodec StringCodec Flutterä¾§å†™æ³•12345678910111213141516171819202122class PlatformImageFetcher &#123; //æœ‰ static const _basicMessageChannel = BasicMessageChannel&lt;dynamic&gt;(&#x27;platformImageDemo&#x27;, StandardMessageCodec()); /// Method responsible for providing the platform image. static Future&lt;Uint8List&gt; getImage() async &#123; //è¯·æ±‚æ•°æ® final reply = await _basicMessageChannel.send(&#x27;getImage&#x27;) as Uint8List?; if (reply == null) &#123; throw PlatformException( code: &#x27;Error&#x27;, message: &#x27;Failed to load Platform Image&#x27;, details: null, ); &#125; return reply; &#125;&#125; Nativeä¾§123456789101112// Registers a MessageHandler for BasicMessageChannel to receive a message from Dart and send// image data in reply.BasicMessageChannel(flutterEngine.dartExecutor, &quot;platformImageDemo&quot;, StandardMessageCodec()) .setMessageHandler &#123; message, reply -&gt; if (message == &quot;getImage&quot;) &#123; val inputStream: InputStream = assets.open(&quot;eat_new_orleans.jpg&quot;) reply.reply(inputStream.readBytes())//å›ä¼ æ•°æ® &#125; &#125; å‚è€ƒ Flutterä¸åŸç”Ÿé€šä¿¡æ€»ç»“ Flutter å®‰å“ Platform ä¸ Dart ç«¯æ¶ˆæ¯é€šä¿¡æ–¹å¼ Channel æºç è§£æ flutteré€šä¿¡æœºåˆ¶-EventChannel","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"Androidç«¯","slug":"Flutter/Androidç«¯","permalink":"http://airshu.github.io/categories/Flutter/Android%E7%AB%AF/"}]},{"title":"äººç±»ä¹‹æ—…","date":"2022-11-13T11:04:27.077Z","path":"wiki/è¯»ä¹¦ç¬”è®°/äººç±»ä¹‹æ—…/","text":"æ‘˜è¦å…±äº§ä¸»ä¹‰é©å‘½æ²¡æœ‰åœ¨å¤§å¤šæ•°ç¤¾ä¼šå–å¾—æˆåŠŸï¼Ÿä¸€ç§è§£é‡Šæ˜¯ï¼Œé©å‘½çš„å¨èƒæ¨åŠ¨å·¥ä¸šåŒ–å›½å®¶é‡‡çº³ç›¸åº”æ”¿ç­–ï¼Œç¼“å’Œäº†é˜¶çº§çŸ›ç›¾ä¸ä¸å¹³ç­‰ï¼Œä¸»è¦æ˜¯æŠ•ç¥¨æƒçš„æ™®åŠã€è´¢å¯Œå†åˆ†é…æƒåŠ›çš„æ‰©å¤§ä»¥åŠç¦åˆ©å›½å®¶åˆ¶åº¦çš„å…´èµ·ç­‰ å°åº¦åœ¨2011å¹´çš„è´«å›°äººå£æ¯”ä¾‹å·²ç»é™è‡³22%ï¼Œä¸­å›½åœ¨2016å¹´å·²ç»ä¸è¶³1%ã€‚ï¼ˆæˆ‘ä»¬å›½å®¶çš„å‘å±•è¿˜æ˜¯æœ‰ç›®å…±ç¹çš„ï¼‰ 2017å¹´ï¼Œå¤§å¤šæ•°å‘è¾¾å›½å®¶æ°‘ä¼—çš„é¢„æœŸå¯¿å‘½è¶…è¿‡80å²ï¼Œå©´å„¿æ­»äº¡ç‡ä½äº5â€°ï¼Œå…¨ä½“å›½æ°‘éƒ½æœ‰ç”µåŠ›ä¾›åº”ï¼Œå¾ˆå¤§éƒ¨åˆ†äººæœ‰äº’è”ç½‘è¿æ¥ï¼Œè¥å…»ä¸è‰¯ç‡ä»…æœ‰çº¦2.5%ã€‚è€Œåœ¨æœ€ä¸å‘è¾¾å›½å®¶ï¼Œé¢„æœŸå¯¿å‘½ä¸è¶³62å²ï¼Œå©´å„¿æ­»äº¡ç‡è¶…è¿‡60â€°ï¼Œä¸åˆ°47%çš„äººæœ‰ç”µåŠ›ä¾›åº”ï¼Œä¸è¶³1â€°çš„äººèƒ½è¿ä¸Šäº’è”ç½‘ï¼Œ19.4%çš„äººå­˜åœ¨è¥å…»ä¸è‰¯ã€‚ï¼ˆè¯¥åº†å¹¸è‡ªå·±æ²¡æœ‰å‡ºç”Ÿåœ¨é‚£äº›åœ°æ–¹ï¼Ÿï¼‰ æƒåŠ›ä¼šæŸç¼šè‡ªç”±åˆ›ä¸šï¼Œå¦¨ç¢æœ‰æ„ä¹‰çš„æ•™è‚²æŠ•èµ„ï¼Œå‹åˆ¶ç»æµå¢é•¿ä¸å‘å±•ã€‚ï¼ˆæƒåŠ›å‹åˆ¶ç»æµå¢é•¿ï¼Œä½†æœ‰æ—¶å€™é›†ä¸­åŠ›é‡æ‰èƒ½åŠå¤§äº‹ï¼Œå›½å®¶é¢†å¯¼äººä»¬åº”è¯¥ä¹Ÿæ˜¯æ®šç²¾ç«­è™‘çš„å§ï¼Œä¸€ä¸ªå†³å®šä¼šå½±å“åƒä¸‡äººçš„ç”Ÿæ´»ï¼‰ 1689å¹´ï¼Œå¨å»‰ä¸‰ä¸–æ­£å¼ç­¾ç½²ã€Šæƒåˆ©æ³•æ¡ˆã€‹ï¼ˆBill of Rightsï¼‰ï¼ŒåºŸé™¤äº†å›ç‹å¯æ’¤é”€è®®ä¼šæ³•æ¡ˆã€ä¸ç»è®®ä¼šåŒæ„è€Œå¾ç¨å’ŒåŠ¨å‘˜å†›é˜Ÿçš„æƒåŠ›ã€‚è‹±å›½å°±æ­¤å˜æˆä¸€ä¸ªå›ä¸»ç«‹å®ªåˆ¶å›½å®¶ã€‚ï¼ˆä¼Ÿäººï¼‰ â€œåç››é¡¿å…±è¯†â€ï¼Œå®ƒæ˜¯ç»™å‘å±•ä¸­å›½å®¶æå‡ºçš„ä¸€æ•´å¥—æ”¿ç­–å»ºè®®ï¼Œé‡ç‚¹åŒ…æ‹¬è´¸æ˜“è‡ªç”±åŒ–ã€å›½æœ‰ä¼ä¸šç§æœ‰åŒ–ã€åŠ å¼ºäº§æƒä¿æŠ¤ã€æ”¾æ¾å¸‚åœºè§„åˆ¶ã€é™ä½è¾¹é™…ç¨ç‡ç­‰ã€‚ï¼ˆæœ‰äº›äº‹æƒ…ä¸æ˜¯å¥—ç”¨å…¬å¼å°±è¡Œäº†ï¼Œç…§æ¬è‹è”æ¨¡å¼å·²ç»è¯æ˜è¡Œä¸é€šäº†ï¼Œå¯ä»¥å€Ÿé‰´ï¼Œ21ä¸–çºªåˆçš„æ—¶å€™æˆ‘ä»¬éƒ½æ˜¯å­¦ä¹ æµ·å¤–å…ˆè¿›çš„äº§å“ç„¶åå›æ¥å¤åˆ»ï¼Œè€Œç°åœ¨æˆ‘ä»¬æœ‰è¶Šæ¥è¶Šå¤šè‡ªå·±å‡ºæµ·çš„äº§å“äº†ï¼‰ æ— è®ºå¤šä¹ˆé«˜æ•ˆçš„æ”¹é©éƒ½ä¸å¯èƒ½åœ¨ä¸€å¤œä¹‹é—´æŠŠè´«ç©·å›½å®¶æ”¹é€ æˆå‘è¾¾ç»æµä½“ï¼Œå› ä¸ºå‘è¾¾å›½å®¶ä¸å‘å±•ä¸­å›½å®¶ä¹‹é—´çš„å¾ˆå¤§å·®åˆ«æ¤æ ¹äºæ•°åƒå¹´ä»¥æ¥çš„æ¼«é•¿è¿›ç¨‹ã€‚èµ·æºäºé¥è¿œè¿‡å»çš„åˆ¶åº¦ã€æ–‡åŒ–ã€åœ°ç†å’Œç¤¾ä¼šç‰¹å¾é€šè¿‡ç‹¬ç‰¹çš„å†å²è·¯å¾„é©±åŠ¨æ–‡æ˜å‘å±•ï¼Œå¯¼è‡´å„å›½è´¢å¯Œæ°´å¹³èµ°å‘åˆ†åŒ–ã€‚æ¯‹åº¸ç½®ç–‘ï¼Œæœ‰åˆ©äºç»æµç¹è£çš„æ–‡åŒ–å’Œåˆ¶åº¦å¯ä»¥é€æ¸è¢«é‡‡çº³å’Œç¡®ç«‹ï¼Œåœ°ç†å› ç´ å’Œå·®å¼‚æ€§å¯¼è‡´çš„å£å’å¯ä»¥è¢«å‰Šå‡ã€‚å¯æ˜¯ï¼Œä»»ä½•å¹²é¢„å¦‚æœå¿½ç•¥æ¯ä¸ªå›½å®¶å‘å±•å†ç¨‹ä¸Šå‡ºç°çš„ç‹¬æœ‰ç‰¹å¾ï¼Œåˆ™ä¸å¤ªå¯èƒ½ç¼©å°è´¢å¯Œä¸å¹³ç­‰ï¼Œåè€Œå®¹æ˜“å¯¼è‡´æŒ«æŠ˜ã€åŠ¨è¡ä¸é•¿æœŸåœæ»ã€‚ å‚è€ƒ è±†ç“£ä¸»é¡µ","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"é€šè®¯åŸç†","date":"2022-10-22T05:37:30.204Z","path":"wiki/Flutter/æœªåˆ†ç±»/é€šè®¯åŸç†/","text":"Flutterå®šä¹‰äº†ä¸‰ç§ä¸åŒç±»å‹çš„Channelï¼š BasicMessageChannelï¼šç”¨äºä¼ é€’å­—ç¬¦ä¸²å’ŒåŠç»“æ„åŒ–çš„ä¿¡æ¯ MethodChannelï¼šç”¨äºä¼ é€’æ–¹æ³•è°ƒç”¨ï¼ˆmethod invocationï¼‰ EventChannel: ç”¨äºæ•°æ®æµï¼ˆevent streamsï¼‰çš„é€šä¿¡ ä¸‰ç§Channelä¹‹é—´äº’ç›¸ç‹¬ç«‹ï¼Œå„æœ‰ç”¨é€”ï¼Œä½†å®ƒä»¬åœ¨è®¾è®¡ä¸Šå´éå¸¸ç›¸è¿‘ã€‚æ¯ç§Channelå‡æœ‰ä¸‰ä¸ªé‡è¦æˆå‘˜å˜é‡ï¼š name: Stringç±»å‹ï¼Œä»£è¡¨Channelçš„åå­—ï¼Œä¹Ÿæ˜¯å…¶å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ messagerï¼šBinaryMessengerç±»å‹ï¼Œä»£è¡¨æ¶ˆæ¯ä¿¡ä½¿ï¼Œæ˜¯æ¶ˆæ¯çš„å‘é€ä¸æ¥æ”¶çš„å·¥å…·ã€‚ codec: MessageCodecç±»å‹æˆ–MethodCodecç±»å‹ï¼Œä»£è¡¨æ¶ˆæ¯çš„ç¼–è§£ç å™¨ã€‚ å‚è€ƒ æ·±å…¥ç†è§£Flutterçš„Platform Channelæœºåˆ¶","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"Shellç”¨æ³•-awk","date":"2022-08-25T08:49:55.715Z","path":"wiki/æŠ€æœ¯å¼€å‘/Shell/Shellç”¨æ³•-awk/","text":"","tags":[{"name":"Shell","slug":"Shell","permalink":"http://airshu.github.io/tags/Shell/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Shell","slug":"æŠ€æœ¯å¼€å‘/Shell","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Shell/"}]},{"title":"Shellç”¨æ³•-sed","date":"2022-08-25T08:49:37.212Z","path":"wiki/æŠ€æœ¯å¼€å‘/Shell/Shellç”¨æ³•-sed/","text":"","tags":[{"name":"Shell","slug":"Shell","permalink":"http://airshu.github.io/tags/Shell/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Shell","slug":"æŠ€æœ¯å¼€å‘/Shell","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Shell/"}]},{"title":"ShellåŸºæœ¬ç”¨æ³•","date":"2022-08-25T08:41:57.975Z","path":"wiki/æŠ€æœ¯å¼€å‘/Shell/ShellåŸºæœ¬ç”¨æ³•/","text":"basename example.tar.a.b.c.gz .c.gz &#x3D;&gt; example.tar.a.bFILE&#x3D;â€example.tar.gzâ€ echo â€œ${FILE%%.*}â€ å–å¤´ example &#x3D;&gt; exampleecho â€œ${FILE%.*}â€ å»å°¾ example.tar.a.b.c &#x3D;&gt; example.tarecho â€œ${FILE#*.}â€ å»å¤´ tar.a.b.c.gz &#x3D;&gt; tar.gzecho â€œ${FILE##*.}â€ å–å°¾ gz &#x3D;&gt; gzåœ¨bashä¸­å¯ä»¥è¿™ä¹ˆå†™filename&#x3D;$(basename â€œ$fullfileâ€)extension&#x3D;â€${filename##.}â€filename&#x3D;â€${filename%.}â€","tags":[{"name":"Shell","slug":"Shell","permalink":"http://airshu.github.io/tags/Shell/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Shell","slug":"æŠ€æœ¯å¼€å‘/Shell","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Shell/"}]},{"title":"Git hooks","date":"2022-08-24T09:46:24.206Z","path":"wiki/æŠ€æœ¯å¼€å‘/Git/githooks/","text":"Git èƒ½åœ¨ç‰¹å®šçš„é‡è¦åŠ¨ä½œå‘ç”Ÿæ—¶è§¦å‘è‡ªå®šä¹‰è„šæœ¬ã€‚ æœ‰ä¸¤ç»„è¿™æ ·çš„é’©å­ï¼šå®¢æˆ·ç«¯çš„å’ŒæœåŠ¡å™¨ç«¯çš„ã€‚ å®¢æˆ·ç«¯é’©å­ç”±è¯¸å¦‚æäº¤å’Œåˆå¹¶è¿™æ ·çš„æ“ä½œæ‰€è°ƒç”¨ï¼Œè€ŒæœåŠ¡å™¨ç«¯é’©å­ä½œç”¨äºè¯¸å¦‚æ¥æ”¶è¢«æ¨é€çš„æäº¤è¿™æ ·çš„è”ç½‘æ“ä½œã€‚ ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°è¿ç”¨è¿™äº›é’©å­ã€‚ é’©å­éƒ½è¢«å­˜å‚¨åœ¨ Git ç›®å½•ä¸‹çš„ hooks å­ç›®å½•ä¸­ã€‚ ä¹Ÿå³ç»å¤§éƒ¨åˆ†é¡¹ç›®ä¸­çš„ .git&#x2F;hooks ã€‚ å½“ä½ ç”¨ git init åˆå§‹åŒ–ä¸€ä¸ªæ–°ç‰ˆæœ¬åº“æ—¶ï¼ŒGit é»˜è®¤ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸­æ”¾ç½®ä¸€äº›ç¤ºä¾‹è„šæœ¬ã€‚ è¿™äº›è„šæœ¬é™¤äº†æœ¬èº«å¯ä»¥è¢«è°ƒç”¨å¤–ï¼Œå®ƒä»¬è¿˜é€éœ²äº†è¢«è§¦å‘æ—¶æ‰€ä¼ å…¥çš„å‚æ•°ã€‚ æ‰€æœ‰çš„ç¤ºä¾‹éƒ½æ˜¯ shell è„šæœ¬ï¼Œå…¶ä¸­ä¸€äº›è¿˜æ··æ‚äº† Perl ä»£ç ï¼Œä¸è¿‡ï¼Œä»»ä½•æ­£ç¡®å‘½åçš„å¯æ‰§è¡Œè„šæœ¬éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨ â€”â€” ä½ å¯ä»¥ç”¨ Ruby æˆ– Pythonï¼Œæˆ–ä»»ä½•ä½ ç†Ÿæ‚‰çš„è¯­è¨€ç¼–å†™å®ƒä»¬ã€‚ è¿™äº›ç¤ºä¾‹çš„åå­—éƒ½æ˜¯ä»¥ .sample ç»“å°¾ï¼Œå¦‚æœä½ æƒ³å¯ç”¨å®ƒä»¬ï¼Œå¾—å…ˆç§»é™¤è¿™ä¸ªåç¼€ã€‚ æŠŠä¸€ä¸ªæ­£ç¡®å‘½åï¼ˆä¸å¸¦æ‰©å±•åï¼‰ä¸”å¯æ‰§è¡Œçš„æ–‡ä»¶æ”¾å…¥ .git ç›®å½•ä¸‹çš„ hooks å­ç›®å½•ä¸­ï¼Œå³å¯æ¿€æ´»è¯¥é’©å­è„šæœ¬ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå®ƒå°±èƒ½è¢« Git è°ƒç”¨ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¼šè®²è§£å¸¸ç”¨çš„é’©å­è„šæœ¬ç±»å‹ã€‚ å‚è€ƒ Git é’©å­ å®˜æ–¹æ‰€æœ‰é’©å­çš„è§£é‡Š Gité¡¹ç›®ç®¡ç†ï¼Œä»£ç è§„èŒƒpre-commitä½¿ç”¨è¯¦è§£","tags":[{"name":"Git","slug":"Git","permalink":"http://airshu.github.io/tags/Git/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"Git","slug":"æŠ€æœ¯å¼€å‘/Git","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Git/"}]},{"title":"æ±½è½¦æ˜¯æ€æ ·è·‘èµ·æ¥çš„","date":"2022-08-06T08:31:29.574Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ±½è½¦æ˜¯æ€æ ·è·‘èµ·æ¥çš„/","text":"æ±½è½¦çš„ç»„æˆåŠ¨åŠ›ä¼ åŠ¨ å‘åŠ¨æœºä¸­æœ‰æ°”ç¼¸å’Œæ´»å¡ï¼Œæ±½æ²¹åœ¨æ°”ç¼¸ä¸­çš„ç‡ƒçƒ§å®¤å†…è¿›è¡Œç„¶åï¼Œå‘çƒ­åè†¨èƒ€ï¼Œè†¨èƒ€ä¸‹å‹æ´»å¡ï¼Œä»è€Œå¸¦åŠ¨æ´»å¡ä¸‹çš„è½´è½¬åŠ¨ï¼Œä»è€Œä½¿è½®èƒè½¬åŠ¨ã€‚ è½¬å‘ç³»ç»Ÿ åˆ¶åŠ¨ç³»ç»Ÿ åˆ¹è½¦æ˜¯é€šè¿‡åˆ¶åŠ¨å«å¤¹ä½ä¸è½®èƒä¸€èµ·è½¬åŠ¨çš„åˆ¶åŠ¨ç›˜ã€‚ å‘åŠ¨æœºå‘åŠ¨æœºæœ‰äºŒå†²ç¨‹å’Œå››å†²ç¨‹ä¹‹åˆ†ã€‚äºŒå†²ç¨‹æŒ‡æ´»å¡æ¯ä¸Šä¸‹å¾€å¤ä¸€æ¬¡ï¼Œç‡ƒçƒ§ä¸€æ¬¡ï¼Œè€Œå››å†²ç¨‹æŒ‡æ´»å¡æ¯ä¸Šä¸‹å¾€å¤ä¸¤æ¬¡ï¼Œç‡ƒçƒ§ä¸€æ¬¡ã€‚ è¡Œé©¶å‘åŠ¨æœºå››å†²ç¨‹æ´»å¡æ°”ç¼¸å‡¸è½®æ›²è½´ç›´æ¥å–·å°„å¸æ°”ç®¡å–·å°„ç©ºç‡ƒæ¯”è“„ç”µæ± èµ·åŠ¨æœºåºŸæ°”æ¶¡è½®å¢å‹å™¨ å˜é€Ÿå™¨åˆ©ç”¨é½¿è½®æ”¹å˜åŠ›é‡æ‰‹åŠ¨å˜é€Ÿå™¨ã€è‡ªåŠ¨å˜é€Ÿå™¨ã€é½¿è½®ã€æ­£é½¿è½®ã€è¡Œæ˜Ÿé½¿è½®ã€ç¦»åˆå™¨ã€æ‰­çŸ©ã€å‘åŠ¨æœºåŠŸç‡ç‰™åµŒå¼ç¦»åˆå™¨ã€åŒæ­¥å•®åˆè£…ç½®ã€å·®é€Ÿå™¨ã€æ¶²åŠ›å˜æ‰­å™¨ã€CVT è½¬å‘è½¬å‘ç³»ç»ŸæŠ“åœ°åŠ›ä¾§ååŠ›å·®é€Ÿå™¨æ‚¬æ¶æ‚¬æ¶æ‘†è‡‚å¼¹ç°§å‡éœ‡å™¨ç¨³å®šå™¨ åœè½¦ç›˜å¼åˆ¶åŠ¨å™¨ã€é¼“å¼åˆ¶åŠ¨å™¨ã€åˆ¶åŠ¨å™¨ä¸»æ°”ç¼¸ã€åˆ¶åŠ¨å¡é’³ã€åˆ¶åŠ¨å«ã€çœŸç©ºå€åŠ›æ³µã€æŠ“åœ°åŠ›ã€ABSã€å‘åŠ¨æœºåˆ¶åŠ¨ èˆ’é€‚æ€§NVHã€å™ªéŸ³ã€æŒ¯åŠ¨ã€å£°æŒ¯ç²—ç³™ã€ç©ºæ°”å‡€åŒ–å™¨ã€æ²Ÿçº¹ã€å¹³æ•´è¡¨é¢ã€æ‚¬æ¶ã€æ©¡èƒ¶è¡¬å¥— å®‰å…¨æ€§ä¸»åŠ¨å®‰å…¨æŠ€æœ¯ã€è¢«åŠ¨å®‰å…¨æŠ€æœ¯ã€é¢„ç¢°æ’å®‰å…¨æŠ€æœ¯ã€ABSã€ESCã€åˆ¶åŠ¨è¾…åŠ©ç³»ç»Ÿã€é›·è¾¾å·¡èˆªæ§åˆ¶ç³»ç»Ÿã€è½¦é“ä¿æŒç³»ç»Ÿã€é¢„ç¢°æ’åˆ¶åŠ¨ã€é¢„ç¢°æ’å®‰å…¨å¸¦ã€å¸èƒ½è½¦èº«ã€3ç‚¹å¼å®‰å…¨å¸¦ã€å®‰å…¨æ°”å›Šã€ä¸»åŠ¨å¼å¤´æ•æŠ€æœ¯ ç”µåŠ¨æ±½è½¦ç”µåŠ¨æ±½è½¦æ˜¯ç”±ç”µè€Œä¸æ˜¯å‘åŠ¨æœºé©±åŠ¨çš„ï¼Œå› æ­¤å‡ ä¹æ²¡æœ‰ä¸å‘åŠ¨æœºç›¸å…³çš„é›¶ä»¶ã€‚åœ¨ç”µåŠ¨æ±½è½¦ä¸­ï¼Œä¸éœ€è¦å‘åŠ¨æœºã€å˜é€Ÿå™¨ã€æ±½æ²¹ç½ã€ç‡ƒæ–™ç®¡é“ã€ç‡ƒæ–™æ³µã€ç‡ƒæ–™å–·å°„è£…ç½®ã€ç‚¹ç«è£…ç½®(ç«èŠ±å¡)ã€è¿›æ’æ°”ç®¡ã€æ±½è½¦å°¾æ°”å‡€åŒ–å™¨ä»¥åŠæ¶ˆé™¤åºŸæ°”å™ªéŸ³çš„æ¶ˆéŸ³å™¨ç­‰é›¶ä»¶ã€‚ä»£æ›¿å®ƒä»¬çš„æ˜¯ä¸€äº›ç”µæ°”å…ƒä»¶ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ç”¨ç”µäº§ç”Ÿæ—‹è½¬åŠ›çš„ç”µåŠ¨æœºã€å‚¨å­˜ç”µçš„è“„ç”µæ± ã€ ç”¨äºæ§åˆ¶çš„å˜é¢‘å™¨å’Œå……ç”µå™¨ç­‰é›¶ä»¶ã€‚ ç”µåŠ¨æœºï¼šç”µåŠ¨æœºå‘ˆåœ†æŸ±å½¢ï¼Œä¸­å¿ƒæœ‰ä¸€æ ¹æ—‹è½¬è½´ï¼Œè½´å‘¨å›´æ˜¯åœ†æŸ±å½¢çš„ç»“æ„ã€‚æ—‹è½¬è½´ä¸Šçš„æ°¸ ä¹…ç£é“å·¦å³æ˜¯æ­£æå’Œè´Ÿæï¼Œåœ†æŸ±å½¢ç»“æ„çš„å†…ä¾§è£…æœ‰ç”µç£é“ã€‚å½“æ—‹è½¬è½´ä¸Šçš„æ°¸ä¹…ç£ é“å’Œåœ†æŸ±å½¢å†…ä¾§çš„ç”µç£é“åŒææ—¶ï¼Œå°±ä¼šç›¸äº’æ’æ–¥ï¼Œå¸¦åŠ¨è½´æ—‹è½¬ã€‚æ—‹è½¬åˆ°ä¸€åŠæ—¶ï¼Œè½´ä¸Šçš„ç£é“ å’Œåœ†æŸ±å½¢ä¸Šçš„ç£é“å°±å˜æˆå¼‚æç›¸å¯¹äº†ï¼Œæ­¤æ—¶å®ƒä»¬ç›¸äº’å¸å¼•ï¼Œè½´ä¹Ÿå°±åœæ­¢è½¬åŠ¨äº†ã€‚ å˜é¢‘å™¨ï¼šè´Ÿè´£è½¬åŠ¨ç”µåŠ¨æœºã€‚å˜é¢‘å™¨æœ‰ä¸¤ä¸ªä½œç”¨ï¼š1ã€è½¬æ¢ç›´æµç”µå’Œäº¤æµç”µï¼›2ã€æ ¹æ®ç”µå™¨çš„å·¥ä½œçŠ¶å†µç²¾å‡†è°ƒæ•´ç”µåŠŸç‡ã€‚ ç”µåŠ¨æ±½è½¦æ˜¯ç”±å‚¨å­˜åœ¨è“„ç”µæ± é‡Œçš„ç”µæ¥é©±åŠ¨çš„ï¼Œè“„ç”µæ± æ”¾å‡ºçš„ç”µæ˜¯ç›´æµç”µï¼Œè€Œç”µåŠ¨æ±½è½¦ä¸Šçš„ç”µåŠ¨æœºæ˜¯ç”±äº¤æµç”µå¸¦åŠ¨çš„ã€‚å› æ­¤ï¼Œåœ¨å°†è“„ç”µæ± æ”¾å‡ºçš„ç›´æµç”µæ¥å…¥ç”µåŠ¨æœºä¹‹å‰ï¼Œè¦åˆ©ç”¨å˜é¢‘å™¨å°†å…¶è½¬æ¢æˆäº¤æµç”µã€‚ è“„ç”µæ± ã€å……ç”µå™¨ã€ äº¤æµç”µã€ç›´æµç”µï¼š ä½¿ç”¨äº¤æµç”µåŠ¨æœºçš„ä½œç”¨æ˜¯åˆ©ç”¨å…¶â€œå†ç”Ÿâ€åŠŸèƒ½ï¼Œæ±½è½¦æ”¾å‡ºçš„ç”µç»™è“„ç”µæ± å……ç”µã€‚ è°ƒèŠ‚å™¨ã€å†ç”Ÿã€åˆ¶åŠ¨åŠ›ã€æ‰­çŸ©ã€è½®æ¯‚ç”µæœºã€é”‚ç¦»å­ç”µæ±  ç¯ä¿å‹æ±½è½¦ç‡ƒæ–™ç”µæ± æ±½è½¦(FCV:Fuel Cell Vehicle)ã€æ··åˆåŠ¨åŠ›æ±½è½¦ã€æ’å…¥å¼æ··åˆåŠ¨åŠ›æ±½è½¦ã€æ¸…æ´ æŸ´æ²¹æ±½è½¦ã€ç”Ÿç‰©ç‡ƒæ–™ã€æ°¢åŠ¨åŠ›è½¦","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"Gerritä½¿ç”¨ç¬”è®°","date":"2022-07-27T09:04:22.916Z","path":"wiki/å·¥å…·è½¯ä»¶/Gerritä½¿ç”¨ç¬”è®°/","text":"Gitlabã€Githubçš„Pull RequeståŠŸèƒ½å¯ä»¥è¿›è¡ŒCode Reviewï¼Œä½†Gerritæ›´å¼ºå¤§ï¼Œå¯ä»¥æ­é…Jenkinsã€LDAPç­‰åœ¨ä¼ä¸šå†…éƒ¨æ­å»ºå®Œå–„çš„Code Reviewæµç¨‹ã€‚è¿™é‡Œè®°å½•ä¸‹è‡ªå·±å¯¹å…¶çš„äº†è§£ï¼Œæ–¹ä¾¿åœ¨å·¥ä½œä¸­ä½¿ç”¨å®ƒã€‚ å®‰è£…1234567891011# ä¸‹è½½waråŒ…wget https://gerrit-releases.storage.googleapis.com/gerrit-3.1.3.war# å®‰è£…java -jar gerrit*.war init --batch --dev --install-all-plugins -d ~/gerrit_testsite# â€”batch é»˜è®¤ä½¿ç”¨ä¸€äº›é…ç½®# â€”dev å¼€å‘ç¯å¢ƒ# -d å®‰è£…ç›®å½•# --install-all-plugins å®‰è£…æ’ä»¶ æ–‡ä»¶å¤¹ç»“æ„ binï¼šå‘½ä»¤å­˜æ”¾ç›®å½• gerrit.shï¼šgerritæœåŠ¡æ§åˆ¶å‘½ä»¤ cache: data: etcï¼šé…ç½®æ–‡ä»¶ä¿å­˜ç›®å½• gerrit.configï¼šç«¯å£é…ç½®ï¼Œåå‘ä»£ç†é…ç½®ï¼Œç­‰ç­‰ gitï¼šé¡¹ç›®æºç ä¿å­˜ç›®å½• logsï¼šæ—¥å¿—æ–‡ä»¶å­˜å‚¨ç›®å½• pluginsï¼šæ’ä»¶å­˜å‚¨ç›®å½• static: tmp: åŸºæœ¬å‘½ä»¤1234cd $GERRIT_SITE/bingerrit.sh startgerrit.sh stopgerrit.sh restart Gerrité…ç½®1234567891011121314151617181920212223242526[gerrit] basePath = D:\\\\Program Files (x86)\\\\PortableGit\\\\bin serverId = c08372c6-a331-4dce-a236-f4c93211f236 canonicalWebUrl = http://192.168.40.8:7001/ # è®¿é—®åœ°å€[database] type = mysql hostname = localhost database = gerrit username = root[index] type = LUCENE[auth] type = HTTP # æˆæƒæ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨HTTPçš„æ–¹å¼å…³è”Apacheã€Nginxï¼›ä¹Ÿå¯ä»¥ä½¿ç”¨LDAPç­‰[receive] enableSignedPush = false[sendemail] smtpServer = localhost[container] user = PC074 javaHome = d:\\\\Program Files\\\\Java\\\\jdk1.8.0_121\\\\jre[sshd] listenAddress = *:123 # ç«¯å£ç»‘å®š[httpd] listenUrl = http://192.168.40.8:7001/ [cache] directory = cache authç±»å‹é…ç½®åå‘ä»£ç†é…ç½®åŸºæœ¬ä½¿ç”¨ ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·æ˜¯è¶…çº§ç®¡ç†å‘˜ï¼ŒIDä¸º1000000 ä½¿ç”¨åŸºæœ¬æµç¨‹ï¼š åˆ›å»ºè´¦å·ï¼Œæ·»åŠ sshå…¬é’¥ é…ç½®ä»“åº“ ç»™ç”¨æˆ·åˆ†é…æƒé™ åˆ›å»ºChange pushä»£ç è¿›è¡ŒReviewæµç¨‹ å¼€å‘è€…ä½¿ç”¨1234567891011121314# æ‹‰å–ä»£ç git clone &quot;ssh://xxx@xx.xxx.201.148:12304/All-Projects&quot; &amp;&amp; scp -p -P 12304 longsj@47.113.201.148:hooks/commit-msg &quot;All-Projects/.git/hooks/&quot;##ä¿®æ”¹vim Readme.MDgit add Readme.MDgit commit -m &quot;change xxx&quot;# æ¨é€ä¿®æ”¹ï¼Œæ¨é€æˆåŠŸågerritåå°ä¼šæœ‰changeè®°å½•git push origin HEAD:refs/for/HEAD# origin : æ˜¯è¿œç¨‹çš„åº“çš„åå­—# HEAD: æ˜¯ä¸€ä¸ªç‰¹åˆ«çš„æŒ‡é’ˆï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘ä½ æ­£åœ¨å·¥ä½œçš„æœ¬åœ°åˆ†æ”¯çš„æŒ‡é’ˆï¼Œå¯ä»¥æŠŠå®ƒå½“åšæœ¬åœ°åˆ†æ”¯çš„åˆ«åï¼Œgitè¿™æ ·å°±å¯ä»¥çŸ¥é“ä½ å·¥ä½œåœ¨å“ªä¸ªåˆ†æ”¯# refs/for :æ„ä¹‰åœ¨äºæˆ‘ä»¬æäº¤ä»£ç åˆ°æœåŠ¡å™¨ä¹‹åæ˜¯éœ€è¦ç»è¿‡code review ä¹‹åæ‰èƒ½è¿›è¡Œmergeçš„ï¼Œforè¡¨ç¤ºæŒ‡å‘æŸä¸ªåˆ†æ”¯ å‚è€ƒ Gerritä½¿ç”¨è¯´æ˜","tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"ä¸°ç”°æ±½è½¦","date":"2022-07-19T03:30:02.884Z","path":"wiki/éšç¬”/Car/ä¸°ç”°æ±½è½¦/","text":"","tags":[{"name":"Car","slug":"Car","permalink":"http://airshu.github.io/tags/Car/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"},{"name":"Car","slug":"éšç¬”/Car","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/Car/"}]},{"title":"ç¦ç‰¹æ±½è½¦","date":"2022-07-19T03:29:53.906Z","path":"wiki/éšç¬”/Car/ç¦ç‰¹æ±½è½¦/","text":"","tags":[{"name":"Car","slug":"Car","permalink":"http://airshu.github.io/tags/Car/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"},{"name":"Car","slug":"éšç¬”/Car","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/Car/"}]},{"title":"å¤§ä¼—æ±½è½¦","date":"2022-07-19T03:29:33.081Z","path":"wiki/éšç¬”/Car/å¤§ä¼—æ±½è½¦/","text":"","tags":[{"name":"Car","slug":"Car","permalink":"http://airshu.github.io/tags/Car/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"},{"name":"Car","slug":"éšç¬”/Car","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/Car/"}]},{"title":"æ±½è½¦å‘å±•å²ç¬”è®°","date":"2022-07-19T03:28:52.575Z","path":"wiki/éšç¬”/Car/æ±½è½¦å‘å±•å²ç¬”è®°/","text":"","tags":[{"name":"Car","slug":"Car","permalink":"http://airshu.github.io/tags/Car/"}],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"},{"name":"Car","slug":"éšç¬”/Car","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/Car/"}]},{"title":"ç»˜åˆ¶åŸç†","date":"2022-04-27T08:41:46.521Z","path":"wiki/Flutter/æºç åˆ†æ/ç»˜åˆ¶åŸç†/","text":"ç›¸å…³ç±» Canvasï¼šå°è£…äº†Flutter Skiaå„ç§ç»˜åˆ¶æŒ‡ä»¤ï¼Œæ¯”å¦‚ç”»çº¿ã€ç”»åœ†ã€ç”»çŸ©å½¢ç­‰æŒ‡ä»¤ã€‚ Layerï¼šåˆ†ä¸ºå®¹å™¨ç±»å’Œç»˜åˆ¶ç±»ä¸¤ç§ï¼›æš‚æ—¶å¯ä»¥ç†è§£ä¸ºæ˜¯ç»˜åˆ¶äº§ç‰©çš„è½½ä½“ï¼Œæ¯”å¦‚è°ƒç”¨ Canvas çš„ç»˜åˆ¶ API åï¼Œç›¸åº”çš„ç»˜åˆ¶äº§ç‰©è¢«ä¿å­˜åœ¨ PictureLayer.picture å¯¹è±¡ä¸­ã€‚ Sceneï¼šå±å¹•ä¸Šå°†è¦è¦æ˜¾ç¤ºçš„å…ƒç´ ã€‚åœ¨ä¸Šå±å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†Layerä¸­ä¿å­˜çš„ç»˜åˆ¶äº§ç‰©å…³è”åˆ° Scene ä¸Šã€‚ Container Layerï¼šç®¡ç†Layersï¼Œæ˜¯å”¯ä¸€å¯ä»¥æ‹¥æœ‰child layerçš„Layerï¼› éContainer Layerï¼šçœŸæ­£ç”¨äºæ‰¿è½½æ¸²æŸ“ç»“æœçš„layerï¼Œåœ¨Layer Treeä¸­å±äºå¶å­ç»“ç‚¹ã€‚æ¯”å¦‚PictureLayeræ‰¿è½½çš„æ˜¯å›¾ç‰‡çš„æ¸²æŸ“ç»“æœï¼ŒTextureLayeræ‰¿è½½çš„æ˜¯çº¹ç†çš„æ¸²æŸ“ç»“æœï¼› ç»˜åˆ¶æµç¨‹å¤§è‡´æµç¨‹ æ„å»ºä¸€ä¸ª Canvasï¼Œç”¨äºç»˜åˆ¶ï¼›åŒæ—¶è¿˜éœ€è¦åˆ›å»ºä¸€ä¸ªç»˜åˆ¶æŒ‡ä»¤è®°å½•å™¨ï¼Œå› ä¸ºç»˜åˆ¶æŒ‡ä»¤æœ€ç»ˆæ˜¯è¦ä¼ é€’ç»™ Skia çš„ï¼Œè€Œ Canvas å¯èƒ½ä¼šè¿ç»­å‘èµ·å¤šæ¡ç»˜åˆ¶æŒ‡ä»¤ï¼ŒæŒ‡ä»¤è®°å½•å™¨ç”¨äºæ”¶é›† Canvas åœ¨ä¸€æ®µæ—¶é—´å†…æ‰€æœ‰çš„ç»˜åˆ¶æŒ‡ä»¤ï¼Œå› æ­¤Canvas æ„é€ å‡½æ•°ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»ä¼ é€’ä¸€ä¸ª PictureRecorder å®ä¾‹ã€‚ Canvas ç»˜åˆ¶å®Œæˆåï¼Œé€šè¿‡ PictureRecorder è·å–ç»˜åˆ¶äº§ç‰©ï¼Œç„¶åå°†å…¶ä¿å­˜åœ¨ Layer ä¸­ã€‚ renderView.compositeFrameæ„å»º Scene å¯¹è±¡ï¼Œå°† layer çš„ç»˜åˆ¶äº§ç‰©å’Œ Scene å…³è”èµ·æ¥ã€‚ ä¸Šå±ï¼›è°ƒç”¨window.render API å°†Sceneä¸Šçš„ç»˜åˆ¶äº§ç‰©å‘é€ç»™GPUã€‚ ç²¾ç»†æµç¨‹ç¬¬ä¸€æ¬¡ç»˜åˆ¶æ—¶ï¼Œä»ä¸Šåˆ°ä¸‹é€’å½’ç»˜åˆ¶å­èŠ‚ç‚¹ï¼Œæ¯å½“é‡åˆ°ä¸€ä¸ªè¾¹ç•ŒèŠ‚ç‚¹ï¼Œåˆ¤æ–­å¦‚æœè¯¥èŠ‚ç‚¹çš„layerå±æ€§æ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å°±åˆ›å»ºä¸€ä¸ªæ–°çš„OffsetLayerå¹¶èµ‹å€¼ç»™å®ƒï¼›ä¸æ˜¯åˆ™ä½¿ç”¨ã€‚ç„¶åå°†layerä¼ é€’ç»™å­èŠ‚ç‚¹ï¼Œæ¥ä¸‹æ¥ï¼š å¦‚æœå­èŠ‚ç‚¹æ˜¯éè¾¹ç•ŒèŠ‚ç‚¹ï¼Œä¸”éœ€è¦ç»˜åˆ¶ï¼Œåˆ™ï¼š ç¬¬ä¸€æ¬¡ç»˜åˆ¶ï¼šåˆ›å»ºä¸€ä¸ªCanvaså¯¹è±¡å’Œä¸€ä¸ªPictureLayerï¼Œç„¶åå°†å®ƒä»¬ç»‘å®šï¼Œåç»­è°ƒç”¨Canvasç»˜åˆ¶éƒ½ä¼šè½åˆ°å’Œå…¶ç»‘å®šçš„PictureLayerä¸Šï¼Œæ¥ç€è¿™ä¸ªPictureLayerä¼šåŠ å…¥åˆ°è¾¹ç•ŒèŠ‚ç‚¹çš„layerä¸­ï¼› ä¸æ˜¯ç¬¬ä¸€æ¬¡ç»˜åˆ¶ï¼šå¤ç”¨å·²æœ‰çš„è¾¹ç•ŒèŠ‚ç‚¹å’ŒCanvaså¯¹è±¡ï¼› å¦‚æœå­èŠ‚ç‚¹æ˜¯è¾¹ç•ŒèŠ‚ç‚¹ï¼Œåˆ™å¯¹å­èŠ‚ç‚¹é€’å½’ä¸Šè¿°è¿‡ç¨‹ã€‚å½“å­æ ‘é€’å½’å®Œæˆåï¼Œå°±è¦å°†å­èŠ‚ç‚¹çš„layeræ·»åŠ åˆ°çˆ¶çº§layerä¸­ã€‚ RenderObjectè°ƒç”¨markNeedsRepaintæ¥å‘èµ·é‡ç»˜ï¼š ä»å½“å‰èŠ‚ç‚¹ä¸€ç›´å¾€çˆ¶çº§æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç»˜åˆ¶è¾¹ç•Œç‚¹æ—¶ç»ˆæ­¢æŸ¥æ‰¾ï¼Œç„¶åä¼šå°†è¯¥ç»˜åˆ¶è¾¹ç•Œç‚¹æ·»åŠ åˆ°å…¶PiplineOwnerçš„_nodesNeedingPaintåˆ—è¡¨ä¸­ã€‚ åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå°†è‡ªå·±åˆ°ç»˜åˆ¶è¾¹ç•Œç‚¹è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„_needPaintå±æ€§è®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºéœ€è¦é‡ç»˜ã€‚ è¯·æ±‚æ–°çš„frameï¼Œæ‰§è¡Œé‡ç»˜æµç¨‹ã€‚ä¸‹ä¸€ä¸ªframeå°±ä¼šèµ°drawFrameæµç¨‹ï¼Œæ¶‰åŠåˆ°flushCompositingBitsã€flushPaint å’Œ compositeFrame ä¸‰ä¸ªå‡½æ•°ã€‚","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"InheritedWidget","date":"2022-04-27T06:32:44.685Z","path":"wiki/Flutter/æºç åˆ†æ/InheritedWidget/","text":"åŸºæœ¬ç”¨æ³•æä¾›ä¸€ç§åœ¨widgetæ ‘ä¸­ä»ä¸Šåˆ°ä¸‹å…±äº«æ•°æ®çš„æ–¹å¼ã€‚ æ ¸å¿ƒå‡½æ•°updateShouldNotifyæ§åˆ¶ä¾èµ–äºInheritedWidgetçš„ç»„ä»¶æ˜¯å¦éœ€è¦é‡å»ºã€‚å¦‚æœä¸ºtrueï¼Œåˆ™å½“InheritedWidgetå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¾èµ–äºå®ƒçš„ç»„ä»¶ä¼šè¢«rebuildï¼Œå…¶Elementçš„didChangeDependenciesä¼šè¢«è°ƒç”¨ã€‚ æºç åˆ†æElementä¸­ï¼Œ_inheritedWidgetsä¿å­˜äº†æ‰€æœ‰ä¸Šçº§èŠ‚ç‚¹çš„InheritedElementã€‚ 1234567891011121314151617Map&lt;Type, InheritedElement&gt;? _inheritedWidgets;/// Elementä¸­void _updateInheritance() &#123; assert(_lifecycleState == _ElementLifecycle.active); _inheritedWidgets = _parent?._inheritedWidgets;&#125;/// InheritedElementä¸­void _updateInheritance() &#123; assert(_lifecycleState == _ElementLifecycle.active); final Map&lt;Type, InheritedElement&gt;? incomingWidgets = _parent?._inheritedWidgets; if (incomingWidgets != null) _inheritedWidgets = HashMap&lt;Type, InheritedElement&gt;.of(incomingWidgets); else _inheritedWidgets = HashMap&lt;Type, InheritedElement&gt;(); _inheritedWidgets![widget.runtimeType] = this;&#125; è·å–InheritedWidgetçš„æ–¹å¼ 12345678910111213141516T? dependOnInheritedWidgetOfExactType&lt;T extends InheritedWidget&gt;(&#123;Object? aspect&#125;) &#123; assert(_debugCheckStateIsActiveForAncestorLookup()); final InheritedElement? ancestor = _inheritedWidgets == null ? null : _inheritedWidgets![T]; if (ancestor != null) &#123; return dependOnInheritedElement(ancestor, aspect: aspect) as T; &#125; _hadUnsatisfiedDependencies = true; return null;&#125;InheritedElement? getElementForInheritedWidgetOfExactType&lt;T extends InheritedWidget&gt;() &#123; assert(_debugCheckStateIsActiveForAncestorLookup()); final InheritedElement? ancestor = _inheritedWidgets == null ? null : _inheritedWidgets![T]; return ancestor;&#125; ä»æ ¹èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼Œä»¥runtimeTypeä½œä¸ºkeyï¼Œä¿å­˜æœ€æ–°çš„Elementå¯¹è±¡ã€‚getElementForInheritedWidgetOfExactTypeæ–¹æ³•å¯ä»¥é€šè¿‡ç±»å‹æŸ¥æ‰¾ç¦»è‡ªå·±æœ€è¿‘çš„ç±»å‹çš„å¯¹è±¡ã€‚dependOnInheritedWidgetOfExactTypeæ–¹æ³•ä¼šæ³¨å†Œä¾èµ–ï¼Œå½“InheritedWidgetå‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šæ›´æ–°ä¾èµ–å®ƒçš„å­ç»„ä»¶ã€‚","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"Context","date":"2022-04-27T06:31:03.354Z","path":"wiki/Flutter/æºç åˆ†æ/Context/","text":"BuildContextBuildContextå°±æ˜¯Widgetå¯¹åº”çš„Elementã€‚ WidgetsFlutterBindingï¼Œå…¶åœ¨åˆ›å»ºçš„æ—¶å€™ç»‘å®šäº† å¦‚æœWidgetæœ‰æ›´æ–°ï¼Œéœ€è¦é‡æ–°å¸ƒå±€ï¼ŒFrameworkä¼šå°†éœ€è¦å¸ƒå±€çš„RenderObjectåŠ å…¥PipelineOwnerçš„_nodesNeedingLayoutä¸­ï¼Œç„¶åå½“ä¸‹ä¸€ä¸ªVSyncä¿¡å·æ¥ä¸´æ—¶ï¼ŒFrameworkä¼šéå†_nodesNeedingLayoutï¼Œå¯¹å…¶ä¸­çš„æ¯ä¸€ä¸ªRenderObjecté‡æ–°è¿›è¡Œå¸ƒå±€ï¼Œéå†_nodesNeedingLayoutçš„å‡½æ•°ã€‚","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"ParentData","date":"2022-04-27T03:43:02.214Z","path":"wiki/Flutter/æºç åˆ†æ/ParentData/","text":"æ¦‚å¿µRenderObjectæœ‰ä¸€ä¸ªparentDataæ’æ§½ï¼ˆslotï¼‰ç”¨äºå­˜å‚¨çˆ¶èŠ‚ç‚¹çš„ä¸€äº›ä¿¡æ¯ï¼Œè¿™ä¸ªæ’æ§½ï¼Œå°±æ˜¯é¢„ç•™ä¸€ä¸ªæ¥å£æˆ–ä½ç½®ï¼Œç”±å…¶ä»–å¯¹è±¡æ¥æ¥å…¥æˆ–å æ®ã€‚ BoxParentData12345678/// Parent data used by [RenderBox] and its subclasses.class BoxParentData extends ParentData &#123; /// The offset at which to paint the child in the parent&#x27;s coordinate system. Offset offset = Offset.zero; @override String toString() =&gt; &#x27;offset=$offset&#x27;;&#125; BoxParentDataç”¨äºRenderBoxï¼Œå¯¹åº”æ™®é€šè§†å›¾åœºæ™¯ã€‚offsetå±æ€§ç”¨äºæè¿°å­èŠ‚ç‚¹åœ¨çˆ¶èŠ‚ç‚¹ä¸­çš„åæ ‡åç§»ï¼Œä¸»è¦ç”¨äºå­èŠ‚ç‚¹çš„å¸ƒå±€ã€‚ BoxParentDataå…³é”®æµç¨‹é€šè¿‡äº†è§£RenderObjectï¼Œæˆ‘ä»¬çŸ¥é“å®ƒçš„ä½œç”¨æ˜¯å¸ƒå±€ã€ç»˜åˆ¶ã€ç‚¹å‡»æµ‹è¯•ã€‚BoxParentDataçš„offsetï¼Œåœ¨å­RenderObjectèŠ‚ç‚¹çš„setupParentDataè¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨performLayoutä¸­å¯¹offsetè¿›è¡Œèµ‹å€¼ï¼Œåœ¨paintå‡½æ•°ä¸­ä½¿ç”¨offsetç¡®è®¤å­èŠ‚ç‚¹çš„ç»˜åˆ¶ä½ç½®ï¼Œåœ¨hitTestChildrenä¸­ä½¿ç”¨offsetè¾…åŠ©åˆ¤æ–­æ˜¯å¦åœ¨ç‚¹å‡»åŒºåŸŸå†…ã€‚","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"RenderObject","date":"2022-04-27T03:12:18.155Z","path":"wiki/Flutter/æºç åˆ†æ/RenderObject/","text":"æ¦‚å¿µRenderObjectè¡¨ç¤ºæ¸²æŸ“æ ‘çš„ä¸€ä¸ªå¯¹è±¡ï¼Œè´Ÿè´£çœŸæ­£çš„æ¸²æŸ“å·¥ä½œï¼Œæ¯”å¦‚åŸºæœ¬å¸ƒå±€å’Œç»˜åˆ¶ã€‚ä½†å¹¶æ²¡æœ‰å®šä¹‰å­èŠ‚ç‚¹æ¨¡å‹ï¼Œä¹Ÿæ²¡æœ‰å®šä¹‰åæ ‡ç³»ç»Ÿå’Œå¸ƒå±€åè®®ï¼Œè¿™äº›åŠŸèƒ½ç”±å…¶å­ç±»RenderBoxå®ç°ã€‚ ä½œç”¨ï¼š å¸ƒå±€ï¼Œä»RenderBoxå¼€å§‹ï¼Œå¯¹RenderObject Treeä»ä¸Šè‡³ä¸‹è¿›è¡Œå¸ƒå±€ã€‚ ç»˜åˆ¶ï¼Œé€šè¿‡Canvaså¯¹è±¡ï¼ŒRenderObjectå¯ä»¥ç»˜åˆ¶è‡ªèº«ä»¥åŠå…¶åœ¨RenderObject Treeä¸­çš„å­èŠ‚ç‚¹ã€‚ ç‚¹å‡»æµ‹è¯•ï¼ŒRenderObjectä»ä¸Šè‡³ä¸‹ä¼ é€’ç‚¹å‡»äº‹ä»¶ï¼Œå¹¶é€šè¿‡å…¶ä½ç½®å’Œbehavioræ¥æ§åˆ¶æ˜¯å¦å“åº”ç‚¹å‡»äº‹ä»¶ã€‚ æ’æ§½ï¼ˆslotï¼‰ï¼šæ‰€è°“æ’æ§½ï¼Œå°±æ˜¯é¢„ç•™ä¸€ä¸ªæ¥å£æˆ–ä½ç½®ï¼Œç”±å…¶ä»–å¯¹è±¡æ¥æ¥å…¥æˆ–å æ®ã€‚ RenderObjectæ‹¥æœ‰ä¸€ä¸ªparentå’ŒparentDataæ’æ§½ï¼ˆslotï¼‰ï¼š parentDataï¼šè´Ÿè´£å­˜å‚¨çˆ¶èŠ‚ç‚¹æ‰€éœ€è¦çš„å­èŠ‚ç‚¹çš„å¸ƒå±€ä¿¡æ¯ã€‚è¯¥æˆå‘˜åªèƒ½é€šè¿‡setupParentDataæ–¹æ³•èµ‹å€¼ï¼ŒRenderObjectçš„å­ç±»é€šè¿‡é‡å†™è¯¥æ–¹æ³•å°†ParentDataçš„å­ç±»èµ‹å€¼ç»™parentDataï¼Œå·²æ‰©å±•ParentDataåŠŸèƒ½ã€‚ layout()ï¼šå¸ƒå±€é˜¶æ®µï¼Œçˆ¶èŠ‚ç‚¹ä¼šè°ƒç”¨å­èŠ‚ç‚¹çš„è¯¥æ–¹æ³•ã€‚ markNeedsLayout()ï¼šæ ‡è®°ä¸‹ä¸€ä¸ªframeé‡æ–°layoutã€‚ paint()ï¼šç»˜åˆ¶ layerï¼š isRepaintBoundaryï¼šç»˜åˆ¶è¾¹ç•Œç‚¹ï¼Œå•ç‹¬çš„ä¸€å±‚æ¸²æŸ“ï¼Œæå‡æ€§èƒ½ needsCompositingï¼š Dirty RenderObjectsRender Object æœ‰4ç§Dirty Stateéœ€è¦PipelineOwnerç»´æŠ¤ï¼š Needing Layoutï¼šRender Objectéœ€è¦é‡æ–°layout Needing Compositing Bits Updateï¼šRender Objectåˆæˆæ ‡å¿—ä½æœ‰å˜åŒ– Needing Paintï¼šRender Objectéœ€è¦é‡æ–°ç»˜åˆ¶ Needing Semanticeï¼šRender Objectè¾…åŠ©ä¿¡æ¯æœ‰å˜åŒ– æ ¸å¿ƒå‡½æ•°æ¯”è¾ƒ ä½œç”¨ Flutter RenderObject Android View ç»˜åˆ¶ paint() draw()&#x2F;onDraw() å¸ƒå±€ performLayout()&#x2F;layout() measure()&#x2F;onMeasure(), layout()&#x2F;onLayout() å¸ƒå±€çº¦æŸ Constraints MeasureSpec å¸ƒå±€åè®®1 performLayout() çš„ Constraints å‚æ•°è¡¨ç¤ºçˆ¶èŠ‚ç‚¹å¯¹å­èŠ‚ç‚¹çš„å¸ƒå±€é™åˆ¶ measure() çš„ä¸¤ä¸ªå‚æ•°è¡¨ç¤ºçˆ¶èŠ‚ç‚¹å¯¹å­èŠ‚ç‚¹çš„å¸ƒå±€é™åˆ¶ å¸ƒå±€åè®®2 performLayout() åº”è°ƒç”¨å„å­èŠ‚ç‚¹çš„ layout() onLayout() åº”è°ƒç”¨å„å­èŠ‚ç‚¹çš„ layout() å¸ƒå±€å‚æ•° parentData mLayoutParams è¯·æ±‚å¸ƒå±€ markNeedsLayout() requestLayout() è¯·æ±‚ç»˜åˆ¶ markNeedsPaint() invalidate() æ·»åŠ  child adoptChild() addView() ç§»é™¤ child dropChild() removeView() å…³è”åˆ°çª—å£&#x2F;æ ‘ attach() onAttachedToWindow() ä»çª—å£&#x2F;æ ‘å–æ¶ˆå…³è” detach() onDetachedFromWindow() è·å– parent parent getParent() è§¦æ‘¸äº‹ä»¶ hitTest() onTouch() ç”¨æˆ·è¾“å…¥äº‹ä»¶ handleEvent() onKey() æ—‹è½¬äº‹ä»¶ rotate() onConfigurationChanged() RenderObjectå­ç±»ï¼š RenderBoxï¼šé‡‡ç”¨2Dç¬›å¡å°”åæ ‡ç³»ä¸­çš„æ¸²æŸ“å¯¹è±¡ã€‚å®ƒå®ç°äº†ä¸€ä¸ªå†…åœ¨çš„å°ºå¯¸è°ƒæ•´åè®®ï¼Œå®ƒå…è®¸æ‚¨åœ¨æ²¡æœ‰å®Œå…¨é“ºè®¾çš„æƒ…å†µä¸‹æµ‹é‡ä¸€ä¸ªå­çº§ï¼Œä»¥è¿™æ ·çš„æ–¹å¼ï¼Œå¦‚æœè¯¥å­çº§æ”¹å˜äº†å°ºå¯¸ï¼Œçˆ¶çº§å°†å†æ¬¡å¸ƒç½®ï¼ˆè€ƒè™‘åˆ°å­çº§çš„æ–°å°ºå¯¸ï¼‰ã€‚è‹¥å¯¹åæ ‡ç³»ç»Ÿæ²¡æœ‰é™åˆ¶ï¼Œå¯ç›´æ¥ç»§æ‰¿å®ƒæ¥å®ç°è‡ªå®šä¹‰RenderObjectã€‚sizeå±æ€§ç”¨æ¥ä¿å­˜æ§ä»¶çš„é«˜å®½ã€‚å…¶layoutæ˜¯é€šè¿‡åœ¨ç»„ä»¶æ ‘ä¸­ä»ä¸Šå¾€ä¸‹ä¼ é€’BoxConstraintså¯¹è±¡å®ç°çš„ã€‚ performResize()ï¼šæµ‹é‡ performLayout()ï¼šå¸ƒå±€ RenderViewï¼šæ¸²æŸ“å¯¹è±¡çš„æ ¹ã€‚å®ƒæœ‰å•ç‹¬çš„å­çº§ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªRenderBoxã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³åœ¨æ¸²æŸ“æ ‘ä¸­æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„RenderObjectå­ç±»ï¼Œä½ æœ‰ä¸¤ç§é€‰æ‹©ï¼šä½ å¯èƒ½éœ€è¦æ›¿æ¢RenderViewæœ¬èº«ï¼Œæˆ–è€…ä½ éœ€è¦ä¸€ä¸ªRenderBoxä½œä¸ºå®ƒçš„å­ç±»ã€‚ RenderAbstractViewportï¼šå†…éƒ¨è¾ƒå¤§çš„æ¸²æŸ“å¯¹è±¡çš„ç•Œé¢ã€‚å…¶æ¸²æŸ“å¯¹è±¡ï¼ˆå¦‚RenderViewportï¼‰æ˜¾ç¤ºå…¶å†…å®¹çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥é€šè¿‡ViewportOffsetè¿›è¡Œæ§åˆ¶ã€‚ RenderSliverï¼šåœ¨è§†å›¾ä¸­å®ç°æ»šåŠ¨æ•ˆæœçš„æ¸²æŸ“å¯¹è±¡çš„åŸºç±»ã€‚RenderViewportæœ‰ä¸€ç»„å­Sliverï¼Œæ¯ä¸ªSliverä¾æ¬¡æ’åˆ—ï¼Œè¦†ç›–è¿‡ç¨‹ä¸­çš„è§†å›¾ã€‚è€ŒRenderSliveråˆ™æ§åˆ¶ç€Sliverçš„ç»˜åˆ¶æ¸²æŸ“ã€‚ RenderObjectWithChildMixinä¸ºåªæœ‰ä¸€ä¸ªchildçš„RenderObjectæä¾›childç®¡ç†æ¨¡å‹ï¼ŒContainerRenderObjectMixinç”¨äºä¸ºå¤šä¸ªchildçš„RenderObjectæä¾›childç®¡ç†æ¨¡å‹ã€‚ å¸ƒå±€å¸ƒå±€è¿‡ç¨‹ çˆ¶èŠ‚ç‚¹å‘å­èŠ‚ç‚¹ä¼ é€’çº¦æŸï¼ˆconstraintsï¼‰ä¿¡æ¯ï¼Œé™åˆ¶å­èŠ‚ç‚¹çš„æœ€å¤§å’Œæœ€å°å®½é«˜ã€‚ å­èŠ‚ç‚¹æ ¹æ®çº¦æŸä¿¡æ¯ç¡®å®šè‡ªå·±çš„å¤§å°ã€‚ çˆ¶èŠ‚ç‚¹æ ¹æ®ç‰¹å®šå¸ƒå±€è§„åˆ™ç¡®å®šæ¯ä¸€ä¸ªå­èŠ‚ç‚¹åœ¨çˆ¶èŠ‚ç‚¹å¸ƒå±€æ§ä»¶ä¸­çš„ä½ç½®ï¼Œç”¨åç§»offsetè¡¨ç¤ºã€‚ é€’å½’æ•´ä¸ªè¿‡ç¨‹ï¼Œç¡®å®šå‡ºæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å¤§å°å’Œä½ç½®ã€‚ layoutæµç¨‹ ç¡®å®šå½“å‰ç»„ä»¶çš„å¸ƒå±€è¾¹ç•Œã€‚ åˆ¤æ–­æ˜¯å¦éœ€è¦é‡æ–°å¸ƒå±€ï¼Œå¦‚æœæ²¡å¿…è¦ä¼šç›´æ¥è¿”å›ï¼Œåä¹‹æ‰éœ€è¦é‡æ–°å¸ƒå±€ã€‚ä¸éœ€è¦å¸ƒå±€è¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶ï¼š å½“å‰ç»„ä»¶æ²¡æœ‰è¢«æ ‡è®°ä¸ºéœ€è¦é‡æ–°å¸ƒå±€ã€‚ çˆ¶ç»„ä»¶ä¼ é€’çš„çº¦æŸæ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚ å½“å‰ç»„ä»¶çš„å¸ƒå±€è¾¹ç•Œæ²¡æœ‰å‘ç”Ÿå˜åŒ–ã€‚ è°ƒç”¨performLayoutè¿›è¡Œå¸ƒå±€ï¼Œå…¶å†…éƒ¨ä¼šè°ƒç”¨å­ç»„ä»¶çš„layoutæ–¹æ³•ã€‚ è¯·æ±‚ç»˜åˆ¶ã€‚ performLayoutæµç¨‹ å¦‚æœæœ‰å­ç»„ä»¶ï¼Œåˆ™å¯¹å­ç»„ä»¶è¿›è¡Œé€’å½’å¸ƒå±€ã€‚ ç¡®å®šå½“å‰ç»„ä»¶çš„å¤§å°ï¼Œé€šå¸¸ä¼šä¾èµ–å­ç»„ä»¶çš„å¤§å°ã€‚ ç¡®å®šå­ç»„ä»¶åœ¨å½“å‰ç»„ä»¶ä¸­çš„èµ·å§‹åç§»ã€‚ 123456789101112131415161718192021222324252627282930313233 void layout(Constraints constraints, &#123; bool parentUsesSize = false &#125;) &#123; RenderObject? relayoutBoundary; // å…ˆç¡®å®šå½“å‰ç»„ä»¶çš„å¸ƒå±€è¾¹ç•Œ if (!parentUsesSize || sizedByParent || constraints.isTight || parent is! RenderObject) &#123; relayoutBoundary = this; &#125; else &#123; relayoutBoundary = (parent! as RenderObject)._relayoutBoundary; &#125; // _needsLayout è¡¨ç¤ºå½“å‰ç»„ä»¶æ˜¯å¦è¢«æ ‡è®°ä¸ºéœ€è¦å¸ƒå±€ // _constraints æ˜¯ä¸Šæ¬¡å¸ƒå±€æ—¶çˆ¶ç»„ä»¶ä¼ é€’ç»™å½“å‰ç»„ä»¶çš„çº¦æŸ // _relayoutBoundary ä¸ºä¸Šæ¬¡å¸ƒå±€æ—¶å½“å‰ç»„ä»¶çš„å¸ƒå±€è¾¹ç•Œ // æ‰€ä»¥ï¼Œå½“å½“å‰ç»„ä»¶æ²¡æœ‰è¢«æ ‡è®°ä¸ºéœ€è¦é‡æ–°å¸ƒå±€ï¼Œä¸”çˆ¶ç»„ä»¶ä¼ é€’çš„çº¦æŸæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œ // ä¸”å¸ƒå±€è¾¹ç•Œä¹Ÿæ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶åˆ™ä¸éœ€è¦é‡æ–°å¸ƒå±€ï¼Œç›´æ¥è¿”å›å³å¯ã€‚ if (!_needsLayout &amp;&amp; constraints == _constraints &amp;&amp; relayoutBoundary == _relayoutBoundary) &#123; return; &#125; // å¦‚æœéœ€è¦å¸ƒå±€ï¼Œç¼“å­˜çº¦æŸå’Œå¸ƒå±€è¾¹ç•Œ _constraints = constraints; _relayoutBoundary = relayoutBoundary; // sizedByParentè¡¨ç¤ºå½“å‰çš„Widgetè™½ç„¶ä¸æ˜¯isTightï¼Œä½†æ˜¯é€šè¿‡å…¶ä»–çº¦æŸå±æ€§ï¼Œä¹Ÿå¯ä»¥æ˜ç¡®çš„çŸ¥é“sizeï¼Œæ¯”å¦‚Expandedï¼Œå¹¶ä¸ä¸€å®šéœ€è¦æ˜ç¡®çš„size if (sizedByParent) &#123; performResize(); &#125; // æ‰§è¡Œå¸ƒå±€ performLayout(); // å¸ƒå±€ç»“æŸåå°† _needsLayout ç½®ä¸º false _needsLayout = false; // å°†å½“å‰ç»„ä»¶æ ‡è®°ä¸ºéœ€è¦é‡ç»˜ï¼ˆå› ä¸ºå¸ƒå±€å‘ç”Ÿå˜åŒ–åï¼Œéœ€è¦é‡æ–°ç»˜åˆ¶ï¼‰ markNeedsPaint();&#125; ç»˜åˆ¶å¤§è‡´æµç¨‹ï¼š ç¬¬ä¸€æ¬¡ç»˜åˆ¶æ—¶ï¼Œä»ä¸Šåˆ°ä¸‹é€’å½’ç»˜åˆ¶å­èŠ‚ç‚¹ï¼Œæ¯å½“é‡åˆ°ä¸€ä¸ªè¾¹ç•ŒèŠ‚ç‚¹ï¼Œåˆ¤æ–­å¦‚æœè¯¥èŠ‚ç‚¹çš„layerå±æ€§æ˜¯å¦ä¸ºç©ºï¼Œæ˜¯å°±åˆ›å»ºä¸€ä¸ªæ–°çš„OffsetLayerå¹¶èµ‹å€¼ç»™å®ƒï¼›ä¸æ˜¯åˆ™ä½¿ç”¨ã€‚ç„¶åå°†layerä¼ é€’ç»™å­èŠ‚ç‚¹ï¼Œæ¥ä¸‹æ¥ï¼š å¦‚æœå­èŠ‚ç‚¹æ˜¯éè¾¹ç•ŒèŠ‚ç‚¹ï¼Œä¸”éœ€è¦ç»˜åˆ¶ï¼Œåˆ™ï¼š ç¬¬ä¸€æ¬¡ç»˜åˆ¶ï¼šåˆ›å»ºä¸€ä¸ªCanvaså¯¹è±¡å’Œä¸€ä¸ªPictureLayerï¼Œç„¶åå°†å®ƒä»¬ç»‘å®šï¼Œåç»­è°ƒç”¨Canvasç»˜åˆ¶éƒ½ä¼šè½åˆ°å’Œå…¶ç»‘å®šçš„PictureLayerä¸Šï¼Œæ¥ç€è¿™ä¸ªPictureLayerä¼šåŠ å…¥åˆ°è¾¹ç•ŒèŠ‚ç‚¹çš„layerä¸­ï¼› ä¸æ˜¯ç¬¬ä¸€æ¬¡ç»˜åˆ¶ï¼šå¤ç”¨å·²æœ‰çš„è¾¹ç•ŒèŠ‚ç‚¹å’ŒCanvaså¯¹è±¡ï¼› å¦‚æœå­èŠ‚ç‚¹æ˜¯è¾¹ç•ŒèŠ‚ç‚¹ï¼Œåˆ™å¯¹å­èŠ‚ç‚¹é€’å½’ä¸Šè¿°è¿‡ç¨‹ã€‚å½“å­æ ‘é€’å½’å®Œæˆåï¼Œå°±è¦å°†å­èŠ‚ç‚¹çš„layeræ·»åŠ åˆ°çˆ¶çº§layerä¸­ã€‚ RenderObjectè°ƒç”¨markNeedsRepaintæ¥å‘èµ·é‡ç»˜ï¼š ä»å½“å‰èŠ‚ç‚¹ä¸€ç›´å¾€çˆ¶çº§æŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªç»˜åˆ¶è¾¹ç•Œç‚¹æ—¶ç»ˆæ­¢æŸ¥æ‰¾ï¼Œç„¶åä¼šå°†è¯¥ç»˜åˆ¶è¾¹ç•Œç‚¹æ·»åŠ åˆ°å…¶PiplineOwnerçš„_nodesNeedingPaintåˆ—è¡¨ä¸­ã€‚ åœ¨æŸ¥æ‰¾çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå°†è‡ªå·±åˆ°ç»˜åˆ¶è¾¹ç•Œç‚¹è·¯å¾„ä¸Šæ‰€æœ‰èŠ‚ç‚¹çš„_needPaintå±æ€§è®¾ç½®ä¸ºtrueï¼Œè¡¨ç¤ºéœ€è¦é‡ç»˜ã€‚ è¯·æ±‚æ–°çš„frameï¼Œæ‰§è¡Œé‡ç»˜æµç¨‹ã€‚ä¸‹ä¸€ä¸ªframeå°±ä¼šèµ°drawFrameæµç¨‹ï¼Œæ¶‰åŠåˆ°flushCompositingBitsã€flushPaint å’Œ compositeFrame ä¸‰ä¸ªå‡½æ•°ã€‚ 123456789101112131415161718void markNeedsPaint() &#123; if (_needsPaint) return; _needsPaint = true; if (isRepaintBoundary) &#123; // å¦‚æœæ˜¯å½“å‰èŠ‚ç‚¹æ˜¯è¾¹ç•ŒèŠ‚ç‚¹ owner!._nodesNeedingPaint.add(this); //å°†å½“å‰èŠ‚ç‚¹æ·»åŠ åˆ°éœ€è¦é‡æ–°ç»˜åˆ¶çš„åˆ—è¡¨ä¸­ã€‚ owner!.requestVisualUpdate(); // è¯·æ±‚æ–°çš„frameï¼Œè¯¥æ–¹æ³•æœ€ç»ˆä¼šè°ƒç”¨scheduleFrame() &#125; else if (parent is RenderObject) &#123; // è‹¥ä¸æ˜¯è¾¹ç•ŒèŠ‚ç‚¹ä¸”å­˜åœ¨çˆ¶èŠ‚ç‚¹ final RenderObject parent = this.parent! as RenderObject; parent.markNeedsPaint(); // é€’å½’è°ƒç”¨çˆ¶èŠ‚ç‚¹çš„markNeedsPaint &#125; else &#123; // å¦‚æœæ˜¯æ ¹èŠ‚ç‚¹ï¼Œç›´æ¥è¯·æ±‚æ–°çš„ frame å³å¯ if (owner != null) owner!.requestVisualUpdate(); &#125;&#125; å‘½ä¸­æµ‹è¯•å‘½ä¸­æµ‹è¯•ç”¨æ¥åˆ¤æ–­æŸä¸ªç»„ä»¶æ˜¯å¦éœ€è¦å“åº”ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œå…¶å…¥å£æ˜¯RenderObject Treeçš„æ ¹èŠ‚ç‚¹RenderViewçš„hitTestå‡½æ•° 123456bool hitTest(HitTestResult result, &#123; Offset position &#125;) &#123; if (child != null) child.hitTest(BoxHitTestResult.wrap(result), position: position);//childä¸ºRenderView result.add(HitTestEntry(this)); return true;&#125; æŸ¥çœ‹RenderViewæºç  123456789bool hitTest(BoxHitTestResult result, &#123; @required Offset position &#125;) &#123; if (_size.contains(position)) &#123; if (hitTestChildren(result, position: position) || hitTestSelf(position)) &#123; result.add(BoxHitTestEntry(this, position)); return true; &#125; &#125; return false;&#125; å¦‚æœç‚¹å‡»äº‹ä»¶ä½ç½®å¤„äºRenderObjectä¹‹å†…ï¼Œå¦‚æœåœ¨å…¶å†…ï¼Œå¹¶ä¸”hitTestSelfæˆ–è€…hitTestChildrenè¿”å›trueï¼Œåˆ™è¡¨ç¤ºRenderObjecté€šè¿‡äº†å‘½ä¸­æµ‹è¯•ï¼Œéœ€è¦å“åº”äº‹ä»¶ï¼Œæ­¤æ—¶éœ€è¦å°†è¢«ç‚¹å‡»çš„RenderObjectåŠ å…¥BoxHitTestResultåˆ—è¡¨ï¼ŒåŒæ—¶ç‚¹å‡»äº‹ä»¶ä¸å†å‘ä¸‹ä¼ é€’ã€‚å¦åˆ™è®¤ä¸ºæ²¡æœ‰é€šè¿‡å‘½ä¸­æµ‹è¯•ï¼Œäº‹ä»¶ç»§ç»­å‘ä¸‹ä¼ é€’ã€‚å…¶ä¸­ï¼ŒhitTestSelfå‡½æ•°è¡¨ç¤ºèŠ‚ç‚¹æ˜¯å¦é€šè¿‡å‘½ä¸­æµ‹è¯•ï¼ŒhitTestChildrenè¡¨ç¤ºå­èŠ‚ç‚¹æ˜¯å¦é€šè¿‡å‘½ä¸­æµ‹è¯•ã€‚ å‚è€ƒ æ·±å…¥æµ…å‡º Flutter Framework ä¹‹ RenderObject Flutterå®æˆ˜-RenderObjectï¼ˆå¸ƒå±€ã€ç»˜åˆ¶ã€ç‚¹å‡»æµ‹è¯•ï¼‰","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"RepaintBoundary","date":"2022-04-25T12:37:37.448Z","path":"wiki/Flutter/æºç åˆ†æ/RepaintBoundary/","text":"å¦‚æœä½¿ç”¨æ°å½“ï¼ŒRepaintBoundaryèƒ½æœ‰æ•ˆæå‡æ€§èƒ½ã€‚ RenderObjectæœ‰ä¸€ä¸ªisRepaintBoundaryå±æ€§ï¼Œè¯¥å±æ€§å†³å®šè¿™ä¸ªRenderObjecté‡ç»˜æ—¶æ˜¯å¦ç‹¬ç«‹äºå…¶çˆ¶å…ƒç´ ï¼Œå¦‚æœè¯¥å±æ€§ä¸ºtrueï¼Œåˆ™ç‹¬ç«‹ç»˜åˆ¶ã€‚ å¦‚ä½•ç‹¬ç«‹ç»˜åˆ¶å‘¢ï¼Ÿ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980/// PainterContextvoid paintChild(RenderObject child, Offset offset) &#123; assert(() &#123; debugOnProfilePaint?.call(child); return true; &#125;()); if (child.isRepaintBoundary) &#123; stopRecordingIfNeeded(); _compositeChild(child, offset); &#125; else &#123; child._paintWithContext(this, offset); &#125;&#125; void _compositeChild(RenderObject child, Offset offset) &#123; assert(!_isRecording); assert(child.isRepaintBoundary); assert(_canvas == null || _canvas!.getSaveCount() == 1); // Create a layer for our child, and paint the child into it. // ç»™å­èŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªlayerï¼Œç„¶ååœ¨ä¸Šé¢ç»˜åˆ¶ if (child._needsPaint) &#123; repaintCompositedChild(child, debugAlsoPaintedParent: true); &#125; else &#123; assert(() &#123; // register the call for RepaintBoundary metrics child.debugRegisterRepaintBoundaryPaint(); child._layerHandle.layer!.debugCreator = child.debugCreator ?? child; return true; &#125;()); &#125; assert(child._layerHandle.layer is OffsetLayer); final OffsetLayer childOffsetLayer = child._layerHandle.layer! as OffsetLayer; childOffsetLayer.offset = offset; appendLayer(childOffsetLayer); &#125; void markNeedsPaint() &#123; assert(!_debugDisposed); assert(owner == null || !owner!.debugDoingPaint); if (_needsPaint) return; _needsPaint = true; //å¦‚æœRenderObject.isRepaintBoundary ä¸ºtrue,åˆ™è¯¥RenderObjectæ‹¥æœ‰layerï¼Œç›´æ¥ç»˜åˆ¶ if (isRepaintBoundary) &#123; assert(() &#123; if (debugPrintMarkNeedsPaintStacks) debugPrintStack(label: &#x27;markNeedsPaint() called for $this&#x27;); return true; &#125;()); // If we always have our own layer, then we can just repaint // ourselves without involving any other nodes. assert(_layerHandle.layer is OffsetLayer); if (owner != null) &#123; //æ‰¾åˆ°æœ€è¿‘çš„layerï¼Œç»˜åˆ¶ owner!._nodesNeedingPaint.add(this); owner!.requestVisualUpdate(); &#125; &#125; else if (parent is RenderObject) &#123;// æ²¡æœ‰è‡ªå·±çš„layer, ä¼šå’Œä¸€ä¸ªç¥–å…ˆèŠ‚ç‚¹å…±ç”¨ä¸€ä¸ªlayer final RenderObject parent = this.parent! as RenderObject; parent.markNeedsPaint(); assert(parent == this.parent); &#125; else &#123; assert(() &#123; if (debugPrintMarkNeedsPaintStacks) debugPrintStack(label: &#x27;markNeedsPaint() called for $this (root of render tree)&#x27;); return true; &#125;()); // If we&#x27;re the root of the render tree (probably a RenderView), // then we have to paint ourselves, since nobody else can paint // us. We don&#x27;t add ourselves to _nodesNeedingPaint in this // case, because the root is always told to paint regardless. if (owner != null) // å¦‚æœç›´åˆ°æ ¹èŠ‚ç‚¹ä¹Ÿæ²¡æ‰¾åˆ°ä¸€ä¸ªLayerï¼Œé‚£ä¹ˆä¾¿éœ€è¦ç»˜åˆ¶è‡ªèº«ï¼Œå› ä¸ºæ²¡æœ‰å…¶å®ƒèŠ‚ç‚¹å¯ä»¥ç»˜åˆ¶æ ¹èŠ‚ç‚¹ã€‚ owner!.requestVisualUpdate(); &#125; &#125; è€ŒRepaintBoundaryå°±æ˜¯ä¸€ä¸ªisRepaintBoundaryä¸ºtrueçš„ç±»ã€‚ ä½¿ç”¨åœºæ™¯ è‡ªå®šä¹‰paintçš„ç»„ä»¶ ä¼šå”¤èµ·è¾“å…¥æ¡†çš„ç•Œé¢ å‚è€ƒ Flutter - Using RepaintBoundary Examples","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"å¯åŠ¨æµç¨‹åˆ†æ","date":"2022-04-25T07:36:59.770Z","path":"wiki/Flutter/æºç åˆ†æ/å¯åŠ¨æµç¨‹åˆ†æ/","text":"éœ€è¦çš„å‰ç½®çŸ¥è¯†ï¼š Mixinç”¨æ³• æ ¸å¿ƒç±»å’Œå‡½æ•°PlatformDispatcherå¹³å°äº‹ä»¶è½¬å‘å™¨ï¼Œå•ä¾‹å¯¹è±¡ã€‚æ¯”å¦‚æ¯ä¸€å¸§çš„æ¸²æŸ“å›è°ƒã€ç³»ç»Ÿè¯­è¨€åˆ‡æ¢ç­‰ã€‚ 123456789101112131415161718192021222324252627282930313233343536/// å•ä¾‹å¯¹è±¡static PlatformDispatcher get instance =&gt; _instance;static final PlatformDispatcher _instance = PlatformDispatcher._();/// é…ç½®ä¿¡æ¯ï¼ˆæ˜¯å¦ä½¿ç”¨24å°æ—¶åˆ¶ã€æ–‡æœ¬ç¼©æ”¾å¤§å°ã€è¯­è¨€ã€ä¸»é¢˜ç­‰ï¼‰ å‘ç”Ÿå˜åŒ–æ—¶å›è°ƒonPlatformConfigurationChangedPlatformConfiguration get configuration =&gt; _configuration;PlatformConfiguration _configuration = const PlatformConfiguration();/// å½“å‰è§†å›¾åˆ—è¡¨ï¼Œå½“å®ƒä»¬å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå›è°ƒonMetricsChanged/// FlutterViewå¯¹UIè¿›è¡Œäº†å°è£…Iterable&lt;FlutterView&gt; get views =&gt; _views.values;Map&lt;Object, FlutterView&gt; _views = &lt;Object, FlutterView&gt;&#123;&#125;;/// æ–°çš„ä¸€å¸§å¼€å¯æ—¶å›è°ƒFrameCallback? get onBeginFrame =&gt; _onBeginFrame;FrameCallback? _onBeginFrame;/// onBeginFrameå®Œæˆåæ‰§è¡Œè¯¥å›è°ƒVoidCallback? get onDrawFrame =&gt; _onDrawFrame;VoidCallback? _onDrawFrame;/// æ‰‹åŠ¿äº¤äº’å›è°ƒï¼ŒGestureBindingå¤„ç†PointerDataPacketCallback? get onPointerDataPacket =&gt; _onPointerDataPacket;PointerDataPacketCallback? _onPointerDataPacket;/// å¹³å°æ¶ˆæ¯å›è°ƒPlatformMessageCallback? get onPlatformMessage =&gt; _onPlatformMessage;PlatformMessageCallback? _onPlatformMessage;/// æ‰§è¡Œåï¼ŒonBeginFrameã€onDrawFrameä¼šæ‰§è¡Œï¼Œå‚è€ƒSchedulerBindingvoid scheduleFrame() native &#x27;PlatformConfiguration_scheduleFrame&#x27;;/// è¯­è¨€åˆ‡æ¢å›è°ƒVoidCallback? get onLocaleChanged =&gt; _onLocaleChanged;VoidCallback? _onLocaleChanged; FlutterViewFlutterViewå¯¹è±¡windowæ˜¯å¯¹PlatformDispatcherçš„å°è£…ï¼Œæ˜¯ä¸å¹³å°å±‚çš„äº¤äº’å…¥å£ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/// è¦è¢«ç»˜åˆ¶çš„UIå¯¹è±¡abstract class FlutterView &#123; /// æŒæœ‰å¹³å°æ¶ˆæ¯åˆ†å‘å™¨ PlatformDispatcher get platformDispatcher; /// è¢«ç³»ç»ŸæŒ¡ä½çš„å±å¹•ç‰©ç†åƒç´ ï¼Œæ¯”å¦‚è½¯é”®ç›˜å¼¹èµ·ï¼Œåˆ™EdgeInsetsçš„bottomä¼šå¤§äº0 WindowPadding get viewInsets =&gt; viewConfiguration.viewInsets; /// è¢«ç³»ç»ŸUIæŒ¡ä½çš„å±å¹•ç‰©ç†åƒç´ ï¼Œæ¯”å¦‚ç³»ç»Ÿé€šçŸ¥æ ï¼Œiphoneçš„åº•éƒ¨åŠŸèƒ½é”® WindowPadding get viewPadding =&gt; viewConfiguration.viewPadding; /// max(0.0, FlutterView.viewPadding - FlutterView.viewInsets) WindowPadding get padding =&gt; viewConfiguration.padding; /// å±å¹•åƒç´ å¯†åº¦ï¼Œç‰©ç†åƒç´ å’Œè™šæ‹Ÿåƒç´ çš„æ¯”å€¼ double get devicePixelRatio =&gt; viewConfiguration.devicePixelRatio; /// é€šçŸ¥åº•å±‚è¿›è¡Œæ¸²æŸ“ void render(Scene scene) =&gt; _render(scene, this); void _render(Scene scene, FlutterView view) native &#x27;PlatformConfiguration_render&#x27;;&#125;class FlutterWindow extends FlutterView &#123;&#125;class SingletonFlutterWindow extends FlutterWindow &#123; /// å¯¹platformDispatcherä¸­çš„å›è°ƒæ–¹æ³•è¿›è¡Œäº†ä¸€å±‚å°è£… VoidCallback? get onMetricsChanged =&gt; platformDispatcher.onMetricsChanged; set onMetricsChanged(VoidCallback? callback) &#123; platformDispatcher.onMetricsChanged = callback; &#125; VoidCallback? get onLocaleChanged =&gt; platformDispatcher.onLocaleChanged; set onLocaleChanged(VoidCallback? callback) &#123; platformDispatcher.onLocaleChanged = callback; &#125; VoidCallback? get onLocaleChanged =&gt; platformDispatcher.onLocaleChanged; set onLocaleChanged(VoidCallback? callback) &#123; platformDispatcher.onLocaleChanged = callback; &#125; VoidCallback? get onLocaleChanged =&gt; platformDispatcher.onLocaleChanged; set onLocaleChanged(VoidCallback? callback) &#123; platformDispatcher.onLocaleChanged = callback; &#125; VoidCallback? get onLocaleChanged =&gt; platformDispatcher.onLocaleChanged; set onLocaleChanged(VoidCallback? callback) &#123; platformDispatcher.onLocaleChanged = callback; &#125; VoidCallback? get onLocaleChanged =&gt; platformDispatcher.onLocaleChanged; set onLocaleChanged(VoidCallback? callback) &#123; platformDispatcher.onLocaleChanged = callback; &#125; VoidCallback? get onLocaleChanged =&gt; platformDispatcher.onLocaleChanged; set onLocaleChanged(VoidCallback? callback) &#123; platformDispatcher.onLocaleChanged = callback; &#125; VoidCallback? get onLocaleChanged =&gt; platformDispatcher.onLocaleChanged; set onLocaleChanged(VoidCallback? callback) &#123; platformDispatcher.onLocaleChanged = callback; &#125;&#125; å…¥å£å‡½æ•°åŠç›¸å…³ç±»mainå…¥å£è°ƒç”¨runAppå‡½æ•°ï¼š 12345678910111213void runApp(Widget app) &#123; WidgetsFlutterBinding.ensureInitialized()//åˆå§‹åŒ–æ“ä½œ ..scheduleAttachRootWidget(app)//å°†ä¼ å…¥çš„WidgetåŒ…è£…è¿›RenderObjectToWidgetAdapter ..scheduleWarmUpFrame();//SchedulerBindingè¿›è¡Œç»˜åˆ¶&#125;class WidgetsFlutterBinding extends BindingBase with GestureBinding, SchedulerBinding, ServicesBinding, PaintingBinding, SemanticsBinding, RendererBinding, WidgetsBinding &#123; static WidgetsBinding ensureInitialized() &#123; if (WidgetsBinding.instance == null) WidgetsFlutterBinding(); return WidgetsBinding.instance!; &#125;&#125; BindingBaseï¼šç»‘å®šçš„åŸºç±» WidgetsBindingï¼šç»‘å®šç»„ä»¶æ ‘ï¼Œæä¾›onLocalChangedã€onBuildScheduledç­‰å›è°ƒ RendererBindingï¼šç»‘å®šæ¸²æŸ“æ ‘ï¼Œæä¾›window.onMetricsChangedã€window.onTextScaleDactorChangedç­‰å›è°ƒ SemanticsBindingï¼ˆç»‘å®šè¯­ä¹‰æ ‘ï¼‰ PaintingBindingï¼ˆå›¾ç‰‡ç¼“å­˜æ“ä½œï¼‰ ServicesBindingï¼šç»‘å®šå¹³å°æœåŠ¡æ¶ˆæ¯ï¼Œæ³¨å†ŒDartå±‚å’ŒC++å±‚çš„æ¶ˆæ¯ä¼ è¾“æœåŠ¡ï¼Œæä¾›window.onPlatformMessageå›è°ƒ SchedulerBindingï¼šç»‘å®šå¸§ç»˜åˆ¶å›è°ƒå‡½æ•°ï¼Œä»¥åŠwidgetç”Ÿå‘½å‘¨æœŸç›¸å…³äº‹ä»¶ï¼Œæä¾›window.onBeginFrameå’Œwindow.onDrawFrameå›è°ƒ GestureBindingï¼šç»‘å®šæ‰‹åŠ¿äº‹ä»¶ï¼Œç”¨äºæ£€æµ‹åº”ç”¨çš„å„ç§æ‰‹åŠ¿ç›¸å…³æ“ä½œï¼Œæä¾›window.onPointerDataPacketå›è°ƒ BindingBase12345678910111213141516171819abstract class BindingBase &#123; /// ç»‘å®šçš„ä¸»è§†å›¾ ui.SingletonFlutterWindow get window =&gt; ui.window; /// æŒæœ‰å¹³å°äº‹ä»¶åˆ†å‘å™¨ ui.PlatformDispatcher get platformDispatcher =&gt; ui.PlatformDispatcher.instance; /// æ··å…¥çš„æ–¹å¼åˆå§‹åŒ–ä¸åŒçš„Bindingå¯¹è±¡ void initInstances() &#123; assert(!_debugInitialized); assert(() &#123; _debugInitialized = true; return true; &#125;()); &#125;&#125; RenderBinding123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960mixin RendererBinding on BindingBase, ServicesBinding, SchedulerBinding, GestureBinding, SemanticsBinding, HitTestable &#123; @override void initInstances() &#123; super.initInstances(); _instance = this; // ç®¡ç†RenderObjectå¯¹è±¡ _pipelineOwner = PipelineOwner( onNeedVisualUpdate: ensureVisualUpdate, onSemanticsOwnerCreated: _handleSemanticsOwnerCreated, onSemanticsOwnerDisposed: _handleSemanticsOwnerDisposed, ); // ç›‘å¬å¹³å°äº‹ä»¶çš„å›è°ƒ window ..onMetricsChanged = handleMetricsChanged ..onTextScaleFactorChanged = handleTextScaleFactorChanged ..onPlatformBrightnessChanged = handlePlatformBrightnessChanged ..onSemanticsEnabledChanged = _handleSemanticsEnabledChanged ..onSemanticsAction = _handleSemanticsAction; // ç”ŸæˆRenderViewä½œä¸ºæ ¹èŠ‚ç‚¹ï¼ŒRenderViewç»§æ‰¿è‡ªRenderObject initRenderView(); _handleSemanticsEnabledChanged(); assert(renderView != null); // ç›‘å¬å¸§åˆ·æ–°å›è°ƒï¼ŒFlutterä¾§è¿›è¡Œå¸ƒå±€ã€ç»˜åˆ¶ addPersistentFrameCallback(_handlePersistentFrameCallback); // æ‰‹åŠ¿å¤„ç† initMouseTracker(); if (kIsWeb) &#123; addPostFrameCallback(_handleWebFirstFrame); &#125; &#125; void drawFrame() &#123; assert(renderView != null); pipelineOwner.flushLayout();//å¸ƒå±€ pipelineOwner.flushCompositingBits();// pipelineOwner.flushPaint();//ç»˜åˆ¶ if (sendFramesToEngine) &#123; renderView.compositeFrame(); // this sends the bits to the GPU pipelineOwner.flushSemantics(); // this also sends the semantics to the OS. _firstFrameSent = true; &#125; &#125; /// äº‹ä»¶ä¼ é€’ @override // from GestureBinding void dispatchEvent(PointerEvent event, HitTestResult? hitTestResult) &#123; _mouseTracker!.updateWithEvent( event, // Enter and exit events should be triggered with or without buttons // pressed. When the button is pressed, normal hit test uses a cached // result, but MouseTracker requires that the hit test is re-executed to // update the hovering events. () =&gt; (hitTestResult == null || event is PointerMoveEvent) ? renderView.hitTestMouseTrackers(event.position) : hitTestResult, ); super.dispatchEvent(event, hitTestResult); &#125;&#125; PaintingBinding1234567891011121314151617181920mixin PaintingBinding on BindingBase, ServicesBinding &#123; @override void initInstances() &#123; super.initInstances(); _instance = this; _imageCache = createImageCache();//å›¾ç‰‡ç¼“å­˜ï¼Œ1000å¼ å›¾ç‰‡ï¼Œæœ€å¤§å†…å­˜100MiB shaderWarmUp?.execute();//å¼‚æ­¥æ–¹æ³•ï¼Œåˆå§‹åŒ–äº†ä¸€ä¸ªé»˜è®¤çš„ç€è‰²å™¨ï¼Œé¿å…éœ€è¦ç€è‰²å™¨çš„æ—¶å€™å†åˆå§‹åŒ–å‡ºç°æ‰å¸§ç°è±¡ã€‚ &#125; /// å†…å­˜è­¦å‘Šå›è°ƒï¼Œæ¸…ç†å›¾ç‰‡ç¼“å­˜ @override void handleMemoryPressure() &#123; super.handleMemoryPressure(); imageCache?.clear(); &#125;&#125; ServiceBindingä¸»è¦ç”¨æ¥æ¥æ”¶MethodChannelå’ŒSystemChannelsä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯ 123456789101112131415161718192021222324252627282930mixin ServicesBinding on BindingBase, SchedulerBinding &#123; /// è·Ÿå¹³å°é€šä¿¡çš„æ¶ˆæ¯ç®¡ç†å™¨ BinaryMessenger get defaultBinaryMessenger =&gt; _defaultBinaryMessenger; late final BinaryMessenger _defaultBinaryMessenger; @override void initInstances() &#123; super.initInstances(); _instance = this; // åˆ›å»ºMethodChannel _defaultBinaryMessenger = createBinaryMessenger(); // RestorationManagerç”¨äºæ¢å¤ç•Œé¢æ•°æ®çš„åŠŸèƒ½ _restorationManager = createRestorationManager(); // åˆå§‹åŒ–é”®ç›˜ _initKeyboard(); initLicenses(); //ç³»ç»Ÿæ¶ˆæ¯å›è°ƒç›‘å¬ SystemChannels.system.setMessageHandler((dynamic message) =&gt; handleSystemMessage(message as Object)); SystemChannels.lifecycle.setMessageHandler(_handleLifecycleMessage); SystemChannels.platform.setMethodCallHandler(_handlePlatformMessage); // è¯»å–å½“å‰çš„ç”Ÿå‘½å‘¨æœŸçŠ¶æ€ï¼Œå¤„ç†åˆ™æ˜¯åœ¨SchedulerBindingè¿™ä¸ªmixinä¸­ã€‚ readInitialLifecycleStateFromNativeWindow(); &#125;&#125; SchedulerBinding123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156/// è°ƒåº¦é˜¶æ®µ ç»˜åˆ¶è°ƒåº¦ã€taskè°ƒåº¦enum SchedulerPhase &#123; idle,// å¤„ç†taskã€microtaskã€timerå›è°ƒï¼Œç”¨æˆ·è¾“å…¥å’Œæ‰‹åŠ¿ç­‰ transientCallbacks,//å¤„ç†åŠ¨ç”»çŠ¶æ€çš„è®¡ç®—å’Œæ›´æ–° midFrameMicrotasks,//å¤„ç†transientCallbacksé˜¶æ®µè§¦å‘çš„microtasks persistentCallbacks,//å¤„ç†buildã€layoutã€paint postFrameCallbacks,//å½“å‰é˜¶æ®µç»“æŸæ—¶çš„æ¸…ç†å·¥ä½œ&#125;/// mixin SchedulerBinding on BindingBase &#123; /// æ°¸ä¹…callbackï¼Œä¸€ç»æ·»åŠ æ— æ³•ç§»é™¤ï¼Œç”±WidgetsBinding.instance.addPersitentFrameCallback()æ³¨å†Œï¼Œè¿™ä¸ªå›è°ƒå¤„ç†äº†å¸ƒå±€ä¸ç»˜åˆ¶å·¥ä½œã€‚ final List&lt;FrameCallback&gt; _persistentCallbacks = &lt;FrameCallback&gt;[]; /// åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œè°ƒç”¨åä¼šè¢«ç³»ç»Ÿç§»é™¤ï¼Œå¯ç”±WidgetsBinding.instance.addPostFrameCallback()æ³¨å†Œï¼Œè¯¥å›è°ƒä¸€èˆ¬ç”¨äºStateçš„æ›´æ–°ã€‚ final List&lt;FrameCallback&gt; _postFrameCallbacks = &lt;FrameCallback&gt;[]; /// é€šè¿‡Tickerçš„scheduleTickæ·»åŠ å›è°ƒï¼Œä¸€èˆ¬ç”¨äºåŠ¨ç”»çš„å›è°ƒ Map&lt;int, _FrameCallbackEntry&gt; _transientCallbacks = &lt;int, _FrameCallbackEntry&gt;&#123;&#125;; /// åº”ç”¨ç”Ÿå‘½å‘¨æœŸå‘ç”Ÿå˜åŒ–æ—¶å›è°ƒ /// å¯ä»¥ä½¿ç”¨WidgetsBindingObserver.didChangeAppLifecycleStateç›‘å¬æ¥å®ç°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ void handleAppLifecycleStateChanged(AppLifecycleState state) &#123; assert(state != null); _lifecycleState = state; switch (state) &#123; case AppLifecycleState.resumed: case AppLifecycleState.inactive: _setFramesEnabledState(true); break; case AppLifecycleState.paused: case AppLifecycleState.detached: _setFramesEnabledState(false);//åœæ­¢åˆ·æ–°ç•Œé¢ break; &#125; &#125; bool _framesEnabled = true; void _setFramesEnabledState(bool enabled) &#123; if (_framesEnabled == enabled) return; _framesEnabled = enabled; if (enabled) scheduleFrame(); &#125; void scheduleFrame() &#123; if (_hasScheduledFrame || !framesEnabled) return; assert(() &#123; if (debugPrintScheduleFrameStacks) debugPrintStack(label: &#x27;scheduleFrame() called. Current phase is $schedulerPhase.&#x27;); return true; &#125;()); //ç¡®ä¿å‘windowæ³¨å†Œäº†onBeginFrameå’ŒonDrawFrame ensureFrameCallbacksRegistered(); // å‘å¹³å°å±‚å‘é€åˆ·æ–°è¯·æ±‚ï¼Œè¿›è¡Œä¸‹ä¸€è½®å¸§åˆ·æ–° window.scheduleFrame(); _hasScheduledFrame = true; &#125; @protected void ensureFrameCallbacksRegistered() &#123; window.onBeginFrame ??= _handleBeginFrame; window.onDrawFrame ??= _handleDrawFrame; &#125; void handleBeginFrame(Duration? rawTimeStamp) &#123; _frameTimelineTask?.start(&#x27;Frame&#x27;, arguments: timelineArgumentsIndicatingLandmarkEvent); _firstRawTimeStampInEpoch ??= rawTimeStamp; _currentFrameTimeStamp = _adjustForEpoch(rawTimeStamp ?? _lastRawTimeStamp); if (rawTimeStamp != null) _lastRawTimeStamp = rawTimeStamp; assert(schedulerPhase == SchedulerPhase.idle); _hasScheduledFrame = false; try &#123; // TRANSIENT FRAME CALLBACKS _frameTimelineTask?.start(&#x27;Animate&#x27;, arguments: timelineArgumentsIndicatingLandmarkEvent); _schedulerPhase = SchedulerPhase.transientCallbacks; final Map&lt;int, _FrameCallbackEntry&gt; callbacks = _transientCallbacks; _transientCallbacks = &lt;int, _FrameCallbackEntry&gt;&#123;&#125;; callbacks.forEach((int id, _FrameCallbackEntry callbackEntry) &#123; if (!_removedIds.contains(id)) _invokeFrameCallback(callbackEntry.callback, _currentFrameTimeStamp!, callbackEntry.debugStack); &#125;); _removedIds.clear(); &#125; finally &#123; _schedulerPhase = SchedulerPhase.midFrameMicrotasks; &#125; &#125; void handleDrawFrame() &#123; assert(_schedulerPhase == SchedulerPhase.midFrameMicrotasks); _frameTimelineTask?.finish(); // end the &quot;Animate&quot; phase try &#123; // PERSISTENT FRAME CALLBACKS _schedulerPhase = SchedulerPhase.persistentCallbacks; for (final FrameCallback callback in _persistentCallbacks) _invokeFrameCallback(callback, _currentFrameTimeStamp!); // POST-FRAME CALLBACKS _schedulerPhase = SchedulerPhase.postFrameCallbacks; final List&lt;FrameCallback&gt; localPostFrameCallbacks = List&lt;FrameCallback&gt;.of(_postFrameCallbacks); _postFrameCallbacks.clear(); for (final FrameCallback callback in localPostFrameCallbacks) _invokeFrameCallback(callback, _currentFrameTimeStamp!); &#125; finally &#123; _schedulerPhase = SchedulerPhase.idle; _frameTimelineTask?.finish(); // end the Frame assert(() &#123; if (debugPrintEndFrameBanner) debugPrint(&#x27;â–€&#x27; * _debugBanner!.length); _debugBanner = null; return true; &#125;()); _currentFrameTimeStamp = null; &#125; &#125; /// Frameå³æ¯ä¸€å¸§çš„ç»˜åˆ¶è¿‡ç¨‹ï¼Œengineé€šè¿‡VSyncä¿¡å·ä¸æ–­åœ°è§¦å‘Frameçš„ç»˜åˆ¶ï¼Œå®é™…ä¸Šå°±æ˜¯è°ƒç”¨SchedulerBindingç±»ä¸­çš„_handleBeginFrame()å’Œ_handleDrawFrame()è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¼šå®ŒæˆåŠ¨ç”»ã€å¸ƒå±€ã€ç»˜åˆ¶ç­‰å·¥ä½œã€‚ void scheduleWarmUpFrame() &#123; if (_warmUpFrame || schedulerPhase != SchedulerPhase.idle) return; _warmUpFrame = true; final TimelineTask timelineTask = TimelineTask()..start(&#x27;Warm-up frame&#x27;); final bool hadScheduledFrame = _hasScheduledFrame; // We use timers here to ensure that microtasks flush in between. Timer.run(() &#123; assert(_warmUpFrame); handleBeginFrame(null); &#125;); Timer.run(() &#123; assert(_warmUpFrame); handleDrawFrame(); resetEpoch(); _warmUpFrame = false; if (hadScheduledFrame) scheduleFrame(); &#125;); lockEvents(() async &#123; await endOfFrame; timelineTask.finish(); &#125;); &#125;&#125; GestureBindingå¤„ç†ç”¨æˆ·çš„äº¤äº’ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111mixin GestureBinding on BindingBase implements HitTestable, HitTestDispatcher, HitTestTarget &#123; @override void initInstances() &#123; super.initInstances(); _instance = this; window.onPointerDataPacket = _handlePointerDataPacket; &#125; void _handlePointerDataPacket(ui.PointerDataPacket packet) &#123; // We convert pointer data to logical pixels so that e.g. the touch slop can be // defined in a device-independent manner. _pendingPointerEvents.addAll(PointerEventConverter.expand(packet.data, window.devicePixelRatio)); if (!locked) _flushPointerEventQueue(); &#125; void _flushPointerEventQueue() &#123; assert(!locked); while (_pendingPointerEvents.isNotEmpty) handlePointerEvent(_pendingPointerEvents.removeFirst()); &#125; void handlePointerEvent(PointerEvent event) &#123; assert(!locked); if (resamplingEnabled) &#123; _resampler.addOrDispatch(event); _resampler.sample(samplingOffset, _samplingClock); return; &#125; // Stop resampler if resampling is not enabled. This is a no-op if // resampling was never enabled. _resampler.stop(); _handlePointerEventImmediately(event); &#125; void _handlePointerEventImmediately(PointerEvent event) &#123; HitTestResult? hitTestResult; if (event is PointerDownEvent || event is PointerSignalEvent || event is PointerHoverEvent) &#123; assert(!_hitTests.containsKey(event.pointer)); hitTestResult = HitTestResult();//è®°å½•äº‹ä»¶ä¼ é€’æ‰€ç»è¿‡çš„èŠ‚ç‚¹ hitTest(hitTestResult, event.position); if (event is PointerDownEvent) &#123; _hitTests[event.pointer] = hitTestResult; &#125; assert(() &#123; if (debugPrintHitTestResults) debugPrint(&#x27;$event: $hitTestResult&#x27;); return true; &#125;()); &#125; else if (event is PointerUpEvent || event is PointerCancelEvent) &#123; hitTestResult = _hitTests.remove(event.pointer); &#125; else if (event.down) &#123; hitTestResult = _hitTests[event.pointer]; &#125; assert(() &#123; if (debugPrintMouseHoverEvents &amp;&amp; event is PointerHoverEvent) debugPrint(&#x27;$event&#x27;); return true; &#125;()); if (hitTestResult != null || event is PointerAddedEvent || event is PointerRemovedEvent) &#123; assert(event.position != null); dispatchEvent(event, hitTestResult); &#125; &#125; @override // from HitTestable void hitTest(HitTestResult result, Offset position) &#123; result.add(HitTestEntry(this)); &#125; /// äº‹ä»¶åˆ†å‘æµç¨‹ /// å…ˆè°ƒç”¨RenderBindingä¸­çš„dispatchEventï¼Œéå†renderViewçš„æ‰€æœ‰widgetï¼Œå°†hitTestResultè¿”å› void dispatchEvent(PointerEvent event, HitTestResult? hitTestResult) &#123; assert(!locked); if (hitTestResult == null) &#123; assert(event is PointerAddedEvent || event is PointerRemovedEvent); try &#123; pointerRouter.route(event); &#125; catch (exception, stack) &#123; &#125; return; &#125; for (final HitTestEntry entry in hitTestResult.path) &#123; try &#123; entry.target.handleEvent(event.transformed(entry.transform), entry); &#125; catch (exception, stack) &#123; &#125; &#125; &#125; /// æ‰‹åŠ¿ç«æŠ€åœºè¿›è¡Œå¤„ç† @override // from HitTestTarget void handleEvent(PointerEvent event, HitTestEntry entry) &#123; pointerRouter.route(event); if (event is PointerDownEvent) &#123; gestureArena.close(event.pointer); &#125; else if (event is PointerUpEvent) &#123; gestureArena.sweep(event.pointer); &#125; else if (event is PointerSignalEvent) &#123; pointerSignalResolver.resolve(event); &#125; &#125;&#125; WidgetsBindingå¤„ç†widgetæ ‘çš„é€»è¾‘ 12345678910111213141516171819202122232425262728293031323334mixin WidgetsBinding on BindingBase, ServicesBinding, SchedulerBinding, GestureBinding, RendererBinding, SemanticsBinding &#123; /// å…‰æ ‡ç®¡ç†å™¨ FocusManager get focusManager =&gt; _buildOwner!.focusManager; /// åº”ç”¨ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œå›åˆ°Appã€å›åˆ°æ¡Œé¢ã€å†…å­˜ä¸è¶³ã€è¯­è¨€åˆ‡æ¢ã€ä¸»é¢˜åˆ‡æ¢ã€æ–‡å­—å¤§å°åˆ‡æ¢ç­‰ final List&lt;WidgetsBindingObserver&gt; _observers = &lt;WidgetsBindingObserver&gt;[]; @override void initInstances() &#123; super.initInstances(); _instance = this; assert(() &#123; _debugAddStackFilters(); return true; &#125;()); // Initialization of [_buildOwner] has to be done after // [super.initInstances] is called, as it requires [ServicesBinding] to // properly setup the [defaultBinaryMessenger] instance. // åˆå§‹åŒ–BuildOwnerï¼Œç”¨æ¥æ‰§è¡Œwidgetæ ‘çš„buildä»»åŠ¡ _buildOwner = BuildOwner(); buildOwner!.onBuildScheduled = _handleBuildScheduled; //è¯­è¨€åˆ‡æ¢å›è°ƒ window.onLocaleChanged = handleLocaleChanged; window.onAccessibilityFeaturesChanged = handleAccessibilityFeaturesChanged; SystemChannels.navigation.setMethodCallHandler(_handleNavigationInvocation);//ç³»ç»Ÿè·¯ç”±ç›‘å¬ï¼Ÿ &#125;&#125; scheduleAttachRootWidget123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186 void scheduleAttachRootWidget(Widget rootWidget) &#123; Timer.run(() &#123; attachRootWidget(rootWidget); &#125;); &#125; void attachRootWidget(Widget rootWidget) &#123; final bool isBootstrapFrame = renderViewElement == null; _readyToProduceFrames = true; _renderViewElement = RenderObjectToWidgetAdapter&lt;RenderBox&gt;( container: renderView,//RenderBindingæ„å»ºçš„æ ¹èŠ‚ç‚¹ debugShortDescription: &#x27;[root]&#x27;, child: rootWidget,//rootWidgetæ˜¯æˆ‘ä»¬è‡ªå·±çš„AppWidget ).attachToRenderTree(buildOwner!, renderViewElement as RenderObjectToWidgetElement&lt;RenderBox&gt;?); if (isBootstrapFrame) &#123; SchedulerBinding.instance!.ensureVisualUpdate(); &#125; &#125;class RenderObjectToWidgetAdapter&lt;T extends RenderObject&gt; extends RenderObjectWidget &#123; RenderObjectToWidgetElement&lt;T&gt; attachToRenderTree(BuildOwner owner, [ RenderObjectToWidgetElement&lt;T&gt;? element ]) &#123; if (element == null) &#123; owner.lockState(() &#123; element = createElement();//åˆ›å»ºRenderObjectElementçš„å­ç±»RenderObjectToWidgetElement assert(element != null); element!.assignOwner(owner); &#125;); //BuildOwner owner.buildScope(element!, () &#123; element!.mount(null, null); &#125;); &#125; else &#123; element._newWidget = this; element.markNeedsBuild(); &#125; return element!; &#125;&#125;class RenderObjectToWidgetElement&lt;T extends RenderObject&gt; extends RootRenderObjectElement &#123; void mount(Element? parent, Object? newSlot) &#123; assert(parent == null); super.mount(parent, newSlot); _rebuild(); assert(_child != null); &#125; void _rebuild() &#123; try &#123; _child = updateChild(_child, widget.child, _rootChildSlot); &#125; catch (exception, stack) &#123; final FlutterErrorDetails details = FlutterErrorDetails( exception: exception, stack: stack, library: &#x27;widgets library&#x27;, context: ErrorDescription(&#x27;attaching to the render tree&#x27;), ); FlutterError.reportError(details); final Widget error = ErrorWidget.builder(details); _child = updateChild(null, error, _rootChildSlot); &#125; &#125; Element? updateChild(Element? child, Widget? newWidget, Object? newSlot) &#123; if (newWidget == null) &#123; if (child != null) deactivateChild(child);//æ–°widgetä¸ºç©ºï¼Œæ—§çš„å­˜åœ¨ï¼Œåˆ™éœ€è¦é”€æ¯ return null; &#125; final Element newChild; if (child != null) &#123; bool hasSameSuperclass = true; if (hasSameSuperclass &amp;&amp; child.widget == newWidget) &#123; if (child.slot != newSlot) updateSlotForChild(child, newSlot); newChild = child; &#125; else if (hasSameSuperclass &amp;&amp; Widget.canUpdate(child.widget, newWidget)) &#123; if (child.slot != newSlot) updateSlotForChild(child, newSlot); if (!kReleaseMode &amp;&amp; debugProfileBuildsEnabled) &#123; Map&lt;String, String&gt; debugTimelineArguments = timelineArgumentsIndicatingLandmarkEvent; Timeline.startSync( &#x27;$&#123;newWidget.runtimeType&#125;&#x27;, arguments: debugTimelineArguments, ); &#125; child.update(newWidget); if (!kReleaseMode &amp;&amp; debugProfileBuildsEnabled) Timeline.finishSync(); newChild = child; &#125; else &#123; deactivateChild(child); assert(child._parent == null); if (!kReleaseMode &amp;&amp; debugProfileBuildsEnabled) &#123; Map&lt;String, String&gt; debugTimelineArguments = timelineArgumentsIndicatingLandmarkEvent; Timeline.startSync( &#x27;$&#123;newWidget.runtimeType&#125;&#x27;, arguments: debugTimelineArguments, ); &#125; newChild = inflateWidget(newWidget, newSlot); if (!kReleaseMode &amp;&amp; debugProfileBuildsEnabled) Timeline.finishSync(); &#125; &#125; else &#123; if (!kReleaseMode &amp;&amp; debugProfileBuildsEnabled) &#123; Map&lt;String, String&gt; debugTimelineArguments = timelineArgumentsIndicatingLandmarkEvent; Timeline.startSync( &#x27;$&#123;newWidget.runtimeType&#125;&#x27;, arguments: debugTimelineArguments, ); &#125; newChild = inflateWidget(newWidget, newSlot);//childä¸ºnullï¼Œåˆ™éœ€è¦å¡«å……æ–°è§†å›¾ if (!kReleaseMode &amp;&amp; debugProfileBuildsEnabled) Timeline.finishSync(); &#125; return newChild; &#125; Element inflateWidget(Widget newWidget, Object? newSlot) &#123; final Key? key = newWidget.key; if (key is GlobalKey) &#123; final Element? newChild = _retakeInactiveElement(key, newWidget); if (newChild != null) &#123; newChild._activateWithParent(this, newSlot); final Element? updatedChild = updateChild(newChild, newWidget, newSlot); assert(newChild == updatedChild); return updatedChild!; &#125; &#125; final Element newChild = newWidget.createElement();//åˆ›å»ºæ–°çš„Element newChild.mount(this, newSlot);//é€’å½’mount return newChild; &#125;&#125;abstract class RenderObjectElement extends Element &#123; @override void mount(Element? parent, Object? newSlot) &#123; super.mount(parent, newSlot); assert(() &#123; _debugDoingBuild = true; return true; &#125;()); _renderObject = widget.createRenderObject(this); attachRenderObject(newSlot);//æŒ‚è½½åˆ°RenderObjectæ ‘ _dirty = false; &#125;&#125;abstract class Element extends DiagnosticableTree implements BuildContext &#123; void mount(Element? parent, Object? newSlot) &#123; assert(_lifecycleState == _ElementLifecycle.initial); assert(widget != null); assert(_parent == null); assert(parent == null || parent._lifecycleState == _ElementLifecycle.active); assert(slot == null); _parent = parent;//Elementæ ‘å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ _slot = newSlot;//æ’æ§½ _lifecycleState = _ElementLifecycle.active; _depth = _parent != null ? _parent!.depth + 1 : 1;//èŠ‚ç‚¹æ·±åº¦ if (parent != null) &#123; // Only assign ownership if the parent is non-null. If parent is null // (the root node), the owner should have already been assigned. // See RootRenderObjectElement.assignOwner(). _owner = parent.owner; &#125; assert(owner != null); final Key? key = widget.key; if (key is GlobalKey) &#123; owner!._registerGlobalKey(key, this); &#125; _updateInheritance(); &#125;&#125; scheduleWarmUpFrameScheduleBindingä¸­è°ƒç”¨handleBeginFrameå’ŒhandleDrawFrameç»˜åˆ¶ä¸€å¸§å¹¶ä¼ é€’ç»™GPUå»æ¸²æŸ“ã€‚ å‚è€ƒ æ·±å…¥ç†è§£Flutterå¼•æ“å¯åŠ¨","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"ç”Ÿå‘½å‘¨æœŸ","date":"2022-04-18T01:53:34.812Z","path":"wiki/Flutter/æœªåˆ†ç±»/ç”Ÿå‘½å‘¨æœŸ/","text":"setStateè°ƒç”¨setState()ä¹‹åï¼Œå®ƒæ‰€æœ‰çš„å­èŠ‚ç‚¹è°ƒç”¨updateChild(Element child, Widget newWidget, dynamic newSlot)ï¼š å¦‚æœä¹‹å‰çš„ä½ç½®childä¸ºnull å¦‚æœnewWidgetä¸ºnullçš„è¯ï¼Œè¯´æ˜è¿™ä¸ªä½ç½®å§‹ç»ˆæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œç›´æ¥è¿”å›nullå³å¯ã€‚ å¦‚æœnewWidgetä¸ä¸ºnullï¼Œè¯´æ˜è¿™ä¸ªä½ç½®æ–°å¢åŠ äº†å­èŠ‚ç‚¹è°ƒç”¨inflateWidget(newWidget, newSlot)ç”Ÿæˆä¸€ä¸ªæ–°çš„Elementè¿”å› å¦‚æœä¹‹å‰çš„childä¸ä¸ºnull å¦‚æœnewWidgetä¸ºnullçš„è¯ï¼Œè¯´æ˜è¿™ä¸ªä½ç½®éœ€è¦ç§»é™¤ä»¥å‰çš„èŠ‚ç‚¹ï¼Œè°ƒç”¨deactivateChild(child)ç§»é™¤å¹¶ä¸”è¿”å›nullDã€å¦‚æœnewWidgetä¸ä¸ºnullçš„è¯ï¼Œå…ˆè°ƒç”¨Widget.canUpdate(child.widget, newWidget)å¯¹æ¯”æ˜¯å¦èƒ½æ›´æ–°ã€‚è¿™ä¸ªæ–¹æ³•ä¼šå¯¹æ¯”ä¸¤ä¸ªWidgetçš„runtimeTypeå’Œkeyï¼Œ å¦‚æœä¸€è‡´åˆ™è¯´æ˜å­Widgetæ²¡æœ‰æ”¹å˜ï¼Œåªæ˜¯éœ€è¦æ ¹æ®newWidget(é…ç½®æ¸…å•)æ›´æ–°ä¸‹å½“å‰èŠ‚ç‚¹çš„æ•°æ®child.update(newWidget)ï¼› å¦‚æœä¸ä¸€è‡´è¯´æ˜è¿™ä¸ªä½ç½®å‘ç”Ÿå˜åŒ–ï¼Œåˆ™deactivateChild(child)åè¿”å›inflateWidget(newWidget, newSlot); å‚è€ƒ é¢è¯•å®˜é—®æˆ‘Stateçš„ç”Ÿå‘½å‘¨æœŸï¼Œè¯¥æ€ä¹ˆå›ç­”","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"RepaintBoundary","date":"2022-04-07T10:10:10.289Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/RepaintBoundary/","text":"å‚è€ƒ è¯´è¯´Flutterä¸­çš„RepaintBoundary","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"}]},{"title":"å¸ƒå±€ç®¡ç†","date":"2022-03-09T05:53:25.126Z","path":"wiki/Flutter/æœªåˆ†ç±»/å¸ƒå±€ç®¡ç†/","text":"åŸºæœ¬æ¦‚å¿µWidgetçš„å¤§å°é€šè¿‡constraintsæ¥çº¦æŸï¼Œå®ƒæœ‰minWidthã€maxWidthã€minHeightã€maxHeightå‡ ä¸ªå±æ€§ã€‚ Tight constraintsï¼šç´§çº¦æŸï¼Œæœ€å¤§å€¼å’Œæœ€å°å€¼ç›¸ç­‰çš„æƒ…å†µ Loose constraintsï¼šæ¾çº¦æŸï¼Œæœ€å¤§å€¼å’Œæœ€å°å€¼ä¸ç›¸ç­‰çš„æƒ…å†µ Unbounded constraintsï¼šmaxWidthã€maxHeightéƒ½è®¾ç½®ä¸ºdouble.infinity Flutter ä¸­çš„ widget ç”±åœ¨å…¶åº•å±‚çš„ RenderBox å¯¹è±¡æ¸²æŸ“è€Œæˆã€‚æ¸²æŸ“æ¡†ç”±å…¶çˆ¶çº§ widget ç»™å‡ºçº¦æŸï¼Œå¹¶æ ¹æ®è¿™äº›çº¦æŸè°ƒæ•´è‡ªèº«å°ºå¯¸å¤§å°ã€‚çº¦æŸæ˜¯ç”±æœ€å°å®½åº¦ã€æœ€å¤§å®½åº¦ã€æœ€å°é«˜åº¦ã€æœ€å¤§é«˜åº¦å››ä¸ªæ–¹é¢æ„æˆï¼›å°ºå¯¸å¤§å°åˆ™ç”±ç‰¹å®šçš„å®½åº¦å’Œé«˜åº¦ä¸¤ä¸ªæ–¹é¢æ„æˆã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œä»å¦‚ä½•å¤„ç†çº¦æŸçš„è§’åº¦æ¥çœ‹ï¼Œæœ‰ä»¥ä¸‹ä¸‰ç§ç±»å‹çš„æ¸²æŸ“æ¡†ï¼š å°½å¯èƒ½å¤§ã€‚æ¯”å¦‚ Center å’Œ ListView çš„æ¸²æŸ“æ¡†ã€‚ ä¸å­ widget ä¸€æ ·å¤§ï¼Œæ¯”å¦‚ Transform å’Œ Opacity çš„æ¸²æŸ“æ¡†ã€‚ ç‰¹å®šå¤§å°ï¼Œæ¯”å¦‚ Image å’Œ Text çš„æ¸²æŸ“æ¡†ã€‚ å¸ƒå±€Flutter ä¸­æœ‰ä¸¤ç§å¸ƒå±€æ¨¡å‹ï¼š åŸºäº RenderBox çš„ç›’æ¨¡å‹å¸ƒå±€ã€‚ åŸºäº Sliver ( RenderSliver ) æŒ‰éœ€åŠ è½½åˆ—è¡¨å¸ƒå±€ã€‚ ä¸¤ç§å¸ƒå±€æ–¹å¼åœ¨ç»†èŠ‚ä¸Šç•¥æœ‰å·®å¼‚ï¼Œä½†å¤§ä½“æµç¨‹ç›¸åŒï¼Œå¸ƒå±€æµç¨‹å¦‚ä¸‹ï¼š ä¸Šå±‚ç»„ä»¶å‘ä¸‹å±‚ç»„ä»¶ä¼ é€’çº¦æŸï¼ˆconstraintsï¼‰æ¡ä»¶ã€‚ ä¸‹å±‚ç»„ä»¶ç¡®å®šè‡ªå·±çš„å¤§å°ï¼Œç„¶åå‘Šè¯‰ä¸Šå±‚ç»„ä»¶ã€‚æ³¨æ„ä¸‹å±‚ç»„ä»¶çš„å¤§å°å¿…é¡»ç¬¦åˆçˆ¶ç»„ä»¶çš„çº¦æŸã€‚ ä¸Šå±‚ç»„ä»¶ç¡®å®šä¸‹å±‚ç»„ä»¶ç›¸å¯¹äºè‡ªèº«çš„åç§»å’Œç¡®å®šè‡ªèº«çš„å¤§å°ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šæ ¹æ®å­ç»„ä»¶çš„å¤§å°æ¥ç¡®å®šè‡ªèº«çš„å¤§å°ï¼‰ã€‚ é¦–å…ˆï¼Œä¸Šå±‚ widget å‘ä¸‹å±‚ widget ä¼ é€’çº¦æŸæ¡ä»¶ï¼›ç„¶åï¼Œä¸‹å±‚ widget å‘ä¸Šå±‚ widget ä¼ é€’å¤§å°ä¿¡æ¯ã€‚æœ€åï¼Œä¸Šå±‚ widget å†³å®šä¸‹å±‚ widget çš„ä½ç½®ã€‚ Widget ä¼šé€šè¿‡å®ƒçš„ çˆ¶çº§ è·å¾—è‡ªèº«çš„çº¦æŸã€‚çº¦æŸå®é™…ä¸Šå°±æ˜¯ 4 ä¸ªæµ®ç‚¹ç±»å‹çš„é›†åˆï¼šæœ€å¤§&#x2F;æœ€å°å®½åº¦ï¼Œä»¥åŠæœ€å¤§&#x2F;æœ€å°é«˜åº¦ã€‚ç„¶åï¼Œè¿™ä¸ª widget å°†ä¼šé€ä¸ªéå†å®ƒçš„ children åˆ—è¡¨ã€‚å‘å­çº§ä¼ é€’ çº¦æŸï¼ˆå­çº§ä¹‹é—´çš„çº¦æŸå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼‰ï¼Œç„¶åè¯¢é—®å®ƒçš„æ¯ä¸€ä¸ªå­çº§éœ€è¦ç”¨äºå¸ƒå±€çš„å¤§å°ã€‚ç„¶åï¼Œè¿™ä¸ª widget å°±ä¼šå¯¹å®ƒå­çº§çš„ children é€ä¸ªè¿›è¡Œå¸ƒå±€ã€‚ï¼ˆæ°´å¹³æ–¹å‘æ˜¯ x è½´ï¼Œç«–ç›´æ˜¯ y è½´ï¼‰ã€‚æœ€åï¼Œwidget å°†ä¼šæŠŠå®ƒçš„å¤§å°ä¿¡æ¯å‘ä¸Šä¼ é€’è‡³çˆ¶ widgetï¼ˆåŒ…æ‹¬å…¶åŸå§‹çº¦æŸæ¡ä»¶ï¼‰ã€‚","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"ã€Šç½‘ç»œæ˜¯å¦‚ä½•è¿æ¥çš„ã€‹è¯»ä¹¦ç¬”è®°","date":"2022-03-08T02:25:29.755Z","path":"wiki/è¯»ä¹¦ç¬”è®°/ç½‘ç»œæ˜¯å¦‚ä½•è¿æ¥çš„/","text":"","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"ã€Šè®¡ç®—æœºæ˜¯æ€ä¹ˆè·‘èµ·æ¥çš„ã€‹è¯»ä¹¦ç¬”è®°","date":"2022-03-08T02:25:29.755Z","path":"wiki/è¯»ä¹¦ç¬”è®°/è®¡ç®—æœºæ˜¯æ€æ ·è·‘èµ·æ¥çš„/","text":"è®¡ç®—æœºä¸‰ä¸ªæ ¹æœ¬æ€§åŸºç¡€ï¼š è®¡ç®—æœºæ˜¯æ‰§è¡Œè¾“å…¥ã€è¿ç®—ã€è¾“å‡ºçš„æœºå™¨ï¼› ç¨‹åºæ˜¯æŒ‡ä»¤å’Œæ•°æ®çš„é›†åˆï¼› è®¡ç®—æœºçš„å¤„ç†æ–¹å¼æœ‰æ—¶ä¸äººä»¬çš„æ€ç»´ä¹ æƒ¯ä¸åŒã€‚ è®¡ç®—æœºçš„ç¡¬ä»¶ç”±å¤§é‡é›†æˆç”µè·¯ç»„æˆã€‚æ¯å—é›†æˆç”µè·¯ä¸Šéƒ½å¸¦æœ‰è®¸å¤šå¼•è„šã€‚è¿™äº›å¼•è„šæœ‰äº›ç”¨äºè¾“å…¥ï¼Œæœ‰äº›ç”¨äºè¾“å‡ºã€‚ æ—¶é’Ÿå‘ç”Ÿå™¨ æ“ä½œæ•°ï¼šæ“ä½œæ•°ç¬”è¯•æ˜¯å·²å­˜å‚¨åœ¨CPUå¯„å­˜å™¨ä¸­çš„æ•°å­—ã€‚æ“ä½œç  æœºå™¨è¯­è¨€æ˜¯å”¯ä¸€ä¸€ç§cpuèƒ½ç›´æ¥ç†è§£çš„ç¼–ç¨‹è¯­è¨€ã€‚ CPUå†…éƒ¨å­˜å‚¨æ•°æ®çš„åœ°æ–¹ä¹Ÿå…·å¤‡å¯¹æ•°æ®è¿›è¡Œè®¡ç®—çš„èƒ½åŠ›ã€‚æœ‰äº›å¯„å­˜å™¨ä¸­å­˜å‚¨ç€æ¥ä¸‹æ¥è¦æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€ã€‚ç¨‹åºå°±æ˜¯ä¾é ç€ä¸æ–­å˜èŠ±çš„å¯„å­˜å™¨çš„å€¼è¿è¡Œèµ·æ¥çš„ã€‚ cpuä¿¡æ¯cpuçš„ç§ç±»ï¼šä¸åŒçš„CPUå¯¹äºäºŒè¿›åˆ¶çš„ç†è§£æ˜¯ä¸ä¸€æ ·çš„ã€‚æ—¶é’Ÿä¿¡å·çš„é¢‘ç‡ï¼šæ—¶é’Ÿå‘ç”Ÿå™¨å‘é€ç»™cpuçš„ç”µä¿¡å·çš„é¢‘ç‡ã€‚è¡¨ç¤ºæ—¶é’Ÿä¿¡å·é¢‘ç‡çš„å•ä½æ˜¯MHzï¼ˆå…†èµ«å…¹&#x3D;100ä¸‡å›&#x2F;ç§’ï¼‰ã€‚æ—¶é’Ÿä¿¡å·æ˜¯åœ¨0å’Œ1ä¹‹é—´åå¤å˜æ¢çš„ç”µä¿¡å·ã€‚é€šå¸¸æŠŠå‘å‡ºä¸€æ¬¡æ»´ç­”çš„æ—¶é—´ç§°ä½œä¸€ä¸ªæ—¶é’Ÿå‘¨æœŸã€‚ å†…å­˜ä¿¡æ¯åœ°å€ç©ºé—´æ¯ä¸ªåœ°å€ä¸­å¯ä»¥å­˜å‚¨å¤šå°‘æ¯”ç‰¹çš„ä¿¡æ¯ I&#x2F;Oä¿¡æ¯I&#x2F;Oçš„ç§ç±»åœ°å€ç©ºé—´è¿æ¥ç€ä½•ç§å‘¨è¾¹è®¾å¤‡ æœ€ä½é™åº¦æ‰€éœ€çš„æµç¨‹å›¾ç¬¦å· ç½‘å¡åœ°å€å‰åŠéƒ¨åˆ†è¡¨ç¤ºç”Ÿäº§å•†ï¼ŒååŠéƒ¨åˆ†è¡¨ç¤ºç¼–å·ã€‚ å­ç½‘æ©ç çš„ä½œç”¨æ˜¯æ ‡è¯†å‡ºåœ¨32æ¯”ç‰¹çš„IPåœ°å€ä¸­ï¼Œä»å“ªä¸€ä½åˆ°å“ªä¸€ä½æ˜¯ç½‘ç»œåœ°å€ï¼Œä»å“ªä¸€ä½åˆ°å“ªä¸€ä½æ˜¯ä¸»æœºåœ°å€ã€‚255.255.255.240ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºï¼š11111111.11111111.11111111.11110000å€¼ä¸º1çš„é‚£äº›ä½å¯¹åº”ç€IPåœ°å€ä¸­çš„ç½‘ç»œåœ°å€ï¼Œåé¢ä¸º0çš„é‚£äº›åˆ™å¯¹åº”ç€ä¸»æœºåœ°å€ã€‚ DHCPï¼šDynamic Host Configuration Protocol åŠ¨æ€ä¸»æœºè®¾ç½®åè®® tracert ARPï¼šAddress Resolution Protocolï¼Œåœ°å€è§£æåè®®ï¼Œç”¨äºå®ç°ç”±IPåœ°å€åˆ°MACåœ°å€çš„è½¬æ¢arp -a æŸ¥è¯¢aprç¼“å­˜è¡¨ ç¡¬ä»¶å•†å‘é€æ•°æ®çš„æ˜¯ç½‘å¡ï¼Œç½‘å¡ä¹‹ä¸Šæ˜¯è®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œä¹‹ä¸Šæ˜¯å®ç°äº†IPåè®®çš„ç¨‹åºï¼Œä¹‹ä¸Šæ˜¯å®ç°äº†TCPåè®®çš„ç¨‹åºï¼Œå†ä¹‹ä¸Šæ‰æ˜¯åº”ç”¨ç¨‹åºã€‚TCPåè®®ä½¿ç”¨â€œTCPç«¯å£å·â€çš„æ•°å­—è¯†åˆ«ä¸Šå±‚çš„åº”ç”¨ç¨‹åºã€‚TCPç«¯å£ä¸­æœ‰ä¸€äº›æ˜¯é¢„å…ˆå®šä¹‰å¥½çš„ï¼Œæ¯”å¦‚Webä½¿ç”¨80ç«¯å£ï¼Œç”µå­é‚®ä»¶ä½¿ç”¨25ç«¯å£ï¼ˆç”¨äºå‘é€ï¼‰","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"ã€Šå¤§æ˜ç‹æœ1566ã€‹ç»å…¸è¯­å½•","date":"2022-03-08T02:25:29.755Z","path":"wiki/éšç¬”/ã€Šå¤§æ˜ç‹æœ1566ã€‹ç»å…¸è¯­å½•/","text":"æœé‡éƒ½çŸ¥é“ï¼Œæˆ‘æ˜¯ä¸¥é˜è€ææºçš„äººã€‚åƒç§‹ä¸‡ä»£ä»¥åï¼Œå²ä¹¦ä¸Šæˆ‘èƒ¡å®—å®ªè¿˜ä¼šæ˜¯ä¸¥é˜è€çš„äººã€‚å¯ä½ è°­çº¶ï¼Œè¿˜æœ‰æœé‡Œé‚£äº›æ¸…æµä¸ºä»€ä¹ˆè¿˜ä¼šçœ‹é‡æˆ‘ï¼Ÿå°±æ˜¯æˆ‘èƒ¡æŸåœ¨å¤§äº‹ä¸Šä»æ¥ä¸Šä¸è¯¯å›½ï¼Œä¸‹ä¸è¯¯æ°‘ã€‚ å­”å­è¯´çš„â€œçŸ¥ä¸å¯ä¸ºè€Œä¸ºä¹‹â€æ˜¯ä»€ä¹ˆæœ¬æ„ï¼å­”å­æ˜¯å‘Šè¯‰ä¸–äººï¼Œåšäº‹æ—¶ä¸é—®å¯ä¸å¯èƒ½ï¼Œä½†é—®åº”ä¸åº”è¯¥ï¼ ä½ ä¸­æœ‰æˆ‘ï¼Œæˆ‘ä¸­æœ‰ä½ ï¼Œå¤©ä¸‹äº‹åå°±ååœ¨è¿™é‡Œã€‚ äº‹æœªç»å†ä¸çŸ¥éš¾ã€‚ å®˜åœºä¹‹ä¸­æ— æœ‹å‹ã€‚ å‡¡äº‹éƒ½å½“ä½œä¸¤é¢æƒ³ã€‚ ä½ æ˜¯ä¸ªåˆšæ­£çš„äººï¼Œæ•¢è¯´è¯ï¼Œæ•¢æŠ—ä¸Šã€‚å¯çœŸè¦æŠ—ä¸Šï¼Œä½ è¿™ä¸ªä¸ƒå“èƒ½æŠ—å¾—è¿‡è°ï¼Ÿåœ¨æµ™æ±Ÿä½ èƒ½åšäº›äº‹æƒ…æ’¼åŠ¨æœå»·ï¼Œé‚£æ˜¯å› ä¸ºä½ èƒŒåæœ‰äººè¦æ’¼åŠ¨æœå»·ã€‚åˆ°äº†æ±Ÿè¥¿åˆ†å®œï¼Œå‡­ä½ ä¸€ä¸ªäººåˆèƒ½éœ‡åŠ¨è°ï¼Ÿçš‡ä¸Šè¦ç”¨çš„äººè°ä¹Ÿæ¨ä¸å€’ï¼Œçš‡ä¸Šä¸ç”¨çš„äººè°ä¹Ÿä¿ä¸äº†ã€‚ ä¸¤å¥è¯ä½ è¦è®°ä½ï¼Œä¸€å¥æ˜¯æ–‡å®˜ä»¬è¯´çš„â€˜åšå®˜è¦ä¸‰æ€â€™ï¼Œä»€ä¹ˆå«ä¸‰æ€ï¼Œä¸‰æ€å°±æ˜¯æ€å±ã€æ€é€€ã€æ€å˜ã€‚çŸ¥é“äº†å±é™©å°±èƒ½èº²å¼€å±é™©ï¼Œè¿™å°±å«æ€å±ï¼›èº²åˆ°äººå®¶éƒ½ä¸æ³¨æ„åˆ°ä½ çš„åœ°æ–¹ï¼Œè¿™å°±å«æ€é€€ï¼›é€€äº†ä¸‹æ¥å°±æœ‰äº†æœºä¼šï¼Œå†æ…¢æ…¢çœ‹ã€æ…¢æ…¢æƒ³ï¼Œè‡ªå·±ä»¥å‰å“ªå„¿é”™äº†ï¼Œå¾€åè¯¥æ€ä¹ˆåšï¼Œè¿™å°±å«æ€å˜ã€‚æˆ‘å†æ•™ä½ æ­¦å®˜ä»¬è¯´çš„é‚£ä¸€å¥â€˜ç½®ä¹‹æ­»åœ°è€Œåç”Ÿâ€™ï¼Œçœ‹æˆ‘å¤§æ˜æœçš„æ°”æ•°ï¼Œè¿™çš‡ä½è¿Ÿæ—©æœ‰ä¸€å¤©æ˜¯è£•ç‹çš„ï¼Œåˆ°äº†é‚£ä¸€å¤©ä½ æ‰çœŸæ˜¯ä¸ªæ­»å‘¢ã€‚ æ–‡å®˜çš„è¡£æœä¸Šç»£çš„æ˜¯ç¦½ï¼Œæ­¦å®˜çš„è¡£æœä¸Šç»£çš„æ˜¯å…½ã€‚æŠ«ä¸Šäº†è¿™èº«çš®ï¼Œæˆ‘ä»¬å“ªä¸€ä¸ªä¸æ˜¯è¡£å† ç¦½å…½ã€‚ ä»»ä½•äººç­”åº”ä½ çš„äº‹éƒ½ä¸ç®—æ•°ï¼Œåªæœ‰è‡ªå·±èƒ½åšä¸»çš„æ‰ç®—æ•°ã€‚ è¿™ä¸ªä¸–ä¸Šï¼ŒçœŸé å¾—ä½çš„å°±ä¸¤ç§äººï¼Œä¸€ç§æ˜¯ç¬¨äººï¼Œä¸€ç§æ˜¯ç›´äººã€‚ç¬¨äººæ²¡æœ‰å¿ƒçœ¼ï¼Œç›´äººä¸ä½¿å¿ƒçœ¼ã€‚ ä¸–é—´ä¸‡äº‹ä¸‡ç‰©éƒ½åªæœ‰ä¸€ä¸ªç†ï¼Œå„äººç«™çš„ä½ç½®ä¸åŒï¼Œçœ‹æ³•ä¸åŒè€Œå·²ã€‚ å†æ¥é€ åçš„éƒ½æ˜¯ç§ç”°çš„äººï¼Œæ²¡å¬è¯´å•†äººèƒ½é—¹ç¿»äº†å¤©ã€‚ è£•ç‹: å¤§æ˜æœè°æ˜¯è´¤è‡£? å˜‰é–: æ²¡æœ‰è°æ˜¯çœŸæ­£çš„è´¤è‡£,è´¤æ—¶ç”¨ä¹‹,ä¸è´¤é»œä¹‹ã€‚","tags":[],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"å·¥ç¨‹å¸ˆçš„æˆé•¿","date":"2022-03-08T02:25:29.755Z","path":"wiki/éšç¬”/å·¥ç¨‹å¸ˆçš„æˆé•¿/","text":"åŸæ–‡åœ°å€ï¼šhttps://limboy.me/2021/06/29/eng-growth/ è¿™æ˜¯libboyåšå®¢ä¸Šçš„ä¸€ç¯‡æ–‡ç« ï¼Œçœ‹äº†ä¹‹åæ·±æœ‰åŒæ„Ÿã€‚ä¹Ÿä¼šåæ€è‡ªå·±åœ¨å¹³å¸¸çš„å·¥ä½œä¸­æ˜¯å¦æœ‰â€åšåˆ°ä½â€ã€‚é¡ºè¿‡æ¥è´´åˆ°è‡ªå·±çš„Blogä¸­ï¼Œå¹¶åŠ ä¸Šè‡ªå·±çš„ä¸€äº›æƒ³æ³•ã€‚ è¦ç‚¹ ç§¯ç´¯ä¿¡ç”¨è´§å¸ï¼ˆå…ˆæŠŠæ‰‹å¤´çš„äº‹æƒ…åšå¥½ï¼Œå†èŠä½ æƒ³åšä»€ä¹ˆï¼‰ æå‡å½±å“åŠ›ï¼ˆæ³¨é‡è¾“å‡ºï¼›åšèƒ½å¤Ÿå½±å“æ›´å¤šéƒ¨é—¨&#x2F;ä½¿ç”¨æ–¹çš„äº‹ï¼Œå¹¶æŠŠå®ƒåšå¥½ï¼‰ æŠŠå·¥ä½œå½“æˆå†…éƒ¨åˆ›ä¸šï¼ˆå¤šç ”ç©¶æ‰‹å¤´&#x2F;éƒ¨é—¨çš„äº‹æƒ…ï¼Œå¯»æ‰¾é—®é¢˜&#x2F;æœºä¼šï¼ŒæŠŠå…¶ä»–éƒ¨é—¨å½“ä½œæ½œåœ¨åˆä½œä¼™ä¼´ï¼‰ æ¸…æ¥šè‡ªå·±çš„å¼ºé¡¹ï¼ˆå°†è‡ªå·±çš„å¼ºé¡¹å’Œæ­£ç¡®çš„äº‹æƒ…ç»“åˆèµ·æ¥ï¼Œæ‰èƒ½å‘æŒ¥æœ€å¤§çš„ä½œç”¨ï¼‰ ç¯å¢ƒ ä¸ä¼˜ç§€çš„äººå…±äº‹ï¼ˆå­¦ä¹ ä»–ä»¬çš„æŠ€èƒ½å’Œåšäº‹æ–¹å¼ï¼Œä¸è¦æˆä¸ºæœ€èªæ˜çš„é‚£ä¸ªï¼‰ åšç¬¦åˆå¤§è¶‹åŠ¿çš„äº‹ï¼ˆ Focus åœ¨æŸä¸ªé¢†åŸŸå¯èƒ½æ˜¯æŠŠåŒåˆƒå‰‘ï¼Œå¤šç»“åˆä¸€äº›é€šç”¨æŠ€èƒ½ï¼‰ åšäº‹æƒ…æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼ˆå¯ä»¥å‘æŒ¥è‡ªå·±çš„åˆ›é€ åŠ›ï¼Œè€Œä¸æ˜¯åæµç¨‹åŒ–ã€å¯¹ç€æ“ä½œæ‰‹å†Œå°±èƒ½åšçš„äº‹ï¼‰ ä¸€ä¸ªå¥½çš„ Mentorï¼ˆç”¨æ—è§‚è€…è§†è§’ç»™ä½ åé¦ˆï¼ŒæŒ‡å‡ºé—®é¢˜å’Œæ”¹è¿›æ–¹æ¡ˆï¼Œå¸®åŠ©æˆé•¿ï¼‰ ä½œä¸ºä¸ªä½“çš„åŸºæœ¬ç´ è´¨ è‡ªé©±åŠ›ï¼ˆæƒ³åœ¨å‰å¤´ï¼Œä¸éœ€è¦åˆ«äººæ¥ Pushï¼‰ å¥½å¥‡å¿ƒï¼ˆä¸å±€é™äºè‡ªå·±çš„ Scopeï¼Œå¤šäº†è§£åŒäº‹ã€Leadã€è¡Œä¸šçš„äº‹æƒ…ï¼‰ é«˜æ ‡å‡†ï¼ˆä»…ä»…åšå®Œæ˜¯ä¸å¤Ÿçš„ï¼Œä¸€ä¸ªé—®é¢˜å¾€å¾€æœ‰å¾ˆå¤šå¯ä»¥æŒ–æ˜çš„ç‚¹ï¼‰ æ—¶é—´ç®¡ç†ï¼ˆä¸ä¼šç–²äºåº”ä»˜å„ç§éœ€æ±‚å’Œé—®é¢˜ï¼Œæœ‰ä¼˜å…ˆçº§å’Œ Planï¼‰ ä½œä¸ºå·¥ç¨‹å¸ˆçš„åŸºæœ¬ç´ è´¨ è‰¯å¥½çš„ç¼–ç èƒ½åŠ›ï¼ˆ1 ä¸ªæœˆåçš„è‡ªå·±ä¾ç„¶å¯ä»¥ç»´æŠ¤ï¼Œå‡ºé—®é¢˜å¯ä»¥å¿«é€Ÿå®šä½ï¼‰ äº«å—è§£å†³é—®é¢˜çš„ä¹è¶£ï¼Œå…·å¤‡åŒ–ç¹ä¸ºç®€çš„èƒ½åŠ›ï¼ˆæŠ½è±¡ï¼Œåˆ†è§£ï¼Œåˆ†å±‚ï¼Œåˆ†æ¨¡å—ï¼‰ æŠ—å‹èƒ½åŠ›ï¼ˆå‹åŠ›ä¸‹ï¼Œä¸å˜å½¢ï¼‰ æ•°æ®æ„è¯†ï¼ˆå¥½äº†ï¼Œåäº†ï¼Œç”¨æ•°æ®è¯´è¯ï¼‰ æ³¨é‡æ•ˆç‡ï¼ˆä¸åå•¬åœ¨å·¥å…·ä¸Šçš„æŠ•å…¥ï¼‰ çœ‹é—®é¢˜çš„è§’åº¦ å¦‚æœç°çŠ¶è®©æˆ‘ä¸èˆ’æœï¼Œæˆ‘å¯ä»¥åšä»€ä¹ˆæ¥æ”¹å˜ï¼Œè€Œä¸æ˜¯é€ƒé¿å’ŒåŸ‹å†¤ å¦‚æœè§‰å¾—å½“å‰æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä¸€å®šæ˜¯äº†è§£å¾—è¿˜ä¸å¤Ÿæ·±å…¥ å¦‚æœæ˜¯Taï¼ˆæŸä¸ªä½ æ¬£èµçš„äººï¼‰æ¥åšä½ æ‰‹å¤´çš„äº‹ï¼ŒTa ä¼šæ€ä¹ˆåš åšäº‹æƒ…çš„æ–¹æ³• è®¾è®¡æ–¹æ¡ˆæ—¶è¦è€ƒè™‘å‘¨åˆ°ï¼šç«å“è°ƒç ”ã€ä¸Šçº¿ç­–ç•¥ã€é™çº§æ–¹æ¡ˆã€å›æ»šæ–¹æ¡ˆã€å‡ºé—®é¢˜æ—¶å¦‚ä½•æ’æŸ¥ç­‰ äº‹æƒ…æ¨ä¸åŠ¨å°±ä¸Šå‡ï¼Œä½†è¦æä¾›å……è¶³çš„ä¸Šä¸‹æ–‡ä»¥ä¾¿ Lead åšå†³ç­–ï¼ŒContext not Control æ±‡æŠ¥æ—¶è¦åˆ‡æ¢è§†è§’ï¼Œæœ‰æ¡ç†ï¼ŒæŠŠè¦ç‚¹è¯´æ¸…æ¥šï¼ŒåŒæ—¶æä¾›äº†è§£ç»†èŠ‚çš„å…¥å£ æ€»ç»“ è‡ªå·±çš„æŠ€èƒ½æ°´å¹³ä¸€å®šè¦è¿‡â€ç¡¬â€ï¼Œå…ˆè¦æŠŠè‡ªå·±æ‰‹ä¸Šçš„äº‹æƒ…åšå¥½ï¼Œåšåˆ°ä¼˜ç§€ï¼Œå†å»è€ƒè™‘å…¶ä»–ã€‚ä½œä¸ºæŠ€æœ¯äººå‘˜ï¼Œæ˜¯ä¸€å®šè¦è€å¾—ä½å¯‚å¯ï¼ŒèŠ±æ—¶é—´å’Œç²¾åŠ›å»å­¦ä¹ ç›¸å…³æŠ€æœ¯çš„ã€‚ åšäº‹æƒ…çš„æ–¹å¼ï¼Œå¤šä»ä¸åŒè§’åº¦æ€è€ƒé—®é¢˜ï¼Œæ·±å…¥é—®é¢˜çš„æœ¬è´¨ï¼Œç”¨å®¢è§‚æ•°æ®è¡¨è¾¾ä¸€ä¸ªäº‹æƒ…æ˜¯å¦è¾¾åˆ°é¢„æœŸã€‚è®²ç©¶åšäº‹æ•ˆç‡ã€‚ ä¼˜ç§€çš„äººä¹‹æ‰€ä»¥ä¼˜åŒ–ï¼Œæ˜¯å› ä¸ºä»–èªæ˜+å‹¤å¥‹+ä¸€ä¸¢ä¸¢çš„è¿æ°”ã€‚å¦‚æœå½“ä¸‹çš„çŠ¶æ€ä¸æ˜¯è‡ªå·±æœŸæœ›çš„ï¼Œé‚£ä¹ˆåªæœ‰åŠªåŠ›å»æ”¹å˜ä»–ã€‚","tags":[],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"ç«è½¦ç¥¨é»„ç‰›","date":"2022-03-08T02:25:29.755Z","path":"wiki/éšç¬”/ç«è½¦ç¥¨é»„ç‰›/","text":"ä»Šå¤©â€œé•¿è§è¯†â€äº†ã€‚ å¼€å§‹ä»¥ä¸ºå›å¹¿å·çš„é«˜é“ç¥¨åº”è¯¥å¾ˆå®¹æ˜“ä¹°åˆ°ï¼Œæ‰€ä»¥ï¼Œå¹¶æ²¡æœ‰æå‰ä¹°ç¥¨ã€‚ç„¶è€Œï¼Œåœ¨å®¶ç”¨æŸè¡Œç«è½¦ç¥¨åˆ·ç¥¨åˆ°7ç‚¹ä¹Ÿæ²¡ä¹°åˆ°ç¥¨ã€‚æ˜å¤©å¯è¿˜è¦ä¸Šç­å‘¢ã€‚æƒ³ç€è¦ä¸å»äººå·¥å”®ç¥¨å¤„ç¢°ç¢°è¿æ°”ã€‚ç„¶åæ¥åˆ°äº†é«˜é“ç«™ã€‚å…ˆå»äº†äººå·¥å”®ç¥¨çª—å£ï¼Œå”®ç¥¨çš„è¿™ä¸ªå°å§å§ç”¨éå¸¸å†·æ·¡çš„è¡¨æƒ…å›ç­”è¯´æ²¡æœ‰ï¼Œç„¶åæˆ‘å°±å†æ¬¡é—®äº†ä¸€æ¬¡ï¼Œè¯·é—®ä»Šæ™šå¾€å¹¿å·æ–¹å‘çš„è½¦çš„ç¥¨æœ‰æ²¡æœ‰ï¼Œåªè¦èƒ½ä¸Šè½¦çš„éƒ½è¡Œï¼Ÿç»“æœæ˜¯å¥¹å†æ¬¡è‚¯å®šçš„è¯´äº†ä¸€å¥æ²¡æœ‰ï¼å“ï¼Œæ—¢ç„¶è¿™æ ·è¯´äº†â€¦ ç„¶åï¼Œæˆ‘æƒ³å»å”®ç¥¨æœºä¸Šç¢°ç¢°è¿æ°”ã€‚å½“æˆ‘åˆ°äº†ä¸€å°å”®ç¥¨æœºå‰ï¼Œæ‰“ç®—æŸ¥è¯¢çš„æ—¶å€™ï¼Œæ—è¾¹æ¥äº†ä¸€ä½å°å“¥ï¼Œè·Ÿæˆ‘è¯´ï¼šå…„Daiï¼Œéœ€è¦ç¥¨å—ï¼Ÿä¸€ä¸ªå°æ—¶ä»¥å†…çš„éƒ½å¯ä»¥æå®šã€‚æˆ‘å½“æ—¶å°±æœ‰ç‚¹æ‡µé€¼äº†ï¼Œé»„ç‰›éš¾é“å¯ä»¥å˜å‡ºç¥¨æ¥ï¼Ÿæƒ³ç€è¿˜æ˜¯è¦å›å»çš„ï¼Œäºæ˜¯è¯´ï¼šæˆ‘éœ€è¦çš„ã€‚ä»–è¯´ï¼šä½ è·Ÿæˆ‘æ¥è¿™è¾¹å§ï¼Œè¿™è¾¹çš„æœºå™¨å¿«ä¸€äº›ã€‚ç„¶åæˆ‘ä»¬æ¥åˆ°äº†æ—è¾¹çš„ä¸€å°æœºå™¨æ—ï¼Œåªè§ä»–è¿…é€Ÿçš„åœ¨å”®ç¥¨æœºå‰ç‚¹å‡»ã€‚æ“ä½œä¹Ÿå°±æ˜¯æŸ¥è¯¢æ˜¯å¦æœ‰ä½™ç¥¨ï¼Œç„¶åä¸€ä¸‹å­å°±å‡ºç°äº†ï¼Œè¯·åˆ·èº«ä»½è¯çš„æç¤ºã€‚ç„¶åè·Ÿæˆ‘è¯´ï¼šå¿«æŠŠèº«ä»½è¯æ”¾ä¸Šæ¥ã€‚æˆ‘ä¸€ä¸‹å­çœ‹å‚»äº†ï¼Œç„¶åè¿…é€Ÿå†·é™ä¸‹æ¥ï¼Œé—®ä»–éœ€è¦ç»™ä»–å¤šå°‘é’±ã€‚ç»“æœï¼Œç­‰äº†åå‡ ç§’å§ï¼Œç¥¨å°±æ²¡äº†ã€‚ä»–è¡¨ç°çš„æœ‰ç‚¹æ‡Šæ¼ã€‚æƒ³æƒ³è¿˜æ˜¯è¦å›å»çš„ï¼Œäºæ˜¯è·Ÿä»–è°ˆä»·é’±ï¼Œç„¶ååˆçœ‹ä»–æ“ä½œäº†ä¸€éï¼Œå¤ªç¥å¥‡äº†ã€‚ä¸åˆ°ä¸€åˆ†é’Ÿï¼Œä»–åˆåˆ·å‡ºæ¥ä¸€å¼ ï¼Œç„¶åæˆ‘æ‹¿å‡ºèº«ä»½è¯æ”¯ä»˜äº†ã€‚ äº‹åæƒ³æƒ³ï¼Œéš¾é“è¿™æ˜¯å”®ç¥¨æœºçš„æ¼æ´å—ï¼Ÿéš¾é“å”®ç¥¨æœºä¸Šçš„æŸ¥è¯¢æ¥å£è·Ÿäººå·¥å”®ç¥¨å…é‡Œçš„ä¸ä¸€æ ·ï¼Ÿé»„ç‰›çš„è¿™ä¸ªé’±ä¹Ÿå¤ªå¥½èµšäº†å§ã€‚","tags":[],"categories":[{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"}]},{"title":"è¯»ä¹¦ç¬”è®°6ï¼šå­˜å‚¨å™¨å±‚æ¬¡ç»“æ„","date":"2022-03-08T02:25:29.755Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°6-å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°7ï¼šé“¾æ¥","date":"2022-03-08T02:25:29.755Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°7-é“¾æ¥/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°8ï¼šå¼‚å¸¸æµæ§åˆ¶","date":"2022-03-08T02:25:29.755Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°8-å¼‚å¸¸æµæ§åˆ¶/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°9ï¼šè™šæ‹Ÿå†…å­˜","date":"2022-03-08T02:25:29.755Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°9-è™šæ‹Ÿå†…å­˜/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°10ï¼šç³»ç»Ÿçº§I/O","date":"2022-03-08T02:25:29.754Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°10-ç³»ç»Ÿçº§IO/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°11ï¼šç½‘ç»œç¼–ç¨‹","date":"2022-03-08T02:25:29.754Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°11-ç½‘ç»œç¼–ç¨‹/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°12ï¼šå¹¶å‘ç¼–ç¨‹","date":"2022-03-08T02:25:29.754Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°12-å¹¶å‘ç¼–ç¨‹/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹ ç°ä»£æ“ä½œç³»ç»Ÿæä¾›ä¸‰ç§åŸºæœ¬çš„æ„é€ å¹¶å‘ç¨‹åºçš„æ–¹æ³•ï¼š è¿›ç¨‹ I&#x2F;Oå¤šè·¯å¤ç”¨ï¼ˆselectã€pollã€epollï¼‰ çº¿ç¨‹ åŸºäºè¿›ç¨‹çš„å¹¶å‘ç¼–ç¨‹åŸºäºI&#x2F;Oå¤šè·¯å¤ç”¨çš„å¹¶å‘ç¼–ç¨‹åŸºäºçº¿ç¨‹çš„å¹¶å‘ç¼–ç¨‹å¤šçº¿ç¨‹ç¨‹åºä¸­çš„å…±äº«å˜é‡ç”¨ä¿¡å·é‡åŒæ­¥çº¿ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°2ï¼šä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç†","date":"2022-03-08T02:25:29.754Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°2-ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç†/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹ åŸç ã€åç ã€è¡¥ç ","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°3ï¼šç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º","date":"2022-03-08T02:25:29.754Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°3-ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°3ï¼šå¤„ç†å™¨ä½“ç³»ç»“æ„","date":"2022-03-08T02:25:29.754Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°4-å¤„ç†å™¨ä½“ç³»ç»“æ„/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"è¯»ä¹¦ç¬”è®°5ï¼šä¼˜åŒ–ç¨‹åºæ€§èƒ½","date":"2022-03-08T02:25:29.754Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°5-ä¼˜åŒ–ç¨‹åºå±‚æ¬¡ç»“æ„/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"ã€Šæ·±å…¥ç†è§£Androidå·2ã€‹è¯»ä¹¦ç¬”è®°","date":"2022-03-08T02:25:29.753Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£Androidå·2/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"è¯»ä¹¦ç¬”è®°1ï¼šè®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸","date":"2022-03-08T02:25:29.753Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº/è¯»ä¹¦ç¬”è®°1-è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸/","text":"ç›®å½• è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸ ä¿¡æ¯çš„è¡¨ç¤ºå’Œå¤„ç† ç¨‹åºçš„æœºå™¨çº§è¡¨ç¤º å¤„ç†å™¨ä½“ç³»ç»“æ„ ä¼˜åŒ–ç¨‹åºæ€§èƒ½ å­˜å‚¨å™¨å±‚æ¬¡ç»“æ„ é“¾æ¥ å¼‚å¸¸æµæ§åˆ¶ è™šæ‹Ÿå†…å­˜ ç³»ç»Ÿçº§I&#x2F;O ç½‘ç»œç¼–ç¨‹ å¹¶å‘ç¼–ç¨‹ è®¡ç®—æœºç³»ç»Ÿæ¼«æ¸¸æœ¬ç« åªæ˜¯å¯¹æ•´ä¸ªè®¡ç®—æœºä½“ç³»è¿›è¡Œæ¦‚è¦çš„ä»‹ç»ï¼Œå¾ˆå¤šä¸»é¢˜æ‰©å±•å¼€æ¥åˆå¯ä»¥å†™ä¸€æœ¬å¾ˆåšçš„ä¹¦äº†ã€‚åœ¨é˜…è¯»æ­¤ç« æ—¶ï¼Œæœ‰ä¸ªå¤§æ¦‚äº†è§£å³å¯ã€‚ hello worldæºç¨‹åºå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªç”±å€¼0å’Œ1ç»„æˆçš„ä½ï¼ˆåˆç§°ä¸ºæ¯”ç‰¹ï¼‰åºåˆ—ï¼Œ8ä¸ªä½è¢«ç»„ç»‡æˆä¸€ç»„ï¼Œç§°ä¸ºå­—èŠ‚ã€‚æ¯ä¸ªå­—èŠ‚è¡¨ç¤ºç¨‹åºä¸­çš„æŸäº›æ–‡æœ¬å­—ç¬¦ã€‚ç³»ç»Ÿä¸­æ‰€æœ‰çš„ä¿¡æ¯â€“åŒ…æ‹¬ç£ç›˜æ–‡ä»¶ã€å†…å­˜ä¸­çš„ç¨‹åºã€å†…å­˜ä¸­å­˜æ”¾ç”¨æˆ·æ•°æ®ä»¥åŠç½‘ç»œä¸Šä¼ é€çš„æ•°æ®ï¼Œéƒ½æ˜¯ç”±ä¸€ä¸²æ¯”ç‰¹è¡¨ç¤ºçš„ã€‚åŒºåˆ†ä¸åŒæ•°æ®å¯¹è±¡çš„å”¯ä¸€æ–¹å¼æ˜¯æˆ‘ä»¬è¯»åˆ°è¿™äº›æ•°æ®å¯¹è±¡æ—¶çš„ä¸Šä¸‹æ–‡ã€‚ ä¸‹å›¾æè¿°äº†ä¸€ä¸ªcç¨‹åºæ˜¯å¦‚ä½•è¢«ç¼–è¯‘è¿è¡Œçš„ã€‚ å…³äºè®¡ç®—æœºçš„æ„æˆ å…³äºå­˜å‚¨å™¨ åˆ†å±‚ï¼Œé«˜å±‚æä¾›ç»™ä½å±‚é«˜é€Ÿç¼“å­˜ï¼Œè¶Šé«˜å±‚æ€§èƒ½è¶Šå¥½ï¼Œä»·æ ¼è¶Šè´µã€‚ è®¡ç®—æœºæŠ½è±¡çš„è¡¨ç¤º å…³äºshellshellæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå®ƒè¾“å‡ºä¸€ä¸ªæç¤ºç¬¦ï¼Œç­‰å¾…è¾“å…¥ä¸€ä¸ªå‘½ä»¤è¡Œï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚å¦‚æœè¯¥å‘½ä»¤è¡Œçš„ç¬¬ä¸€ä¸ªå•è¯ä¸æ˜¯å†…ç½®çš„shellå‘½ä»¤ï¼Œé‚£ä¹ˆshellå°±ä¼šå‡è®¾è¿™æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶çš„åå­—ï¼Œå®ƒå°†åŠ è½½å¹¶è¿è¡Œè¿™ä¸ªæ–‡ä»¶ã€‚ æ“ä½œç³»ç»Ÿçš„ä¸¤ä¸ªåŸºæœ¬åŠŸèƒ½ï¼š é˜²æ­¢ç¡¬ä»¶è¢«å¤±æ§çš„åº”ç”¨ç¨‹åºæ»¥ç”¨ï¼› å‘åº”ç”¨ç¨‹åºææˆç®€å•ä¸€è‡´çš„æœºåˆ¶æ¥æ§åˆ¶å¤æ‚è€Œåˆé€šå¸¸å¤§ä¸ç›¸åŒçš„ä½çº§ç¡¬ä»¶è®¾å¤‡ã€‚ æ“ä½œç³»ç»Ÿé€šè¿‡å‡ ä¸ªåŸºæœ¬çš„æŠ½è±¡æ¦‚å¿µï¼ˆè¿›ç¨‹ã€è™šæ‹Ÿå†…å­˜å’Œæ–‡ä»¶ï¼‰æ¥å®ç°è¿™ä¸¤ä¸ªåŠŸèƒ½ã€‚æ–‡ä»¶æ˜¯å¯¹I&#x2F;Oè®¾å¤‡çš„æŠ½è±¡è¡¨ç¤ºï¼Œè™šæ‹Ÿå†…å­˜æ˜¯å¯¹ä¸»å­˜å’Œç£ç›˜I&#x2F;Oè®¾å¤‡çš„æŠ½è±¡è¡¨ç¤ºï¼Œè¿›ç¨‹åˆ™æ˜¯å¯¹å¤„ç†å™¨ã€ä¸»å­˜å’ŒI&#x2F;Oè®¾å¤‡çš„æŠ½è±¡è¡¨ç¤ºã€‚ Posixçš„ç”±æ¥20ä¸–çºª80å¹´ä»£ä¸­æœŸï¼ŒUnixå‚å•†è¯•å›¾é€šè¿‡åŠ å…¥æ–°çš„ã€å¾€å¾€ä¸å…¼å®¹çš„ç‰¹æ€§æ¥ä½¿ä»–ä»¬çš„ç¨‹åºä¸ä¼—ä¸åŒï¼Œä¸ºäº†é˜»æ­¢è¿™ç§è¶‹åŠ¿ï¼ŒIEEEå¼€å§‹æ ‡å‡†åŒ–Unixçš„å¼€å‘ï¼Œåæ¥ç”±Richard Stallmanå‘½åä¸ºâ€œPosixâ€ã€‚ç»“æœå°±å¾—åˆ°äº†ä¸€äº›åˆ—çš„æ ‡å‡†ï¼Œç§°ä½œPosixæ ‡å‡†ã€‚ å¹¶å‘è¿è¡Œä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤å’Œå¦ä¸€ä¸ªè¿›ç¨‹çš„æŒ‡ä»¤æ˜¯äº¤é”™æ‰§è¡Œçš„ã€‚ æ“ä½œç³»ç»Ÿä¿æŒè·Ÿè¸ªè¿›ç¨‹è¿è¡Œæ‰€éœ€çš„æ‰€æœ‰çŠ¶æ€ä¿¡æ¯ã€‚è¿™ç§çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸‹æ–‡ã€‚ è¿›ç¨‹é—´åˆ‡æ¢çš„äº¤é”™æ‰§è¡Œçš„æœºåˆ¶ç§°ä¸ºä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚ Amdahlå®šå¾‹ aè¡¨ç¤ºå¯ä»¥æå‡éƒ¨åˆ†çš„æ¯”ä¾‹ kè¡¨ç¤ºå¯æå‡éƒ¨åˆ†æ€§èƒ½æå‡çš„æ¯”ä¾‹","tags":[{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"}]},{"title":"æ”¶é›†çš„ç”µå­ä¹¦","date":"2022-03-08T02:25:29.747Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ”¶é›†çš„ç”µå­ä¹¦/","text":"å¦‚ä½•é˜…è¯»ä¸€æœ¬ä¹¦ ActionScriptã€Flex Actionscript 3 image effects ActionScript 3 ActionScript Graphing Cookbook ActionScript ActionScriptå¤§å‹ç½‘é¡µæ¸¸æˆå¼€å‘ AdvancED ActionScript AnimationåŠ¨ç”»é«˜çº§ç¼–ç¨‹ AdvancED Game Design with Flash air_buildingapps Flash Cinematic Techniques Flash Game Development by Example Flex4æƒå¨æŒ‡å— FLEXä¼ä¸šåº”ç”¨å¼€å‘å®æˆ˜ Foundation Game Design with Flash FriendsofED The Essential Guide to Flash Games(flashæ¸¸æˆç¼–ç¨‹æŒ‡å—) ä¼˜åŒ–Flashæ€§èƒ½ AIR_Androidåº”ç”¨å¼€å‘å®æˆ˜ Developing Android Applications with Flex 4 Flash+Flex+Airç§»åŠ¨å¼€å‘å…¥é—¨ç»å…¸ mobile-encoding-android-v2_7 Packt Publishing Flash Development for Android Cookbook (2011) ä½¿ç”¨Flex4 ABCStructure amf0_spec_121207 amf3_spec_121207 avm2overview swf_file_format_spec_v10 video_file_format_spec_v10_1 Android Android 4é«˜çº§ç¼–ç¨‹(ç¬¬3ç‰ˆ) Android Developer Tools Essentials Android Native Development Kit Cookbook Androidå†…æ ¸å‰–æ(å®Œæ•´ç‰ˆ) Androidå¤šåª’ä½“å¼€å‘é«˜çº§ç¼–ç¨‹ Androidåº”ç”¨å¼€å‘è¯¦è§£ Androidå¼€å‘ç²¾è¦ ANDROIDæ¡†æ¶æ­ç§˜ Androidç³»ç»Ÿæºä»£ç æƒ…æ™¯åˆ†æ Androidè½¯ä»¶å®‰å…¨ä¸é€†å‘åˆ†æ Dalvik-Bytecode embedded_android Fragments for All Presentation Google Android SDKå¼€å‘èŒƒä¾‹å¤§å…¨(ç¬¬3ç‰ˆ) Groovy in Action Groovyä¸­æ–‡æ•™ç¨‹ Kotlin in Action kotlin-for-android-developers-zh Kotlinå®˜æ–¹å‚è€ƒæ–‡æ¡£ä¸­æ–‡ç‰ˆ Practical practical_android_4_games_development Smashing_Android_UI The Busy Coderâ€™s Guide to Android Development, Version 4 [Gradle [www æ·±å…¥ç†è§£Android(å·2) æ·±å…¥ç†è§£android ç–¯ç‹‚Androidè®²ä¹‰ ç²¾é€šAndroid3 C# C#å…¥é—¨ç»å…¸ç¬¬5ç‰ˆä¸­æ–‡é«˜æ¸…ç‰ˆ C#é«˜çº§ç¼–ç¨‹(ä¸­æ–‡ç¬¬ä¸ƒç‰ˆ) Cã€C++ Accelerated C++ä¸­æ–‡ç‰ˆ Andrew Koenigï¼šC é™·é˜±ä¸ç¼ºé™·@2002 (æ‰«æç‰ˆ) An_Introduction_to_GCC_ä¸­æ–‡ c++ Primer ç¬¬5ç‰ˆ C+++GUI+QT3ç¼–ç¨‹_11774607 C++STLæ ‡å‡†ç¨‹åºåº“å¼€å‘æŒ‡å— PDFç”µå­ä¹¦ä¸‹è½½ å¸¦ä¹¦ç­¾ç›®å½• C++æ ‡å‡†ç¨‹åºåº“ C++æ¨¡æ¿å…ƒç¼–ç¨‹ C++æ²‰æ€å½•(Ruminations on C++)ä¸­æ–‡ç¬¬2ç‰ˆ C++ç¨‹åºè®¾è®¡åŸç†ä¸å®è·µ(ä¸­æ–‡å®Œæ•´ç‰ˆ) C++ç¼–ç¨‹è§„èŒƒ-101æ¡è§„åˆ™å‡†åˆ™ä¸æœ€ä½³å®è·µ C++è¯­è¨€çš„è®¾è®¡å’Œæ¼”åŒ– Cä¸“å®¶ç¼–ç¨‹ Cå’ŒæŒ‡é’ˆ(ç¬¬äºŒç‰ˆ)é«˜æ¸…å…¨ç‰ˆ469é¡µ Cç¨‹åºè®¾è®¡(ç¬¬å››ç‰ˆ)è°­æµ©å¼º Cç¨‹åºè®¾è®¡è¯­è¨€(ç¬¬2ç‰ˆ_æ–°ç‰ˆ) Cç¨‹åºè®¾è®¡è¯­è¨€(ç¬¬2ç‰ˆ_æ–°ç‰ˆ)ä¹ é¢˜è§£ç­” Cç¨‹åºè®¾è®¡è¯­è¨€(ç¬¬2ç‰ˆ_æ–°ç‰ˆ)éæ‰«æç‰ˆ&amp;è¯¦ç»†ä¹¦ç­¾ç‰ˆ Cè¯­è¨€å…¥é—¨ç»å…¸(ç¬¬å››ç‰ˆ) Cè¯­è¨€èŒƒä¾‹å¼€å‘å¤§å…¨ Effective C ä¸­æ–‡ç‰ˆç¬¬ä¸‰ç‰ˆ é«˜æ¸…PDF Effective STL ä¸­æ–‡ç‰ˆ Essential C++ä¸­æ–‡ç‰ˆ Head STLæºç å‰–æç®€ä½“ä¸­æ–‡å®Œæ•´ç‰ˆ(æ¸…æ™°æ‰«æå¸¦ç›®å½•) ä½ å¿…é¡»çŸ¥é“çš„495ä¸ªCè¯­è¨€é—®é¢˜ åƒè®¡ç®—æœºç§‘å­¦å®¶ä¸€æ ·æ€è€ƒC++ å—¨ç¿»Cè¯­è¨€_13421426(jb51 æ˜“å­¦C++ English æ— æ•Œåˆä¸­å¿…è€ƒè¯­æ³• æ–°ç¼–è‹±è¯­è¯­æ³•æ•™ç¨‹+å­¦ç”Ÿç”¨ä¹¦+ç¬¬5ç‰ˆ_PDF æ— æ•Œè‹±è¯­è¯­æ³•ï¼šå…¨èŒƒå›´ History ä¹”æ²»Â·å¥¥å¨å°”ï¼šä¸€ä¹å…«å›› ä½•æ¸…æ¶Ÿï¼šç°ä»£åŒ–çš„é™·é˜± å´æ€ï¼šæ½œè§„åˆ™â€”â€”ä¸­å›½å†å²ä¸­çš„çœŸå®æ¸¸æˆ å´æ€ï¼šè¡€é…¬å®šå¾‹â€”â€”ä¸­å›½å†å²ä¸­çš„ç”Ÿå­˜æ¸¸æˆ å¨å»‰Â·å¤ä¼Šå‹’ï¼šç¬¬ä¸‰å¸å›½çš„å…´äº¡ (ä¸Š) å¨å»‰Â·å¤ä¼Šå‹’ï¼šç¬¬ä¸‰å¸å›½çš„å…´äº¡ (ä¸‹) å¨å»‰Â·å¤ä¼Šå‹’ï¼šç¬¬ä¸‰å¸å›½çš„å…´äº¡ (ä¸­) å­¦ä¼šæé—®-æ‰¹åˆ¤æ€§æ€ç»´æŒ‡å— å¼—æ´›ä¼Šå¾·ï¼šæ¢¦çš„è§£æ å¼—æ´›ä¼Šå¾·ï¼šç²¾ç¥åˆ†æå¼•è®º å¾ä¸­çº¦ã€Šä¸­å›½è¿‘ä»£å²ã€‹ï¼ˆPDF-æ¸¯ç‰ˆå®Œæ•´æ— åˆ å‡ï¼‰ä¸Š å¾ä¸­çº¦ã€Šä¸­å›½è¿‘ä»£å²ã€‹ï¼ˆPDF-æ¸¯ç‰ˆå®Œæ•´æ— åˆ å‡ï¼‰ä¸‹ æ–¯ç§‘ç‰¹Â·æ´¾å…‹ï¼šå°‘æœ‰äººèµ°çš„è·¯ ç½—ä¼¯ç‰¹Â·è¥¿å¥¥è¿ªå°¼ï¼šå½±å“åŠ› é‡‘è§‚æ¶› &amp; åˆ˜é’å³°ï¼šå…´ç››ä¸å±æœºâ€”â€”è®ºä¸­å›½ç¤¾ä¼šè¶…ç¨³å®šç»“æ„ é˜¿åˆ©å®‰ï¼šäºšå†å±±å¤§è¿œå¾è®° é«˜åï¼šåœ¨å†å²çš„é£é™µæ¸¡å£ é»„ä»å®‡ï¼šä¸­å›½å¤§å†å² å‰‘æ¡¥ä¸­å›½å†å² ä¸­åäººæ°‘å…±å’Œå›½å² (ä¸Šå· æ‰«æç‰ˆ) æ˜å² (æ‰«æç‰ˆ) æ™šæ¸…å² (ä¸Šå· æ‰«æç‰ˆ) æ™šæ¸…å² (ä¸‹å· æ‰«æç‰ˆ) æ°‘å›½å² (ä¸Šå· æ‰«æç‰ˆ) æ°‘å›½å² (ä¸‹å· æ‰«æç‰ˆ) ç§¦æ±‰å² (æ‰«æç‰ˆ) è¾½è¥¿å¤é‡‘å…ƒå² (æ‰«æç‰ˆ) éš‹å”å² (æ‰«æç‰ˆ) iOS AppDistributionGuide Effective Objective-C 2 iOSåº”ç”¨é€†å‘å·¥ç¨‹ åˆ†æä¸å®æˆ˜ iOSç¼–ç¨‹+ç¬¬4ç‰ˆ Objective C ç¼–ç¨‹ä¹‹é“ Objective Cç¨‹åºè®¾è®¡ Objective-Cç¼–ç¨‹å…¨è§£ ç¬¬3ç‰ˆ Objective-Cé«˜çº§ç¼–ç¨‹ iOSä¸OS Xå¤šçº¿ç¨‹å’Œå†…å­˜ç®¡ç† OSXä¸iOSå†…æ ¸ç¼–ç¨‹ Java advancedservletsjsp Effective Enterprise Java(Chinese) Head First Servlets and JSP ä¸­æ–‡ç‰ˆ ç¬¬2ç‰ˆ Head First Servlets and JSP 2nd Head First Webè®¾è®¡ (ä¸­æ–‡ç‰ˆ) JAVAå¹¶å‘ç¼–ç¨‹å®è·µï¼ˆä¸­æ–‡ï¼‰ Javaå¹¶å‘ç¼–ç¨‹å®è·µï¼ˆè‹±æ–‡ç‰ˆï¼‰ Javaæœ¬åœ°æ¥å£(JNI)ç¼–ç¨‹æŒ‡å—å’Œè§„èŒƒ2 JAVAæ¡ˆä¾‹å¼€å‘é›†é”¦ Javaç¼–ç¨‹æ€æƒ³_ç¬¬4ç‰ˆ_ä¸­æ–‡å®Œæ•´ç‰ˆ Javaè™šæ‹Ÿæœºè§„èŒƒä¸­æ–‡ç‰ˆ Javaè¿·é¢˜ JAVAé¢è¯•é¢˜è§£æƒ‘ç³»åˆ— servlet-2_5-mrel2-spec Think In Java 4å®Œç¾é«˜æ¸…ä¸­æ–‡ç‰ˆ ã€ŠJavaç½‘ç»œç¼–ç¨‹(ç¬¬4ç‰ˆ)ã€‹ æ·±å…¥æµ…å‡ºæ•°æ®åˆ†æï¼ˆç¾ï¼‰ç±³å°”é¡¿è‘— Effective Javaï¼ˆç¬¬2ç‰ˆï¼‰ Javascript HTML5é«˜çº§ç¨‹åºè®¾è®¡ javascript dom ç¼–ç¨‹è‰ºæœ¯ JavaScriptæƒå¨æŒ‡å—(ç¬¬6ç‰ˆ)(ä¸­æ–‡ç‰ˆ) JavaScripté«˜çº§ç¨‹åºè®¾è®¡(ä¸­æ–‡)-ç¬¬3ç‰ˆ kinect 51CTOä¸‹è½½-kinectåº”ç”¨å¼€å‘å®æˆ˜ï¼ˆå…¨ä¹¦ï¼‰ Kinectäººæœºäº¤äº’å¼€å‘å®è·µ Linux bash Cookbook Solutions and Examples for bash Users Linux Shell Scripting Cookbook 2nd Edition May 2013 Linux ä¸ UNIX Shell ç¼–ç¨‹æŒ‡å— Linux linuxå†…æ ¸æºä»£ç æƒ…æ™¯åˆ†æ(ä¸Š) linuxå†…æ ¸æºä»£ç æƒ…æ™¯åˆ†æ(ä¸‹) Linuxå‘½ä»¤è¡Œä¸Shellè„šæœ¬ç¼–ç¨‹å¤§å…¨ ç¬¬2ç‰ˆ Understanding The Linux Kernel UNIXæ“ä½œç³»ç»ŸåŸºç¡€ä½¿ç”¨æ‰‹å†Œ ç²¾é€šUNIXShellè„šæœ¬ç¼–ç¨‹ é«˜çº§Bashè„šæœ¬ç¼–ç¨‹æŒ‡å—(Advanced Bash-Scripting é¸Ÿå“¥çš„Linuxç§æˆ¿èœæœåŠ¡å™¨æ¶è®¾ç¯‡(ç¬¬ä¸‰ç‰ˆ) Music äº”çº¿è°±å…¥é—¨ åŸºæœ¬ä¹ç† PHP PHPå’ŒMySQL PHPå¼€å‘å®æˆ˜1200ä¾‹ symfonyæƒå¨æŒ‡å— æ·±å…¥PHPé¢å‘å¯¹è±¡æ¨¡å¼ä¸å®è·µ ç™½å¸½å­è®² Web å®‰å…¨ é«˜æ€§èƒ½mysqlç¬¬ä¸‰ç‰ˆ PHPæ ¸å¿ƒæŠ€æœ¯ä¸æœ€ä½³å®è·µ PHPå†…æ ¸å‰–æ æ·±å…¥ç†è§£PHPå†…æ ¸ Python Beginning Game Development with Python and Pygame Dive into Python Effective Expert Python Programming(2nd) make game with python &amp; pyGame Python 3 Python Cookbook Pythonå‚è€ƒæ‰‹å†Œ(ç¬¬4ç‰ˆ) PythonåŸºç¡€æ•™ç¨‹(ç¬¬2ç‰ˆ) pythonæ ‡å‡†åº“ä¸­æ–‡ç‰ˆPDF(å¸¦ç« èŠ‚ä¹¦ç­¾) Pythonæ ¸å¿ƒç¼–ç¨‹ç¬¬äºŒç‰ˆ-ä¹ é¢˜ç­”æ¡ˆ Pythonæºç å‰–æ Pythonç°å¸½å­ é»‘å®¢ä¸é€†å‘å·¥ç¨‹å¸ˆçš„Pythonç¼–ç¨‹ä¹‹é“ Pythonç°å¸½å­ï¼šé»‘å®¢ä¸é€†å‘å·¥ç¨‹å¸ˆçš„Pythonç¼–ç¨‹ä¹‹é“(è‹±æ–‡ç‰ˆ) The Django Book 2 The Python Standard Library by Example æ·±å…¥å­¦ä¹ Python 3 ç¼–å†™é«˜è´¨é‡ä»£ç  æ”¹å–„Pythonç¨‹åºçš„91ä¸ªå»ºè®® Qt C++ Qtè®¾è®¡æ¨¡å¼ï¼ˆç¬¬2ç‰ˆï¼‰ QmlBook-In-Chinese Qt Creatorå¿«é€Ÿå…¥é—¨ Qt Quickæ ¸å¿ƒç¼–ç¨‹ 13678855 Qt5å¼€å‘åŠå®ä¾‹ QtåŠQt Quickå¼€å‘å®æˆ˜ç²¾è§£ QTå­¦ä¹ ä¹‹è·¯(å…¨) QTé«˜çº§ç¼–ç¨‹_chs the_art_of_building_qt_applications ã€ŠC++è®¾è®¡æ¨¡å¼â€“åŸºäºQt4å¼€æºè·¨å¹³å°å¼€å‘æ¡†æ¶ã€‹ PyQt pyqt-book PyQt5 tutorial pyqt5__pythonGuiå…¥é—¨æ•™ç¨‹ PyQt5å…¥é—¨ Rapid GUI Programming with Python and Qt Temp 51CTOä¸‹è½½-ffmpegæ•™ç¨‹ CMake Practice design-patterns FFMPEGæ•™ç¨‹å®Œç¾æ’ç‰ˆ GarageBandä½¿ç”¨æŒ‡å— growthå…¨æ ˆå¢é•¿å·¥ç¨‹å¸ˆæŒ‡å— InstallationGuide kotlin-in-action-in-chinese OpenSL_ES_Specification_1 SDL+GUIDE+ä¸­æ–‡è¯‘æœ¬ SWIGDocumentation TCP-IPè¯¦è§£(å·ä¸€ã€äºŒã€ä¸‰) Wireshark æ•°æ®åŒ…åˆ†æå®æˆ˜(ç¬¬2ç‰ˆ)æœ€æ–°ä¸­æ–‡ç‰ˆ Wireshark æ•°æ®åŒ…åˆ†æå®æˆ˜è¯¦è§£ ã€Šå›¾è§£TCP IP(ç¬¬5ç‰ˆ)ã€‹ å›¾è§£è®¾è®¡æ¨¡å¼ ç¨‹åºæ˜¯æ€æ ·è·‘èµ·æ¥çš„_PDFç”µå­ä¹¦ä¸‹è½½ å¸¦ä¹¦ç­¾ç›®å½• é«˜æ¸…å®Œæ•´ç‰ˆ ç½‘ç»œæ˜¯æ€æ ·è¿æ¥çš„ è®¡ç®—æœºæ˜¯æ€æ ·è·‘èµ·æ¥çš„ è®¾è®¡æ¨¡å¼ è®¾è®¡æ¨¡å¼ä¹‹ç¦…(å®Œæ•´é«˜æ¸…ç‰ˆ) JavaåŠ å¯†ä¸è§£å¯†çš„è‰ºæœ¯ ä¸€ä¸ªè¯åˆ¸åˆ†æå¸ˆçš„é†’æ‚Ÿ å¼ åŒ–æ¡¥çš„è‚¡å¸‚çœŸè¯ æ¸¸æˆä¹‹æ—…-æˆ‘çš„ç¼–ç¨‹æ„Ÿæ‚Ÿ æ¸¸æˆè®¾è®¡-åŸç†ä¸å®è·µ è£è¾±äºŒåå¹´-æˆ‘çš„è‚¡å¸‚äººç”Ÿ è®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Š äº§å“ã€è®¾è®¡ã€æ€æƒ³ A Pattern Language Head First è®¾è®¡æ¨¡å¼ Javaä¸æ¨¡å¼ Javaå¤œæœªçœ  javaè®¾è®¡æ¨¡å¼ äººä»¶ï¼ˆåŸä¹¦ç¬¬3ç‰ˆï¼‰ äººæœˆç¥è¯ ä»£ç ä¹‹ç¾ ä½ çš„ç¯äº®ç€å— å¯ç¤ºå½•ï¼šæ‰“é€ ç”¨æˆ·å–œçˆ±çš„äº§å“ï¼ˆè‹±æ–‡ï¼‰ å¤§è¯è®¾è®¡æ¨¡å¼ å­¦ä¼šæé—®-æ‰¹åˆ¤æ€§æ€ç»´æŒ‡å— å»ºç­‘çš„æ°¸æ’ä¹‹é“ æ•°æ®ç»“æ„ç»å…¸é—®é¢˜å’Œç®—æ³•åˆ†æ æµªæ½®ä¹‹å·… æ¼«è°ˆè®¾è®¡æ¨¡å¼ ç¼–ç çš„å¥¥ç§˜ è®¾è®¡å¿ƒç†å­¦ è®¾è®¡æ¨¡å¼-å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ è®¾è®¡æ¨¡å¼ç²¾è§£ è®¾è®¡æ¨¡å¼ï¼šJavaè¯­è¨€ä¸­çš„åº”ç”¨ é«˜æ•ˆç¨‹åºçš„å¥¥ç§˜ é»‘å®¢ä¸ç”»å®¶ ç¡…è°·åˆ›ä¸šä¹‹çˆ¶Paul Grahamæ–‡é›† äº§å“ç»ç† äº’è”ç½‘äº§å“ç»ç†æ”¹å˜ä¸–ç•Œ äº§å“ç»ç†æ‰‹å†Œ ç¬¬3ç‰ˆ äº§å“ç»ç†æ–¹æ³•è®º åŒºå—é“¾å°†å¦‚ä½•æ”¹å˜ä¸–ç•Œ ç”¨æˆ·ä½“éªŒè¦ç´  ç”¨æˆ·ä½“éªŒé¢é¢è§‚-æ–¹æ³•ã€å·¥å…·ä¸å®è·µ å¾·å·æ‰‘å…‹ let there be range(ä¸­æ–‡) åŠ æ³¨çš„ä¼˜åŠ¿ï¼šå½“ä»Šé”¦æ ‡èµ›æ¿€è¿›ç­–ç•¥ å“ˆçµé¡¿åœ¨ç°é‡‘ä¸Š2ä¸­æ–‡ç‰ˆ æ‰‘å…‹è“å›¾ æ‘„å½± æ•°ç å•åæ‘„å½±ä»å…¥é—¨åˆ°ç²¾é€šç¬¬ä¸€å· ç¾å›½çº½çº¦æ‘„å½±å­¦é™¢æ‘„å½±æ•™æ æœåŠ¡ç«¯ docker_practice Dockerä»å…¥é—¨åˆ°å®è·µ PHP-Debug-Manual-public Rediså¼€å‘è¿ç»´å®è·µæŒ‡å— Redisæºä»£ç åˆ†æ äº‘è®¡ç®—æ¶æ„æŠ€æœ¯ä¸å®è·µ äº¿çº§æµé‡ç½‘ç«™æ¶æ„æ ¸å¿ƒæŠ€æœ¯ ä¼Šç”¸å›­ä¹‹æ²³ å¤§å‹ç½‘ç«™æŠ€æœ¯æ¶æ„æ ¸å¿ƒåŸç†ä¸æ¡ˆä¾‹åˆ†æ å®ç”¨è´Ÿè½½å‡è¡¡æŠ€æœ¯ç½‘ç«™æ€§èƒ½ä¼˜åŒ–æ”»ç•¥ æå®¢ä¸å›¢é˜Ÿ æ·±å…¥åˆ†å¸ƒå¼ç¼“å­˜ä»åŸç†åˆ°å®è·µ ç²¾é€šæ­£åˆ™è¡¨è¾¾å¼ è½¯ä»¶æ¶æ„è®¾è®¡ é«˜æ‰©å±•æ€§ç½‘ç«™çš„50æ¡åŸåˆ™ ç®—æ³•ã€æ•°æ®ç»“æ„ ã€Šå¤§è¯æ•°æ®ç»“æ„ã€‹ ç¨‹æ° ç¨‹åºå‘˜å®ç”¨ç®—æ³• ç®—æ³•ä¹‹é“ ç®—æ³•å¯¼è®º(ç¬¬äºŒç‰ˆ)ä¹ é¢˜ç­”æ¡ˆ(è‹±æ–‡ç‰ˆ) ç®—æ³•å¯¼è®º ç®¡ç† MBAæ•™ä¸äº†çš„åˆ›å¯Œè¯¾ è‚¡ç¥¨ ä¸åº„å…±èˆï¼ˆè‚¡ç¥¨å®æˆ˜æ“ä½œï¼‰ ä»é›¶å¼€å§‹å­¦ç‚’è‚¡ ä»·å€¼æŠ•èµ„ç³»åˆ—ä¹‹25ã€Šä¸Šå¸‚å…¬å¸è´¢æŠ¥è§£è¯»ã€‹ ä½ ä¸çŸ¥é“çš„ä¸­å›½è‚¡äº‹é‚£äº›äº‹(é«˜æ¸…) æŠ•èµ„æ­£é€” æ—¥æœ¬èœ¡çƒ›å›¾æŠ€æœ¯ æ±Ÿæ©æŠ•èµ„å‡ ä½•å­¦åŸç† æ±Ÿæ©æµ‹å¸‚æ³•åˆ™ï¼ˆç»å…¸ä¹‹ä½œï¼‰ æµ·é¾Ÿäº¤æ˜“æ³•åˆ™ çœ‹ç›˜ç»†èŠ‚(ç²¾é€‰) çœ‹ç›˜ç»†èŠ‚ çŸ­çº¿ç‚’è‚¡å°±è¿™å‡ æ‹›ï¼ˆæ“ç›˜å¿…è¯»ï¼‰ çŸ­çº¿ç‚¹é‡‘ï¼šæ­å¼€å¸‚åœºçš„åº•ç‰Œ çŸ­çº¿ç‚¹é‡‘ï¼šç ´è§£è‚¡ä»·çš„è¿è¡Œè½¨è¿¹ çŸ­çº¿ç‚¹é‡‘ï¼šé“ç ´è‚¡ä»·æ¶¨è·Œä¹‹ç„æœº ç¼ ä¸­è¯´ç¦…ã€Šæ•™ä½ ç‚’è‚¡ç¥¨ã€‹1-108è¯¾å›¾æ–‡å…¨ç‰ˆ ç¼ è®ºè§£æ ç¼ ä¸­è¯´ç¦…æŠ€æœ¯ç†è®ºå›¾è§£(æ¸…æ™°ç‰ˆ) èªæ˜çš„æŠ•èµ„è€…ï¼ˆé«˜è´¨é‡ï¼‰ èƒ¡ç«‹é˜³è‚¡ç¥¨æŠ•èµ„100æ‹›ï¼ˆæ¸…æ™°ï¼‰ è¯åˆ¸å¸‚åœºåŸºç¡€çŸ¥è¯† ã€æŠ•èµ„è‰ºæœ¯ã€‘ä½œè€…ï¼šæŸ¥å°”æ–¯ è‰¾é‡Œæ–¯ å·´è²ç‰¹æ•™ä½ è¯»è´¢æŠ¥ è‚¡ç¥¨ä½œæ‰‹å›å¿†å½• è¶…è¶Šé‡‘è ç´¢ç½—æ–¯çš„å“²å­¦ (ç¾)ä¹”æ²»Â·ç´¢ç½—æ–¯ 2 é‡‘èç‚¼é‡‘æœ¯(é«˜è´¨é‡ï¼‰ é«˜èƒœç®—æ“ç›˜ è‚¡å¸‚æ“ç»ƒå¤§å…¨12345 è®¡ç®—æœºåŸºç¡€ æ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿ(åŸä¹¦ç¬¬2ç‰ˆ) ç¼–è¯‘ã€é“¾æ¥ã€è£…è½½ ç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»â€”é“¾æ¥ã€è£…è½½ä¸åº“ linker and loader ç°ä»£ç¼–è¯‘åŸç†ï¼šï¼£è¯­è¨€æè¿° ç¼–è¯‘åŸç†åŠå®è·µ ç¼–è¯‘åŸç†åŸºç¡€ ç¼–è¯‘åŸç†ï¼ˆé¾™ä¹¦ï¼‰ä¸­æ–‡ç‰ˆ ç¼–è¯‘åŸç†åŠå®è·µ éŸ³è§†é¢‘ç›¸å…³ FFmpeg Tutorial FFmpegBasics ffmpegåŸºç¡€åº“ç¼–ç¨‹å¼€å‘ OpenCV 2 è®¡ç®—æœºè§†è§‰ç¼–ç¨‹æ‰‹å†Œ_ä¸­æ–‡ç‰ˆ å­¦ä¹ OpenCV é¡¹ç›®ç®¡ç† Project 2016é¡¹ç›®ç®¡ç†è‡ªå­¦ç»å…¸_ç‹è_æ¸…åå¤§å­¦_2016","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"ã€Šæ·±å…¥ç†è§£Androidå·1ã€‹è¯»ä¹¦ç¬”è®°","date":"2022-03-08T02:25:29.747Z","path":"wiki/è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£Androidå·1/","text":"æ¦‚è¦ã€Šæ·±å…¥ç†è§£Androidå·1ã€‹è¿™æœ¬ä¹¦åœ¨åˆšå‡ºæ¥çš„æ—¶å€™å°±å·²ç»ä¹°äº†ï¼Œå½“æ—¶åº”è¯¥ä¹Ÿæ˜¯çœ‹è¿‡çš„ï¼Œä½†å¿˜å¾—å¾ˆå¿«ï¼Œé‡Œé¢å¾ˆå¤šçš„æºç åˆ†æï¼Œä¸”å¤šæ•°æ˜¯nativeå±‚çš„ï¼Œè™½ç„¶ä½œè€…ä¹Ÿä¼šåœ¨åˆ†æå®Œä¸€æ®µæ—¶é—´åå°±åšä¸€ä¸ªæ€»ç»“ã€‚æœ€è¿‘åˆæŠŠä»–æ‹¿å‡ºæ¥çœ‹äº†çœ‹ï¼Œè¿™æ¬¡çœ‹çš„æ—¶å€™ï¼Œå·²ç»å¯¹Androidä½“ç³»æœ‰ä¸€ä¸ªè®¤è¯†äº†ï¼Œæ‰€ä»¥ç†è§£èµ·æ¥è¿˜ç®—å¥½ã€‚ä½†å¯¹äºnativeå±‚çš„ç‚¹ï¼Œå…‰çœ‹è¿™ä¸€æœ¬ä¹¦æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚ è¿˜æ˜¯å°†ä¸€äº›è‡ªå·±è§‰å¾—é‡è¦çš„ç‚¹éƒ½è®°å½•ä¸‹æ¥å§ï¼ ä¸ªäººè§‰å¾—æœ¬ä¹¦çš„é˜…è¯»é¡ºåºåº”è¯¥æ˜¯ï¼š ç¬¬ä¸€ç« äº†è§£Androidç³»ç»Ÿçš„æ¶æ„ ç†Ÿæ‚‰JNIï¼Œäº†è§£Javaè·Ÿnativeé€šè®¯çš„æœºåˆ¶ ç¬¬ä¸‰ã€å››ç« ï¼Œäº†è§£Androidå¯åŠ¨æµç¨‹ ç¬¬äº”ç« äº†è§£çº¿ç¨‹é€šä¿¡æœºåˆ¶Handler å…­ã€ä¸ƒç« ä»¥æºç çš„è§’åº¦æ¥ç†Ÿæ‚‰Binderæœºåˆ¶ï¼Œè¿™é‡Œæˆ‘è§‰å¾—ä¸€å®šè¦æ‰©å±•é˜…è¯»ï¼Œå…‰çœ‹è¿™äº›å¾ˆéš¾æ·±å…¥ç†è§£Binder ç†è§£Surfaceç³»ç»Ÿï¼Œé˜…è¯»è¿™ç« æœ€å¥½èƒ½å…ˆç†Ÿæ‚‰å››å¤§ç»„ä»¶çš„å¯åŠ¨æµç¨‹ï¼ŒUIç»˜åˆ¶æµç¨‹ï¼Œäº‹ä»¶ä¼ é€’æœºåˆ¶ å‰©ä¸‹çš„ä¸¤ç« ç®—æ‰©å±•å§ ç¬¬ä¸€ç« ä»‹ç»äº†æ•´ä¸ªAndroidä½“ç³»ï¼Œä»åº•å±‚çš„ç¡¬ä»¶è®¾å¤‡åˆ°ä¸Šé¢çš„åº”ç”¨å±‚ã€‚ å…·ä½“çš„å¯ä»¥å‚è€ƒAndroidç³»ç»Ÿæ¶æ„ ç¬¬äºŒç« JNIæ˜¯Java Native Interfaceçš„ç¼©å†™ï¼Œé€šè¿‡JNIå¯ä»¥åšåˆ°ï¼š Javaç¨‹åºä¸­çš„å‡½æ•°å¯ä»¥è°ƒç”¨Nativeè¯­è¨€å†™çš„å‡½æ•° Nativeç¨‹åºä¸­çš„å‡½æ•°å¯ä»¥è°ƒç”¨Javaå±‚çš„å‡½æ•° æˆ‘ä»¬åœ¨Javaä¸­è°ƒç”¨Cã€C++ä»£ç çš„ä¸€èˆ¬åšæ³•æ˜¯ä½¿ç”¨System.loadLibrary(â€œxxx.soâ€)ï¼Œç„¶åå£°æ˜nativeæ–¹æ³•ï¼Œå³å¯ä½¿ç”¨ã€‚åœ¨Androidä¸­ï¼ŒJNIå‡½æ•°æœ‰ä¸¤ç§æ³¨å†Œæ–¹å¼ï¼š é™æ€æ–¹æ³• ç¼–å†™javaæ–‡ä»¶ï¼Œç¼–è¯‘ç”Ÿæˆ.classæ–‡ä»¶ ä½¿ç”¨javahå‘½ä»¤ï¼Œæ¯”å¦‚javah -o ouput packagename.classnameï¼Œä¼šç”Ÿæˆä¸€ä¸ªoutput.hçš„å¤´æ–‡ä»¶ï¼Œé‡Œé¢ä¼šæœ‰å¯¹åº”çš„JNIå±‚å‡½æ•° åŠ¨æ€æ³¨å†Œ ç”±äºæ˜¯ä¸åŒè¯­è¨€ä¹‹é—´çš„è°ƒç”¨ï¼Œæ¯ç§è¯­è¨€çš„åŸºæœ¬ç±»å‹æœ‰æ‰€å·®å¼‚ï¼Œæ‰€ä»¥JNIä¼šè¿›è¡Œç±»å‹è½¬æ¢ã€‚ JNIæä¾›ä¸‰ç§ç±»å‹çš„å¼•ç”¨ï¼š Local Referenceï¼šæœ¬åœ°å¼•ç”¨ã€‚ä¸€æ—¦JNIå±‚å‡½æ•°è¿”å›ï¼Œè¿™äº›jobjectå°±å¯èƒ½è¢«åƒåœ¾å›æ”¶ Global Referenceï¼šå…¨å±€å¼•ç”¨ï¼Œä¸ä¸»åŠ¨é‡Šæ”¾ï¼Œå°±ä¸ä¼šè¢«å›æ”¶ Weak Global Referenceï¼š å¼±å…¨å±€å¼•ç”¨ ç¬¬ä¸‰ç« ã€ç¬¬å››ç«  å¤§è‡´æµç¨‹ï¼š å¼€æœºï¼Œåˆå§‹åŒ–zygoteï¼ˆapp_processï¼‰è¿›ç¨‹ åˆ›å»ºè™šæ‹Ÿæœº æ³¨å†ŒJNIå‡½æ•° æ³¨å†Œzygoteç”¨çš„socketï¼Œç”¨äºè·Ÿsystem_serverè¿›ç¨‹é€šä¿¡ é¢„åŠ è½½èµ„æºï¼ˆæ¯”å¦‚åŠ è½½Androidç›¸å…³çš„javaç±»ã€soåº“ï¼‰ å¯åŠ¨system_serverè¿›ç¨‹ åˆå§‹åŒ–amsã€wmsã€pmsç­‰ç­‰ ç¬¬äº”ç« RefBaseã€spã€wpå®ç°äº†ä¸€å¥—é€šè¿‡å¼•ç”¨è®¡æ•°çš„æ–¹æ³•æ§åˆ¶å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„æœºåˆ¶ã€‚è¿™ä¸€å—çœ‹å¾—æœ‰ç‚¹æ‡µï¼Œå› ä¸ºCã€C++ä¸­æ˜¯æ²¡æœ‰åƒåœ¾å›æ”¶æœºåˆ¶çš„ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨é‡Šæ”¾å¯¹è±¡ã€‚è¿™å‡ ä¸ªä¸œè¥¿åº”è¯¥æ˜¯ä¸ºäº†æ–¹ä¾¿å¯¹è±¡é‡Šæ”¾è€Œè®¾è®¡å‡ºæ¥çš„å§ï¼Ÿ ä»‹ç»äº†ä¸€äº›åŒæ­¥ç±»ï¼Œè¿™å—å¦‚æœå¯¹Javaçš„é”æœºåˆ¶æœ‰äº†è§£çš„è¯ï¼Œçœ‹èµ·æ¥å¾ˆè½»æ¾ã€‚ Mutexï¼šäº’æ–¥é” AutoLockï¼šMutexçš„å°è£… Conditionï¼šæ¡ä»¶é” æ¥ä¸‹æ¥è®²Looperå’ŒHandlerï¼Œå¯ä»¥å‚è€ƒHandleråŸç† ç¬¬å…«ç« ä¸ªäººè§‰å¾—è¿™ç« å¾ˆé‡è¦ï¼Œå¯ä»¥è®©ä½ äº†è§£æ•´ä¸ªç»˜åˆ¶çš„æµç¨‹å’Œå†…éƒ¨å®ç°æœºåˆ¶ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"ã€Šå›¾è§£TCP/IPã€‹è¯»ä¹¦ç¬”è®°","date":"2022-03-08T02:25:29.745Z","path":"wiki/è¯»ä¹¦ç¬”è®°/å›¾è§£TCPIP/","text":"OSIå‚è€ƒæ¨¡å‹ åå­— æè¿° ç½‘å¡ ä½¿è®¡ç®—æœºè”ç½‘çš„è®¾å¤‡ ä¸­ç»§å™¨ï¼ˆRepeaterï¼‰ ä»ç‰©ç†å±‚ä¸Šå»¶é•¿ç½‘ç»œçš„è®¾å¤‡ 2 ç½‘æ¡¥ï¼ˆBridgeï¼‰ ä»æ•°æ®é“¾è·¯å±‚ä¸Šå»¶é•¿ç½‘ç»œçš„è®¾å¤‡ 3 è·¯ç”±å™¨ é€šè¿‡ç½‘ç»œå±‚è½¬å‘åˆ†ç»„æ•°æ®çš„è®¾å¤‡ 4~7 äº¤æ¢æœº å¤„ç†ä¼ è¾“å±‚ä»¥ä¸Šå„å±‚ç½‘ç»œä¼ è¾“çš„è®¾å¤‡ ç½‘ç®¡ï¼ˆGatewayï¼‰ è½¬æ¢åè®®çš„è®¾å¤‡ æ•°æ®é“¾è·¯å é€šä¿¡åª’ä»‹ ä¼ è¾“é€Ÿç‡ ä¸»è¦ç”¨é€” ä»¥å¤ªç½‘ åŒè½´ç”µç¼† 10Mbps LAN _ åŒç»çº¿ç”µç¼† 10Mbps~100Gbps LAN _ å…‰çº¤ç”µç¼†10Mbps~100Gbps LAN æ— çº¿ ç”µç£æ³¢ æ•°ä¸ªMbps LAN~WAN ATM åŒç»çº¿ç”µç¼†å…‰çº¤ç”µç¼† 25Mbps155Mbps622Mbps LAN~WAN FDDI å…‰çº¤ç”µç¼†åŒç»çº¿ç”µç¼† 100Mbps LAN~-WAN å¸§ä¸­ç»§ åŒç»çº¿ç”µç¼†å…‰çº¤ç”µç¼† çº¦64~1.5Mbps WAN ISDBN åŒç»çº¿ç”µç¼†å…‰çº¤ç”µç¼† 64~1.5Mbps WAN åœ¨æ•°æ®ä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œä¸¤ä¸ªè®¾å¤‡ä¹‹é—´æ•°æ®æµåŠ¨çš„ç‰©ç†é€Ÿåº¦ç§°ä¸ºä¼ è¾“é€Ÿç‡ï¼Œå•ä½ä¸ºbpsï¼ˆBits Per Secondï¼‰ï¼Œä¼ è¾“é€Ÿç‡é«˜æŒ‡å•ä½æ—¶é—´å†…ä¼ è¾“çš„æ•°æ®é‡æœ‰å¤šå°‘ã€‚ä¼ è¾“é€Ÿç‡åˆç§°ä¸ºå¸¦å®½ï¼ˆBandwidthï¼‰ åè®®è§„èŒƒhttps://www.rfc-editor.org/rfc ä»¥å¤ªç½‘åè®®https://www.iana.org/assignments/ethernet-numbers/ethernet-numbers.xhtml åˆ†ç±» é€šä¿¡è·ç¦» æ ‡å‡†åŒ–ç»„ç»‡ ç›¸å…³å…¶ä»–ç»„ç»‡åŠæŠ€æœ¯ çŸ­è·ç¦»æ— çº¿ æ•°ç±³ ä¸ªåˆ«ç»„ç»‡ RF-ID æ— çº¿PAN 10ç±³å·¦å³ IEEE802.15 è“ç‰™ æ— çº¿LAN 100ç±³å·¦å³ IEEE802.11 Wi-Fi æ— çº¿MAN æ•°åƒç±³~100åƒç±³ IEEE802.16IEEE802.20 WiMAX æ— çº¿RAN 200åƒç±³~700åƒç±³ IEEE802.22 æ— çº¿WAN GSMã€CDMA2000ã€W-CDMA 3Gã€LTEã€4G http://grouper.ieee.org/groups/802/11/Reports/802.11_Timelines.htm PPPï¼šPoint to Point ProtocolATMï¼šAsynchronous Transfer Mode IPå¯»å€è·¯ç”±IPåˆ†åŒ…å’Œç»„åŒ… IPæ˜¯é¢å‘æ— è¿æ¥çš„","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"ã€ŠKotlinå®æˆ˜ã€‹è¯»ä¹¦ç¬”è®°","date":"2022-03-08T02:25:29.744Z","path":"wiki/è¯»ä¹¦ç¬”è®°/Kotlinå®æˆ˜/","text":"åŸºæœ¬è§„åˆ™ ä¸éœ€è¦åˆ†å· å‡½æ•° funå£°æ˜å‡½æ•° å‡½æ•°å¯ä»¥å®šä¹‰åœ¨æ–‡ä»¶çš„æœ€å¤–å±‚ 123fun max(a: Int, b: Int): Int &#123; return if(a&gt;b) a else b&#125; è¡¨è¾¾å¼å‡½æ•°ä½“ fun max(a: Int, b: Int): Int = if(a&gt;b) a else b è¡¨è¾¾å¼å‡½æ•°ä½“å¯ä»¥çœç•¥è¿”å›ç±»å‹ï¼ŒKotlinä¼šè¿›è¡Œç±»å‹æ¨å¯¼ fun max(a: Int, b: Int)= if(a&gt;b) a else b æ•°ç»„å°±æ˜¯ç±» å˜é‡ varè¡¨ç¤ºå¯å†™å±æ€§ valè¡¨ç¤ºåªè¯»å±æ€§ 1234567val answer = 42 //è¿™ä¸ªå˜é‡æ°¸ä¸ä¸ºnullvar answer1:Int? = 40 // è¿™ä¸ªå˜é‡å¯ä»¥ä¸ºnullval answer:Int = 42valè¡¨ç¤ºä¸å¯å˜å¼•ç”¨ï¼Œä½¿ç”¨valå£°æ˜çš„å˜é‡ä¸èƒ½åœ¨åˆå§‹åŒ–ä¹‹åå†æ¬¡èµ‹å€¼ã€‚varå¯å˜å¼•ç”¨ï¼Œå¯ä»¥æ”¹å˜å€¼ï¼Œä½†ä¸èƒ½æ”¹å˜ç±»å‹ã€‚var answer = 13answer = &quot;no &quot; è¿™æ ·æ˜¯é”™è¯¯çš„ å­—ç¬¦ä¸²æ¨¡æ¿ 12$name$&#123;name&#125; ç±» 123class Person(val name:String)class Person(val name:String, var isMarried:Boolean) è‡ªå®šä¹‰è®¿é—®å™¨ 12345678class Rectangle(val height:Int, val width:Int) &#123; val isSquare:Boolean get() &#123; return height == width &#125; //æˆ–è€… get() = height == width&#125; åŒ…å±‚çº§ç»“æ„ä¸éœ€è¦éµå®ˆç›®å½•å±‚çº§ç»“æ„ æšä¸¾ 12345678910111213enum class Color(val r:Int, val g:Int, val b:Int) &#123;RED(255,0,0),GREEN(0,255,0);fun rgb() = (r*256 + g)*256 + b&#125;println(Color.GREEN.rgb())fun getMnumonic(color: Color) = when(color) &#123; Color.RED -&gt; &quot;Richard&quot; Color.GREEN -&gt; &quot;Gave&quot; &#125; @JvmOverloadsï¼Œ ä¼šç”ŸæˆJavaé‡è½½å‡½æ•° é¡¶å±‚å±æ€§å’Œå‡½æ•° æ‰©å±•å‡½æ•°ä¸èƒ½è¢«é‡å†™ æ‰©å±•å±æ€§vararg ä¿®é¥°ç¬¦ å¯å˜å‚æ•° ä¸­ç¼€è°ƒç”¨å±€éƒ¨å‡½æ•° kotlinç±»å£°æ˜é»˜è®¤æ˜¯finalå’Œpublicï¼Œè¦æƒ³å£°æ˜ä¸æ˜¯finalçš„ï¼Œå°†å…¶æ ‡è®°ä¸ºopen openã€finalã€abstract lateinit object å®šä¹‰ä¸€ä¸ªç±»å¹¶åŒæ—¶åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä½¿ç”¨åœºæ™¯ï¼š å¯¹è±¡å£°æ˜æ˜¯å®šä¹‰å•ä¾‹çš„ä¸€ç§æ–¹å¼ ä¼´ç”Ÿå¯¹è±¡å¯ä»¥æŒæœ‰å·¥å‚æ–¹æ³•å’Œå…¶ä»–ä¸æ•´ä¸ªç±»ç›¸å…³ï¼Œä½†åœ¨è°ƒç”¨æ—¶å¹¶ä¸ä¾èµ–ç±»å®ä¾‹çš„æ–¹æ³•ã€‚ å¯¹è±¡è¡¨è¾¾å¼ç”¨æ¥æ›¿ä»£Javaçš„åŒ¿åå†…éƒ¨ç±» 1234567object DataProviderManager &#123; fun registarDataProvider(provider: DataProvider) &#123; ... &#125;&#125;DataProviderManager.registarDataProvider(...) ä¼´ç”Ÿå¯¹è±¡companion 1234567891011121314class MyClaa &#123; companion object Factory&#123; fun create():MyClass = MyClass() &#125;&#125;//è¯¥ä¼´ç”Ÿå¯¹è±¡çš„æˆå‘˜å¯é€šè¿‡åªä½¿ç”¨ç±»åä½œä¸ºé™å®šç¬¦æ¥è°ƒç”¨val instance = MyClass.create()//å¯ä»¥çœç•¥ä¼´ç”Ÿå¯¹è±¡çš„åç§°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å°†ä½¿ç”¨åç§° Companionclass MyClass &#123; companion object &#123; &#125;&#125;val x = MyClass.Companion åœ¨ JVM å¹³å°ï¼Œå¦‚æœä½¿ç”¨ @JvmStatic æ³¨è§£ï¼Œä½ å¯ä»¥å°†ä¼´ç”Ÿå¯¹è±¡çš„æˆå‘˜ç”Ÿæˆä¸ºçœŸæ­£çš„é™æ€æ–¹æ³•å’Œå­—æ®µ ç›´æ¥é€šè¿‡å®¹å™¨ç±»åæ¥è®¿é—®æ•´ä¸ªå¯¹è±¡çš„æ–¹æ³•å’Œå±æ€§çš„èƒ½åŠ› åŒ¿åå¯¹è±¡å¯ä»¥å®ç°å¤šä¸ªæ¥å£æˆ–è€…ä¸å®ç°æ¥å£ lamdbaè¡¨è¾¾å¼å§‹ç»ˆç”¨èŠ±æ‹¬å·åŒ…å›´ val sum = &#123;x: Int, y: Int -&gt; x+y&#125; println(sum(1,2)) å…è®¸lamdbaå†…éƒ¨è®¿é—®éfinalå˜é‡ç”šè‡³ä¿®æ”¹å®ƒä»¬ æˆå‘˜å¼•ç”¨ val getAge = Person::age all any count find å¯¹é›†åˆåº”ç”¨åˆ¤æ–­å¼ withå‡½æ•°apply ç±»å‹ç³»ç»Ÿ å¯ç©ºæ€§ 12fun strLen(s:String) = s.lengthfun strLen(s:String?) = s.length å®‰å…¨è°ƒç”¨è¿ç®—ç¬¦ ?.ï¼Œåªè¦é“¾å¼ä¸­ä¸€ä¸ªå€¼ä¸ºnullï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼éƒ½è¿”å›null 12345s?.toUpperCase()val testStr : String? = nullval result = testStr?.length?.plus(5)?.minus(10)println(result) ?: å½“ä¸€ä¸ªå‡½æ•°æœ‰è¿”å›å€¼æ—¶ï¼Œå¦‚æœæ–¹æ³•ä¸­çš„ä»£ç ä½¿ç”¨?.å»è¿”å›ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆæ–¹æ³•çš„è¿”å›å€¼çš„ç±»å‹åé¢ä¹Ÿè¦åŠ ä¸Š?ç¬¦å· 1234fun funNullMethod() : Int? &#123; val str : String? = &quot;123456&quot; return str?.length&#125; as? éç©ºæ–­è¨€ â€œ!!â€ æ˜¾ç¤ºåœ°æŠ›å‡ºå¼‚å¸¸ letå‡½æ•°ä½œç”¨ï¼šä½¿ç”¨ç¬¦å·?.éªŒè¯çš„æ—¶å€™å¿½ç•¥æ‰null ç”¨æ³•ï¼šå˜é‡?.let{â€¦} 1234567891011121314val arrTest : Array&lt;Int?&gt; = arrayOf(1,2,null,3,null,5,6,null)// ä¼ ç»Ÿå†™æ³•for (index in arrTest) &#123; if (index == null)&#123; continue &#125; println(&quot;index =&gt; $index&quot;)&#125;// letå†™æ³•for (index in arrTest) &#123; index?.let &#123; println(&quot;index =&gt; $it&quot;) &#125;&#125; Evilsæ“ä½œç¬¦?: åˆ¤æ–­ä¸€ä¸ªå¯ç©ºç±»å‹æ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±è®¾å®šå¥½çš„é»˜è®¤å€¼ 12345val testStr : String? = nullvar length = 0// ?: å†™æ³•length = testStr?.length ?: -1println(length) !! åˆ¤æ–­ä¸€ä¸ªå¯ç©ºç±»å‹æ—¶ï¼Œä¼šæ˜¾ç¤ºçš„æŠ›å‡ºç©ºå¼•ç”¨å¼‚å¸¸ 12val testStr : String? = nullprintln(testStr!!.length) as? å®‰å…¨çš„ç±»å‹è½¬æ¢ 12val num2 : Int? = &quot;Koltin&quot; as? Intprintln(&quot;nun2 = $num2) åŸºæœ¬ç±»å‹ã€åŒ…è£…ç±»å‹çš„è½¬æ¢éœ€è¦é€šè¿‡API Any kotlinåŸºç±»Unit kotlinä¸­çš„voidNothing è¿™ä¸ªå‡½æ•°æ°¸ä¸è¿”å› List listOf mutableListOfã€arrayListOfSet setOf mutableSetOfã€hashSetOfã€linkedSetOfã€sortedSetOfMap mapOf mutableMapOfã€hashMapOfã€linkedMapOfã€sortedMapOf é‡è½½äºŒå…ƒç®—æœ¯è¿ç®—operator å§”æ‰˜å±æ€§ by lazy() kotlinå…è®¸ä½¿ç”¨å¯¹åº”åç§°çš„å‡½æ•°æ¥é‡è½½ä¸€äº›æ ‡å‡†çš„æ•°å­¦è¿ç®—ï¼Œä½†ä¸èƒ½å®šä¹‰è‡ªå·±çš„è¿ç®—ç¬¦ã€‚ å‡½æ•°ç±»å‹ å†…è”å‡½æ•° æ³¨è§£@JvmName@JvmStatic@JvmOverloads@JvmField æ³¨è§£ç±»ï¼šç”¨æ¥å®šä¹‰å…³è”åˆ°å£°æ˜å’Œè¡¨è¾¾å¼çš„å…ƒæ•°æ®çš„ç»“æ„ï¼Œå®ƒä»¬ä¸èƒ½åŒ…å«ä»»ä½•ä»£ç  å…ƒæ³¨è§£@Retention è¯´æ˜ä½ å£°æ˜çš„æ³¨è§£æ˜¯å¦ä¼šå­˜å‚¨åˆ°.classæ–‡ä»¶ï¼Œä»¥åŠåœ¨è¿è¡Œæ—¶æ˜¯å¦å¯ä»¥é€šè¿‡åå°„æ¥è®¿é—®å®ƒã€‚ kotlinåå°„API invoke","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"è®¾è®¡åŸåˆ™","date":"2022-03-08T02:25:29.744Z","path":"wiki/è®¾è®¡æ¨¡å¼/è®¾è®¡åŸåˆ™/","text":"å•ä¸€èŒè´£åŸåˆ™ã€SINGLE RESPONSIBILITY PRINCIPLEã€‘ï¼š ä¸€ä¸ªç±»è´Ÿè´£ä¸€é¡¹èŒè´£ã€‚ é‡Œæ°æ›¿æ¢åŸåˆ™ã€LISKOV SUBSTITUTION PRINCIPLEã€‘ï¼š ç»§æ‰¿ä¸æ´¾ç”Ÿçš„è§„åˆ™ã€‚ ä¾èµ–å€’ç½®åŸåˆ™ã€DEPENDENCE INVERSION PRINCIPLEã€‘ï¼š é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡ï¼›æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼›ç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡ã€‚å³é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œä¸è¦é’ˆå¯¹å®ç°ç¼–ç¨‹ã€‚ æ¥å£éš”ç¦»åŸåˆ™ã€INTERFACE SEGREGATION PRINCIPLEã€‘ï¼š å»ºç«‹å•ä¸€æ¥å£ï¼Œä¸è¦å»ºç«‹åºå¤§è‡ƒè‚¿çš„æ¥å£ï¼Œå°½é‡ç»†åŒ–æ¥å£ï¼Œæ¥å£ä¸­çš„æ–¹æ³•å°½é‡å°‘ã€‚ éš”ç¦»çš„å®šä¹‰: å®¢æˆ·ç«¯ä¸åº”è¯¥ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£ã€‚ ç±»é—´çš„å…³ç³»åº”è¯¥å»ºç«‹åœ¨æœ€å°çš„æ¥å£ä¸Šã€‚ è¿ªç±³ç‰¹åŸåˆ™ã€LOW OF DEMETERã€‘ï¼š ä¹Ÿå«â€œæœ€å°‘çŸ¥è¯†â€åŸåˆ™ï¼Œä½è€¦åˆï¼Œé«˜å†…èšã€‚ å¼€é—­åŸåˆ™ã€OPEN CLOSE PRINCIPLEã€‘ï¼š ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚ ç»„åˆ&#x2F;èšåˆå¤ç”¨åŸåˆ™ã€Composition&#x2F;Aggregation Reuse Principle(CARP) ã€‘ï¼š å°½é‡ä½¿ç”¨ç»„åˆå’Œèšåˆå°‘ä½¿ç”¨ç»§æ‰¿çš„å…³ç³»æ¥è¾¾åˆ°å¤ç”¨çš„åŸåˆ™ã€‚ å‚è€ƒ","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€ŠJavaç¼–ç¨‹æ€æƒ³ã€‹è¯»ä¹¦ç¬”è®°","date":"2022-03-08T02:25:29.744Z","path":"wiki/è¯»ä¹¦ç¬”è®°/Javaç¼–ç¨‹æ€æƒ³/Javaç¼–ç¨‹æ€æƒ³/","text":"final finally finalize finalize()ä¸»è¦æ˜¯ç»™å…¶ä»–è°ƒç”¨è€Œåˆ›å»ºçš„ç©ºé—´åœ¨å¯¹è±¡å› æ”¶æ—¶é¡µåŒæ­¥å›æ”¶è€Œè®¾ç½®çš„ã€‚ æ¯”å¦‚ï¼Œä½ è°ƒç”¨äº†Cè¯­è¨€ï¼Œä½¿ç”¨äº†mallow()å¼€è¾Ÿäº†ä¸€æ®µå†…å­˜ç©ºé—´ã€‚åœ¨ä½ é‡Šæ”¾javaå¯¹è±¡çš„æ—¶å€™ï¼Œè™šæ‹Ÿæœºåªèƒ½é‡Šæ”¾javaå¯¹è±¡å ç”¨çš„ç©ºé—´ï¼Œè€Œä¸èƒ½é‡Šæ”¾Cå¼€è¾Ÿçš„å†…å­˜ç©ºé—´ï¼Œæ‰€ä½  ä½ åœ¨é‡Šæ”¾æ­¤å¯¹è±¡ä¹‹å‰è¦å…ˆå›æ”¶ä½ åœ¨Cè¯­è¨€ä¸­å¼€è¾Ÿçš„ç©ºé—´ã€‚ è¿™å„æ—¶å€™æ‰ç”¨åˆ°finalize()æ–¹æ³•ã€‚å¹³æ—¶çš„ æ—¶å€™ä¸è¦éšä¾¿ä½¿ç”¨finalize()æ–¹æ³•ã€‚","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"Javaç¼–ç¨‹æ€æƒ³","slug":"è¯»ä¹¦ç¬”è®°/Javaç¼–ç¨‹æ€æƒ³","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Java%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/"}]},{"title":"ç¬¬15ç« ï¼šæ³›å‹","date":"2022-03-08T02:25:29.744Z","path":"wiki/è¯»ä¹¦ç¬”è®°/Javaç¼–ç¨‹æ€æƒ³/ç¬¬15ç« ï¼šæ³›å‹/","text":"ä¸€èˆ¬çš„ç±»å’Œæ–¹æ³•ï¼Œåªèƒ½ä½¿ç”¨å…·ä½“çš„ç±»å‹ï¼Œè¦ä¹ˆæ˜¯åŸºæœ¬ç±»å‹ï¼Œè¦ä¹ˆæ˜¯è‡ªå®šä¹‰çš„ç±»ï¼Œå¦‚æœè¦ç¼–å†™å¯ä»¥åº”ç”¨äºå¤šç§ç±»å‹çš„ä»£ç ï¼Œè¿™ç§åˆ»æ¿çš„é™åˆ¶å¯¹ä»£ç çš„æŸç¼šå°±ä¼šå¾ˆå¤§ã€‚ æ³›å‹å®ç°äº†å‚æ•°åŒ–ç±»å‹çš„æ¦‚å¿µï¼Œä½¿ä»£ç å¯ä»¥åº”ç”¨äºå¤šç§ç±»å‹ã€‚ å®¹å™¨ç±»æ˜¯å¼•å…¥æ³›å‹çš„ä¸€ä¸ªé‡è¦åŸå›  Javaä¸­ï¼Œreturnè¯­å¥åªå…è®¸è¿”å›å•ä¸ªå¯¹è±¡ï¼Œé€šè¿‡æ³›å‹ï¼Œåˆ™å¯ä»¥è¿”å›å¤šä¸ªå¯¹è±¡ã€‚è¿™ä¸ªæ¦‚å¿µæˆä¸ºå…ƒç¥–ï¼ˆtupleï¼‰ï¼Œå®ƒå°†ä¸€ç»„å¯¹è±¡ç›´æ¥æ‰“åŒ…å­˜å‚¨äºå…¶ä¸­ä¸€ä¸ªå•ä¸€å¯¹è±¡ã€‚ å…ƒç¥–å¯ä»¥å…·æœ‰ä»»æ„é•¿åº¦ï¼Œä»»æ„ç±»å‹ã€‚ æ³›å‹æ–¹æ³•ä½¿ç”¨æ³›å‹æ–¹æ³•æ—¶ï¼Œä¼šè¿›è¡Œç±»å‹å‚æ•°æ¨æ–­ï¼Œå¦‚æœä¼ å…¥åŸºæœ¬ç±»å‹ï¼Œåˆ™ä¼šè‡ªåŠ¨æ‰“åŒ… 1234567891011public class GenericMethods &#123; public &lt;T&gt; void f(T x) &#123; System.out.println(x.getClass().getName()); &#125; /* public static T f(T a)&#123; //ç¼–è¯‘ä¸é€šè¿‡ return a; &#125; */&#125; æ™®é€šstaticæ–¹æ³•æ— æ³•è®¿é—®æ³›å‹ç±»çš„ç±»å‹å‚æ•°ï¼Œå¦‚æœè¦æ˜¯ä½¿ç”¨æ³›å‹å°±è¦å®šä¹‰æˆæ³›å‹é™æ€æ–¹æ³•ã€‚ç±»çš„æ³›å‹è¦åœ¨åˆ›å»ºå¯¹è±¡æ—¶æ‰ç¡®å®šï¼Œè€Œç±»å†…çš„é™æ€æ–¹æ³•ï¼Œé™æ€åŸŸåœ¨ç±»åŠ è½½æ—¶åˆå§‹åŒ–ï¼Œå› æ­¤å¦‚æœä½¿ç”¨ç±»çš„æ³›å‹ç±»å‹åˆ™åˆå§‹åŒ–æ—¶æ— æ³•çŸ¥é“å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆï¼Œæ­¤æ—¶ä½¿ç”¨æ³›å‹æ–¹æ³•è¿™æ ·å°±å’Œç±»çš„æ³›å‹æ— å…³äº†ï¼Œè¿™æ ·é™æ€æ–¹æ³•åˆå§‹åŒ–æ—¶ç±»å‹åªå’Œè‡ªèº«çš„æ³›å‹ç›¸å…³ã€‚ æ³›å‹æ–¹æ³•è¿”å›å€¼æ˜¯æ³›å‹ï¼Œé‚£ä¹ˆå°±è¿”å›ä¸€ä¸ªæ³›å‹ï¼Œä¸èƒ½æ˜¯å…·ä½“ç±»å‹ï¼Œåä¹‹äº¦ç„¶ã€‚ 123public static &lt;T&gt; Set&lt;T&gt; set()&#123; // return new HashSet&lt;String&gt;(); //ä¸èƒ½è¿”å›å…·ä½“ç±»å‹&#125; æ³›å‹çš„ä¸€ä¸ªé‡è¦å¥½å¤„æ˜¯èƒ½å¤Ÿç®€å•è€Œå®‰å…¨çš„åˆ›å»ºå¤æ‚çš„æ¨¡å‹ å¯å˜å‚æ•°æ³›å‹æ–¹æ³• æ“¦é™¤ jvmå¹¶ä¸è®¤è¯†æ³›å‹å› æ­¤éœ€è¦å°†æ³›å‹æ“¦é™¤ã€‚ ArrayList å’Œ ArrayListå¾ˆå®¹æ˜“è¢«è®¤ä¸ºæ˜¯ä¸åŒç±»å‹ã€‚å› ä¸ºä»–ä»¬æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œä½†ç¨‹åºå´è®¤ä¸ºä»–ä»¬æ˜¯ç›¸åŒçš„ï¼Œæ­£æ˜¯å› ä¸ºæ“¦é™¤çš„å­˜åœ¨ã€‚ æ“¦é™¤çš„ç»“æœå°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡å˜ä¸ºå®ƒçš„åŸç”Ÿç±» æ³›å‹åªæ˜¯ç”¨æ¥æ£€æŸ¥ç±»å‹æ­£ç¡®æ€§ï¼Œæ³›å‹éƒ¨åˆ†çš„ä»£ç ä¸ä¼šå‚ä¸è¿è¡Œï¼Œè¿™æ˜¯ç”±äºæ³›å‹çš„æ“¦é™¤ä½œç”¨ã€‚ æ³›å‹ä»£ç å†…éƒ¨æ— æ³•è·å¾—æœ‰å…³æ³›å‹å‚æ•°çš„ç±»å‹çš„ä¿¡æ¯ã€‚ æ³›å‹æ“¦é™¤åˆ°ç¬¬ä¸€ä¸ªè¾¹ç•Œ ä¸Šç•Œ æ„æ€å°±æ˜¯T åªèƒ½ä¸ºHasFæˆ–è€…å…¶å­ç±»ã€‚ æ³›å‹åªæ˜¯åœ¨é™æ€ç±»å‹æ£€æŸ¥æœŸé—´å‡ºç°æ¥éªŒè¯ç±»å‹æ­£ç¡®æ€§ï¼Œç¨‹åºä¸€ä½†è¿è¡Œåæ³›å‹éƒ½å°†è¢«æ“¦é™¤ï¼Œæ›¿æ¢æˆä»–ä»¬çš„éæ³›å‹ä¸Šç•Œï¼Œå¦‚Listè¢«æ“¦é™¤ä¸ºListï¼ŒListè¢«æ“¦é™¤ä¸ºList, æ“¦é™¤ä¸º æ“¦é™¤åŠ¨æœº æ“¦é™¤ä½¿å¾—æ³›åŒ–çš„ä»£ç å˜å¾—å…·ä½“ï¼Œå› æ­¤æ³›åŒ–å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨éæ³›åŒ–ç±»åº“ï¼Œéæ³›åŒ–å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›åŒ–ç±»åº“ã€‚ æ“¦é™¤çš„ä»£ä»· æ³›å‹ä¸èƒ½å½“åšä¸€ä¸ªç±»å»æ“ä½œï¼Œå¦‚Foo&lt;Cat&gt; catä¸èƒ½ä»£è¡¨Catè¿™ä¸ªç±»ï¼Œå› ä¸ºå®ƒä¼šè¢«æ“¦é™¤ä¸ºObject. è¾¹ç•Œå¤„çš„åŠ¨ä½œ è¾¹ç•Œå°±æ˜¯å¯¹è±¡è¿›å…¥å’Œç¦»å¼€æ–¹æ³•çš„åœ°æ–¹ï¼Œç¼–è¯‘æœŸæ‰§è¡Œç±»å‹æ£€æŸ¥å’Œæ’å…¥è½¬å‹ä»£ç å°±æ˜¯åœ¨è¾¹ç•Œå¤„ã€‚ ç¼–è¯‘æœŸæ‰§è¡Œäº†ç±»å‹æ£€æŸ¥ç¡®ä¿äº†æ•°æ®ä¸€è‡´æ€§ï¼Œåœ¨ç¦»å¼€æ–¹æ³•æ—¶ç”±ç¼–è¯‘å™¨ä¸ºä½ æ’å…¥è½¬å‹ä»£ç æ‰§è¡Œè½¬å‹ï¼Œæ­¤æ—¶è½¬å‹æ˜¯å®‰å…¨çš„ã€‚ ç”±äºæ“¦é™¤kindå®é™…è¢«å­˜å‚¨ä¸ºClassï¼Œå› æ­¤åˆ›å»ºæ•°ç»„æ— æ³•åçŸ¥é“è¦è½¬å‹æˆä»€ä¹ˆç±»å‹ï¼Œå› æ­¤å¿…é¡»å¼ºè½¬ã€‚ä½†åˆ›å»ºå®¹å™¨å°±ä¸éœ€è¦å¼ºè½¬äº†ï¼Œç¼–è¯‘æœŸå¯ä»¥ä¿è¯ç±»å‹çš„ä¸€è‡´æ€§ï¼Œå¦‚æœç±»å‹ä¸ä¸€è‡´ä¸é€šè¿‡ç¼–è¯‘ã€‚ è¾¹ç•Œ å¼ºåˆ¶æ³›å‹å¯ä»¥ä½¿ç”¨ä»€ä¹ˆç±»å‹ æŒ‰è¾¹ç•Œç±»å‹è°ƒç”¨æ–¹æ³•å…¶æ–¹æ³•ï¼Œæ— è¾¹ç•Œçš„åªèƒ½è°ƒç”¨ä»Objecç»§æ‰¿çš„æ–¹æ³•ã€‚ é€šé…ç¬¦ é€šé…ç¬¦å¯ä»¥å…è®¸æŸç§ç±»å‹å‘ä¸Šè½¬å‹,ä¸æ™®é€šè¾¹ç•Œå¯¹æ¯”: List first &#x3D; new ArrayList(); åªèƒ½ä½¿ç”¨TList&lt;? extends Fruit&gt; first &#x3D; new ArrayList(); &#x2F;&#x2F;å¯ä»¥ä½¿ç”¨å„ç§Fruitçš„å­ç±»ã€‚List&lt;? extends Fruit&gt; è¯»ä½œå…·æœ‰ä»»ä½•ä»Fruitç»§æ‰¿çš„ç±»å‹åˆ—è¡¨ã€‚ ä¸Šç•Œ ï¼Ÿæ˜¯Fruit çš„å­ç±»ï¼Œä½†å…·ä½“æ˜¯ä»€ä¹ˆä¸çŸ¥é“ï¼Œå› æ­¤å½“è°ƒç”¨getæ–¹æ³•æ—¶è¿”å›çš„å¯¹è±¡å¯ä»¥èµ‹å€¼ç»™Fruitå¼•ç”¨,è€Œaddæ·»åŠ å¯¹è±¡æ—¶ç”±äºä¸æ¸…æ¥šå…·ä½“è¦æ·»åŠ ä»€ä¹ˆå­ç±»æ‰€ä»¥æ— æ³•ä½¿ç”¨addæ–¹æ³•ã€‚ è¶…ç±»å‹é€šé…ç¬¦ ä¸‹ç•Œ ä¹Ÿç§° é€†å˜ï¼Ÿæ˜¯Appleçš„çˆ¶ç±»ï¼Œä½†å…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ä¸å¾—è€ŒçŸ¥ï¼Œå› æ­¤å½“è°ƒç”¨addæ–¹æ³•æ·»åŠ å¯¹è±¡æ—¶å¯ä»¥æ·»åŠ Appleå’Œå…¶å­ç±»å¯¹è±¡ï¼Œä½†è°ƒç”¨getæ–¹æ³•æ—¶æ— æ³•ç¡®å®šè¦è¿”å›ä»€ä¹ˆç±»å‹ï¼Œå› æ­¤ä¸èƒ½è°ƒç”¨getæ–¹æ³•è¿”å›å…·ä½“ç±»å‹ï¼Œåªèƒ½è¿”å›Objectã€‚ æ— ç•Œé€šé…ç¬¦ ä¸ä¸Šä¸‹ç•Œä¹‹é—´çš„åŒºåˆ« - ä¸€ä¸ªæ–¹æ³•çš„å‚æ•°çš„ç±»å‹å¦‚æ˜¯ List ï¼ŒList ï¼Œåˆ™å¯ä»¥æ¥æ”¶ä»»ä½•å½¢å¼çš„Listå‚æ•°ï¼Œå‚æ•°æ˜¯ä¸æ˜¯æ³›å‹æ— æ‰€è°“ã€‚ å‚æ•°çš„ç±»å‹å¦‚æœæ˜¯List&lt;? extends&#x2F;super A &gt; ï¼Œåˆ™åªèƒ½æ¥æ”¶æ³›å‹çš„Listå‚æ•°. å¦‚æœå‚æ•°çš„ç±»å‹æ˜¯ &lt;?&gt; æˆ–è€… &lt;? extends A&gt;ï¼Œåˆ™è¯¥æ–¹æ³•æ— æ³•è°ƒç”¨ å¯ä»¥å‘ä¸Šè½¬å‹ å¤šä¸ªæ³›å‹å‚æ•°ä¸‹åªæœ‰å…¨ä¸ºï¼Ÿæ—¶ç¼–è¯‘å™¨æ— æ³•ä¸åŸç”Ÿç±»åŒºåˆ†ï¼Œä½†åªè¦æœ‰è¿‡ä¸€ä¸ªå‚æ•°ä¸æ˜¯ï¼Ÿå°±ä¼šæœ‰æ‰€åŒºåˆ†å¦‚Map&lt;String, ?&gt;å¿…é¡»ä¼ å…¥map&lt;String,?&gt;ç±»å‹çš„å‚æ•°ï¼Œè€ŒMapå¯ä»¥ä¼ å…¥new HashMap();","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"Javaç¼–ç¨‹æ€æƒ³","slug":"è¯»ä¹¦ç¬”è®°/Javaç¼–ç¨‹æ€æƒ³","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Java%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/"}]},{"title":"ç¬¬20ç« ï¼šæ³¨è§£","date":"2022-03-08T02:25:29.744Z","path":"wiki/è¯»ä¹¦ç¬”è®°/Javaç¼–ç¨‹æ€æƒ³/ç¬¬20ç« ï¼šæ³¨è§£/","text":"å‚è€ƒ","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"Javaç¼–ç¨‹æ€æƒ³","slug":"è¯»ä¹¦ç¬”è®°/Javaç¼–ç¨‹æ€æƒ³","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Java%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/"}]},{"title":"è¿­ä»£å™¨æ¨¡å¼","date":"2022-03-08T02:25:29.744Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/è¿­ä»£å™¨æ¨¡å¼/","text":"å®šä¹‰Iterator Patternï¼šæä¾›ä¸€ç§æ–¹æ³•è®¿é—®ä¸€ä¸ªå®¹å™¨å¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆä¸æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨ç»†èŠ‚ã€‚ ç±»å›¾ è§’è‰² Iteratorï¼ˆæŠ½è±¡è¿­ä»£å™¨ï¼‰ï¼šæ¥å£å£°æ˜äº†éå†é›†åˆæ‰€éœ€çš„æ“ä½œï¼š è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ã€ è·å–å½“å‰ä½ç½®å’Œé‡æ–°å¼€å§‹è¿­ä»£ç­‰ã€‚ ConcreteIteratorï¼ˆå…·ä½“è¿­ä»£å™¨ï¼‰ï¼šå®ç°éå†é›†åˆçš„ä¸€ç§ç‰¹å®šç®—æ³•ã€‚ è¿­ä»£å™¨å¯¹è±¡å¿…é¡»è·Ÿè¸ªè‡ªèº«éå†çš„è¿›åº¦ã€‚ è¿™ä½¿å¾—å¤šä¸ªè¿­ä»£å™¨å¯ä»¥ç›¸äº’ç‹¬ç«‹åœ°éå†åŒä¸€é›†åˆã€‚ IterableCollectionsï¼šæ¥å£å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ªæ–¹æ³•æ¥è·å–ä¸é›†åˆå…¼å®¹çš„è¿­ä»£å™¨ã€‚ è¯·æ³¨æ„ï¼Œ è¿”å›æ–¹æ³•çš„ç±»å‹å¿…é¡»è¢«å£°æ˜ä¸ºè¿­ä»£å™¨æ¥å£ï¼Œ å› æ­¤å…·ä½“é›†åˆå¯ä»¥è¿”å›å„ç§ä¸åŒç§ç±»çš„è¿­ä»£å™¨ã€‚ ConcreteCollectionsï¼ˆå…·ä½“é›†åˆï¼‰ï¼šå®ç°äº†åˆ›å»ºè¿­ä»£å™¨(Iterator)å¯¹è±¡çš„æ¥å£ï¼Œè¿”å›ä¸€ä¸ªåˆé€‚çš„å…·ä½“è¿­ä»£å™¨å®ä¾‹ã€‚ ä¼˜ç¼ºç‚¹ å•ä¸€èŒè´£åŸåˆ™ å¼€é—­åŸåˆ™ ä½¿ç”¨åœºæ™¯ Javaé›†åˆç±» æ•°æ®åº“æ“ä½œCursor å‚è€ƒ https://refactoringguru.cn/design-patterns/iterator","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"è®¿é—®è€…æ¨¡å¼","date":"2022-03-08T02:25:29.743Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/è®¿é—®è€…æ¨¡å¼/","text":"å®šä¹‰å°è£…æŸäº›ä½œç”¨äºæŸç§æ•°æ®ç»“æ„ä¸­å„å…ƒç´ çš„æ“ä½œï¼Œå®ƒå¯ä»¥åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹å®šä¹‰ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°çš„æ“ä½œã€‚ ç±»å›¾ è§’è‰² Visitorï¼šæ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†å¯¹æ¯ä¸ª Element è®¿é—®çš„è¡Œä¸ºï¼Œå®ƒçš„å‚æ•°å°±æ˜¯è¢«è®¿é—®çš„å…ƒç´ ï¼Œå®ƒçš„æ–¹æ³•ä¸ªæ•°ç†è®ºä¸Šä¸å…ƒç´ çš„ä¸ªæ•°æ˜¯ä¸€æ ·çš„ï¼Œå› æ­¤ï¼Œè®¿é—®è€…æ¨¡å¼è¦æ±‚å…ƒç´ çš„ç±»å‹è¦ç¨³å®šï¼Œå¦‚æœç»å¸¸æ·»åŠ ã€ç§»é™¤å…ƒç´ ç±»ï¼Œå¿…ç„¶ä¼šå¯¼è‡´é¢‘ç¹åœ°ä¿®æ”¹ Visitor æ¥å£ï¼Œå¦‚æœå‡ºç°è¿™ç§æƒ…å†µï¼Œåˆ™è¯´æ˜ä¸é€‚åˆä½¿ç”¨è®¿é—®è€…æ¨¡å¼ã€‚ ConcreteVisitorï¼šå…·ä½“çš„è®¿é—®è€…ï¼Œå®ƒéœ€è¦ç»™å‡ºå¯¹æ¯ä¸€ä¸ªå…ƒç´ ç±»è®¿é—®æ—¶æ‰€äº§ç”Ÿçš„å…·ä½“è¡Œä¸ºã€‚ Elementï¼šå…ƒç´ æ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªæ¥å—è®¿é—®è€…ï¼ˆacceptï¼‰çš„æ–¹æ³•ï¼Œå…¶æ„ä¹‰æ˜¯æŒ‡æ¯ä¸€ä¸ªå…ƒç´ éƒ½è¦å¯ä»¥è¢«è®¿é—®è€…è®¿é—®ã€‚ ElementAã€ElementBï¼šå…·ä½“çš„å…ƒç´ ç±»ï¼Œå®ƒæä¾›æ¥å—è®¿é—®çš„å…·ä½“å®ç°ï¼Œè€Œè¿™ä¸ªå…·ä½“çš„å®ç°ï¼Œé€šå¸¸æƒ…å†µä¸‹æ˜¯ä½¿ç”¨è®¿é—®è€…æä¾›çš„è®¿é—®è¯¥å…ƒç´ ç±»çš„æ–¹æ³•ã€‚ ObjectStructureï¼šå®šä¹‰å½“ä¸­æ‰€æåˆ°çš„å¯¹è±¡ç»“æ„ï¼Œå¯¹è±¡ç»“æ„æ˜¯ä¸€ä¸ªæŠ½è±¡è¡¨è¿°ï¼Œå®ƒå†…éƒ¨ç®¡ç†äº†å…ƒç´ é›†åˆï¼Œå¹¶ä¸”å¯ä»¥è¿­ä»£è¿™äº›å…ƒç´ æä¾›è®¿é—®è€…è®¿é—®ã€‚ ä¼˜ç¼ºç‚¹ å„è§’è‰²èŒè´£åˆ†ç¦»ï¼Œç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ é«˜æ‰©å±•æ€§ ä½¿ç”¨åœºæ™¯å‚è€ƒ https://www.jianshu.com/p/1f1049d0a0f4 https://refactoringguru.cn/design-patterns/visitor","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"è´£ä»»é“¾æ¨¡å¼","date":"2022-03-08T02:25:29.743Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/è´£ä»»é“¾æ¨¡å¼/","text":"å®šä¹‰å…è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œè®©å¤šä¸ªå¯¹è±¡éƒ½æœ‰å¯èƒ½æ¥æ”¶è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚ ç±»å›¾ è§’è‰² æŠ½è±¡å¤„ç†è€…(Handler)è§’è‰²ï¼šå£°æ˜äº†æ‰€æœ‰å…·ä½“å¤„ç†è€…çš„é€šç”¨æ¥å£ã€‚ è¯¥æ¥å£é€šå¸¸ä»…åŒ…å«å•ä¸ªæ–¹æ³•ç”¨äºè¯·æ±‚å¤„ç†ï¼Œ ä½†æœ‰æ—¶å…¶è¿˜ä¼šåŒ…å«ä¸€ä¸ªè®¾ç½®é“¾ä¸Šä¸‹ä¸ªå¤„ç†è€…çš„æ–¹æ³•ã€‚ å…·ä½“å¤„ç†è€…(ConcreteHandler)è§’è‰²ï¼šå…·ä½“å¤„ç†è€…æ¥åˆ°è¯·æ±‚åï¼Œå¯ä»¥é€‰æ‹©å°†è¯·æ±‚å¤„ç†æ‰ï¼Œæˆ–è€…å°†è¯·æ±‚ä¼ ç»™ä¸‹å®¶ã€‚ ä¼˜ç¼ºç‚¹ å•ä¸€èŒè´£åŸåˆ™ã€‚ å¼€é—­åŸåˆ™ã€‚å¯ä»¥åœ¨ä¸æ›´æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­æ–°å¢å¤„ç†è€…ã€‚ ä½¿ç”¨åœºæ™¯ OkHttpæ¡†æ¶ä¸­ï¼Œåˆ†æå‚è€ƒOkHttp GUIä¸­çš„äº‹ä»¶æµï¼ŒæŸä¸ªviewå¦‚æœè¦å¤„ç†å°±ä¼šè¿›è¡Œæ‹¦æˆªï¼Œå¦‚æœä¸å¤„ç†ï¼Œåˆ™ä¼ ç»™åç»­çš„viewã€‚ å‚è€ƒ https://refactoringguru.cn/design-patterns/chain-of-responsibility","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"çŠ¶æ€æ¨¡å¼","date":"2022-03-08T02:25:29.742Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/çŠ¶æ€æ¨¡å¼/","text":"å®šä¹‰State Patternï¼šå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜çš„æ—¶å€™æ”¹å˜å…¶è¡Œä¸ºã€‚ çŠ¶æ€æ¨¡å¼çš„çŠ¶æ€æ˜¯ä¸å¯æ›¿æ¢çš„è€Œä¸”æ˜¯å…„å¼Ÿå…³ç³»ï¼Œä½†æ˜¯ç­–ç•¥æ¨¡å¼æ˜¯å¯ä»¥æ›¿æ¢çš„å½¼æ­¤ç‹¬ç«‹çš„ã€‚ä»–ä»¬æ‰§è¡Œå®Œä¹‹åçš„è¡Œä¸ºä¹Ÿä¸åŒï¼ŒçŠ¶æ€æ¨¡å¼ä¼šæ›´æ”¹çŠ¶æ€ä½†æ˜¯ç­–ç•¥æ¨¡å¼æ‰§è¡Œå®Œå°±æ˜¯æ‰§è¡Œå®Œã€‚ ç±»å›¾ è·Ÿç­–ç•¥æ¨¡å¼çš„ç±»å›¾ä¸€æ ·â€¦ è§’è‰² State: æŠ½è±¡çŠ¶æ€ç±»ï¼Œå®šä¹‰ä¸€ä¸ªæ¥å£ä»¥å°è£…ä¸contextçš„ä¸€ä¸ªçŠ¶æ€ç›¸å…³çš„è¡Œä¸º ConcreteState: å…·ä½“çŠ¶æ€ï¼Œæ¯ä¸€å­ç±»å®ç°ä¸€ä¸ªä¸Contextçš„ä¸€ä¸ªçŠ¶æ€ç›¸å…³çš„è¡Œä¸º Context: çŠ¶æ€ä¸Šä¸‹æ–‡ï¼Œç»´æŠ¤ä¸€ä¸ªConcreteStateå­ç±»çš„å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹å®šä¹‰å½“å‰çš„çŠ¶æ€ã€‚ ä¼˜ç¼ºç‚¹ å•ä¸€èŒè´£åŸåˆ™ å¼€é—­åŸåˆ™ å°è£…äº†è½¬æ¢è§„åˆ™ ä½¿ç”¨åœºæ™¯ æ’­æ”¾å™¨çš„ä¸åŒçŠ¶æ€ å‚è€ƒ http://ifeve.com/state-design-pattern-in-java-example-tutorial/ https://juejin.cn/post/6844903455492931598 https://refactoringguru.cn/design-patterns/state/java/example","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"ç­–ç•¥æ¨¡å¼","date":"2022-03-08T02:25:29.742Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/ç­–ç•¥æ¨¡å¼/","text":"å®šä¹‰Strategy Patternï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ç±»ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ï¼Œä¹Ÿç§°ä¸ºæ”¿ç­–æ¨¡å¼(Policy)ã€‚ æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼çš„åŒºåˆ«åœ¨äºï¼šåœ¨æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ä¸­ï¼Œè°ƒç”¨ç®—æ³•çš„ä¸»ä½“åœ¨æŠ½è±¡çš„çˆ¶ç±»ä¸­ï¼Œè€Œåœ¨ç­–ç•¥æ¨¡å¼ä¸­ï¼Œè°ƒç”¨ç®—æ³•çš„ä¸»ä½“åˆ™æ˜¯å°è£…åˆ°äº†å°è£…ç±»Contextä¸­ï¼ŒæŠ½è±¡ç­–ç•¥Strategyä¸€èˆ¬æ˜¯ä¸€ä¸ªæ¥å£ï¼Œç›®çš„åªæ˜¯ä¸ºäº†å®šä¹‰è§„èŒƒï¼Œé‡Œé¢ä¸€èˆ¬ä¸åŒ…å«é€»è¾‘ã€‚ ç±»å›¾ è§’è‰² Contextï¼ˆç¯å¢ƒç±»ï¼‰ï¼šç»´æŠ¤æŒ‡å‘å…·ä½“ç­–ç•¥çš„å¼•ç”¨ï¼Œ ä¸”ä»…é€šè¿‡ç­–ç•¥æ¥å£ä¸è¯¥å¯¹è±¡è¿›è¡Œäº¤æµã€‚ç›®çš„æ˜¯é¿å…é«˜å±‚æ¨¡å—å¯¹ç­–ç•¥çš„ç›´æ¥è°ƒç”¨ã€‚ Strategyï¼ˆæŠ½è±¡ç­–ç•¥ç±»ï¼‰ï¼šé€šå¸¸æƒ…å†µä¸‹ä¸ºä¸€ä¸ªæ¥å£ï¼Œå½“å„ä¸ªå®ç°ç±»ä¸­å­˜åœ¨ç€é‡å¤çš„é€»è¾‘æ—¶ï¼Œåˆ™ä½¿ç”¨æŠ½è±¡ç±»æ¥å°è£…è¿™éƒ¨åˆ†å…¬å…±çš„ä»£ç ï¼Œæ­¤æ—¶ï¼Œç­–ç•¥æ¨¡å¼çœ‹ä¸Šå»æ›´åƒæ˜¯æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ã€‚ ConcreteStrategyï¼ˆå…·ä½“ç­–ç•¥ç±»ï¼‰ï¼šå®ƒå®ç°äº†åœ¨æŠ½è±¡ç­–ç•¥ç±»ä¸­å£°æ˜çš„ç®—æ³•ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œå…·ä½“ç­–ç•¥ç±»å°†è¦†ç›–åœ¨ç¯å¢ƒç±»ä¸­å®šä¹‰çš„æŠ½è±¡ç­–ç•¥ç±»å¯¹è±¡ï¼Œä½¿ç”¨ä¸€ç§å…·ä½“çš„ç®—æ³•å®ç°æŸä¸ªä¸šåŠ¡å¤„ç†ã€‚ ä¼˜ç¼ºç‚¹ å¼€é—­åŸåˆ™ å¤šé‡if&#x2F;elseçš„è§£å†³æ–¹å¼ä¹‹ä¸€ ä½¿ç”¨åœºæ™¯ Arrays.sort() å‚è€ƒ https://refactoringguru.cn/design-patterns/strategy","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"è§‚å¯Ÿè€…æ¨¡å¼","date":"2022-03-08T02:25:29.742Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/è§‚å¯Ÿè€…æ¨¡å¼/","text":"å®šä¹‰Observer Patternï¼šå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è¿™ä¸ªä¸»é¢˜å¯¹è±¡åœ¨çŠ¶æ€ä¸Šå‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚ ç±»å›¾ è§’è‰² æŠ½è±¡ä¸»é¢˜(Subject)è§’è‰²ï¼šæŠ½è±¡ä¸»é¢˜è§’è‰²æŠŠæ‰€æœ‰å¯¹è§‚å¯Ÿè€…å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åœ¨ä¸€ä¸ªèšé›†ï¼ˆæ¯”å¦‚ArrayListå¯¹è±¡ï¼‰é‡Œï¼Œæ¯ä¸ªä¸»é¢˜éƒ½å¯ä»¥æœ‰ä»»ä½•æ•°é‡çš„è§‚å¯Ÿè€…ã€‚æŠ½è±¡ä¸»é¢˜æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…å¯¹è±¡ï¼ŒæŠ½è±¡ä¸»é¢˜è§’è‰²åˆå«åšæŠ½è±¡è¢«è§‚å¯Ÿè€…(Observable)è§’è‰²ã€‚ å…·ä½“ä¸»é¢˜(ConcreteSubject)è§’è‰²ï¼šå°†æœ‰å…³çŠ¶æ€å­˜å…¥å…·ä½“è§‚å¯Ÿè€…å¯¹è±¡ï¼›åœ¨å…·ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œç»™æ‰€æœ‰ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚å…·ä½“ä¸»é¢˜è§’è‰²åˆå«åšå…·ä½“è¢«è§‚å¯Ÿè€…(Concrete Observable)è§’è‰²ã€‚ æŠ½è±¡è§‚å¯Ÿè€…(Observer)è§’è‰²ï¼šä¸ºæ‰€æœ‰çš„å…·ä½“è§‚å¯Ÿè€…å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œåœ¨å¾—åˆ°ä¸»é¢˜çš„é€šçŸ¥æ—¶æ›´æ–°è‡ªå·±ï¼Œè¿™ä¸ªæ¥å£å«åšæ›´æ–°æ¥å£ã€‚ å…·ä½“è§‚å¯Ÿè€…(ConcreteObserver)è§’è‰²ï¼šå­˜å‚¨ä¸ä¸»é¢˜çš„çŠ¶æ€è‡ªæ°çš„çŠ¶æ€ã€‚å…·ä½“è§‚å¯Ÿè€…è§’è‰²å®ç°æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²æ‰€è¦æ±‚çš„æ›´æ–°æ¥å£ï¼Œä»¥ä¾¿ä½¿æœ¬èº«çš„çŠ¶æ€ä¸ä¸»é¢˜çš„çŠ¶æ€ç›¸åè°ƒã€‚å¦‚æœéœ€è¦ï¼Œå…·ä½“è§‚å¯Ÿè€…è§’è‰²å¯ä»¥ä¿æŒä¸€ä¸ªæŒ‡å‘å…·ä½“ä¸»é¢˜å¯¹è±¡çš„å¼•ç”¨ã€‚ ä¼˜ç¼ºç‚¹ æ»¡è¶³å¼€é—­åŸåˆ™ è®¾è®¡åŸåˆ™ å¤šç”¨ç»„åˆï¼Œå°‘ç”¨ç»§æ‰¿ é’ˆå¯¹æ¥å£ç¼–ç¨‹ ä¸ºäº¤äº’å¯¹è±¡ä¹‹é—´çš„æ¾è€¦åˆåŠªåŠ› ä½¿ç”¨åœºæ™¯ java.utilåŒ…ä¸­ åœ¨Javaä¸­ï¼ŒGUIçš„æŒ‰é’®ç­‰UIçš„äº‹ä»¶å“åº” Javaä¸­æä¾›äº†Observableï¼Œç»™æˆ‘ä»¬å¿«é€Ÿå®ç°è§‚å¯Ÿè€…æ¨¡å¼ã€‚ä½†ç”±äºå•ç»§æ‰¿çš„åŸå› ï¼Œä½¿ç”¨è¿™ä¸ªç±»è¿˜æ˜¯ä¼šæœ‰äº›é™åˆ¶ å‚è€ƒ ã€ŠHead First è®¾è®¡æ¨¡å¼ã€‹","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"è§£é‡Šå™¨æ¨¡å¼","date":"2022-03-08T02:25:29.742Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/è§£é‡Šå™¨æ¨¡å¼/","text":"å®šä¹‰Interpreter Pattternï¼šç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ã€‚ ç±»å›¾ è§’è‰² AbstractExpressionï¼ˆæŠ½è±¡è¡¨è¾¾å¼ï¼‰ï¼šå£°æ˜ä¸€ä¸ªæ‰€æœ‰çš„å…·ä½“è¡¨è¾¾å¼è§’è‰²éƒ½éœ€è¦å®ç°çš„æŠ½è±¡æ¥å£ã€‚è¿™ä¸ªæ¥å£ä¸»è¦æ˜¯ä¸€ä¸ªinterpret()æ–¹æ³•ï¼Œç§°åšè§£é‡Šæ“ä½œã€‚ TerminalExpressionï¼ˆç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼‰ï¼šå®ç°äº†æŠ½è±¡è¡¨è¾¾å¼è§’è‰²æ‰€è¦æ±‚çš„æ¥å£ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªinterpret()æ–¹æ³•ï¼›æ–‡æ³•ä¸­çš„æ¯ä¸€ä¸ªç»ˆç»“ç¬¦éƒ½æœ‰ä¸€ä¸ªå…·ä½“ç»ˆç»“è¡¨è¾¾å¼ä¸ä¹‹ç›¸å¯¹åº”ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªç®€å•çš„å…¬å¼R&#x3D;R1+R2ï¼Œåœ¨é‡Œé¢R1å’ŒR2å°±æ˜¯ç»ˆç»“ç¬¦ï¼Œå¯¹åº”çš„è§£æR1å’ŒR2çš„è§£é‡Šå™¨å°±æ˜¯ç»ˆç»“ç¬¦è¡¨è¾¾å¼ã€‚ NonterminalExpressionï¼ˆéç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼‰ï¼šæ–‡æ³•ä¸­çš„æ¯ä¸€æ¡è§„åˆ™éƒ½éœ€è¦ä¸€ä¸ªå…·ä½“çš„éç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼Œéç»ˆç»“ç¬¦è¡¨è¾¾å¼ä¸€èˆ¬æ˜¯æ–‡æ³•ä¸­çš„è¿ç®—ç¬¦æˆ–è€…å…¶ä»–å…³é”®å­—ï¼Œæ¯”å¦‚å…¬å¼R&#x3D;R1+R2ä¸­ï¼Œâ€œ+â€å°±æ˜¯éç»ˆç»“ç¬¦ï¼Œè§£æâ€œ+â€çš„è§£é‡Šå™¨å°±æ˜¯ä¸€ä¸ªéç»ˆç»“ç¬¦è¡¨è¾¾å¼ã€‚ Contextï¼ˆç¯å¢ƒç±»ï¼‰ï¼šè¿™ä¸ªè§’è‰²çš„ä»»åŠ¡ä¸€èˆ¬æ˜¯ç”¨æ¥å­˜æ”¾æ–‡æ³•ä¸­å„ä¸ªç»ˆç»“ç¬¦æ‰€å¯¹åº”çš„å…·ä½“å€¼ï¼Œæ¯”å¦‚R&#x3D;R1+R2ï¼Œæˆ‘ä»¬ç»™R1èµ‹å€¼100ï¼Œç»™R2èµ‹å€¼200ã€‚è¿™äº›ä¿¡æ¯éœ€è¦å­˜æ”¾åˆ°ç¯å¢ƒè§’è‰²ä¸­ï¼Œå¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨Mapæ¥å……å½“ç¯å¢ƒè§’è‰²å°±è¶³å¤Ÿäº†ã€‚ ä¼˜ç¼ºç‚¹ä½¿ç”¨åœºæ™¯å‚è€ƒ https://www.cnblogs.com/java-my-life/archive/2012/06/19/2552617.html https://juejin.cn/post/6844903760376889358","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"å¤‡å¿˜å½•æ¨¡å¼","date":"2022-03-08T02:25:29.741Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/å¤‡å¿˜å½•æ¨¡å¼/","text":"å®šä¹‰Memento Patternï¼šåœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚è¿™æ ·ä»¥åå°±å¯å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚ ç±»å›¾ è§’è‰² åŸå‘å™¨ ï¼ˆOriginatorï¼‰ ï¼šè®°å½•å½“å‰æ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ï¼Œè´Ÿè´£å®šä¹‰å“ªäº›å±äºå¤‡ä»½èŒƒå›´çš„çŠ¶æ€ï¼Œè´Ÿè´£åˆ›å»ºå’Œæ¢å¤å¤‡å¿˜å½•æ•°æ®ã€‚ å¤‡å¿˜å½• ï¼ˆMementoï¼‰ ï¼šè´Ÿè´£å­˜å‚¨å‘èµ·äººå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æä¾›å‘èµ·äººéœ€è¦çš„å†…éƒ¨çŠ¶æ€ã€‚ è´Ÿè´£äºº ï¼ˆCaretakerï¼‰ï¼šå¯¹å¤‡å¿˜å½•è¿›è¡Œç®¡ç†ï¼Œä¿å­˜å’Œæä¾›å¤‡å¿˜å½•ã€‚ ä¼˜ç¼ºç‚¹ æä¾›ä¸€ç§çŠ¶æ€æ¢å¤æœºåˆ¶ ä½¿ç”¨åœºæ™¯ æ¸¸æˆçš„å½“å‰çŠ¶æ€ å›æ»šæ“ä½œ å‚è€ƒ https://xmuxiaomo.github.io/2015/05/25/è®¾è®¡æ¨¡å¼å­¦ä¹ ï¼ˆäº”ï¼‰â€”â€”å¤‡å¿˜å½•æ¨¡å¼/ https://www.cnblogs.com/java-my-life/archive/2012/06/06/2534942.html https://refactoringguru.cn/design-patterns/memento","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"æ¨¡æ¿æ–¹æ³•æ¨¡å¼","date":"2022-03-08T02:25:29.741Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/æ¨¡æ¿æ–¹æ³•æ¨¡å¼/","text":"å®šä¹‰Template Method Patternï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­ç®—æ³•çš„æ¡†æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•ä¸­çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚ ç±»å›¾ è§’è‰² æŠ½è±¡ç±» ï¼ˆAbstractClassï¼‰ï¼šä¼šå£°æ˜ä½œä¸ºç®—æ³•æ­¥éª¤çš„æ–¹æ³•ï¼Œ ä»¥åŠä¾æ¬¡è°ƒç”¨å®ƒä»¬çš„å®é™…æ¨¡æ¿æ–¹æ³•ã€‚ ç®—æ³•æ­¥éª¤å¯ä»¥è¢«å£°æ˜ä¸ºæŠ½è±¡ç±»å‹ï¼Œ ä¹Ÿå¯ä»¥æä¾›ä¸€äº›é»˜è®¤å®ç°ã€‚ å…·ä½“ç±» ï¼ˆConcreteClassï¼‰ï¼šå¯ä»¥é‡å†™æ‰€æœ‰æ­¥éª¤ï¼Œ ä½†ä¸èƒ½é‡å†™æ¨¡æ¿æ–¹æ³•è‡ªèº«ã€‚ ä¼˜ç¼ºç‚¹ä½¿ç”¨åœºæ™¯å‚è€ƒ https://refactoringguru.cn/design-patterns/template-method https://www.liaoxuefeng.com/wiki/1252599548343744/1281319636041762","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"å‘½ä»¤æ¨¡å¼","date":"2022-03-08T02:25:29.741Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/å‘½ä»¤æ¨¡å¼/","text":"å®šä¹‰Command Patternï¼šå°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿ä½ å¯ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ï¼›å¯¹è¯·æ±‚æ’é˜Ÿæˆ–è€…è®°å½•è¯·æ±‚æ—¥å¿—ï¼Œä»¥åŠæ”¯æŒå¯æ’¤é”€çš„æ“ä½œã€‚å‘½ä»¤æ¨¡å¼çš„åˆ«åä¸ºåŠ¨ä½œ(Action)æ¨¡å¼æˆ–äº‹åŠ¡(Transaction)æ¨¡å¼ã€‚ ç±»å›¾ è§’è‰² å®¢æˆ·ç«¯(Client)è§’è‰²ï¼šåˆ›å»ºä¸€ä¸ªå…·ä½“å‘½ä»¤(ConcreteCommand)å¯¹è±¡å¹¶ç¡®å®šå…¶æ¥æ”¶è€…ã€‚ å‘½ä»¤(Command)è§’è‰²ï¼šå£°æ˜äº†ä¸€ä¸ªç»™æ‰€æœ‰å…·ä½“å‘½ä»¤ç±»çš„æŠ½è±¡æ¥å£ã€‚ å…·ä½“å‘½ä»¤(ConcreteCommand)è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªæ¥æ”¶è€…å’Œè¡Œä¸ºä¹‹é—´çš„å¼±è€¦åˆï¼›å®ç°execute()æ–¹æ³•ï¼Œè´Ÿè´£è°ƒç”¨æ¥æ”¶è€…çš„ç›¸åº”æ“ä½œã€‚execute()æ–¹æ³•é€šå¸¸å«åšæ‰§è¡Œæ–¹æ³•ï¼Œä¼šè°ƒç”¨Receiverçš„actionæ–¹æ³•ã€‚ è¯·æ±‚è€…(Invoker)è§’è‰²ï¼šè´Ÿè´£è°ƒç”¨å‘½ä»¤å¯¹è±¡æ‰§è¡Œè¯·æ±‚ï¼Œç›¸å…³çš„æ–¹æ³•å«åšè¡ŒåŠ¨æ–¹æ³•ã€‚ æ¥æ”¶è€…(Receiver)è§’è‰²ï¼šè´Ÿè´£å…·ä½“å®æ–½å’Œæ‰§è¡Œä¸€ä¸ªè¯·æ±‚ã€‚ä»»ä½•ä¸€ä¸ªç±»éƒ½å¯ä»¥æˆä¸ºæ¥æ”¶è€…ï¼Œå®æ–½å’Œæ‰§è¡Œè¯·æ±‚çš„æ–¹æ³•å«åšè¡ŒåŠ¨æ–¹æ³•ã€‚ ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ å‘½ä»¤æ¨¡å¼å°†è°ƒç”¨æ“ä½œçš„è¯·æ±‚å¯¹è±¡ä¸æ‰§è¡Œè¯¥æ“ä½œçš„æ¥æ”¶å¯¹è±¡è§£è€¦ã€‚ å…·ä½“å‘½ä»¤è§’è‰²å¯ä»¥è¢«ä¸åŒçš„è¯·æ±‚è€…è§’è‰²é‡ç”¨ã€‚ ä½¿ç”¨åœºæ™¯ å¼€æºåº“EventBusä¸­ å¼€æºåº“puremvcä¸­ å‚è€ƒ ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"ä¸­ä»‹è€…æ¨¡å¼","date":"2022-03-08T02:25:29.740Z","path":"wiki/è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼/ä¸­ä»‹è€…æ¨¡å¼/","text":"å®šä¹‰ç”¨ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ï¼Œä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾ç¤ºåœ°ç›¸äº’ä½œç”¨ï¼Œä»è€Œä½¿è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ ç±»å›¾ è§’è‰² æŠ½è±¡ä¸­ä»‹è€…(Mediator)ï¼šå®šä¹‰å‡ºåŒäº‹å¯¹è±¡åˆ°ä¸­ä»‹è€…å¯¹è±¡çš„æ¥å£ï¼Œå…¶ä¸­ä¸»è¦æ–¹æ³•æ˜¯ä¸€ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰äº‹ä»¶æ–¹æ³•ã€‚ å…·ä½“ä¸­ä»‹è€…(ConcreteMediator)ï¼šå®ç°äº†æŠ½è±¡ä¸­ä»‹è€…æ‰€å£°æ˜çš„äº‹ä»¶æ–¹æ³•ã€‚å…·ä½“ä¸­ä»‹è€…çŸ¥æ™“æ‰€æœ‰çš„å…·ä½“åŒäº‹ç±»ï¼Œå¹¶è´Ÿè´£å…·ä½“çš„åè°ƒå„åŒäº‹å¯¹è±¡çš„äº¤äº’å…³ç³»ã€‚ æŠ½è±¡åŒäº‹ç±»(Colleague)ï¼šå®šä¹‰å‡ºä¸­ä»‹è€…åˆ°åŒäº‹å¯¹è±¡çš„æ¥å£ã€‚åŒäº‹å¯¹è±¡åªçŸ¥é“ä¸­ä»‹è€…è€Œä¸çŸ¥é“å…¶ä½™çš„åŒäº‹å¯¹è±¡ã€‚åŒäº‹ç±»è¡Œä¸ºåˆ†ä¸ºä¸¤ç§ï¼š è‡ªå‘è¡Œä¸ºï¼ˆself-Methodï¼‰ï¼šä¸€ç§åŒäº‹æœ¬èº«çš„è¡Œä¸ºï¼Œä¾‹å¦‚æ”¹å˜å¯¹è±¡æœ¬èº«çš„çŠ¶æ€ï¼Œå¤„ç†è‡ªå·±çš„è¡Œä¸ºç­‰ã€‚ä¸å…¶ä»–åŒäº‹ç±»æˆ–ä¸­ä»‹è€…æ²¡æœ‰ä»»ä½•ã€‚ ä¾èµ–æ–¹æ³•(Dep-Method)ï¼šå¿…é¡»ä¾èµ–ä¸­ä»‹è€…æ‰èƒ½å®Œæˆçš„è¡Œä¸ºã€‚ å…·ä½“åŒäº‹ç±»(ConcreteColleague)ï¼šæ‰€æœ‰çš„å…·ä½“åŒäº‹ç±»å‡ä»æŠ½è±¡åŒäº‹ç±»ç»§æ‰¿è€Œæ¥ã€‚å®ç°è‡ªå·±çš„ä¸šåŠ¡ï¼Œåœ¨éœ€è¦ä¸å…¶ä»–åŒäº‹é€šä¿¡çš„æ—¶å€™ï¼Œå°±ä¸æŒæœ‰çš„ä¸­ä»‹è€…é€šä¿¡ï¼Œä¸­ä»‹è€…ä¼šè´Ÿè´£ä¸å…¶ä»–çš„åŒäº‹äº¤äº’ã€‚ ä¼˜ç¼ºç‚¹ æ¾æ•£è€¦åˆ å°†å¯¹è±¡é—´ä¸€å¯¹å¤šçš„å…³è”è½¬å˜ä¸ºä¸€å¯¹ä¸€çš„å…³è” å•ä¸€èŒè´£åŸåˆ™ å¼€é—­åŸåˆ™ ä½¿ç”¨åœºæ™¯ java.util.Timerä¸­ å‚è€ƒ https://juejin.cn/post/6844903699643383821 https://refactoringguru.cn/design-patterns/mediator","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"å•ä¾‹æ¨¡å¼","date":"2022-03-08T02:25:29.736Z","path":"wiki/è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼/å•ä¾‹æ¨¡å¼/","text":"å•ä¾‹æ¨¡å¼åº”è¯¥æ˜¯æœ€å¸¸è§çš„è®¾è®¡æ¨¡å¼äº† å®šä¹‰å®šä¹‰ï¼šå•ä¾‹å¯¹è±¡çš„ç±»å¿…é¡»ä¿è¯åªæœ‰ä¸€ä¸ªå®ä¾‹å­˜åœ¨ã€‚ ä¸ºäº†å®ç°ä¸€ä¸ªå¥å£®çš„å•ä¾‹ï¼Œæˆ‘ä»¬åº”è¯¥æ€è€ƒéœ€è¦åšå“ªäº›äº‹æƒ…ï¼Ÿ ä¸èƒ½éšæ„çš„è®©ç”¨æˆ·newå‡ºå¯¹è±¡ï¼Œæ‰€ä»¥æ„é€ å‡½æ•°åº”è¯¥æ˜¯ç§æœ‰çš„ æ—¢ç„¶ä¸èƒ½ç›´æ¥newï¼Œå°±åº”è¯¥æœ‰ä¸€ä¸ªæ–¹æ³•ä¸“é—¨ç”¨æ¥è¿”å›å®ä¾‹å¯¹è±¡ ä¸èƒ½clone ä¸èƒ½è¢«ååºåˆ—åŒ– å¤šçº¿ç¨‹ä½¿ç”¨æ—¶ï¼Œå¦‚ä½•ä¿è¯çº¿ç¨‹å®‰è£… Javaçš„å®ç°æ–¹å¼æ ¹æ®ä¸Šé¢çš„æ€è€ƒï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ­¥æ­¥çš„æ¥å®ç°å•ä¾‹æ¨¡å¼ã€‚ æ‡’æ±‰å¼12345678910public class Singleton &#123; private static Singleton instance; private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125; &#125; ä½¿ç”¨çš„æ—¶å€™æ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œä½†æ­¤ç§å†™æ³•æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚é‚£ä¹ˆæ˜¯å¦æŠŠgetInstanceæ–¹æ³•åŠ ä¸€ä¸ªé”å°±å¯ä»¥äº†å‘¢ï¼Ÿ çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼12345678910public class Singleton &#123; private static Singleton instance; private Singleton ()&#123;&#125; public static synchronized Singleton getInstance() &#123; if (instance == null) &#123; instance = new Singleton(); &#125; return instance; &#125; &#125; å—¯ï¼Œè¿™ç§å†™æ³•ç¡®å®å®‰å…¨äº†ï¼Œå¯æ˜¯æ•ˆç‡ä½ï¼Œå› ä¸ºæœ‰æ›´å¥½çš„æ–¹å¼å•Š é¥¿æ±‰å¼12345678910111213public class Singleton &#123; private static Singleton instance = new Singleton(); private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; return instance; &#125; &#125;public class Singleton &#123; private static Singleton instance = null; static &#123; instance = new Singleton(); &#125; private Singleton ()&#123;&#125; public static Singleton getInstance() &#123; return instance; &#125; &#125; ä¸ºä»€ä¹ˆå«é¥¿æ±‰å‘¢ï¼Ÿå› ä¸ºåœ¨ç±»åŠ è½½çš„æ—¶å€™å¯¹è±¡å°±è¢«åˆ›å»ºäº†å•Šï¼è¿™ä¹Ÿæ˜¯è¯¥æ–¹å¼ä¸å¤ªå¥½çš„åœ°æ–¹ï¼Œéœ€è¦çš„å®ä¾‹åº”è¯¥è¦åœ¨éœ€è¦ç”¨åˆ°çš„æ—¶å€™æ‰åˆå§‹åŒ–å‘¢!æ‰€ä»¥åº”è¯¥æƒ³æƒ³æ€æ ·æ‰èƒ½å»¶è¿ŸåŠ è½½å‘¢ï¼Ÿ é™æ€å†…éƒ¨ç±»å®ç°æ–¹å¼123456789public class Singleton &#123; private static class SingletonHolder &#123; private static final Singleton INSTANCE = new Singleton(); &#125; private Singleton ()&#123;&#125; public static final Singleton getInstance() &#123; return SingletonHolder.INSTANCE; &#125; &#125; SingletonHolderç±»æ²¡æœ‰è¢«ä¸»åŠ¨ä½¿ç”¨ï¼Œåªæœ‰æ˜¾ç¤ºé€šè¿‡è°ƒç”¨getInstanceæ–¹æ³•æ—¶ï¼Œæ‰ä¼šæ˜¾ç¤ºè£…è½½SingletonHolderç±»ï¼Œä»è€Œå®ä¾‹åŒ–instanceã€‚å®Œç¾ï¼ï¼ æšä¸¾123456789101112131415161718192021222324//æ–¹å¼ä¸€public enum Singleton &#123; INSTANCE; public void whoAmI() &#123; System.out.println(this.toString()); &#125; &#125;//æ–¹å¼äºŒpublic class Singleton &#123; private Singleton()&#123; &#125; public void whoAmI() &#123; System.out.println(this.toString()); &#125; public static enum SingletonEnum &#123; SINGLETON; private Singleton instance = null; private SingletonEnum()&#123; instance = new Singleton(); &#125; public Singleton getInstance()&#123; return instance; &#125; &#125;&#125; Javaè™šæ‹Ÿæœºä¼šä¿è¯æšä¸¾ç±»å‹ä¸èƒ½è¢«åå°„å¹¶ä¸”æ„é€ å‡½æ•°åªè¢«æ‰§è¡Œä¸€æ¬¡ åŒé‡æ£€æŸ¥é”æ¨¡å¼12345678910111213141516public class Singleton &#123; private Singleton()&#123;&#125; private volatile static Singleton instance = null; public static Singleton getInstance() &#123; if(instance == null) &#123; synchronized (Singleton.class) &#123; if(instance == null) instance = new Singleton(); &#125; &#125; return instance; &#125;&#125; ä¸ºä»€ä¹ˆè¦è¿™æ ·å†™å‘¢ï¼Ÿ å…¶å®è¿™æ˜¯æ‡’æ±‰å¼çš„å‡çº§ç‰ˆã€‚æ‡’æ±‰å¼ä¸­æ‰€æœ‰çº¿ç¨‹åœ¨è®¿é—®getInstanceéƒ½ä¼šé”ä½ï¼Œä½†å®é™…æƒ…å†µä¸­ï¼Œå¾ˆå¤šæ—¶å€™åªæ˜¯è¯»æ“ä½œï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦è®©æ¯ä¸ªçº¿ç¨‹éƒ½é”ä½æ‰è°ƒç”¨å®ƒã€‚ ä¸ºä»€ä¹ˆè¦åŠ volatileå‘¢ï¼Ÿ å› ä¸ºJVMæŒ‡ä»¤å¯é‡æ’ï¼Œå…·ä½“å¯ä»¥çœ‹çœ‹volatileè¿™ç¯‡æ–‡æ¡£ ä¸ºä»€ä¹ˆè¦è¿›è¡Œä¸¤æ¬¡éç©ºåˆ¤æ–­å‘¢ï¼Ÿ ç¬¬ä¸€æ¬¡æ ¡éªŒï¼š ä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªif(singleton&#x3D;&#x3D;null)ï¼Œè¿™ä¸ªæ˜¯ä¸ºäº†ä»£ç æé«˜ä»£ç æ‰§è¡Œæ•ˆç‡ï¼Œç”±äºå•ä¾‹æ¨¡å¼åªè¦ä¸€æ¬¡åˆ›å»ºå®ä¾‹å³å¯ï¼Œæ‰€ä»¥å½“åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹ä¹‹åï¼Œå†æ¬¡è°ƒç”¨getInstanceæ–¹æ³•å°±ä¸å¿…è¦è¿›å…¥åŒæ­¥ä»£ç å—ï¼Œä¸ç”¨ç«äº‰é”ã€‚ç›´æ¥è¿”å›å‰é¢åˆ›å»ºçš„å®ä¾‹å³å¯ã€‚ ç¬¬äºŒæ¬¡æ ¡éªŒï¼š ä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªif(singleton&#x3D;&#x3D;null)ï¼Œè¿™ä¸ªæ ¡éªŒæ˜¯é˜²æ­¢äºŒæ¬¡åˆ›å»ºå®ä¾‹ï¼Œå‡å¦‚æœ‰ä¸€ç§æƒ…å†µï¼Œå½“singletonè¿˜æœªè¢«åˆ›å»ºæ—¶ï¼Œçº¿ç¨‹t1è°ƒç”¨getInstanceæ–¹æ³•ï¼Œç”±äºç¬¬ä¸€æ¬¡åˆ¤æ–­singleton&#x3D;&#x3D;nullï¼Œæ­¤æ—¶çº¿ç¨‹t1å‡†å¤‡ç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ç”±äºèµ„æºè¢«çº¿ç¨‹t2æŠ¢å äº†ï¼Œæ­¤æ—¶t2é¡µè°ƒç”¨getInstanceæ–¹æ³•ã€‚ åŒæ ·çš„ï¼Œç”±äºsingletonå¹¶æ²¡æœ‰å®ä¾‹åŒ–ï¼Œt2åŒæ ·å¯ä»¥é€šè¿‡ç¬¬ä¸€ä¸ªifï¼Œç„¶åç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼ŒåŒæ­¥ä»£ç å—ï¼Œç¬¬äºŒä¸ªifä¹Ÿé€šè¿‡ï¼Œç„¶åt2çº¿ç¨‹åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹singletonã€‚ æ­¤æ—¶t2çº¿ç¨‹å®Œæˆä»»åŠ¡ï¼Œèµ„æºåˆå›åˆ°t1çº¿ç¨‹ï¼Œt1æ­¤æ—¶ä¹Ÿè¿›å…¥åŒæ­¥ä»£ç å—ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªç¬¬äºŒä¸ªifï¼Œé‚£ä¹ˆï¼Œt1å°±ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªsingletonå®ä¾‹ï¼Œé‚£ä¹ˆï¼Œå°±ä¼šå‡ºç°åˆ›å»ºå¤šä¸ªå®ä¾‹çš„æƒ…å†µï¼Œä½†æ˜¯åŠ ä¸Šç¬¬äºŒä¸ªifï¼Œå°±å¯ä»¥å®Œå…¨é¿å…è¿™ä¸ªå¤šçº¿ç¨‹å¯¼è‡´å¤šæ¬¡åˆ›å»ºå®ä¾‹çš„é—®é¢˜ã€‚ AtomicReferenceå®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253package com.shjlone.singleton;import java.util.concurrent.atomic.AtomicReference;/** * ä½¿ç”¨AtomicReferenceçš„å•ä¾‹ */public class AtomicReferenceSingleton &#123; private static final AtomicReference&lt;Object&gt; instance; private AtomicReferenceSingleton() &#123; &#125; static &#123; instance = new AtomicReference&lt;&gt;(); &#125; public static AtomicReferenceSingleton getInstance() &#123; Object value = AtomicReferenceSingleton.instance.get(); if (value == null) &#123; synchronized (AtomicReferenceSingleton.instance) &#123; value = AtomicReferenceSingleton.instance.get(); if (value == null) &#123; final AtomicReferenceSingleton actualValue = new AtomicReferenceSingleton(); value = ((actualValue == null)) ? AtomicReferenceSingleton.instance : actualValue; AtomicReferenceSingleton.instance.set(value); &#125; &#125; &#125; return (AtomicReferenceSingleton)((value == AtomicReferenceSingleton.instance) ? null : value); &#125; public static void main(String[] args) &#123; System.out.println(AtomicReferenceSingleton.getInstance()); System.out.println(AtomicReferenceSingleton.getInstance()); System.out.println(AtomicReferenceSingleton.getInstance()); for(int i=0; i&lt;10; i++) &#123; new Thread() &#123; @Override public void run() &#123; super.run(); System.out.println(AtomicReferenceSingleton.getInstance()); &#125; &#125;.start(); &#125; &#125;&#125; ç›¸è¾ƒäºsynchronizeï¼ŒCASçš„å®ç°æ€§èƒ½æ›´é«˜ã€‚ Kotlinçš„å®ç°æ–¹å¼ç”±äºkotlinçš„è¯­è¨€ç‰¹æ€§ï¼Œæœ‰äº›å†™æ³•è¿˜æ˜¯æœ‰åˆ«äºJavaçš„ã€‚ é¥¿æ±‰å¼1object Singleton &#123;&#125; å¯¹ï¼å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚ä»¥ä¸Šä»£ç è½¬æ¢æˆJavaåï¼Œå°±æ˜¯åœ¨é™æ€ä»£ç å—ä¸­åˆå§‹åŒ–äº†Singletonã€‚ æ‡’æ±‰å¼1234567891011121314151617class Singleton private constructor() &#123; companion object &#123; private var instance: Singleton? = null get() &#123; if (field == null) &#123; field = Singleton() &#125; return field &#125; fun get(): Singleton &#123; //è¿™é‡Œä¸ç”¨getInstanceä½œä¸ºä¸ºæ–¹æ³•åï¼Œæ˜¯å› ä¸ºåœ¨ä¼´ç”Ÿå¯¹è±¡å£°æ˜æ—¶ï¼Œå†…éƒ¨å·²æœ‰getInstanceæ–¹æ³•ï¼Œæ‰€ä»¥åªèƒ½å–å…¶ä»–åå­— return instance!! &#125; &#125;&#125; çº¿ç¨‹å®‰å…¨çš„æ‡’æ±‰å¼123456789101112131415class Singleton private constructor() &#123; companion object &#123; private var instance: Singleton? = null get() &#123; if (field == null) field = Singleton() return field &#125; @Synchronized fun instance(): Singleton &#123; return instance!! &#125; &#125;&#125; åŒé‡é”æ ¡éªŒ12345class Singleton private constructor() &#123; companion object &#123; val instance by lazy &#123; Singleton() &#125; &#125;&#125; é™æ€å†…éƒ¨ç±»çš„å®ç°123456789101112131415class Singleton private constructor() &#123; companion object &#123; @JvmStatic //æ–¹ä¾¿Javaä¸­ä½¿ç”¨ fun getInstance() &#123; return Holder.instance &#125; &#125; private object Holder &#123; val instance = Singleton() &#125;&#125; 1234enum class Singleton &#123; INSTANCE;&#125; å¦‚ä½•å¤„ç†ååºåˆ—åŒ–æœ€å¼€å§‹çš„åˆ†ææŒ‡å‡ºï¼Œä¸ºäº†ä¸è®©åˆ«äººç›´æ¥newï¼Œæ„é€ å‡½æ•°éœ€è¦è®¾ç½®æˆç§æœ‰çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯èƒ½è¢«ååºåˆ—åŒ–ã€‚é‚£ä¹ˆæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ 1234567public class Singleton implements Serializable &#123; private final static Singleton instance; private Object readResolve() &#123; return instance; &#125;&#125; è¿™æ ·å°±è¡Œäº†ï¼Ÿå¯ä»¥å‚è€ƒhttps://www.jianshu.com/p/ea1d9bc40341è¿™ç¯‡æ–‡ç« äº†è§£åŸç†ã€‚ å¦‚ä½•é˜²æ­¢åå°„å¯ä»¥åœ¨ç§æœ‰æ„é€ å‡½æ•°ä¸­åŠ ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œæ¯”å¦‚åˆ¤æ–­é™æ€å˜é‡æ˜¯å¦å·²ç»å­˜åœ¨äº† å‚è€ƒ https://zh.wikipedia.org/wiki/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F https://www.jianshu.com/p/ea1d9bc40341 https://blog.csdn.net/c10WTiybQ1Ye3/article/details/108806203 Javaè®¾è®¡æ¨¡å¼ï¼ˆä¸€ï¼‰ï¼šå•ä¾‹æ¨¡å¼ï¼Œé˜²æ­¢åå°„å’Œååºåˆ—åŒ–æ¼æ´","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"UMLçŸ¥è¯†","date":"2022-03-08T02:25:29.735Z","path":"wiki/è®¾è®¡æ¨¡å¼/UMLçŸ¥è¯†/","text":"ç»§æ‰¿å…³ç³»ä½¿ç”¨å¸¦ç©ºå¿ƒç®­å¤´å¸¦å®çº¿ å®ç°å…³ç³»ä½¿ç”¨å¸¦ç©ºå¿ƒç®­å¤´å¸¦è™šçº¿ èšåˆå…³ç³»ä½¿ç”¨å¸¦ç©ºå¿ƒè±å½¢ç®­å¤´çš„ç›´çº¿ èšåˆå…³ç³»è¡¨ç¤ºå®ä½“å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œè¡¨ç¤ºæ•´ä½“æœ‰éƒ¨åˆ†æ„æˆã€‚ä¸ç»„åˆå…³ç³»æœ‰æ‰€ä¸åŒï¼Œæ•´ä½“å’Œéƒ¨åˆ†ä¸æ˜¯å¼ºä¾èµ–çš„ã€‚æ¯”å¦‚ï¼šéƒ¨é—¨æ’¤é”€äº†ï¼Œäººå‘˜è¿˜åœ¨ã€‚ ç»„åˆå…³ç³»ä½¿ç”¨å¸¦å®å¿ƒè±å½¢ç®­å¤´ç›´çº¿ ç»„åˆå…³ç³»æ˜¯å¼ºä¾èµ–çš„ï¼Œæ¯”å¦‚ï¼šå…¬å¸ä¸å­˜åœ¨äº†ï¼Œéƒ¨é—¨ä¹Ÿå°±ä¸å­˜åœ¨äº†ã€‚ å…³è”å…³ç³»ä½¿ç”¨å¸¦ç®­å¤´å¸¦å®çº¿ å…³è”å…³ç³»æ˜¯ä¸€ç§é™æ€å…³ç³»ï¼Œé€šå¸¸ä¸è¿è¡ŒçŠ¶æ€æ— å…³ã€‚å…³è”å¯¹è±¡é€šå¸¸æ˜¯ä»¥æˆå‘˜å˜é‡çš„å½¢å¼å®ç°çš„ ä¾èµ–å…³ç³»ä½¿ç”¨å¸¦ç®­å¤´å¸¦è™šçº¿ æè¿°ä¸€ä¸ªå¯¹è±¡åœ¨è¿è¡ŒæœŸé—´ä¼šç”¨åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„å…³ç³»ã€‚åœ¨ä»£ç ä¸­ï¼Œä¾èµ–å…³ç³»ä½“ç°ä¸ºç±»æ„é€ æ–¹æ³•åŠç±»æ–¹æ³•çš„ä¼ å…¥å‚æ•°ï¼Œç®­å¤´çš„æŒ‡å‘ä¸ºè°ƒç”¨å…³ç³»ï¼›ä¾èµ–å…³ç³»é™¤äº†ä¸´æ—¶çŸ¥é“å¯¹æ–¹å¤–ï¼Œè¿˜æ˜¯ä½¿ç”¨å¯¹æ–¹çš„æ–¹æ³•å’Œå±æ€§ å‚è€ƒ https://test-design-patterns.readthedocs.io/zh/latest/read_uml.html","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}]},{"title":"å¼€å§‹å­¦ä¹ iOS","date":"2022-03-08T02:25:29.732Z","path":"wiki/ç¨‹åºè¯­è¨€/iOS/å¼€å§‹å­¦ä¹ iOS/","text":"ç”±äºç§ç§åŸå› ï¼Œæœ‰æœºä¼šå…¨é¢æ¥è§¦iOSã€Macã€OS Xäº†ã€‚è¿™é‡Œè®°å½•ä¸‹è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹ã€‚ é¦–å…ˆæ˜¯äº†è§£ä¸‹è‹¹æœæ“ä½œç³»ç»Ÿçš„å†å²ï¼Œæ¨èçœ‹æ·±å…¥è§£æMac OS X &amp; iOSæ“ä½œç³»ç»Ÿã€‚è¦æƒ³å¼€å‘iOSåº”ç”¨ï¼ŒObjectiveCæ˜¯ä¸€å®šè¦å­¦çš„ï¼ŒObjective-CåŸºç¡€æ•™ç¨‹ã€Objective-Cç¼–ç¨‹å…¨è§£ã€Objective-Cé«˜çº§ç¼–ç¨‹ã€‚å¯¹OCæœ‰äº†ä¸€å®šçš„äº†è§£åï¼Œå°±éœ€è¦å¼€å§‹ç†Ÿæ‚‰iOSç³»ç»Ÿå’Œå¼€å‘äº†ï¼ŒiOSç¼–ç¨‹ï¼ˆç¬¬4ç‰ˆï¼‰ã€‚ å…¥é—¨ä¹‹åï¼Œå°±éœ€è¦æŒæ¡æ›´å…·ä½“çš„çŸ¥è¯†ç‚¹äº†ã€‚ Blockç»˜åˆ¶æœºåˆ¶GCD","tags":[{"name":"iOS","slug":"iOS","permalink":"http://airshu.github.io/tags/iOS/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"iOS","slug":"ç¨‹åºè¯­è¨€/iOS","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/iOS/"}]},{"title":"Symfonyä½¿ç”¨è®°å½•","date":"2022-03-08T02:25:29.732Z","path":"wiki/ç¨‹åºè¯­è¨€/PHP/symfonyä½¿ç”¨è®°å½•/","text":"Symfonyä¸­è¯·æ±‚çš„æµç¨‹å¦‚ä½•åœ¨æ–°æ¥å£éƒ¨ç½²çš„æ—¶å€™å¹³ç¨³çš„åˆ‡æ¢ç¼“å­˜ä½¿ç”¨php console cache:warmupå‘½ä»¤ï¼Œè¿›è¡Œç¼“å­˜é¢„çƒ­ï¼Œå½“ç¼“å­˜æ–‡ä»¶å…¨éƒ¨ç”Ÿæˆå¥½åï¼Œå³å¯å¹³ç¨³å½“åˆ‡æ¢ã€‚è€Œä¸æ˜¯æ‰‹åŠ¨åˆ é™¤ç¼“å­˜æ–‡ä»¶ï¼Œå¾…è¯·æ±‚æ¥ä¹‹åå†ç”Ÿæˆç¼“å­˜ã€‚ å‚è€ƒ https://blog.whiteoctober.co.uk/index.html%3Fp=1751.html","tags":[{"name":"PHP","slug":"PHP","permalink":"http://airshu.github.io/tags/PHP/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"PHP","slug":"ç¨‹åºè¯­è¨€/PHP","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/PHP/"}]},{"title":"ç†è§£æ‰“åŒ…æµç¨‹","date":"2022-03-08T02:25:29.732Z","path":"wiki/ç¨‹åºè¯­è¨€/iOS/ç†è§£æ‰“åŒ…æµç¨‹/","text":"é¦–å…ˆç†è§£ä¸€ä¸‹åŸºæœ¬çš„æ¦‚å¿µ https://help.apple.com/developer-account ä¸€äº›å¸¸ç”¨çš„åè¯App IDï¼šProduct IDï¼Œç”¨äºæ ‡è¯†ä¸€ä¸ªæˆ–ä¸€ç»„Appã€‚App IDåº”è¯¥å’ŒXcodeçš„Bundle Identifieræ˜¯ä¸€è‡´ï¼ˆExplicitï¼‰æˆ–åŒ¹é…ï¼ˆWildcardï¼‰ã€‚ Certificatesè¯ä¹¦ç”¨æ¥è¯æ˜iOS Appå†…å®¹çš„åˆæ³•æ€§å’Œå®Œæ•´æ€§ã€‚iOSè¯ä¹¦åˆ†ä¸ºï¼š Developmentï¼šç”¨äºå¼€å‘å’Œè°ƒè¯•åº”ç”¨ç¨‹åºã€‚ Productionï¼ˆDistributionï¼‰ï¼šç”¨äºåˆ†å‘åº”ç”¨ç¨‹åºã€‚ iOSæˆ–Macç³»ç»Ÿè‡ªåŠ¨å®‰è£…AppleWWDRCA.cerè¿™ä¸ªæ ¹è¯ä¹¦. IdentifiersDevicesProfilesä¾›åº”é…ç½®æ–‡ä»¶ï¼Œå…¶åŒ…å«çš„å†…å®¹ï¼šè¯ä¹¦ã€App IDå’Œè®¾å¤‡ã€‚ Profileä¹Ÿåˆ†ä¸ºDevelopmentå’ŒDistributionä¸¤ç±»ï¼Œæœ‰æ•ˆæœŸåŒCertificateä¸€æ ·ã€‚Distributionç‰ˆæœ¬çš„ProvisioningProfileä¸»è¦ç”¨äºæäº¤Appã€‚ Profileæ–‡ä»¶çš„æ„æˆå¤§è‡´å¦‚ä¸‹ï¼š Nameï¼šè¯¥mobileprovisionçš„æ–‡ä»¶åã€‚ UUIDï¼šè¯¥mobileprovisionæ–‡ä»¶çš„çœŸå®æ–‡ä»¶åã€‚ TeamNameï¼šApple IDè´¦å·åã€‚ TeamIdentifierï¼šTeam Identityã€‚ AppIDNameï¼šexplicit&#x2F;wildcard App ID nameï¼ˆApplicationIdentifierPrefixï¼‰ã€‚ ApplicationIdentifierPrefixï¼šå®Œæ•´App IDçš„å‰ç¼€ï¼ˆTeamIdentifier.*ï¼‰ã€‚ DeveloperCertificatesï¼šåŒ…å«äº†å¯ä»¥ä¸ºä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶åº”ç”¨ç­¾åçš„æ‰€æœ‰è¯ä¹¦ã€‚Keys è¯ä¹¦é…ç½®æµç¨‹ å®˜ç½‘æ–°å¢åº”ç”¨ã€è¯ä¹¦ï¼› ä¸‹è½½è¯ä¹¦æ–‡ä»¶ï¼ˆ.p12ï¼‰ã€é…ç½®æ–‡ä»¶ï¼ˆ.mobileprovisionï¼‰ï¼› Macå®‰è£…ç›¸åº”è¯ä¹¦ï¼ŒXcodeå…³è”é…ç½®æ–‡ä»¶ã€å¡«å†™å¯¹åº”bundle IDï¼› ç¼–è¯‘è„šæœ¬1234567891011121314151617181920MWProjectName=&quot;Loneqd&quot;#schemeåå­—MWScheme=&quot;Loneqd_appstore&quot;#Releaseè¿˜æ˜¯DebugMWConfiguration=&quot;Release&quot;#æ—¥æœŸMWDate=`date +%Y%m%d_%H%M`#å·¥ç¨‹è·¯å¾„MWWorkspace=&quot;$&#123;WORKSPACE&#125;/src&quot;#buildè·¯å¾„MWBuildDir=&quot;/Users/loneqd/alone/Loneqd-for-iOS/build&quot;#å¯¼å‡ºipaçš„é…ç½®æ–‡ä»¶MBPlistName=&quot;/Users/loneqd/alone/Loneqd-for-iOS/lieyou_appstore.plist&quot;xcodebuild archive -workspace &quot;$&#123;WORKSPACE&#125;/src/$MWProjectName.xcworkspace&quot; -scheme &quot;$MWScheme&quot; -configuration &quot;$MWConfiguration&quot; -archivePath &quot;$MWBuildDir/$MWProjectName$MWDate&quot; -quietxcodebuild -exportArchive -archivePath &quot;$MWBuildDir/$MWProjectName$MWDate.xcarchive&quot; -exportPath &quot;$MWBuildDir/$MWProjectName$MWDate&quot; -exportOptionsPlist &quot;$MBPlistName&quot; -quietecho &quot;ç»“æŸäº†======&quot;","tags":[{"name":"iOS","slug":"iOS","permalink":"http://airshu.github.io/tags/iOS/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"iOS","slug":"ç¨‹åºè¯­è¨€/iOS","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/iOS/"}]},{"title":"reified","date":"2022-03-08T02:25:29.731Z","path":"wiki/ç¨‹åºè¯­è¨€/Kotlin/reified/","text":"å‚è€ƒ æ¨èä½¿ç”¨ Kotlin å…³é”®å­— Reified","tags":[{"name":"Kotlin","slug":"Kotlin","permalink":"http://airshu.github.io/tags/Kotlin/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"Kotlin","slug":"ç¨‹åºè¯­è¨€/Kotlin","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Kotlin/"}]},{"title":"PHPä¸­opcodesçš„åŸç†","date":"2022-03-08T02:25:29.731Z","path":"wiki/ç¨‹åºè¯­è¨€/PHP/PHPä¸­opcodesçš„åŸç†/","text":"PHPä»£ç çš„ç”Ÿå‘½å‘¨æœŸä¸å¯ç”¨OPcacheçš„æµç¨‹ å¯ç”¨OPcacheçš„æµç¨‹ Scanningï¼šå°†PHPä»£ç è½¬æ¢ä¸ºè¯­è¨€ç‰‡æ®µï¼ˆTokensï¼‰ Parsinggï¼šå°†Tokensè½¬æ¢æˆç®€å•è€Œæœ‰æ„ä¹‰çš„è¡¨è¾¾å¼ Compilationï¼šå°†è¡¨è¾¾å¼ç¼–è¯‘æˆopcodes Execution:æ‰§è¡Œopcodesï¼Œæ¯æ¬¡ä¸€æ¡ï¼Œä»è€Œå®ç°PHPè„šæœ¬çš„åŠŸèƒ½ opcodeså½“ä¸€ä¸ª PHP æ–‡ä»¶è¢«è§£é‡Šæ‰§è¡Œçš„æ—¶å€™ï¼Œé¦–å…ˆæ˜¯è¢«ç¼–è¯‘æˆåä¸º opcode ï¼ˆCPUä¸“ç”¨çš„æœºå™¨è¯­è¨€æŒ‡ä»¤ï¼‰çš„ä¸­é—´ä»£ç ï¼Œç„¶åæ‰è¢«åº•å±‚çš„è™šæ‹Ÿæœºæ‰§è¡Œã€‚ å¦‚æœPHPæ–‡ä»¶æ²¡æœ‰è¢«ä¿®æ”¹è¿‡ï¼Œopcode å§‹ç»ˆæ˜¯ä¸€æ ·çš„ã€‚è¿™å°±æ„å‘³ç€ç¼–è¯‘æ­¥éª¤ç™½ç™½æµªè´¹äº† CPU çš„èµ„æºã€‚æ­¤æ—¶ opcode ç¼“å­˜å°±æ´¾ä¸Šç”¨åœºäº†ã€‚é€šè¿‡å°† opcode ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œå®ƒèƒ½é˜²æ­¢å†—ä½™çš„ç¼–è¯‘æ­¥éª¤ï¼Œå¹¶ä¸”åœ¨ä¸‹æ¬¡è°ƒç”¨æ‰§è¡Œæ—¶å¾—åˆ°é‡ç”¨ã€‚ä¸€èˆ¬æ‰§è¡Œè¿‡ç¨‹æ˜¯å…ˆæ£€æŸ¥æ–‡ä»¶çš„ç­¾åï¼ˆsignatureï¼‰æˆ–è€…ä¿®æ”¹æ—¶é—´ï¼Œä»¥é˜²æ–‡ä»¶æœ‰æ”¹åŠ¨ã€‚ PHP 5.5 ä»¥åçš„æ‰€æœ‰ç‰ˆæœ¬éƒ½å†…ç½®äº†ä¸€ä¸ª opcode ç¼“å­˜å·¥å…·ï¼Œå«åš Zend OPcacheã€‚ æ ¹æ®ä½ æ‰€ä½¿ç”¨çš„ PHP å®‰è£…åŒ…&#x2F;å‘è¡Œç‰ˆçš„ä¸åŒï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œè¯·æŸ¥çœ‹ OPcache.enable phpinfo() å’Œ phpinfo() è¾“å‡ºçš„ä¿¡æ¯ç¡®è®¤æ˜¯å¦å·²ç»å¼€å¯ã€‚ Operate Codeï¼šå½“è§£é‡Šå™¨å®Œæˆå¯¹è„šæœ¬ä»£ç çš„åˆ†æåï¼Œä¾¿å°†å®ƒä»¬ç”Ÿæˆå¯ä»¥ç›´æ¥è¿è¡Œçš„ä¸­é—´ä»£ç ï¼Œä¹Ÿç§°ä¸ºæ“ä½œç ã€‚ OPcacheopcode cacheçš„ç›®åœ°æ˜¯é¿å…é‡å¤ç¼–è¯‘ï¼Œå‡å°‘CPUå’Œå†…å­˜å¼€é”€ã€‚ PHPé…ç½®PHP5.5ä»¥ä¸Šé»˜è®¤æœ‰OPcacheï¼Œå¦‚æœéœ€è¦å®‰è£…ï¼Œåˆ™ä½¿ç”¨ä»¥ä¸‹è„šæœ¬ï¼š 123456wget http://pecl.php.net/get/zendOPcache-7.0.3.tgztar zxvf zendOPcache-7.0.3.tgz &amp;&amp; cd zendOPcache-7.0.3/usr/local/php/bin/phpize./configure --with-php-config=/usr/local/php/bin/php-configmake &amp;&amp; make install php.inié…ç½®è¯´æ˜ 123456789101112131415161718192021222324252627282930[Zend Opcache]zend_extension = OPcache.so#æ¯”è¾ƒå¸¸ç”¨çš„é…ç½®OPcache.enable=1 #æ˜¯å¦å¯ç”¨æ“ä½œç ç¼“å­˜OPcache.enable_cli=1 #ä»…é’ˆå¯¹CLIç¯å¢ƒå¯ç”¨æ“ä½œç ç¼“å­˜OPcache.revalidate_freq=60 #æ£€æŸ¥æ–‡ä»¶çš„ä¿®æ”¹çš„æ—¶é—´å‘¨æœŸ, å®šä½ä¸ºç§’ï¼Œå³ç¼“å­˜å60ç§’å»æ£€æŸ¥ä»£ç æ–‡ä»¶æ˜¯å¦è¢«ä¿®æ”¹è¿‡OPcache.fast_shutdown=1 #æ‰“å¼€å¿«é€Ÿå…³é—­, ä¸€æ¬¡é‡Šæ”¾å…¨éƒ¨è¯·æ±‚å˜é‡çš„å†…å­˜ï¼Œæ‰“å¼€è¿™ä¸ªåœ¨PHP Request Shutdownçš„æ—¶å€™å›æ”¶å†…å­˜çš„é€Ÿåº¦ä¼šæé«˜;OPcache.error_log=&quot;&quot; #OPcacheæ¨¡å—çš„é”™è¯¯æ—¥å¿—æ–‡ä»¶;OPcache.log_verbosity_level=1 #å°†é”™è¯¯ä¿¡æ¯å†™å…¥åˆ°æœåŠ¡å™¨çš„æ—¥å¿—çº§åˆ«ã€‚è‡´å‘½ï¼ˆ0ï¼‰é”™è¯¯ï¼ˆ1) è­¦å‘Šï¼ˆ2ï¼‰ä¿¡æ¯ï¼ˆ3ï¼‰è°ƒè¯•ï¼ˆ4ï¼‰#å…¶å®ƒä¸å¸¸ç”¨çš„é…ç½®OPcache.memory_consumption=128 #å…±äº«å†…å­˜å¤§å°ï¼Œå•ä½MBOPcache.interned_strings_buffer=8 #å­˜å‚¨ä¸´æ—¶å­—ç¬¦ä¸²çš„å†…å­˜å¤§å°ï¼Œå•ä½MBOPcache.max_accelerated_files=4000 #å“ˆå¸Œè¡¨ä¸­å¯å­˜å‚¨çš„è„šæœ¬æ–‡ä»¶æ•°é‡ä¸Šé™;OPcache.max_wasted_percentage=5 #æµªè´¹å†…å­˜çš„ä¸Šé™ï¼Œä»¥ç™¾åˆ†æ¯”è®¡;OPcache.use_cwd=1 #é™„åŠ æ”¹è„šæœ¬çš„å·¥ä½œç›®å½•,é¿å…åŒåè„šæœ¬å†²çªOPcache.validate_timestamps=1 #æ¯éš”revalidate_freq è®¾å®šçš„ç§’æ•° æ£€æŸ¥è„šæœ¬æ˜¯å¦æ›´æ–°;OPcache.revalidate_path=0 #å¦‚æœç¦ç”¨æ­¤é€‰é¡¹ï¼Œåœ¨åŒä¸€ä¸ª include_path å·²å­˜åœ¨çš„ç¼“å­˜æ–‡ä»¶ä¼šè¢«é‡ç”¨;OPcache.save_comments=1 #ç¦ç”¨åå°†ä¹Ÿä¸ä¼šåŠ è½½æ³¨é‡Šå†…å®¹OPcache.enable_file_override=0 #å¦‚æœå¯ç”¨ï¼Œåˆ™åœ¨è°ƒç”¨å‡½æ•°file_exists()ï¼Œ is_file() ä»¥åŠ is_readable() çš„æ—¶å€™ï¼Œ éƒ½ä¼šæ£€æŸ¥æ“ä½œç ç¼“å­˜;OPcache.optimization_level=0xffffffff #æ§åˆ¶ä¼˜åŒ–çº§åˆ«çš„äºŒè¿›åˆ¶ä½æ©ç ã€‚;OPcache.inherited_hack=1 #PHP 5.3ä¹‹å‰åšçš„ä¼˜åŒ–;OPcache.dups_fix=0 #ä»…ä½œä¸ºé’ˆå¯¹ â€œä¸å¯é‡å®šä¹‰ç±»â€é”™è¯¯çš„ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚;OPcache.blacklist_filename=&quot;&quot; #é»‘åå•æ–‡ä»¶ä¸ºæ–‡æœ¬æ–‡ä»¶ï¼ŒåŒ…å«äº†ä¸è¿›è¡Œé¢„ç¼–è¯‘ä¼˜åŒ–çš„æ–‡ä»¶å;OPcache.max_file_size=0 #ä»¥å­—èŠ‚ä¸ºå•ä½çš„ç¼“å­˜çš„æ–‡ä»¶å¤§å°ä¸Šé™;OPcache.consistency_checks=0 #å¦‚æœæ˜¯é 0 å€¼ï¼ŒOPcache å°†ä¼šæ¯éš” N æ¬¡è¯·æ±‚æ£€æŸ¥ç¼“å­˜æ ¡éªŒå’ŒOPcache.force_restart_timeout=180 #å¦‚æœç¼“å­˜å¤„äºéæ¿€æ´»çŠ¶æ€ï¼Œç­‰å¾…å¤šå°‘ç§’ä¹‹åè®¡åˆ’é‡å¯ã€‚;OPcache.preferred_memory_model=&quot;&quot; #OPcache é¦–é€‰çš„å†…å­˜æ¨¡å—ã€‚å¯é€‰å€¼åŒ…æ‹¬ï¼š mmapï¼Œshm, posix ä»¥åŠ win32ã€‚;OPcache.protect_memory=0 #ä¿æŠ¤å…±äº«å†…å­˜ï¼Œä»¥é¿å…æ‰§è¡Œè„šæœ¬æ—¶å‘ç”Ÿéé¢„æœŸçš„å†™å…¥ã€‚ ä»…ç”¨äºå†…éƒ¨è°ƒè¯•ã€‚;OPcache.mmap_base=null #åœ¨Windows å¹³å°ä¸Šå…±äº«å†…å­˜æ®µçš„åŸºåœ°å€ ç›‘æµ‹OPcache å¯è§†åŒ–æ˜¾ç¤ºï¼šhttps://github.com/PeeHaa/OpCacheGUI **ç®€æ˜“çš„æ˜¾ç¤ºç¼“å­˜ä¿¡æ¯(PHP7+)**ï¼šhttps://github.com/rlerdorf/opcache-status ç›¸å…³PHPçš„APIä½¿ç”¨12345opcache_is_script_cached(string $filename):bool æ˜¯å¦ç¼“å­˜opcache_get_configuration(): array è·å–ç¼“å­˜çš„é…ç½®ä¿¡æ¯opcache_invalidate(string $script , boolean $force = false):boolean åºŸé™¤è„šæœ¬ç¼“å­˜opcache_reset():boolean é‡ç½®å­—èŠ‚ç ç¼“å­˜çš„å†…å®¹ å‚è€ƒ Understanding OPCode OPcacheè¿è¡Œæ—¶é…ç½® PHP Opcacheå·¥ä½œåŸç† PHPå†…æ ¸æ¢ç´¢ï¼šæ“ä½œç OpCode OPcacheå®‰è£…é…ç½®åŠé“¾æ¥ç”Ÿæ•ˆé…ç½® OPcache å‡½æ•° Opcodeæ˜¯å•¥ä»¥åŠå¦‚ä½•ä½¿ç”¨å¥½Opcache","tags":[{"name":"PHP","slug":"PHP","permalink":"http://airshu.github.io/tags/PHP/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"PHP","slug":"ç¨‹åºè¯­è¨€/PHP","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/PHP/"}]},{"title":"C++å­¦ä¹ ç¬”è®°","date":"2022-03-08T02:25:29.729Z","path":"wiki/ç¨‹åºè¯­è¨€/C++/C++å­¦ä¹ ç¬”è®°/","text":"å‡½æ•°é‡è½½ï¼ˆFunction Overloadingï¼‰å®šä¹‰ï¼šå‡½æ•°åç›¸åŒï¼Œå‡½æ•°çš„å‚æ•°åˆ—è¡¨åŒ…æ‹¬å‚æ•°çš„ç±»å‹ã€å‚æ•°çš„ä¸ªæ•°å’Œå‚æ•°çš„é¡ºåºï¼Œåªè¦æœ‰ä¸€ä¸ªä¸åŒå°±å«åšå‚æ•°åˆ—è¡¨ä¸åŒã€‚ 12345// è§£æXMLå­—ç¬¦ä¸²çš„å‡½æ•°æ—ï¼Œæ”¯æŒintã€char *å’Œdoubleä¸‰ç§ç±»å‹ã€‚// è¿”å›å€¼ï¼š0-æˆåŠŸï¼Œ-1-å¤±è´¥ã€‚int GetXMLBuffer(const char *in_XMLBuffer,const char *in_FieldName,int *out_Value);int GetXMLBuffer(const char *in_XMLBuffer,const char *in_FieldName,char *out_Value);int GetXMLBuffer(const char *in_XMLBuffer,const char *in_FieldName,double *out_Value); C++ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™ä¼šæ ¹æ®å‚æ•°åˆ—è¡¨çš„ç±»å‹å¯¹å‡½æ•°è¿›è¡Œé‡å‘½åï¼Œæ¯”å¦‚ï¼š 1int GetXMLBuffer_char_char_int(const char *in_XMLBuffer,const char *in_FieldName,int *out_Value); ç»“æ„ä½“æ–°ç‰¹å¾åœ¨C++ä¸­ï¼Œç»“æ„ä½“çš„æˆå‘˜å¯ä»¥æœ‰å‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930#include &lt;stdio.h&gt;#include &lt;string.h&gt;struct st_girl &#123; char name[50]; // å§“å int age; // å¹´é¾„ int height; // èº«é«˜ï¼Œå•ä½ï¼šå˜ç±³cm char sc[30]; // èº«æï¼Œç«è¾£ï¼›æ™®é€šï¼›é£æœºåœºã€‚ char yz[30]; // é¢œå€¼ï¼Œæ¼‚äº®ï¼›ä¸€èˆ¬ï¼›æ­ªç“œè£‚æ£ã€‚ int show(); // å£°æ˜ç»“æ„ä½“æˆå‘˜å‡½æ•°showï¼Œç”¨äºæ˜¾ç¤ºå…¶å®ƒæˆå‘˜å˜é‡çš„å€¼ã€‚&#125;;int main() &#123; st_girl stgirl; // structå…³é”®å®šå¯ä»¥ä¸ä¹¦å†™ memset(&amp;stgirl, 0, sizeof(stgirl)); strcpy(stgirl.name, &quot;è¥¿æ–½&quot;); stgirl.age = 22; stgirl.height = 168; strcpy(stgirl.sc, &quot;ç«è¾£&quot;); strcpy(stgirl.yz, &quot;æ¼‚äº®&quot;); stgirl.show(); // è°ƒç”¨ç»“æ„ä½“çš„æˆå‘˜å‡½æ•°&#125;int st_girl::show() // ç»“æ„ä½“st_girlæˆå‘˜å‡½æ•°çš„å®šä¹‰&#123; printf(&quot;name=%s,age=%d,height=%d,sc=%s,yz=%s\\n&quot;, name, age, height, sc, yz);&#125; ç±»è¯¦è§£æ„é€ å‡½æ•° æ„é€ å‡½æ•°å¿…é¡»æ˜¯ public å±æ€§ã€‚ æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œå› ä¸ºæ²¡æœ‰å˜é‡æ¥æ¥æ”¶è¿”å›å€¼ï¼Œå³ä½¿æœ‰ä¹Ÿæ¯«æ— ç”¨å¤„ï¼Œä¸ç®¡æ˜¯å£°æ˜è¿˜æ˜¯å®šä¹‰ï¼Œå‡½æ•°åå‰é¢éƒ½ä¸èƒ½å‡ºç°è¿”å›å€¼ç±»å‹ï¼Œå³ä½¿æ˜¯ void ä¹Ÿä¸å…è®¸ã€‚ æ„é€ å‡½æ•°å¯ä»¥æœ‰å‚æ•°ï¼Œå…è®¸é‡è½½ã€‚ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªé‡è½½çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºå¯¹è±¡æ—¶æ ¹æ®ä¼ é€’çš„å‚æ•°æ¥åˆ¤æ–­è°ƒç”¨å“ªä¸€ä¸ªæ„é€ å‡½æ•°ã€‚ æ„é€ å‡½æ•°åœ¨å®é™…å¼€å‘ä¸­ä¼šå¤§é‡ä½¿ç”¨ï¼Œå®ƒå¾€å¾€ç”¨æ¥åšä¸€äº›åˆå§‹åŒ–å·¥ä½œï¼Œå¯¹æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ç­‰ï¼Œæ³¨æ„ï¼Œä¸èƒ½ç”¨memsetå¯¹æ•´ä¸ªç±»è¿›è¡Œåˆå§‹åŒ–ã€‚ ææ„å‡½æ•° ææ„å‡½æ•°å¿…é¡»æ˜¯ public å±æ€§çš„ã€‚ ææ„å‡½æ•°æ²¡æœ‰å‚æ•°ã€‚ ææ„å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œå› ä¸ºæ²¡æœ‰å˜é‡æ¥æ¥æ”¶è¿”å›å€¼ï¼Œå³ä½¿æœ‰ä¹Ÿæ¯«æ— ç”¨å¤„ï¼Œä¸ç®¡æ˜¯å£°æ˜è¿˜æ˜¯å®šä¹‰ï¼Œå‡½æ•°åå‰é¢éƒ½ä¸èƒ½å‡ºç°è¿”å›å€¼ç±»å‹ï¼Œå³ä½¿æ˜¯ void ä¹Ÿä¸å…è®¸ã€‚ ææ„å‡½æ•°ä¸å…è®¸é‡è½½çš„ã€‚ä¸€ä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªææ„å‡½æ•°ã€‚ 1234567891011121314151617181920212223242526272829303132//å¤´æ–‡ä»¶class CFile&#123;private: FILE *m_fp; // æ–‡ä»¶æŒ‡é’ˆ bool m_bEnBuffer; // æ˜¯å¦å¯ç”¨ç¼“å†²åŒºï¼Œtrue-å¯ç”¨ï¼›false-ä¸å¯ç”¨ public: CFile(); // ç±»çš„æ„é€ å‡½æ•° CFile(bool bEnBuffer); // ç±»çš„æ„é€ å‡½æ•° ~CFile(); // ç±»çš„ææ„å‡½æ•° void EnBuffer(bool bEnBuffer=true); // å¯ã€ç¦ç”¨ç¼“å†²åŒº // æ‰“å¼€æ–‡ä»¶ï¼Œå‚æ•°ä¸fopenç›¸åŒï¼Œæ‰“å¼€æˆåŠŸtrueï¼Œå¤±è´¥è¿”å›false bool Open(const char *filename,const char *openmode); // è°ƒç”¨fprintfå‘æ–‡ä»¶å†™å…¥æ•°æ® void Fprintf(const char *fmt, ... ); // è°ƒç”¨fgetsä»æ–‡ä»¶ä¸­è¯»å–ä¸€è¡Œ bool Fgets(char *strBuffer,const int ReadSize); // å…³é—­æ–‡ä»¶æŒ‡é’ˆ void Close();&#125;; 12345678910111213141516171819//å®ç°æ–‡ä»¶CFile::CFile() // ç±»çš„æ„é€ å‡½æ•°&#123; m_fp=0; m_bEnBuffer=true;&#125; CFile::CFile(bool bEnBuffer) // ç±»çš„æ„é€ å‡½æ•°&#123; m_fp=0; m_bEnBuffer=bEnBuffer; &#125;CFile::~CFile() // ç±»çš„ææ„å‡½æ•°&#123; Close(); // è°ƒç”¨Closeé‡Šæ”¾èµ„æº&#125; C++å¼•ç”¨å¼•ç”¨å°±æ˜¯å˜é‡çš„åˆ«åï¼Œå¯¹å¼•ç”¨çš„æ“ä½œä¸å¯¹å˜é‡ç›´æ¥æ“ä½œå®Œå…¨ä¸€æ ·ã€‚ 12345//æ•°æ®ç±»å‹ &amp;å¼•ç”¨å=ç›®æ ‡å˜é‡åï¼›int ii;int &amp;rii=ii; // å®šä¹‰å¼•ç”¨riiï¼Œå®ƒæ˜¯å˜é‡iiçš„å¼•ç”¨ï¼Œå³åˆ«åã€‚rii=1; ç­‰ä»·äº ii=1; &amp;åœ¨æ­¤ä¸æ˜¯æ±‚åœ°å€è¿ç®—ï¼Œè€Œæ˜¯å£°æ˜å¼•ç”¨ã€‚ æ•°æ®ç±»å‹å¯ä»¥æ˜¯Cè¯­è¨€çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»“æ„ä½“å’Œç±»ç­‰æ„é€ ç±»å‹ã€‚ å¼•ç”¨åœ¨å£°æ˜çš„æ—¶å€™å¿…é¡»å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼ˆæŒ‡å‘ç›®æ ‡å˜é‡åï¼‰ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚ å¼•ç”¨åˆå§‹åŒ–ä¹‹åï¼Œä¸èƒ½å†ç”¨ä½œå…¶ä»–å˜é‡åçš„åˆ«åã€‚ å¼•ç”¨å£°æ˜åï¼Œç›¸å½“äºç›®æ ‡å˜é‡åæœ‰ä¸¤ä¸ªåç§°ã€‚ ä¸èƒ½å»ºç«‹æ•°ç»„çš„å¼•ç”¨ï¼Œå› ä¸ºæ•°ç»„æ˜¯å¤šä¸ªå˜é‡çš„é›†åˆã€‚ å¼•ç”¨å¯ä»¥ç”¨constä¿®é¥°ï¼Œè¡¨ç¤ºåªè¯»ï¼Œç”¨è¿™ç§æ–¹å¼å£°æ˜çš„å¼•ç”¨ï¼Œä¸èƒ½é€šè¿‡å¼•ç”¨åå¯¹ç›®æ ‡å˜é‡çš„å€¼è¿›è¡Œä¿®æ”¹ã€‚ è¿ç®—ç¬¦é‡è½½123456789101112131415161718192021222324252627282930#include &lt;stdio.h&gt;#include &lt;string.h&gt; class CGirl // å®šä¹‰ç±»&#123;public: char m_name[50]; // å§“å char m_sc[30]; // èº«æï¼Œç«è¾£ï¼›æ™®é€šï¼›é£æœºåœºã€‚ bool operator==(const CGirl &amp;Girl); // é‡è½½==è¿ç®—ç¬¦&#125;; int main()&#123; CGirl Girl1,Girl2; strcpy(Girl1.m_name,&quot;è¥¿æ–½&quot;); strcpy(Girl2.m_name,&quot;ä¸œæ–½&quot;); if (Girl1 == Girl2) printf(&quot;Girl1å’ŒGirl2æ˜¯åŒä¸€ä¸ªäººã€‚\\n&quot;); else printf(&quot;Girl1å’ŒGirl2ä¸æ˜¯åŒä¸€ä¸ªäººã€‚\\n&quot;);&#125; bool CGirl::operator==(const CGirl &amp;Girl) // é‡è½½==è¿ç®—ç¬¦&#123; // å¦‚æœä¸¤ä¸ªç±»çš„å§“åç›¸åŒï¼Œå°±ç›¸ç­‰ if (strcmp(m_name,Girl.m_name)== 0) return true; return false;&#125; stringç±»123456789101112131415#include &lt;string&gt;//stringæ˜¯ä¸€ä¸ªæ¨¡æ¿ç±»ï¼Œä½äºstdå‘½åç©ºé—´å†…ï¼Œä¸ºæ–¹ä¾¿ä½¿ç”¨è¿˜éœ€è¦åœ¨ç¨‹åºä¸­å¢åŠ ï¼šusing namespace std; // æŒ‡å®šç¼ºçœçš„ä½¿åç©ºé—´ã€‚string str; // åˆ›å»ºstringå¯¹è±¡ã€‚//å¦‚æœä¸æŒ‡å®šå‘½åç©ºé—´std::string str;const char *c_str();//c_strå‡½æ•°è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²çš„åœ°å€int size(); // è¿”å›å½“å‰å­—ç¬¦ä¸²çš„å¤§å°ã€‚int length(); // è¿”å›å½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ³¨æ„å’Œsizeçš„åŒºåˆ«ã€‚void clear(); // æ¸…ç©ºå­—ç¬¦ä¸²ã€‚ vectorç±»12345678910111213141516171819202122232425262728iterator begin()ï¼šè¿”å›å®¹å™¨å¤´çš„æŒ‡é’ˆï¼ŒæŒ‡å‘å®¹å™¨ç¬¬ä¸€ä¸ªå…ƒç´ çš„ä½ç½®ã€‚iterator end()ï¼šè¿”å›å®¹å™¨å°¾çš„æŒ‡é’ˆï¼ŒæŒ‡å‘å®¹å™¨æœ€åä¸€ä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªä½ç½®ã€‚void push_back(const T&amp; x)ï¼šå‘å®¹å™¨çš„å°¾éƒ¨å¢åŠ ä¸€ä¸ªå…ƒç´ xã€‚iterator insert(iterator it,const T&amp; x)ï¼šå‘å®¹å™¨ä¸­æŒ‡å®šä½ç½®ï¼ˆitï¼‰å‰æ’å…¥ä¸€ä¸ªå…ƒç´ xã€‚iterator erase(iterator it)ï¼šåˆ é™¤å®¹å™¨ä¸­æŒ‡å®šä½ç½®ï¼ˆitï¼‰çš„å…ƒç´ ã€‚bool empty()ï¼šåˆ¤æ–­å®¹å™¨æ˜¯å¦ä¸ºç©ºã€‚int size()ï¼šè¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°ã€‚sort(begin,end,cmp);/**sortå‡½æ•°åŒ…å«åœ¨å¤´æ–‡ä»¶ä¸º#include &lt;algorithm&gt;çš„c++æ ‡å‡†åº“ä¸­ï¼Œè°ƒç”¨æ’åºæ–¹æ³•ä¸å¿…çŸ¥é“å…¶å†…éƒ¨æ˜¯å¦‚ä½•å®ç°çš„ï¼Œåªè¦å‡ºç°æˆ‘ä»¬æƒ³è¦çš„ç»“æœå°±è¡Œã€‚sortå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼šï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªæ˜¯è¦æ’åºçš„æ•°ç»„çš„èµ·å§‹åœ°å€ã€‚ï¼ˆ2ï¼‰ç¬¬äºŒä¸ªæ˜¯ç»“æŸçš„åœ°å€ã€‚ï¼ˆ3ï¼‰ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ’åºçš„æ–¹æ³•ï¼Œå¯ä»¥æ˜¯ä»å¤§åˆ°å°ä¹Ÿå¯æ˜¯ä»å°åˆ°å¤§ï¼Œè¿˜å¯ä»¥ä¸å†™ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œæ­¤æ—¶ç¼ºçœçš„æ’åºæ–¹æ³•æ˜¯ä»å°åˆ°å¤§æ’åºã€‚å¦‚æœvectorå®¹å™¨ä¸­å…ƒç´ çš„æ•°æ®ç±»å‹ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œsortå‡½æ•°å¿…é¡»æŒ‡å®šæ’åºæ–¹æ³•å‡½æ•°ã€‚**/ C++åŠ¨æ€å†…å­˜123456789101112datatype *pointer = new datatype; // å…¶å®ƒä»£ç delete pointer;//datatypeå¯ä»¥æ˜¯Cè¯­è¨€çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»“æ„ä½“ï¼Œè¿˜å¯ä»¥æ˜¯ç±»ã€‚//pointeræ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘newè¿”å›çš„åœ°å€ã€‚int *pi= new int; // åŠ¨æ€åˆ†é…ä¸€ä¸ªæ•´æ•°å¤§å°çš„å†…å­˜(*pi)=10;delete pi; // é‡Šæ”¾piæŒ‡å‘çš„å†…å­˜ ç»§æ‰¿å’Œæ´¾ç”Ÿ123456789101112class &lt;æ´¾ç”Ÿç±»å&gt;:&lt;ç»§æ‰¿æ–¹å¼1&gt;&lt;åŸºç±»å1&gt;,&lt;ç»§æ‰¿æ–¹å¼2&gt;&lt;åŸºç±»å2&gt;,â€¦&#123; // æ´¾ç”Ÿç±»ç±»ä½“&#125;;class CGirl // å®šä¹‰è¶…å¥³ç±»&#123;&#125;class CKCon:public CGirl // å®šä¹‰ç‹å¦ƒç±»ï¼Œä»è¶…å¥³ç±»ç»§æ‰¿&#123;&#125; å½“ä¸€ä¸ªç±»æ´¾ç”Ÿè‡ªåŸºç±»ï¼Œè¯¥åŸºç±»å¯ä»¥è¢«ç»§æ‰¿ä¸º publicã€protected æˆ– private å‡ ç§æ–¹å¼ï¼Œå½“ä½¿ç”¨ä¸åŒç±»å‹çš„ç»§æ‰¿æ—¶ï¼Œéµå¾ªä»¥ä¸‹å‡ ä¸ªè§„åˆ™ï¼š å…¬æœ‰ç»§æ‰¿ï¼ˆpublicï¼‰ï¼šå½“ç±»æ´¾ç”Ÿä»¥publicæ–¹å¼ç»§æ‰¿æ—¶ï¼ŒåŸºç±»çš„å…¬æœ‰æˆå‘˜ä¹Ÿæ˜¯æ´¾ç”Ÿç±»çš„å…¬æœ‰æˆå‘˜ï¼ŒåŸºç±»çš„ä¿æŠ¤æˆå‘˜ä¹Ÿæ˜¯æ´¾ç”Ÿç±»çš„ä¿æŠ¤æˆå‘˜ï¼ŒåŸºç±»çš„ç§æœ‰æˆå‘˜ä¸èƒ½ç›´æ¥è¢«æ´¾ç”Ÿç±»è®¿é—®ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡è°ƒç”¨åŸºç±»çš„å…¬æœ‰å’Œä¿æŠ¤æˆå‘˜æ¥è®¿é—®ã€‚ ä¿æŠ¤ç»§æ‰¿ï¼ˆprotectedï¼‰ï¼š å½“ç±»æ´¾ç”Ÿä»¥protectedæ–¹å¼ç»§æ‰¿æ—¶ï¼ŒåŸºç±»çš„å…¬æœ‰å’Œä¿æŠ¤æˆå‘˜å°†æˆä¸ºæ´¾ç”Ÿç±»çš„ä¿æŠ¤æˆå‘˜ã€‚ ç§æœ‰ç»§æ‰¿ï¼ˆprivateï¼‰ï¼šå½“ç±»æ´¾ç”Ÿä»¥privateæ–¹å¼ç»§æ‰¿æ—¶ï¼ŒåŸºç±»çš„å…¬æœ‰å’Œä¿æŠ¤æˆå‘˜å°†æˆä¸ºæ´¾ç”Ÿç±»çš„ç§æœ‰æˆå‘˜ã€‚ å¤šæ€12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#include &lt;stdio.h&gt;#include &lt;string.h&gt;class CGirl // å®šä¹‰è¶…å¥³ç±»&#123;public: char m_name[50]; // å§“å int m_age; // å¹´é¾„ int m_height; // èº«é«˜ï¼Œå•ä½ï¼šå˜ç±³cm char m_sc[30]; // èº«æï¼Œç«è¾£ï¼›æ™®é€šï¼›é£æœºåœºã€‚ char m_yz[30]; // é¢œå€¼ï¼Œæ¼‚äº®ï¼›ä¸€èˆ¬ï¼›æ­ªç“œè£‚æ£ã€‚ int Show() // æ˜¾ç¤ºè¶…å¥³åŸºæœ¬ä¿¡æ¯çš„æˆå‘˜å‡½æ•°ä½“ &#123; printf(&quot;CGirl å§“åï¼š%sï¼Œå¹´é¾„ï¼š%dï¼Œèº«é«˜ï¼š%dï¼Œèº«æï¼š%sï¼Œé¢œå€¼ï¼š%s\\n&quot;, m_name, m_age, m_height, m_sc, m_yz); &#125;&#125;;class CKCon : public CGirl // å®šä¹‰ç‹å¦ƒç±»ï¼Œä»è¶…å¥³ç±»ç»§æ‰¿&#123;public: char m_ch[50]; // ç§°å· char m_palace[50]; // å±…ä½çš„å®«æ®¿ int m_sal; // å¥‰ç¦„ int Show() // æ˜¾ç¤ºç‹å¦ƒçš„ç§°å·ã€å®«æ®¿å’Œå¥‰ç¦„ &#123; printf(&quot;CKCon å§“åï¼š%sï¼Œç§°å·ï¼š%sï¼Œæ –ï¼š%sï¼Œå¥‰ç¦„ï¼š%dä¸¤é“¶å­ã€‚\\n&quot;, m_name, m_ch, m_palace, m_sal); &#125;&#125;;int main() &#123; CKCon KCon; strcpy(KCon.m_name, &quot;æ¨ç‰ç¯&quot;); KCon.m_age = 28; KCon.m_height = 168; strcpy(KCon.m_sc, &quot;ç«è¾£&quot;); strcpy(KCon.m_yz, &quot;æ¼‚äº®&quot;); strcpy(KCon.m_ch, &quot;æ¨è´µå¦ƒ&quot;); strcpy(KCon.m_palace, &quot;åæ¸…å®«&quot;); KCon.m_sal = 10000; CGirl *pGirl; // åŸºç±»çš„æŒ‡é’ˆ CKCon *pCon; // æ´¾ç”Ÿç±»çš„æŒ‡é’ˆ pGirl = pCon = &amp;KCon; // éƒ½æŒ‡å‘æ´¾ç”Ÿç±» pGirl-&gt;Show(); // å°†è°ƒç”¨çš„æ˜¯åŸºç±»çš„Showæ–¹æ³• pCon-&gt;Show(); // å°†è°ƒç”¨çš„æ˜¯æ´¾ç”Ÿç±»çš„Showæ–¹æ³•&#125; åŠ¨æ€å¤šæ€ åŠ¨æ€å¤šæ€æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ ¹æ®åŸºç±»çš„å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰æŒ‡å‘çš„å¯¹è±¡æ¥ç¡®å®šè‡ªå·±å…·ä½“è¯¥è°ƒç”¨å“ªä¸€ä¸ªç±»çš„è™šå‡½æ•°ã€‚åœ¨CGirlç±»ä¸­ï¼ŒShowæ–¹æ³•çš„å£°æ˜å‰æ”¾ç½®å…³é”®å­— virtualï¼Œåˆ™pGirl-&gt;Show()ä¼šæ‰“å°å‡ºCKConä¸­çš„showæ–¹æ³•å†…å®¹ã€‚ è™šå‡½æ•° è™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­ä½¿ç”¨å…³é”®å­— virtual å£°æ˜çš„å‡½æ•°ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰è™šå‡½æ•°ã€‚æˆ‘ä»¬æƒ³è¦çš„æ˜¯åœ¨ç¨‹åºä¸­å¯ä»¥æ ¹æ®æ‰€è°ƒç”¨çš„å¯¹è±¡ç±»å‹æ¥é€‰æ‹©è°ƒç”¨çš„å‡½æ•°ï¼Œè¿™ç§æ“ä½œè¢«ç§°ä¸ºåŠ¨æ€é“¾æ¥ï¼Œæˆ–åæœŸç»‘å®šã€‚ çº¯è™šå‡½æ•° åªå£°æ˜ï¼Œå…·ä½“å®ç°åœ¨æ´¾ç”Ÿç±»ä¸­å®ç° 1234567891011class CGirl // å®šä¹‰è¶…å¥³ç±»&#123;public: char m_name[50]; // å§“å int m_age; // å¹´é¾„ int m_height; // èº«é«˜ï¼Œå•ä½ï¼šå˜ç±³cm char m_sc[30]; // èº«æï¼Œç«è¾£ï¼›æ™®é€šï¼›é£æœºåœºã€‚ char m_yz[30]; // é¢œå€¼ï¼Œæ¼‚äº®ï¼›ä¸€èˆ¬ï¼›æ­ªç“œè£‚æ£ã€‚ virtual int Show()=0; // ç”³æ˜ä¸€ä¸ªçº¯è™šå‡½æ•°ã€‚&#125;;","tags":[{"name":"C++","slug":"C","permalink":"http://airshu.github.io/tags/C/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"C++","slug":"ç¨‹åºè¯­è¨€/C","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C/"}]},{"title":"Cè¯­è¨€å­¦ä¹ ç¬”è®°","date":"2022-03-08T02:25:29.729Z","path":"wiki/ç¨‹åºè¯­è¨€/C++/Cè¯­è¨€å­¦ä¹ ç¬”è®°/","text":"Hello World1234567891011121314//æ–‡ä»¶åhello.c//é¢„å¤„ç†æŒ‡ä»¤#include &lt;stdio.h&gt;//å…¥å£å‡½æ•°int main() &#123; printf(&quot;hello world&quot;); return 0;&#125;gcc hello.c./a.out //è¾“å‡ºhello world Cè¯­è¨€æ•°æ®ç±»å‹ å­—ç¬¦å‹ï¼ˆcharï¼‰ï¼šæè¿°å•ä¸ªå­—ç¬¦ï¼ˆä¸€ä¸ªå­—èŠ‚ï¼‰ï¼Œç”¨åŠè§’çš„å•å¼•å·åŒ…å«èµ·æ¥ï¼Œå¦‚â€™aâ€™ã€â€™Aâ€™ã€â€™1â€™ã€â€™$â€™ç­‰ï¼Œé”®ç›˜èƒ½è¾“å…¥çš„è‹±æ–‡å’ŒåŠè§’çš„ç¬¦å·éƒ½æ˜¯å­—ç¬¦ã€‚ä¸­æ–‡çš„æ±‰å­—å’Œæ ‡ç‚¹ç¬¦å·æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼ˆGBKç¼–ç ï¼‰ï¼Œä¸èƒ½ç®—ä¸€ä¸ªå­—ç¬¦ã€‚ æ•´å‹ï¼ˆintï¼‰ï¼šæè¿°æ•´æ•°ã€‚ æµ®ç‚¹å‹ï¼ˆfloatï¼‰ï¼šæè¿°å®æ•°ã€‚ å­—ç¬¦ä¸²ï¼šæè¿°å¤šä¸ªå­—ç¬¦ï¼Œç”¨åŠè§’çš„åŒå¼•å·åŒ…å«èµ·æ¥ï¼Œå¯ä»¥æ˜¯è‹±æ–‡ã€æ•°å­—ã€ä¸­æ–‡ã€æ ‡ç‚¹ç¬¦å·ï¼ŒåŠè§’å…¨è§’çš„éƒ½å¯ä»¥ã€‚ ç»“æ„ä½“ï¼ˆstructï¼‰ï¼šç”±åŸºæœ¬ç±»å‹é€šè¿‡ä¸€å®šçš„æ„é€ æ–¹æ³•æ„é€ å‡ºæ¥çš„ç±»å‹ï¼ŒåŒ…æ‹¬æ•°ç»„å’Œç»“æ„ä½“ã€‚ æŒ‡é’ˆç±»å‹ï¼šæŒ‡é’ˆå¯ä»¥å­˜æ”¾å†…å­˜å˜é‡å’Œå¸¸é‡åœ°å€ã€‚ å…¶ä»–ç±»å‹ï¼šå¦‚å¤æ•°ç±»å‹ï¼ˆ_Complexï¼‰ã€è™šæ•°ç±»å‹ï¼ˆ_Imaginaryï¼‰ã€å¸ƒå°”å‹ï¼ˆ_boolï¼‰ç­‰ã€‚ å˜é‡å˜é‡çš„å‘½åå˜é‡åå±äºæ ‡è¯†ç¬¦ï¼Œéœ€è¦ç¬¦åˆæ ‡è¯†ç¬¦çš„å‘½åè§„èŒƒï¼Œå…·ä½“å¦‚ä¸‹ï¼š å˜é‡åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦å¿…é¡»æ˜¯å­—æ¯æˆ–ä¸‹åˆ’çº¿ï¼Œä¸èƒ½æ˜¯æ•°å­—å’Œå…¶å®ƒå­—ç¬¦ã€‚ å˜é‡åä¸­çš„å­—æ¯æ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚æ¯”å¦‚aå’ŒAæ˜¯ä¸åŒçš„å˜é‡åï¼Œnumå’ŒNumä¹Ÿæ˜¯ä¸åŒçš„å˜é‡åã€‚ å˜é‡åç»å¯¹ä¸å¯ä»¥æ˜¯Cè¯­è¨€çš„å…³é”®å­—ã€‚ å˜é‡çš„å®šä¹‰å’Œåˆå§‹åŒ–å˜é‡åœ¨å®šä¹‰åï¼Œæ“ä½œç³»ç»Ÿä¸ºå®ƒåˆ†é…äº†ä¸€å—å†…å­˜ï¼Œä½†å¹¶ä¸ä¼šæŠŠè¿™å—å†…å­˜æ‰“æ‰«å¹²é™ï¼Œä¹Ÿå°±æ˜¯è¯´å†…å­˜ä¸­å¯èƒ½æœ‰åƒåœ¾æ•°æ®ï¼Œå»ºè®®åœ¨ä½¿ç”¨ä¹‹é—´å¯¹å…¶åˆå§‹åŒ–ï¼ˆæ‰“æ‰«å¹²é™ï¼‰ã€‚ 1234567891011121314151617181920212223242526int ii; // å®šä¹‰æ•´æ•°å‹å˜é‡ï¼Œç”¨äºå­˜æ”¾æ•´æ•°ã€‚char cc; // å®šä¹‰å­—ç¬¦å‹å˜é‡ï¼Œç”¨äºå­˜æ”¾å­—ç¬¦ã€‚double money; // å®šä¹‰æµ®ç‚¹å‹å˜é‡ï¼Œç”¨äºå­˜æ”¾æµ®ç‚¹æ•°ã€‚char name[21]; // å®šä¹‰ä¸€ä¸ªå¯ä»¥å­˜æ”¾20å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚//å¯¹æ•´æ•°å‹ã€å­—ç¬¦å‹ã€æµ®ç‚¹å‹å˜é‡æ¥è¯´ï¼Œåˆå§‹åŒ–å°±æ˜¯ç»™å®ƒä»¬èµ‹0å€¼ã€‚int ii=0; // å®šä¹‰æ•´æ•°å‹å˜é‡å¹¶åˆå§‹åŒ–char cc=0; // å®šä¹‰å­—ç¬¦å‹å˜é‡å¹¶åˆå§‹åŒ–double money=0; // å®šä¹‰æµ®ç‚¹å‹å˜é‡å¹¶åˆå§‹åŒ– //ä¹Ÿå¯ä»¥å…ˆå®šä¹‰ï¼Œç„¶åå†åˆå§‹åŒ–ã€‚int ii; // å®šä¹‰æ•´æ•°å‹å˜é‡char cc; // å®šä¹‰å­—ç¬¦å‹å˜é‡double money; // å®šä¹‰æµ®ç‚¹å‹å˜é‡ii=0; // åˆå§‹åŒ–iiä¸º0cc=0; // åˆå§‹åŒ–ccä¸º0money=0; // åˆå§‹åŒ–moneyä¸º0//å¯¹å­—ç¬¦ä¸²å˜é‡æ¥è¯´ï¼Œåˆå§‹åŒ–å°±æ˜¯æŠŠå†…å®¹æ¸…ç©ºï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯èµ‹0å€¼ã€‚char name[21]; // å®šä¹‰ä¸€ä¸ªå¯ä»¥å­˜æ”¾20å­—ç¬¦çš„å­—ç¬¦ä¸²memset(name,0,sizeof(name)); // æ¸…ç©ºå­—ç¬¦ä¸²nameä¸­çš„å†…å®¹//å£°æ˜å¸¸é‡const double pi = 3.1415926; Cè¯­è¨€ä¸­çš„å…³é”®å­—1234567891011121314151617181920212223242526272829303132autoï¼šå£°æ˜è‡ªåŠ¨å˜é‡breakï¼šè·³å‡ºå½“å‰å¾ªç¯caseï¼šå¼€å…³è¯­å¥åˆ†æ”¯charï¼šå£°æ˜å­—ç¬¦å‹å˜é‡æˆ–å‡½æ•°è¿”å›å€¼ç±»å‹constï¼šå£°æ˜åªè¯»å˜é‡continueï¼šç»“æŸå½“å‰å¾ªç¯ï¼Œå¼€å§‹ä¸‹ä¸€è½®å¾ªç¯defaultï¼šå¼€å…³è¯­å¥ä¸­çš„â€œé»˜è®¤â€åˆ†æ”¯doï¼šå¾ªç¯è¯­å¥çš„å¾ªç¯ä½“doubleï¼šå£°æ˜åŒç²¾åº¦æµ®ç‚¹å‹å˜é‡æˆ–å‡½æ•°è¿”å›å€¼ç±»å‹elseï¼šæ¡ä»¶è¯­å¥å¦å®šåˆ†æ”¯ï¼ˆä¸ifè¿ç”¨ï¼‰enumï¼šå£°æ˜æšä¸¾ç±»å‹externï¼šå£°æ˜å˜é‡æˆ–å‡½æ•°æ˜¯åœ¨å…¶å®ƒæ–‡ä»¶æˆ–æœ¬æ–‡ä»¶çš„å…¶ä»–ä½ç½®å®šä¹‰floatï¼šå£°æ˜æµ®ç‚¹å‹å˜é‡æˆ–å‡½æ•°è¿”å›å€¼ç±»å‹forï¼šä¸€ç§å¾ªç¯è¯­å¥gotoï¼šæ— æ¡ä»¶è·³è½¬è¯­å¥ifï¼šæ¡ä»¶è¯­å¥intï¼šå£°æ˜æ•´å‹å˜é‡æˆ–å‡½æ•°longï¼šå£°æ˜é•¿æ•´å‹å˜é‡æˆ–å‡½æ•°è¿”å›å€¼ç±»å‹registerï¼šå£°æ˜å¯„å­˜å™¨å˜é‡returnï¼šå­ç¨‹åºè¿”å›è¯­å¥ï¼ˆå¯ä»¥å¸¦å‚æ•°ï¼Œä¹Ÿå¯ä¸å¸¦å‚æ•°ï¼‰shortï¼šå£°æ˜çŸ­æ•´å‹å˜é‡æˆ–å‡½æ•°signedï¼šå£°æ˜æœ‰ç¬¦å·ç±»å‹å˜é‡æˆ–å‡½æ•°sizeofï¼šè®¡ç®—æ•°æ®ç±»å‹æˆ–å˜é‡é•¿åº¦ï¼ˆå³æ‰€å å­—èŠ‚æ•°ï¼‰staticï¼šå£°æ˜é™æ€å˜é‡structï¼šå£°æ˜ç»“æ„ä½“ç±»å‹switchï¼šç”¨äºå¼€å…³è¯­å¥typedefï¼šç”¨ä»¥ç»™æ•°æ®ç±»å‹å–åˆ«åunsignedï¼šå£°æ˜æ— ç¬¦å·ç±»å‹å˜é‡æˆ–å‡½æ•°unionï¼šå£°æ˜å…±ç”¨ä½“ç±»å‹voidï¼šå£°æ˜å‡½æ•°æ— è¿”å›å€¼æˆ–æ— å‚æ•°ï¼Œå£°æ˜æ— ç±»å‹æŒ‡é’ˆvolatileï¼šè¯´æ˜å˜é‡åœ¨ç¨‹åºæ‰§è¡Œä¸­å¯è¢«éšå«åœ°æ”¹å˜whileï¼šå¾ªç¯è¯­å¥çš„å¾ªç¯æ¡ä»¶ è¾“å…¥å’Œè¾“å‡º12345678910111213141516171819202122232425262728293031getcharï¼šè¾“å…¥å•ä¸ªå­—ç¬¦ï¼Œä¿å­˜åˆ°å­—ç¬¦å˜é‡ä¸­ã€‚getsï¼šè¾“å…¥ä¸€è¡Œæ•°æ®ï¼Œä¿å­˜åˆ°å­—ç¬¦ä¸²å˜é‡ä¸­ã€‚scanfï¼šæ ¼å¼åŒ–è¾“å…¥å‡½æ•°ï¼Œä¸€æ¬¡å¯ä»¥è¾“å…¥å¤šä¸ªæ•°æ®ï¼Œä¿å­˜åˆ°å¤šä¸ªå˜é‡ä¸­ã€‚putcharï¼šè¾“å‡ºå•ä¸ªå­—ç¬¦ã€‚putsï¼šè¾“å‡ºå­—ç¬¦ä¸²ã€‚printfï¼šæ ¼å¼åŒ–è¾“å‡ºå‡½æ•°ï¼Œå¯è¾“å‡ºå¸¸é‡ã€å˜é‡ç­‰ã€‚int age=18;char xb=&#x27;x&#x27;;double weight=62.5;char name[21];memset(name,0,sizeof(name));strcpy(name, &quot;è¥¿æ–½&quot;);printf(&quot;æˆ‘çš„å§“åæ˜¯ï¼š%sï¼Œå§“åˆ«ï¼š%cï¼Œå¹´é¾„ï¼š%då²ï¼Œä½“é‡%lfå…¬æ–¤ã€‚\\n&quot;,name,xb,age,weight);int age=0;char xb=0;double weight=0;char name[21];memset(name,0,sizeof(name));printf(&quot;è¯·è¾“å…¥æ‚¨çš„å§“åã€å§“åˆ«ï¼ˆx-ç”·ï¼›y-å¥³ï¼‰ï¼Œå¹´é¾„å’Œä½“é‡ï¼Œä¸­é—´ç”¨ç©ºæ ¼åˆ†éš”ï¼š&quot;);scanf(&quot;%s %c %d %lf&quot;,name,&amp;xb,&amp;age,&amp;weight); printf(&quot;æ‚¨çš„å§“åæ˜¯ï¼š%sï¼Œå§“åˆ«ï¼š%cï¼Œå¹´é¾„ï¼š%då²ï¼Œä½“é‡%lfå…¬æ–¤ã€‚\\n&quot;,name,xb,age,weight); è¿ç®—ç¬¦ ç®—æœ¯è¿ç®—ç¬¦ï¼› èµ‹å€¼è¿ç®—ç¬¦ï¼› sizeofè¿ç®—ç¬¦ï¼› å…³ç³»è¿ç®—ç¬¦ï¼› é€»è¾‘è¿ç®—ç¬¦ï¼› ä½è¿ç®—ç¬¦ã€‚ ç®—æœ¯è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° å®ä¾‹ + ä¸¤ä¸ªæ•°ç›¸åŠ  A+B å°†å¾—åˆ° 23 - ä¸€ä¸ªæ•°å‡å¦ä¸€ä¸ªæ•° A-B å°†å¾—åˆ° 13 * ä¸¤ä¸ªæ•°ç›¸ä¹˜ A*B å°†å¾—åˆ° 90 &#x2F; åˆ†å­é™¤ä»¥åˆ†æ¯ A&#x2F;B å°†å¾—åˆ° 3.6 % ä½™æ•°è¿ç®—ç¬¦ï¼Œæ•´é™¤åçš„ä½™æ•° B%A å°†å¾—åˆ° 3 ++ è‡ªå¢è¿ç®—ç¬¦ï¼Œæ•´æ•°å€¼å¢åŠ  1 A++ å°†å¾—åˆ° 19 â€“ è‡ªå‡è¿ç®—ç¬¦ï¼Œæ•´æ•°å€¼å‡å°‘ 1 Aâ€“ å°†å¾—åˆ° 17 èµ‹å€¼è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° å®ä¾‹ &#x3D; ç®€å•çš„èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°çš„å€¼èµ‹ç»™å·¦è¾¹æ“ä½œæ•° C &#x3D; A + B å°†æŠŠ A + B çš„å€¼èµ‹ç»™ C +&#x3D; åŠ ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°åŠ ä¸Šå·¦è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C +&#x3D; A ç›¸å½“äº C &#x3D; C + A -&#x3D; å‡ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå·¦è¾¹æ“ä½œæ•°å‡å»å³è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C -&#x3D; A ç›¸å½“äº C &#x3D; C - A *&#x3D; ä¹˜ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå³è¾¹æ“ä½œæ•°ä¹˜ä»¥å·¦è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C *&#x3D; A ç›¸å½“äº C &#x3D; C * A &#x2F;&#x3D; é™¤ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼ŒæŠŠå·¦è¾¹æ“ä½œæ•°é™¤ä»¥å³è¾¹æ“ä½œæ•°çš„ç»“æœèµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•° C &#x2F;&#x3D; A ç›¸å½“äº C &#x3D; C &#x2F; A %&#x3D; æ±‚ä½™æ•°ä¸”èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ±‚ä¸¤ä¸ªæ“ä½œæ•°çš„æ¨¡èµ‹å€¼ç»™å·¦è¾¹æ“ä½œæ•°ï¼Œæµ®ç‚¹æ•°ä¸é€‚ç”¨å–ä½™æ•°ã€‚ C %&#x3D; A ç›¸å½“äº C &#x3D; C % A sizeofè¿ç®—ç¬¦ç”¨æ¥è®¡ç®—å˜é‡ï¼ˆæˆ–æ•°æ®ç±»å‹ï¼‰åœ¨å½“å‰ç³»ç»Ÿä¸­å ç”¨å†…å­˜çš„å­—èŠ‚æ•°ã€‚sizeofä¸æ˜¯å‡½æ•°ï¼Œäº§ç”Ÿè¿™æ ·çš„ç–‘é—®æ˜¯å› ä¸ºsizeofçš„ä¹¦å†™ç¡®å®æœ‰ç‚¹åƒå‡½æ•°ï¼Œsizeofæœ‰ä¸¤ç§å†™æ³•ï¼š 1234567891011121314//ç”¨äºæ•°æ®ç±»å‹ï¼Œæ•°æ®ç±»å‹å¿…é¡»ç”¨æ‹¬å·æ‹¬ä½ã€‚sizeof(æ•°æ®ç±»å‹);printf(&quot;å­—ç¬¦å‹å˜é‡å ç”¨çš„å†…å­˜æ˜¯=%d\\n&quot;,sizeof(char)); // è¾“å‡ºï¼šå­—ç¬¦å‹å˜é‡å ç”¨çš„å†…å­˜æ˜¯=1printf(&quot;æ•´å‹å˜é‡å ç”¨çš„å†…å­˜æ˜¯=%d\\n&quot;,sizeof(int)); // è¾“å‡ºï¼šæ•´å‹å˜é‡å ç”¨çš„å†…å­˜æ˜¯=4//ç”¨äºå˜é‡sizeof(å˜é‡å);sizeof å˜é‡å;int ii;printf(&quot;iiå ç”¨çš„å†…å­˜æ˜¯=%d\\n&quot;,sizeof(ii)); // è¾“å‡ºï¼šiiå ç”¨çš„å†…å­˜æ˜¯=4printf(&quot;iiå ç”¨çš„å†…å­˜æ˜¯=%d\\n&quot;,sizeof ii); // è¾“å‡ºï¼šiiå ç”¨çš„å†…å­˜æ˜¯=4 å…³ç³»è¿ç®—ç¬¦ å…³ç³» æ•°å­¦ä¸­çš„è¡¨ç¤º Cè¯­è¨€çš„è¡¨ç¤º å°äº &lt; &lt; å°äºç­‰äº â‰¤ &lt;&#x3D; å¤§äº &gt; &gt; å¤§äºç­‰äº â‰¥ &gt;&#x3D; ç­‰äº &#x3D; &#x3D;&#x3D; ä¸ç­‰äº â‰  !&#x3D; é€»è¾‘è¿ç®—ç¬¦ è¿ç®—ç¬¦ æè¿° å®ä¾‹ &amp;&amp; é€»è¾‘ä¸ true &amp;&amp; false ç­‰äºfalse || é€»è¾‘æˆ– true &amp;&amp; false ç­‰äºtrue ! é€»è¾‘é trueçš„é€»è¾‘éä¸ºçœŸ ä¸‰ç›®è¿ç®—ç¬¦ è¡¨è¾¾å¼1?è¡¨è¾¾å¼2:è¡¨è¾¾å¼3; å…ˆæ‰§è¡Œè¡¨è¾¾å¼1ï¼Œå¦‚æœè¡¨è¾¾å¼1çš„ç»“æœå¦‚æœä¸ºçœŸï¼Œé‚£ä¹ˆæ‰§è¡Œè¡¨è¾¾å¼2ï¼Œå¹¶ä¸”è¿™ä¸ªæ•´ä½“çš„è¿ç®—å¼çš„ç»“æœæ˜¯è¡¨è¾¾å¼2çš„ç»“æœï¼›å¦‚æœè¡¨è¾¾å¼1çš„ç»“æœå¦‚æœä¸ºå‡ï¼Œæ‰§è¡Œè¡¨è¾¾å¼3ï¼Œè¿ç®—å¼çš„ç»“æœæ˜¯è¡¨è¾¾å¼3çš„ç»“æœã€‚ 12int year;year=(year%100==0)?(year%400==0?1:0):(year%4==0?1:0); ifã€switchè¯­å¥1234567891011121314151617if(è¡¨è¾¾å¼)&#123;&#125; else &#123;&#125;switch (è¡¨è¾¾å¼)&#123;case æ•´å‹æ•°å€¼1: è¯­å¥1;case æ•´å‹æ•°å€¼2: è¯­å¥2;......case æ•´å‹æ•°å€¼n: è¯­å¥n;default: è¯­å¥n+1;&#125;//æ³¨æ„//1. caseåé¢å¿…é¡»æ˜¯æ•´æ•°å’Œå­—ç¬¦ï¼Œæˆ–è€…æ˜¯ç»“æœä¸ºæ•´æ•°å’Œå­—ç¬¦çš„è¡¨è¾¾å¼ï¼Œä½†ä¸èƒ½åŒ…å«ä»»ä½•å˜é‡//2. defaultä¸æ˜¯å¿…é¡»çš„ã€‚å½“æ²¡æœ‰ defaultæ—¶ï¼Œå¦‚æœæ‰€æœ‰caseéƒ½åŒ¹é…å¤±è´¥ï¼Œé‚£ä¹ˆå°±ä»€ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚ ç¨‹åºç»“æ„whileå¾ªç¯123456789101112131415161718192021222324252627282930while (è¡¨è¾¾å¼)&#123; if(è¡¨è¾¾å¼)è¯­å¥å—; if(è¡¨è¾¾å¼)break;//è·³å‡ºå½“å‰å¾ªç¯ if(è¡¨è¾¾å¼)continue; //è·³è½¬åˆ°å¾ªç¯çš„é¦–éƒ¨&#125;do&#123; è¯­å¥å—&#125; while (è¡¨è¾¾å¼)int times=0; // è®°å½•ç”¨æˆ·è¾“å…¥æ•°æ®çš„æ¬¡æ•°int value=0; // ç”¨æˆ·æ¯æ¬¡ä»é”®ç›˜è¾“å…¥çš„æ•°æ®int sum=0; // è®°å½•ç”¨æˆ·è¾“å…¥æ•°æ®çš„å’Œwhile (sum&lt;5000) // å¦‚æœsumçš„å€¼å°äº5000ï¼Œè¿›å…¥å¾ªç¯&#123;printf(&quot;è¯·è¾“å…¥æ•°å­—ï¼š&quot;); // æç¤ºç”¨æˆ·è¾“å…¥scanf(&quot;%d&quot;,&amp;value); // æ¥å—ç”¨æˆ·ä»é”®ç›˜è¾“å…¥çš„æ•°æ®times++; // ç”¨æˆ·è¾“å…¥æ•°æ®çš„æ¬¡æ•°è‡ªå¢1sum=sum+value; // è®°å½•ç”¨æˆ·è¾“å…¥æ•°æ®çš„å’Œ&#125;printf(&quot;æ‚¨ä¸€å…±è¾“å…¥äº†%dä¸ªæ•°æ®ï¼Œå’Œä¸º%dã€‚\\n&quot;,times,sum); forå¾ªç¯12345for (è¯­å¥1;è¡¨è¾¾å¼;è¯­å¥2) &#123; è¯­å¥å— &#125; forå¾ªç¯å¼€å§‹æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œè¯­å¥1ï¼Œè€Œä¸”åœ¨æ•´ä¸ªå¾ªç¯è¿‡ç¨‹ä¸­åªæ‰§è¡Œä¸€æ¬¡è¯­å¥1ã€‚ æ¥ç€åˆ¤æ–­è¡¨è¾¾å¼çš„æ¡ä»¶ï¼Œå¦‚æœæ¡ä»¶æˆç«‹ï¼Œå°±æ‰§è¡Œä¸€æ¬¡å¾ªç¯ä½“ä¸­çš„è¯­å¥å—ã€‚ è¯­å¥å—æ‰§è¡Œå®Œåï¼Œæ¥ä¸‹æ¥ä¼šæ‰§è¡Œè¯­å¥2ã€‚ é‡å¤ç¬¬2ï¼‰æ­¥å’Œç¬¬3ï¼‰ï¼Œç›´åˆ°è¡¨è¾¾å¼çš„æ¡ä»¶ä¸æˆç«‹æ‰ç»“æŸforå¾ªç¯ã€‚ æ³¨æ„ï¼š åœ¨forå¾ªç¯ä¸­ï¼Œè¯­å¥1ã€è¡¨è¾¾å¼å’Œè¯­å¥2éƒ½å¯ä»¥ä¸ºç©ºï¼Œfor (;;)ç­‰åŒäºwhile (1)ã€‚ continueå’Œbreakä¸¤ä¸ªå…³é”®å­—ä¹Ÿå¯ä»¥ç”¨åœ¨forå¾ªç¯ä½“ä¸­ã€‚ 123456789int ii=1; // ç”¨äºforå¾ªç¯çš„è®¡æ•°å™¨ int sum=0; // è®°å½•1åˆ°100çš„ç´¯ç§¯å€¼ for (ii=1;ii&lt;=100;ii++) &#123; sum=sum+ii; &#125; printf(&quot;1åˆ°100çš„ç´¯ç§¯å€¼ä¸º%dã€‚\\n&quot;,sum); æ•°ç»„æ•°ç»„ï¼ˆarrayï¼‰æ˜¯ä¸€ç»„æ•°æ®ç±»å‹ç›¸åŒçš„å˜é‡ï¼Œå¯ä»¥å­˜æ”¾ä¸€ç»„æ•°æ®ï¼Œå®ƒå®šä¹‰çš„è¯­æ³•æ˜¯ï¼š æ•°æ®ç±»å‹ æ•°ç»„å[æ•°ç»„é•¿åº¦]; å®šä¹‰æ•°ç»„çš„æ—¶å€™ï¼Œæ•°ç»„çš„é•¿åº¦å¿…é¡»æ˜¯æ•´æ•°ï¼Œå¯ä»¥æ˜¯å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å˜é‡ã€‚æ•°æ®çš„ä¸‹æ ‡ä¹Ÿå¿…é¡»æ˜¯æ•´æ•°ï¼Œå¯ä»¥æ˜¯å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯å˜é‡ã€‚ 1234567int ii[10]; // å®šä¹‰ä¸€ä¸ªæ•´å‹æ•°ç»„å˜é‡printf(&quot;sizeof(ii)=%d\\n&quot;,sizeof(ii)); // è¾“å‡ºç»“æœï¼šsizeof(ii)=40//æ•°ç»„åˆå§‹åŒ–int no[10];memset(no,0,sizeof(no)); //ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ•°ç»„åï¼Œç¬¬äºŒä¸ªå‚æ•°å¡«0ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ•°ç»„å ç”¨çš„å†…å­˜æ€»ç©ºé—´ï¼Œç”¨sizeof(å˜é‡å)è·å–ã€‚ äºŒç»´æ•°ç»„ æ•°æ®ç±»å‹ æ•°ç»„å[ç¬¬ä¸€ç»´çš„é•¿åº¦][ç¬¬äºŒç»´çš„é•¿åº¦]; 1234567891011121314151617181920int ii=0; // ç”¨äºç»„åˆ«å¾ªç¯çš„è®¡æ•°å™¨int jj=0; // ç”¨äºè¶…å¥³äººæ•°å¾ªç¯çš„è®¡æ•°å™¨int class=3; // å°ç»„æ€»æ•°ï¼Œåˆå§‹åŒ–ä¸º3int total=5; // æ¯ä¸ªç»„è¶…å¥³çš„æ€»äººæ•°ï¼Œåˆå§‹åŒ–ä¸º5double weight[class][total]; // å®šä¹‰äºŒç»´æ•°ç»„ï¼Œå­˜æ”¾è¶…å¥³çš„ä½“é‡double sum[class]; // å®šä¹‰ä¸€ç»´æ•°ç»„å­˜æ”¾è¶…å¥³ä½“é‡çš„å’Œmemset(weight,0,sizeof(weight)); // åˆå§‹åŒ–æ•°ç»„ä¸º0memset(sum,0,sizeof(sum)); // åˆå§‹åŒ–æ•°ç»„ä¸º0// é‡‡ç”¨ä¸¤ä¸ªå¾ªç¯ï¼Œç¬¬ä¸€çº§å¾ªç¯ä¸ºå°ç»„æ•°ï¼Œç¬¬äºŒçº§å¾ªç¯ä¸ºè¶…å¥³äººæ•°for (ii=0;ii&lt;class;ii++)&#123;for (jj=0;jj&lt;total;jj++)&#123; printf(&quot;è¯·è¾“å…¥ç¬¬%dç»„ç¬¬%dåè¶…å¥³çš„ä½“é‡ï¼š&quot;,ii+1,jj+1); scanf(&quot;%lf&quot;,&amp;weight[ii][jj]); // æ¥å—ä»é”®ç›˜è¾“å…¥çš„ä½“é‡ sum[ii]=sum[ii]+weight[ii][jj]; // è®¡ç®—å°ç»„è¶…å¥³ä½“é‡çš„å’Œ&#125;&#125; å­—ç¬¦ä¸²å­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ªä»¥ç©ºå­—ç¬¦â€™\\0â€™ç»“æŸçš„å­—ç¬¦æ•°ç»„ï¼Œæ˜¯ä¸€ä¸ªç‰¹åˆ«çš„å­—ç¬¦æ•°ç»„ï¼Œè¿™æ˜¯çº¦å®šï¼Œæ˜¯è§„åˆ™ã€‚ç©ºå­—ç¬¦â€™\\0â€™ä¹Ÿå¯ä»¥ç›´æ¥å†™æˆ0ã€‚ 1234567891011121314151617//åˆå§‹åŒ–ï¼Œ å› ä¸ºå­—ç¬¦ä¸²éœ€è¦ç”¨0ç»“æŸï¼Œæ‰€ä»¥åœ¨å®šä¹‰å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œè¦é¢„ç•™å¤šä¸€ä¸ªå­—èŠ‚æ¥å­˜æ”¾0ã€‚char name[21]; // å®šä¹‰ä¸€ä¸ªæœ€å¤šå­˜æ”¾20ä¸ªå­—ç¬¦æˆ–10ä¸ªæ±‰å­—çš„å­—ç¬¦ä¸²//å­—ç¬¦ä¸²æ˜¯æ•°ç»„ï¼Œå½“ç„¶å¯ä»¥ç”¨åˆå§‹åŒ–æ•°ç»„çš„æ–¹æ³•æ¥åˆå§‹åŒ–å­—ç¬¦ä¸²ã€‚memset(strname,0,sizeof(strname));//å­—ç¬¦ä¸²çš„èµ‹å€¼strcpy(strword,&quot;hello&quot;);// æˆ–è€…ç”¨ä»¥ä¸‹ä»£ç char strword[21];memset(strword,0,sizeof(strword));strword[0]=&#x27;h&#x27;;strword[1]=&#x27;e&#x27;;strword[2]=&#x27;l&#x27;;strword[3]=&#x27;l&#x27;;strword[4]=&#x27;o&#x27;;strword[5]=&#x27;\\0&#x27;; // æˆ–è€… name[5]=0; å‡½æ•°å‡½æ•°å£°æ˜ return_type function_name( parameter list ); è¿”å›å€¼çš„æ•°æ®ç±»å‹return_typeï¼šå‡½æ•°æ‰§è¡Œå®Œä»»åŠ¡åçš„è¿”å›å€¼ï¼Œå¯ä»¥æ˜¯intã€charã€doubleæˆ–å…¶å®ƒè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ã€‚å¦‚æœå‡½æ•°åªæ‰§è¡Œä»»åŠ¡è€Œä¸è¿”å›å€¼ï¼Œreturn_typeç”¨å…³é”®å­— voidè¡¨ç¤ºï¼Œå¦‚ä¸‹ï¼š 1void function_name( parameter list ); å‡½æ•°åfunction_nameï¼šå‡½æ•°åæ˜¯æ ‡è¯†ç¬¦ï¼Œå‘½åè§„åˆ™ä¸å˜é‡ç›¸åŒã€‚ å‚æ•°åˆ—è¡¨parameter listï¼šå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œè°ƒç”¨è€…éœ€è¦å‘å‡½æ•°ä¼ é€’å‚æ•°ã€‚å‚æ•°åˆ—è¡¨åŒ…æ‹¬å‚æ•°çš„æ•°æ®ç±»å‹å’Œä¹¦å†™é¡ºåºã€‚å‚æ•°åˆ—è¡¨æ˜¯å¯é€‰çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°å¯ä»¥æ²¡æœ‰å‚æ•°ï¼Œå¦‚ä¸‹ï¼š 1return_type function_name(); å‡½æ•°å®šä¹‰12345//å‡½æ•°å®šä¹‰çš„return_typeã€function_nameå’Œparameter listå¿…é¡»ä¸å‡½æ•°å£°æ˜ä¸€è‡´ã€‚return_type function_name( parameter list ) // æ³¨æ„ï¼Œä¸è¦åœ¨å‡½æ•°å®šä¹‰çš„æœ€ååŠ åˆ†å·ã€‚ &#123; // å®ç°å‡½æ•°åŠŸèƒ½çš„ä»£ç  &#125; æ³¨æ„ï¼š #include &lt;&gt; ç”¨äºåŒ…å«ç³»ç»Ÿæä¾›çš„å¤´æ–‡ä»¶ï¼Œç¼–è¯‘çš„æ—¶å€™ï¼Œgccåœ¨ç³»ç»Ÿçš„å¤´æ–‡ä»¶ç›®å½•ä¸­å¯»æ‰¾å¤´æ–‡ä»¶ã€‚ #include â€œâ€ ç”¨äºåŒ…å«ç¨‹åºå‘˜è‡ªå®šä¹‰çš„å¤´æ–‡ä»¶ï¼Œç¼–è¯‘çš„æ—¶å€™ï¼Œgccå…ˆåœ¨å½“å‰ç›®å½•ä¸­å¯»æ‰¾å¤´æ–‡ä»¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå†åˆ°ç³»ç»Ÿçš„å¤´æ–‡ä»¶ç›®å½•ä¸­å¯»æ‰¾ã€‚ åº“å‡½æ•°Cè¯­è¨€æ ‡å‡†åº“å‡½æ•°çš„å£°æ˜çš„å¤´æ–‡ä»¶å­˜æ”¾åœ¨&#x2F;usr&#x2F;includeç›®å½•ä¸­ï¼Œå¦‚ä¸‹ï¼š 123&lt;asset.h&gt; &lt;ctype.h&gt; &lt;errno.h&gt; &lt;float.h&gt; &lt;limits.h&gt;&lt;locale.h&gt; &lt;math.h&gt; &lt;setjmp.h&gt; &lt;signal.h&gt; &lt;stdarg.h&gt;&lt;stddef.h&gt; &lt;stdlib.h&gt; &lt;stdio.h&gt; &lt;string.h&gt; &lt;time.h&gt; å˜é‡çš„ä½œç”¨åŸŸä½œç”¨åŸŸæ˜¯ç¨‹åºä¸­å®šä¹‰çš„å˜é‡å­˜åœ¨ï¼ˆæˆ–ç”Ÿæ•ˆï¼‰çš„åŒºåŸŸï¼Œè¶…è¿‡è¯¥åŒºåŸŸå˜é‡å°±ä¸èƒ½è¢«è®¿é—®ã€‚C è¯­è¨€ä¸­æœ‰å››ç§åœ°æ–¹å¯ä»¥å®šä¹‰å˜é‡ã€‚ åœ¨æ‰€æœ‰å‡½æ•°å¤–éƒ¨å®šä¹‰çš„æ˜¯å…¨å±€å˜é‡ã€‚ åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰çš„æ˜¯å…¨å±€å˜é‡ã€‚ åœ¨å‡½æ•°æˆ–è¯­å¥å—å†…éƒ¨å®šä¹‰çš„æ˜¯å±€éƒ¨å˜é‡ã€‚å®ƒä»¬åªèƒ½åœ¨è¯¥å‡½æ•°æˆ–è¯­å¥å—å†…éƒ¨çš„è¯­å¥ä½¿ç”¨ã€‚ å‡½æ•°çš„å‚æ•°æ˜¯è¯¥å‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚ æ³¨æ„ å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡çš„åç§°å¯ä»¥ç›¸åŒï¼Œåœ¨æŸå‡½æ•°æˆ–è¯­å¥å—å†…éƒ¨ï¼Œå¦‚æœå±€éƒ¨å˜é‡åä¸å…¨å±€å˜é‡åç›¸åŒï¼Œå°±ä¼šå±è”½å…¨å±€å˜é‡è€Œä½¿ç”¨å±€éƒ¨å˜é‡ã€‚ æŒ‡é’ˆå˜é‡ å†…å­˜å˜é‡ç®€ç§°å˜é‡ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œæ¯å®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œç³»ç»Ÿå°±ä¼šç»™å˜é‡åˆ†é…ä¸€å—å†…å­˜ï¼Œè€Œå†…å­˜æ˜¯æœ‰åœ°å€çš„ã€‚å¦‚æœæŠŠè®¡ç®—æœºçš„å†…å­˜åŒºåŸŸæ¯”å–»æˆä¸€ä¸ªå¤§å®¾é¦†ï¼Œæ¯å—å†…å­˜çš„åœ°å€å°±åƒå®¾é¦†æˆ¿é—´çš„ç¼–å·ã€‚ 12345678 int ii=10; char cc=&#x27;A&#x27;; double dd=100.56;//åœ¨printfå‡½æ•°ä¸­ï¼Œè¾“å‡ºå†…å­˜åœ°å€çš„æ ¼å¼æ§åˆ¶ç¬¦æ˜¯%pï¼Œåœ°å€é‡‡ç”¨åå…­è¿›åˆ¶çš„æ•°å­—æ˜¾ç¤ºã€‚ printf(&quot;å˜é‡iiçš„åœ°å€æ˜¯ï¼š%p\\n&quot;,&amp;ii); printf(&quot;å˜é‡ccçš„åœ°å€æ˜¯ï¼š%p\\n&quot;,&amp;cc); printf(&quot;å˜é‡ddçš„åœ°å€æ˜¯ï¼š%p\\n&quot;,&amp;dd); æŒ‡é’ˆ æŒ‡é’ˆæ˜¯ä¸€ç§ç‰¹åˆ«å˜é‡ï¼Œå…¨ç§°æ˜¯æŒ‡é’ˆå˜é‡ï¼Œä¸“ç”¨äºå­˜æ”¾å…¶å®ƒå˜é‡åœ¨å†…å­˜ä¸­çš„åœ°å€ç¼–å·ï¼ŒæŒ‡é’ˆåœ¨ä½¿ç”¨ä¹‹å‰è¦å…ˆå£°æ˜ï¼Œè¯­æ³•æ˜¯ï¼š 123456789101112131415161718192021222324252627282930313233343536datatype *varname;datatype æ˜¯æŒ‡é’ˆçš„åŸºç±»å‹ï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„Cæ•°æ®ç±»å‹ï¼ˆintã€charã€doubleæˆ–å…¶å®ƒè‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼‰ï¼Œvarname æ˜¯æŒ‡é’ˆçš„åç§°ã€‚ç”¨æ¥å£°æ˜æŒ‡é’ˆçš„æ˜Ÿå· * ä¸ä¹˜æ³•ä¸­ä½¿ç”¨çš„æ˜Ÿå·æ˜¯ç›¸åŒçš„ã€‚int *ip; // ä¸€ä¸ªæ•´å‹çš„æŒ‡é’ˆchar *cp; // ä¸€ä¸ªå­—ç¬¦å‹çš„æŒ‡é’ˆdouble *dp; // ä¸€ä¸ª double å‹çš„æŒ‡é’ˆint ii = 10;int *pii = 0; // å®šä¹‰æ•´æ•°å‹æŒ‡é’ˆå¹¶åˆå§‹åŒ–pii = &amp;ii; // æ•°å‹æŒ‡é’ˆæŒ‡å‘å˜é‡ii// é€šè¿‡æŒ‡é’ˆæ“ä½œå†…å­˜å˜é‡ï¼Œæ”¹å˜å†…å­˜å˜é‡çš„å€¼*pii = 20; // åŒii=20;printf(&quot;piiçš„å€¼æ˜¯ï¼š%p\\n&quot;, pii);printf(&quot;*piiçš„å€¼æ˜¯ï¼š%d\\n&quot;, *pii);printf(&quot;iiçš„å€¼æ˜¯ï¼š%d\\n&quot;, ii);//ç©ºæŒ‡é’ˆint *pi=0; // å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆ*pi=10; // è¯•å›¾å¯¹ç©ºæŒ‡é’ˆè¿›è¡Œèµ‹å€¼æ“ä½œï¼Œå¿…å°†å¼•èµ·ç¨‹åºçš„å´©æºƒ//åœ°å€çš„è¿ç®—char cc[4]; // å­—ç¬¦æ•°ç»„int ii[4]; // æ•´æ•°æ•°ç»„double dd[4]; // æµ®ç‚¹æ•°ç»„// ç”¨åœ°å€ç›¸åŠ çš„æ–¹å¼æ˜¾ç¤ºæ•°ç»„å…¨éƒ¨å…ƒç´ çš„çš„å€printf(&quot;%p %p %p %p\\n&quot;,cc,cc+1,cc+2,cc+3);printf(&quot;%p %p %p %p\\n&quot;,ii,ii+1,ii+2,ii+3);printf(&quot;%p %p %p %p\\n&quot;,dd,dd+1,dd+2,dd+3);//æŒ‡é’ˆä¹Ÿæ˜¯ä¸€ç§å†…å­˜å˜é‡ï¼Œæ˜¯å†…å­˜å˜é‡å°±è¦å ç”¨å†…å­˜ç©ºé—´ï¼Œåœ¨Cè¯­è¨€ä¸­ï¼Œä»»ä½•ç±»å‹çš„æŒ‡é’ˆå ç”¨8å­—èŠ‚çš„å†…å­˜ï¼ˆ32ä½æ“ä½œç³»ç»Ÿ4å­—èŠ‚ï¼‰ã€‚printf(&quot;sizeof(int *) is %d.\\n&quot;,sizeof(int *)); // è¾“å‡ºï¼šsizeof(int *) is 8printf(&quot;sizeof(char *) is %d.\\n&quot;,sizeof(char *)); // è¾“å‡ºï¼šsizeof(char *) is 8printf(&quot;sizeof(double *) is %d.\\n&quot;,sizeof(double *)); // è¾“å‡ºï¼šsizeof(double *) is 8 æ•´æ•°åœ¨å®šä¹‰æ•´å‹å˜é‡çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨intå…³é”®å­—ä¹‹å‰åŠ signedã€unsignedã€shortå’Œlongå››ç§ä¿®é¥°ç¬¦ã€‚ signedï¼šæœ‰ç¬¦å·çš„ï¼Œå¯ä»¥è¡¨ç¤ºæ­£æ•°å’Œè´Ÿæ•°ã€‚ unsignedï¼šæ— ç¬¦å·çš„ï¼Œåªèƒ½è¡¨ç¤ºæ­£æ•°ï¼Œä¾‹å¦‚æ•°ç»„çš„ä¸‹æ ‡ã€äººçš„èº«é«˜ç­‰ã€‚ shortï¼šçŸ­çš„ï¼Œç°åœ¨ä¸»æµçš„64ä½æ“ä½œç³»ç»Ÿä¸‹ï¼Œæ•´æ•°å ç”¨å†…å­˜4ä¸ªå­—èŠ‚ã€‚ longï¼šé•¿çš„ï¼Œæ›´é•¿çš„æ•´æ•°ã€‚ æ•´æ•°çš„å–å€¼èŒƒå›´æ•´æ•°çš„å–å€¼èŒƒå›´ä¸è®¡ç®—æœºæ“ä½œç³»ç»Ÿå’ŒCè¯­è¨€ç¼–è¯‘å™¨æœ‰å…³ï¼Œæ²¡æœ‰ä¸€ä¸ªå›ºå®šçš„æ•°å€¼ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®ƒå ç”¨çš„å†…å­˜å¤§å°æ¥æ¨æ–­å®ƒçš„å–å€¼èŒƒå›´ã€‚ 12345678910111213ä¸€ä¸ªå­—èŠ‚æœ‰8ä¸ªä½ï¼Œè¡¨ç¤ºçš„æ•°æ®çš„å–å€¼èŒƒå›´æ˜¯28-1ï¼Œå³255ã€‚å¦‚æœå ç”¨çš„å†…å­˜æ˜¯ä¸¤ä¸ªå­—èŠ‚ï¼Œæ— ç¬¦å·å‹å–å€¼èŒƒå›´æ˜¯2**8â…¹2**8-1ã€‚å¦‚æœå ç”¨çš„å†…å­˜æ˜¯å››ä¸ªå­—èŠ‚ï¼Œæ— ç¬¦å·å‹å–å€¼èŒƒå›´æ˜¯2**8â…¹2**8â…¹2**8â…¹2**8-1ã€‚å¦‚æœå ç”¨çš„å†…å­˜æ˜¯å…«ä¸ªå­—èŠ‚ï¼Œæ— ç¬¦å·å‹å–å€¼èŒƒå›´æ˜¯2**8â…¹2**8â…¹2**8â…¹2**8â…¹2**8â…¹2**8â…¹2**8â…¹2**8-1ã€‚å¦‚æœæ˜¯æœ‰ç¬¦å·ï¼Œå–å€¼èŒƒå›´å‡åŠï¼Œå› ä¸ºç¬¦å·å ä¸€ä¸ªä½ã€‚short si; // çŸ­æ•´æ•°int ii; // æ•´æ•°long li; // é•¿æ•´æ•°printf(&quot;sizeof short is %d\\n&quot;,sizeof(short));printf(&quot;sizeof int is %d\\n&quot;,sizeof(int));printf(&quot;sizeof long is %d\\n&quot;,sizeof(long)); ç±»å‹ç®€å†™ ç±»å‹å…¨ç§° é•¿åº¦ å–å€¼èŒƒå›´ short [signed] short [int] 2å­—èŠ‚ -32768~32767 unsigned short unsigned short [int] 2å­—èŠ‚ 0~65535 int [signed] int 4å­—èŠ‚ -2147483648~2147483647 unsigned int unsigned [int] 4å­—èŠ‚ 0~4294967295 long [signed] long [int] 8å­—èŠ‚ -9223372036854775808~9223372036854775807 unsigned long unsigned long [int] 8å­—èŠ‚ 0~18446744073709551615 æ³¨æ„ï¼š è®¡ç®—æœºç”¨æœ€é«˜ä½1ä½æ¥è¡¨è¾¾ç¬¦å·ï¼ˆ0-æ­£æ•°ï¼Œ1-è´Ÿæ•°ï¼‰ï¼Œunsignedä¿®é¥°è¿‡çš„æ­£æ•´æ•°ä¸éœ€è¦ç¬¦å·ä½ï¼Œåœ¨è¡¨è¾¾æ­£æ•´æ•°çš„æ—¶å€™æ¯”signedä¿®é¥°çš„æ­£æ•´æ•°å–å€¼å¤§ä¸€å€ã€‚ åœ¨å†™ç¨‹åºçš„æ—¶å€™ï¼Œä¸Šè¡¨ä¸­æ‹¬å·[]çš„å•è¯å¯ä»¥çœç•¥ä¸ä¹¦å†™ã€‚ åœ¨å†™ç¨‹åºçš„æ—¶å€™ï¼Œç»™æ•´æ•°å˜é‡èµ‹å€¼ä¸èƒ½è¶…å‡ºå˜é‡çš„å–å€¼èŒƒå›´ï¼Œç¼–è¯‘çš„æ—¶å€™ä¼šå‡ºç°ç±»ä¼¼ä»¥ä¸‹çš„é”™è¯¯ï¼Œç¨‹åºè¿è¡Œä¹Ÿå¯èƒ½äº§ç”Ÿä¸å¯é¢„åçš„åæœã€‚ å¸¸ç”¨çš„åº“å‡½æ•° 1234int atoi(const char *nptr); // æŠŠå­—ç¬¦ä¸²nptrè½¬æ¢ä¸ºintæ•´æ•°long atol(const char *nptr); // æŠŠå­—ç¬¦ä¸²nptrè½¬æ¢ä¸ºlongæ•´æ•°int abs(const int j); // æ±‚intæ•´æ•°çš„ç»å¯¹å€¼long labs(const long int j); // æ±‚longæ•´æ•°çš„ç»å¯¹å€¼ æ•°æ®ç±»å‹çš„åˆ«å 12typedef unsigned int size_t;size_t ii; ç­‰åŒäº unsigned int ii; ç±»å‹è½¬æ¢è‡ªåŠ¨ç±»å‹è½¬æ¢æ•´å‹ç±»å‹çº§åˆ«ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼š signed char-&gt;unsigned char-&gt;short-&gt;unsigned short-&gt;int-&gt;unsigned int-&gt;long-&gt;unsigned long æµ®ç‚¹å‹çº§åˆ«ä»ä½åˆ°é«˜ä¾æ¬¡ä¸ºï¼š float-&gt;double æ“ä½œæ•°ä¸­æ²¡æœ‰æµ®ç‚¹å‹æ•°æ®æ—¶ å½“ charã€unsigned charã€short æˆ– unsigned short å‡ºç°åœ¨è¡¨è¾¾å¼ä¸­å‚ä¸è¿ç®—æ—¶ï¼Œä¸€èˆ¬å°†å…¶è‡ªåŠ¨è½¬æ¢ä¸º int ç±»å‹ã€‚int ä¸ unsigned intæ··åˆè¿ç®—æ—¶ï¼Œintè‡ªåŠ¨è½¬æ¢ä¸ºunsigned intå‹ã€‚intã€unsigned int ä¸ long æ··åˆè¿ç®—æ—¶ï¼Œå‡è½¬æ¢ä¸º long ç±»å‹ã€‚ æ“ä½œæ•°ä¸­æœ‰æµ®ç‚¹å‹æ•°æ®æ—¶ å½“æ“ä½œæ•°ä¸­å«æœ‰æµ®ç‚¹å‹æ•°æ®æ—¶ï¼Œæ‰€æœ‰æ“ä½œæ•°éƒ½å°†è½¬æ¢ä¸º double å‹ã€‚ èµ‹å€¼è¿ç®—ç¬¦ä¸¤ä¾§çš„ç±»å‹ä¸ä¸€è‡´æ—¶ å½“èµ‹å€¼è¿ç®—ç¬¦çš„å³å€¼ï¼ˆå¯èƒ½ä¸ºå¸¸é‡ã€å˜é‡æˆ–è¡¨è¾¾å¼ï¼‰ç±»å‹ä¸å·¦å€¼ç±»å‹ä¸ä¸€è‡´æ—¶ï¼Œå°†å³å€¼ç±»å‹æå‡&#x2F;é™ä½ä¸ºå·¦å€¼ç±»å‹ã€‚ å³å€¼è¶…å‡ºå·¦å€¼ç±»å‹èŒƒå›´æ—¶ èµ‹å€¼è¿ç®—ç¬¦å³å€¼çš„èŒƒå›´è¶…å‡ºäº†å·¦å€¼ç±»å‹çš„è¡¨ç¤ºèŒƒå›´ï¼Œå°†æŠŠè¯¥å³å€¼æˆªæ–­åï¼Œèµ‹ç»™å·¦å€¼ã€‚æ‰€å¾—ç»“æœå¯èƒ½æ¯«æ— æ„ä¹‰ã€‚ å¼ºåˆ¶ç±»å‹è½¬æ¢ (ç›®æ ‡ç±»å‹) è¡¨è¾¾å¼; ç»“æ„ä½“ç»“æ„ä½“ï¼ˆstructï¼‰æ¥å­˜æ”¾ä¸€ç»„ä¸åŒç±»å‹çš„æ•°æ®ã€‚è¯­æ³•å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263struct ç»“æ„ä½“å&#123; ç»“æ„ä½“æˆå‘˜å˜é‡ä¸€çš„å£°æ˜; ç»“æ„ä½“æˆå‘˜å˜é‡äºŒçš„å£°æ˜; ç»“æ„ä½“æˆå‘˜å˜é‡ä¸‰çš„å£°æ˜; ...... ç»“æ„ä½“æˆå‘˜å˜é‡å››çš„å£°æ˜;&#125;;struct st_girl&#123; char name[51]; // å§“å int age; // å¹´é¾„ int height; // èº«é«˜ï¼Œå•ä½ï¼šcm int weight; // ä½“é‡ï¼Œå•ä½ï¼škg char sc[31]; // èº«æï¼Œç«è¾£ï¼›æ™®é€šï¼›é£æœºåœº char yz[31]; // é¢œå€¼ï¼Œæ¼‚äº®ï¼›ä¸€èˆ¬ï¼›æ­ªç“œè£‚æ£&#125;;//ç»“æ„ä½“æ˜¯ä¸€ç§ç¨‹åºå‘˜è‡ªå®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œæ˜¯æ¨¡æ¿ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®šä¹‰å˜é‡struct st_girl queen, princess, waiting, workers;struct st_girl queen;printf(&quot;sizeof(struct st_girl) %d\\n&quot;,sizeof(struct st_girl));printf(&quot;sizeof(queen) %d\\n&quot;,sizeof(queen)); //Cè¯­è¨€æä¾›äº†ç»“æ„ä½“æˆå‘˜å†…å­˜å¯¹é½çš„æ–¹æ³•ï¼Œåœ¨å®šä¹‰ç»“æ„ä½“ä¹‹å‰ï¼Œå¢åŠ ä»¥ä¸‹ä»£ç å¯ä»¥ä½¿ç»“æ„ä½“æˆå‘˜å˜é‡ä¹‹é—´çš„å†…å­˜æ²¡æœ‰ç©ºéš™ã€‚#pragma pack(1)//å’Œæ•°ç»„ä¸ä¸€æ ·ï¼Œç»“æ„ä½“å˜é‡åä¸æ˜¯ç»“æ„ä½“å˜é‡çš„åœ°å€ï¼Œç»“æ„ä½“å˜é‡åå°±æ˜¯å˜é‡åï¼Œå°±è±¡int iiä¸€æ ·ï¼Œåªæ˜¯ä¸èƒ½ç›´æ¥è¾“å‡ºï¼Œç›´æ¥è¾“å‡ºæ²¡æœ‰æ„ä¹‰ã€‚å–åœ°å€è¦ç”¨&amp;struct st_girl stgirl;printf(&quot;%d\\n&quot;,stgirl); // æ²¡æœ‰æ„ä¹‰ã€‚printf(&quot;%p\\n&quot;,stgirl); // æ²¡æœ‰æ„ä¹‰ï¼Œç»“æ„ä½“å˜é‡åä¸æ˜¯ç»“æ„ä½“å˜é‡çš„åœ°å€ã€‚printf(&quot;%p\\n&quot;,&amp;stgirl); // è¿™æ‰æ˜¯ç»“æ„ä½“çš„åœ°å€ã€‚//ç»“æ„ä½“çš„åˆå§‹åŒ–memset(&amp;queen,0,sizeof(struct st_girl));//æˆ–memset(&amp;queen,0,sizeof(queen));//æ³¨æ„äº‹é¡¹ï¼Œå¦‚æœæŠŠä¸€ä¸ªç»“æ„ä½“çš„åœ°å€ä¼ ç»™å­å‡½æ•°ï¼Œå­å‡½æ•°ç”¨ä¸€ä¸ªç»“æ„ä½“æŒ‡é’ˆï¼ˆå¦‚struct st_girl *pstï¼‰æ¥å­˜æ”¾ä¼ å…¥çš„ç»“æ„ä½“çš„åœ°å€ï¼Œé‚£ä¹ˆï¼Œåœ¨å­å‡½æ•°ä¸­åªèƒ½ç”¨ä»¥ä¸‹æ–¹æ³•æ¥åˆå§‹åŒ–ç»“æ„ä½“memset(pst,0,sizeof(struct st_girl));//ç»“æ„ä½“æŒ‡é’ˆstruct st_girl queen;struct st_girl *pst=&amp;queen; //ç»“æ„ä½“æŒ‡é’ˆä½¿ç”¨æˆå‘˜å˜é‡(*pointer).memberNamepointer-&gt;memberName//ç»“æ„ä½“å¤åˆ¶struct st_girl girl1,girl2;strcpy(girl1.name,&quot;è¥¿æ–½&quot;); // å¯¹girl1çš„æˆå‘˜èµ‹å€¼girl1.age=18;memcpy(&amp;girl2,&amp;girl1,sizeof(struct st_girl));//ç»“æ„ä½“æ˜¯å¤šä¸ªå˜é‡é›†åˆï¼Œä½œä¸ºå‡½æ•°å‚æ•°æ—¶å°±å¯ä»¥ä¼ é€’æ•´ä¸ªé›†åˆï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰æˆå‘˜ã€‚å¦‚æœç»“æ„ä½“æˆå‘˜è¾ƒå¤šï¼Œå‡½æ•°å‚æ•°çš„åˆå§‹åŒ–å’Œèµ‹å€¼çš„å†…å­˜å¼€é”€ä¼šå¾ˆå¤§ï¼Œå½±å“ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚æ‰€ä»¥æœ€å¥½çš„åŠæ³•å°±æ˜¯ä¼ é€’ç»“æ„ä½“å˜é‡çš„åœ°å€ã€‚// å¯¹ç»“æ„ä½“èµ‹å€¼çš„å‡½æ•°void setvalue(struct st_girl *pst);struct st_girl queen; // å®šä¹‰ç»“æ„ä½“å˜é‡ // åˆå§‹åŒ–ç»“æ„ä½“å˜é‡memset(&amp;queen,0,sizeof(struct st_girl)); æ ¼å¼åŒ–è¾“å‡º1234567int printf(const char *format, ...);int sprintf(char *str, const char *format, ...);int snprintf(char *str, size_t size, const char *format, ...);//printfæ˜¯æŠŠç»“æœè¾“å‡ºåˆ°å±å¹•ï¼ŒsprintfæŠŠæ ¼å¼åŒ–è¾“å‡ºçš„å†…å®¹ä¿å­˜åˆ°å­—ç¬¦ä¸²strä¸­ï¼Œsnprintfçš„nç±»ä¼¼äºstrncpyä¸­çš„nï¼Œæ„æ€æ˜¯åªè·å–è¾“å‡ºç»“æœçš„å‰n-1ä¸ªå­—ç¬¦ï¼Œä¸æ˜¯nä¸ªå­—ç¬¦ã€‚ æ ¼å¼è¯´æ˜ç¬¦ %[flags][width][.prec]type ç±»å‹ç¬¦typeï¼šè¡¨ç¤ºè¾“å‡ºæ•°æ®çš„ç±»å‹ %hdã€%dã€%ld ä»¥åè¿›åˆ¶ã€æœ‰ç¬¦å·çš„å½¢å¼è¾“å‡º shortã€intã€long ç±»å‹çš„æ•´æ•°ã€‚ %huã€%uã€%lu ä»¥åè¿›åˆ¶ã€æ— ç¬¦å·çš„å½¢å¼è¾“å‡º shortã€intã€long ç±»å‹çš„æ•´æ•° %c è¾“å‡ºå­—ç¬¦ã€‚ %lf ä»¥æ™®é€šæ–¹å¼è¾“å‡ºdoubleï¼ˆfloatå¼ƒç”¨ï¼Œlong doubeæ— ç”¨ï¼‰ã€‚ %e ä»¥ç§‘å­¦è®¡æ•°æ³•è¾“å‡ºdoubleã€‚ %s è¾“å‡ºå­—ç¬¦ä¸²ã€‚ %p è¾“å‡ºå†…å­˜çš„åœ°å€ã€‚ å®½åº¦widthï¼šç”¨äºæ§åˆ¶è¾“å‡ºå†…å®¹çš„å®½åº¦ 123printf(&quot;=%12s=\\n&quot;,&quot;abc&quot;); // è¾“å‡º= abc=printf(&quot;=%12d=\\n&quot;,123); // è¾“å‡º= 123=printf(&quot;=%12lf=\\n&quot;,123.5); // è¾“å‡º= 123.500000= å¯¹å…¶æ ‡å¿—flagsï¼šç”¨äºæ§åˆ¶è¾“å‡ºå†…å®¹çš„å¯¹é½æ–¹å¼ ä¸å¡«æˆ–+ï¼šè¾“å‡ºçš„å†…å®¹å³å¯¹é½ï¼Œè¿™æ˜¯ç¼ºçœçš„æ–¹å¼ -ï¼šè¾“å‡ºçš„å†…å®¹å·¦å¯¹é½ã€‚ 12345678printf(&quot;=%-12s=\\n&quot;,&quot;abc&quot;); // è¾“å‡º=abc =printf(&quot;=%-12d=\\n&quot;,123); // è¾“å‡º=123 =printf(&quot;=%-12f=\\n&quot;,123.5); // è¾“å‡º=123.500000 =printf(&quot;=%012s=\\n&quot;,&quot;abc&quot;); // è¾“å‡º= abc=printf(&quot;=%012d=\\n&quot;,123); // è¾“å‡º=000000000123=printf(&quot;=%012f=\\n&quot;,123.5); // è¾“å‡º=00123.500000= ç²¾åº¦precï¼šå¦‚æœè¾“å‡ºçš„å†…å®¹æ˜¯æµ®ç‚¹æ•°ï¼Œå®ƒç”¨äºæ§åˆ¶è¾“å‡ºå†…å®¹çš„ç²¾åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´å°æ•°ç‚¹åé¢ä¿ç•™å¤šå°‘ä½ï¼Œåé¢çš„æ•°å››èˆäº”å…¥ã€‚ 1234printf(&quot;=%12.2lf=\\n&quot;,123.5); // è¾“å‡º= 123.50=printf(&quot;=%.2lf=\\n&quot;,123.5); // è¾“å‡º=123.50=printf(&quot;=%12.2e=\\n&quot;,123500000000.0); // è¾“å‡º= 1.24e+11=printf(&quot;=%.2e=\\n&quot;,123500000000.0); // è¾“å‡º=1.24e+11= mainå‡½æ•°12345678910int main(int argc,char *argv[],char *envp[])//int argcï¼Œå­˜æ”¾äº†å‘½ä»¤è¡Œå‚æ•°çš„ä¸ªæ•°ã€‚//char *argv[]ï¼Œæ˜¯ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦æŒ‡é’ˆï¼ŒæŒ‡å‘ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³å‘½ä»¤è¡Œä¸­çš„æ¯ä¸€ä¸ªå‚æ•°ã€‚//char *envp[]ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ æ˜¯æŒ‡å‘ä¸€ä¸ªç¯å¢ƒå˜é‡çš„å­—ç¬¦æŒ‡é’ˆã€‚//envpå­˜æ”¾äº†å½“å‰ç¨‹åºè¿è¡Œç¯å¢ƒçš„å‚æ•°ã€‚ åŠ¨æ€å†…å­˜ç®¡ç†1234567void *malloc(unsigned int size)ï¼›//mallocçš„ä½œç”¨æ˜¯å‘ç³»ç»Ÿç”³è¯·ä¸€å—å¤§å°ä¸ºsizeçš„è¿ç»­å†…å­˜ç©ºé—´ï¼Œå¦‚æœç”³è¯·å¤±è´¥ï¼Œå‡½æ•°è¿”å›0ï¼Œå¦‚æœç”³è¯·æˆåŠŸï¼Œè¿”å›æˆåŠŸåˆ†é…å†…å­˜å—çš„èµ·å§‹åœ°å€ã€‚malloc(100)ï¼› // ç”³è¯· 100 ä¸ªå­—èŠ‚çš„ä¸´æ—¶åˆ†é…åŸŸï¼Œè¿”å›å€¼ä¸ºå…¶ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åœ°å€void free(void *p);//freeçš„ä½œç”¨æ˜¯é‡Šæ”¾æŒ‡é’ˆpæŒ‡å‘çš„åŠ¨æ€å†…å­˜ç©ºé—´ï¼Œpæ˜¯è°ƒç”¨mallocå‡½æ•°æ—¶è¿”å›çš„åœ°å€ï¼Œfreeå‡½æ•°æ— è¿”å›å€¼ã€‚ é‡æŒ‡é’ˆ å†…å­˜æŒ‡é’ˆå˜é‡æœªåˆå§‹åŒ– å†…å­˜é‡Šæ”¾åä¹‹åæŒ‡é’ˆæœªç½®ç©º 1234567int *pi=0;int i;int *pi=&amp;i;free(pi);pi=0; æ–‡ä»¶æ“ä½œ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647//æ“ä½œæ–‡ä»¶çš„æ—¶å€™ï¼ŒCè¯­è¨€ä¸ºæ–‡ä»¶åˆ†é…ä¸€ä¸ªä¿¡æ¯åŒºï¼Œè¯¥ä¿¡æ¯åŒºåŒ…å«æ–‡ä»¶æè¿°ä¿¡æ¯ã€ç¼“å†²åŒºä½ç½®ã€ç¼“å†²åŒºå¤§å°ã€æ–‡ä»¶è¯»å†™åˆ°çš„ä½ç½®ç­‰åŸºæœ¬ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ç”¨ä¸€ä¸ªç»“æ„ä½“æ¥å­˜æ”¾ï¼ˆstruct _IO_FILEï¼‰ï¼Œè¿™ä¸ªç»“æ„ä½“æœ‰ä¸€ä¸ªåˆ«åFILEï¼ˆtypedef struct _IO_FILE FILEï¼‰ï¼ŒFILEç»“æ„ä½“å’Œå¯¹æ–‡ä»¶æ“ä½œçš„åº“å‡½æ•°åœ¨ stdio.h å¤´æ–‡ä»¶ä¸­å£°æ˜çš„ã€‚//æ‰“å¼€æ–‡ä»¶çš„æ—¶å€™ï¼Œfopenå‡½æ•°ä¸­ä¼šåŠ¨æ€åˆ†é…ä¸€ä¸ªFILEç»“æ„ä½“å¤§å°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶æŠŠFILEç»“æ„ä½“å†…å­˜çš„åœ°å€ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œç¨‹åºä¸­ç”¨FILEç»“æ„ä½“æŒ‡é’ˆå­˜æ”¾è¿™ä¸ªåœ°å€ã€‚//å…³é—­æ–‡ä»¶çš„æ—¶å€™ï¼Œfcloseå‡½æ•°é™¤äº†å…³é—­æ–‡ä»¶ï¼Œè¿˜ä¼šé‡Šæ”¾FILEç»“æ„ä½“å ç”¨çš„å†…å­˜ç©ºé—´ã€‚//FILEç»“æ„ä½“æŒ‡é’ˆä¹ æƒ¯ç§°ä¸ºæ–‡ä»¶æŒ‡é’ˆã€‚FILE *fopen( const char * filename, const char * mode );//å‚æ•°filename æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºéœ€è¦æ‰“å¼€çš„æ–‡ä»¶åï¼Œå¯ä»¥åŒ…å«ç›®å½•åï¼Œå¦‚æœä¸åŒ…å«è·¯å¾„å°±è¡¨ç¤ºç¨‹åºè¿è¡Œçš„å½“å‰ç›®å½•ã€‚å®é™…å¼€å‘ä¸­ï¼Œé‡‡ç”¨æ–‡ä»¶çš„å…¨è·¯å¾„ã€‚//å‚æ•°modeä¹Ÿæ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ‰“å¼€æ–‡ä»¶çš„æ–¹å¼ï¼ˆæ¨¡å¼ï¼‰ï¼Œæ‰“å¼€æ–¹å¼å¯ä»¥æ˜¯ä¸‹åˆ—å€¼ä¸­çš„ä¸€ä¸ªã€‚//r åªè¯» æ–‡ä»¶å¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™æ‰“å¼€å¤±è´¥//w åªå†™ å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ¸…é™¤åŸæ–‡ä»¶å†…å®¹ï¼›å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºæ–‡ä»¶ã€‚//a è¿½åŠ åªå†™ å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼Œåˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™æ–°å»ºæ–‡ä»¶ã€‚//r+ è¯»å†™ æ–‡ä»¶å¿…é¡»å­˜åœ¨ã€‚åœ¨åªè¯» r çš„åŸºç¡€ä¸ŠåŠ  &#x27;+&#x27; è¡¨ç¤ºå¢åŠ å¯å†™çš„åŠŸèƒ½ã€‚//w+ åœ¨åªå†™wçš„æ–¹å¼ä¸Šå¢åŠ å¯è¯»çš„åŠŸèƒ½ã€‚//a+ åœ¨è¿½åŠ åªå†™açš„æ–¹å¼ä¸Šå¢åŠ å¯è¯»çš„åŠŸèƒ½ã€‚/*æ³¨æ„äº†ï¼Œä¸åŒæ•™æä¸­å¯¹æ–‡ä»¶æ‰“å¼€çš„æ–¹å¼æœ‰ä¸åŒçš„è¯´æ³•ã€‚æœ‰çš„è¯´æ‰“å¼€æ–‡æœ¬æ–‡ä»¶çš„æ–¹å¼è¦ç”¨&quot;rt&quot;ã€&quot;wt&quot;ã€&quot;at&quot;ã€&quot;rt+&quot;ã€&quot;wt+&quot;ã€&quot;at+&quot;ï¼Œ&quot;t&quot;æ˜¯textçš„ç®€å†™ï¼Œ&quot;t&quot;å¯ä»¥çœç•¥ä¸å†™ã€‚æœ‰çš„è¯´æ‰“å¼€äºŒè¿›åˆ¶æ–‡ä»¶çš„æ–¹å¼è¦ç”¨&quot;rb&quot;ã€&quot;wb&quot;ã€&quot;ab&quot;ã€&quot;rb+&quot;ã€&quot;wb+&quot;ã€&quot;ab+&quot;ï¼Œ&quot;b&quot;æ˜¯binaryçš„ç®€å†™ã€‚å‡†ç¡®çš„è¯´ï¼Œåœ¨Linuxå¹³å°ä¸‹ï¼Œæ‰“å¼€æ–‡æœ¬æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„æ–¹å¼æ²¡æœ‰åŒºåˆ«ã€‚åœ¨windowså¹³å°ä¸‹ï¼Œå¦‚æœä»¥â€œæ–‡æœ¬â€æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œå½“è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå°†æ‰€æœ‰çš„&quot;\\r\\n&quot;è½¬æ¢æˆ&quot;\\n&quot;ï¼›å½“å†™å…¥æ–‡ä»¶çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå°†&quot;\\n&quot;è½¬æ¢æˆ&quot;\\r\\n&quot;å†™å…¥ï¼Œ å¦‚æœä»¥&quot;äºŒè¿›åˆ¶&quot;æ–¹å¼æ‰“å¼€æ–‡ä»¶ï¼Œåˆ™è¯»å’Œå†™éƒ½ä¸ä¼šè¿›è¡Œè¿™æ ·çš„è½¬æ¢ï¼ŒçœŸæ˜¯ç½—å—¦ã€‚*/int fclose(FILE *fp);int fprintf(FILE *fp, const char *format, ...);char *fgets(char *buf, int size, FILE *fp);/*fgetsçš„åŠŸèƒ½æ˜¯ä»æ–‡ä»¶ä¸­è¯»å–ä¸€è¡Œã€‚å‚æ•°bufæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºä¿å­˜ä»æ–‡ä»¶ä¸­è¯»åˆ°çš„æ•°æ®ã€‚å‚æ•°sizeæ˜¯æ‰“ç®—è¯»å–å†…å®¹çš„é•¿åº¦ã€‚å‚æ•°fpæ˜¯å¾…è¯»å–æ–‡ä»¶çš„æ–‡ä»¶æŒ‡é’ˆã€‚å¦‚æœæ–‡ä»¶ä¸­å°†è¦è¯»å–çš„è¿™ä¸€è¡Œçš„å†…å®¹çš„é•¿åº¦å°äºsizeï¼Œfgetså‡½æ•°å°±è¯»å–ä¸€è¡Œï¼Œå¦‚æœè¿™ä¸€è¡Œçš„å†…å®¹å¤§äºç­‰äºsizeï¼Œfgetså‡½æ•°å°±è¯»å–size-1å­—èŠ‚çš„å†…å®¹ã€‚è°ƒç”¨fgetså‡½æ•°å¦‚æœæˆåŠŸçš„è¯»å–åˆ°å†…å®¹ï¼Œå‡½æ•°è¿”å›bufï¼Œå¦‚æœè¯»å–é”™è¯¯æˆ–æ–‡ä»¶å·²ç»“æŸï¼Œè¿”å›ç©ºï¼Œå³0ã€‚å¦‚æœfgetsè¿”å›ç©ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ–‡ä»¶ç»“æŸè€Œä¸æ˜¯å‘ç”Ÿäº†é”™è¯¯ï¼Œå› ä¸ºå‘ç”Ÿé”™è¯¯çš„æƒ…å†µæå°‘å‡ºç°ã€‚*/ äºŒè¿›åˆ¶æ–‡ä»¶å¤„ç† 12345678910111213141516size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);//ptrï¼šä¸ºå†…å­˜åŒºå—çš„æŒ‡é’ˆï¼Œå­˜æ”¾äº†è¦å†™å…¥çš„æ•°æ®çš„åœ°å€ï¼Œå®ƒå¯ä»¥æ˜¯æ•°ç»„ã€å˜é‡ã€ç»“æ„ä½“ç­‰ã€‚//sizeï¼šå›ºå®šå¡«1ã€‚//nmembï¼šè¡¨ç¤ºæ‰“ç®—å†™å…¥æ•°æ®çš„å­—èŠ‚æ•°ã€‚//fpï¼šè¡¨ç¤ºæ–‡ä»¶æŒ‡é’ˆã€‚//å‡½æ•°çš„è¿”å›å€¼æ˜¯æœ¬æ¬¡æˆåŠŸå†™å…¥æ•°æ®çš„å­—èŠ‚æ•°size_t fread(void *ptr, size_t size, size_t nmemb, FILE *fp);//ptrï¼šç”¨äºå­˜æ”¾ä»æ–‡ä»¶ä¸­è¯»å–æ•°æ®çš„å˜é‡åœ°å€ï¼Œå®ƒå¯ä»¥æ˜¯æ•°ç»„ã€å˜é‡ã€ç»“æ„ä½“ç­‰ã€‚//sizeï¼šå›ºå®šå¡«1ã€‚//nmembï¼šè¡¨ç¤ºæ‰“ç®—è¯»å–çš„æ•°æ®çš„å­—èŠ‚æ•°ã€‚//fpï¼šè¡¨ç¤ºæ–‡ä»¶æŒ‡é’ˆã€‚//è°ƒç”¨freadå‡½æ•°å¦‚æœæˆåŠŸçš„è¯»å–åˆ°å†…å®¹ï¼Œå‡½æ•°è¿”å›è¯»å–åˆ°çš„å†…å®¹çš„å­—èŠ‚æ•°ï¼Œå¦‚æœè¯»å–é”™è¯¯æˆ–æ–‡ä»¶å·²ç»“æŸï¼Œè¿”å›ç©ºï¼Œå³0ã€‚å¦‚æœfreadè¿”å›ç©ºï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æ–‡ä»¶ç»“æŸè€Œä¸æ˜¯å‘ç”Ÿäº†é”™è¯¯ï¼Œå› ä¸ºå‘ç”Ÿé”™è¯¯çš„æƒ…å†µæå°‘å‡ºç°ã€‚ æ–‡ä»¶å®šä½12345678910111213141516171819202122//ftellå‡½æ•°ç”¨æ¥è¿”å›å½“å‰æ–‡ä»¶ä½ç½®æŒ‡é’ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯å½“å‰ä½ç½®ç›¸å¯¹äºæ–‡ä»¶å¼€å§‹ä½ç½®çš„å­—èŠ‚æ•°ã€‚long ftell(FILE *fp);//rewindå‡½æ•°ç”¨æ¥å°†ä½ç½®æŒ‡é’ˆç§»åŠ¨åˆ°æ–‡ä»¶å¼€å¤´void rewind ( FILE *fp );//fseek() ç”¨æ¥å°†ä½ç½®æŒ‡é’ˆç§»åŠ¨åˆ°ä»»æ„ä½ç½®int fseek ( FILE *fp, long offset, int origin );//fp ä¸ºæ–‡ä»¶æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯è¢«ç§»åŠ¨çš„æ–‡ä»¶ã€‚//offset ä¸ºåç§»é‡ï¼Œä¹Ÿå°±æ˜¯è¦ç§»åŠ¨çš„å­—èŠ‚æ•°ã€‚ä¹‹æ‰€ä»¥ä¸º long ç±»å‹ï¼Œæ˜¯å¸Œæœ›ç§»åŠ¨çš„èŒƒå›´æ›´å¤§ï¼Œèƒ½å¤„ç†çš„æ–‡ä»¶æ›´å¤§ã€‚offset ä¸ºæ­£æ—¶ï¼Œå‘åç§»åŠ¨ï¼›offset ä¸ºè´Ÿæ—¶ï¼Œå‘å‰ç§»åŠ¨ã€‚//origin ä¸ºèµ·å§‹ä½ç½®ï¼Œä¹Ÿå°±æ˜¯ä»ä½•å¤„å¼€å§‹è®¡ç®—åç§»é‡ã€‚Cè¯­è¨€è§„å®šçš„èµ·å§‹ä½ç½®æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«ä¸ºï¼š0-æ–‡ä»¶å¼€å¤´ï¼›1-å½“å‰ä½ç½®ï¼›2-æ–‡ä»¶æœ«å°¾ã€‚fseek(fp,100,0); // ä»æ–‡ä»¶çš„å¼€å§‹ä½ç½®è®¡ç®—ï¼Œå‘åç§»åŠ¨100å­—èŠ‚ã€‚fseek(fp,100,1); // ä»æ–‡ä»¶çš„å½“å‰ä½ç½®è®¡ç®—ï¼Œå‘åç§»åŠ¨100å­—èŠ‚ã€‚fseek(fp,-100,2); // ä»æ–‡ä»¶çš„å°¾éƒ¨ä½ç½®è®¡ç®—ï¼Œå‘å‰ç§»åŠ¨100å­—èŠ‚ã€‚/**å½“offsetæ˜¯å‘æ–‡ä»¶å°¾æ–¹å‘åç§»çš„æ—¶å€™ï¼Œæ— è®ºåç§»é‡æ˜¯å¦è¶…å‡ºæ–‡ä»¶å°¾ï¼Œfseekéƒ½æ˜¯è¿”å›0ï¼Œå½“åç§»é‡æ²¡æœ‰è¶…å‡ºæ–‡ä»¶å°¾çš„æ—¶å€™ï¼Œæ–‡ä»¶æŒ‡é’ˆå¼æŒ‡å‘æ­£å¸¸çš„åç§»åœ°å€çš„ï¼Œå½“åç§»é‡è¶…å‡ºæ–‡ä»¶å°¾çš„æ—¶å€™ï¼Œæ–‡ä»¶æŒ‡é’ˆæ˜¯æŒ‡å‘æ–‡ä»¶å°¾çš„ï¼Œä¸ä¼šè¿”å›åç§»å‡ºé”™-1å€¼ã€‚å½“offsetæ˜¯å‘æ–‡ä»¶å¤´æ–¹å‘åç§»çš„æ—¶å€™ï¼Œå¦‚æœoffsetæ²¡æœ‰è¶…å‡ºæ–‡ä»¶å¤´ï¼Œæ˜¯æ­£å¸¸åç§»ï¼Œæ–‡ä»¶æŒ‡é’ˆæŒ‡å‘æ­£ç¡®çš„åç§»åœ°å€ï¼Œfseekè¿”å›å€¼ä¸º0ï¼Œå½“offsetè¶…å‡ºæ–‡ä»¶å¤´æ—¶ï¼Œfseekè¿”å›å‡ºé”™-1å€¼ï¼Œæ–‡ä»¶æŒ‡é’ˆè¿˜æ˜¯å¤„äºåŸæ¥çš„ä½ç½®ã€‚**/ æ–‡ä»¶ç¼“å†²åŒºåœ¨æ“ä½œç³»ç»Ÿä¸­ï¼Œå­˜åœ¨ä¸€ä¸ªå†…å­˜ç¼“å†²åŒºï¼Œå½“è°ƒç”¨fprintfã€fwriteç­‰å‡½æ•°å¾€æ–‡ä»¶å†™å…¥æ•°æ®çš„æ—¶å€™ï¼Œæ•°æ®å¹¶ä¸ä¼šç«‹å³å†™å…¥ç£ç›˜æ–‡ä»¶ï¼Œè€Œæ˜¯å…ˆå†™å…¥ç¼“å†²åŒºï¼Œç­‰ç¼“å†²åŒºçš„æ•°æ®æ»¡äº†ä¹‹åæ‰å†™å…¥æ–‡ä»¶ã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µå°±æ˜¯ç¨‹åºè°ƒç”¨äº†fcloseæ—¶ä¹Ÿä¼šæŠŠç¼“å†²åŒºçš„æ•°æ®å†™å…¥æ–‡ä»¶ã€‚ 1int fflush(FILE *fp); æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯Linuxæ“ä½œç³»ç»Ÿä¸ºæ¯ä¸ªç¨‹åºé»˜è®¤æ‰“å¼€ä¸‰ä¸ªæ–‡ä»¶ï¼Œå³æ ‡å‡†è¾“å…¥stdinã€æ ‡å‡†è¾“å‡ºstdoutå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºstderrï¼Œå…¶ä¸­0å°±æ˜¯stdinï¼Œè¡¨ç¤ºè¾“å…¥æµï¼ŒæŒ‡ä»é”®ç›˜è¾“å…¥ï¼Œ1ä»£è¡¨stdoutï¼Œ2ä»£è¡¨stderrï¼Œ1,2é»˜è®¤æ˜¯æ˜¾ç¤ºå™¨ã€‚ ç›®å½•æ“ä½œ1234567891011121314151617181920212223242526272829303132333435363738//è·å–å½“å‰ç›®å½•char strpwd[301];memset(strpwd,0,sizeof(strpwd));getcwd(strpwd,300);printf(&quot;å½“å‰ç›®å½•æ˜¯ï¼š%s\\n&quot;,strpwd);//åˆ‡æ¢å·¥ä½œç›®å½•int chdir(const char *path);//ç›®å½•çš„åˆ›å»ºå’Œåˆ é™¤int mkdir(const char *pathname, mode_t mode);int rmdir(const char *pathname);//è·å–ç›®å½•ä¸­çš„æ–‡ä»¶åˆ—è¡¨#include &lt;dirent.h&gt;//æ‰“å¼€ç›®å½•DIR *opendir(const char *pathname);//è¯»å–ç›®å½•struct dirent *readdir(DIR *dirp);//å…³é—­ç›®å½•int closedir(DIR *dirp);//ç›®å½•æŒ‡é’ˆDIR *ç›®å½•æŒ‡é’ˆå;//æ¯è°ƒç”¨ä¸€æ¬¡readdirå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªstruct direntçš„åœ°å€ï¼Œå­˜æ”¾äº†æœ¬æ¬¡è¯»å–åˆ°çš„å†…å®¹ï¼Œå®ƒçš„åŸç†ä¸fgetså‡½æ•°è¯»å–æ–‡ä»¶ç›¸åŒã€‚struct dirent&#123; long d_ino; // inode number ç´¢å¼•èŠ‚ç‚¹å· off_t d_off; // offset to this dirent åœ¨ç›®å½•æ–‡ä»¶ä¸­çš„åç§» unsigned short d_reclen; // length of this d_name æ–‡ä»¶åé•¿ unsigned char d_type; // the type of d_name æ–‡ä»¶ç±»å‹ char d_name [NAME_MAX+1]; // file nameæ–‡ä»¶åï¼Œæœ€é•¿255å­—ç¬¦&#125;; æ—¶é—´æ“ä½œ123456789101112131415161718192021222324252627282930313233343536373839404142434445typedef long time_t;time_t tnow;tnow =time(0); // å°†ç©ºåœ°å€ä¼ é€’ç»™timeå‡½æ•°ï¼Œå¹¶å°†timeè¿”å›å€¼èµ‹ç»™å˜é‡tnowtime(&amp;tnow); // å°†å˜é‡tnowçš„åœ°å€ä½œä¸ºå‚æ•°ä¼ é€’ç»™timeå‡½æ•°struct tm&#123; int tm_sec; // ç§’ï¼šå–å€¼åŒºé—´ä¸º[0,59] int tm_min; // åˆ†ï¼šå–å€¼åŒºé—´ä¸º[0,59] int tm_hour; // æ—¶ï¼šå–å€¼åŒºé—´ä¸º[0,23] int tm_mday; // æ—¥æœŸï¼šä¸€ä¸ªæœˆä¸­çš„æ—¥æœŸï¼šå–å€¼åŒºé—´ä¸º[1,31] int tm_mon; // æœˆä»½ï¼šï¼ˆä»ä¸€æœˆå¼€å§‹ï¼Œ0ä»£è¡¨ä¸€æœˆï¼‰ï¼Œå–å€¼åŒºé—´ä¸º[0,11] int tm_year; // å¹´ä»½ï¼šå…¶å€¼ç­‰äºå®é™…å¹´ä»½å‡å»1900 int tm_wday; // æ˜ŸæœŸï¼šå–å€¼åŒºé—´ä¸º[0,6]ï¼Œå…¶ä¸­0ä»£è¡¨æ˜ŸæœŸå¤©ï¼Œ1ä»£è¡¨æ˜ŸæœŸä¸€ï¼Œä»¥æ­¤ç±»æ¨ int tm_yday; // ä»æ¯å¹´çš„1æœˆ1æ—¥å¼€å§‹çš„å¤©æ•°ï¼šå–å€¼åŒºé—´ä¸º[0,365]ï¼Œå…¶ä¸­0ä»£è¡¨1æœˆ1æ—¥ï¼Œ1ä»£è¡¨1æœˆ2æ—¥ï¼Œä»¥æ­¤ç±»æ¨ int tm_isdst; // å¤ä»¤æ—¶æ ‡è¯†ç¬¦ï¼Œè¯¥å­—æ®µæ„ä¹‰ä¸å¤§ï¼Œæˆ‘ä»¬ä¸ç”¨å¤ä»¤æ—¶ã€‚&#125;;struct tm * localtime(const time_t *);//å‡½æ•°ç”¨äºæŠŠstruct tmè¡¨ç¤ºçš„æ—¶é—´è½¬æ¢ä¸ºtime_tè¡¨ç¤ºçš„æ—¶é—´time_t mktime(struct tm *tm);//unsigned int sleep(unsigned int seconds);int usleep(useconds_t usec);struct timeval&#123; long tv_sec; // 1970å¹´1æœˆ1æ—¥åˆ°ç°åœ¨çš„ç§’ã€‚ long tv_usec; // å½“å‰ç§’çš„å¾®å¦™ï¼Œå³ç™¾ä¸‡åˆ†ä¹‹ä¸€ç§’ã€‚&#125;;struct timezone&#123; int tz_minuteswest; // å’ŒUTCï¼ˆæ ¼æ—å¨æ²»æ—¶é—´ï¼‰å·®äº†å¤šå°‘åˆ†é’Ÿã€‚ int tz_dsttime; // type of DST correctionï¼Œä¿®æ­£å‚æ•°æ®ï¼Œå¿½ç•¥&#125;;//gettimeofdayæ˜¯è·å¾—å½“å‰çš„ç§’å’Œå¾®ç§’çš„æ—¶é—´ï¼Œå…¶ä¸­çš„ç§’æ˜¯æŒ‡1970å¹´1æœˆ1æ—¥åˆ°ç°åœ¨çš„ç§’ï¼Œå¾®ç§’æ˜¯æŒ‡å½“å‰ç§’å·²é€å»çš„å¾®ç§’æ•°int gettimeofday(struct timeval *tv, struct timezone *tz ) ç¼–è¯‘é¢„å¤„ç† Cæºç¨‹åºï¼&gt;ç¼–è¯‘é¢„å¤„ç†ï¼&gt;ç¼–è¯‘ï¼&gt;ä¼˜åŒ–ç¨‹åºï¼&gt;æ±‡ç¼–ç¨‹åºï¼&gt;é“¾æ¥ç¨‹åºï¼&gt;å¯æ‰§è¡Œæ–‡ä»¶ é¢„å¤„ç†æŒ‡ä»¤ åŒ…å«æ–‡ä»¶ï¼šå°†æºæ–‡ä»¶ä¸­ä»¥#includeæ ¼å¼åŒ…å«çš„æ–‡ä»¶å¤åˆ¶åˆ°ç¼–è¯‘çš„æºæ–‡ä»¶ä¸­ï¼Œå¯ä»¥æ˜¯å¤´æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒçš„ç¨‹åºæ–‡ä»¶ã€‚ å®å®šä¹‰æŒ‡ä»¤ï¼š#defineæŒ‡ä»¤å®šä¹‰ä¸€ä¸ªå®ï¼Œ#undefæŒ‡ä»¤åˆ é™¤ä¸€ä¸ªå®å®šä¹‰ã€‚ æ¡ä»¶ç¼–è¯‘ï¼šæ ¹æ®#ifdefå’Œ#ifndefåé¢çš„æ¡ä»¶å†³å®šéœ€è¦ç¼–è¯‘çš„ä»£ç ã€‚ 12345678910111213141516171819202122232425262728//å¦‚æœä½¿ç”¨å°–æ‹¬å·&lt;&gt;æ‹¬èµ·æ–‡ä»¶åï¼Œåˆ™ç¼–è¯‘ç¨‹åºå°†åˆ°Cè¯­è¨€å¼€å‘ç¯å¢ƒä¸­è®¾ç½®å¥½çš„ includeæ–‡ä»¶ä¸­å»æ‰¾æŒ‡å®šçš„æ–‡ä»¶ï¼ˆ/usr/includeï¼‰//#includeåŒ…å«æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯ â€œ.hâ€,è¡¨ç¤ºCè¯­è¨€ç¨‹åºçš„å¤´æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯â€œ.câ€,è¡¨ç¤ºåŒ…å«æ™®é€šCè¯­è¨€æºç¨‹åºã€‚#include &lt;æ–‡ä»¶å&gt;#include &quot;æ–‡ä»¶å&quot;//å®å®šä¹‰#define å®å å­—ç¬¦ä¸²/*define å…³é”®å­—â€œdefineâ€ä¸ºå®å®šä¹‰å‘½ä»¤ã€‚å®å æ˜¯ä¸€ä¸ªæ ‡ç¤ºç¬¦ï¼Œå¿…é¡»ç¬¦åˆCè¯­è¨€æ ‡ç¤ºç¬¦çš„è§„å®šï¼Œä¸€èˆ¬ä»¥å¤§å†™å­—æ¯æ ‡è¯†å®åã€‚å­—ç¬¦ä¸² å¯ä»¥æ˜¯å¸¸æ•°ï¼Œè¡¨è¾¾å¼ï¼Œæ ¼å¼ä¸²ç­‰ã€‚åœ¨å‰é¢ä½¿ç”¨çš„ç¬¦å·å¸¸é‡çš„å®šä¹‰å°±æ˜¯ä¸€ä¸ªæ— å‚æ•°å®å®šä¹‰ã€‚*/#define PI 3.141592/*å®å®šä¹‰æ˜¯å®åæ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåœ¨å®å±•å¼€æ—¶åˆä»¥è¯¥å­—ç¬¦ä¸²å–ä»£å®åã€‚è¿™åªæ˜¯ä¸€ç§ç®€å•çš„ä»£æ¢ï¼Œå­—ç¬¦ä¸²ä¸­å¯ä»¥å«ä»»ä½•å­—ç¬¦ï¼Œå¯ä»¥æ˜¯å¸¸æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯è¡¨è¾¾å¼ï¼Œç¼–è¯‘é¢„å¤„ç†æ—¶ä¸ä¼šå¯¹å®ƒè¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œåªèƒ½åœ¨ç¼–è¯‘å·²è¢«å®å±•å¼€åçš„æºç¨‹åºæ—¶å‘ç°ã€‚ å®å®šä¹‰å…è®¸åµŒå¥—ï¼Œåœ¨å®å®šä¹‰çš„å­—ç¬¦ä¸²ä¸­å¯ä»¥ä½¿ç”¨å·²ç»å®šä¹‰çš„å®åã€‚åœ¨å®å±•å¼€æ—¶ç”±é¢„å¤„ç†ç¨‹åºå±‚å±‚æ›¿æ¢ã€‚å»ºè®®ä¸è¦è¿™ä¹ˆåšï¼Œä¼šæŠŠç¨‹åºå¤æ‚åŒ–ã€‚ ä¹ æƒ¯ä¸Šå®åç”¨å¤§å†™å­—æ¯è¡¨ç¤ºï¼Œä»¥æ–¹ä¾¿ä¸å˜é‡åŒºåˆ«ã€‚ä½†ä¹Ÿå¯ä»¥ç”¨å°å†™å­—æ¯ã€‚*///å¸¦å‚æ•°çš„å®#define å®å(å½¢å‚è¡¨) å­—ç¬¦ä¸²#define MAX(x,y) ((x)&gt;(y) ? (x) : (y)) æ¡ä»¶ç¼–è¯‘123456789101112131415#ifdef æ ‡è¯†ç¬¦ ç¨‹åºæ®µ 1#else ç¨‹åºæ®µ 2#endif#ifndef æ ‡è¯†ç¬¦ ç¨‹åºæ®µ 1#else ç¨‹åºæ®µ 2 #endif//å–æ¶ˆå·²å®šä¹‰çš„æ ‡å¿—ç¬¦#undef ç³»ç»Ÿé”™è¯¯æˆ‘ä»¬åœ¨å†™ç¨‹åºçš„æ—¶å€™éœ€è¦è°ƒç”¨Cè¯­è¨€æä¾›çš„åº“å‡½æ•°ï¼Œå¹¶é€šè¿‡å‡½æ•°çš„è¿”å›å€¼åˆ¤æ–­è°ƒç”¨æ˜¯å¦æˆåŠŸã€‚å…¶å®åœ¨Cè¯­è¨€ä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªå…¨å±€å˜é‡errnoï¼Œå­˜æ”¾äº†å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­äº§ç”Ÿçš„é”™è¯¯ç ã€‚ ä¸ºé˜²æ­¢å’Œæ­£å¸¸çš„è¿”å›å€¼æ··æ·†ï¼Œåº“å‡½æ•°çš„è°ƒç”¨ä¸€èˆ¬å¹¶ä¸ç›´æ¥è¿”å›é”™è¯¯ç ï¼Œè€Œæ˜¯å°†é”™è¯¯ç ï¼ˆæ˜¯ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä¸åŒçš„å€¼ä»£è¡¨ä¸åŒçš„å«ä¹‰ï¼‰å­˜å…¥ä¸€ä¸ªåä¸º errno çš„å…¨å±€å˜é‡ä¸­ï¼Œerrno ä¸åŒæ•°å€¼æ‰€ä»£è¡¨çš„é”™è¯¯æ¶ˆæ¯å®šä¹‰åœ¨ &lt;errno.h&gt; æ–‡ä»¶ä¸­ã€‚å¦‚æœåº“å‡½æ•°è°ƒç”¨å¤±è´¥ï¼Œå¯ä»¥é€šè¿‡è¯»å‡º errno çš„å€¼æ¥ç¡®å®šé—®é¢˜æ‰€åœ¨ï¼Œæ¨æµ‹ç¨‹åºå‡ºé”™çš„åŸå› ï¼Œè¿™ä¹Ÿæ˜¯è°ƒè¯•ç¨‹åºçš„ä¸€ä¸ªé‡è¦æ–¹æ³•ã€‚ é…åˆ strerrorå’Œperrorä¸¤ä¸ªåº“å‡½æ•°ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æŸ¥çœ‹å‡ºé”™çš„è¯¦ç»†ä¿¡æ¯ã€‚ strerror åœ¨ &lt;string.h&gt; ä¸­å£°æ˜ï¼Œç”¨äºè·å–é”™è¯¯ç å¯¹åº”çš„æ¶ˆæ¯æè¿°ã€‚ perror åœ¨ &lt;stdio.h&gt; ä¸­å£°æ˜ï¼Œç”¨äºåœ¨å±å¹•ä¸Šæœ€è¿‘ä¸€æ¬¡ç³»ç»Ÿé”™è¯¯ç æ¶ˆæ¯æè¿°ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å†™çš„ç¨‹åºè¿è¡Œäºåå°ï¼Œåœ¨å±å¹•ä¸Šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯æ²¡æœ‰æ„ä¹‰ã€‚ 1234char *strerror(int errno);//strerror()ç”¨æ¥ä¾å‚æ•°errno çš„é”™è¯¯ä»£ç æ¥æŸ¥è¯¢å…¶é”™è¯¯åŸå› çš„æè¿°å­—ç¬¦ä¸²ï¼Œç„¶åå°†è¯¥å­—ç¬¦ä¸²æŒ‡é’ˆè¿”å›ã€‚ å‚è€ƒ https://freecplus.net/3e27bfb1a810493d9a0550131e2a1633.html","tags":[{"name":"C++","slug":"C","permalink":"http://airshu.github.io/tags/C/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"C++","slug":"ç¨‹åºè¯­è¨€/C","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C/"}]},{"title":"cefç¬”è®°","date":"2022-03-08T02:25:29.729Z","path":"wiki/ç¨‹åºè¯­è¨€/C++/cef/","text":"å®˜ç½‘ï¼šhttps://github.com/chromiumembedded/cefä¸‹è½½åœ°å€ï¼šhttp://opensource.spotify.com/cefbuilds/index.html Pythonç‰ˆï¼š https://github.com/cztomczak/cefpython","tags":[{"name":"C++","slug":"C","permalink":"http://airshu.github.io/tags/C/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"C++","slug":"ç¨‹åºè¯­è¨€/C","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C/"}]},{"title":"socketç¼–ç¨‹ç¬”è®°","date":"2022-03-08T02:25:29.729Z","path":"wiki/ç¨‹åºè¯­è¨€/C++/socketç¼–ç¨‹ç¬”è®°/","text":"APIä»‹ç»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960int socket(int af, int type, int protocol);af ä¸ºåœ°å€æ—ï¼ˆAddress Familyï¼‰ï¼Œä¹Ÿå°±æ˜¯ IP åœ°å€ç±»å‹ï¼Œå¸¸ç”¨çš„æœ‰ AF_INET å’Œ AF_INET6ã€‚AF æ˜¯â€œAddress Familyâ€çš„ç®€å†™ï¼ŒINETæ˜¯â€œInetnetâ€çš„ç®€å†™ã€‚AF_INET è¡¨ç¤º IPv4 åœ°å€ï¼Œä¾‹å¦‚ 127.0.0.1ï¼›AF_INET6 è¡¨ç¤º IPv6 åœ°å€ï¼Œä¾‹å¦‚ 1030::C9B4:FF12:48AA:1A2Bã€‚type ä¸ºæ•°æ®ä¼ è¾“æ–¹å¼ï¼Œå¸¸ç”¨çš„æœ‰ SOCK_STREAM å’Œ SOCK_DGRAMprotocol è¡¨ç¤ºä¼ è¾“åè®®ï¼Œå¸¸ç”¨çš„æœ‰ IPPROTO_TCP å’Œ IPPTOTO_UDPint bind(int sock, struct sockaddr *addr, socklen_t addrlen); //Linuxint bind(SOCKET sock, const struct sockaddr *addr, int addrlen); //Windowssock ä¸º socket æ–‡ä»¶æè¿°ç¬¦ï¼Œaddr ä¸º sockaddr ç»“æ„ä½“å˜é‡çš„æŒ‡é’ˆï¼Œaddrlen ä¸º addr å˜é‡çš„å¤§å°ï¼Œå¯ç”± sizeof() è®¡ç®—å¾—å‡ºã€‚struct sockaddr_in&#123; sa_family_t sin_family; //åœ°å€æ—ï¼ˆAddress Familyï¼‰ï¼Œä¹Ÿå°±æ˜¯åœ°å€ç±»å‹ uint16_t sin_port; //16ä½çš„ç«¯å£å· struct in_addr sin_addr; //32ä½IPåœ°å€ char sin_zero[8]; //ä¸ä½¿ç”¨ï¼Œä¸€èˆ¬ç”¨0å¡«å……&#125;;int connect(int sock, struct sockaddr *serv_addr, socklen_t addrlen); //Linuxint connect(SOCKET sock, const struct sockaddr *serv_addr, int addrlen); //Windowsè®©å¥—æ¥å­—è¿›å…¥è¢«åŠ¨ç›‘å¬çŠ¶æ€ï¼Œæ‰€è°“è¢«åŠ¨ç›‘å¬ï¼Œæ˜¯æŒ‡å½“æ²¡æœ‰å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œå¥—æ¥å­—å¤„äºâ€œç¡çœ â€çŠ¶æ€ï¼Œåªæœ‰å½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œå¥—æ¥å­—æ‰ä¼šè¢«â€œå”¤é†’â€æ¥å“åº”è¯·æ±‚ã€‚ int listen(int sock, int backlog); //Linuxint listen(SOCKET sock, int backlog); //Windowssock ä¸ºéœ€è¦è¿›å…¥ç›‘å¬çŠ¶æ€çš„å¥—æ¥å­—backlog ä¸ºè¯·æ±‚é˜Ÿåˆ—çš„æœ€å¤§é•¿åº¦è¯·æ±‚é˜Ÿåˆ—å½“å¥—æ¥å­—æ­£åœ¨å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œå¦‚æœæœ‰æ–°çš„è¯·æ±‚è¿›æ¥ï¼Œå¥—æ¥å­—æ˜¯æ²¡æ³•å¤„ç†çš„ï¼Œåªèƒ½æŠŠå®ƒæ”¾è¿›ç¼“å†²åŒºï¼Œå¾…å½“å‰è¯·æ±‚å¤„ç†å®Œæ¯•åï¼Œå†ä»ç¼“å†²åŒºä¸­è¯»å–å‡ºæ¥å¤„ç†ã€‚å¦‚æœä¸æ–­æœ‰æ–°çš„è¯·æ±‚è¿›æ¥ï¼Œå®ƒä»¬å°±æŒ‰ç…§å…ˆåé¡ºåºåœ¨ç¼“å†²åŒºä¸­æ’é˜Ÿï¼Œç›´åˆ°ç¼“å†²åŒºæ»¡ã€‚è¿™ä¸ªç¼“å†²åŒºï¼Œå°±ç§°ä¸ºè¯·æ±‚é˜Ÿåˆ—ï¼ˆRequest Queueï¼‰ã€‚ç¼“å†²åŒºçš„é•¿åº¦ï¼ˆèƒ½å­˜æ”¾å¤šå°‘ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼‰å¯ä»¥é€šè¿‡ listen() å‡½æ•°çš„ backlog å‚æ•°æŒ‡å®šï¼Œä½†ç©¶ç«Ÿä¸ºå¤šå°‘å¹¶æ²¡æœ‰ä»€ä¹ˆæ ‡å‡†ï¼Œå¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚æ¥å®šï¼Œå¹¶å‘é‡å°çš„è¯å¯ä»¥æ˜¯10æˆ–è€…20ã€‚å¦‚æœå°† backlog çš„å€¼è®¾ç½®ä¸º SOMAXCONNï¼Œå°±ç”±ç³»ç»Ÿæ¥å†³å®šè¯·æ±‚é˜Ÿåˆ—é•¿åº¦ï¼Œè¿™ä¸ªå€¼ä¸€èˆ¬æ¯”è¾ƒå¤§ï¼Œå¯èƒ½æ˜¯å‡ ç™¾ï¼Œæˆ–è€…æ›´å¤šã€‚å½“è¯·æ±‚é˜Ÿåˆ—æ»¡æ—¶ï¼Œå°±ä¸å†æ¥æ”¶æ–°çš„è¯·æ±‚ï¼Œå¯¹äº Linuxï¼Œå®¢æˆ·ç«¯ä¼šæ”¶åˆ° ECONNREFUSED é”™è¯¯ï¼Œå¯¹äº Windowsï¼Œå®¢æˆ·ç«¯ä¼šæ”¶åˆ° WSAECONNREFUSED é”™è¯¯ã€‚int accept(int sock, struct sockaddr *addr, socklen_t *addrlen); //LinuxSOCKET accept(SOCKET sock, struct sockaddr *addr, int *addrlen); //Windowsè¿”å›ä¸€ä¸ªæ–°çš„å¥—æ¥å­—æ¥å’Œå®¢æˆ·ç«¯é€šä¿¡ï¼Œaddr ä¿å­˜äº†å®¢æˆ·ç«¯çš„IPåœ°å€å’Œç«¯å£å·ï¼Œè€Œ sock æ˜¯æœåŠ¡å™¨ç«¯çš„å¥—æ¥å­—Linuxä¸‹çš„æ•°æ®æ¥æ”¶å’Œå‘é€ä¼šå°†ç¼“å†²åŒº buf ä¸­çš„ nbytes ä¸ªå­—èŠ‚å†™å…¥æ–‡ä»¶ fdï¼ŒæˆåŠŸåˆ™è¿”å›å†™å…¥çš„å­—èŠ‚æ•°ï¼Œå¤±è´¥åˆ™è¿”å› -1ã€‚ssize_t write(int fd, const void *buf, size_t nbytes);fd ä¸ºè¦å†™å…¥çš„æ–‡ä»¶çš„æè¿°ç¬¦ï¼Œbuf ä¸ºè¦å†™å…¥çš„æ•°æ®çš„ç¼“å†²åŒºåœ°å€ï¼Œnbytes ä¸ºè¦å†™å…¥çš„æ•°æ®çš„å­—èŠ‚æ•°ã€‚ ä¼šä» fd æ–‡ä»¶ä¸­è¯»å– nbytes ä¸ªå­—èŠ‚å¹¶ä¿å­˜åˆ°ç¼“å†²åŒº bufï¼ŒæˆåŠŸåˆ™è¿”å›è¯»å–åˆ°çš„å­—èŠ‚æ•°ï¼ˆä½†é‡åˆ°æ–‡ä»¶ç»“å°¾åˆ™è¿”å›0ï¼‰ï¼Œå¤±è´¥åˆ™è¿”å› -1ã€‚ssize_t read(int fd, void *buf, size_t nbytes);Windowsä¸‹çš„æ•°æ®æ¥æ”¶å’Œå‘é€int send(SOCKET sock, const char *buf, int len, int flags);int recv(SOCKET sock, char *buf, int len, int flags); åŸºæœ¬æ¦‚å¿µsocketç¼“å†²åŒºæ¯ä¸ª socket è¢«åˆ›å»ºåï¼Œéƒ½ä¼šåˆ†é…ä¸¤ä¸ªç¼“å†²åŒºï¼Œè¾“å…¥ç¼“å†²åŒºå’Œè¾“å‡ºç¼“å†²åŒºã€‚ write()&#x2F;send() å¹¶ä¸ç«‹å³å‘ç½‘ç»œä¸­ä¼ è¾“æ•°æ®ï¼Œè€Œæ˜¯å…ˆå°†æ•°æ®å†™å…¥ç¼“å†²åŒºä¸­ï¼Œå†ç”±TCPåè®®å°†æ•°æ®ä»ç¼“å†²åŒºå‘é€åˆ°ç›®æ ‡æœºå™¨ã€‚ä¸€æ—¦å°†æ•°æ®å†™å…¥åˆ°ç¼“å†²åŒºï¼Œå‡½æ•°å°±å¯ä»¥æˆåŠŸè¿”å›ï¼Œä¸ç®¡å®ƒä»¬æœ‰æ²¡æœ‰åˆ°è¾¾ç›®æ ‡æœºå™¨ï¼Œä¹Ÿä¸ç®¡å®ƒä»¬ä½•æ—¶è¢«å‘é€åˆ°ç½‘ç»œï¼Œè¿™äº›éƒ½æ˜¯TCPåè®®è´Ÿè´£çš„äº‹æƒ…ã€‚ TCPåè®®ç‹¬ç«‹äº write()&#x2F;send() å‡½æ•°ï¼Œæ•°æ®æœ‰å¯èƒ½åˆšè¢«å†™å…¥ç¼“å†²åŒºå°±å‘é€åˆ°ç½‘ç»œï¼Œä¹Ÿå¯èƒ½åœ¨ç¼“å†²åŒºä¸­ä¸æ–­ç§¯å‹ï¼Œå¤šæ¬¡å†™å…¥çš„æ•°æ®è¢«ä¸€æ¬¡æ€§å‘é€åˆ°ç½‘ç»œï¼Œè¿™å–å†³äºå½“æ—¶çš„ç½‘ç»œæƒ…å†µã€å½“å‰çº¿ç¨‹æ˜¯å¦ç©ºé—²ç­‰è¯¸å¤šå› ç´ ï¼Œä¸ç”±ç¨‹åºå‘˜æ§åˆ¶ã€‚ è¿™äº›I&#x2F;Oç¼“å†²åŒºç‰¹æ€§å¯æ•´ç†å¦‚ä¸‹ï¼š I&#x2F;Oç¼“å†²åŒºåœ¨æ¯ä¸ªTCPå¥—æ¥å­—ä¸­å•ç‹¬å­˜åœ¨ï¼› I&#x2F;Oç¼“å†²åŒºåœ¨åˆ›å»ºå¥—æ¥å­—æ—¶è‡ªåŠ¨ç”Ÿæˆï¼› å³ä½¿å…³é—­å¥—æ¥å­—ä¹Ÿä¼šç»§ç»­ä¼ é€è¾“å‡ºç¼“å†²åŒºä¸­é—ç•™çš„æ•°æ®ï¼› å…³é—­å¥—æ¥å­—å°†ä¸¢å¤±è¾“å…¥ç¼“å†²åŒºä¸­çš„æ•°æ®ã€‚ è¾“å…¥è¾“å‡ºç¼“å†²åŒºçš„é»˜è®¤å¤§å°ä¸€èˆ¬éƒ½æ˜¯ 8Kï¼Œå¯ä»¥é€šè¿‡ getsockopt() å‡½æ•°è·å–ï¼š 12345unsigned optVal;int optLen = sizeof(int);getsockopt(servSock, SOL_SOCKET, SO_SNDBUF, (char*)&amp;optVal, &amp;optLen);printf(&quot;Buffer length: %d\\n&quot;, optVal); é˜»å¡æ¨¡å¼å¯¹äºTCPå¥—æ¥å­—ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ï¼Œå½“ä½¿ç”¨ write()&#x2F;send() å‘é€æ•°æ®æ—¶ï¼š é¦–å…ˆä¼šæ£€æŸ¥ç¼“å†²åŒºï¼Œå¦‚æœç¼“å†²åŒºçš„å¯ç”¨ç©ºé—´é•¿åº¦å°äºè¦å‘é€çš„æ•°æ®ï¼Œé‚£ä¹ˆ write()&#x2F;send() ä¼šè¢«é˜»å¡ï¼ˆæš‚åœæ‰§è¡Œï¼‰ï¼Œç›´åˆ°ç¼“å†²åŒºä¸­çš„æ•°æ®è¢«å‘é€åˆ°ç›®æ ‡æœºå™¨ï¼Œè…¾å‡ºè¶³å¤Ÿçš„ç©ºé—´ï¼Œæ‰å”¤é†’ write()&#x2F;send() å‡½æ•°ç»§ç»­å†™å…¥æ•°æ®ã€‚ å¦‚æœTCPåè®®æ­£åœ¨å‘ç½‘ç»œå‘é€æ•°æ®ï¼Œé‚£ä¹ˆè¾“å‡ºç¼“å†²åŒºä¼šè¢«é”å®šï¼Œä¸å…è®¸å†™å…¥ï¼Œwrite()&#x2F;send() ä¹Ÿä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ•°æ®å‘é€å®Œæ¯•ç¼“å†²åŒºè§£é”ï¼Œwrite()&#x2F;send() æ‰ä¼šè¢«å”¤é†’ã€‚ å¦‚æœè¦å†™å…¥çš„æ•°æ®å¤§äºç¼“å†²åŒºçš„æœ€å¤§é•¿åº¦ï¼Œé‚£ä¹ˆå°†åˆ†æ‰¹å†™å…¥ã€‚ ç›´åˆ°æ‰€æœ‰æ•°æ®è¢«å†™å…¥ç¼“å†²åŒº write()&#x2F;send() æ‰èƒ½è¿”å›ã€‚ å½“ä½¿ç”¨ read()&#x2F;recv() è¯»å–æ•°æ®æ—¶ï¼š é¦–å…ˆä¼šæ£€æŸ¥ç¼“å†²åŒºï¼Œå¦‚æœç¼“å†²åŒºä¸­æœ‰æ•°æ®ï¼Œé‚£ä¹ˆå°±è¯»å–ï¼Œå¦åˆ™å‡½æ•°ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°ç½‘ç»œä¸Šæœ‰æ•°æ®åˆ°æ¥ã€‚ å¦‚æœè¦è¯»å–çš„æ•°æ®é•¿åº¦å°äºç¼“å†²åŒºä¸­çš„æ•°æ®é•¿åº¦ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä¸€æ¬¡æ€§å°†ç¼“å†²åŒºä¸­çš„æ‰€æœ‰æ•°æ®è¯»å‡ºï¼Œå‰©ä½™æ•°æ®å°†ä¸æ–­ç§¯å‹ï¼Œç›´åˆ°æœ‰ read()&#x2F;recv() å‡½æ•°å†æ¬¡è¯»å–ã€‚ ç›´åˆ°è¯»å–åˆ°æ•°æ®å read()&#x2F;recv() å‡½æ•°æ‰ä¼šè¿”å›ï¼Œå¦åˆ™å°±ä¸€ç›´è¢«é˜»å¡ã€‚ è¿™å°±æ˜¯TCPå¥—æ¥å­—çš„é˜»å¡æ¨¡å¼ã€‚æ‰€è°“é˜»å¡ï¼Œå°±æ˜¯ä¸Šä¸€æ­¥åŠ¨ä½œæ²¡æœ‰å®Œæˆï¼Œä¸‹ä¸€æ­¥åŠ¨ä½œå°†æš‚åœï¼Œç›´åˆ°ä¸Šä¸€æ­¥åŠ¨ä½œå®Œæˆåæ‰èƒ½ç»§ç»­ï¼Œä»¥ä¿æŒåŒæ­¥æ€§ã€‚ TCPæ•°æ®æŠ¥ç»“æ„ä»¥åŠä¸‰æ¬¡æ¡æ‰‹TCPï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æ§åˆ¶åè®®ï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„é€šä¿¡åè®®ï¼Œæ•°æ®åœ¨ä¼ è¾“å‰è¦å»ºç«‹è¿æ¥ï¼Œä¼ è¾“å®Œæ¯•åè¿˜è¦æ–­å¼€è¿æ¥ã€‚ å®¢æˆ·ç«¯åœ¨æ”¶å‘æ•°æ®å‰è¦ä½¿ç”¨ connect() å‡½æ•°å’ŒæœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚å»ºç«‹è¿æ¥çš„ç›®çš„æ˜¯ä¿è¯IPåœ°å€ã€ç«¯å£ã€ç‰©ç†é“¾è·¯ç­‰æ­£ç¡®æ— è¯¯ï¼Œä¸ºæ•°æ®çš„ä¼ è¾“å¼€è¾Ÿé€šé“ã€‚ TCPå»ºç«‹è¿æ¥æ—¶è¦ä¼ è¾“ä¸‰ä¸ªæ•°æ®åŒ…ï¼Œä¿—ç§°ä¸‰æ¬¡æ¡æ‰‹ï¼ˆThree-way Handshakingï¼‰ã€‚å¯ä»¥å½¢è±¡çš„æ¯”å–»ä¸ºä¸‹é¢çš„å¯¹è¯ï¼š [Shake 1] å¥—æ¥å­—Aï¼šâ€œä½ å¥½ï¼Œå¥—æ¥å­—Bï¼Œæˆ‘è¿™é‡Œæœ‰æ•°æ®è¦ä¼ é€ç»™ä½ ï¼Œå»ºç«‹è¿æ¥å§ã€‚â€ [Shake 2] å¥—æ¥å­—Bï¼šâ€œå¥½çš„ï¼Œæˆ‘è¿™è¾¹å·²å‡†å¤‡å°±ç»ªã€‚â€ [Shake 3] å¥—æ¥å­—Aï¼šâ€œè°¢è°¢ä½ å—ç†æˆ‘çš„è¯·æ±‚ã€‚â€ TCPæ•°æ®æŠ¥ç»“æ„ å¸¦é˜´å½±çš„å‡ ä¸ªå­—æ®µéœ€è¦é‡ç‚¹è¯´æ˜ä¸€ä¸‹ï¼š åºå·ï¼šSeqï¼ˆSequence Numberï¼‰åºå·å 32ä½ï¼Œç”¨æ¥æ ‡è¯†ä»è®¡ç®—æœºAå‘é€åˆ°è®¡ç®—æœºBçš„æ•°æ®åŒ…çš„åºå·ï¼Œè®¡ç®—æœºå‘é€æ•°æ®æ—¶å¯¹æ­¤è¿›è¡Œæ ‡è®°ã€‚ ç¡®è®¤å·ï¼šAckï¼ˆAcknowledge Numberï¼‰ç¡®è®¤å·å 32ä½ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯éƒ½å¯ä»¥å‘é€ï¼ŒAck &#x3D; Seq + 1ã€‚ æ ‡å¿—ä½ï¼šæ¯ä¸ªæ ‡å¿—ä½å ç”¨1Bitï¼Œå…±æœ‰6ä¸ªï¼Œåˆ†åˆ«ä¸º URGã€ACKã€PSHã€RSTã€SYNã€FINï¼Œå…·ä½“å«ä¹‰å¦‚ä¸‹ï¼š URGï¼šç´§æ€¥æŒ‡é’ˆï¼ˆurgent pointerï¼‰æœ‰æ•ˆã€‚ ACKï¼šç¡®è®¤åºå·æœ‰æ•ˆã€‚ PSHï¼šæ¥æ”¶æ–¹åº”è¯¥å°½å¿«å°†è¿™ä¸ªæŠ¥æ–‡äº¤ç»™åº”ç”¨å±‚ã€‚ RSTï¼šé‡ç½®è¿æ¥ã€‚ SYNï¼šå»ºç«‹ä¸€ä¸ªæ–°è¿æ¥ã€‚ FINï¼šæ–­å¼€ä¸€ä¸ªè¿æ¥ã€‚ Seq æ˜¯ Sequence çš„ç¼©å†™ï¼Œè¡¨ç¤ºåºåˆ—ï¼›Ack(ACK) æ˜¯ Acknowledge çš„ç¼©å†™ï¼Œè¡¨ç¤ºç¡®è®¤ï¼›SYN æ˜¯ Synchronous çš„ç¼©å†™ï¼Œæ„¿æ„æ˜¯â€œåŒæ­¥çš„â€ï¼Œè¿™é‡Œè¡¨ç¤ºå»ºç«‹åŒæ­¥è¿æ¥ï¼›FIN æ˜¯ Finish çš„ç¼©å†™ï¼Œè¡¨ç¤ºå®Œæˆã€‚ è¿æ¥çš„å»ºç«‹ï¼ˆä¸‰æ¬¡æ¡æ‰‹ï¼‰ å®¢æˆ·ç«¯è°ƒç”¨ socket() å‡½æ•°åˆ›å»ºå¥—æ¥å­—åï¼Œå› ä¸ºæ²¡æœ‰å»ºç«‹è¿æ¥ï¼Œæ‰€ä»¥å¥—æ¥å­—å¤„äºCLOSEDçŠ¶æ€ï¼›æœåŠ¡å™¨ç«¯è°ƒç”¨ listen() å‡½æ•°åï¼Œå¥—æ¥å­—è¿›å…¥LISTENçŠ¶æ€ï¼Œå¼€å§‹ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚ã€‚ è¿™ä¸ªæ—¶å€™ï¼Œå®¢æˆ·ç«¯å¼€å§‹å‘èµ·è¯·æ±‚ï¼š å½“å®¢æˆ·ç«¯è°ƒç”¨ connect() å‡½æ•°åï¼ŒTCPåè®®ä¼šç»„å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œå¹¶è®¾ç½® SYN æ ‡å¿—ä½ï¼Œè¡¨ç¤ºè¯¥æ•°æ®åŒ…æ˜¯ç”¨æ¥å»ºç«‹åŒæ­¥è¿æ¥çš„ã€‚åŒæ—¶ç”Ÿæˆä¸€ä¸ªéšæœºæ•°å­— 1000ï¼Œå¡«å……â€œåºå·ï¼ˆSeqï¼‰â€å­—æ®µï¼Œè¡¨ç¤ºè¯¥æ•°æ®åŒ…çš„åºå·ã€‚å®Œæˆè¿™äº›å·¥ä½œï¼Œå¼€å§‹å‘æœåŠ¡å™¨ç«¯å‘é€æ•°æ®åŒ…ï¼Œå®¢æˆ·ç«¯å°±è¿›å…¥äº†SYN-SENDçŠ¶æ€ã€‚ æœåŠ¡å™¨ç«¯æ”¶åˆ°æ•°æ®åŒ…ï¼Œæ£€æµ‹åˆ°å·²ç»è®¾ç½®äº† SYN æ ‡å¿—ä½ï¼Œå°±çŸ¥é“è¿™æ˜¯å®¢æˆ·ç«¯å‘æ¥çš„å»ºç«‹è¿æ¥çš„â€œè¯·æ±‚åŒ…â€ã€‚æœåŠ¡å™¨ç«¯ä¹Ÿä¼šç»„å»ºä¸€ä¸ªæ•°æ®åŒ…ï¼Œå¹¶è®¾ç½® SYN å’Œ ACK æ ‡å¿—ä½ï¼ŒSYN è¡¨ç¤ºè¯¥æ•°æ®åŒ…ç”¨æ¥å»ºç«‹è¿æ¥ï¼ŒACK ç”¨æ¥ç¡®è®¤æ”¶åˆ°äº†åˆšæ‰å®¢æˆ·ç«¯å‘é€çš„æ•°æ®åŒ…ã€‚ æœåŠ¡å™¨ç”Ÿæˆä¸€ä¸ªéšæœºæ•° 2000ï¼Œå¡«å……â€œåºå·ï¼ˆSeqï¼‰â€å­—æ®µã€‚2000 å’Œå®¢æˆ·ç«¯æ•°æ®åŒ…æ²¡æœ‰å…³ç³»ã€‚æœåŠ¡å™¨å°†å®¢æˆ·ç«¯æ•°æ®åŒ…åºå·ï¼ˆ1000ï¼‰åŠ 1ï¼Œå¾—åˆ°1001ï¼Œå¹¶ç”¨è¿™ä¸ªæ•°å­—å¡«å……â€œç¡®è®¤å·ï¼ˆAckï¼‰â€å­—æ®µã€‚æœåŠ¡å™¨å°†æ•°æ®åŒ…å‘å‡ºï¼Œè¿›å…¥SYN-RECVçŠ¶æ€ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æ•°æ®åŒ…ï¼Œæ£€æµ‹åˆ°å·²ç»è®¾ç½®äº† SYN å’Œ ACK æ ‡å¿—ä½ï¼Œå°±çŸ¥é“è¿™æ˜¯æœåŠ¡å™¨å‘æ¥çš„â€œç¡®è®¤åŒ…â€ã€‚å®¢æˆ·ç«¯ä¼šæ£€æµ‹â€œç¡®è®¤å·ï¼ˆAckï¼‰â€å­—æ®µï¼Œçœ‹å®ƒçš„å€¼æ˜¯å¦ä¸º 1000+1ï¼Œå¦‚æœæ˜¯å°±è¯´æ˜è¿æ¥å»ºç«‹æˆåŠŸã€‚æ¥ä¸‹æ¥ï¼Œå®¢æˆ·ç«¯ä¼šç»§ç»­ç»„å»ºæ•°æ®åŒ…ï¼Œå¹¶è®¾ç½® ACK æ ‡å¿—ä½ï¼Œè¡¨ç¤ºå®¢æˆ·ç«¯æ­£ç¡®æ¥æ”¶äº†æœåŠ¡å™¨å‘æ¥çš„â€œç¡®è®¤åŒ…â€ã€‚åŒæ—¶ï¼Œå°†åˆšæ‰æœåŠ¡å™¨å‘æ¥çš„æ•°æ®åŒ…åºå·ï¼ˆ2000ï¼‰åŠ 1ï¼Œå¾—åˆ° 2001ï¼Œå¹¶ç”¨è¿™ä¸ªæ•°å­—æ¥å¡«å……â€œç¡®è®¤å·ï¼ˆAckï¼‰â€å­—æ®µã€‚å®¢æˆ·ç«¯å°†æ•°æ®åŒ…å‘å‡ºï¼Œè¿›å…¥ESTABLISEDçŠ¶æ€ï¼Œè¡¨ç¤ºè¿æ¥å·²ç»æˆåŠŸå»ºç«‹ã€‚ æœåŠ¡å™¨ç«¯æ”¶åˆ°æ•°æ®åŒ…ï¼Œæ£€æµ‹åˆ°å·²ç»è®¾ç½®äº† ACK æ ‡å¿—ä½ï¼Œå°±çŸ¥é“è¿™æ˜¯å®¢æˆ·ç«¯å‘æ¥çš„â€œç¡®è®¤åŒ…â€ã€‚æœåŠ¡å™¨ä¼šæ£€æµ‹â€œç¡®è®¤å·ï¼ˆAckï¼‰â€å­—æ®µï¼Œçœ‹å®ƒçš„å€¼æ˜¯å¦ä¸º 2000+1ï¼Œå¦‚æœæ˜¯å°±è¯´æ˜è¿æ¥å»ºç«‹æˆåŠŸï¼ŒæœåŠ¡å™¨è¿›å…¥ESTABLISEDçŠ¶æ€ã€‚è‡³æ­¤ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½è¿›å…¥äº†ESTABLISEDçŠ¶æ€ï¼Œè¿æ¥å»ºç«‹æˆåŠŸï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥æ”¶å‘æ•°æ®äº†ã€‚ æ•°æ®çš„ä¼ è¾“è¿‡ç¨‹ ä¸Šå›¾ç»™å‡ºäº†ä¸»æœºAåˆ†2æ¬¡ï¼ˆåˆ†2ä¸ªæ•°æ®åŒ…ï¼‰å‘ä¸»æœºBä¼ é€’200å­—èŠ‚çš„è¿‡ç¨‹ã€‚é¦–å…ˆï¼Œä¸»æœºAé€šè¿‡1ä¸ªæ•°æ®åŒ…å‘é€100ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œæ•°æ®åŒ…çš„ Seq å·è®¾ç½®ä¸º 1200ã€‚ä¸»æœºBä¸ºäº†ç¡®è®¤è¿™ä¸€ç‚¹ï¼Œå‘ä¸»æœºAå‘é€ ACK åŒ…ï¼Œå¹¶å°† Ack å·è®¾ç½®ä¸º 1301ã€‚ ä¸ºäº†ä¿è¯æ•°æ®å‡†ç¡®åˆ°è¾¾ï¼Œç›®æ ‡æœºå™¨åœ¨æ”¶åˆ°æ•°æ®åŒ…ï¼ˆåŒ…æ‹¬SYNåŒ…ã€FINåŒ…ã€æ™®é€šæ•°æ®åŒ…ç­‰ï¼‰åŒ…åå¿…é¡»ç«‹å³å›ä¼ ACKåŒ…ï¼Œè¿™æ ·å‘é€æ–¹æ‰èƒ½ç¡®è®¤æ•°æ®ä¼ è¾“æˆåŠŸã€‚ æ­¤æ—¶ Ack å·ä¸º 1301 è€Œä¸æ˜¯ 1201ï¼ŒåŸå› åœ¨äº Ack å·çš„å¢é‡ä¸ºä¼ è¾“çš„æ•°æ®å­—èŠ‚æ•°ã€‚å‡è®¾æ¯æ¬¡ Ack å·ä¸åŠ ä¼ è¾“çš„å­—èŠ‚æ•°ï¼Œè¿™æ ·è™½ç„¶å¯ä»¥ç¡®è®¤æ•°æ®åŒ…çš„ä¼ è¾“ï¼Œä½†æ— æ³•æ˜ç¡®100å­—èŠ‚å…¨éƒ¨æ­£ç¡®ä¼ é€’è¿˜æ˜¯ä¸¢å¤±äº†ä¸€éƒ¨åˆ†ï¼Œæ¯”å¦‚åªä¼ é€’äº†80å­—èŠ‚ã€‚å› æ­¤æŒ‰å¦‚ä¸‹çš„å…¬å¼ç¡®è®¤ Ack å·ï¼š Ackå· &#x3D; Seqå· + ä¼ é€’çš„å­—èŠ‚æ•° + 1ï¼Œä¸ä¸‰æ¬¡æ¡æ‰‹åè®®ç›¸åŒï¼Œæœ€ååŠ  1 æ˜¯ä¸ºäº†å‘Šè¯‰å¯¹æ–¹è¦ä¼ é€’çš„ Seq å·ã€‚ ä¸‹é¢åˆ†æä¼ è¾“è¿‡ç¨‹ä¸­æ•°æ®åŒ…ä¸¢å¤±çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸Šå›¾è¡¨ç¤ºé€šè¿‡ Seq 1301 æ•°æ®åŒ…å‘ä¸»æœºBä¼ é€’100å­—èŠ‚çš„æ•°æ®ï¼Œä½†ä¸­é—´å‘ç”Ÿäº†é”™è¯¯ï¼Œä¸»æœºBæœªæ”¶åˆ°ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œä¸»æœºAä»æœªæ”¶åˆ°å¯¹äº Seq 1301 çš„ACKç¡®è®¤ï¼Œå› æ­¤å°è¯•é‡ä¼ æ•°æ®ã€‚ ä¸ºäº†å®Œæˆæ•°æ®åŒ…çš„é‡ä¼ ï¼ŒTCPå¥—æ¥å­—æ¯æ¬¡å‘é€æ•°æ®åŒ…æ—¶éƒ½ä¼šå¯åŠ¨å®šæ—¶å™¨ï¼Œå¦‚æœåœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ç›®æ ‡æœºå™¨ä¼ å›çš„ ACK åŒ…ï¼Œé‚£ä¹ˆå®šæ—¶å™¨è¶…æ—¶ï¼Œæ•°æ®åŒ…ä¼šé‡ä¼ ã€‚ é‡ä¼ è¶…æ—¶æ—¶é—´ï¼ˆRTO, Retransmission Time Outï¼‰ è¿™ä¸ªå€¼å¤ªå¤§äº†ä¼šå¯¼è‡´ä¸å¿…è¦çš„ç­‰å¾…ï¼Œå¤ªå°ä¼šå¯¼è‡´ä¸å¿…è¦çš„é‡ä¼ ï¼Œç†è®ºä¸Šæœ€å¥½æ˜¯ç½‘ç»œ RTT æ—¶é—´ï¼Œä½†åˆå—åˆ¶äºç½‘ç»œè·ç¦»ä¸ç¬æ€æ—¶å»¶å˜åŒ–ï¼Œæ‰€ä»¥å®é™…ä¸Šä½¿ç”¨è‡ªé€‚åº”çš„åŠ¨æ€ç®—æ³•ï¼ˆä¾‹å¦‚ Jacobson ç®—æ³•å’Œ Karn ç®—æ³•ç­‰ï¼‰æ¥ç¡®å®šè¶…æ—¶æ—¶é—´ã€‚ å¾€è¿”æ—¶é—´ï¼ˆRTTï¼ŒRound-Trip Timeï¼‰è¡¨ç¤ºä»å‘é€ç«¯å‘é€æ•°æ®å¼€å§‹ï¼Œåˆ°å‘é€ç«¯æ”¶åˆ°æ¥è‡ªæ¥æ”¶ç«¯çš„ ACK ç¡®è®¤åŒ…ï¼ˆæ¥æ”¶ç«¯æ”¶åˆ°æ•°æ®åä¾¿ç«‹å³ç¡®è®¤ï¼‰ï¼Œæ€»å…±ç»å†çš„æ—¶å»¶ã€‚ é‡ä¼ æ—¶é—´ TCPæ•°æ®åŒ…é‡ä¼ æ¬¡æ•°æ ¹æ®ç³»ç»Ÿè®¾ç½®çš„ä¸åŒè€Œæœ‰æ‰€åŒºåˆ«ã€‚æœ‰äº›ç³»ç»Ÿï¼Œä¸€ä¸ªæ•°æ®åŒ…åªä¼šè¢«é‡ä¼ 3æ¬¡ï¼Œå¦‚æœé‡ä¼ 3æ¬¡åè¿˜æœªæ”¶åˆ°è¯¥æ•°æ®åŒ…çš„ ACK ç¡®è®¤ï¼Œå°±ä¸å†å°è¯•é‡ä¼ ã€‚ä½†æœ‰äº›è¦æ±‚å¾ˆé«˜çš„ä¸šåŠ¡ç³»ç»Ÿï¼Œä¼šä¸æ–­åœ°é‡ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…ï¼Œä»¥å°½æœ€å¤§å¯èƒ½ä¿è¯ä¸šåŠ¡æ•°æ®çš„æ­£å¸¸äº¤äº’ã€‚ TCPå››æ¬¡æ¡æ‰‹æ–­å¼€è¿æ¥å»ºç«‹è¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ–­å¼€è¿æ¥éœ€è¦å››æ¬¡æ¡æ‰‹ï¼Œå¯ä»¥å½¢è±¡çš„æ¯”å–»ä¸ºä¸‹é¢çš„å¯¹è¯ï¼š [Shake 1] å¥—æ¥å­—Aï¼šâ€œä»»åŠ¡å¤„ç†å®Œæ¯•ï¼Œæˆ‘å¸Œæœ›æ–­å¼€è¿æ¥ã€‚â€ [Shake 2] å¥—æ¥å­—Bï¼šâ€œå“¦ï¼Œæ˜¯å—ï¼Ÿè¯·ç¨ç­‰ï¼Œæˆ‘å‡†å¤‡ä¸€ä¸‹ã€‚â€ ç­‰å¾…ç‰‡åˆ»åâ€¦â€¦ [Shake 3] å¥—æ¥å­—Bï¼šâ€œæˆ‘å‡†å¤‡å¥½äº†ï¼Œå¯ä»¥æ–­å¼€è¿æ¥äº†ã€‚â€ [Shake 4] å¥—æ¥å­—Aï¼šâ€œå¥½çš„ï¼Œè°¢è°¢åˆä½œã€‚â€ å»ºç«‹è¿æ¥åï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¤„äºESTABLISEDçŠ¶æ€ã€‚è¿™æ—¶ï¼Œå®¢æˆ·ç«¯å‘èµ·æ–­å¼€è¿æ¥çš„è¯·æ±‚ï¼š å®¢æˆ·ç«¯è°ƒç”¨ close() å‡½æ•°åï¼Œå‘æœåŠ¡å™¨å‘é€ FIN æ•°æ®åŒ…ï¼Œè¿›å…¥FIN_WAIT_1çŠ¶æ€ã€‚FIN æ˜¯ Finish çš„ç¼©å†™ï¼Œè¡¨ç¤ºå®Œæˆä»»åŠ¡éœ€è¦æ–­å¼€è¿æ¥ã€‚ æœåŠ¡å™¨æ”¶åˆ°æ•°æ®åŒ…åï¼Œæ£€æµ‹åˆ°è®¾ç½®äº† FIN æ ‡å¿—ä½ï¼ŒçŸ¥é“è¦æ–­å¼€è¿æ¥ï¼Œäºæ˜¯å‘å®¢æˆ·ç«¯å‘é€â€œç¡®è®¤åŒ…â€ï¼Œè¿›å…¥CLOSE_WAITçŠ¶æ€ã€‚ æ³¨æ„ï¼šæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åå¹¶ä¸æ˜¯ç«‹å³æ–­å¼€è¿æ¥ï¼Œè€Œæ˜¯å…ˆå‘å®¢æˆ·ç«¯å‘é€â€œç¡®è®¤åŒ…â€ï¼Œå‘Šè¯‰å®ƒæˆ‘çŸ¥é“äº†ï¼Œæˆ‘éœ€è¦å‡†å¤‡ä¸€ä¸‹æ‰èƒ½æ–­å¼€è¿æ¥ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°â€œç¡®è®¤åŒ…â€åè¿›å…¥FIN_WAIT_2çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨å‡†å¤‡å®Œæ¯•åå†æ¬¡å‘é€æ•°æ®åŒ…ã€‚ ç­‰å¾…ç‰‡åˆ»åï¼ŒæœåŠ¡å™¨å‡†å¤‡å®Œæ¯•ï¼Œå¯ä»¥æ–­å¼€è¿æ¥ï¼Œäºæ˜¯å†ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘é€ FIN åŒ…ï¼Œå‘Šè¯‰å®ƒæˆ‘å‡†å¤‡å¥½äº†ï¼Œæ–­å¼€è¿æ¥å§ã€‚ç„¶åè¿›å…¥LAST_ACKçŠ¶æ€ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡å™¨çš„ FIN åŒ…åï¼Œå†å‘æœåŠ¡å™¨å‘é€ ACK åŒ…ï¼Œå‘Šè¯‰å®ƒä½ æ–­å¼€è¿æ¥å§ã€‚ç„¶åè¿›å…¥TIME_WAITçŠ¶æ€ã€‚ æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯çš„ ACK åŒ…åï¼Œå°±æ–­å¼€è¿æ¥ï¼Œå…³é—­å¥—æ¥å­—ï¼Œè¿›å…¥CLOSEDçŠ¶æ€ã€‚ å…³äº TIME_WAIT çŠ¶æ€çš„è¯´æ˜ å®¢æˆ·ç«¯æœ€åä¸€æ¬¡å‘é€ ACKåŒ…åè¿›å…¥ TIME_WAIT çŠ¶æ€ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿›å…¥ CLOSED çŠ¶æ€å…³é—­è¿æ¥ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ TCP æ˜¯é¢å‘è¿æ¥çš„ä¼ è¾“æ–¹å¼ï¼Œå¿…é¡»ä¿è¯æ•°æ®èƒ½å¤Ÿæ­£ç¡®åˆ°è¾¾ç›®æ ‡æœºå™¨ï¼Œä¸èƒ½ä¸¢å¤±æˆ–å‡ºé”™ï¼Œè€Œç½‘ç»œæ˜¯ä¸ç¨³å®šçš„ï¼Œéšæ—¶å¯èƒ½ä¼šæ¯åæ•°æ®ï¼Œæ‰€ä»¥æœºå™¨Aæ¯æ¬¡å‘æœºå™¨Bå‘é€æ•°æ®åŒ…åï¼Œéƒ½è¦æ±‚æœºå™¨Bâ€ç¡®è®¤â€œï¼Œå›ä¼ ACKåŒ…ï¼Œå‘Šè¯‰æœºå™¨Aæˆ‘æ”¶åˆ°äº†ï¼Œè¿™æ ·æœºå™¨Aæ‰èƒ½çŸ¥é“æ•°æ®ä¼ é€æˆåŠŸäº†ã€‚å¦‚æœæœºå™¨Bæ²¡æœ‰å›ä¼ ACKåŒ…ï¼Œæœºå™¨Aä¼šé‡æ–°å‘é€ï¼Œç›´åˆ°æœºå™¨Bå›ä¼ ACKåŒ…ã€‚ å®¢æˆ·ç«¯æœ€åä¸€æ¬¡å‘æœåŠ¡å™¨å›ä¼ ACKåŒ…æ—¶ï¼Œæœ‰å¯èƒ½ä¼šå› ä¸ºç½‘ç»œé—®é¢˜å¯¼è‡´æœåŠ¡å™¨æ”¶ä¸åˆ°ï¼ŒæœåŠ¡å™¨ä¼šå†æ¬¡å‘é€ FIN åŒ…ï¼Œå¦‚æœè¿™æ—¶å®¢æˆ·ç«¯å®Œå…¨å…³é—­äº†è¿æ¥ï¼Œé‚£ä¹ˆæœåŠ¡å™¨æ— è®ºå¦‚ä½•ä¹Ÿæ”¶ä¸åˆ°ACKåŒ…äº†ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯éœ€è¦ç­‰å¾…ç‰‡åˆ»ã€ç¡®è®¤å¯¹æ–¹æ”¶åˆ°ACKåŒ…åæ‰èƒ½è¿›å…¥CLOSEDçŠ¶æ€ã€‚é‚£ä¹ˆï¼Œè¦ç­‰å¾…å¤šä¹…å‘¢ï¼Ÿ æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­æ˜¯æœ‰ç”Ÿå­˜æ—¶é—´çš„ï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´è¿˜æœªåˆ°è¾¾ç›®æ ‡ä¸»æœºå°±ä¼šè¢«ä¸¢å¼ƒï¼Œå¹¶é€šçŸ¥æºä¸»æœºã€‚è¿™ç§°ä¸ºæŠ¥æ–‡æœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼ˆMSLï¼ŒMaximum Segment Lifetimeï¼‰ã€‚TIME_WAIT è¦ç­‰å¾… 2MSL æ‰ä¼šè¿›å…¥ CLOSED çŠ¶æ€ã€‚ACK åŒ…åˆ°è¾¾æœåŠ¡å™¨éœ€è¦ MSL æ—¶é—´ï¼ŒæœåŠ¡å™¨é‡ä¼  FIN åŒ…ä¹Ÿéœ€è¦ MSL æ—¶é—´ï¼Œ2MSL æ˜¯æ•°æ®åŒ…å¾€è¿”çš„æœ€å¤§æ—¶é—´ï¼Œå¦‚æœ 2MSL åè¿˜æœªæ”¶åˆ°æœåŠ¡å™¨é‡ä¼ çš„ FIN åŒ…ï¼Œå°±è¯´æ˜æœåŠ¡å™¨å·²ç»æ”¶åˆ°äº† ACK åŒ…ã€‚ çª—å£åè®®ARQåè®®ARQåè®®ä¸»è¦åŒ…å«ï¼šåœç­‰ARQåè®®ã€è¿ç»­ARQåè®®ï¼Œå…¶ä¸­è¿ç»­ARQåè®®æ˜¯ä¸ºäº†è§£å†³åœç­‰ARQåè®®ä¿¡é“åˆ©ç”¨ç‡ä½çš„é—®é¢˜ï¼Œç›®å‰ä¼ ç»Ÿçš„è¿ç»­ARQåè®®æœ‰å›é€€Nå¸§ARQåè®®ã€é€‰æ‹©æ€§é‡ä¼ ARQåè®®ã€‚ è¿ç»­ARQåè®®ï¼ˆContinuous ARQï¼‰ å›é€€Nå¸§ARQåè®®ï¼ˆGo-Back-Nï¼‰ æ¥æ”¶ç«¯ä¸¢å¼ƒä»ç¬¬ä¸€ä¸ªæ²¡æœ‰æ”¶åˆ°çš„æ•°æ®åŒ…å¼€å§‹çš„æ‰€æœ‰æ•°æ®åŒ… å‘é€ç«¯æ”¶åˆ°NACKåï¼Œä»NACKä¸­æŒ‡æ˜çš„æ•°æ®åŒ…å¼€å§‹é‡æ–°å‘é€ é€‰æ‹©æ€§é‡ä¼ ARQåè®®ï¼ˆSelective Repeatï¼‰ å‘é€ç«¯è¿ç»­å‘é€æ•°æ®åŒ…ä½†å¯¹æ¯ä¸ªæ•°æ®åŒ…éƒ½è®¾æœ‰ä¸ªä¸€ä¸ªè®¡æ—¶å™¨ å½“åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°æŸä¸ªæ•°æ®åŒ…çš„ACKæ—¶ï¼Œå‘é€ç«¯åªé‡æ–°å‘é€é‚£ä¸ªæ²¡æœ‰ACKçš„æ•°æ®åŒ…","tags":[{"name":"C++","slug":"C","permalink":"http://airshu.github.io/tags/C/"}],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"C++","slug":"ç¨‹åºè¯­è¨€/C","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C/"}]},{"title":"å¤šçº¿ç¨‹","date":"2022-03-08T02:25:29.716Z","path":"wiki/æ“ä½œç³»ç»Ÿ/çº¿ç¨‹/å¤šçº¿ç¨‹/","text":"çº¿ç¨‹çš„æ¦‚å¿µå¼•å…¥è¿›ç¨‹çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†ä½¿å¤šé“ç¨‹åºå¹¶å‘æ‰§è¡Œï¼Œä»¥æé«˜èµ„æºåˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ï¼›è€Œå¼•å…¥çº¿ç¨‹ï¼Œåˆ™æ˜¯ä¸ºäº†å‡å°ç¨‹åºåœ¨å¹¶å‘æ‰§è¡Œæ—¶æ‰€ä»˜å‡ºçš„æ—¶ç©ºå¼€é”€ï¼Œæé«˜æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ã€‚ çº¿ç¨‹æœ€ç›´æ¥çš„ç†è§£å°±æ˜¯â€œè½»é‡çº§è¿›ç¨‹â€ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºæœ¬çš„CPUæ‰§è¡Œå•å…ƒï¼Œä¹Ÿæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒï¼Œç”±çº¿ç¨‹IDã€ç¨‹åºè®¡æ•°å™¨ã€å¯„å­˜å™¨é›†åˆå’Œå †æ ˆç»„æˆã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„ä¸€ä¸ªå®ä½“ï¼Œæ˜¯è¢«ç³»ç»Ÿç‹¬ç«‹è°ƒåº¦å’Œåˆ†æ´¾çš„åŸºæœ¬å•ä½ï¼Œçº¿ç¨‹è‡ªå·±ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œåªæ‹¥æœ‰ä¸€ç‚¹åœ¨è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„èµ„æºï¼Œä½†å®ƒå¯ä¸åŒå±ä¸€ä¸ªè¿›ç¨‹çš„å…¶ä»–çº¿ç¨‹å…±äº«è¿›ç¨‹æ‰€æ‹¥æœ‰çš„å…¨éƒ¨èµ„æºã€‚ä¸€ä¸ªçº¿ç¨‹å¯ä»¥åˆ›å»ºå’Œæ’¤é”€å¦ä¸€ä¸ªçº¿ç¨‹ï¼ŒåŒä¸€è¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹ä¹‹é—´å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚ç”±äºçº¿ç¨‹ä¹‹é—´çš„ç›¸äº’åˆ¶çº¦ï¼Œè‡´ä½¿çº¿ç¨‹åœ¨è¿è¡Œä¸­å‘ˆç°å‡ºé—´æ–­æ€§ã€‚ çº¿ç¨‹çš„çŠ¶æ€ æ–°å»ºçŠ¶æ€: çº¿ç¨‹å¯¹è±¡å·²ç»åˆ›å»ºï¼Œè¿˜æ²¡æœ‰åœ¨å…¶ä¸Šè°ƒç”¨start()æ–¹æ³•ã€‚ å¯è¿è¡ŒçŠ¶æ€: å½“çº¿ç¨‹æœ‰èµ„æ ¼è¿è¡Œï¼Œä½†è°ƒåº¦ç¨‹åºè¿˜æ²¡æœ‰æŠŠå®ƒé€‰å®šä¸ºè¿è¡Œçº¿ç¨‹æ—¶çº¿ç¨‹æ‰€å¤„çš„çŠ¶æ€ã€‚å½“start()æ–¹æ³•è°ƒç”¨æ—¶ï¼Œçº¿ç¨‹é¦–å…ˆè¿›å…¥å¯è¿è¡ŒçŠ¶æ€ã€‚åœ¨çº¿ç¨‹è¿è¡Œä¹‹åæˆ–è€…ä»é˜»å¡ã€ç­‰å¾…æˆ–ç¡çœ çŠ¶æ€å›æ¥åï¼Œä¹Ÿè¿”å›åˆ°å¯è¿è¡ŒçŠ¶æ€ã€‚ è¿è¡ŒçŠ¶æ€: å°±ç»ªçŠ¶æ€çš„çº¿ç¨‹è·å–äº†CPUï¼Œæ‰§è¡Œç¨‹åºä»£ç ã€‚ é˜»å¡çŠ¶æ€: é˜»å¡çŠ¶æ€æ˜¯çº¿ç¨‹å› ä¸ºæŸç§åŸå› æ”¾å¼ƒCPUä½¿ç”¨æƒï¼Œæš‚æ—¶åœæ­¢è¿è¡Œã€‚ç›´åˆ°çº¿ç¨‹è¿›å…¥å¯è¿è¡ŒçŠ¶æ€ï¼Œæ‰æœ‰æœºä¼šè½¬åˆ°è¿è¡ŒçŠ¶æ€ã€‚ é˜»å¡çš„æƒ…å†µåˆ†ä¸‰ç§ï¼š ç­‰å¾…é˜»å¡:è¿è¡Œçš„çº¿ç¨‹æ‰§è¡Œwait()æ–¹æ³•ï¼Œè¯¥çº¿ç¨‹ä¼šé‡Šæ”¾å ç”¨çš„æ‰€æœ‰èµ„æºï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥â€œç­‰å¾…æ± â€ä¸­ã€‚è¿›å…¥è¿™ä¸ªçŠ¶æ€åï¼Œæ˜¯ä¸èƒ½è‡ªåŠ¨å”¤é†’çš„ï¼Œå¿…é¡»ä¾é å…¶ä»–çº¿ç¨‹è°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³•æ‰èƒ½è¢«å”¤é†’. (æ³¨æ„:å½“è°ƒç”¨wait()åï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾æ‰å®ƒæ‰€å æœ‰çš„â€™é”â€™ï¼Œæ‰€ä»¥çº¿ç¨‹åªæœ‰åœ¨æŒæœ‰â€™é”â€™æ‰èƒ½è¿›å…¥å¯è¿è¡ŒçŠ¶æ€.) åŒæ­¥é˜»å¡:è¿è¡Œçš„çº¿ç¨‹åœ¨è·å–å¯¹è±¡çš„åŒæ­¥é”æ—¶ï¼Œè‹¥è¯¥åŒæ­¥é”è¢«åˆ«çš„çº¿ç¨‹å ç”¨ï¼Œåˆ™JVMä¼šæŠŠè¯¥çº¿ç¨‹æ”¾å…¥â€œé”æ± â€ä¸­ã€‚ å…¶ä»–é˜»å¡:è¿è¡Œçš„çº¿ç¨‹æ‰§è¡Œsleep()æˆ–join()æ–¹æ³•ï¼Œæˆ–è€…å‘å‡ºäº†I&#x2F;Oè¯·æ±‚æ—¶ï¼ŒJVMä¼šæŠŠè¯¥çº¿ç¨‹ç½®ä¸ºé˜»å¡çŠ¶æ€ã€‚å½“sleep()çŠ¶æ€è¶…æ—¶ã€join()ç­‰å¾…çº¿ç¨‹ç»ˆæ­¢æˆ–è€…è¶…æ—¶ã€æˆ–è€…I&#x2F;Oå¤„ç†å®Œæ¯•æ—¶ï¼Œçº¿ç¨‹é‡æ–°è½¬å…¥å°±ç»ªçŠ¶æ€ã€‚ æ­»äº¡çŠ¶æ€: çº¿ç¨‹æ‰§è¡Œå®Œäº†æˆ–è€…å› å¼‚å¸¸é€€å‡ºäº†run()æ—¶å°±è®¤ä¸ºå®ƒæ­»å»ã€‚è¿™ä¸ªçº¿ç¨‹å¯¹è±¡ä¹Ÿè®¸æ˜¯æ´»çš„ï¼Œä½†æ˜¯ï¼Œå®ƒå·²ç»ä¸æ˜¯ä¸€ä¸ªå•ç‹¬æ‰§è¡Œçš„çº¿ç¨‹ã€‚çº¿ç¨‹ä¸€æ—¦æ­»äº¡ï¼Œå°±ä¸èƒ½å¤ç”Ÿã€‚å¦‚æœåœ¨ä¸€ä¸ªæ­»å»çš„çº¿ç¨‹ä¸Šè°ƒç”¨start()æ–¹æ³•ï¼Œä¼šæŠ›å‡ºjava.lang.IllegalThreadStateExceptionå¼‚å¸¸ã€‚ çº¿ç¨‹çš„å®ç°æ–¹å¼çº¿ç¨‹é—´é€šè®¯å‚è€ƒ","tags":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://airshu.github.io/tags/%E6%8A%80%E6%9C%AF/"}],"categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"çº¿ç¨‹","slug":"æ“ä½œç³»ç»Ÿ/çº¿ç¨‹","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B/"}]},{"title":"åŸºç¡€æ¦‚å¿µ","date":"2022-03-08T02:25:29.716Z","path":"wiki/æ“ä½œç³»ç»Ÿ/è¿›ç¨‹/åŸºç¡€æ¦‚å¿µ/","text":"åç¨‹ï¼šæ˜¯ä¸€ç§æ¯”çº¿ç¨‹æ›´åŠ è½»é‡çº§çš„å­˜åœ¨ï¼Œåç¨‹ä¸æ˜¯è¢«æ“ä½œç³»ç»Ÿå†…æ ¸æ‰€ç®¡ç†ï¼Œè€Œå®Œå…¨æ˜¯ç”±ç¨‹åºæ‰€æ§åˆ¶(ä¹Ÿå°±æ˜¯åœ¨ç”¨æˆ·æ€æ‰§è¡Œ)ã€‚è¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯æ€§èƒ½å¾—åˆ°äº†å¾ˆå¤§çš„æå‡ï¼Œä¸ä¼šåƒçº¿ç¨‹åˆ‡æ¢é‚£æ ·æ¶ˆè€—èµ„æºã€‚ å­ç¨‹åºï¼Œæˆ–è€…ç§°ä¸ºå‡½æ•°ï¼Œåœ¨æ‰€æœ‰è¯­è¨€ä¸­éƒ½æ˜¯å±‚çº§è°ƒç”¨ï¼Œæ¯”å¦‚Aè°ƒç”¨Bï¼ŒBåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­åˆè°ƒç”¨ äº†Cï¼ŒCæ‰§è¡Œå®Œæ¯•è¿”å›ï¼ŒBæ‰§è¡Œå®Œæ¯•è¿”å›ï¼Œæœ€åæ˜¯Aæ‰§è¡Œå®Œæ¯•ã€‚æ‰€ä»¥å­ç¨‹åºè°ƒç”¨æ˜¯é€šè¿‡æ ˆå®ç°çš„ï¼Œä¸€ ä¸ªçº¿ç¨‹å°±æ˜¯æ‰§è¡Œä¸€ä¸ªå­ç¨‹åºã€‚å­ç¨‹åºè°ƒç”¨æ€»æ˜¯ä¸€ä¸ªå…¥å£ï¼Œä¸€æ¬¡è¿”å›ï¼Œè°ƒç”¨é¡ºåºæ˜¯æ˜ç¡®çš„ã€‚è€Œåç¨‹çš„è°ƒç”¨å’Œå­ç¨‹åºä¸åŒã€‚ åç¨‹åœ¨å­ç¨‹åºå†…éƒ¨æ˜¯å¯ä¸­æ–­çš„ï¼Œç„¶åè½¬è€Œæ‰§è¡Œåˆ«çš„å­ç¨‹åºï¼Œåœ¨é€‚å½“çš„æ—¶å€™å†è¿”å›æ¥æ¥ç€æ‰§è¡Œã€‚ åç¨‹çš„ç‰¹ç‚¹åœ¨äºæ˜¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œé‚£å’Œå¤šçº¿ç¨‹æ¯”ï¼Œåç¨‹æœ‰ä½•ä¼˜åŠ¿? æé«˜çš„æ‰§è¡Œæ•ˆç‡:å› ä¸ºå­ç¨‹åºåˆ‡æ¢ä¸æ˜¯çº¿ç¨‹åˆ‡æ¢ï¼Œè€Œæ˜¯ç”±ç¨‹åºè‡ªèº«æ§åˆ¶ï¼Œå› æ­¤ï¼Œæ²¡æœ‰çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€ï¼Œå’Œå¤šçº¿ç¨‹æ¯”ï¼Œçº¿ç¨‹æ•°é‡è¶Šå¤šï¼Œåç¨‹çš„æ€§èƒ½ä¼˜åŠ¿å°±è¶Šæ˜æ˜¾; ä¸éœ€è¦å¤šçº¿ç¨‹çš„é”æœºåˆ¶:å› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä¹Ÿä¸å­˜åœ¨åŒæ—¶å†™å˜é‡å†²çªï¼Œåœ¨åç¨‹ä¸­æ§åˆ¶å…±äº«èµ„æºä¸åŠ é”ï¼Œåªéœ€è¦åˆ¤æ–­çŠ¶æ€å°±å¥½äº†ï¼Œæ‰€ä»¥æ‰§è¡Œæ•ˆç‡æ¯”å¤šçº¿ç¨‹é«˜å¾ˆå¤šã€‚","tags":[],"categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"è¿›ç¨‹","slug":"æ“ä½œç³»ç»Ÿ/è¿›ç¨‹","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B/"}]},{"title":"å­—ç¬¦ç¼–ç ","date":"2022-03-08T02:25:29.715Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/å­—ç¬¦ç¼–ç /","text":"ASCII ç è®¡ç®—æœºå†…éƒ¨ï¼Œæ‰€æœ‰ä¿¡æ¯æœ€ç»ˆéƒ½æ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å€¼ã€‚æ¯ä¸€ä¸ªäºŒè¿›åˆ¶ä½(bit)æœ‰ 0 å’Œ 1 ä¸¤ç§ çŠ¶æ€ï¼Œå› æ­¤å…«ä¸ªäºŒè¿›åˆ¶ä½å°±å¯ä»¥ç»„åˆå‡º256ç§çŠ¶æ€ï¼Œè¿™è¢«ç§°ä¸ºä¸€ä¸ªå­—èŠ‚(byte)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ªå­—èŠ‚ä¸€å…±å¯ä»¥ç”¨æ¥è¡¨ç¤º256ç§ä¸åŒçš„çŠ¶æ€ï¼Œæ¯ä¸€ä¸ªçŠ¶æ€å¯¹åº”ä¸€ä¸ªç¬¦å·ï¼Œå°±æ˜¯256ä¸ªç¬¦å·ï¼Œä»00000000 åˆ° 11111111 ã€‚ ä¸Šä¸ªä¸–çºª60å¹´ä»£ï¼Œç¾å›½åˆ¶å®šäº†ä¸€å¥—å­—ç¬¦ç¼–ç ï¼Œå¯¹è‹±è¯­å­—ç¬¦ä¸äºŒè¿›åˆ¶ä½ä¹‹é—´çš„å…³ç³»ï¼Œåšäº†ç»Ÿä¸€è§„å®šã€‚è¿™è¢«ç§°ä¸º ASCII ç ï¼Œä¸€ç›´æ²¿ç”¨è‡³ä»Šã€‚ ASCII ç ä¸€å…±è§„å®šäº†128ä¸ªå­—ç¬¦çš„ç¼–ç ï¼Œæ¯”å¦‚ç©ºæ ¼ SPACE æ˜¯32(äºŒè¿›åˆ¶ 00100000 )ï¼Œå¤§å†™çš„å­—æ¯ A æ˜¯65(äºŒè¿›åˆ¶ 01000001 )ã€‚è¿™128ä¸ªç¬¦å·(åŒ…æ‹¬32ä¸ªä¸èƒ½æ‰“å°å‡ºæ¥çš„æ§åˆ¶ç¬¦å·)ï¼Œåªå ç”¨äº†ä¸€ä¸ªå­—èŠ‚çš„åé¢7ä½ï¼Œæœ€å‰é¢çš„ä¸€ä½ç»Ÿä¸€è§„å®šä¸º 0 ã€‚ UnicodeUnicode åªæ˜¯ä¸€ä¸ªç¬¦å·é›†ã€‚Unicodeå¯ä»¥å®¹çº³100å¤šä¸‡ä¸ªç¬¦å·ã€‚ä»–è§„å®šäº†ç¬¦å·çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå´æ²¡æœ‰è§„å®šè¿™ä¸ªäºŒè¿›åˆ¶ä»£ç åº”è¯¥å¦‚ä½•å­˜å‚¨ã€‚æ¯”å¦‚ï¼Œæ±‰å­—ä¸¥çš„Unicodeæ˜¯åå…­è¿›åˆ¶æ•° 4E25 ï¼Œè½¬æ¢æˆäºŒè¿›åˆ¶æ•°è¶³è¶³æœ‰15ä½( 100111000100101 )ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªç¬¦å·çš„è¡¨ç¤ºè‡³å°‘éœ€è¦2ä¸ªå­—èŠ‚ã€‚è¡¨ç¤ºå…¶ä»–æ›´å¤§çš„ç¬¦å·ï¼Œå¯èƒ½éœ€è¦3ä¸ªå­—èŠ‚æˆ–è€…4ä¸ªå­—èŠ‚ï¼Œç”šè‡³æ›´å¤šã€‚ UTF-8UTF-8 å°±æ˜¯åœ¨äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿çš„ä¸€ç§ Unicode çš„å®ç°æ–¹å¼ã€‚UTF-8 æœ€å¤§çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œå°±æ˜¯å®ƒæ˜¯ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨1~4ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œ æ ¹æ®ä¸åŒçš„ç¬¦å·è€Œå˜åŒ–å­—èŠ‚é•¿åº¦ã€‚ UTF-8 çš„ç¼–ç è§„åˆ™ï¼š å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º 0 ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8 ç¼–ç å’Œ ASCII ç æ˜¯ç›¸åŒçš„ã€‚ å¯¹äºnå­—èŠ‚çš„ç¬¦å·(n&gt;1)ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œç¬¬n+1 ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º 10 ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ Unicode ç ã€‚ ä¸¥ çš„ Unicode æ˜¯ 4E25 (100111000100101 )ï¼Œæ ¹æ®ä¸Šè¡¨ï¼Œå¯ä»¥å‘ç° 4E25 å¤„åœ¨ç¬¬ä¸‰è¡Œçš„èŒƒå›´å†… ( 0000 0800 - 0000 FFFF)ï¼Œå› æ­¤ ä¸¥ çš„ UTF-8 ç¼–ç éœ€è¦ä¸‰ä¸ªå­—èŠ‚ï¼Œå³æ ¼å¼æ˜¯ 1110xxxx 10xxxxxx 10xxxxxx ã€‚ç„¶åï¼Œä» ä¸¥ çš„æœ€åä¸€ä¸ªäºŒè¿›åˆ¶ä½å¼€å§‹ï¼Œä¾æ¬¡ä»åå‘å‰å¡«å…¥æ ¼å¼ä¸­çš„ x ï¼Œå¤šå‡ºçš„ä½è¡¥0 ã€‚è¿™æ ·å°±å¾—åˆ°äº†ï¼Œ ä¸¥ çš„ UTF-8 ç¼–ç æ˜¯ 11100100 10111000 10100101 ï¼Œè½¬æ¢æˆåå…­è¿›åˆ¶å°±æ˜¯ E4B8A5 ã€‚ ä¸€ä¸ªutf8æ•°å­—å 1ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªutf8è‹±æ–‡å­—æ¯å 1ä¸ªå­—èŠ‚ï¼Œå°‘æ•°æ˜¯æ±‰å­—æ¯ä¸ªå ç”¨3ä¸ªå­—èŠ‚ï¼Œå¤šæ•°å ç”¨4ä¸ªå­—èŠ‚ã€‚ ç¼–ç¨‹è½¬æ¢ä¸€èˆ¬çš„æ–‡ä»¶ç¼–è¾‘å™¨ï¼ˆæ¯”å¦‚notepadï¼‰ä¸­ä¿å­˜æ—¶ä¼šæœ‰ç¼–ç é€‰é¡¹ï¼š ANSIï¼šå¯¹äºè‹±æ–‡æ–‡ä»¶æ˜¯ ASCII ç¼–ç ï¼Œå¯¹äºç®€ä½“ä¸­æ–‡æ–‡ä»¶æ˜¯ GB2312 ç¼–ç  Unicodeï¼šnotepadä½¿ç”¨çš„ UCS-2 ç¼–ç æ–¹å¼ï¼Œå³ç›´æ¥ç”¨ä¸¤ä¸ªå­—èŠ‚å­˜å…¥å­—ç¬¦ çš„ Unicode ç ï¼Œè¿™ä¸ªé€‰é¡¹ç”¨çš„ little endian æ ¼å¼ï¼ˆå¦‚æœä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶çš„å¤´ä¸¤ä¸ªå­—èŠ‚æ˜¯ FE FF ï¼Œå°±è¡¨ç¤ºè¯¥æ–‡ä»¶é‡‡ç”¨å¤§å¤´æ–¹å¼;å¦‚æœå¤´ä¸¤ä¸ªå­—èŠ‚æ˜¯ FF FE ï¼Œå°±è¡¨ç¤ºè¯¥æ–‡ä»¶é‡‡ç”¨å°å¤´æ–¹å¼ã€‚ï¼‰ Unicode big endian UTF-8","tags":[{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"http://airshu.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"æŒ‰é”®ç²¾çµçš„ä½¿ç”¨è®°å½•","date":"2022-03-08T02:25:29.715Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/æŒ‰é”®ç²¾çµçš„ä½¿ç”¨è®°å½•/","text":"æœ€è¿‘å› ä¸ºå·¥ä½œéœ€è¦ï¼Œç ”ç©¶äº†ä¸‹æŒ‰é”®ç²¾çµå’Œç›¸å…³ç”Ÿæ€ã€‚æŒ‰é”®ç²¾çµçš„ä¸»è¦åŠŸèƒ½æ˜¯æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸ºï¼Œå¯ä»¥å¯¼å‡ºAndroidã€iOSçš„åŒ…ã€‚ç›´æ¥åœ¨æ‰‹æœºä¸Šè¿è¡Œã€‚å¤§è‡´çŒœæµ‹ä¸‹å®ç°åŸç†ï¼š ç”µè„‘ä¸Šé€šè¿‡ç”¨æˆ·çš„è„šæœ¬ï¼Œè½¬æ¢æˆç›¸å…³æŒ‡ä»¤ï¼Œåœ¨ç”µè„‘ä¸Šçš„è„šæœ¬åº”è¯¥é€šè¿‡adbç›¸å…³æŒ‡ä»¤æ¥æ§åˆ¶æ¨¡æ‹Ÿå™¨æˆ–è€…æ‰‹æœºï¼Œåˆ°å¤„çš„apkåº”è¯¥æ˜¯é€šè¿‡è°ƒç”¨ç³»ç»Ÿçš„ç›¸å…³å‘½ä»¤ï¼ˆsendeventç­‰ï¼‰æ¥å®ç°çš„ã€‚ å›¾ç‰‡æ£€æµ‹åƒç´ æ£€æµ‹åº”è¯¥æ˜¯é€šè¿‡opencvç›¸å…³åº“æ¥å®ç°çš„ã€‚ è„šæœ¬çš„ç¼–å†™ä¹Ÿæ˜¯è¹²å®ˆåŸºæœ¬çš„ç¼–ç¨‹è§„åˆ™ï¼ŒåŸºæœ¬çš„è¿ç®—ã€æµç¨‹æ§åˆ¶ã€å¤šçº¿ç¨‹ï¼Œä¸è¿‡è¿˜ä¸å¤Ÿå®Œå–„ã€‚ åŸºæœ¬çš„è„šæœ¬ç¼–å†™æ–¹å¼ä¹Ÿæ¯”è¾ƒå‚»ç“œå¼ï¼Œå¾—åˆ°å…·ä½“çš„åæ ‡ï¼Œæ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»ã€è¾“å…¥ã€‚å“ªæ€•æ²¡å­¦è¿‡ç¼–ç¨‹çš„ï¼Œä¸Šæ‰‹ä¹Ÿæ¯”è¾ƒå®¹æ˜“ã€‚ å› ä¸ºæœ‰äº†è¿™æ ·è‡ªåŠ¨åŒ–çš„å·¥å…·ï¼Œå†åŠ ä¸Šå¤§é‡çš„éœ€æ±‚ï¼ˆç”¨æˆ·æƒ³åˆ·æ¸¸æˆé‡Œçš„é‡‘å¸ã€è‡ªåŠ¨å®Œæˆä»»åŠ¡ï¼‰ï¼Œä»è€Œè¡ç”Ÿå‡ºäº†è®¸å¤šè´©å”®è„šæœ¬çš„ã€‚æ ¹æ®è¿™å‡ å¤©çš„è°ƒæŸ¥ï¼Œä»äº‹è¿™ä¸€è¡Œçš„å¹¶ä¸å°‘ã€‚æœ‰ä¾èµ–æŒ‰é”®ç²¾çµå¼€å‘è„šæœ¬å–é’±çš„ï¼Œæœ‰æ ¹æ®ç”¨æˆ·éœ€æ±‚å®šåˆ¶è„šæœ¬çš„ï¼Œè¿˜æœ‰è‡ªå·±è‡ªä¸»å¼€å‘è„šæœ¬å–VIPçš„ï¼ˆå¦‚ï¼šhttp://hm.hy6665.cnï¼‰ã€‚è¯´æ˜è¿™ä¸ªå¸‚åœºè¿˜æ˜¯è›®å¤§çš„ã€‚ æŒ‰é”®ç²¾çµçš„ä½¿ç”¨æŒ‰é”®ç²¾çµåˆ†ä¸ºPCç‰ˆå’Œç§»åŠ¨ç‰ˆï¼Œç§»åŠ¨ç‰ˆåœ¨è„šæœ¬å¼€å‘å®Œæˆåï¼Œå¯ä»¥å¯¼å‡ºç›¸åº”Appï¼Œåœ¨æ‰‹æœºå’Œæ¨¡æ‹Ÿå™¨ç›´æ¥å®‰è£…å³å¯ä½¿ç”¨ã€‚å¯åŠ¨åï¼Œä¼šæœ‰ä¸€ä¸ªæ‚¬æµ®çª—æ¥æ§åˆ¶è„šæœ¬çš„è¿è¡Œã€‚æ‰‹æœºåŠ©æ‰‹è¿˜æœ‰ä¸€ä¸ªæŠ“æŠ“çš„åŠŸèƒ½ï¼Œå¯ä»¥å¯¹æ¨¡æ‹Ÿå™¨è¿›è¡Œæˆªå›¾ï¼Œæˆªå›¾åå¯ä»¥ä½¿ç”¨åƒç´ ç‚¹ç‚¹é¢œè‰²åˆ¤æ–­æˆ–è€…å›¾ç‰‡åˆ¤æ–­ä½ç½®ã€‚ æŒ‰é”®ç²¾çµçš„å‘½ä»¤åˆ†ç±»ï¼š åŸºæœ¬å‘½ä»¤ ç•Œé¢å‘½ä»¤ æ‚¬æµ®çª—å‘½ä»¤ æ‰©å±•å‘½ä»¤ æ ‡å‡†åº“å‘½ä»¤ è¿ç®—ç¬¦å‘½ä»¤ æ’ä»¶å‘½ä»¤ å¦‚ä½•å‘é€è¯­éŸ³æ–‡ä»¶æ¨¡æ‹Ÿç”¨æˆ·æŒ‰ä¸‹å¼€å§‹å½•éŸ³ï¼Œå½•éŸ³è¿‡ç¨‹ä¸­æ›¿æ¢éŸ³é¢‘æ–‡ä»¶ä½¿ç”¨e2eSoft vscï¼Œå°†æ‰¬å£°å™¨å£°éŸ³è½¬åˆ°éº¦å…‹é£ä¸­ã€‚å½“ç”¨æˆ·æŒ‰ä¸‹æ—¶ï¼Œæ’­æ”¾æå‰å‡†å¤‡å¥½çš„éŸ³é¢‘æ–‡ä»¶ï¼Œç›´æ¥å½•åˆ¶æ”¹å£°éŸ³ã€‚wwww.e2esoft.cn/record-music-with-vsc JSDROIDå®ä¾‹ ç‹è€…è£è€€å¤§å…è‡ªåŠ¨å–Šè¯å’Œç»™å¥½å‹å‘é€è¯­éŸ³æ¶ˆæ¯è„šæœ¬","tags":[{"name":"æŒ‰é”®ç²¾çµ","slug":"æŒ‰é”®ç²¾çµ","permalink":"http://airshu.github.io/tags/%E6%8C%89%E9%94%AE%E7%B2%BE%E7%81%B5/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"FFMpegå¸¸ç”¨å‘½ä»¤","date":"2022-03-08T02:25:29.715Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/å¸¸ç”¨ffmpegå‘½ä»¤/","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153#æ ¼å¼è½¬æ¢ffmpeg -i input.avi output.mp4ffmpeg -i input.mp4 output.ts#æå–éŸ³é¢‘ffmpeg -i input.mp4 -acodec copy -vn output.aac#æå–è§†é¢‘ffmpeg -i input.mp4 -vcodec copy -an output.mp4#è§†é¢‘å‰ªåˆ‡ -ssè¡¨ç¤ºå¼€å§‹æ—¶é—´ -tè¡¨ç¤ºé•¿åº¦ffmpeg -ss 00:00:00 -t 00:00:10 -i input.mp4 -vcodec copy -acodec copy output.mp4#ç ç‡æ§åˆ¶ bitrate=filesize/durationï¼Œæ¯”å¦‚ä¸€ä¸ªæ–‡ä»¶20.8Mï¼Œæ—¶é•¿1åˆ†é’Ÿï¼Œé‚£ä¹ˆï¼Œç ç‡å°±æ˜¯ï¼šbiterate = 20.8M bit/60s = 20.8*1024*1024*8 bit/60s= 2831Kbpsä¸€èˆ¬éŸ³é¢‘çš„ç ç‡åªæœ‰å›ºå®šå‡ ç§ï¼Œæ¯”å¦‚æ˜¯128Kbpsï¼Œé‚£ä¹ˆï¼Œvideoçš„å°±æ˜¯ï¼švideo biterate = 2831Kbps -128Kbps = 2703Kbpsã€‚ffmpeg -i input.mp4 -b:v 2000k output.mp4ffmpeg -i input.mp4 -b:v 2000k -bufsize 2000k output.mp4 # å®˜æ–¹å»ºè®®åŠ ä¸Š-bufsizeï¼Œç”¨äºè®¾ç½®ç ç‡æ§åˆ¶ç¼“å†²å™¨çš„å¤§å°ffmpeg -i input.mp4 -b:v 2000k -bufsize 2000k -maxrate 2500k output.mp4 # -minrate -maxrate æœ€å°æœ€å¤§èŒƒå›´#è§†é¢‘ç¼–ç æ ¼å¼è½¬æ¢ffmpeg -i input.mp4 -vcodec h264 output.mp4 #ä½¿ç”¨h264ç¼–ç ffmpeg -i input.mp4 -vcodec mpeg4 output.mp4 #ä½¿ç”¨mpeg4ç¼–ç #è§†é¢‘å¤§å°ä¿®æ”¹ffmpeg -i input.mp4 -vf scale=960:540 output.mp4 //ps: å¦‚æœ540ä¸å†™ï¼Œå†™æˆ-1ï¼Œå³scale=960:-1, é‚£ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œffmpegä¼šé€šçŸ¥ç¼©æ”¾æ»¤é•œåœ¨è¾“å‡ºæ—¶ä¿æŒåŸå§‹çš„å®½é«˜æ¯”#æ·»åŠ æ°´å°ffmpeg -i input.mp4 -i logo.png -filter_complex overlay output.mp4ffmpeg -i input.mp4 -i logo.png -filter_complex overlay=W-w output.mp4 #å³ä¸Šè§’ffmpeg -i input.mp4 -i logo.png -filter_complex overlay=0:H-h output.mp4 #å·¦ä¸‹è§’ffmpeg -i input.mp4 -i logo.png -filter_complex overlay=W-w:H-h output.mp4 #å³ä¸‹è§’#å»æ‰logoæœ‰æ—¶å€™ï¼Œä¸‹è½½äº†æŸä¸ªç½‘ç«™çš„è§†é¢‘ï¼Œä½†æ˜¯æœ‰logoå¾ˆçƒ¦ï¼Œå’‹åŠï¼Ÿæœ‰åŠæ³•ï¼Œç”¨ffmpegçš„delogoè¿‡æ»¤å™¨ã€‚è¯­æ³•ï¼š-vf delogo=x:y:w:h[:t[:show]]x:y ç¦»å·¦ä¸Šè§’çš„åæ ‡w:h logoçš„å®½å’Œé«˜t: çŸ©å½¢è¾¹ç¼˜çš„åšåº¦é»˜è®¤å€¼4showï¼šè‹¥è®¾ç½®ä¸º1æœ‰ä¸€ä¸ªç»¿è‰²çš„çŸ©å½¢ï¼Œé»˜è®¤å€¼0ã€‚ffmpeg -i input.mp4 -vf delogo=0:0:220:90:100:1 output.mp4#ä»è§†é¢‘ä¸­è·å–æŒ‡å®šå°ºå¯¸çš„ç¼©ç•¥å›¾ï¼Œ -sså‚æ•°è¦åœ¨-iå‚æ•°ä¹‹å‰ffmpeg.exe -ss 2672 -i input.mkv -y -f mjpeg -t 0.01 -s 96x54 U:/xiaodao/src/temp/xxx.jpg#å°†gifè½¬æˆmp4ffmpeg -f gif -i origin.gif -pix_fmt yuv420p output.mp4#ä½¿ç”¨åŸºäºGDIçš„æŠ“å±è®¾å¤‡ffmpeg -f gdigrab -i desktop out.mpg#ä»å±å¹•çš„ï¼ˆ10,20ï¼‰ç‚¹å¤„å¼€å§‹ï¼ŒæŠ“å–640x480çš„å±å¹•ï¼Œè®¾å®šå¸§ç‡ä¸º5ffmpeg -f gdigrab -framerate 5 -offset_x 10 -offset_y 20 -video_size 640x480 -i desktop out.mpg#è®¾ç½®å¸§ç‡ffmpeg -i input.avi -r 29.97 output.mpg#ç ç‡ ABRã€CBRã€VBRffmpeg -i film.avi -b 1.5M film.mp4ffmpeg -i file.avi -b:v 1500k output.mp4è®¾ç½®è¾“å‡ºæ–‡ä»¶æœ€å¤§å¤§å°ffmpeg -i input.avi -fs 10MB output.mp4æ–‡ä»¶å¤§å°è®¡ç®—video_size = video_bitrate * time_in_seconds / 8å¦‚æœéŸ³é¢‘æ²¡æœ‰å‹ç¼©ï¼šaudio_size = sampling_rate * bit_depth * channels * time_in_seconds / 8å‹ç¼©éŸ³é¢‘çš„æ–‡ä»¶ï¼šaudio_size = bitrate * time_in_seconds / 8ç¼©æ”¾è§†é¢‘ffmpeg -i input_file -s 320x240 output_fileé«˜çº§ç¼©æ”¾ scale=width:height[:interl=&#123;1|-1&#125;]ffmpeg -i input.mpg -vf scale=320:240 output.mp4æ ¹æ®è¾“å…¥æ¥è®¾ç½®ç¼©æ”¾å¤§å°ffmpeg -i input.mpg -vf scale=iw/2:ih*0.9 è£å‰ªè§†é¢‘ crop=ow[:oh[:x[:y[:keep_aspect]]]]ä»å·¦ä¸Šè§’è£å‰ªï¼Œå®½åº¦ä¸ºåŸå§‹å°ºå¯¸çš„ä¸€åŠï¼Œé«˜å®½è·ŸåŸå§‹å°ºå¯¸ä¸€æ ·ffmpeg -i input -vf crop=iw/2:ih:0:0 outputç§»åŠ¨è§†é¢‘ pad=width[:height[:x[:y[:color]]]]ffmpeg -i photo.jpg -vf pad=860:660:30:30:pink framed_photo.jpgå°†è§†é¢‘æ¯”ä¾‹ä»4:3è½¬ä¸º16:9ffmpeg -i input -vf pad=ih*16/9:ih:(ow-iw)/2:0:color outputç¿»è½¬å’Œæ—‹è½¬è§†é¢‘æ°´å¹³ç¿»è½¬ffplay -f lavfi -i testsrc -vf hflipæ—‹è½¬ transpose=&#123;0, 1, 2, 3&#125;ffplay -f lavfi -i smptebars -vf transpose=2, vflipç”»ä¸­ç”»ffmpeg -i input1 -i input2 -filter_complex overlay=x:y outputæ°´å°åœ¨å³ä¸‹è§’ffmpeg -i pair.mp4 -i logo.png -filter_complex overlay=W-w:H-h pair1.mp4æŒ‡å®šæ°´å°å¼€å§‹çš„æ—¶é—´ffmpeg -i video_width_timer.mp4 -itsoffset 5 -i logo.png -filter_complex overlay timer_width_logo.mp4ä¿®æ”¹é€Ÿåº¦ffplay -i input.mpg -vf setpts=PTS/3å¿«æ”¾2å€ï¼Œå–å€¼èŒƒå›´0.5-2.0ffplay -i speech.mp3 -af atempo=2åˆ›å»ºå…ƒæ•°æ® -metadata åé¢è·Ÿé”®å€¼å¯¹ffmpeg -i input -metadata artist=FFmpeg -metadata title=&quot;test&quot; outputä¿å­˜å…ƒæ•°æ®åˆ°æ–‡ä»¶ffmpeg -i video.wmv -f ffmetadata data.txtåˆ é™¤å…ƒæ•°æ®ffmpeg -i input.avi -map_metadata -l output.mp4æˆªå›¾ffmpeg -i videoclip.avi -ss 01:23:45 image.jpgè·å–gifåŠ¨ç”»ffmpeg -i promotion.swf -pix_fmt rgb24 promotion.gifæ ¹æ®å›¾ç‰‡åˆ›å»ºè§†é¢‘ffmpeg -loop l -i photo.jpg -t 10 photo.mp4æ ¹æ®å¤šå¼ å›¾ç‰‡ç”Ÿæˆè§†é¢‘ffmpeg -f image2 -i img%d.jpg -r 25 video.mp4æ’­æ”¾rtmpffplay &quot;rtmp://live.hkstv.hk.lxdns.com/live/hks&quot;ä¿å­˜ç›´æ’­æµffmpeg -i http://60.199.188.151/HLS/WG_ETTV-N/index.m3u8 -c:v copy -c:a copy -bsf:a aac_adtstoasc d:\\cap.mp4ä»è§†é¢‘ä¸­æŠ½ç¦»éƒ¨åˆ†ç”Ÿæˆwebpffmpeg -t 3 -ss 00:00:01 -i $&#123;video_path&#125; -vf scale=320:-1 -q:v 50 -r 10 -compression_level 6 -vcodec libwebp -loop 0 $&#123;output_path&#125;ä»è§†é¢‘ä¸­æå–å…³é”®å¸§å›¾ç‰‡ffmpeg -i video_name.mp4 -vf select=&#x27;eq(pict_type\\,I)&#x27; -vsync 2 -s 1920*1080 -f image2 keyframe-%02d.jpegè®¡ç®—è§†é¢‘çš„æ—¶é•¿ffmpeg -i source.mp4 2&gt;&amp;1 | grep &#x27;Duration&#x27; | cut -d &#x27; &#x27; -f 4 | sed s/,//åˆå¹¶ä¸¤ä¸ªè§†é¢‘å®ç”¨æ–‡ä»¶çš„æ–¹å¼ï¼š1. ç¼–å†™filetext.txtæ–‡ä»¶file â€˜a.mp4â€™file â€˜b.mp4â€™2. æ‰§è¡Œå‘½ä»¤ffmpeg -f concat -i filelist.txt -c copy output.mp4ç›´æ¥ç”¨å‘½ä»¤è¡Œffmpeg -i â€œconcat:a.mp4|b.mp4&quot; -c copy output.mp4","tags":[{"name":"ffmpeg","slug":"ffmpeg","permalink":"http://airshu.github.io/tags/ffmpeg/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"IOå¤šè·¯å¤ç”¨","date":"2022-03-08T02:25:29.715Z","path":"wiki/æ“ä½œç³»ç»Ÿ/æœªåˆ†ç±»/IOå¤šè·¯å¤ç”¨/","text":"å‘å±•å²å¼€å§‹çš„æ—¶å€™ï¼Œä¸ºäº†å®ç°ä¸€ä¸ªæœåŠ¡å™¨å¯ä»¥æ”¯æŒå¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼Œäººä»¬æƒ³å‡ºäº†fork&#x2F;threadç­‰åŠæ³•ï¼Œå½“ä¸€ä¸ªè¿æ¥æ¥åˆ°çš„æ—¶å€™ï¼Œå°±fork&#x2F;threadä¸€ä¸ªè¿›ç¨‹&#x2F;çº¿ç¨‹å»æ¥æ”¶å¹¶ä¸”å¤„ç†è¯·æ±‚ã€‚ åˆ°äº†80å¹´ä»£ï¼Œè®¡ç®—æœºç½‘ç»œå¼€å§‹æˆå‹ï¼Œè¶Šæ¥è¶Šå¤šçš„ç”¨æˆ·è¿›è¡Œç½‘ç»œè¿æ¥ï¼Œä½†æ˜¯ä¹‹å‰çš„fork&#x2F;threadæ¨¡å‹åœ¨é«˜å¹¶å‘åœºæ™¯å¿«ä¸è¡Œäº†ã€‚1983å¹´ï¼Œå‘æ˜äº†selectã€‚ å¯¹åº”çš„ç¼–ç¨‹æ¨¡å‹å°±æ˜¯ï¼šä¸€ä¸ªè¿æ¥æ¥äº†ï¼Œå°±å¿…é¡»éå†æ‰€æœ‰å·²ç»æ³¨å†Œçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ¥æ‰¾åˆ°é‚£ä¸ªéœ€è¦å¤„ç†ä¿¡æ¯çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¦‚æœå·²ç»æ³¨å†Œäº†å‡ ä¸‡ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œé‚£ä¼šå› ä¸ºéå†è¿™äº›å·²ç»æ³¨å†Œçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯¼è‡´cpuçˆ†ç‚¸ã€‚ åˆ°2002å¹´ï¼Œepollå‡ºç°äº†ï¼ŒäºLinux 2.5.44é¦–åº¦ç™»åœºã€‚ åŸºæœ¬æ¦‚å¿µç”¨æˆ·ç©ºé—´&#x2F;å†…æ ¸ç©ºé—´æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯å†…æ ¸ï¼Œä¸ºäº†ä¿è¯ç”¨æˆ·è¿›ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œå†…æ ¸ï¼ˆkernelï¼‰ï¼Œä¿è¯å†…æ ¸çš„å®‰å…¨ï¼Œæ“ä½œç³»ç»Ÿå°†è™šæ‹Ÿç©ºé—´åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ã€‚ é’ˆå¯¹linuxæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå°†æœ€é«˜çš„1Gå­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€0xC0000000åˆ°0xFFFFFFFFï¼‰ï¼Œä¾›å†…æ ¸ä½¿ç”¨ï¼Œç§°ä¸ºå†…æ ¸ç©ºé—´ï¼Œè€Œå°†è¾ƒä½çš„3Gå­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€0x00000000åˆ°0xBFFFFFFFï¼‰ï¼Œä¾›å„ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œç§°ä¸ºç”¨æˆ·ç©ºé—´ã€‚ åŒæ­¥ä¸å¼‚æ­¥ åŒæ­¥ï¼šåŒæ­¥å°±æ˜¯å‘èµ·ä¸€ä¸ªè°ƒç”¨åï¼Œè¢«è°ƒç”¨è€…æœªå¤„ç†å®Œè¯·æ±‚ä¹‹å‰ï¼Œè°ƒç”¨ä¸è¿”å›ã€‚ å¼‚æ­¥ï¼šå¼‚æ­¥å°±æ˜¯å‘ä¸€ä¸ªè°ƒç”¨åï¼Œç«‹åˆ»å¾—åˆ°è¢«è°ƒç”¨è€…çš„å›åº”è¡¨ç¤ºå·²æ¥æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯è¢«è°ƒç”¨è€…å¹¶æ²¡æœ‰è¿”å›ç»“æœï¼Œæ­¤æ—¶å¯ä»¥å¤„ç†å…¶ä»–çš„è¯·æ±‚ï¼Œè¢«è°ƒç”¨è€…é€šå¸¸ä¾é äº‹ä»¶ã€å›è°ƒç­‰æœºåˆ¶æ¥é€šçŸ¥è°ƒç”¨è€…å…¶è¿”å›ç»“æœã€‚ é˜»å¡å’Œéé˜»å¡ é˜»å¡ï¼šé˜»å¡å°±æ˜¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œè°ƒç”¨è€…ä¸€ç›´ç­‰å¾…è¯·æ±‚ç»“æœè¿”å›ï¼Œä¹Ÿå°±æ˜¯å½“å‰çº¿ç¨‹ä¼šè¢«æŒ‚èµ·ï¼Œæ— æ³•ä»äº‹å…¶ä»–ä»»åŠ¡ï¼Œåªæœ‰å½“æ¡ä»¶å°±ç»ªæ‰èƒ½ç»§ç»­ã€‚ éé˜»å¡ï¼šéé˜»å¡å°±æ˜¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œè°ƒç”¨è€…ä¸ç”¨ä¸€ç›´ç­‰ç€ç»“æœè¿”å›ï¼Œå¯ä»¥å…ˆå»å¹²å…¶ä»–çš„äº‹æƒ…ã€‚ è¿›ç¨‹åˆ‡æ¢æŒ‚èµ·æ­£åœ¨CPUä¸Šè¿è¡Œçš„è¿›ç¨‹ï¼Œå¹¶æ¢å¤ä»¥å‰æŒ‚èµ·çš„æŸä¸ªè¿›ç¨‹çš„æ‰§è¡Œã€‚è¿™ç§è¡Œä¸ºè¢«ç§°ä¸ºè¿›ç¨‹åˆ‡æ¢ã€‚ ä»ä¸€ä¸ªè¿›ç¨‹çš„è¿è¡Œè½¬åˆ°å¦ä¸€ä¸ªè¿›ç¨‹ä¸Šè¿è¡Œï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ç»è¿‡ä¸‹é¢è¿™äº›å˜åŒ–ï¼š ä¿å­˜å¤„ç†æœºä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬ç¨‹åºè®¡æ•°å™¨å’Œå…¶ä»–å¯„å­˜å™¨ã€‚ æ›´æ–°PCBä¿¡æ¯ã€‚ æŠŠè¿›ç¨‹çš„PCBç§»å…¥ç›¸åº”çš„é˜Ÿåˆ—ï¼Œå¦‚å°±ç»ªã€åœ¨æŸäº‹ä»¶é˜»å¡ç­‰é˜Ÿåˆ—ã€‚ é€‰æ‹©å¦ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œï¼Œå¹¶æ›´æ–°å…¶PCBã€‚ æ›´æ–°å†…å­˜ç®¡ç†çš„æ•°æ®ç»“æ„ã€‚ æ¢å¤å¤„ç†æœºä¸Šä¸‹æ–‡ã€‚ æ–‡ä»¶æè¿°ç¬¦File descriptorï¼šè¡¨è¿°æŒ‡å‘æ–‡ä»¶çš„å¼•ç”¨çš„æŠ½è±¡åŒ–æ¦‚å¿µã€‚åœ¨å½¢å¼ä¸Šæ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚å®é™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªç´¢å¼•å€¼ï¼ŒæŒ‡å‘å†…æ ¸ä¸ºæ¯ä¸€ä¸ªè¿›ç¨‹æ‰€ç»´æŠ¤çš„è¯¥è¿›ç¨‹æ‰“å¼€æ–‡ä»¶çš„è®°å½•è¡¨ã€‚å½“ç¨‹åºæ‰“å¼€ä¸€ä¸ªç°æœ‰æ–‡ä»¶æˆ–è€…åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ—¶ï¼Œå†…æ ¸å‘è¿›ç¨‹è¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œä¸ç®¡æ˜¯è¿›è¡Œæ–‡ä»¶æ“ä½œè¿˜æ˜¯Socketç¼–ç¨‹ï¼Œéƒ½æ˜¯æ“ä½œæ–‡ä»¶æè¿°ç¬¦ã€‚ ç¼“å­˜I&#x2F;Oç¼“å­˜I&#x2F;Oåˆç§°ä¸ºæ ‡å‡†I&#x2F;Oï¼Œå¤§å¤šæ•°æ–‡ä»¶ç³»ç»Ÿçš„é»˜è®¤I&#x2F;Oæ“ä½œéƒ½æ˜¯ç¼“å­˜I&#x2F;Oã€‚åœ¨Linuxçš„ç¼“å­˜I&#x2F;Oæœºåˆ¶ä¸­ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†I&#x2F;Oçš„æ•°æ®ç¼“å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿçš„é¡µç¼“å­˜ä¸­ï¼Œå³æ•°æ®ä¼šå…ˆè¢«æ‹·è´åˆ°æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç¼“å†²åŒºä¸­ï¼Œç„¶åæ‰ä¼šä»æ“ä½œç³»ç»Ÿå†…æ ¸çš„ç¼“å†²åŒºæ‹·è´åˆ°åº”ç”¨ç¨‹åºçš„åœ°å€ç©ºé—´ã€‚ å…·ä½“å®ç°selectå®ƒä»…ä»…çŸ¥é“äº†ï¼Œæœ‰I&#x2F;Oäº‹ä»¶å‘ç”Ÿäº†ï¼Œå´å¹¶ä¸çŸ¥é“æ˜¯å“ªé‚£å‡ ä¸ªæµï¼ˆå¯èƒ½æœ‰ä¸€ä¸ªï¼Œå¤šä¸ªï¼Œç”šè‡³å…¨éƒ¨ï¼‰ï¼Œæˆ‘ä»¬åªèƒ½æ— å·®åˆ«è½®è¯¢æ‰€æœ‰æµï¼Œæ‰¾å‡ºèƒ½è¯»å‡ºæ•°æ®ï¼Œæˆ–è€…å†™å…¥æ•°æ®çš„æµï¼Œå¯¹ä»–ä»¬è¿›è¡Œæ“ä½œã€‚æ‰€ä»¥selectå…·æœ‰O(n)çš„æ— å·®åˆ«è½®è¯¢å¤æ‚åº¦ï¼ŒåŒæ—¶å¤„ç†çš„æµè¶Šå¤šï¼Œæ— å·®åˆ«è½®è¯¢æ—¶é—´å°±è¶Šé•¿ã€‚ ç¼ºç‚¹ å•ä¸ªè¿›ç¨‹æ‰€æ‰“å¼€çš„FDæ˜¯æœ‰é™åˆ¶çš„ï¼Œé€šè¿‡ FD_SETSIZE è®¾ç½®ï¼Œé»˜è®¤1024 ; æ¯æ¬¡è°ƒç”¨ selectï¼Œéƒ½éœ€è¦æŠŠ fd é›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨ fd å¾ˆå¤šæ—¶ä¼šå¾ˆå¤§ï¼› å¯¹ socket æ‰«ææ—¶æ˜¯çº¿æ€§æ‰«æï¼Œé‡‡ç”¨è½®è¯¢çš„æ–¹æ³•ï¼Œæ•ˆç‡è¾ƒä½ï¼ˆé«˜å¹¶å‘ï¼‰ pollpollæœ¬è´¨ä¸Šå’Œselectæ²¡æœ‰åŒºåˆ«ï¼Œå®ƒå°†ç”¨æˆ·ä¼ å…¥çš„æ•°ç»„æ‹·è´åˆ°å†…æ ¸ç©ºé—´ï¼Œç„¶åæŸ¥è¯¢æ¯ä¸ªfdå¯¹åº”çš„è®¾å¤‡çŠ¶æ€ï¼Œ ä½†æ˜¯å®ƒæ²¡æœ‰æœ€å¤§è¿æ¥æ•°çš„é™åˆ¶ï¼ŒåŸå› æ˜¯å®ƒæ˜¯åŸºäºé“¾è¡¨æ¥å­˜å‚¨çš„ã€‚ ç¼ºç‚¹å®ƒæ²¡æœ‰æœ€å¤§è¿æ¥æ•°çš„é™åˆ¶ï¼Œä½†æ˜¯åŒæ ·æœ‰ç¼ºç‚¹ï¼š æ¯æ¬¡è°ƒç”¨ poll ï¼Œéƒ½éœ€è¦æŠŠ fd é›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨ fd å¾ˆå¤šæ—¶ä¼šå¾ˆå¤§ï¼› å¯¹ socket æ‰«ææ˜¯çº¿æ€§æ‰«æï¼Œé‡‡ç”¨è½®è¯¢çš„æ–¹æ³•ï¼Œæ•ˆç‡è¾ƒä½ï¼ˆé«˜å¹¶å‘æ—¶ï¼‰ epollepollå¯ä»¥ç†è§£ä¸ºevent pollï¼Œä¸åŒäºå¿™è½®è¯¢å’Œæ— å·®åˆ«è½®è¯¢ï¼Œepollä¼šæŠŠå“ªä¸ªæµå‘ç”Ÿäº†æ€æ ·çš„I&#x2F;Oäº‹ä»¶é€šçŸ¥æˆ‘ä»¬ã€‚æ‰€ä»¥æˆ‘ä»¬è¯´epollå®é™…ä¸Šæ˜¯äº‹ä»¶é©±åŠ¨ï¼ˆæ¯ä¸ªäº‹ä»¶å…³è”ä¸Šfdï¼‰çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯¹è¿™äº›æµçš„æ“ä½œéƒ½æ˜¯æœ‰æ„ä¹‰çš„ã€‚ï¼ˆå¤æ‚åº¦é™ä½åˆ°äº†O(1)ï¼‰ å‚è€ƒ äº”ç§IOæ¨¡å‹ å½»åº•ç†è§£ IO å¤šè·¯å¤ç”¨å®ç°æœºåˆ¶ https://zh.wikipedia.org/wiki/Epoll https://baike.baidu.com/item/poll/3643578 https://mp.weixin.qq.com/s/Ok7SIROXu1THUbWsFu-UYw","tags":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"http://airshu.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"}],"categories":[{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"æœªåˆ†ç±»","slug":"æ“ä½œç³»ç»Ÿ/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"Linuxå¸¸ç”¨æ“ä½œ","date":"2022-03-08T02:25:29.712Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/Linuxå¸¸ç”¨æ“ä½œ/","text":"æ·»åŠ ç”¨æˆ·å¹¶èµ‹äºˆæƒé™#æ·»åŠ ç”¨æˆ· adduser -m xxx vim /etc/sudoers æ·»åŠ ï¼š%sudo ALL=(ALL:ALL) ALL å°†ç”¨æˆ·æ·»åŠ åˆ°sudoç»„ gpasswd -a xxx sudo sshæ“ä½œé…ç½® ssh -p ç«¯å£å· ç”¨æˆ·å@ipåœ°å€ ssh -p 22 root@192.168.1.1 #è®¾ç½®ç§é’¥çš„æƒé™ chmod 666 id_rsa","tags":[{"name":"linux","slug":"linux","permalink":"http://airshu.github.io/tags/linux/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"PCå®¢æˆ·ç«¯æŠ€æœ¯æ–¹æ¡ˆåˆ†æ","date":"2022-03-08T02:25:29.712Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/PCå®¢æˆ·ç«¯æŠ€æœ¯æ–¹æ¡ˆåˆ†æ/","text":"ä¸åŒPCå®¢æˆ·ç«¯æŠ€æœ¯æ–¹æ¡ˆçš„æ¯”è¾ƒQtå®˜ç½‘ï¼šhttps://www.qt.io/ Qtå…·æœ‰è·¨å¹³å°çš„ç‰¹æ€§ï¼Œå¯é€‰æ‹©QWidgetã€QQuickã€‚æ•´ä¸ªåŒ…æ¯”è¾ƒå¤§ã€‚è™½ç„¶å¯ä»¥æ ¹æ®å®é™…æƒ…å†µå»æ‰ä¸€éƒ¨åˆ†åŠ¨æ€åº“å’Œæ–‡ä»¶ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¤§ã€‚ CEFï¼ˆChromium Embedded Frameworkï¼‰å®˜ç½‘ï¼šhttps://bitbucket.org/chromiumembedded/cef/src/master/ æ˜¯ä¸€ä¸ªåŸºäºGoogle Chromium çš„å¼€æºé¡¹ç›®ã€‚Google Chromiumé¡¹ç›®ä¸»è¦æ˜¯ä¸ºGoogle Chromeåº”ç”¨å¼€å‘çš„ï¼Œè€ŒCEFçš„ç›®æ ‡åˆ™æ˜¯ä¸ºç¬¬ä¸‰æ–¹åº”ç”¨æä¾›å¯åµŒå…¥æµè§ˆå™¨æ”¯æŒã€‚CEFéš”ç¦»åº•å±‚Chromiumå’ŒBlinkçš„å¤æ‚ä»£ç ï¼Œå¹¶æä¾›ä¸€å¥—äº§å“çº§ç¨³å®šçš„APIï¼Œå‘å¸ƒè·Ÿè¸ªå…·ä½“Chromiumç‰ˆæœ¬çš„åˆ†æ”¯ï¼Œä»¥åŠäºŒè¿›åˆ¶åŒ…ã€‚é€šè¿‡å°è£…æ¥å£, ç„¶åç”±chromiumå›è°ƒåˆ°è‡ªå·±çš„ç¨‹åº, é©±åŠ¨æ•´ä¸ªç¨‹åºè¿è¡Œã€‚ ä¸ªäººè®¤ä¸ºé€‰æ‹©CEFçš„ä¸»è¦åŸå› æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š åŸºäºJSã€Htmlè¿™ä¸€å¥—WebæŠ€æœ¯ï¼Œå¼€å‘é€Ÿåº¦å¿«ï¼› èƒ½åšå‡ºé«˜æ€§èƒ½çš„åŠ¨ç”»æ•ˆæœ Electronå®˜ç½‘ï¼šhttp://www.electronjs.org/ ä½¿ç”¨Node.jsï¼ˆä½œä¸ºåç«¯ï¼‰å’ŒChromiumï¼ˆä½œä¸ºå‰ç«¯ï¼‰å®Œæˆæ¡Œé¢GUIåº”ç”¨ç¨‹åºçš„å¼€å‘ã€‚Electronæ˜¯åœ¨chromiumçš„åŸºç¡€ä¹‹ä¸Š, å†åµŒå…¥ä¸€äº†ä¸ªjsæ‰§è¡Œçš„v8å¼•æ“, ç”±æ­¤v8å¼•æ“ä¸chromiumå†…éƒ¨çš„v8è¿›è¡Œä¿¡å·çš„äº¤äº’, é©±åŠ¨ç¨‹åºè¿è¡Œã€‚ duilibå®˜ç½‘ï¼šhttps://github.com/duilib/duilib å¼€æºï¼Œå°å·§çµæ´»ï¼Œå®¹æ˜“æ‰©å±•ï¼Œç•Œé¢ä¸ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ã€‚å›½å†…æœ‰è®¸å¤šå¤§å‚éƒ½åœ¨ç”¨è¿™ä¸ªåº“ï¼Œä¸è¿‡åº”è¯¥éƒ½è¿›è¡Œè¿‡æ·±å…¥çš„å®šåˆ¶ï¼Œå®˜æ–¹ç‰ˆæœ¬çš„æ›´æ–°å¹¶ä¸é¢‘ç¹ï¼Œæ–‡æ¡£è·Ÿå…¶ä»–å‡ ä¸ªæ¯”èµ·æ¥å·®è·è¾ƒå¤§ã€‚ æ•™ç¨‹ï¼š https://blog.oo87.com/cpp/6868.html WPFï¼ˆWindows Presentation Foundationï¼‰å¾®è½¯æ¨å‡ºçš„åŸºäºWindows Vistaçš„ç”¨æˆ·ç•Œé¢æ¡†æ¶ï¼Œå±äº.NET Framework 3.0çš„ä¸€éƒ¨åˆ†ã€‚åŸºäºDirect3Dåˆ›å»ºï¼Œä½¿ç”¨GPUï¼Œæ‹¥æœ‰æ›´å¥½çš„æ€§èƒ½ã€‚ UMPï¼ˆUniversal Windows Platformï¼‰å®˜æ–¹ä»‹ç»ï¼šhttps://docs.microsoft.com/zh-cn/windows/uwp/get-started/universal-application-platform-guide åœ¨ Windows 10 ä¸­ï¼Œå¾®è½¯é¦–æ¬¡å¼•å…¥äº† UWPï¼ˆé€šç”¨ Windows å¹³å°ï¼‰çš„æ¦‚å¿µï¼Œè®©å¼€å‘è€…åªéœ€ä¸€æ¬¡ç¼–å†™ï¼Œå°±èƒ½è®©ç¨‹åºåœ¨ç”µè„‘å’Œæ‰‹æœºç­‰å¤šç§è®¾å¤‡ä¸Šè¿è¡Œã€‚ PyQtä¸‹è½½åœ°å€ï¼š https://pypi.org/project/PyQt5/ åŸºäºQtçš„Pythonå°è£…ï¼Œç”±äºPythonçš„ç®€æ˜“ç‰¹æ€§ï¼Œå¼€å‘æ•ˆç‡æé«˜ã€‚ ä¸åŒè½¯ä»¶çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼š yyï¼šQt+CEF é’‰é’‰ï¼šCEF+Qt5+duilib æ–—é±¼ï¼šQt+å£°ç½‘SDK+CrashRpt è™ç‰™ï¼š.Net+Qt4 åˆ€é”‹ç”µç«ï¼šElectron å¾®ä¿¡PCç«¯ï¼šduilib ç½‘æ˜“CCï¼šQt4+PyQt4+ActionScript(Flex) å‚è€ƒ https://www.dazhuanlan.com/2019/09/29/5d8f936a633a2/?cf_chl_jschl_tk&#x3D;ef7184070e28df4b7ee98496aa8b8ff50c47dcd7-1602323919-0-ASFIF35e3NpZNuU7Ndt3pR36r7hlqGch5EsER64Huxe0jFolt_H3NQYXXDmvjWl_m8WVlRnkeLLk1CpX-mLzObrx_mpJIWdumnG8N-g4L7RCf1XxZyM3Ucv6EPDJhAfJSexUlyeoz-AzeC4nE10bcWsW6MyJjhJRQfvo2ABHsoKcu0RLGe4_PIkvL8ox7CchII1vJKWNus0JBvjUiLa0TWyWOGE2WLCwUAwYSEIRE5vqTnW4bMP0C5MTZnjw6sk7Je9gHmAM79oqXilMJdJrVonFl3oItVG8fPn-iwqZbFdBK3iqj7xjlstE8HSgJ7ZEdQ","tags":[{"name":"PC","slug":"PC","permalink":"http://airshu.github.io/tags/PC/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"ReactiveX","date":"2022-03-08T02:25:29.712Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/ReactiveX/","text":"Observablesæ¦‚è¿°ReactiveXæ˜¯Reactive Extensionsçš„ç¼©å†™ï¼Œä¸€èˆ¬ç®€å†™ä¸ºRxï¼Œæœ€åˆæ˜¯LINQçš„ä¸€ä¸ªæ‰©å±•ï¼Œç”±å¾®è½¯çš„æ¶æ„å¸ˆErik Meijeré¢†å¯¼çš„å›¢é˜Ÿå¼€å‘ï¼Œåœ¨2012å¹´11æœˆå¼€æºï¼ŒRxæ˜¯ä¸€ä¸ªç¼–ç¨‹æ¨¡å‹ï¼Œç›®æ ‡æ˜¯æä¾›ä¸€è‡´çš„ç¼–ç¨‹æ¥å£ï¼Œå¸®åŠ©å¼€å‘è€…æ›´æ–¹ä¾¿çš„å¤„ç†å¼‚æ­¥æ•°æ®æµï¼ŒRxåº“æ”¯æŒå¤§éƒ¨åˆ†ä¸»æµè¯­è¨€ã€‚ ä½¿ç”¨è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼Œå½“ä½ æœ‰ä¸€å¤§å †çš„ä»»åŠ¡æ˜¯ä¸ç›¸äº’ä¾èµ–ï¼Œä½ å°±å¯ä»¥åŒæ—¶æ‰§è¡Œä»–ä»¬ï¼Œè€Œä¸æ˜¯ç­‰å¾…æ¯ä¸€ä¸ªç±»å¯åŠ¨ä¸‹ä¸€ä¸ªå‰å®Œæˆï¼Œè¿™æ ·ä½ çš„æ•´ä¸ªä»»åŠ¡åŒ…åªéœ€è¦èŠ±æœ€é•¿çš„ä»»åŠ¡æ—¶é—´ã€‚ åœ¨ReactiveXä¸­ï¼Œä¸€ä¸ªè§‚å¯Ÿè€…(Observer)è®¢é˜…ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡(Observable)ã€‚è§‚å¯Ÿè€…å¯¹Observableå‘å°„çš„æ•°æ®æˆ–æ•°æ®åºåˆ—ä½œå‡ºå“åº”ã€‚è¿™ç§æ¨¡å¼å¯ä»¥æå¤§åœ°ç®€åŒ–å¹¶å‘æ“ä½œï¼Œå› ä¸ºå®ƒåˆ›å»ºäº†ä¸€ä¸ªå¤„äºå¾…å‘½çŠ¶æ€çš„è§‚å¯Ÿè€…å“¨å…µï¼Œåœ¨æœªæ¥æŸä¸ªæ—¶åˆ»å“åº”Observableçš„é€šçŸ¥ï¼Œä¸éœ€è¦é˜»å¡ç­‰å¾…Observableå‘å°„æ•°æ®ã€‚ èƒŒæ™¯çŸ¥è¯†åœ¨å¾ˆå¤šè½¯ä»¶ç¼–ç¨‹ä»»åŠ¡ä¸­ï¼Œæˆ–å¤šæˆ–å°‘ä½ éƒ½ä¼šæœŸæœ›ä½ å†™çš„ä»£ç èƒ½æŒ‰ç…§ç¼–å†™çš„é¡ºåºï¼Œä¸€æ¬¡ä¸€ä¸ªçš„é¡ºåºæ‰§è¡Œå’Œå®Œæˆã€‚ä½†æ˜¯åœ¨ReactiveXä¸­ï¼Œå¾ˆå¤šæŒ‡ä»¤å¯èƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œä¹‹åä»–ä»¬çš„æ‰§è¡Œç»“æœæ‰ä¼šè¢«è§‚å¯Ÿè€…æ•è·ï¼Œé¡ºåºæ˜¯ä¸ç¡®å®šçš„ã€‚ä¸ºè¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½ å®šä¹‰ä¸€ç§è·å–å’Œå˜æ¢æ•°æ®çš„æœºåˆ¶ï¼Œè€Œä¸æ˜¯è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ã€‚åœ¨è¿™ç§æœºåˆ¶ä¸‹ï¼Œå­˜åœ¨ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡(Observable)ï¼Œè§‚å¯Ÿè€…(Observer)è®¢é˜…(Subscribe)å®ƒï¼Œå½“æ•°æ®å°±ç»ªæ—¶ï¼Œä¹‹å‰å®šä¹‰çš„æœºåˆ¶å°±ä¼šåˆ†å‘æ•°æ®ç»™ä¸€ç›´å¤„äºç­‰å¾…çŠ¶æ€çš„è§‚å¯Ÿè€…å“¨å…µã€‚ è¿™ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼Œå¦‚æœä½ æœ‰å¤§é‡çš„ä»»åŠ¡è¦å¤„ç†ï¼Œå®ƒä»¬äº’ç›¸ä¹‹é—´æ²¡æœ‰ä¾èµ–å…³ç³»ã€‚ä½ å¯ä»¥åŒæ—¶å¼€å§‹æ‰§è¡Œå®ƒä»¬ï¼Œä¸ç”¨ç­‰å¾…ä¸€ä¸ªå®Œæˆå†å¼€å§‹ä¸‹ä¸€ä¸ªï¼ˆç”¨è¿™ç§æ–¹å¼ï¼Œä½ çš„æ•´ä¸ªä»»åŠ¡é˜Ÿåˆ—èƒ½è€—è´¹çš„æœ€é•¿æ—¶é—´ï¼Œä¸ä¼šè¶…è¿‡ä»»åŠ¡é‡Œæœ€è€—æ—¶çš„é‚£ä¸ªï¼‰ã€‚ æœ‰å¾ˆå¤šæœ¯è¯­å¯ç”¨äºæè¿°è¿™ç§å¼‚æ­¥ç¼–ç¨‹å’Œè®¾è®¡æ¨¡å¼ï¼Œåœ¨åœ¨æœ¬æ–‡é‡Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›æœ¯è¯­ï¼šä¸€ä¸ªè§‚å¯Ÿè€…è®¢é˜…ä¸€ä¸ªå¯è§‚å¯Ÿå¯¹è±¡ (An observer subscribes to an Observable)ã€‚é€šè¿‡è°ƒç”¨è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼ŒObservableå‘å°„æ•°æ®æˆ–é€šçŸ¥ç»™å®ƒçš„è§‚å¯Ÿè€…ã€‚ åœ¨å…¶å®ƒçš„æ–‡æ¡£å’Œåœºæ™¯é‡Œï¼Œæœ‰æ—¶æˆ‘ä»¬ä¹Ÿå°†Observerå«åšSubscriberã€Watcherã€Reactorã€‚è¿™ä¸ªæ¨¡å‹é€šå¸¸è¢«ç§°ä½œReactoræ¨¡å¼ã€‚ åˆ›å»ºè§‚å¯Ÿè€…å…³äºObserversçš„åˆ›å»º åŒæ­¥æ–¹å¼ï¼š è°ƒç”¨ä¸€ä¸ªæ–¹æ³• ç”¨ä¸€ä¸ªå˜é‡å­˜å‚¨æ–¹æ³•è¿”å›å€¼ ä½¿ç”¨è¿™ä¸ªå˜é‡ä½œä¸ºä¸€ä¸ªæ–°çš„å€¼åšå…¶ä»–äº‹æƒ… ä¾‹å¦‚ï¼š 123//å†™ä¸€ä¸ªå›è°ƒreturnVal = someMethod(paramters);//åšæ–°çš„äº‹æƒ… å¼‚æ­¥æ–¹å¼ï¼š å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œæ­¤æ–¹æ³•æ˜¯åšä¸€äº›äº‹æƒ…å¹¶å¸¦æœ‰æ¥ä¹‹äºå¼‚æ­¥è°ƒç”¨çš„è¿”å›å€¼ï¼›è¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯observerçš„ä¸€éƒ¨åˆ† å®šä¹‰å¼‚æ­¥è°ƒç”¨è‡ªèº«ä½œä¸ºä¸€ä¸ªObservable é€šè¿‡è®¢é˜…çš„æ–¹å¼è¿æ¥observeråˆ°Observable æ‰§è¡Œä½ çš„ä¸šåŠ¡ 123def myOnNext = &#123;it-&gt;do something useful with it&#125;;def myObservable = someOvservable(itsParamters);myObservable.subscribe(myOnNext); onNextï¼ŒonCompletedï¼ŒonErrorå›è°ƒ onNextï¼šæ¯å½“Observableå¹¿æ’­æ•°æ®æ—¶å°†ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°†ä¼šè¢«ä½œä¸ºObservableçš„ä¸€ä¸ªå¹¿æ’­é¡¹ç›®å‚æ•°è¢«å‘é€ onErrorï¼šè¡¨ç¤ºå†…éƒ¨å·²ç»å‘ç”Ÿå¼‚å¸¸ onCompletedï¼šæˆåŠŸè°ƒç”¨onNext 123456def myOnNext = &#123; item -&gt; /* ä»»åŠ¡æ‰§è¡Œ */ &#125;;def myError = &#123; throwable -&gt; /* å¤±è´¥æ—¶çš„å“åº” */ &#125;;def myComplete = &#123; /* æˆåŠŸåçš„å“åº” */ &#125;;def myObservable = someMethod(itsParameters);myObservable.subscribe(myOnNext, myError, myComplete);// ç»§ç»­æ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡é€»è¾‘ å–æ¶ˆè®¢é˜…ï¼ˆUbsubscribingï¼‰åœ¨ä¸€äº›ReactiveXå®ç°ä¸­ï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„è§‚å¯Ÿè€…æ¥å£Subscriberï¼Œå®ƒæœ‰ä¸€ä¸ªunsubscribeæ–¹æ³•ã€‚è°ƒç”¨è¿™ä¸ªæ–¹æ³•è¡¨ç¤ºä½ ä¸å…³å¿ƒå½“å‰è®¢é˜…çš„Observableäº†ï¼Œå› æ­¤Observableå¯ä»¥é€‰æ‹©åœæ­¢å‘å°„æ–°çš„æ•°æ®é¡¹ï¼ˆå¦‚æœæ²¡æœ‰å…¶å®ƒè§‚å¯Ÿè€…è®¢é˜…ï¼‰ã€‚ å–æ¶ˆè®¢é˜…çš„ç»“æœä¼šä¼ é€’ç»™è¿™ä¸ªObservableçš„æ“ä½œç¬¦é“¾ï¼Œè€Œä¸”ä¼šå¯¼è‡´è¿™ä¸ªé“¾æ¡ä¸Šçš„æ¯ä¸ªç¯èŠ‚éƒ½åœæ­¢å‘å°„æ•°æ®é¡¹ã€‚è¿™äº›å¹¶ä¸ä¿è¯ä¼šç«‹å³å‘ç”Ÿï¼Œç„¶è€Œï¼Œå¯¹ä¸€ä¸ªObservableæ¥è¯´ï¼Œå³ä½¿æ²¡æœ‰è§‚å¯Ÿè€…äº†ï¼Œå®ƒä¹Ÿå¯ä»¥åœ¨ä¸€ä¸ªwhileå¾ªç¯ä¸­ç»§ç»­ç”Ÿæˆå¹¶å°è¯•å‘å°„æ•°æ®é¡¹ã€‚ å…³äºå‘½åçº¦å®šReactiveXçš„æ¯ç§ç‰¹å®šè¯­è¨€çš„å®ç°éƒ½æœ‰è‡ªå·±çš„å‘½ååå¥½ï¼Œè™½ç„¶ä¸åŒçš„å®ç°ä¹‹é—´æœ‰å¾ˆå¤šå…±åŒç‚¹ï¼Œä½†å¹¶ä¸å­˜åœ¨ä¸€ä¸ªç»Ÿä¸€çš„å‘½åæ ‡å‡†ã€‚ è€Œä¸”ï¼Œåœ¨æŸäº›åœºæ™¯ä¸­ï¼Œä¸€äº›åå­—æœ‰ä¸åŒçš„éšå«æ„ä¹‰ï¼Œæˆ–è€…åœ¨æŸäº›è¯­è¨€çœ‹æ¥æ¯”è¾ƒæ€ªå¼‚ã€‚ ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªonEventå‘½åæ¨¡å¼(onNext, onCompleted, onError)ï¼Œåœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œè¿™äº›åå­—å¯èƒ½æ„å‘³ç€äº‹ä»¶å¤„ç†å™¨å·²ç»æ³¨å†Œã€‚ç„¶è€Œåœ¨ReactiveXé‡Œï¼Œä»–ä»¬æ˜¯äº‹ä»¶å¤„ç†å™¨çš„åå­—ã€‚ Observablesçš„â€çƒ­â€å’Œâ€å†·â€Observableä»€ä¹ˆæ—¶å€™å¼€å§‹å‘å°„æ•°æ®åºåˆ—ï¼Ÿè¿™å–å†³äºObservableçš„å®ç°ï¼Œä¸€ä¸ªâ€çƒ­â€çš„Observableå¯èƒ½ä¸€åˆ›å»ºå®Œå°±å¼€å§‹å‘å°„æ•°æ®ï¼Œå› æ­¤æ‰€æœ‰åç»­è®¢é˜…å®ƒçš„è§‚å¯Ÿè€…å¯èƒ½ä»åºåˆ—ä¸­é—´çš„æŸä¸ªä½ç½®å¼€å§‹æ¥å—æ•°æ®ï¼ˆæœ‰ä¸€äº›æ•°æ®é”™è¿‡äº†ï¼‰ã€‚ä¸€ä¸ªâ€å†·â€çš„Observableä¼šä¸€ç›´ç­‰å¾…ï¼Œç›´åˆ°æœ‰è§‚å¯Ÿè€…è®¢é˜…å®ƒæ‰å¼€å§‹å‘å°„æ•°æ®ï¼Œå› æ­¤è¿™ä¸ªè§‚å¯Ÿè€…å¯ä»¥ç¡®ä¿ä¼šæ”¶åˆ°æ•´ä¸ªæ•°æ®åºåˆ—ã€‚ åœ¨ä¸€äº›ReactiveXå®ç°é‡Œï¼Œè¿˜å­˜åœ¨ä¸€ç§è¢«ç§°ä½œConnectableçš„Observableï¼Œä¸ç®¡æœ‰æ²¡æœ‰è§‚å¯Ÿè€…è®¢é˜…å®ƒï¼Œè¿™ç§Observableéƒ½ä¸ä¼šå¼€å§‹å‘å°„æ•°æ®ï¼Œé™¤éConnectæ–¹æ³•è¢«è°ƒç”¨ã€‚ ç”¨æ“ä½œç¬¦ç»„åˆOvservableåˆ›å»ºæ–°çš„Observablesçš„æ“ä½œç¬¦ï¼š Create Defer Empty&#x2F;Never&#x2F;Throw From Interval Just Range Repeat Start Timer è½¬æ¢è¢«ä¸€ä¸ªObservableå‘é€çš„é¡¹ç›®çš„æ“ä½œä»˜ Buffer FlatMapï¼šè¿›è¡Œä¸€å¯¹å¤šæˆ–å¤šå¯¹å¤šè½¬æ¢ GroupBy Map:è¿›è¡Œä¸€å¯¹ä¸€è½¬æ¢ Scan Window è¿‡æ»¤è¢«Observableå‘é€çš„é¡¹ç›®çš„æ“ä½œç¬¦ Debounce Distinct ElementAt Filter First IgnoreElements Last Sample Skip SkipLast Take TakeLast å°†å¤šä¸ªObservableåˆå¹¶æˆå•ä¸ªObservableçš„æ“ä½œç¬¦ And&#x2F;Then&#x2F;When CombineLatest Join Merge StartWith Switch Zip é”™è¯¯å¤„ç†æ“ä½œç¬¦ Catch Retry å®ç”¨å·¥å…·æ“ä½œç¬¦ Delay Do Materialize&#x2F;Dematerialize ObserveOn Serialize Subscribe SubscribeOn TimeInterval Timeout Timestamp Using æ¡ä»¶å’Œå¸ƒå°”è¿ç®—æ“ä½œç¬¦ All Amb Contains DefaultIfEmpty SequenceEqual SkipUntil SkipWhile TakeUntil TakeWhile ç®—æœ¯å’Œé›†åˆæ“ä½œç¬¦ Average Concat Count Max Min Reduce Sum è½¬æ¢æ“ä½œç¬¦ To å¯è¿æ¥Obervableçš„æ“ä½œç¬¦ Connect Publish RefCount Replay SingleRxJavaï¼ˆä»¥åŠå®ƒæ´¾ç”Ÿå‡ºæ¥çš„RxGroovyå’ŒRxScalaï¼‰ä¸­æœ‰ä¸€ä¸ªåä¸ºSingleçš„Observableå˜ç§ã€‚ Singleç±»ä¼¼äºObservableï¼Œä¸åŒçš„æ˜¯ï¼Œå®ƒæ€»æ˜¯åªå‘å°„ä¸€ä¸ªå€¼ï¼Œæˆ–è€…ä¸€ä¸ªé”™è¯¯é€šçŸ¥ï¼Œè€Œä¸æ˜¯å‘å°„ä¸€ç³»åˆ—çš„å€¼ã€‚ å› æ­¤ï¼Œä¸åŒäºObservableéœ€è¦ä¸‰ä¸ªæ–¹æ³•onNext, onError, onCompletedï¼Œè®¢é˜…Singleåªéœ€è¦ä¸¤ä¸ªæ–¹æ³•ï¼š onSuccess - Singleå‘å°„å•ä¸ªçš„å€¼åˆ°è¿™ä¸ªæ–¹æ³• onError - å¦‚æœæ— æ³•å‘å°„éœ€è¦çš„å€¼ï¼ŒSingleå‘å°„ä¸€ä¸ªThrowableå¯¹è±¡åˆ°è¿™ä¸ªæ–¹æ³• Singleåªä¼šè°ƒç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­çš„ä¸€ä¸ªï¼Œè€Œä¸”åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œè°ƒç”¨äº†ä»»ä½•ä¸€ä¸ªæ–¹æ³•ä¹‹åï¼Œè®¢é˜…å…³ç³»ç»ˆæ­¢ã€‚ Singleæ“ä½œç¬¦ æ“ä½œç¬¦ è¿”å›å€¼ è¯´æ˜ compose Single åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„æ“ä½œç¬¦ concat and concatWith Observable è¿æ¥å¤šä¸ªSingleå’ŒObservableå‘å°„çš„æ•°æ® create Single è°ƒç”¨è§‚å¯Ÿè€…çš„createæ–¹æ³•åˆ›å»ºä¸€ä¸ªSingle error Single è¿”å›ä¸€ä¸ªç«‹å³ç»™è®¢é˜…è€…å‘å°„é”™è¯¯é€šçŸ¥çš„Single flatMap Single è¿”å›ä¸€ä¸ªSingleï¼Œå®ƒå‘å°„å¯¹åŸSingleçš„æ•°æ®æ‰§è¡ŒflatMapæ“ä½œåçš„ç»“æœ flatMapObservable Observable è¿”å›ä¸€ä¸ªObservableï¼Œå®ƒå‘å°„å¯¹åŸSingleçš„æ•°æ®æ‰§è¡ŒflatMapæ“ä½œåçš„ç»“æœ from Single å°†Futureè½¬æ¢æˆSingle just Single è¿”å›ä¸€ä¸ªå‘å°„ä¸€ä¸ªæŒ‡å®šå€¼çš„Single map Single è¿”å›ä¸€ä¸ªSingleï¼Œå®ƒå‘å°„å¯¹åŸSingleçš„æ•°æ®æ‰§è¡Œmapæ“ä½œåçš„ç»“æœ merge Single å°†ä¸€ä¸ªSingle(å®ƒå‘å°„çš„æ•°æ®æ˜¯å¦ä¸€ä¸ªSingleï¼Œå‡è®¾ä¸ºB)è½¬æ¢æˆå¦ä¸€ä¸ªSingle(å®ƒå‘å°„æ¥è‡ªå¦ä¸€ä¸ªSingle(B)çš„æ•°æ®) merge and mergeWith Observable åˆå¹¶å‘å°„æ¥è‡ªå¤šä¸ªSingleçš„æ•°æ® observeOn Single æŒ‡ç¤ºSingleåœ¨æŒ‡å®šçš„è°ƒåº¦ç¨‹åºä¸Šè°ƒç”¨è®¢é˜…è€…çš„æ–¹æ³• onErrorReturn Single å°†ä¸€ä¸ªå‘å°„é”™è¯¯é€šçŸ¥çš„Singleè½¬æ¢æˆä¸€ä¸ªå‘å°„æŒ‡å®šæ•°æ®é¡¹çš„Single subscribeOn Single æŒ‡ç¤ºSingleåœ¨æŒ‡å®šçš„è°ƒåº¦ç¨‹åºä¸Šæ‰§è¡Œæ“ä½œ timeout Single å®ƒç»™åŸæœ‰çš„Singleæ·»åŠ è¶…æ—¶æ§åˆ¶ï¼Œå¦‚æœè¶…æ—¶äº†å°±å‘å°„ä¸€ä¸ªé”™è¯¯é€šçŸ¥ toSingle Single å°†ä¸€ä¸ªå‘å°„å•ä¸ªå€¼çš„Observableè½¬æ¢ä¸ºä¸€ä¸ªSingle zip and zipWith Single å°†å¤šä¸ªSingleè½¬æ¢ä¸ºä¸€ä¸ªï¼Œåè€…å‘å°„çš„æ•°æ®æ˜¯å¯¹å‰è€…åº”ç”¨ä¸€ä¸ªå‡½æ•°åçš„ç»“æœ SubjectSubjectå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªæ¡¥æ¢æˆ–è€…ä»£ç†ï¼Œåœ¨æŸäº›ReactiveXå®ç°ä¸­ï¼ˆå¦‚RxJavaï¼‰ï¼Œå®ƒåŒæ—¶å……å½“äº†Observerå’ŒObservableçš„è§’è‰²ã€‚å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªObserverï¼Œå®ƒå¯ä»¥è®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ªObservableï¼›åˆå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªObservableï¼Œå®ƒå¯ä»¥è½¬å‘å®ƒæ”¶åˆ°(Observe)çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥å‘å°„æ–°çš„æ•°æ®ã€‚ ç”±äºä¸€ä¸ªSubjectè®¢é˜…ä¸€ä¸ªObservableï¼Œå®ƒå¯ä»¥è§¦å‘è¿™ä¸ªObservableå¼€å§‹å‘å°„æ•°æ®ï¼ˆå¦‚æœé‚£ä¸ªObservableæ˜¯â€å†·â€çš„â€“å°±æ˜¯è¯´ï¼Œå®ƒç­‰å¾…æœ‰è®¢é˜…æ‰å¼€å§‹å‘å°„æ•°æ®ï¼‰ã€‚å› æ­¤æœ‰è¿™æ ·çš„æ•ˆæœï¼ŒSubjectå¯ä»¥æŠŠåŸæ¥é‚£ä¸ªâ€å†·â€çš„Observableå˜æˆâ€çƒ­â€çš„ã€‚ Subjectç§ç±»AsyncSubjectBehaviorSubjectPublishSubjectReplaySubjectSchedulerå¦‚æœä½ æƒ³ç»™Observableæ“ä½œç¬¦é“¾æ·»åŠ å¤šçº¿ç¨‹åŠŸèƒ½ï¼Œä½ å¯ä»¥æŒ‡å®šæ“ä½œç¬¦ï¼ˆæˆ–è€…ç‰¹å®šçš„Observableï¼‰åœ¨ç‰¹å®šçš„è°ƒåº¦å™¨(Scheduler)ä¸Šæ‰§è¡Œã€‚ æŸäº›ReactiveXçš„Observableæ“ä½œç¬¦æœ‰ä¸€äº›å˜ä½“ï¼Œå®ƒä»¬å¯ä»¥æ¥å—ä¸€ä¸ªSchedulerå‚æ•°ã€‚è¿™ä¸ªå‚æ•°æŒ‡å®šæ“ä½œç¬¦å°†å®ƒä»¬çš„éƒ¨åˆ†æˆ–å…¨éƒ¨ä»»åŠ¡æ”¾åœ¨ä¸€ä¸ªç‰¹å®šçš„è°ƒåº¦å™¨ä¸Šæ‰§è¡Œã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯è§‚å¯Ÿå¯¹è±¡å’Œè§‚å¯Ÿè€…çš„è®¢é˜…æ–¹æ³•æ˜¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œçš„ã€‚ä½¿ç”¨ObserveOnå’ŒSubscribeOnæ“ä½œç¬¦ï¼Œä½ å¯ä»¥è®©Observableåœ¨ä¸€ä¸ªç‰¹å®šçš„è°ƒåº¦å™¨ä¸Šæ‰§è¡Œï¼ŒObserveOnæŒ‡ç¤ºä¸€ä¸ªObservableåœ¨ä¸€ä¸ªç‰¹å®šçš„è°ƒåº¦å™¨ä¸Šè°ƒç”¨è§‚å¯Ÿè€…çš„onNext, onErrorå’ŒonCompletedæ–¹æ³•ï¼ŒSubscribeOnæ›´è¿›ä¸€æ­¥ï¼Œå®ƒæŒ‡ç¤ºObservableå°†å…¨éƒ¨çš„å¤„ç†è¿‡ç¨‹ï¼ˆåŒ…æ‹¬å‘å°„æ•°æ®å’Œé€šçŸ¥ï¼‰æ”¾åœ¨ç‰¹å®šçš„è°ƒåº¦å™¨ä¸Šæ‰§è¡Œã€‚ RxJavaç¤ºä¾‹è°ƒåº¦å™¨çš„ç§ç±»ä¸‹è¡¨å±•ç¤ºäº†RxJavaä¸­å¯ç”¨çš„è°ƒåº¦å™¨ç§ç±»ï¼š è°ƒåº¦å™¨ç±»å‹ æ•ˆæœ Schedulers.computation( ) ç”¨äºè®¡ç®—ä»»åŠ¡ï¼Œå¦‚äº‹ä»¶å¾ªç¯æˆ–å’Œå›è°ƒå¤„ç†ï¼Œä¸è¦ç”¨äºIOæ“ä½œ(IOæ“ä½œè¯·ä½¿ç”¨Schedulers.io())ï¼›é»˜è®¤çº¿ç¨‹æ•°ç­‰äºå¤„ç†å™¨çš„æ•°é‡ Schedulers.from(executor) ä½¿ç”¨æŒ‡å®šçš„Executorä½œä¸ºè°ƒåº¦å™¨ Schedulers.immediate( ) åœ¨å½“å‰çº¿ç¨‹ç«‹å³å¼€å§‹æ‰§è¡Œä»»åŠ¡ Schedulers.io( ) ç”¨äºIOå¯†é›†å‹ä»»åŠ¡ï¼Œå¦‚å¼‚æ­¥é˜»å¡IOæ“ä½œï¼Œè¿™ä¸ªè°ƒåº¦å™¨çš„çº¿ç¨‹æ± ä¼šæ ¹æ®éœ€è¦å¢é•¿ï¼›å¯¹äºæ™®é€šçš„è®¡ç®—ä»»åŠ¡ï¼Œè¯·ä½¿ç”¨Schedulers.computation()ï¼›Schedulers.io( )é»˜è®¤æ˜¯ä¸€ä¸ªCachedThreadSchedulerï¼Œå¾ˆåƒä¸€ä¸ªæœ‰çº¿ç¨‹ç¼“å­˜çš„æ–°çº¿ç¨‹è°ƒåº¦å™¨ Schedulers.newThread( ) ä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºä¸€ä¸ªæ–°çº¿ç¨‹ Schedulers.trampoline( ) å½“å…¶å®ƒæ’é˜Ÿçš„ä»»åŠ¡å®Œæˆåï¼Œåœ¨å½“å‰çº¿ç¨‹æ’é˜Ÿå¼€å§‹æ‰§è¡Œ é»˜è®¤è°ƒåº¦å™¨åœ¨RxJavaä¸­ï¼ŒæŸäº›Observableæ“ä½œç¬¦çš„å˜ä½“å…è®¸ä½ è®¾ç½®ç”¨äºæ“ä½œæ‰§è¡Œçš„è°ƒåº¦å™¨ï¼Œå…¶å®ƒçš„åˆ™ä¸åœ¨ä»»ä½•ç‰¹å®šçš„è°ƒåº¦å™¨ä¸Šæ‰§è¡Œï¼Œæˆ–è€…åœ¨ä¸€ä¸ªæŒ‡å®šçš„é»˜è®¤è°ƒåº¦å™¨ä¸Šæ‰§è¡Œã€‚ä¸‹é¢çš„è¡¨æ ¼ä¸ªåˆ—å‡ºäº†ä¸€äº›æ“ä½œç¬¦çš„é»˜è®¤è°ƒåº¦å™¨ï¼š æ“ä½œç¬¦ è°ƒåº¦å™¨ buffer(timespan) computation buffer(timespan, count) computation buffer(timespan, timeshift) computation debounce(timeout, unit) computation delay(delay, unit) computation delaySubscription(delay, unit) computation interval computation repeat trampoline replay(time, unit) computation replay(buffersize, time, unit) computation replay(selector, time, unit) computation replay(selector, buffersize, time, unit) computation retry trampoline sample(period, unit) computation skip(time, unit) computation skipLast(time, unit) computation take(time, unit) computation takeLast(time, unit) computation takeLast(count, time, unit) computation takeLastBuffer(time, unit) computation takeLastBuffer(count, time, unit) computation throttleFirst computation throttleLast computation throttleWithTimeout computation timeInterval immediate timeout(timeoutSelector) immediate timeout(firstTimeoutSelector, timeoutSelector) immediate timeout(timeoutSelector, other) immediate timeout(timeout, timeUnit) computation timeout(firstTimeoutSelector, timeoutSelector, other) immediate timeout(timeout, timeUnit, other) computation timer computation timestamp immediate window(timespan) computation window(timespan, count) computation window(timespan, timeshift) computation ä½¿ç”¨è°ƒåº¦å™¨é™¤äº†å°†è¿™äº›è°ƒåº¦å™¨ä¼ é€’ç»™RxJavaçš„Observableæ“ä½œç¬¦ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨å®ƒä»¬è°ƒåº¦ä½ è‡ªå·±çš„ä»»åŠ¡ã€‚ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†Scheduler.Workerçš„ç”¨æ³•ï¼š 1234567891011worker = Schedulers.newThread().createWorker();worker.schedule(new Action0() &#123; @Override public void call() &#123; yourWork(); &#125;&#125;);// some time later...worker.unsubscribe(); é€’å½’è°ƒåº¦å™¨è¦è°ƒåº¦é€’å½’çš„æ–¹æ³•è°ƒç”¨ï¼Œä½ å¯ä»¥ä½¿ç”¨scheduleï¼Œç„¶åå†ç”¨schedule(this)ï¼Œç¤ºä¾‹ï¼š 12345678910111213worker = Schedulers.newThread().createWorker();worker.schedule(new Action0() &#123; @Override public void call() &#123; yourWork(); // recurse until unsubscribed (schedule will do nothing if unsubscribed) worker.schedule(this); &#125;&#125;);// some time later...worker.unsubscribe(); æ£€æŸ¥æˆ–è®¾ç½®å–æ¶ˆè®¢é˜…çŠ¶æ€Workerç±»çš„å¯¹è±¡å®ç°äº†Subscriptionæ¥å£ï¼Œä½¿ç”¨å®ƒçš„isUnsubscribedå’Œunsubscribeæ–¹æ³•ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨è®¢é˜…å–æ¶ˆæ—¶åœæ­¢ä»»åŠ¡ï¼Œæˆ–è€…ä»æ­£åœ¨è°ƒåº¦çš„ä»»åŠ¡å†…éƒ¨å–æ¶ˆè®¢é˜…ï¼Œç¤ºä¾‹ï¼š 123456789101112Worker worker = Schedulers.newThread().createWorker();Subscription mySubscription = worker.schedule(new Action0() &#123; @Override public void call() &#123; while(!worker.isUnsubscribed()) &#123; status = yourWork(); if(QUIT == status) &#123; worker.unsubscribe(); &#125; &#125; &#125;&#125;); å»¶æ—¶å’Œå‘¨æœŸè°ƒåº¦å™¨ä½ å¯ä»¥ä½¿ç”¨schedule(action,delayTime,timeUnit)åœ¨æŒ‡å®šçš„è°ƒåº¦å™¨ä¸Šå»¶æ—¶æ‰§è¡Œä½ çš„ä»»åŠ¡ï¼Œä¸‹é¢ä¾‹å­ä¸­çš„ä»»åŠ¡å°†åœ¨500æ¯«ç§’ä¹‹åå¼€å§‹æ‰§è¡Œï¼š 1someScheduler.schedule(someAction, 500, TimeUnit.MILLISECONDS); ä½¿ç”¨å¦ä¸€ä¸ªç‰ˆæœ¬çš„scheduleï¼ŒschedulePeriodically(action,initialDelay,period,timeUnit)æ–¹æ³•è®©ä½ å¯ä»¥å®‰æ’ä¸€ä¸ªå®šæœŸæ‰§è¡Œçš„ä»»åŠ¡ï¼Œä¸‹é¢ä¾‹å­çš„ä»»åŠ¡å°†åœ¨500æ¯«ç§’ä¹‹åæ‰§è¡Œï¼Œç„¶åæ¯250æ¯«ç§’æ‰§è¡Œä¸€æ¬¡ï¼š 1someScheduler.schedulePeriodically(someAction, 500, 250, TimeUnit.MILLISECONDS); æµ‹è¯•è°ƒåº¦å™¨TestSchedulerè®©ä½ å¯ä»¥å¯¹è°ƒåº¦å™¨çš„æ—¶é’Ÿè¡¨ç°è¿›è¡Œæ‰‹åŠ¨å¾®è°ƒã€‚è¿™å¯¹ä¾èµ–ç²¾ç¡®æ—¶é—´å®‰æ’çš„ä»»åŠ¡çš„æµ‹è¯•å¾ˆæœ‰ç”¨å¤„ã€‚è¿™ä¸ªè°ƒåº¦å™¨æœ‰ä¸‰ä¸ªé¢å¤–çš„æ–¹æ³•ï¼š advanceTimeTo(time,unit) å‘å‰æ³¢åŠ¨è°ƒåº¦å™¨çš„æ—¶é’Ÿåˆ°ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´ç‚¹ advanceTimeBy(time,unit) å°†è°ƒåº¦å™¨çš„æ—¶é’Ÿå‘å‰æ‹¨åŠ¨ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´æ®µ triggerActions( ) å¼€å§‹æ‰§è¡Œä»»ä½•è®¡åˆ’ä¸­çš„ä½†æ˜¯æœªå¯åŠ¨çš„ä»»åŠ¡ï¼Œå¦‚æœå®ƒä»¬çš„è®¡åˆ’æ—¶é—´ç­‰äºæˆ–è€…æ—©äºè°ƒåº¦å™¨æ—¶é’Ÿçš„å½“å‰æ—¶é—´ Operatorsåˆ›å»ºæ“ä½œ just( ) â€” å°†ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡è½¬æ¢æˆå‘å°„è¿™ä¸ªæˆ–è¿™äº›å¯¹è±¡çš„ä¸€ä¸ªObservable from( ) â€” å°†ä¸€ä¸ªIterable, ä¸€ä¸ªFuture, æˆ–è€…ä¸€ä¸ªæ•°ç»„è½¬æ¢æˆä¸€ä¸ªObservable repeat( ) â€” åˆ›å»ºä¸€ä¸ªé‡å¤å‘å°„æŒ‡å®šæ•°æ®æˆ–æ•°æ®åºåˆ—çš„Observable repeatWhen( ) â€” åˆ›å»ºä¸€ä¸ªé‡å¤å‘å°„æŒ‡å®šæ•°æ®æˆ–æ•°æ®åºåˆ—çš„Observableï¼Œå®ƒä¾èµ–äºå¦ä¸€ä¸ªObservableå‘å°„çš„æ•°æ® create( ) â€” ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ä»å¤´åˆ›å»ºä¸€ä¸ªObservable defer( ) â€” åªæœ‰å½“è®¢é˜…è€…è®¢é˜…æ‰åˆ›å»ºObservableï¼›ä¸ºæ¯ä¸ªè®¢é˜…åˆ›å»ºä¸€ä¸ªæ–°çš„Observable range( ) â€” åˆ›å»ºä¸€ä¸ªå‘å°„æŒ‡å®šèŒƒå›´çš„æ•´æ•°åºåˆ—çš„Observable interval( ) â€” åˆ›å»ºä¸€ä¸ªæŒ‰ç…§ç»™å®šçš„æ—¶é—´é—´éš”å‘å°„æ•´æ•°åºåˆ—çš„Observable timer( ) â€” åˆ›å»ºä¸€ä¸ªåœ¨ç»™å®šçš„å»¶æ—¶ä¹‹åå‘å°„å•ä¸ªæ•°æ®çš„Observable empty( ) â€” åˆ›å»ºä¸€ä¸ªä»€ä¹ˆéƒ½ä¸åšç›´æ¥é€šçŸ¥å®Œæˆçš„Observable error( ) â€” åˆ›å»ºä¸€ä¸ªä»€ä¹ˆéƒ½ä¸åšç›´æ¥é€šçŸ¥é”™è¯¯çš„Observable never( ) â€” åˆ›å»ºä¸€ä¸ªä¸å‘å°„ä»»ä½•æ•°æ®çš„Observable å˜æ¢æ“ä½œ map( ) â€” å¯¹åºåˆ—çš„æ¯ä¸€é¡¹éƒ½åº”ç”¨ä¸€ä¸ªå‡½æ•°æ¥å˜æ¢Observableå‘å°„çš„æ•°æ®åºåˆ— flatMap( ), concatMap( ), and flatMapIterable( ) â€” å°†Observableå‘å°„çš„æ•°æ®é›†åˆå˜æ¢ä¸ºObservablesé›†åˆï¼Œç„¶åå°†è¿™äº›Observableå‘å°„çš„æ•°æ®å¹³å¦åŒ–çš„æ”¾è¿›ä¸€ä¸ªå•ç‹¬çš„Observable switchMap( ) â€” å°†Observableå‘å°„çš„æ•°æ®é›†åˆå˜æ¢ä¸ºObservablesé›†åˆï¼Œç„¶ååªå‘å°„è¿™äº›Observablesæœ€è¿‘å‘å°„çš„æ•°æ® scan( ) â€” å¯¹Observableå‘å°„çš„æ¯ä¸€é¡¹æ•°æ®åº”ç”¨ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæŒ‰é¡ºåºä¾æ¬¡å‘å°„æ¯ä¸€ä¸ªå€¼ groupBy( ) â€” å°†Observableåˆ†æ‹†ä¸ºObservableé›†åˆï¼Œå°†åŸå§‹Observableå‘å°„çš„æ•°æ®æŒ‰Keyåˆ†ç»„ï¼Œæ¯ä¸€ä¸ªObservableå‘å°„ä¸€ç»„ä¸åŒçš„æ•°æ® buffer( ) â€” å®ƒå®šæœŸä»Observableæ”¶é›†æ•°æ®åˆ°ä¸€ä¸ªé›†åˆï¼Œç„¶åæŠŠè¿™äº›æ•°æ®é›†åˆæ‰“åŒ…å‘å°„ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡å‘å°„ä¸€ä¸ª window( ) â€” å®šæœŸå°†æ¥è‡ªObservableçš„æ•°æ®åˆ†æ‹†æˆä¸€äº›Observableçª—å£ï¼Œç„¶åå‘å°„è¿™äº›çª—å£ï¼Œè€Œä¸æ˜¯æ¯æ¬¡å‘å°„ä¸€é¡¹ cast( ) â€” åœ¨å‘å°„ä¹‹å‰å¼ºåˆ¶å°†Observableå‘å°„çš„æ‰€æœ‰æ•°æ®è½¬æ¢ä¸ºæŒ‡å®šç±»å‹ è¿‡æ»¤æ“ä½œ filter( ) â€” è¿‡æ»¤æ•°æ® takeLast( ) â€” åªå‘å°„æœ€åçš„Né¡¹æ•°æ® last( ) â€” åªå‘å°„æœ€åçš„ä¸€é¡¹æ•°æ® lastOrDefault( ) â€” åªå‘å°„æœ€åçš„ä¸€é¡¹æ•°æ®ï¼Œå¦‚æœObservableä¸ºç©ºå°±å‘å°„é»˜è®¤å€¼ takeLastBuffer( ) â€” å°†æœ€åçš„Né¡¹æ•°æ®å½“åšå•ä¸ªæ•°æ®å‘å°„ skip( ) â€” è·³è¿‡å¼€å§‹çš„Né¡¹æ•°æ® skipLast( ) â€” è·³è¿‡æœ€åçš„Né¡¹æ•°æ® take( ) â€” åªå‘å°„å¼€å§‹çš„Né¡¹æ•°æ® first( ) and takeFirst( ) â€” åªå‘å°„ç¬¬ä¸€é¡¹æ•°æ®ï¼Œæˆ–è€…æ»¡è¶³æŸç§æ¡ä»¶çš„ç¬¬ä¸€é¡¹æ•°æ® firstOrDefault( ) â€” åªå‘å°„ç¬¬ä¸€é¡¹æ•°æ®ï¼Œå¦‚æœObservableä¸ºç©ºå°±å‘å°„é»˜è®¤å€¼ elementAt( ) â€” å‘å°„ç¬¬Né¡¹æ•°æ® elementAtOrDefault( ) â€” å‘å°„ç¬¬Né¡¹æ•°æ®ï¼Œå¦‚æœObservableæ•°æ®å°‘äºNé¡¹å°±å‘å°„é»˜è®¤å€¼ sample( ) or throttleLast( ) â€” å®šæœŸå‘å°„Observableæœ€è¿‘çš„æ•°æ® throttleFirst( ) â€” å®šæœŸå‘å°„Observableå‘å°„çš„ç¬¬ä¸€é¡¹æ•°æ® throttleWithTimeout( ) or debounce( ) â€” åªæœ‰å½“Observableåœ¨æŒ‡å®šçš„æ—¶é—´åè¿˜æ²¡æœ‰å‘å°„æ•°æ®æ—¶ï¼Œæ‰å‘å°„ä¸€ä¸ªæ•°æ® timeout( ) â€” å¦‚æœåœ¨ä¸€ä¸ªæŒ‡å®šçš„æ—¶é—´æ®µåè¿˜æ²¡å‘å°„æ•°æ®ï¼Œå°±å‘å°„ä¸€ä¸ªå¼‚å¸¸ distinct( ) â€” è¿‡æ»¤æ‰é‡å¤æ•°æ® distinctUntilChanged( ) â€” è¿‡æ»¤æ‰è¿ç»­é‡å¤çš„æ•°æ® ofType( ) â€” åªå‘å°„æŒ‡å®šç±»å‹çš„æ•°æ® ignoreElements( ) â€” ä¸¢å¼ƒæ‰€æœ‰çš„æ­£å¸¸æ•°æ®ï¼Œåªå‘å°„é”™è¯¯æˆ–å®Œæˆé€šçŸ¥ ç»“åˆæ“ä½œ startWith( ) â€” åœ¨æ•°æ®åºåˆ—çš„å¼€å¤´å¢åŠ ä¸€é¡¹æ•°æ® merge( ) â€” å°†å¤šä¸ªObservableåˆå¹¶ä¸ºä¸€ä¸ª mergeDelayError( ) â€” åˆå¹¶å¤šä¸ªObservablesï¼Œè®©æ²¡æœ‰é”™è¯¯çš„Observableéƒ½å®Œæˆåå†å‘å°„é”™è¯¯é€šçŸ¥ zip( ) â€” ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ç»„åˆå¤šä¸ªObservableå‘å°„çš„æ•°æ®é›†åˆï¼Œç„¶åå†å‘å°„è¿™ä¸ªç»“æœ and( ), then( ), and when( ) â€” (rxjava-joins) é€šè¿‡æ¨¡å¼å’Œè®¡åˆ’ç»„åˆå¤šä¸ªObservableså‘å°„çš„æ•°æ®é›†åˆ combineLatest( ) â€” å½“ä¸¤ä¸ªObservablesä¸­çš„ä»»ä½•ä¸€ä¸ªå‘å°„äº†ä¸€ä¸ªæ•°æ®æ—¶ï¼Œé€šè¿‡ä¸€ä¸ªæŒ‡å®šçš„å‡½æ•°ç»„åˆæ¯ä¸ªObservableå‘å°„çš„æœ€æ–°æ•°æ®ï¼ˆä¸€å…±ä¸¤ä¸ªæ•°æ®ï¼‰ï¼Œç„¶åå‘å°„è¿™ä¸ªå‡½æ•°çš„ç»“æœ join( ) and groupJoin( ) â€” æ— è®ºä½•æ—¶ï¼Œå¦‚æœä¸€ä¸ªObservableå‘å°„äº†ä¸€ä¸ªæ•°æ®é¡¹ï¼Œåªè¦åœ¨å¦ä¸€ä¸ªObservableå‘å°„çš„æ•°æ®é¡¹å®šä¹‰çš„æ—¶é—´çª—å£å†…ï¼Œå°±å°†ä¸¤ä¸ªObservableå‘å°„çš„æ•°æ®åˆå¹¶å‘å°„ switchOnNext( ) â€” å°†ä¸€ä¸ªå‘å°„Observablesçš„Observableè½¬æ¢æˆå¦ä¸€ä¸ªObservableï¼Œåè€…å‘å°„è¿™äº›Observablesæœ€è¿‘å‘å°„çš„æ•°æ® é”™è¯¯æ“ä½œå¾ˆå¤šæ“ä½œç¬¦å¯ç”¨äºå¯¹Observableå‘å°„çš„onErroré€šçŸ¥åšå‡ºå“åº”æˆ–è€…ä»é”™è¯¯ä¸­æ¢å¤ï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥ï¼š åæ‰è¿™ä¸ªé”™è¯¯ï¼Œåˆ‡æ¢åˆ°ä¸€ä¸ªå¤‡ç”¨çš„Observableç»§ç»­å‘å°„æ•°æ® åæ‰è¿™ä¸ªé”™è¯¯ç„¶åå‘å°„é»˜è®¤å€¼ åæ‰è¿™ä¸ªé”™è¯¯å¹¶ç«‹å³å°è¯•é‡å¯è¿™ä¸ªObservable åæ‰è¿™ä¸ªé”™è¯¯ï¼Œåœ¨ä¸€äº›å›é€€é—´éš”åé‡å¯è¿™ä¸ªObservable è¿™æ˜¯æ“ä½œç¬¦åˆ—è¡¨ï¼š onErrorResumeNext( ) â€” æŒ‡ç¤ºObservableåœ¨é‡åˆ°é”™è¯¯æ—¶å‘å°„ä¸€ä¸ªæ•°æ®åºåˆ— onErrorReturn( ) â€” æŒ‡ç¤ºObservableåœ¨é‡åˆ°é”™è¯¯æ—¶å‘å°„ä¸€ä¸ªç‰¹å®šçš„æ•°æ® onExceptionResumeNext( ) â€” instructs an Observable to continue emitting items after it encounters an exception (but not another variety of throwable)æŒ‡ç¤ºObservableé‡åˆ°é”™è¯¯æ—¶ç»§ç»­å‘å°„æ•°æ® retry( ) â€” æŒ‡ç¤ºObservableé‡åˆ°é”™è¯¯æ—¶é‡è¯• retryWhen( ) â€” æŒ‡ç¤ºObservableé‡åˆ°é”™è¯¯æ—¶ï¼Œå°†é”™è¯¯ä¼ é€’ç»™å¦ä¸€ä¸ªObservableæ¥å†³å®šæ˜¯å¦è¦é‡æ–°ç»™è®¢é˜…è¿™ä¸ªObservable è¾…åŠ©æ“ä½œ materialize( ) â€” å°†Observableè½¬æ¢æˆä¸€ä¸ªé€šçŸ¥åˆ—è¡¨convert an Observable into a list of Notifications dematerialize( ) â€” å°†ä¸Šé¢çš„ç»“æœé€†è½¬å›ä¸€ä¸ªObservable timestamp( ) â€” ç»™Observableå‘å°„çš„æ¯ä¸ªæ•°æ®é¡¹æ·»åŠ ä¸€ä¸ªæ—¶é—´æˆ³ serialize( ) â€” å¼ºåˆ¶ObservableæŒ‰æ¬¡åºå‘å°„æ•°æ®å¹¶ä¸”è¦æ±‚åŠŸèƒ½æ˜¯å®Œå¥½çš„ cache( ) â€” è®°ä½Observableå‘å°„çš„æ•°æ®åºåˆ—å¹¶å‘å°„ç›¸åŒçš„æ•°æ®åºåˆ—ç»™åç»­çš„è®¢é˜…è€… observeOn( ) â€” æŒ‡å®šè§‚å¯Ÿè€…è§‚å¯ŸObservableçš„è°ƒåº¦å™¨ subscribeOn( ) â€” æŒ‡å®šObservableæ‰§è¡Œä»»åŠ¡çš„è°ƒåº¦å™¨ doOnEach( ) â€” æ³¨å†Œä¸€ä¸ªåŠ¨ä½œï¼Œå¯¹Observableå‘å°„çš„æ¯ä¸ªæ•°æ®é¡¹ä½¿ç”¨ doOnCompleted( ) â€” æ³¨å†Œä¸€ä¸ªåŠ¨ä½œï¼Œå¯¹æ­£å¸¸å®Œæˆçš„Observableä½¿ç”¨ doOnError( ) â€” æ³¨å†Œä¸€ä¸ªåŠ¨ä½œï¼Œå¯¹å‘ç”Ÿé”™è¯¯çš„Observableä½¿ç”¨ doOnTerminate( ) â€” æ³¨å†Œä¸€ä¸ªåŠ¨ä½œï¼Œå¯¹å®Œæˆçš„Observableä½¿ç”¨ï¼Œæ— è®ºæ˜¯å¦å‘ç”Ÿé”™è¯¯ doOnSubscribe( ) â€” æ³¨å†Œä¸€ä¸ªåŠ¨ä½œï¼Œåœ¨è§‚å¯Ÿè€…è®¢é˜…æ—¶ä½¿ç”¨ doOnUnsubscribe( ) â€” æ³¨å†Œä¸€ä¸ªåŠ¨ä½œï¼Œåœ¨è§‚å¯Ÿè€…å–æ¶ˆè®¢é˜…æ—¶ä½¿ç”¨ finallyDo( ) â€” æ³¨å†Œä¸€ä¸ªåŠ¨ä½œï¼Œåœ¨Observableå®Œæˆæ—¶ä½¿ç”¨ delay( ) â€” å»¶æ—¶å‘å°„Observableçš„ç»“æœ delaySubscription( ) â€” å»¶æ—¶å¤„ç†è®¢é˜…è¯·æ±‚ timeInterval( ) â€” å®šæœŸå‘å°„æ•°æ® using( ) â€” åˆ›å»ºä¸€ä¸ªåªåœ¨Observableç”Ÿå‘½å‘¨æœŸå­˜åœ¨çš„èµ„æº single( ) â€” å¼ºåˆ¶è¿”å›å•ä¸ªæ•°æ®ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ singleOrDefault( ) â€” å¦‚æœObservableå®Œæˆæ—¶è¿”å›äº†å•ä¸ªæ•°æ®ï¼Œå°±è¿”å›å®ƒï¼Œå¦åˆ™è¿”å›é»˜è®¤æ•°æ® toFuture( ), toIterable( ), toList( ) â€” å°†Observableè½¬æ¢ä¸ºå…¶å®ƒå¯¹è±¡æˆ–æ•°æ®ç»“æ„ æ¡ä»¶å’Œå¸ƒå°”æ“ä½œæ¡ä»¶æ“ä½œç¬¦ amb( ) â€” ç»™å®šå¤šä¸ªObservableï¼Œåªè®©ç¬¬ä¸€ä¸ªå‘å°„æ•°æ®çš„Observableå‘å°„å…¨éƒ¨æ•°æ® defaultIfEmpty( ) â€” å‘å°„æ¥è‡ªåŸå§‹Observableçš„æ•°æ®ï¼Œå¦‚æœåŸå§‹Observableæ²¡æœ‰å‘å°„æ•°æ®ï¼Œå°±å‘å°„ä¸€ä¸ªé»˜è®¤æ•°æ® (rxjava-computation-expressions) doWhile( ) â€” å‘å°„åŸå§‹Observableçš„æ•°æ®åºåˆ—ï¼Œç„¶åé‡å¤å‘å°„è¿™ä¸ªåºåˆ—ç›´åˆ°ä¸æ»¡è¶³è¿™ä¸ªæ¡ä»¶ä¸ºæ­¢ (rxjava-computation-expressions) ifThen( ) â€” åªæœ‰å½“æŸä¸ªæ¡ä»¶ä¸ºçœŸæ—¶æ‰å‘å°„åŸå§‹Observableçš„æ•°æ®åºåˆ—ï¼Œå¦åˆ™å‘å°„ä¸€ä¸ªç©ºçš„æˆ–é»˜è®¤çš„åºåˆ— skipUntil( ) â€” ä¸¢å¼ƒåŸå§‹Observableå‘å°„çš„æ•°æ®ï¼Œç›´åˆ°ç¬¬äºŒä¸ªObservableå‘å°„äº†ä¸€ä¸ªæ•°æ®ï¼Œç„¶åå‘å°„åŸå§‹Observableçš„å‰©ä½™æ•°æ® skipWhile( ) â€” ä¸¢å¼ƒåŸå§‹Observableå‘å°„çš„æ•°æ®ï¼Œç›´åˆ°ä¸€ä¸ªç‰¹å®šçš„æ¡ä»¶ä¸ºå‡ï¼Œç„¶åå‘å°„åŸå§‹Observableå‰©ä½™çš„æ•°æ® (rxjava-computation-expressions) switchCase( ) â€” åŸºäºä¸€ä¸ªè®¡ç®—ç»“æœï¼Œå‘å°„ä¸€ä¸ªæŒ‡å®šObservableçš„æ•°æ®åºåˆ— takeUntil( ) â€” å‘å°„æ¥è‡ªåŸå§‹Observableçš„æ•°æ®ï¼Œç›´åˆ°ç¬¬äºŒä¸ªObservableå‘å°„äº†ä¸€ä¸ªæ•°æ®æˆ–ä¸€ä¸ªé€šçŸ¥ takeWhile( ) and takeWhileWithIndex( ) â€” å‘å°„åŸå§‹Observableçš„æ•°æ®ï¼Œç›´åˆ°ä¸€ä¸ªç‰¹å®šçš„æ¡ä»¶ä¸ºçœŸï¼Œç„¶åè·³è¿‡å‰©ä½™çš„æ•°æ® å¸ƒå°”æ“ä½œç¬¦ all( ) â€” åˆ¤æ–­æ˜¯å¦æ‰€æœ‰çš„æ•°æ®é¡¹éƒ½æ»¡è¶³æŸä¸ªæ¡ä»¶ contains( ) â€” åˆ¤æ–­Observableæ˜¯å¦ä¼šå‘å°„ä¸€ä¸ªæŒ‡å®šçš„å€¼ exists( ) and isEmpty( ) â€” åˆ¤æ–­Observableæ˜¯å¦å‘å°„äº†ä¸€ä¸ªå€¼ sequenceEqual( ) â€” åˆ¤æ–­ä¸¤ä¸ªObservableså‘å°„çš„åºåˆ—æ˜¯å¦ç›¸ç­‰ ç®—æ•°å’Œèšåˆæ“ä½œrxjava-math æ¨¡å—çš„æ“ä½œç¬¦ averageInteger( ) â€” æ±‚åºåˆ—å¹³å‡æ•°å¹¶å‘å°„ averageLong( ) â€” æ±‚åºåˆ—å¹³å‡æ•°å¹¶å‘å°„ averageFloat( ) â€” æ±‚åºåˆ—å¹³å‡æ•°å¹¶å‘å°„ averageDouble( ) â€” æ±‚åºåˆ—å¹³å‡æ•°å¹¶å‘å°„ max( ) â€” æ±‚åºåˆ—æœ€å¤§å€¼å¹¶å‘å°„ maxBy( ) â€” æ±‚æœ€å¤§keyå¯¹åº”çš„å€¼å¹¶å‘å°„ min( ) â€” æ±‚æœ€å°å€¼å¹¶å‘å°„ minBy( ) â€” æ±‚æœ€å°Keyå¯¹åº”çš„å€¼å¹¶å‘å°„ sumInteger( ) â€” æ±‚å’Œå¹¶å‘å°„ sumLong( ) â€” æ±‚å’Œå¹¶å‘å°„ sumFloat( ) â€” æ±‚å’Œå¹¶å‘å°„ sumDouble( ) â€” æ±‚å’Œå¹¶å‘å°„ å…¶å®ƒèšåˆæ“ä½œç¬¦ concat( ) â€” é¡ºåºè¿æ¥å¤šä¸ªObservables count( ) and countLong( ) â€” è®¡ç®—æ•°æ®é¡¹çš„ä¸ªæ•°å¹¶å‘å°„ç»“æœ reduce( ) â€” å¯¹åºåˆ—ä½¿ç”¨reduce()å‡½æ•°å¹¶å‘å°„æœ€ç»ˆçš„ç»“æœ collect( ) â€” å°†åŸå§‹Observableå‘å°„çš„æ•°æ®æ”¾åˆ°ä¸€ä¸ªå•ä¸€çš„å¯å˜çš„æ•°æ®ç»“æ„ä¸­ï¼Œç„¶åè¿”å›ä¸€ä¸ªå‘å°„è¿™ä¸ªæ•°æ®ç»“æ„çš„Observable toList( ) â€” æ”¶é›†åŸå§‹Observableå‘å°„çš„æ‰€æœ‰æ•°æ®åˆ°ä¸€ä¸ªåˆ—è¡¨ï¼Œç„¶åè¿”å›è¿™ä¸ªåˆ—è¡¨ toSortedList( ) â€” æ”¶é›†åŸå§‹Observableå‘å°„çš„æ‰€æœ‰æ•°æ®åˆ°ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œç„¶åè¿”å›è¿™ä¸ªåˆ—è¡¨ toMap( ) â€” å°†åºåˆ—æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªMapï¼ŒMapçš„keyæ˜¯æ ¹æ®ä¸€ä¸ªå‡½æ•°è®¡ç®—çš„ toMultiMap( ) â€” å°†åºåˆ—æ•°æ®è½¬æ¢ä¸ºä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªMapï¼ŒMapçš„keyæ˜¯æ ¹æ®ä¸€ä¸ªå‡½æ•°è®¡ç®—çš„ å¼‚æ­¥æ“ä½œä¸‹é¢çš„è¿™äº›æ“ä½œç¬¦å±äºå•ç‹¬çš„rxjava-asyncæ¨¡å—ï¼Œå®ƒä»¬ç”¨äºå°†åŒæ­¥å¯¹è±¡è½¬æ¢ä¸ºObservableã€‚ start( ) â€” åˆ›å»ºä¸€ä¸ªObservableï¼Œå®ƒå‘å°„ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ toAsync( ) or asyncAction( ) or asyncFunc( ) â€” å°†ä¸€ä¸ªå‡½æ•°æˆ–è€…Actionè½¬æ¢ä¸ºå·²Observableï¼Œå®ƒæ‰§è¡Œè¿™ä¸ªå‡½æ•°å¹¶å‘å°„å‡½æ•°çš„è¿”å›å€¼ startFuture( ) â€” å°†ä¸€ä¸ªè¿”å›Futureçš„å‡½æ•°è½¬æ¢ä¸ºä¸€ä¸ªObservableï¼Œå®ƒå‘å°„Futureçš„è¿”å›å€¼ deferFuture( ) â€” å°†ä¸€ä¸ªè¿”å›Observableçš„Futureè½¬æ¢ä¸ºä¸€ä¸ªObservableï¼Œä½†æ˜¯å¹¶ä¸å°è¯•è·å–è¿™ä¸ªFutureè¿”å›çš„Observableï¼Œç›´åˆ°æœ‰è®¢é˜…è€…è®¢é˜…å®ƒ forEachFuture( ) â€” ä¼ é€’Subscriberæ–¹æ³•ç»™ä¸€ä¸ªSubscriberï¼Œä½†æ˜¯åŒæ—¶è¡¨ç°å¾—åƒä¸€ä¸ªFutureä¸€æ ·é˜»å¡ç›´åˆ°å®ƒå®Œæˆ fromAction( ) â€” å°†ä¸€ä¸ªActionè½¬æ¢ä¸ºObservableï¼Œå½“ä¸€ä¸ªè®¢é˜…è€…è®¢é˜…æ—¶ï¼Œå®ƒæ‰§è¡Œè¿™ä¸ªactionå¹¶å‘å°„å®ƒçš„è¿”å›å€¼ fromCallable( ) â€” å°†ä¸€ä¸ªCallableè½¬æ¢ä¸ºObservableï¼Œå½“ä¸€ä¸ªè®¢é˜…è€…è®¢é˜…æ—¶ï¼Œå®ƒæ‰§è¡Œè¿™ä¸ªCallableå¹¶å‘å°„Callableçš„è¿”å›å€¼ï¼Œæˆ–è€…å‘å°„å¼‚å¸¸ fromRunnable( ) â€” convert a Runnable into an Observable that invokes the runable and emits its result when a Subscriber subscribeså°†ä¸€ä¸ªRunnableè½¬æ¢ä¸ºObservableï¼Œå½“ä¸€ä¸ªè®¢é˜…è€…è®¢é˜…æ—¶ï¼Œå®ƒæ‰§è¡Œè¿™ä¸ªRunnableå¹¶å‘å°„Runnableçš„è¿”å›å€¼ runAsync( ) â€” è¿”å›ä¸€ä¸ªStoppableObservableï¼Œå®ƒå‘å°„æŸä¸ªSchedulerä¸ŠæŒ‡å®šçš„Actionç”Ÿæˆçš„å¤šä¸ªactions è¿æ¥æ“ä½œ ConnectableObservable.connect( ) â€” æŒ‡ç¤ºä¸€ä¸ªå¯è¿æ¥çš„Observableå¼€å§‹å‘å°„æ•°æ® Observable.publish( ) â€” å°†ä¸€ä¸ªObservableè½¬æ¢ä¸ºä¸€ä¸ªå¯è¿æ¥çš„Observable Observable.replay( ) â€” ç¡®ä¿æ‰€æœ‰çš„è®¢é˜…è€…çœ‹åˆ°ç›¸åŒçš„æ•°æ®åºåˆ—ï¼Œå³ä½¿å®ƒä»¬åœ¨Observableå¼€å§‹å‘å°„æ•°æ®ä¹‹åæ‰è®¢é˜… ConnectableObservable.refCount( ) â€” è®©ä¸€ä¸ªå¯è¿æ¥çš„Observableè¡¨ç°å¾—åƒä¸€ä¸ªæ™®é€šçš„Observable è½¬æ¢æ“ä½œé˜»å¡æ“ä½œè¦å°†æ™®é€šçš„Observable è½¬æ¢ä¸º BlockingObservableï¼Œå¯ä»¥ä½¿ç”¨ Observable.toBlocking( )) æ–¹æ³•æˆ–è€…BlockingObservable.from( )) æ–¹æ³•ã€‚ forEach( ) â€” å¯¹Observableå‘å°„çš„æ¯ä¸€é¡¹æ•°æ®è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œä¼šé˜»å¡ç›´åˆ°Observableå®Œæˆ first( ) â€” é˜»å¡ç›´åˆ°Observableå‘å°„äº†ä¸€ä¸ªæ•°æ®ï¼Œç„¶åè¿”å›ç¬¬ä¸€é¡¹æ•°æ® firstOrDefault( ) â€” é˜»å¡ç›´åˆ°Observableå‘å°„äº†ä¸€ä¸ªæ•°æ®æˆ–è€…ç»ˆæ­¢ï¼Œè¿”å›ç¬¬ä¸€é¡¹æ•°æ®ï¼Œæˆ–è€…è¿”å›é»˜è®¤å€¼ last( ) â€” é˜»å¡ç›´åˆ°Observableç»ˆæ­¢ï¼Œç„¶åè¿”å›æœ€åä¸€é¡¹æ•°æ® lastOrDefault( ) â€” é˜»å¡ç›´åˆ°Observableç»ˆæ­¢ï¼Œç„¶åè¿”å›æœ€åä¸€é¡¹çš„æ•°æ®ï¼Œæˆ–è€…è¿”å›é»˜è®¤å€¼ mostRecent( ) â€” è¿”å›ä¸€ä¸ªæ€»æ˜¯è¿”å›Observableæœ€è¿‘å‘å°„çš„æ•°æ®çš„iterable next( ) â€” è¿”å›ä¸€ä¸ªIterableï¼Œä¼šé˜»å¡ç›´åˆ°Observableå‘å°„äº†å¦ä¸€ä¸ªå€¼ï¼Œç„¶åè¿”å›é‚£ä¸ªå€¼ latest( ) â€” è¿”å›ä¸€ä¸ªiterableï¼Œä¼šé˜»å¡ç›´åˆ°æˆ–è€…é™¤éObservableå‘å°„äº†ä¸€ä¸ªiterableæ²¡æœ‰è¿”å›çš„å€¼ï¼Œç„¶åè¿”å›è¿™ä¸ªå€¼ single( ) â€” å¦‚æœObservableç»ˆæ­¢æ—¶åªå‘å°„äº†ä¸€ä¸ªå€¼ï¼Œè¿”å›é‚£ä¸ªå€¼ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ singleOrDefault( ) â€” å¦‚æœObservableç»ˆæ­¢æ—¶åªå‘å°„äº†ä¸€ä¸ªå€¼ï¼Œè¿”å›é‚£ä¸ªå€¼ï¼Œå¦åˆ™å¦å¥½é»˜è®¤å€¼ toFuture( ) â€” å°†Observableè½¬æ¢ä¸ºä¸€ä¸ªFuture toIterable( ) â€” å°†ä¸€ä¸ªå‘å°„æ•°æ®åºåˆ—çš„Observableè½¬æ¢ä¸ºä¸€ä¸ªIterable getIterator( ) â€” å°†ä¸€ä¸ªå‘å°„æ•°æ®åºåˆ—çš„Observableè½¬æ¢ä¸ºä¸€ä¸ªIterator å­—ç¬¦ä¸²æ“ä½œ byLine( ) â€” å°†ä¸€ä¸ªå­—ç¬¦ä¸²çš„Observableè½¬æ¢ä¸ºä¸€ä¸ªè¡Œåºåˆ—çš„Observableï¼Œè¿™ä¸ªObservableå°†åŸæ¥çš„åºåˆ—å½“åšæµå¤„ç†ï¼Œç„¶åæŒ‰æ¢è¡Œç¬¦åˆ†å‰² decode( ) â€” å°†ä¸€ä¸ªå¤šå­—èŠ‚çš„å­—ç¬¦æµè½¬æ¢ä¸ºä¸€ä¸ªObservableï¼Œå®ƒæŒ‰å­—ç¬¦è¾¹ç•Œå‘å°„å­—èŠ‚æ•°ç»„ encode( ) â€” å¯¹ä¸€ä¸ªå‘å°„å­—ç¬¦ä¸²çš„Observableæ‰§è¡Œå˜æ¢æ“ä½œï¼Œå˜æ¢åçš„Observableå‘å°„ä¸€ä¸ªåœ¨åŸå§‹å­—ç¬¦ä¸²ä¸­è¡¨ç¤ºå¤šå­—èŠ‚å­—ç¬¦è¾¹ç•Œçš„å­—èŠ‚æ•°ç»„ from( ) â€” å°†ä¸€ä¸ªå­—ç¬¦æµæˆ–è€…Readerè½¬æ¢ä¸ºä¸€ä¸ªå‘å°„å­—èŠ‚æ•°ç»„æˆ–è€…å­—ç¬¦ä¸²çš„Observable join( ) â€” å°†ä¸€ä¸ªå‘å°„å­—ç¬¦ä¸²åºåˆ—çš„Observableè½¬æ¢ä¸ºä¸€ä¸ªå‘å°„å•ä¸ªå­—ç¬¦ä¸²çš„Observableï¼Œåè€…ç”¨ä¸€ä¸ªæŒ‡å®šçš„å­—ç¬¦ä¸²è¿æ¥æ‰€æœ‰çš„å­—ç¬¦ä¸² split( ) â€” å°†ä¸€ä¸ªå‘å°„å­—ç¬¦ä¸²çš„Observableè½¬æ¢ä¸ºå¦ä¸€ä¸ªå‘å°„å­—ç¬¦ä¸²çš„Observableï¼Œåè€…ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„æ­£åˆ™è¡¨è¾¾å¼è¾¹ç•Œåˆ†å‰²å‰è€…å‘å°„çš„æ‰€æœ‰å­—ç¬¦ä¸² stringConcat( ) â€” å°†ä¸€ä¸ªå‘å°„å­—ç¬¦ä¸²åºåˆ—çš„Observableè½¬æ¢ä¸ºä¸€ä¸ªå‘å°„å•ä¸ªå­—ç¬¦ä¸²çš„Observableï¼Œåè€…è¿æ¥å‰è€…å‘å°„çš„æ‰€æœ‰å­—ç¬¦ä¸² å‚è€ƒ reactivex.io https://github.com/ReactiveX https://mcxiaoke.gitbooks.io/rxdocs/content/topics/Getting-Started.html","tags":[{"name":"Rx","slug":"Rx","permalink":"http://airshu.github.io/tags/Rx/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"Connection reset by peer) while reading response header from upstream","date":"2022-03-08T02:25:29.711Z","path":"wiki/æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯/Connection reset by peer/","text":"é—®é¢˜ï¼šConnection reset by peer) while reading response header from upstreamæè¿°ï¼šæŸäº›è¯·æ±‚ä¸€ç›´è¿”å›502 Bad Gatewayçš„é”™è¯¯ï¼ŒæŸ¥çœ‹æœåŠ¡ç«¯çš„erroræ—¥å¿—ï¼Œæ˜¾ç¤ºConnection reset by peerã€‚å½“æ—¶çš„åœºæ™¯æ˜¯ä¸€ä¸ªæ¯éš”ä¸€åˆ†é’Ÿçš„å®šæ—¶è„šæœ¬æ¯æ¬¡è¿è¡Œæ—¶ï¼Œè·å–éœ€è¦å¤„ç†çš„æ•°æ®ï¼ŒåŒæ­¥è¯·æ±‚æŸä¸ªæœåŠ¡ç«¯æ¥å£è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ã€‚çŒœæµ‹æ˜¯è¿™ä¸ªæ¥å£è¯·æ±‚å“åº”å¾ˆæ…¢ï¼Œä¸€åˆ†é’Ÿååˆå†æ¬¡è¯·æ±‚åŒæ ·çš„æ¥å£è€Œå‡ºç°é—®é¢˜ã€‚ å¤„ç†ï¼šä¿®æ”¹æ¥å£å¯¹åº”çš„é€»è¾‘ï¼Œè®©è¿™ä¸ªæ¥å£èƒ½å¿«é€Ÿå“åº”ï¼›æ­¤é—®é¢˜æ¶ˆå¤±ã€‚æŸ¥é˜…èµ„æ–™ï¼ŒNginxçš„å“åº”æœ‰å‡ ä¸ªå‚æ•°è®¾ç½®ï¼š keepalive_timeoutï¼šè®¾ç½®å®¢æˆ·ç«¯çš„é•¿è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´å®¢æˆ·ç«¯æ²¡æœ‰å‘èµ·è¯·æ±‚ï¼Œåˆ™NginxæœåŠ¡å™¨ä¼šä¸»åŠ¨å…³é—­é•¿è¿æ¥ã€‚ keepalive_requestsï¼šè®¾ç½®ä¸å®¢æˆ·ç«¯çš„å»ºç«‹çš„ä¸€ä¸ªé•¿è¿æ¥å¯ä»¥å¤„ç†çš„æœ€å¤§è¯·æ±‚æ¬¡æ•°ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªå€¼ï¼Œåˆ™Nginxä¼šä¸»åŠ¨å…³é—­è¯¥é•¿è¿æ¥ã€‚ å¯¹äºæ­¤ç±»é—®é¢˜ï¼Œä¹Ÿå¯ä»¥å°è¯•å°†keepalive_timeoutçš„æ—¶é—´è®¾ç½®çš„é•¿ä¸€äº›ã€‚","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æœåŠ¡ç«¯","slug":"æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}]},{"title":"Linuxå¸¸ç”¨å‘½ä»¤","date":"2022-03-08T02:25:29.711Z","path":"wiki/æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯/Linuxå¸¸ç”¨å‘½ä»¤/","text":"grepå¸¸ç”¨å‘½ä»¤12345678910111213141516171819202122232425# æŸ¥æ‰¾è¿›ç¨‹ä¸­æ‰€æœ‰è·ŸnginxåŒ¹é…çš„ps -ef | grep nginx# æŸ¥çœ‹è¿›ç¨‹æ•°ps -ef | grep nginx -c # æœç´¢æŸä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œå“ªäº›æ–‡ä»¶åŒ…å«å…³é”®å­—grep -r &quot;å…³é”®å­—&quot; æ–‡ä»¶å¤¹# æ ¹æ®å­—ç¬¦ä¸²æœç´¢grep â€œè¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²â€ æ–‡ä»¶å # æ ¹æ®æ­£åˆ™æœç´¢grep â€“e â€œæ­£åˆ™è¡¨è¾¾å¼â€ æ–‡ä»¶å# æœç´¢ä¸åŒºåˆ†å¤§å°å†™grep â€“i â€œè¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²â€ æ–‡ä»¶å# æ˜¾ç¤ºæœç´¢å‡ºæ¥çš„ä¿¡æ¯æ‰€åœ¨çš„è¡Œæ•°grep -c â€œè¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²â€ æ–‡ä»¶å findå¸¸ç”¨å‘½ä»¤1234567891011# æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰phpæ–‡ä»¶find . &quot;*.php&quot;find . -name &quot;*.php&quot;# æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹ï¼Œæœ€è¿‘120åˆ†é’Ÿä¿®æ”¹è¿‡çš„æ–‡ä»¶find . -mmin -120# æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹ï¼Œæ˜¯å¦æœ‰åå­—å«â€œé€šè®¯å½•â€çš„æ–‡ä»¶å¤¹ï¼Œ-typeï¼šè¡¨ç¤ºè®¾å®šç±»å‹ï¼Œdè¡¨ç¤ºæ–‡ä»¶å¤¹ç±»å‹ï¼Œå¯ä»¥æ›¿æ¢ä¸ºf(æ™®é€šæ–‡ä»¶)ã€l(é“¾æ¥æ–‡ä»¶)find . -type d -name é€šè®¯å½•","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æœåŠ¡ç«¯","slug":"æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}]},{"title":"MySQLçŸ¥è¯†ç‚¹","date":"2022-03-08T02:25:29.711Z","path":"wiki/æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯/MySQLçŸ¥è¯†ç‚¹/","text":"explain ä½¿ç”¨ åˆ—å è¯´æ˜ id æ‰§è¡Œç¼–å·ï¼Œæ ‡è¯†selectæ‰€å±çš„è¡Œã€‚å¦‚æœåœ¨è¯­å¥ä¸­æ²¡å­æŸ¥è¯¢æˆ–å…³è”æŸ¥è¯¢ï¼Œåªæœ‰å”¯ä¸€çš„selectï¼Œæ¯è¡Œéƒ½å°†æ˜¾ç¤º1ã€‚å¦åˆ™ï¼Œå†…å±‚çš„selectè¯­å¥ä¸€èˆ¬ä¼šé¡ºåºç¼–å·ï¼Œå¯¹åº”äºå…¶åœ¨åŸå§‹è¯­å¥ä¸­çš„ä½ç½® select_type æ˜¾ç¤ºæœ¬è¡Œæ˜¯ç®€å•æˆ–å¤æ‚selectã€‚å¦‚æœæŸ¥è¯¢æœ‰ä»»ä½•å¤æ‚çš„å­æŸ¥è¯¢ï¼Œåˆ™æœ€å¤–å±‚æ ‡è®°ä¸ºPRIMARYï¼ˆDERIVEDã€UNIONã€UNION RESUlTï¼‰ table è®¿é—®å¼•ç”¨å“ªä¸ªè¡¨ï¼ˆå¼•ç”¨æŸä¸ªæŸ¥è¯¢ï¼Œå¦‚â€œderived3â€ï¼‰ type æ•°æ®è®¿é—®&#x2F;è¯»å–æ“ä½œç±»å‹ï¼ˆALLã€indexã€rangeã€refã€eq_refã€const&#x2F;systemã€NULLï¼‰ possible_keys æ­ç¤ºå“ªä¸€äº›ç´¢å¼•å¯èƒ½æœ‰åˆ©äºé«˜æ•ˆçš„æŸ¥æ‰¾ key æ˜¾ç¤ºmysqlå†³å®šé‡‡ç”¨å“ªä¸ªç´¢å¼•æ¥ä¼˜åŒ–æŸ¥è¯¢ key_len æ˜¾ç¤ºmysqlåœ¨ç´¢å¼•é‡Œä½¿ç”¨çš„å­—èŠ‚æ•° ref æ˜¾ç¤ºäº†ä¹‹å‰çš„è¡¨åœ¨keyåˆ—è®°å½•çš„ç´¢å¼•ä¸­æŸ¥æ‰¾å€¼æ‰€ç”¨çš„åˆ—æˆ–å¸¸é‡ rows ä¸ºäº†æ‰¾åˆ°æ‰€éœ€çš„è¡Œè€Œéœ€è¦è¯»å–çš„è¡Œæ•°ï¼Œä¼°ç®—å€¼ï¼Œä¸ç²¾ç¡®ã€‚é€šè¿‡æŠŠæ‰€æœ‰rowsåˆ—å€¼ç›¸ä¹˜ï¼Œå¯ç²—ç•¥ä¼°ç®—æ•´ä¸ªæŸ¥è¯¢ä¼šæ£€æŸ¥çš„è¡Œæ•° Extra é¢å¤–ä¿¡æ¯ï¼Œå¦‚using indexã€filesortç­‰ select_type ç±»å‹ è¯´æ˜ simple ç®€å•å­æŸ¥è¯¢ï¼Œä¸åŒ…å«å­æŸ¥è¯¢å’Œunion primary åŒ…å«unionæˆ–è€…å­æŸ¥è¯¢ï¼Œæœ€å¤–å±‚çš„éƒ¨åˆ†æ ‡è®°ä¸ºprimary subquery ä¸€èˆ¬å­æŸ¥è¯¢ä¸­çš„å­æŸ¥è¯¢è¢«æ ‡è®°ä¸ºsubqueryï¼Œä¹Ÿå°±æ˜¯ä½äºselectåˆ—è¡¨ä¸­çš„æŸ¥è¯¢ derived æ´¾ç”Ÿè¡¨â€”â€”è¯¥ä¸´æ—¶è¡¨æ˜¯ä»å­æŸ¥è¯¢æ´¾ç”Ÿå‡ºæ¥çš„ï¼Œä½äºformä¸­çš„å­æŸ¥è¯¢ union ä½äºunionä¸­ç¬¬äºŒä¸ªåŠå…¶ä»¥åçš„å­æŸ¥è¯¢è¢«æ ‡è®°ä¸ºunionï¼Œç¬¬ä¸€ä¸ªå°±è¢«æ ‡è®°ä¸ºprimaryå¦‚æœæ˜¯unionä½äºfromä¸­åˆ™æ ‡è®°ä¸ºderived union result ç”¨æ¥ä»åŒ¿åä¸´æ—¶è¡¨é‡Œæ£€ç´¢ç»“æœçš„selectè¢«æ ‡è®°ä¸ºunion result dependent union é¡¾åæ€ä¹‰ï¼Œé¦–å…ˆéœ€è¦æ»¡è¶³UNIONçš„æ¡ä»¶ï¼ŒåŠUNIONä¸­ç¬¬äºŒä¸ªä»¥åŠåé¢çš„SELECTè¯­å¥ï¼ŒåŒæ—¶è¯¥è¯­å¥ä¾èµ–å¤–éƒ¨çš„æŸ¥è¯¢ subquery å­æŸ¥è¯¢ä¸­ç¬¬ä¸€ä¸ªSELECTè¯­å¥ dependent subquery å’ŒDEPENDENT UNIONç›¸å¯¹UNIONä¸€æ · type typeæ˜¾ç¤ºçš„æ˜¯è®¿é—®ç±»å‹ï¼Œæ˜¯è¾ƒä¸ºé‡è¦çš„ä¸€ä¸ªæŒ‡æ ‡ï¼Œç»“æœå€¼ä»å¥½åˆ°åä¾æ¬¡æ˜¯ï¼šsystem &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¾—ä¿è¯æŸ¥è¯¢è‡³å°‘è¾¾åˆ°rangeçº§åˆ«ï¼Œæœ€å¥½èƒ½è¾¾åˆ°refã€‚ ç±»å‹ è¯´æ˜ All æœ€åçš„æƒ…å†µ,å…¨è¡¨æ‰«æ index å’Œå…¨è¡¨æ‰«æä¸€æ ·ã€‚åªæ˜¯æ‰«æè¡¨çš„æ—¶å€™æŒ‰ç…§ç´¢å¼•æ¬¡åºè¿›è¡Œè€Œä¸æ˜¯è¡Œã€‚ä¸»è¦ä¼˜ç‚¹å°±æ˜¯é¿å…äº†æ’åº, ä½†æ˜¯å¼€é”€ä»ç„¶éå¸¸å¤§ã€‚å¦‚åœ¨Extraåˆ—çœ‹åˆ°Using indexï¼Œè¯´æ˜æ­£åœ¨ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼Œåªæ‰«æç´¢å¼•çš„æ•°æ®ï¼Œå®ƒæ¯”æŒ‰ç´¢å¼•æ¬¡åºå…¨è¡¨æ‰«æçš„å¼€é”€è¦å°å¾ˆå¤š range èŒƒå›´æ‰«æï¼Œä¸€ä¸ªæœ‰é™åˆ¶çš„ç´¢å¼•æ‰«æã€‚key åˆ—æ˜¾ç¤ºä½¿ç”¨äº†å“ªä¸ªç´¢å¼•ã€‚å½“ä½¿ç”¨&#x3D;ã€ &lt;&gt;ã€&gt;ã€&gt;&#x3D;ã€&lt;ã€&lt;&#x3D;ã€IS NULLã€&lt;&#x3D;&gt;ã€BETWEEN æˆ–è€… IN æ“ä½œç¬¦,ç”¨å¸¸é‡æ¯”è¾ƒå…³é”®å­—åˆ—æ—¶,å¯ä»¥ä½¿ç”¨ range ref ä¸€ç§ç´¢å¼•è®¿é—®ï¼Œå®ƒè¿”å›æ‰€æœ‰åŒ¹é…æŸä¸ªå•ä¸ªå€¼çš„è¡Œã€‚æ­¤ç±»ç´¢å¼•è®¿é—®åªæœ‰å½“ä½¿ç”¨éå”¯ä¸€æ€§ç´¢å¼•æˆ–å”¯ä¸€æ€§ç´¢å¼•éå”¯ä¸€æ€§å‰ç¼€æ—¶æ‰ä¼šå‘ç”Ÿã€‚è¿™ä¸ªç±»å‹è·Ÿeq_refä¸åŒçš„æ˜¯ï¼Œå®ƒç”¨åœ¨å…³è”æ“ä½œåªä½¿ç”¨äº†ç´¢å¼•çš„æœ€å·¦å‰ç¼€ï¼Œæˆ–è€…ç´¢å¼•ä¸æ˜¯UNIQUEå’ŒPRIMARY KEYã€‚refå¯ä»¥ç”¨äºä½¿ç”¨&#x3D;æˆ–&lt;&#x3D;&gt;æ“ä½œç¬¦çš„å¸¦ç´¢å¼•çš„åˆ—ã€‚ eq_ref æœ€å¤šåªè¿”å›ä¸€æ¡ç¬¦åˆæ¡ä»¶çš„è®°å½•ã€‚ä½¿ç”¨å”¯ä¸€æ€§ç´¢å¼•æˆ–ä¸»é”®æŸ¥æ‰¾æ—¶ä¼šå‘ç”Ÿ ï¼ˆé«˜æ•ˆï¼‰ const å½“ç¡®å®šæœ€å¤šåªä¼šæœ‰ä¸€è¡ŒåŒ¹é…çš„æ—¶å€™ï¼ŒMySQLä¼˜åŒ–å™¨ä¼šåœ¨æŸ¥è¯¢å‰è¯»å–å®ƒè€Œä¸”åªè¯»å–ä¸€æ¬¡ï¼Œå› æ­¤éå¸¸å¿«ã€‚å½“ä¸»é”®æ”¾å…¥whereå­å¥æ—¶ï¼ŒmysqlæŠŠè¿™ä¸ªæŸ¥è¯¢è½¬ä¸ºä¸€ä¸ªå¸¸é‡ï¼ˆé«˜æ•ˆï¼‰ system è¿™æ˜¯constè¿æ¥ç±»å‹çš„ä¸€ç§ç‰¹ä¾‹ï¼Œè¡¨ä»…æœ‰ä¸€è¡Œæ»¡è¶³æ¡ä»¶ã€‚ Null æ„å‘³è¯´mysqlèƒ½åœ¨ä¼˜åŒ–é˜¶æ®µåˆ†è§£æŸ¥è¯¢è¯­å¥ï¼Œåœ¨æ‰§è¡Œé˜¶æ®µç”šè‡³ç”¨ä¸åˆ°è®¿é—®è¡¨æˆ–ç´¢å¼•ï¼ˆé«˜æ•ˆï¼‰ Extra Extraæ˜¯EXPLAINè¾“å‡ºä¸­å¦å¤–ä¸€ä¸ªå¾ˆé‡è¦çš„åˆ—ï¼Œè¯¥åˆ—æ˜¾ç¤ºMySQLåœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­çš„ä¸€äº›è¯¦ç»†ä¿¡æ¯ï¼ŒMySQLæŸ¥è¯¢ä¼˜åŒ–å™¨æ‰§è¡ŒæŸ¥è¯¢çš„è¿‡ç¨‹ä¸­å¯¹æŸ¥è¯¢è®¡åˆ’çš„é‡è¦è¡¥å……ä¿¡æ¯ã€‚ ç±»å‹ è¯´æ˜ Using filesort MySQLæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥ç”Ÿæˆæœ‰åºçš„ç»“æœï¼Œé€šè¿‡æ’åºæ“ä½œæˆ–è€…ä½¿ç”¨ç´¢å¼•ï¼Œå½“Extraä¸­å‡ºç°äº†Using filesort è¯´æ˜MySQLä½¿ç”¨äº†åè€…ï¼Œä½†æ³¨æ„è™½ç„¶å«filesortä½†å¹¶ä¸æ˜¯è¯´æ˜å°±æ˜¯ç”¨äº†æ–‡ä»¶æ¥è¿›è¡Œæ’åºï¼Œåªè¦å¯èƒ½æ’åºéƒ½æ˜¯åœ¨å†…å­˜é‡Œå®Œæˆçš„ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹åˆ©ç”¨ç´¢å¼•æ’åºæ›´å¿«ï¼Œæ‰€ä»¥ä¸€èˆ¬è¿™æ—¶ä¹Ÿè¦è€ƒè™‘ä¼˜åŒ–æŸ¥è¯¢äº†ã€‚ä½¿ç”¨æ–‡ä»¶å®Œæˆæ’åºæ“ä½œï¼Œè¿™æ˜¯å¯èƒ½æ˜¯ordery byï¼Œgroup byè¯­å¥çš„ç»“æœï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªCPUå¯†é›†å‹çš„è¿‡ç¨‹ï¼Œå¯ä»¥é€šè¿‡é€‰æ‹©åˆé€‚çš„ç´¢å¼•æ¥æ”¹è¿›æ€§èƒ½ï¼Œç”¨ç´¢å¼•æ¥ä¸ºæŸ¥è¯¢ç»“æœæ’åºã€‚ Using temporary ç”¨ä¸´æ—¶è¡¨ä¿å­˜ä¸­é—´ç»“æœï¼Œå¸¸ç”¨äºGROUP BY å’Œ ORDER BYæ“ä½œä¸­ï¼Œä¸€èˆ¬çœ‹åˆ°å®ƒè¯´æ˜æŸ¥è¯¢éœ€è¦ä¼˜åŒ–äº†ï¼Œå°±ç®—é¿å…ä¸äº†ä¸´æ—¶è¡¨çš„ä½¿ç”¨ä¹Ÿè¦å°½é‡é¿å…ç¡¬ç›˜ä¸´æ—¶è¡¨çš„ä½¿ç”¨ã€‚ Not exists MYSQLä¼˜åŒ–äº†LEFT JOINï¼Œä¸€æ—¦å®ƒæ‰¾åˆ°äº†åŒ¹é…LEFT JOINæ ‡å‡†çš„è¡Œï¼Œ å°±ä¸å†æœç´¢äº†ã€‚ Using index è¯´æ˜æŸ¥è¯¢æ˜¯è¦†ç›–äº†ç´¢å¼•çš„ï¼Œä¸éœ€è¦è¯»å–æ•°æ®æ–‡ä»¶ï¼Œä»ç´¢å¼•æ ‘ï¼ˆç´¢å¼•æ–‡ä»¶ï¼‰ä¸­å³å¯è·å¾—ä¿¡æ¯ã€‚å¦‚æœåŒæ—¶å‡ºç°using whereï¼Œè¡¨æ˜ç´¢å¼•è¢«ç”¨æ¥æ‰§è¡Œç´¢å¼•é”®å€¼çš„æŸ¥æ‰¾ï¼Œæ²¡æœ‰using whereï¼Œè¡¨æ˜ç´¢å¼•ç”¨æ¥è¯»å–æ•°æ®è€Œéæ‰§è¡ŒæŸ¥æ‰¾åŠ¨ä½œã€‚è¿™æ˜¯MySQLæœåŠ¡å±‚å®Œæˆçš„ï¼Œä½†æ— éœ€å†å›è¡¨æŸ¥è¯¢è®°å½•ã€‚ Using index condition è¿™æ˜¯MySQL 5.6å‡ºæ¥çš„æ–°ç‰¹æ€§ï¼Œå«åšâ€œç´¢å¼•æ¡ä»¶æ¨é€â€ã€‚ç®€å•è¯´ä¸€ç‚¹å°±æ˜¯MySQLåŸæ¥åœ¨ç´¢å¼•ä¸Šæ˜¯ä¸èƒ½æ‰§è¡Œå¦‚likeè¿™æ ·çš„æ“ä½œçš„ï¼Œä½†æ˜¯ç°åœ¨å¯ä»¥äº†ï¼Œè¿™æ ·å‡å°‘äº†ä¸å¿…è¦çš„IOæ“ä½œï¼Œä½†æ˜¯åªèƒ½ç”¨åœ¨äºŒçº§ç´¢å¼•ä¸Šã€‚ Using where ä½¿ç”¨äº†WHEREä»å¥æ¥é™åˆ¶å“ªäº›è¡Œå°†ä¸ä¸‹ä¸€å¼ è¡¨åŒ¹é…æˆ–è€…æ˜¯è¿”å›ç»™ç”¨æˆ·ã€‚æ³¨æ„ï¼šExtraåˆ—å‡ºç°Using whereè¡¨ç¤ºMySQLæœåŠ¡å™¨å°†å­˜å‚¨å¼•æ“è¿”å›æœåŠ¡å±‚ä»¥åå†åº”ç”¨WHEREæ¡ä»¶è¿‡æ»¤ã€‚ Using join buffer ä½¿ç”¨äº†è¿æ¥ç¼“å­˜ï¼šBlock Nested Loopï¼Œè¿æ¥ç®—æ³•æ˜¯å—åµŒå¥—å¾ªç¯è¿æ¥;Batched Key Accessï¼Œè¿æ¥ç®—æ³•æ˜¯æ‰¹é‡ç´¢å¼•è¿æ¥ impossible where whereå­å¥çš„å€¼æ€»æ˜¯falseï¼Œä¸èƒ½ç”¨æ¥è·å–ä»»ä½•å…ƒç»„ select tables optimized away åœ¨æ²¡æœ‰GROUP BYå­å¥çš„æƒ…å†µä¸‹ï¼ŒåŸºäºç´¢å¼•ä¼˜åŒ–MIN&#x2F;MAXæ“ä½œï¼Œæˆ–è€…å¯¹äºMyISAMå­˜å‚¨å¼•æ“ä¼˜åŒ–COUNT(*)æ“ä½œï¼Œä¸å¿…ç­‰åˆ°æ‰§è¡Œé˜¶æ®µå†è¿›è¡Œè®¡ç®—ï¼ŒæŸ¥è¯¢æ‰§è¡Œè®¡åˆ’ç”Ÿæˆçš„é˜¶æ®µå³å®Œæˆä¼˜åŒ–ã€‚ distinct ä¼˜åŒ–distinctæ“ä½œï¼Œåœ¨æ‰¾åˆ°ç¬¬ä¸€åŒ¹é…çš„å…ƒç»„åå³åœæ­¢æ‰¾åŒæ ·å€¼çš„åŠ¨ä½œ æ…¢æŸ¥è¯¢åˆ†ææŸ¥è¯¢æ—¥å¿—è®¾ç½®1234567show variables like &#x27;general_log&#x27;; #æŸ¥è¯¢æ˜¯å¦å¼€å¯æŸ¥è¯¢æ—¥å¿—set global general_log = on; # å¼€å¯æŸ¥è¯¢æ—¥å¿—show variables like &#x27;log_output&#x27;; # æŸ¥çœ‹æ—¥å¿—å†™å…¥ç±»å‹set global log_output = &#x27;table&#x27;; #ä¿®æ”¹æ—¥å¿—å†™å…¥ç±»å‹select *from mysql.slow_loglimit 100; # æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•è¡¨ mysql.slow_log è¡¨å­—æ®µæ„ä¹‰ 123456query_timeï¼š SQLè¯­å¥çš„æŸ¥è¯¢æ—¶é—´(åœ¨ MySQL ä¸­æ‰€æœ‰ç±»å‹çš„ SQL è¯­å¥æ‰§è¡Œçš„æ—¶é—´éƒ½å«åš query_time,è€Œåœ¨ Oracle ä¸­åˆ™ä»…æŒ‡ select)lock_time: é”çš„æ—¶é—´rows_sent: è¿”å›äº†å¤šå°‘è¡Œ,å¦‚æœåšäº†èšåˆå°±ä¸å‡†ç¡®äº†rows_examined: #æ‰§è¡Œè¿™æ¡ SQL å¤„ç†äº†å¤šå°‘è¡Œæ•°æ®db: ä½¿ç”¨äº†å“ªä¸ªæ•°æ®åº“sql_textï¼š æ‰§è¡Œçš„sqlè¯­å¥ å­˜ç–‘çš„ç‚¹ ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦å¼€å¯æŸ¥è¯¢ç¼“å­˜ï¼Ÿ å¸¸è§é—®é¢˜","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æœåŠ¡ç«¯","slug":"æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}]},{"title":"RabbitMQç¬”è®°","date":"2022-03-08T02:25:29.711Z","path":"wiki/æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯/RabbitMQç¬”è®°/","text":"å®‰è£…å®‰è£…PHPæ‰©å±•amqp12345678910111213141516PHP &lt; 7.3#install some base extensionsRUN apt-get install -y \\ libzip-dev \\ zip \\ &amp;&amp; docker-php-ext-configure zip --with-libzip \\ &amp;&amp; docker-php-ext-install zipPHP &gt;= 7.3#install some base extensionsRUN apt-get install -y \\libzip-dev \\zip \\&amp;&amp; docker-php-ext-install zip å®‰è£…RabbitMQdockerå®‰è£…ï¼Œä½¿ç”¨localhost:5672è®¿é—®å…¶åå° 123456789101112rabbitmq: image:rabbitmq:management restart: always environment: RABBITMQ_DEFAULT_USER: &quot;root&quot; RABBITMQ_DEFAULT_PASS: &quot;root&quot; volumes: - ./code/rabbitmq/rabbitmq:/var/lib/rabbitmq - ./code/rabbitmq/log:/log/rabbitmq/log ports: - 15672:15672 - 5672:5672 Symfonyå®‰è£…æ‰©å±•https://github.com/php-amqplib/RabbitMqBundle Symfonyä¸­çš„composerä¸­æ·»åŠ  1&quot;php-amqplib/rabbitmq-bundle&quot;: &quot;1.14.4&quot; æ‰§è¡Œæ›´æ–°å‘½ä»¤ 1php composer update php-amqplib/rabbitmq-bundle ä½¿ç”¨å‚è€ƒ https://rabbitmq.com https://blog.csdn.net/whoamiyang/article/details/54954780","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æœåŠ¡ç«¯","slug":"æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}]},{"title":"Redisç¬”è®°","date":"2022-03-08T02:25:29.711Z","path":"wiki/æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯/redisç¬”è®°/","text":"","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æœåŠ¡ç«¯","slug":"æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}]},{"title":"å¯¹äºæœåŠ¡ç«¯å¼€å‘çš„ç†è§£","date":"2022-03-08T02:25:29.711Z","path":"wiki/æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯/å¯¹äºæœåŠ¡ç«¯å¼€å‘çš„ç†è§£/","text":"æœ€è¿‘ä¸€æ®µæ—¶é—´ï¼Œå¼€å§‹äº†è§£å¹¶å®Œæˆäº†ä¸€äº›åç«¯éœ€æ±‚ã€‚å¤§è‡´çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š ç†Ÿæ‚‰PHPï¼Œçœ‹äº†ã€ŠPHPæ ¸å¿ƒæŠ€æœ¯ä¸æœ€ä½³å®è·µã€‹ã€ã€ŠPHPå†…æ ¸å‰–æã€‹ã€ã€Šæ·±å…¥ç†è§£PHPå†…æ ¸ã€‹ï¼› ç†Ÿæ‚‰MySQLï¼Œçœ‹äº†ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹ï¼Œæ¥ä¸‹æ¥ä¼šçœ‹ã€Šé«˜æ€§èƒ½MySQLã€‹ï¼› ç†Ÿæ‚‰Redisï¼Œçœ‹äº†ã€ŠRediså®æˆ˜ã€‹ï¼› é˜…è¯»Symfonyå®˜ç½‘æ–‡æ¡£ï¼Œäº†è§£å…¶åŸºæœ¬åŸç†ï¼› ç”±äºæœ¬åœ°ä½¿ç”¨dockerå¼€å‘ç¯å¢ƒï¼Œæ‰€ä»¥å¯¹dockerç›¸å…³çŸ¥è¯†ç‚¹ä¹Ÿè¿›è¡Œäº†ä¸€è½®å¤ä¹ ï¼› æ•´ä½“æ¥çœ‹ï¼Œæƒ³ä½¿ç”¨PHPç›¸å…³æŠ€æœ¯æ ˆè¿›è¡Œåç«¯å¼€å‘ï¼Œç»è¿‡ä¸Šé¢çš„å­¦ä¹ åï¼Œå†™å†™ä¸šåŠ¡ä»£ç ï¼Œä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰ã€‚å…¬å¸ä½¿ç”¨PHPè¿™ä¸€å¥—æŠ€æœ¯æ ˆï¼Œä¹Ÿæ˜¯åŸºäºäººåŠ›æˆæœ¬ã€å¼€å‘æ•ˆç‡å„æ–¹é¢å› ç´ ç»¼åˆè€ƒè™‘è€Œå®šçš„ã€‚åœ¨ç°æœ‰ä½“é‡ä¸‹ä¹Ÿç¡®å®æ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©ã€‚å› ä¸ºè‡ªå·±æœ¬èº«æœ‰å…¶ä»–è¯­è¨€çš„åº•å­åœ¨ï¼Œå­¦ä¹ çš„è¿‡ç¨‹ä¸­è¿˜æ˜¯è›®é¡ºåˆ©çš„ã€‚ç°åœ¨å›è¿‡å¤´çœ‹çœ‹ï¼Œåç«¯çš„æ•´ä½“æ¶æ„è®¾è®¡ä¹Ÿæ˜¯æ ¹æ®ä½“é‡çš„å¤§å°ä¸€æ­¥æ­¥è¿›åŒ–æ¥çš„ã€‚ å½“ä¸€ä¸ªï¼ˆå°ï¼‰é¡¹ç›®åˆšå¼€å§‹æ—¶ï¼Œä½¿ç”¨Nginx+Symfony+MySQLï¼Œå½“ä¸šåŠ¡é‡æœ‰æ‰€å¢é•¿ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦åŠ ä¸Šç¼“å­˜Redisï¼›å½“ä¸šåŠ¡ç»§ç»­å¢é•¿ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦å¤šå°æœºå™¨éƒ¨ç½²äº†ï¼Œéœ€è¦ä½¿ç”¨è´Ÿè½½å‡è¡¡ï¼ŒNginxè¿›è¡Œåå‘ä»£ç†ï¼Œå°†æµé‡åˆ†å‘åˆ°ä¸åŒçš„æœºå™¨ï¼›å½“ä¸šåŠ¡ç»§ç»­å¢é•¿ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦è€ƒè™‘éƒ¨ç½²å¤šä¸ªæ•°æ®åº“ï¼Œè¿›è¡Œä¸»ä»åŒæ­¥ï¼›å½“ä¸šåŠ¡ç»§ç»­å¢é•¿ï¼Œè¿™ä¸ªæ—¶å€™Redisä¹Ÿè¦è€ƒè™‘ä½¿ç”¨é›†ç¾¤ã€‚éšç€ä¸šåŠ¡ç»§ç»­å¢é•¿ï¼Œæ•°æ®åº“è¡¨çš„è®¾è®¡ï¼Œå¦‚ä½•åˆ†è¡¨ã€‚å¦‚ä½•åˆ†åº“ï¼Œä¸šåŠ¡ä»£ç å¦‚ä½•å†™æ•ˆç‡é«˜ï¼Œç­‰ç­‰é—®é¢˜éƒ½è¦è¿›è¡Œè€ƒè™‘äº†ã€‚å½“ä¸šåŠ¡è¿˜åœ¨ç»§ç»­å¢é•¿ï¼Œå¯èƒ½æœ‰äº›äº‹æƒ…ç”¨PHPæ¥å¹²å·²ç»ä¸æ˜¯æœ€ä¼˜è§£äº†ï¼ é™¤äº†ä¸Šé¢æ‰€è¯´çš„ä¸€äº›æŠ€æœ¯é€‰æ‹©å¤–ï¼Œä¸ºäº†ä¿è¯æœåŠ¡å™¨çš„ç¨³å®šï¼Œè¿˜æœ‰å¾ˆå¤šäº‹æƒ…è¦åšçš„ï¼Œæ¯”å¦‚è¦å¯¹æœåŠ¡å™¨ç›¸å…³æ•°æ®è¿›è¡Œç›‘æ§ï¼Œæ¯”å¦‚è¯·æ±‚æ•°ã€æ…¢è¯·æ±‚æ•°ã€æœåŠ¡å™¨æµé‡æ¶ˆè€—æƒ…å†µç­‰ï¼›è¦æœ‰ä¸€å¥—å®Œå–„çš„æ—¥å¿—ç³»ç»Ÿï¼›å¯¹æ•°æ®åº“çš„ç›‘æ§ï¼›å®¹ç¾æœºåˆ¶ç­‰ç­‰ã€‚ è¿™äº›çŸ¥è¯†çš„è·å–é€”å¾„æ— å¤–ä¹ä¸¤ç§ï¼Œä¸€æ˜¯ä¸šåŠ¡å¢é•¿å–œäººï¼Œç»™äº†ä½ æœºä¼šæŠŠè¿™äº›å‘éƒ½è¸©ä¸€éï¼›äºŒæ˜¯åœ¨å¤§å…¬å¸ï¼Œç°æˆçš„è§£å†³æ–¹æ¡ˆä¾›ä½ å­¦ä¹ ã€‚æ‰€ä»¥ï¼Œåˆšæ¯•ä¸šçš„å°èœé¸Ÿä»¬ï¼Œè¿˜æ˜¯å»ºè®®èƒ½å»å¤§å…¬å¸å°±å°½é‡å»å¤§å…¬å¸ï¼Œåšå¤§åšå¼ºçš„å°å…¬å¸å¤ªå°‘äº†ï¼Œä¸ä¸€å®šèƒ½è¢«ä½ æ’ä¸Šã€‚ æœåŠ¡ç«¯éœ€è¦ç”¨åˆ°çš„æŠ€æœ¯æˆ–è½¯ä»¶ï¼š å¼€å‘æ¡†æ¶ï¼šSymfonyã€ThinkPHPç­‰ æ¶ˆæ¯é˜Ÿåˆ—ï¼šRabbitMQç­‰ æœåŠ¡å™¨ï¼šNginxã€Apacheç­‰ ç¼“å­˜ï¼šRedisã€MemCachedç­‰ æ•°æ®å­˜å‚¨ï¼šMySQLã€PostgreSQLç­‰ ä»£ç éƒ¨ç½²ï¼šWalleç­‰ æ•°æ®ç›‘æ§ï¼šZabbixç­‰ æ—¥å¿—åˆ†æç³»ç»Ÿï¼šelkç­‰","tags":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}],"categories":[{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"}]},{"title":"Windowsä¸‹Charlesæ”¯æŒHTTPS","date":"2022-03-08T02:25:29.711Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/Charles SSLè¯ä¹¦/","text":"SSLæ¡æ‰‹è¿‡ç¨‹å®¢æˆ·ç«¯å‘å‡ºåŠ å¯†é€šä¿¡è¯·æ±‚æä¾›ï¼š åè®®ç‰ˆæœ¬(å¦‚ TSL1.0) éšæœºæ•° 1(ç”¨äºç”Ÿæˆå¯¹è¯å¯†é’¥) æ”¯æŒçš„åŠ å¯†æ–¹æ³•(å¦‚ RSA å…¬é’¥åŠ å¯†) æ”¯æŒçš„å‹ç¼©æ–¹æ³• æœåŠ¡å™¨å›åº”å›åº”å†…å®¹: ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†é€šä¿¡åè®®ç‰ˆæœ¬(TSL1.0) éšæœºæ•° 2(ç”¨äºç”Ÿæˆå¯¹è¯å¯†é’¥) ç¡®è®¤åŠ å¯†æ–¹æ³•(RSA) æœåŠ¡å™¨è¯ä¹¦(åŒ…å«éå¯¹ç§°åŠ å¯†çš„å…¬é’¥) (å¯é€‰)è¦æ±‚å®¢æˆ·ç«¯æä¾›è¯ä¹¦çš„è¯·æ±‚ å®¢æˆ·ç«¯éªŒè¯è¯ä¹¦å¦‚æœè¯ä¹¦ä¸æ˜¯å¯ä¿¡æœºæ„é¢å¸ƒï¼Œæˆ–è¯ä¹¦åŸŸåä¸å®é™…åŸŸåä¸ç¬¦ï¼Œæˆ–è€…è¯ä¹¦å·²ç»è¿‡æœŸï¼Œå°±ä¼šå‘è®¿é—®è€…æ˜¾ç¤ºä¸€ä¸ªè­¦å‘Šï¼Œæ˜¯å¦ç»§ç»­é€šä¿¡ å®¢æˆ·ç«¯å›åº”è¯ä¹¦æ²¡æœ‰é—®é¢˜ï¼Œå°±ä¼šå–å‡ºè¯ä¹¦ä¸­çš„æœåŠ¡å™¨å…¬é’¥ç„¶åå‘é€: éšæœºæ•° 3(pre-master keyï¼Œæ­¤éšæœºæ•°ç”¨æœåŠ¡å™¨å…¬é’¥åŠ å¯†ï¼Œé˜²æ­¢è¢«çªƒå¬) ç¼–ç æ”¹å˜é€šçŸ¥(è¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ç”¨åŒæ–¹å•†å®šçš„æ–¹æ³•å’Œå¯†é’¥å‘é€) å®¢æˆ·ç«¯æ¡æ‰‹ç»“æŸé€šçŸ¥ åŒæ–¹ç”Ÿæˆä¼šè¯å¯†é’¥åŒæ–¹åŒæ—¶æœ‰äº†ä¸‰ä¸ªéšæœºæ•°ï¼Œæ¥ç€å°±ç”¨äº‹å…ˆå•†å®šçš„åŠ å¯†æ–¹æ³•ï¼Œå„è‡ªç”ŸæˆåŒä¸€æŠŠâ€œä¼š è¯å¯†é’¥â€ æœåŠ¡å™¨ç«¯ç”¨è‡ªå·±çš„ç§é’¥(éå¯¹ç§°åŠ å¯†çš„)è·å–ç¬¬ä¸‰ä¸ªéšæœºæ•°ï¼Œä¼šè®¡ç®—ç”Ÿæˆæœ¬æ¬¡æ‰€ ç”¨çš„ä¼šè¯å¯†é’¥(å¯¹ç§°åŠ å¯†çš„å¯†é’¥)ï¼Œå¦‚æœå‰ä¸€æ­¥è¦æ±‚å®¢æˆ·ç«¯è¯ä¹¦ï¼Œä¼šåœ¨è¿™ä¸€æ­¥éªŒè¯ã€‚ æœåŠ¡å™¨æœ€åå“åº”æœåŠ¡å™¨ç”Ÿæˆä¼šè¯å¯†é’¥åï¼Œå‘å®¢æˆ·ç«¯å‘é€: ç¼–ç æ”¹å˜é€šçŸ¥(åé¢çš„ä¿¡æ¯éƒ½ç”¨åŒæ–¹çš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥æ¥å‘é€) æœåŠ¡å™¨æ¡æ‰‹ç»“æŸé€šçŸ¥ Charles è®¾ç½®SSLè®¾ç½®ç‚¹å‡» Proxy -&gt; SSL Proxy Settings -&gt; SSLProxy -&gt; Add æ·»åŠ SSLä»£ç†è§„åˆ™ Host:* Port:443 è¯ä¹¦é…ç½®(ä¸ç”¨è®¾ç½®)ç‚¹å‡» Help -&gt; SSL Proxying -&gt; Install Charles Root Certificate -&gt; å®‰è£…è¯ä¹¦ é€‰æ‹©å°†æ‰€æœ‰çš„è¯ä¹¦éƒ½æ”¾å…¥å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„ Macéœ€è¦åœ¨é’¥åŒ™é“¾ä¸­å°†è¯ä¹¦è®¾ç½®ä¸ºæ°¸ä¹…ä¿¡ä»» æ‰‹æœºé…ç½®è¿æ¥è·Ÿç”µè„‘ä¸€æ ·çš„ç½‘ç»œï¼Œé…ç½®ä»£ç†è¿æ¥charlesã€‚æµè§ˆå™¨è®¿é—®chls.pro/sslï¼Œä¸‹è½½å®‰è£…è¯ä¹¦ æ³¨æ„äº‹é¡¹Android7åŠä»¥ä¸Šæ— æ³•æŠ“å–httpsï¼Œå› ä¸ºâ€Network Security Configurationâ€çš„æ–°å®‰å…¨åŠŸèƒ½ã€‚è¿™ä¸ªåŠŸèƒ½è¿è¡Œå¼€å‘äººå‘˜åœ¨ä¸ä¿®æ”¹åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹è‡ªå®šä¹‰ä»–ä»¬çš„ç½‘ç»œå®‰å…¨è®¾ç½®ã€‚å¦‚æœåº”ç”¨ç¨‹åºè¿è¡Œçš„ç³»ç»Ÿç‰ˆæœ¬é«˜äºæˆ–ç­‰äº24ï¼Œå¹¶ä¸”targetSdkVersion&gt;&#x3D;24ï¼Œåˆ™åªæœ‰ç³»ç»Ÿè¯ä¹¦æ‰è¢«ä¿¡ä»»ã€‚ å‚è€ƒ https://www.charlesproxy.com/documentation/using-charles/ssl-certificates/ https://juejin.im/post/5b4f005ae51d45191c7e534a","tags":[{"name":"charles","slug":"charles","permalink":"http://airshu.github.io/tags/charles/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"Dockerç¬”è®°","date":"2022-03-08T02:25:29.711Z","path":"wiki/æŠ€æœ¯å¼€å‘/æ‚é¡¹/Dockerç¬”è®°/","text":"å®¹å™¨ç”Ÿæ€ç³»ç»Ÿï¼š å®¹å™¨æ ¸å¿ƒæŠ€æœ¯ï¼š å®¹å™¨è§„èŒƒï¼š OCIï¼ˆOpen Container Initiativeï¼‰ï¼š runtime spec image format spec å®¹å™¨runtimeï¼š lxcï¼šLinuxä¸Šè€ç‰Œçš„å®¹å™¨runtimeï¼ŒDockeræœ€åˆä¹Ÿæ˜¯ç”¨lxcä½œä¸ºruntime runcï¼šDockerè‡ªå·±å¼€å‘çš„å®¹å™¨runtimeï¼Œç¬¦åˆociè§„èŒƒï¼Œä¹Ÿæ˜¯ç°åœ¨Dockeré»˜è®¤çš„runtime rktï¼šCoreOSå¼€å‘çš„å®¹å™¨runtime å®¹å™¨ç®¡ç†å·¥å…·ï¼š lxdï¼šlxcå¯¹åº”çš„ç®¡ç†å·¥å…· runcï¼šdocker engineï¼ŒåŒ…å«åå°deamonå’Œcliä¸¤éƒ¨åˆ†ã€‚ rkt cliï¼šrktå¯¹åº”çš„ç®¡ç†å·¥å…· å®¹å™¨å®šä¹‰å·¥å…·ï¼šå…è®¸ç”¨æˆ·å®šä¹‰å®¹å™¨çš„å†…å®¹å’Œå±æ€§ï¼Œè¿™æ ·å®¹å™¨å°±èƒ½å¤Ÿè¢«ä¿å­˜ã€å…±äº«å’Œé‡å»º docker imageï¼šDockerå®¹å™¨çš„æ¨¡æ¿ï¼Œruntimeä¾æ®docker imageåˆ›å»ºå®¹å™¨ã€‚ dockerfileï¼šåŒ…å«è‹¥å¹²å‘½ä»¤çš„æ–‡æœ¬æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡è¿™äº›å‘½ä»¤åˆ›å»ºå‡ºdocker imageã€‚ ACI(App Container Image)ï¼šCoreOSå¼€å‘çš„rktå®¹å™¨çš„imageæ ¼å¼ã€‚ Registriesï¼šå­˜æ”¾imageçš„ä»“åº“ Docker Registryï¼šä¼ä¸šå¯ä»¥ç”¨Docker Registryæ„å»ºç§æœ‰çš„Registry Docker Hubï¼šDockerä¸ºå…¬ä¼—æä¾›çš„æ‰˜ç®¡Registry Quay.io å®¹å™¨OSï¼šä¸“é—¨è¿è¡Œå®¹å™¨çš„æ“ä½œç³»ç»Ÿï¼Œä¸å¸¸è§„OSç›¸æ¯”ï¼Œå®¹å™¨OSä½“ç§¯æ›´å°ï¼Œå¯åŠ¨æ›´å¿«ã€‚ coreos atomic ubuntu core å®¹å™¨å¹³å°æŠ€æœ¯ï¼š å®¹å™¨ç¼–æ’å¼•æ“ï¼š docker swarmï¼šDockerå¼€å‘çš„å®¹å™¨ç¼–æ’å¼•æ“ã€‚ kubernetesï¼šGoogleé¢†å¯¼å¼€å‘çš„ï¼ŒåŒæ—¶æ”¯æŒDockerå’ŒCoreOSå®¹å™¨ã€‚ mesos+marathonï¼šé€šç”¨çš„é›†ç¾¤èµ„æºè°ƒåº¦å¹³å°ï¼Œmesosä¸marathonä¸€èµ·æä¾›å®¹å™¨ç¼–æ’å¼•æ“ã€‚ å®¹å™¨ç®¡ç†å¹³å°ï¼šåœ¨å®¹å™¨ç¼–æ’å¼•æ“ä¹‹ä¸Šçš„ä¸€ä¸ªæ›´ä¸ºé€šç”¨çš„å¹³å°ã€‚ Rancher ContainerShip åŸºäºå®¹å™¨çš„Paasï¼š Deis Flynn Dokku å®¹å™¨æ”¯æŒæŠ€æœ¯ï¼š å®¹å™¨ç½‘ç»œï¼š docker network: none host bridge joined container overlay macvian flannel weave calico æœåŠ¡å‘ç°ï¼š etcd consul zookeeper ç›‘æ§ï¼š docker ps&#x2F;top&#x2F;statsï¼šDockeråŸç”Ÿå‘½ä»¤è¡Œç›‘æ§å·¥å…· docker stats API sysdig cAvisor&#x2F;Heapster Weave Scope æ•°æ®ç®¡ç†ï¼š Rex-Ray æ—¥å¿—ç®¡ç†ï¼š docker logs logspout å®‰å…¨æ€§ï¼š OpenSCAP ç‰¹æ€§ é›†è£…ç®± Docker æ‰“åŒ…å¯¹è±¡ å‡ ä¹ä»»ä½•ç‰©å“ ä»»ä½•è½¯ä»¶åŠå…¶ä¾èµ– æ ‡å‡†å½¢çŠ¶å’Œæ¥å£å…è®¸é›†è£…ç®±è¢«å¸è½½åˆ° å„ç§äº¤é€šå·¥å…·ï¼Œæ•´ä¸ªè¿è¾“è¿‡ç¨‹æ— éœ€æ‰“å¼€ å®¹å™¨æ— éœ€ä¿®æ”¹ä¾¿å¯è¿è¡Œåœ¨å‡ ä¹æ‰€æœ‰çš„å¹³å° éš”ç¦»æ€§ å¯ä»¥é‡å èµ·æ¥ä¸€èµ·è¿è¾“ èµ„æºã€ç½‘ç»œã€åº“éƒ½æ˜¯éš”ç¦»çš„ï¼Œä¸ä¼šå‡ºç°ä¾èµ–é—®é¢˜ è‡ªåŠ¨åŒ– æ ‡å‡†æ¥å£ä½¿é›†è£…ç®±å¾ˆå®¹æ˜“è‡ªåŠ¨è£…å¸å’Œç§»åŠ¨ æä¾›runã€startã€stopç­‰æ ‡å‡†åŒ–æ“ä½œ é«˜æ•ˆæ€§ æ— é¡»å¼€ç®± è½»é‡çº§ èŒè´£åˆ†å·¥ è´§ä¸»åªéœ€è¦è€ƒè™‘æŠŠä»€ä¹ˆæ”¾åˆ°é›†è£…ç®± å¼€å‘äººå‘˜åªéœ€è¦è€ƒè™‘æ€ä¹ˆå†™ä»£ç ï¼Œè¿ç»´åªéœ€å…³å¿ƒå¦‚ä½•é…ç½®åŸºç¡€ç¯å¢ƒ Dockeræ ¸å¿ƒç»„ä»¶ Dockerå®¢æˆ·ç«¯ï¼šClient DockeræœåŠ¡å™¨ï¼šDocker daemonï¼Œè´Ÿè´£åˆ›å»ºã€è¿è¡Œã€ç›‘æ§å®¹å™¨ï¼Œæ„å»ºã€å­˜å‚¨é•œåƒã€‚ Dockeré•œåƒï¼šImage Registryï¼šé•œåƒä»“åº“ Dockerå®¹å™¨ï¼šContainer é•œåƒï¼ˆImageï¼‰ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¸ä¼šæ”¹å˜ã€‚ å¸¸ç”¨é•œåƒ 1234Docker å›¾å½¢ç®¡ç†å·¥å…·docker run -d -p 9001:9000 -v &quot;/var/run/docker.sock:/var/run/docker.sock&quot; portainer/portainer å®¹å™¨ï¼ˆContainerï¼‰é•œåƒå’Œå®¹å™¨çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å¯¹å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå®ä¾‹ä¸€ä¸€æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œçš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚ å®¹å™¨çš„å®è´¨æ˜¯è¿›ç¨‹ï¼Œä½†ä¸ç›´æ¥åœ¨å®¿ä¸»æ‰§è¡Œçš„è¿›ç¨‹ä¸åŒï¼Œå®¹å™¨è¿›ç¨‹è¿è¡Œäºå±äºè‡ªå·±çš„ç‹¬ç«‹çš„ å‘½åç©ºé—´ã€‚å› æ­¤å®¹å™¨å¯ä»¥æ‹¥æœ‰è‡ªå·±çš„ root æ–‡ä»¶ç³»ç»Ÿã€è‡ªå·±çš„ç½‘ç»œé…ç½®ã€è‡ªå·±çš„è¿›ç¨‹ç©ºé—´ï¼Œç”šè‡³è‡ªå·±çš„ç”¨æˆ· ID ç©ºé—´ã€‚å®¹å™¨å†…çš„è¿›ç¨‹æ˜¯è¿è¡Œåœ¨ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒé‡Œï¼Œä½¿ç”¨èµ·æ¥ï¼Œå°±å¥½åƒæ˜¯åœ¨ä¸€ä¸ªç‹¬ç«‹äºå®¿ä¸»çš„ç³»ç»Ÿä¸‹æ“ä½œä¸€æ ·ã€‚ åŸºæœ¬ç”¨æ³•12345678910æ‹‰å–æœ€å°çš„é•œåƒdocker pull hello-worldæŸ¥çœ‹é•œåƒdocker image lsè¿è¡Œé•œåƒdocker run hello-world hello-worldé•œåƒçš„å†…å®¹ 123FROM scratch # ä»0å¼€å§‹æ„å»ºCOPY hello /CMD [&quot;/hello&quot;] baseé•œåƒï¼šæä¾›ä¸€ä¸ªåŸºæœ¬çš„æ“ä½œç³»ç»Ÿç¯å¢ƒï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å®‰è£…å’Œé…ç½®è½¯ä»¶ã€‚ ä¸ä¾èµ–å…¶ä»–é•œåƒï¼Œä»scratchæ„å»ºï¼› å…¶ä»–é•œåƒå¯ä»¥ä»¥ä¹‹ä¸ºåŸºç¡€è¿›è¡Œæ‰©å±•ã€‚ èƒ½ç§°ä¸ºbaseé•œåƒçš„é€šå¸¸æ˜¯å„ç§Linuxå‘è¡Œç‰ˆçš„Dockeré•œåƒï¼Œæ¯”å¦‚Ubuntuã€Debianã€CentOSç­‰ã€‚ æ„å»ºé•œåƒï¼šdocker commitåŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼š è¿è¡Œå®¹å™¨ ä¿®æ”¹å®¹å™¨ å°†å®¹å™¨ä¿å­˜ä¸ºæ–°çš„é•œåƒ Dockerfileæ„å»ºé•œåƒçš„æ­¥éª¤ï¼š ä»baseé•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨ æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œå¯¹å®¹å™¨åšä¿®æ”¹ æ‰§è¡Œç±»ä¼¼docker commitçš„æ“ä½œï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„é•œåƒå±‚ Dockerå†åŸºäºåˆšåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨ é‡å¤2-4æ­¥ï¼Œç›´åˆ°Dockerfileä¸­çš„æ‰€æœ‰æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•ã€‚ Dockerfileå®ä¾‹ 12FROM ubuntuRUN apt-get update &amp;&amp; apt-get install -y vim Dockerfileå¸¸ç”¨å‘½ä»¤ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051æŒ‡å®šbaseé•œåƒFROMè®¾ç½®é•œåƒçš„ä½œè€…MAINTSINERä»srcç›®å½•å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨çš„destï¼Œå…¶ä¸­srcå¯ä»¥æ˜¯Dockerfileæ‰€åœ¨ç›®å½•çš„ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªURLã€‚å¦‚æœsrcæ˜¯å½’æ¡£æ–‡ä»¶ï¼Œæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨è§£å‹åˆ°destADD &lt;src&gt;... &lt;dest&gt;è®¾ç½®æ„å»ºæ—¶çš„ç¯å¢ƒå˜é‡ï¼Œåœ¨å®¹å™¨è¿è¡Œæ—¶æ˜¯ä¸ä¼šå­˜åœ¨è¿™äº›å˜é‡çš„ã€‚ARG &lt;name&gt;[=&lt;default value&gt;]CMDæŒ‡ä»¤æŒ‡å®šå®¹å™¨å¯åŠ¨è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œ* å¦‚æœdocker runæŒ‡å®šäº†å…¶ä»–å‘½ä»¤ï¼ŒCMDæŒ‡å®šçš„é»˜è®¤å‘½ä»¤å°†è¢«å¿½ç•¥ã€‚* æ¯ä¸ªDockerfileå¯ä»¥æœ‰å¤šä¸ªCMDï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚CMD [&quot;nginx&quot;, &quot;-g&quot;, &quot;daemon off&quot;]å¤åˆ¶æ–‡ä»¶COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;æºè·¯å¾„&gt;... &lt;ç›®æ ‡è·¯å¾„&gt;COPY [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;æºè·¯å¾„1&gt;&quot;,... &quot;&lt;ç›®æ ‡è·¯å¾„&gt;&quot;]è®¾ç½®å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥æœ‰å¤šä¸ªENTRYPOINTæŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚CMDæˆ–docker runä¹‹åçš„å‚æ•°ä¼šè¢«å½“åšå‚æ•°ä¼ é€’ç»™ENTRYPOINTã€‚ENTRYPOINTè®¾ç½®ç¯å¢ƒå˜é‡ENV &lt;key&gt; &lt;value&gt;ENV &lt;key1&gt;=&lt;value1&gt; &lt;key2&gt;=&lt;value2&gt;...å£°æ˜åœ¨è¿è¡Œæ—¶å®¹å™¨æä¾›æœåŠ¡çš„ç«¯å£EXPOSE &lt;port&gt; [&lt;port&gt;...]LABEL ä¸ºé•œåƒæ·»åŠ å…ƒæ•°æ®LABEL version=&quot;1.0&quot;è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œå¹¶åˆ›å»ºæ–°çš„é•œåƒå±‚ï¼Œç»å¸¸ç”¨äºå®‰è£…è½¯ä»¶åŒ…ã€‚RUN &lt;command&gt;RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]USERè®¾ç½®ç”¨æˆ·VOLUMEæŒ‡å®šæŒ‚è½½ç‚¹æŒ‡å®šå·¥ä½œç›®å½•WORKDIRå®¹å™¨æš´éœ²ç«¯å£EXPOSE å¸¸ç”¨å‘½ä»¤123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104* attachï¼šä¾é™„åˆ°ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¸­ï¼›* buildï¼šä»ä¸€ä¸ª Dockerfile åˆ›å»ºä¸€ä¸ªé•œåƒï¼›* commitï¼šä»ä¸€ä¸ªå®¹å™¨çš„ä¿®æ”¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒï¼›* cpï¼šåœ¨å®¹å™¨å’Œæœ¬åœ°å®¿ä¸»ç³»ç»Ÿä¹‹é—´å¤åˆ¶æ–‡ä»¶ä¸­ï¼›* createï¼šåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ï¼Œä½†å¹¶ä¸è¿è¡Œå®ƒï¼›* diffï¼šæ£€æŸ¥ä¸€ä¸ªå®¹å™¨å†…æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ï¼ŒåŒ…æ‹¬ä¿®æ”¹å’Œå¢åŠ ï¼›* eventsï¼šä»æœåŠ¡ç«¯è·å–å®æ—¶çš„äº‹ä»¶ï¼›* execï¼šåœ¨è¿è¡Œçš„å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤ï¼›* exportï¼šå¯¼å‡ºå®¹å™¨å†…å®¹ä¸ºä¸€ä¸ª tar åŒ…ï¼›* historyï¼šæ˜¾ç¤ºä¸€ä¸ªé•œåƒçš„å†å²ä¿¡æ¯ï¼›* imagesï¼šåˆ—å‡ºå­˜åœ¨çš„é•œåƒï¼›* importï¼šå¯¼å…¥ä¸€ä¸ªæ–‡ä»¶ï¼ˆå…¸å‹ä¸º tar åŒ…ï¼‰è·¯å¾„æˆ–ç›®å½•æ¥åˆ›å»ºä¸€ä¸ªæœ¬åœ°é•œåƒï¼›* infoï¼šæ˜¾ç¤ºä¸€äº›ç›¸å…³çš„ç³»ç»Ÿä¿¡æ¯ï¼›* inspectï¼šæ˜¾ç¤ºä¸€ä¸ªå®¹å™¨çš„å…·ä½“é…ç½®ä¿¡æ¯ï¼›* killï¼šå…³é—­ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ (åŒ…æ‹¬è¿›ç¨‹å’Œæ‰€æœ‰ç›¸å…³èµ„æº)ï¼›* loadï¼šä»ä¸€ä¸ª tar åŒ…ä¸­åŠ è½½ä¸€ä¸ªé•œåƒï¼›* loginï¼šæ³¨å†Œæˆ–ç™»å½•åˆ°ä¸€ä¸ª Docker çš„ä»“åº“æœåŠ¡å™¨ï¼›* logoutï¼šä» Docker çš„ä»“åº“æœåŠ¡å™¨ç™»å‡ºï¼›* logsï¼šè·å–å®¹å™¨çš„ log ä¿¡æ¯ï¼›* networkï¼šç®¡ç† Docker çš„ç½‘ç»œï¼ŒåŒ…æ‹¬æŸ¥çœ‹ã€åˆ›å»ºã€åˆ é™¤ã€æŒ‚è½½ã€å¸è½½ç­‰ï¼›* nodeï¼šç®¡ç† swarm é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ï¼ŒåŒ…æ‹¬æŸ¥çœ‹ã€æ›´æ–°ã€åˆ é™¤ã€æå‡/å–æ¶ˆç®¡ç†èŠ‚ç‚¹ç­‰ï¼›* pauseï¼šæš‚åœä¸€ä¸ªå®¹å™¨ä¸­çš„æ‰€æœ‰è¿›ç¨‹ï¼›* portï¼šæŸ¥æ‰¾ä¸€ä¸ª nat åˆ°ä¸€ä¸ªç§æœ‰ç½‘å£çš„å…¬å…±å£ï¼›* psï¼šåˆ—å‡ºä¸»æœºä¸Šçš„å®¹å™¨ï¼›* pullï¼šä»ä¸€ä¸ªDockerçš„ä»“åº“æœåŠ¡å™¨ä¸‹æ‹‰ä¸€ä¸ªé•œåƒæˆ–ä»“åº“ï¼›* pushï¼šå°†ä¸€ä¸ªé•œåƒæˆ–è€…ä»“åº“æ¨é€åˆ°ä¸€ä¸ª Docker çš„æ³¨å†ŒæœåŠ¡å™¨ï¼›* renameï¼šé‡å‘½åä¸€ä¸ªå®¹å™¨ï¼›* restartï¼šé‡å¯ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼›* rmï¼šåˆ é™¤ç»™å®šçš„è‹¥å¹²ä¸ªå®¹å™¨ï¼›* rmiï¼šåˆ é™¤ç»™å®šçš„è‹¥å¹²ä¸ªé•œåƒï¼›* runï¼šåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ï¼Œå¹¶åœ¨å…¶ä¸­è¿è¡Œç»™å®šå‘½ä»¤ï¼›* saveï¼šä¿å­˜ä¸€ä¸ªé•œåƒä¸º tar åŒ…æ–‡ä»¶ï¼›* searchï¼šåœ¨ Docker index ä¸­æœç´¢ä¸€ä¸ªé•œåƒï¼›* serviceï¼šç®¡ç† Docker æ‰€å¯åŠ¨çš„åº”ç”¨æœåŠ¡ï¼ŒåŒ…æ‹¬åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ç­‰ï¼›* startï¼šå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼›* statsï¼šè¾“å‡ºï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰å®¹å™¨çš„èµ„æºä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ï¼›* stopï¼šç»ˆæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼›* swarmï¼šç®¡ç† Docker swarm é›†ç¾¤ï¼ŒåŒ…æ‹¬åˆ›å»ºã€åŠ å…¥ã€é€€å‡ºã€æ›´æ–°ç­‰ï¼›* tagï¼šä¸ºä¸€ä¸ªé•œåƒæ‰“æ ‡ç­¾ï¼›* topï¼šæŸ¥çœ‹ä¸€ä¸ªå®¹å™¨ä¸­çš„æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ï¼›* unpauseï¼šå°†ä¸€ä¸ªå®¹å™¨å†…æ‰€æœ‰çš„è¿›ç¨‹ä»æš‚åœçŠ¶æ€ä¸­æ¢å¤ï¼›* updateï¼šæ›´æ–°æŒ‡å®šçš„è‹¥å¹²å®¹å™¨çš„é…ç½®ä¿¡æ¯ï¼›* versionï¼šè¾“å‡º Docker çš„ç‰ˆæœ¬ä¿¡æ¯ï¼›* volumeï¼šç®¡ç† Docker volumeï¼ŒåŒ…æ‹¬æŸ¥çœ‹ã€åˆ›å»ºã€åˆ é™¤ç­‰ï¼›* waitï¼šé˜»å¡ç›´åˆ°ä¸€ä¸ªå®¹å™¨ç»ˆæ­¢ï¼Œç„¶åè¾“å‡ºå®ƒçš„é€€å‡ºç¬¦ã€‚è¿›å…¥å®¹å™¨çš„æ–¹å¼ï¼šdocker attachï¼šç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ã€‚docker exec -it &lt;container&gt; bash|shdocker runå‚æ•°ï¼š-dï¼šåå°è¿è¡Œ-Pï¼šéšæœºç«¯å£æ˜ å°„-pï¼šæŒ‡å®šç«¯å£æ˜ å°„ï¼Œæœ‰ä»¥ä¸‹å››ç§æ ¼å¼ ip:hostPort:containerPort ip::containerPort hostPort:containerPort containerPort-network:æŒ‡å®šç½‘ç»œæ¨¡å¼ï¼Œæœ‰ä»¥ä¸‹å¯é€‰å‚æ•°ï¼š -network=brigde é»˜è®¤é€‰é¡¹ï¼Œè¡¨ç¤ºè¿æ¥é»˜è®¤çš„ç½‘æ¡¥ã€‚ -network=host å®¹å™¨ä½¿ç”¨å®¿ä¸»ä¸»æœºçš„ç½‘ç»œ -network=container:NAME_or_ID å‘Šè¯‰DOckerè®©æ–°å»ºçš„å®¹å™¨ä½¿ç”¨ä»¥æœ‰å®¹å™¨çš„ç½‘ç»œé…ç½® -network=none ä¸é…ç½®è¯¥å®¹å™¨çš„ç½‘ç»œï¼Œç”¨æˆ·å¯è‡ªå®šä¹‰ç½‘ç»œé…ç½®æŸ¥çœ‹è¿è¡Œçš„å®¹å™¨docker psåœæ­¢å®¹å™¨docker stopå¼ºåˆ¶åœæ­¢å®¹å™¨docker killè¿›å…¥å®¹å™¨docker attachè¿›å…¥å¯åŠ¨çš„å®¹å™¨äº¤äº’ç•Œé¢docker exec -it container-id bashåˆ é™¤å®¹å™¨docker rmå¯¼å‡ºå®¹å™¨docker export red_panda &gt; lastest.tarå¯¼å…¥å®¹å™¨docker import nignx2.tar nginxdocker rm $(docker ps -q -f status=exited)docker rmi $(docker images -q -f dangling=true)è¿›å…¥æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œ39è¡¨ç¤ºå®¹å™¨idå‰é¢å‡ ä½docker exec -it 39 /bin/bash","tags":[],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"}]},{"title":"å…³äºKPI","date":"2022-03-08T02:25:29.709Z","path":"wiki/æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†/å…³äºKPI/","text":"","tags":[{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/tags/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"}]},{"title":"å…³äºå»ºè®¾æŠ€æœ¯å›¢é˜Ÿçš„æ€è€ƒ","date":"2022-03-08T02:25:29.709Z","path":"wiki/æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†/å…³äºå»ºè®¾æŠ€æœ¯å›¢é˜Ÿçš„æ€è€ƒ/","text":"ä¸€ä¸ªå¥½çš„æŠ€æœ¯é¢†å¯¼è€…çœŸçš„å¯ä»¥ä¸ºå…¬å¸çœå¾ˆå¤šé’±ï¼Œå¯ä»¥ä¿éšœäº§å“çš„è´¨é‡ã€‚è‡ªå·±åœ¨è¿™æ¡è·¯ä¸Šè¿˜æœ‰å¾ˆå¤šè·¯è¦èµ°ï¼Œç°å°†è‡ªå·±çš„ä¸€äº›æ„Ÿæ‚Ÿè®°å½•ä¸‹æ¥ã€‚ ä¸€ä¸ªä¼˜ç§€çš„å›¢é˜Ÿï¼Œé¦–å…ˆè¦æœ‰é è°±çš„æˆå‘˜ï¼Œè‡³å°‘æ ¸å¿ƒæˆå‘˜è¦é è°±ï¼Œè¦æœ‰ä¸»è§ï¼Œè¦æƒ³å½“â€œå°†å†›â€ï¼Œè¿™æ ·ä»–æ‰èƒ½å¸¦å¥½æ‰‹ä¸‹çš„å…µã€‚ä¸€ä¸ªä¼˜ç§€çš„å›¢é˜Ÿï¼Œéœ€è¦å¥½çš„è§„èŒƒï¼Œæ— è§„çŸ©ä¸æˆæ–¹åœ†ï¼Œæœ‰äº†è§„çŸ©ï¼Œå¤§å®¶éƒ½æŒ‰ç…§è§„çŸ©æ¥åšäº‹ï¼Œèƒ½å‡å°‘å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦ï¼Œä¸ä¼šè®©æˆå‘˜è§‰å¾—æ— æ‰€é€‚ä»ã€‚ å¼€å‘æµç¨‹éœ€è¦çš„å·¥å…·ï¼šæ–‡æ¡£ç®¡ç†å·¥å…·å›¢é˜Ÿçš„äº§å“ã€è®¾è®¡ã€æŠ€æœ¯æ–‡æ¡£è¿›è¡Œæ•´ç†å½’æ¡£ï¼Œéšç€ç‰ˆæœ¬ä¸åœçš„è¿­ä»£ï¼Œå›¢é˜Ÿæˆå‘˜è¿›è¿›å‡ºå‡ºè‹¥å¹²ï¼Œå¦‚æœæ²¡æœ‰è¿™äº›æ–‡æ¡£ï¼Œä¼šéœ€è¦å¾ˆå¤šæ—¶é—´è·Ÿæ–°åŒäº‹äº¤ä»£å“ªé‡Œå“ªé‡Œæ˜¯å¹²å˜›çš„ï¼Œå“ªé‡Œå“ªé‡Œéœ€è¦æ³¨æ„ä»€ä¹ˆã€‚æœ‰äº†è¿™äº›æ–‡æ¡£ï¼Œä¸€æ–¹é¢æ–¹ä¾¿æ–°æ¥çš„åŒäº‹ï¼Œä¸€æ–¹é¢ä¹Ÿæ˜¯å¯¹ç°æœ‰æŠ€æœ¯çš„æ²‰æ·€ã€‚ æ–‡æ¡£åˆ†ä¸ºï¼š å…¬å…±æ–‡æ¡£ï¼šç”¨æ¥å­˜æ”¾å›¢é˜Ÿæ‰€æœ‰æˆå‘˜éƒ½åº”çŸ¥æ™“çš„äº‹æƒ…ï¼Œæ¯”å¦‚å›¢é˜Ÿçš„å¼€å‘æµç¨‹ï¼Œå„ä¸ªå²—ä½çš„æŒ‡è´£ï¼Œä¸€äº›è§„èŒƒæ³¨æ„äº‹é¡¹ç­‰ï¼› äº§å“æ–‡æ¡£ï¼šç”¨æ¥å­˜æ”¾äº§å“çš„ç‰ˆæœ¬è¿­ä»£è¯¦ç»†æ–‡æ¡ˆï¼Œä½¿ç”¨è¯´æ˜ç­‰ï¼› è®¾è®¡æ–‡æ¡£ï¼šç”¨æ¥å­˜æ”¾PSæºæ–‡ä»¶ï¼Œsketchæºæ–‡ä»¶ï¼Œsketchå¯¼å‡ºçš„htmlæ–‡ä»¶ï¼Œè®¾è®¡è§„èŒƒç­‰ï¼› æŠ€æœ¯æ¥å£æ–‡æ¡£ï¼šå­˜æ”¾ä¸åŒç«¯çš„API Docsï¼Œæ–¹ä¾¿å…¶ä»–ç«¯åŒäº‹æŸ¥é˜…ï¼Œç‰¹åˆ«æ˜¯åç«¯æ¥å£æ–‡æ¡£ï¼Œéå¸¸å¿…è¦ï¼› æŠ€æœ¯åšå®¢ï¼ŒæŠ€æœ¯ä¸Šçš„æ²‰æ·€èƒ½åæ˜ å‡ºä¸€å®¶å…¬å¸çš„æŠ€æœ¯åº•è•´ï¼› å„ç§releaseåŒ…çš„å­˜æ”¾ï¼Œæ–¹ä¾¿ä»¥åä½¿ç”¨ï¼Œæœ‰æ—¶å€™éœ€è¦æ‰¾åˆ°å¾ˆè€çš„ç‰ˆæœ¬æ‰¾ä¸åˆ°çš„æ—¶å€™ä¼šå¾ˆç—›è‹¦çš„ã€‚ å¦‚ä½•è¿›è¡Œç®¡ç†ï¼šç›®å‰çš„åšæ³•æ˜¯å°†æ–‡æ¡£ç»Ÿä¸€å­˜æ”¾åˆ°æœåŠ¡å™¨ä¸Šï¼ŒæœåŠ¡å™¨é€šè¿‡é…ç½®NginxæŒ‡å‘ä¸åŒçš„æ–‡ä»¶å¤¹ï¼Œé…ç½®ä¸åŒçš„åŸŸååˆ†åˆ«è¡¨ç¤ºå„ç§ç±»å‹çš„æ–‡æ¡£ã€‚ é¡¹ç›®ç®¡ç†å·¥å…· é¡¹ç›®æ•´ä¸ªå‘¨æœŸçš„æ—¶é—´è§„åˆ’ï¼› ä»»åŠ¡çš„åˆ†æ´¾ï¼Œæ‰€æœ‰äººéƒ½åº”è¯¥æŠŠè‡ªå·±çš„ä»»åŠ¡è§„åˆ’å¥½è®¡åˆ’å¼€å§‹ã€ç»“æŸæ—¶é—´ï¼Œå®é™…å¼€å§‹ã€ç»“æŸæ—¶é—´ï¼› é¡¹ç›®éœ€è¦ä¸€ä¸ªäººæ¥è·Ÿè¸ªè¿›åº¦ï¼Œæ¯å¤©æ±‡æ€»ã€ç»Ÿè®¡ï¼ŒåŒæ­¥ç»™é¡¹ç›®ç›¸å…³çš„æ‰€æœ‰äººï¼Œå‘ç°é—®é¢˜åŠæ—¶è°ƒæ•´ï¼›ï¼ˆè¿™æ ·åšçš„ç›®çš„æ˜¯è®©å¤§å®¶å½¼æ­¤çŸ¥é“å¤§å®¶çš„è¿›å±•ï¼Œç£ä¿ƒè‡ªå·±æŒ‰æ—¶å®Œæˆè‡ªå·±çš„ä»»åŠ¡ï¼Œç®¡ç†äººå‘˜ä¹Ÿå¥½æ ¹æ®å®é™…æƒ…å†µè°ƒé…ï¼‰ è‡ªåŠ¨æ„å»ºã€æŒç»­é›†æˆå·¥å…·Jenkinsè‡ªåŠ¨æ„å»ºï¼Œæ¯”èµ·æœ¬åœ°æ„å»ºï¼Œä¸ä¾èµ–ä¸ªäººæœºå™¨çš„ç¯å¢ƒï¼Œç›¸åº”æœ‰æƒé™çš„äººéƒ½å¯ä»¥è¿›è¡Œæ„å»ºã€‚ Bugç»Ÿè®¡ã€ç®¡ç†å·¥å…·å‹ç›Ÿç­‰ç¬¬ä¸‰æ–¹ç»Ÿè®¡ æŒç»­éƒ¨ç½²å·¥å…·Docker Kubernetes æŠ€æœ¯ç®¡ç†OKRsåˆ¶å®šç›®æ ‡ï¼Œç›®æ ‡æ‹†åˆ†ï¼Œåˆ¶å®šå…³é”®èŠ‚ç‚¹ï¼Œæ ¸å¯¹ç»“æœã€‚ Review Codeä»£ç Reviewï¼Œæå‡ä»£ç è´¨é‡ Unit Testå•å…ƒæµ‹è¯•ï¼Œå‡å°‘bugæ•° æŠ€æœ¯åˆ†äº«æŠ€æœ¯æ²‰æ·€ ä¸€äº›æ„Ÿæ‚Ÿé‡‘æ— è¶³èµ¤ã€äººæ— å®Œäººï¼Œæƒ³è¦å›¢é˜Ÿå†…æ‰€æœ‰çš„äººéƒ½ç§¯æä¸»åŠ¨ï¼ŒæŠŠå·¥ä½œå½“æˆè‡ªå·±ç”Ÿå‘½ä¸­å¾ˆé‡è¦çš„ä¸œè¥¿æ˜¯å¾ˆå›°éš¾çš„ã€‚æ‰€ä»¥æ‰éœ€è¦ç®¡ç†ï¼Œéœ€è¦è§„åˆ™ã€‚è®©å¤§å®¶åŠªåŠ›å·¥ä½œçš„å‡ ä¸ªæ ¸å¿ƒï¼š èµç½šåˆ†æ˜ã€‚ä¸”è¦åŠ å¤§åŠ›åº¦ï¼Œå¦‚æœåšçš„å¾ˆå¥½ï¼Œæ‰å¥–åŠ±å‡ ç™¾å—ï¼Œå‡ºäº†äº‹æ•…å°±æ‰¹è¯„ä¸€ä¸‹ï¼›ä¼šè®©å¤§å®¶å˜çš„ä¸åœ¨ä¹ã€‚æ‰€ä»¥ä¸€å®šè¦åŠ å¤§èµç½šåŠ›åº¦ã€‚è®©å¤§å®¶æ„Ÿè§‰æœ‰å¥”å¤´ï¼Œæ¯”å¦‚å¦‚æœèƒ½å®Œæˆå…¨å¹´KPIï¼Œå¥–é‡‘å°±èƒ½è¶…è¿‡åŸºæœ¬å·¥èµ„ï¼Œé‚£å¤§å®¶ä¸€å®šä¼šæƒ³å°½åŠæ³•æ¥å®Œæˆå®ƒã€‚å¦‚æœå‡ºç°ä¸¥é‡çš„bugï¼Œä¼šä¸¥å‰æ‰¹è¯„ï¼Œæ‰£å¥–é‡‘ï¼›æ›´ä¸¥é‡çš„ä¼šè®©ä½ ç›´æ¥èµ°äººã€‚é‚£ä¹ˆå¤§å®¶å°±ä¼šé‡è§†è‡ªå·±çš„æ¯ä¸€è¡Œä»£ç äº†ã€‚ æ¯”è¾ƒå¼ºåŠ¿çš„å›¢é˜Ÿæ–‡åŒ–ã€‚ä¸€ä¸ªå¥½çš„å›¢é˜Ÿï¼Œæ˜¯éœ€è¦ç‹¼æ€§çš„ï¼Œä¸ºäº†ç›®æ ‡å°±åº”è¯¥å…¨åŠ›ä»¥èµ´ã€‚è€Œä¸æ˜¯æ‹–æ‹–æ‹‰æ‹‰ã€‚å½“ç„¶ï¼Œé€‚å½“çš„è°ƒæ•´ä¹Ÿæ˜¯æœ‰å¿…è¦çš„ï¼Œå¦‚æœä¸€ç›´åœ¨å¼ºå‹åŠ›å·¥ä½œä¸‹ï¼Œäººä¹Ÿä¼šå—ä¸äº†çš„ã€‚è¿™æ˜¯ç›¸è¾…ç›¸æˆçš„ã€‚ å…³äºéœ€æ±‚å˜åŠ¨åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œéœ€æ±‚çš„å˜åŠ¨æ˜¯å¾ˆæ­£å¸¸çš„ã€‚ä½†å› æ­¤å¸¦æ¥çš„å½±å“åˆ™éœ€è¦å¥½å¥½åˆ†æï¼Œè€Œä¸æ˜¯ä¸€å‘³çš„æ¥äº†éœ€æ±‚å°±å®‰æ’ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå‘¨æœŸçš„éœ€æ±‚å®šå¥½ä¹‹åï¼Œå›¢é˜Ÿä¸­æ‰€æœ‰äººçš„å·¥ä½œå®‰æ’åº”è¯¥éƒ½æ˜¯100%æ»¡è´Ÿè·çš„ã€‚å¦‚æœåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæœ‰éœ€æ±‚è¦ä¿®æ”¹æˆ–è€…æ–°å¢ï¼Œåˆ™è¦ä¹ˆç‰ˆæœ¬çš„å‘¨æœŸè¿›è¡Œè°ƒæ•´ï¼Œè¦ä¹ˆå¤§å®¶åŠ ç­åŠ ç‚¹æŠŠå®ƒåšå®Œã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä¼šå…ˆè¯„ä¼°æ”¹åŠ¨å¯¹æ•´ä¸ªå‘¨æœŸé€ æˆçš„å½±å“ï¼Œå¦‚æœå½±å“å¹¶ä¸å¤§ï¼Œåˆ™ä¼šå®‰æ’äººå‘˜åœ¨å‘¨æœŸå†…è¿›è¡Œæ¶ˆåŒ–ï¼›å¦‚æœæ¶ˆåŒ–ä¸äº†ï¼Œä¹Ÿæ˜¯ä¸å»ºè®®ä¿®æ”¹ç‰ˆæœ¬å‘¨æœŸçš„ã€‚å¦‚æœå› ä¸ºä¸ªåˆ«çš„æ”¹åŠ¨ï¼Œé€ æˆå¤§éƒ¨åˆ†äººçš„å½±å“æ˜¯ä¸å€¼å¾—çš„ã€‚æ¯”å¦‚ï¼Œå¼€å‘å›¢é˜Ÿ30äººï¼Œæ–°å¢çš„éœ€æ±‚éœ€è¦3ä¸ªäººå¼€å‘3å¤©ï¼Œå¦‚æœå°†å‘¨æœŸå»¶å3å¤©ï¼Œåˆ™å…¶ä»–27äººæ˜¯è¦é‡æ–°å®‰æ’å·¥ä½œçš„ã€‚å¦‚æœç»å¸¸å‡ºç°éœ€æ±‚å˜åŠ¨çš„æ—¶å€™ï¼Œå°±åº”è¯¥æ€è€ƒéœ€æ±‚æå‡ºè€…æ˜¯ä¸æ˜¯æ²¡æœ‰æŠŠæœ¬èŒå·¥ä½œåšå¥½ã€‚ æŒ‰èŒèƒ½è¿˜æ˜¯æŒ‰ä¸šåŠ¡æ¥åˆ†é…å­å›¢é˜Ÿä¸åŒäººæ•°çš„å›¢é˜Ÿ å¦‚ä½•è¿›è¡Œè‰¯å¥½çš„æ²Ÿé€šæ‰€æœ‰äº‹æƒ…æœ‰å¼€å§‹æœ‰ç»“æŸã€‚å½“ä½ æŠŠä¸€ä»¶äº‹æƒ…äº¤ä»£ç»™æŸä¸€ä¸ªäººæ—¶ï¼Œé¦–å…ˆè¦æè¿°æ¸…æ¥šè‡ªå·±æƒ³è¦çš„ç»“æœï¼Œç„¶åè®©å¯¹æ–¹æ˜ç¡®æ˜¯å¦æ˜ç™½ï¼Œå†ç¡®è®¤æœ€åå®Œæˆæ—¶é—´ã€‚ä½œä¸ºæ”¶åˆ°ä»»åŠ¡çš„ä¸€æ–¹ï¼Œä¹Ÿåº”è¯¥æŠŠè‡ªå·±çš„ç†è§£è¡¨è¾¾æ¸…æ¥šï¼ŒåŒæ–¹è¾¾æˆä¸€è‡´ï¼›æœ€å¥½èƒ½åœ¨deadlineä¹‹å‰å°±æ‰¾éœ€æ±‚æ–¹å‘ŠçŸ¥ç»“æœï¼Œè€Œä¸æ˜¯è¸©ç€æ—¶é—´çº¿ç”šè‡³å»¶æœŸå‘ŠçŸ¥ã€‚ å¦‚ä½•å¸¦æ–°äººå¯¹äºåˆšè¿›æ¥çš„åŒäº‹ï¼Œåº”è¯¥å‡†å¤‡ä¸€ä»½è¯¦ç»†çš„æ³¨æ„äº‹é¡¹ã€‚æ¯”å¦‚æˆ‘ä»¬çš„å¼€å‘æµç¨‹æ˜¯æ€æ ·çš„ï¼›æœ‰é‚£äº›è´¦å·éœ€è¦ç”³è¯·ï¼Œç”³è¯·æµç¨‹ï¼›å¸¸ç”¨çš„å·¥å…·ï¼Œå·¥å…·çš„ä½¿ç”¨æ–‡æ¡£ã€ä¸‹è½½åœ°å€ï¼›è¿˜æœ‰è®¸å¤šå¹³å¸¸å¼€å‘ä¸­å¸¸è§çš„é—®é¢˜ã€‚æœ‰è¿™æ ·ä¸€ä»½æ–‡æ¡£ï¼Œæ–°äººä¹Ÿä¸éœ€è¦ä¸€é‡åˆ°é—®é¢˜å°±æ¥æ‰¾ä½ ï¼Œä¹ŸèŠ‚çœäº†ä½ çš„æ—¶é—´ã€‚","tags":[{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/tags/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"}]},{"title":"Proxifierä½¿ç”¨","date":"2022-03-08T02:25:29.707Z","path":"wiki/å·¥å…·è½¯ä»¶/Proxifierä½¿ç”¨/","text":"Proxifierçš„ä½œç”¨ï¼šè®©ç”µè„‘ä¸Šçš„è½¯ä»¶çš„ç½‘ç»œè¯·æ±‚å…ˆç»è¿‡ä»£ç†ï¼Œå¯ç”¨äºç¿»å¢™ã€æ¥å£æŠ“å–ç­‰ã€‚ è®¾ç½®Proxiesè®¾ç½®Serverè®¾ç½®ä¸ºä»£ç†å¯¹åº”çš„IPåœ°å€ï¼Œæœ¬åœ°ä½¿ç”¨localhost&#x2F;127.0.0.1 Protocolå¯è®¾ç½®ä¸ºSocksæˆ–https Rulesè®¾ç½®å¯ä»¥åšä¸€äº›ä¸ªæ€§åŒ–è®¾ç½®ï¼Œæ¯”å¦‚æŸäº›åº”ç”¨ä¸èµ°ä»£ç† å‚è€ƒ https://xiandan.in/posts/mac-global-proxy.html https://www.hizxc.com/1546.html","tags":[],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"å±å¹•æˆªå›¾å·¥å…·","date":"2022-03-08T02:25:29.707Z","path":"wiki/å·¥å…·è½¯ä»¶/å±å¹•æˆªå›¾å·¥å…·/","text":"å¹³æ—¶å·¥ä½œä¸­æœ‰å¾ˆå¤šåœºæ™¯éœ€è¦ä½¿ç”¨å±å¹•æˆªå›¾ï¼ŒåŸæ¥ä¸€ç›´ä½¿ç”¨QQè‡ªå¸¦çš„æˆªå›¾åŠŸèƒ½ã€‚è™½ç„¶åŠŸèƒ½ä¸æ˜¯å¾ˆå…¨ï¼Œä½†ä¹Ÿå¤Ÿäº†ã€‚ä½†ç”±äºå…¶æ˜¯QQçš„ä¸€ä¸ªå­åŠŸèƒ½ï¼Œæ¯æ¬¡ä¸€å®šè¦å¯åŠ¨QQæ‰èƒ½ä½¿ç”¨ã€‚äºæ˜¯æƒ³çœ‹æœ‰æœ¨æœ‰æ›´åŠ æ–¹ä¾¿å¥½ç”¨çš„æˆªå›¾è½¯ä»¶ã€‚ è¿™é‡Œæ¨èä¸¤æ¬¾è‡ªè®¤ä¸ºä¸é”™çš„å·¥å…·ï¼š Snagitä¸»è¦åŠŸèƒ½ï¼š æ•è·çª—å£æˆªå›¾ åŒºåŸŸæˆªå›¾ å…¨å±å¹•æˆªå›¾ æŠ“å–æ–‡å­— å±å¹•å½•åƒ æ•è·æ»šåŠ¨çª—å£ FSCaptureä¸»è¦åŠŸèƒ½ï¼š æ•è·çª—å£æˆªå›¾ åŒºåŸŸæˆªå›¾ å…¨å±å¹•æˆªå›¾ æŠ“å–æ–‡å­— å±å¹•å½•åƒ æ•è·æ»šåŠ¨çª—å£ æ•è·æ‰‹ç»˜åŒºåŸŸ QQæˆªå±ç‹¬ç«‹ç‰ˆåŒ…å«æ‰€éœ€çš„åŸºæœ¬åŠŸèƒ½ï¼Œä¸”å¯æ‰§è¡Œæ–‡ä»¶å¾ˆå°ï¼Œä¸åˆ°800Kã€‚æ·»åŠ æ¡Œé¢å¿«æ·æ–¹å¼ï¼Œé…ç½®å¥½å¿«æ·é”®åï¼Œä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚ ä¸‹è½½åœ°å€ï¼š","tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"æ–‡æœ¬ç¼–è¾‘å·¥å…·Sublime Text","date":"2022-03-08T02:25:29.707Z","path":"wiki/å·¥å…·è½¯ä»¶/æ–‡æœ¬ç¼–è¾‘å·¥å…·Sublime Text/","text":"Markdownç¯å¢ƒæ­å»ºå®‰è£…æ‰©å±•MarkdownEditingä¸‹è½½åœ°å€ï¼š https://github.com/SublimeText-Markdown/MarkdownEditing å¿«æ·é”® Windows&#x2F;Linux æè¿° CtrlAltV Creates or pastes the contents of the clipboard as an inline link on selected text. CtrlAltR Creates or pastes the contents of the clipboard as a reference link. ShiftWinK Creates or pastes the contents of the clipboard as an inline image on selected text. AltB AltI These are bound to bold and italic. They work both with and without selections. If there is no selection, they will just transform the word under the cursor. These keybindings will unbold&#x2F;unitalicize selection if it is already bold&#x2F;italic. Ctrl1...6 These will add the corresponding number of hashmarks for headlines. Works on blank lines and selected text in tandem with the above headline tools. If you select an entire existing headline, the current hashmarks will be removed and replaced with the header level you requested. This command respects the mde.match_header_hashes preference setting. AltShift6 Inserts a footnote. ShiftTab Fold&#x2F;Unfold current section. CtrlShiftTab Fold all sections under headings of a certain level. CtrlAltShiftPageUp CtrlAltShiftPageDown Go to the previous&#x2F;next heading of the same or higher level CtrlShiftPageUp CtrlShiftPageDown Go to the previous&#x2F;next heading CtrlShiftH Open home page CtrlShiftD Open wiki page under the cursor CtrlShiftJ Open journal page for today CtrlShiftB List back links è¡¨æ ¼ç¼–è¾‘æ’ä»¶ä¸‹è½½åœ°å€ï¼š https://packagecontrol.io/packages/Table%20Editor PHPç¯å¢ƒæ­å»ºPythonç¯å¢ƒæ­å»ºå®‰è£…Anacondaæ’ä»¶(ä»£ç æç¤ºã€è‡ªåŠ¨è¡¥å…¨ã€æ ¼å¼åŒ–)//å¿«æ·é”®é…ç½® [ &#123; &quot;command&quot;: &quot;anaconda_goto&quot;, &quot;keys&quot;: [&quot;ctrl+alt+g&quot;], &quot;context&quot;: [ &#123;&quot;key&quot;: &quot;selector&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: &quot;source.python&quot;&#125; ]&#125;, &#123; &quot;command&quot;: &quot;anaconda_find_usages&quot;, &quot;keys&quot;: [&quot;ctrl+alt+f&quot;], &quot;context&quot;: [ &#123;&quot;key&quot;: &quot;selector&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: &quot;source.python&quot;&#125; ]&#125;, &#123; &quot;command&quot;: &quot;anaconda_doc&quot;, &quot;keys&quot;: [&quot;ctrl+alt+d&quot;], &quot;context&quot;: [ &#123;&quot;key&quot;: &quot;selector&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: &quot;source.python&quot;&#125; ]&#125;, //æ ¼å¼åŒ– &#123; &quot;command&quot;: &quot;anaconda_auto_format&quot;, &quot;keys&quot;: [&quot;ctrl+alt+r&quot;], &quot;context&quot;: [ &#123;&quot;key&quot;: &quot;selector&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: &quot;source.python&quot;&#125; ]&#125;, &#123; &quot;command&quot;: &quot;anaconda_fill_funcargs&quot;, &quot;keys&quot;: [&quot;tab&quot;], &quot;context&quot;: [ &#123;&quot;key&quot;: &quot;selector&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: &quot;source.python&quot;&#125;, &#123;&quot;key&quot;: &quot;anaconda_insert_funcargs&quot;&#125; ]&#125;, &#123; &quot;command&quot;: &quot;anaconda_fill_funcargs&quot;, &quot;keys&quot;: [&quot;ctrl+tab&quot;], &quot;args&quot;: &#123;&quot;all&quot;: true&#125;, &quot;context&quot;: [ &#123;&quot;key&quot;: &quot;selector&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: &quot;source.python&quot;&#125;, &#123;&quot;key&quot;: &quot;anaconda_insert_funcargs&quot;&#125; ]&#125; ] é…ç½®Pythonè§£é‡Šå™¨æ‰“å¼€Preferences--&gt;Package Settings--&gt;Anaconda--&gt;Settings-User &#123; //è®¾ç½®pythonè§£é‡Šå™¨è·¯å¾„ &quot;python_interpreter&quot;: &quot;D:\\\\Python\\\\Python364-64\\\\python.exe&quot;, &quot;suppress_word_completions&quot;: true, &quot;suppress_explicit_completions&quot;: true, &quot;complete_parameters&quot;: true, &quot;anaconda_linting&quot;: false &#125; Sublimeä¸­consoleäº¤äº’ï¼Œå®‰è£…SublimeREPLé…ç½®SUblimeREPLå¿«æ·é”®1. Preferences--&gt;Browse Packages--&gt;SublimeREPLæ–‡ä»¶å¤¹--&gt;configæ–‡ä»¶å¤¹--&gt;Pythonæ–‡ä»¶å¤¹--&gt;Default.sublime-commands 2. æ‰¾åˆ°å¯¹åº”çš„commandï¼Œæ·»åŠ åˆ°Preferences--&gt;Key Bindings Userä¸­ã€‚ &#123; &quot;keys&quot;: [&quot;f5&quot;], &quot;command&quot;: &quot;run_existing_window_command&quot;, &quot;args&quot;: &#123; &quot;id&quot;: &quot;repl_python&quot;, &quot;file&quot;: &quot;config/Python/Main.sublime-menu&quot; &#125; &#125;, å¦‚ä½•è®¾ç½®å¿«æ·é”®æ‰“å¼€Preferences--&gt;Key Bindingsï¼Œå¯¹äºå‘è¦å®šä¹‰è‡ªå·±å–œå¥½çš„å¿«æ·é”®çš„æ“ä½œï¼Œå¤åˆ¶å·¦è¾¹é»˜è®¤çš„é…ç½®åˆ°ç”¨æˆ·æ ï¼Œè¿›è¡Œä¿®æ”¹ã€‚ å¦‚ä½•ä¿®æ”¹é»˜è®¤é…ç½®æ‰“å¼€Preferences--&gt;Settingsï¼Œé‡å†™é»˜è®¤é…ç½®å³å¯ã€‚ Sublime æ’ä»¶Anaconda:Pythonæ’ä»¶ CodeFormatterï¼šä»£ç æç¤ºæ’ä»¶ ConvertToUTF8 SublimeCodeIntel Markdown Previewï¼šMarkdowné¢„è§ˆæ’ä»¶ Emmetï¼šHTML/CSSä»£ç å¿«é€Ÿç¼–å†™æ’ä»¶ SublimeLinterï¼šä»£ç æ£€æµ‹æ’ä»¶ SideBarEnhancementsï¼šä¾§è¾¹æ æ‰©å±• PackageResourceViewerï¼šSublimeé…ç½®ç®¡ç†æ’ä»¶,é€‰æ‹©Open Resource,é€‰æ‹©å¯¹åº”çš„é…ç½®è¿›è¡Œä¿®æ”¹ Boxy Theme:æ ·å¼æ’ä»¶ Terminalï¼šåœ¨Sublimeä¸­æ‰“å¼€ç»ˆç«¯ CTagsï¼š[ä»£ç è·³è½¬](https://my.oschina.net/u/1024767/blog/495282) http://ctags.sourceforge.net/ Sublime PHP Companion All Autocomplete DocBlockr SublimeAStyleFormatterï¼šC, C++, C#, å’Œ Javaæ–‡ä»¶æ ¼å¼åŒ– å¦‚ä½•å¤‡ä»½æ’ä»¶å¤‡ä»½Preferencesâ€“&gt;Browse Packagesçš„å†…å®¹ å±æ€§é…ç½®&#123; //é»˜è®¤å­—ä½“å¤§å° &quot;font_size&quot;: 10, &quot;ignored_packages&quot;: [ &quot;Vintage&quot; ], //æ˜¯å¦æ£€æŸ¥æ›´æ–° &quot;update_check&quot;: &quot;false&quot;, //æ˜¾ç¤ºç©ºæ ¼ç¬¦å· // &quot;draw_white_space&quot;: &quot;all&quot;, &#125; å¸¸ç”¨å¿«æ·é”®é…ç½®[ //è·³è½¬åˆ°å®šä¹‰ &#123; &quot;keys&quot;: [&quot;f3&quot;], &quot;command&quot;: &quot;goto_definition&quot; &#125;, //åˆ é™¤å½“å‰è¡Œ &#123; &quot;keys&quot;: [&quot;ctrl+d&quot;], &quot;command&quot;: &quot;run_macro_file&quot;, &quot;args&quot;: &#123;&quot;file&quot;: &quot;res://Packages/Default/Delete Line.sublime-macro&quot;&#125; &#125;, //back &#123; &quot;keys&quot;: [&quot;alt+left&quot;], &quot;command&quot;: &quot;jump_back&quot; &#125;, //forward &#123; &quot;keys&quot;: [&quot;alt+right&quot;], &quot;command&quot;: &quot;jump_forward&quot; &#125;, //ç§»åŠ¨å½“å‰è¡Œåˆ°ä¸Šä¸€è¡Œ &#123; &quot;keys&quot;: [&quot;alt+up&quot;], &quot;command&quot;: &quot;swap_line_up&quot; &#125;, //ç§»åŠ¨å½“å‰è¡Œåˆ°ä¸‹ä¸€è¡Œ &#123; &quot;keys&quot;: [&quot;alt+down&quot;], &quot;command&quot;: &quot;swap_line_down&quot; &#125;, &#123; &quot;keys&quot;: [&quot;ctrl+alt+f&quot;], &quot;command&quot;: &quot;reindent&quot; &#125;, // è‡ªåŠ¨æç¤ºã€è¡¥å…¨ &#123; &quot;keys&quot;: [&quot;alt+/&quot;], &quot;command&quot;: &quot;auto_complete&quot;&#125;, //ä»£ç æç¤º &#123; &quot;keys&quot;: [&quot;alt+/&quot;], &quot;command&quot;: &quot;replace_completion_with_auto_complete&quot;, &quot;context&quot;: [&#123; &quot;key&quot;: &quot;last_command&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: &quot;insert_best_completion&quot; &#125;, &#123; &quot;key&quot;: &quot;auto_complete_visible&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: false &#125;, &#123; &quot;key&quot;: &quot;setting.tab_completion&quot;, &quot;operator&quot;: &quot;equal&quot;, &quot;operand&quot;: true &#125;] &#125;, //Ctrl+l é€‰ä¸­å½“å‰è¡Œ //ç¼–è¯‘å½“å‰è„šæœ¬ &#123; &quot;keys&quot;: [&quot;ctrl+b&quot;], &quot;command&quot;: &quot;build&quot; &#125;, //éšè—Side Barå¼€å…³ &#123; &quot;keys&quot;: [&quot;ctrl+k&quot;], &quot;command&quot;: &quot;toggle_side_bar&quot; &#125;, //å‘å·¦ç¼©è¿› &#123; &quot;keys&quot;: [&quot;ctrl+]&quot;], &quot;command&quot;: &quot;indent&quot; &#125;, //å‘å³ç¼©è¿› &#123; &quot;keys&quot;: [&quot;ctrl+[&quot;], &quot;command&quot;: &quot;unindent&quot; &#125;, //åˆ—å‡ºå½“å‰æ‰“å¼€çš„æ–‡ä»¶ &#123; &quot;keys&quot;: [&quot;ctrl+p&quot;], &quot;command&quot;: &quot;show_overlay&quot;, &quot;args&quot;: &#123;&quot;overlay&quot;: &quot;goto&quot;, &quot;show_files&quot;: true&#125; &#125;, &#123; &quot;keys&quot;: [&quot;ctrl+shift+p&quot;], &quot;command&quot;: &quot;show_overlay&quot;, &quot;args&quot;: &#123;&quot;overlay&quot;: &quot;command_palette&quot;&#125; &#125;, //è·³è½¬åˆ°ç¬¦å· &#123; &quot;keys&quot;: [&quot;ctrl+r&quot;], &quot;command&quot;: &quot;show_overlay&quot;, &quot;args&quot;: &#123;&quot;overlay&quot;: &quot;goto&quot;, &quot;text&quot;: &quot;@&quot;&#125; &#125;, //è·³è½¬åˆ°è¡Œ &#123; &quot;keys&quot;: [&quot;ctrl+g&quot;], &quot;command&quot;: &quot;show_overlay&quot;, &quot;args&quot;: &#123;&quot;overlay&quot;: &quot;goto&quot;, &quot;text&quot;: &quot;:&quot;&#125; &#125;, &#123; &quot;keys&quot;: [&quot;ctrl+;&quot;], &quot;command&quot;: &quot;show_overlay&quot;, &quot;args&quot;: &#123;&quot;overlay&quot;: &quot;goto&quot;, &quot;text&quot;: &quot;#&quot;&#125; &#125;, //å¿«é€Ÿåœ¨èµ·å§‹æ‹¬å·å’Œç»“å°¾æ‹¬å·é—´åˆ‡æ¢ &#123; &quot;keys&quot;: [&quot;ctrl+m&quot;], &quot;command&quot;: &quot;move_to&quot;, &quot;args&quot;: &#123;&quot;to&quot;: &quot;brackets&quot;&#125; &#125;, //é€‰æ‹©æ‹¬å·é—´çš„å†…å®¹ &#123; &quot;keys&quot;: [&quot;ctrl+shift+m&quot;], &quot;command&quot;: &quot;expand_selection&quot;, &quot;args&quot;: &#123;&quot;to&quot;: &quot;brackets&quot;&#125; &#125;, //å½“å‰è¡Œä¸‹é¢æ–°å¢ä¸€è¡Œå¹¶è·³è‡³è¯¥è¡Œ &#123; &quot;keys&quot;: [&quot;ctrl+enter&quot;], &quot;command&quot;: &quot;run_macro_file&quot;, &quot;args&quot;: &#123;&quot;file&quot;: &quot;res://Packages/Default/Add Line.sublime-macro&quot;&#125; &#125;, //å½“å‰è¡Œä¸Šé¢æ–°å¢ä¸€è¡Œå¹¶è°ƒè‡³è¯¥è¡Œ &#123; &quot;keys&quot;: [&quot;ctrl+shift+enter&quot;], &quot;command&quot;: &quot;run_macro_file&quot;, &quot;args&quot;: &#123;&quot;file&quot;: &quot;res://Packages/Default/Add Line Before.sublime-macro&quot;&#125; &#125;, //è¿›è¡Œé€è¯ç§»åŠ¨ &#123; &quot;keys&quot;: [&quot;ctrl+left&quot;], &quot;command&quot;: &quot;move&quot;, &quot;args&quot;: &#123;&quot;by&quot;: &quot;words&quot;, &quot;forward&quot;: false&#125; &#125;, &#123; &quot;keys&quot;: [&quot;ctrl+right&quot;], &quot;command&quot;: &quot;move&quot;, &quot;args&quot;: &#123;&quot;by&quot;: &quot;word_ends&quot;, &quot;forward&quot;: true&#125; &#125;, //é€è¯é€‰æ‹© &#123; &quot;keys&quot;: [&quot;ctrl+shift+left&quot;], &quot;command&quot;: &quot;move&quot;, &quot;args&quot;: &#123;&quot;by&quot;: &quot;words&quot;, &quot;forward&quot;: false, &quot;extend&quot;: true&#125; &#125;, &#123; &quot;keys&quot;: [&quot;ctrl+shift+right&quot;], &quot;command&quot;: &quot;move&quot;, &quot;args&quot;: &#123;&quot;by&quot;: &quot;word_ends&quot;, &quot;forward&quot;: true, &quot;extend&quot;: true&#125; &#125;, //ä¸Šä¸‹ç§»åŠ¨å½“å‰æ˜¾ç¤ºåŒºåŸŸ &#123; &quot;keys&quot;: [&quot;ctrl+up&quot;], &quot;command&quot;: &quot;scroll_lines&quot;, &quot;args&quot;: &#123;&quot;amount&quot;: 1.0 &#125; &#125;, &#123; &quot;keys&quot;: [&quot;ctrl+down&quot;], &quot;command&quot;: &quot;scroll_lines&quot;, &quot;args&quot;: &#123;&quot;amount&quot;: -1.0 &#125; &#125;, //ç§»åŠ¨å½“å‰è¡Œ &#123; &quot;keys&quot;: [&quot;ctrl+shift+up&quot;], &quot;command&quot;: &quot;swap_line_up&quot; &#125;, &#123; &quot;keys&quot;: [&quot;ctrl+shift+down&quot;], &quot;command&quot;: &quot;swap_line_down&quot; &#125;, //åˆ é™¤å½“å‰ &#123; &quot;keys&quot;: [&quot;ctrl+shift+k&quot;], &quot;command&quot;: &quot;run_macro_file&quot;, &quot;args&quot;: &#123;&quot;file&quot;: &quot;res://Packages/Default/Delete Line.sublime-macro&quot;&#125; &#125;, //Ctrl + Dé€‰æ‹©å½“å‰å…‰æ ‡æ‰€åœ¨çš„è¯å¹¶é«˜äº®è¯¥è¯æ‰€æœ‰å‡ºç°çš„ä½ç½®ï¼Œå†æ¬¡Ctrl + Dé€‰æ‹©è¯¥è¯å‡ºç°çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼Œåœ¨å¤šé‡é€‰è¯çš„è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨Ctrl + Kè¿›è¡Œè·³è¿‡ï¼Œä½¿ç”¨Ctrl + Uè¿›è¡Œå›é€€ï¼Œä½¿ç”¨Escé€€å‡ºå¤šé‡ç¼–è¾‘ã€‚ &#123; &quot;keys&quot;: [&quot;ctrl+d&quot;], &quot;command&quot;: &quot;find_under_expand&quot; &#125;, &#123; &quot;keys&quot;: [&quot;ctrl+k&quot;, &quot;ctrl+d&quot;], &quot;command&quot;: &quot;find_under_expand_skip&quot; &#125;, //æ‰“æ•£æ‰€é€‰åŒºåŸŸ &#123; &quot;keys&quot;: [&quot;ctrl+shift+l&quot;], &quot;command&quot;: &quot;split_selection_into_lines&quot; &#125;, //å°†é€‰ä¸­åŒºåŸŸåˆå¹¶ä¸ºä¸€è¡Œ &#123; &quot;keys&quot;: [&quot;ctrl+j&quot;], &quot;command&quot;: &quot;join_&lt;l&gt;&lt;/l&gt;ines&quot; &#125;, //é€‰æ‹©è¡Œ &#123; &quot;keys&quot;: [&quot;ctrl+l&quot;], &quot;command&quot;: &quot;expand_selection&quot;, &quot;args&quot;: &#123;&quot;to&quot;: &quot;line&quot;&#125; &#125;, //æŠŠé€‰åŒºåˆ†å‰² &#123; &quot;keys&quot;: [&quot;ctrl+shift+l&quot;], &quot;command&quot;: &quot;split_selection_into_lines&quot; &#125;, ] å¦‚ä½•è‡ªå®šä¹‰æ’ä»¶ å¦‚ä½•è‡ªå®šä¹‰ä»£ç å— å¦‚ä½•è‡ªå®šä¹‰è¯­æ³• å‚è€ƒå®˜æ–¹æ–‡æ¡£ Sublime Textéå®˜æ–¹æ–‡æ¡£ Sublime Text3æ–‡æ¡£","tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"Windowsä¼˜ç§€çš„å·¥å…·è½¯ä»¶","date":"2022-03-08T02:25:29.707Z","path":"wiki/å·¥å…·è½¯ä»¶/Windowsä¼˜ç§€çš„å·¥å…·è½¯ä»¶/","text":"æ–‡ä»¶è§£é”å·¥å…· é­”æ–¹è§£é”ç‹¬ç«‹ç‰ˆ å†…å­˜ã€CPUç›‘æ§å·¥å…·TrafficMonitor ä»‹ç»ï¼šhttps://www.appinn.com/trafficmonitor/ Githubåœ°å€ï¼šhttps://github.com/zhongyang219/TrafficMonitor æ–‡ä»¶ç®¡ç†å·¥å…·TotalCommand å®˜ç½‘åœ°å€ï¼šhttps://www.ghisler.com/ æ–‡ä»¶æœç´¢å·¥å…·Everything å®˜ç½‘åœ°å€ï¼šhttp://www.voidtools.com/ å‰ªåˆ‡æ¿å¢å¼ºå·¥å…·Ditto å®˜ç½‘åœ°å€ï¼šhttps://ditto-cp.sourceforge.io/ å±å¹•æˆªå›¾å·¥å…· Snagit FSCapture ç›¸å…³ä»‹ç» é¢œè‰²å¸å–å·¥å…·getcolor! ä¸‹è½½åœ°å€ï¼š https://www.wincatalog.com/getcolor.html","tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"Chromeæ’ä»¶æ¨è","date":"2022-03-08T02:25:29.706Z","path":"wiki/å·¥å…·è½¯ä»¶/Chromeæ’ä»¶æ¨è/","text":"Proxy SwitchyOmegaVPNä»£ç† Clear Cacheæ¸…ç†ç¼“å­˜ DJSON ViewerJSONæ ¼å¼åŒ–æ˜¾ç¤º Gitlab TreeViewGitlabæ–‡ä»¶å¤¹æ ‘å½¢æ˜¾ç¤º Last Passè®°å½•å¯†ç  Extensityæ‰©å±•æ˜¾ç¤ºç®¡ç† LighthouseLighthouse æ˜¯ Google å¼€æºçš„ä¸€ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ï¼Œç”¨äºæ”¹è¿›ç½‘ç»œåº”ç”¨çš„è´¨é‡ã€‚ä½ å¯ä»¥å°†å…¶ä½œä¸ºä¸€ä¸ª Chrome æ‰©å±•ç¨‹åºè¿è¡Œï¼Œæˆ–ä»å‘½ä»¤è¡Œè¿è¡Œã€‚ å½“ä¸º Lighthouseæä¾›ä¸€ä¸ªè¦å®¡æŸ¥çš„ç½‘å€ï¼Œå®ƒå°†é’ˆå¯¹æ­¤é¡µé¢è¿è¡Œä¸€è¿ä¸²çš„æµ‹è¯•ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªæœ‰å…³é¡µé¢æ€§èƒ½çš„æŠ¥å‘Šã€‚","tags":[{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"}],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"tushare","date":"2022-03-08T02:25:29.696Z","path":"wiki/Python/tushare/","text":"è‚¡ç¥¨æ•°æ®æŠ“å–æ¡†æ¶ä½¿ç”¨TuShareã€‚ http://tushare.org/","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"Alfredä½¿ç”¨æŠ€å·§","date":"2022-03-08T02:25:29.696Z","path":"wiki/å·¥å…·è½¯ä»¶/Alfredä½¿ç”¨æŠ€å·§/","text":"åŸºæœ¬æ“ä½œ ä½¿ç”¨Alt+ç©ºæ ¼å¯åŠ¨ï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ç›¸åº”å‘½ä»¤è¿›è¡Œæ“ä½œã€‚ä»¥ä¸‹æ ¹æ®å…¶è®¾ç½®ç•Œé¢çš„å¸ƒå±€ï¼ŒæŒ‰ç…§ç›¸åº”çš„ç›®å½•è¿›è¡Œä»‹ç»ã€‚ General Generalç•Œé¢ä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š Startupï¼šæ˜¯å¦åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªå¯åŠ¨Alfredã€‚ Alfred Hotkeyï¼šè°ƒå‡ºAlfredæ“ä½œç•Œé¢çš„çƒ­é”®ã€‚é»˜è®¤ä¸ºAlt + ç©ºæ ¼ã€‚ Where are youï¼šä½ åœ¨å“ªä¸ªå›½å®¶ã€‚Alfredå†…ç½®äº†å¸¸ç”¨ç½‘ç«™æœç´¢åŠŸèƒ½ï¼Œåœ¨æœç´¢æ—¶æ‰“å¼€å¯¹åº”å›½å®¶çš„ç½‘ç«™ã€‚ Features è¿™é‡ŒåŒ…å«äº†Alfredè‡ªå·±å¼€å‘çš„åŠŸèƒ½ï¼Œæ¥ä¸‹æ¥ä¸€ä¸ªä¸€ä¸ªä»‹ç»å®ƒä»¬ã€‚æœ‰äº›åŠŸèƒ½åœ¨æˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨ä¸­éå¸¸æœ‰ç”¨ï¼ Defalut Result æ‰“å¼€è¾“å…¥æ¡†åï¼ŒæŒ‰ä¸€ä¸‹ç©ºæ ¼ï¼Œå³å¯åœ¨Finderä¸­æœç´¢ç›¸åº”æ–‡ä»¶ã€‚ Essentialsï¼š åŸºæœ¬çš„æœç´¢è®¾ç½® Extrasï¼š é¢å¤–çš„æœç´¢è®¾ç½® Search Scopeï¼š æœç´¢çš„èŒƒå›´ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€äº›å¸¸ç”¨æ–‡ä»¶å¤¹ Fallbacksï¼š è‹¥ä¸Šé¢çš„æŸ¥è¯¢æœç´¢ä¸åˆ°ç»“æœæ—¶ï¼Œå°±ä¼šè°ƒç”¨è¿™é‡Œè®¾ç½®çš„ç½‘ç«™æˆ–æœç´¢å¼•æ“æ¥è¿›è¡Œè¿›ä¸€æ­¥çš„æŸ¥è¯¢ã€‚ File Search SearchOpening Files open+æ–‡ä»¶åç›´æ¥æ‰“å¼€æŸä¸ªæ–‡ä»¶ã€‚ Revealing Files find+æ–‡ä»¶ååˆ™è¡¨ç¤ºåœ¨Finderä¸­æ‰“å¼€è¯¥æ–‡ä»¶ã€‚ Inside Files in+å†…å®¹å¯ä»¥æŠŠæ–‡ä»¶ä¸­åŒ…å«å†…å®¹çš„æ–‡ä»¶æ‰¾å‡ºæ¥ã€‚ File Tags tag+æ ‡ç­¾åå­—å¯ä»¥æŠŠæ‰“ä¸Šæ ‡ç­¾çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æœç´¢å‡ºæ¥ã€‚ Donâ€™t Show: ä¸æ˜¾ç¤ºæŸç±»å‹çš„æ–‡ä»¶ Result Limitï¼š æœç´¢æ¡æ•°é™åˆ¶ NavigationBufferAdvancedActionsé¡¾åæ€ä¹‰ï¼ŒActionsæŒ‡ä½ è¦å¯¹æ–‡ä»¶æ‰§è¡Œçš„åŠ¨ä½œã€‚å…ˆæœç´¢åˆ°ä½ è¦å¤„ç†çš„æ–‡ä»¶ï¼Œç„¶åç‚¹å‡»Ctrlé”®ã€‚ Web Search ç½‘ç»œæœç´¢ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„æœç´¢ã€‚æ¯”å¦‚ä½¿ç”¨ç™¾åº¦æœç´¢ Web Bookmarksæœç´¢æµè§ˆå™¨ä¹¦ç­¾ï¼Œç›®å‰åªæ”¯æŒsafariã€chromeã€‚ Clipboard Historyå‰ªåˆ‡æ¿å†å²ï¼Œå¯ä»¥è‡ªå®šä¹‰å¿«æ·é”®ï¼Œæ‰“å¼€å†å²é¢æ¿ã€‚éå¸¸å®ç”¨çš„ä¸€ä¸ªåŠŸèƒ½ã€‚ SnippetsçŸ­è¯­è®¾ç½®ï¼Œé…ç½®ä¸€äº›å¸¸ç”¨çš„çŸ­è¯­ï¼Œè®¾ç½®ç®€çŸ­çš„å…³é”®å­—ã€‚è¿˜å¯ä»¥è®¾ç½®è‡ªåŠ¨æ›¿æ¢ã€‚ æ·»åŠ CollectionAffixè¡¨ç¤ºå½“å‰é›†åˆçš„å‰ç¼€ï¼Œè¯¥ç±»å‹ä¸‹æ‰€æœ‰çš„çŸ­è¯­éƒ½éœ€è¦å‰ç¼€+å…³é”®å­—æ¥å±•ç¤ºã€‚ Calculatorå¯ä»¥ç›´æ¥åœ¨aflredæœç´¢æ¡†ä¸­ä½¿ç”¨è®¡ç®—åŠŸèƒ½ Workflowsæœ‰äº†å·¥ä½œæµï¼Œæˆ‘ä»¬çš„æ•ˆç‡ä¼šå¾—åˆ°å¾ˆå¤§çš„æé«˜ã€‚æ¯”å¦‚ï¼Œå¯ä»¥è¿…é€Ÿåˆ‡æ¢è½¯ä»¶ï¼Œå¿«é€ŸæŸ¥è¯¢è‡ªå·±æƒ³çœ‹çš„ä¹¦è¯„ã€ç”µå½±è¯„ä»·ï¼Œå¿«é€ŸæŸ¥è¯¢å½“å‰ipåœ°å€ï¼Œå¿«é€ŸæŸ¥è¯¢å½“å‰è‚¡ç¥¨çš„ä»·æ ¼ç­‰ã€‚ AppLauncherè®¾ç½®å¿«æ·é”®å¿«é€Ÿæ‰“å¼€è½¯ä»¶ doubanè±†ç“£æœç´¢ï¼Œdbb+ä¹¦åå’Œdbm+ç”µå½±åè¿›è¡Œç›¸å…³æœç´¢ Githubgithubæœç´¢ Gitlabgitlabæœç´¢ IP Addresså½“å‰å†…ç½‘å’Œå¤–ç½‘ipæŸ¥è¯¢ ä¸­å›½è‚¡ç¥¨è¡Œæƒ… è¿›è¡Œè‚¡ç¥¨æŸ¥è¯¢ï¼Œgp+è‚¡ç¥¨å·ç è¿›è¡Œå®æ—¶è‚¡ä»·æŸ¥è¯¢ï¼Œgp add xxxxxxæŠŠç›¸åº”è‚¡ç¥¨æ·»åŠ åˆ°è‡ªé€‰è‚¡ï¼Œgp listæŸ¥çœ‹æ‰€æœ‰è‡ªé€‰è‚¡çš„è‚¡ä»·ã€‚ AppearanceAlfredä¸»é¢˜ RemoteAdvanced","tags":[],"categories":[{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"}]},{"title":"Pythonç¯å¢ƒé…ç½®ç®¡ç†","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/Pythonç¯å¢ƒé…ç½®/","text":"ç±»ä¼¼Javaä¸­çš„jenvã€Flutterçš„fvmå·¥å…·ï¼ŒPythonä¹Ÿæœ‰å¤šç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œè¿™é‡Œæ¨èä½¿ç”¨pyenvã€‚ å…ˆè®°å½•ä¸‹Mac m1çš„é»˜è®¤pythonç¯å¢ƒ Mac OS 12.3ä¹‹åç³»ç»Ÿå»æ‰äº†Python2ï¼ŒMacä¸Šçš„é»˜è®¤Pythonç¯å¢ƒå¯èƒ½æœ‰ï¼š |pythonç‰ˆæœ¬|Pythonè·¯å¾„|æ”¯æŒçš„æ¶æ„ï½œå¤‡æ³¨|â€”|â€”|â€”|â€”-|Python3.x|&#x2F;usr&#x2F;bin&#x2F;python3|x86_64 arm64|Xcodeè‡ªå¸¦çš„Pythonç¯å¢ƒ,&#x2F;Applications&#x2F;Xcode.app&#x2F;Contents&#x2F;Developer&#x2F;Library&#x2F;Frameworks&#x2F;Python3.framework&#x2F;Versionsç›®å½•ä¸¤ç§å¯èƒ½æœ‰å¤šä¸ªç‰ˆæœ¬Python3.xï½œâ€‹â€‹&#x2F;usr&#x2F;local&#x2F;bin&#x2F;python3.8â€‹â€‹ï½œâ€‹â€‹x86_64â€‹â€‹ï½œRosetta2è½¬è¯‘ç‰ˆbrewå®‰è£…çš„Pythonâ€‹â€‹Python3.10.9â€‹â€‹ï½œâ€‹â€‹&#x2F;opt&#x2F;homebrew&#x2F;bin&#x2F;python3â€‹â€‹ï½œâ€‹â€‹arm64â€‹â€‹ï½œæœ¬åœ°ç¼–è¯‘brewå®‰è£…çš„Python (åŸç”Ÿæ”¯æŒm1)â€‹â€‹Python3.9.15â€‹â€‹ï½œâ€‹â€‹&#x2F;opt&#x2F;homebrew&#x2F;Caskroom&#x2F;â€‹â€‹â€‹â€‹miniforge&#x2F;base&#x2F;bin&#x2F;pythonâ€‹â€‹|é€šè¿‡æœ¬åœ°ç¼–è¯‘brewå®‰è£…çš„mini-forgeä¸­baseç¯å¢ƒçš„Python åœ¨åšç‰ˆæœ¬ç®¡ç†çš„æ—¶å€™å»ºè®®ä½¿ç”¨pyenvï¼Œä½¿ç”¨brewå®‰è£…åçš„ç›®å½•æŸ¥æ‰¾èµ·æ¥å¾ˆéº»çƒ¦ pyenvä½¿ç”¨123456789101112131415161718#å®‰è£…pyenvbrew install pyenv#é…ç½®ç¯å¢ƒå˜é‡ echo &#x27;export PYENV_ROOT=&quot;$HOME/.pyenv&quot;&#x27; &gt;&gt; ~/.zshrcecho &#x27;command -v pyenv &gt;/dev/null || export PATH=&quot;$PYENV_ROOT/bin:$PATH&quot;&#x27; &gt;&gt; ~/.zshrcecho &#x27;eval &quot;$(pyenv init -)&quot;&#x27; &gt;&gt; ~/.zshrc#å®‰è£…æŸä¸ªpythonç‰ˆæœ¬pyenv install 3.10.4# æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬pyenv versions#åˆ‡æ¢pythonç‰ˆæœ¬pyenv global 3.10.4#å½“å‰shellåˆ‡æ¢pythonç‰ˆæœ¬pyenv shell 3.10.4 #å¸è½½pyenv uninstall 3.10.4 åŒä¸€ä¸ªpythonç‰ˆæœ¬ä¸åŒç¯å¢ƒ1234567891011121314151617#å®‰è£…pyenv-virtualenvgit clone https://github.com/pyenv/pyenv-virtualenv.git $(pyenv root)/plugins/pyenv-virtualenvecho &#x27;eval &quot;$(pyenv virtualenv-init -)&quot;&#x27; &gt;&gt; ~/.zshrcpyenv virtualenv 3.10.4 frida16# æŸ¥çœ‹å·¥ä½œç¯å¢ƒåˆ—è¡¨pyenv virtualenvs #å¯¹åº”çš„å·¥ä½œç¯å¢ƒç›®å½•ä¸º~/.pyenv/versions/3.10.4/envs/frida16# æ¿€æ´»ç¯å¢ƒpyenv activate frida16#é€€å‡ºç¯å¢ƒpyenv deactivate# åˆ é™¤å·¥ä½œç¯å¢ƒpyenv virtualenv-delete frida16 å‚è€ƒ https://www.jianshu.com/p/dcb281ee564e https://virtualenv.pypa.io/en/latest/ è°ˆè°ˆMacOSä¸‹çš„Pythonç‰ˆæœ¬ç®¡ç†é—®é¢˜ åŸåˆ›","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"RxPYå­¦ä¹ ç¬”è®°","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/RxPyå­¦ä¹ ç¬”è®°/","text":"åŸºæœ¬æ¦‚å¿µå‚è€ƒè¿™é‡Œï¼ŒPythonçš„ç‰ˆæœ¬ä¹Ÿæ˜¯æ ¹æ®è¿™äº›æ¦‚å¿µï¼Œé€šè¿‡ä½¿ç”¨è‡ªå·±çš„ç‰¹æ€§å®ç°ã€‚ä½†ç”±äºç§ç§åŸå› ï¼ŒPythonçš„ä¸åŒç‰ˆæœ¬é—´å˜åŒ–å¾ˆå¤§ã€‚å¯ä»¥å‚è€ƒè¿™é‡Œã€‚ åŸºæœ¬çš„ç”¨æ³•å¯ä»¥å‚è€ƒæ–‡æ¡£å’Œæºç ä¸­çš„testï¼Œè¿™é‡Œåªè®°å½•ä¸€äº›è‡ªå·±é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ å®˜æ–¹ä½¿ç”¨æ–‡æ¡£ç¿»è¯‘ å®‰è£…å¦‚æœä½¿ç”¨V3.xç‰ˆæœ¬ï¼š 1pip install rx å¦‚æœä½¿ç”¨1.6çš„ç‰ˆæœ¬ 1pip install rx==1.6.1 åŸºæœ¬æ¦‚å¿µRXPYï¼Œä½¿ç”¨å¯è§‚å¯Ÿåºåˆ—ï¼ŒæŸ¥è¯¢æ“ä½œç¬¦ç»„åˆï¼Œå¯å¼‚æ­¥åŒ–ï¼ŒåŸºäºäº‹ä»¶çš„ä¸€å¥—Pythonåº“ã€‚ä½¿ç”¨Rxï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨Observablesæ¥è¡¨ç¤ºå¼‚æ­¥æ•°æ®æµï¼Œä½¿ç”¨operatorsæŸ¥è¯¢å¼‚æ­¥æ•°æ®æµï¼Œä½¿ç”¨Schedulerså¯¹æ•°æ®&#x2F;äº‹ä»¶æµè¿›è¡Œå¼‚æ­¥å‚æ•°åŒ–ã€‚ ä½¿ç”¨Rxï¼Œä½ å¯ä»¥è¡¨ç¤ºå¤šä¸ªå¼‚æ­¥æ•°æ®æµï¼Œä½¿ç”¨è§‚å¯Ÿè€…ï¼ˆObserverï¼‰å¯¹è±¡æ¥è®¢é˜…ï¼ˆsubscribeï¼‰äº‹ä»¶æµã€‚å½“äº‹ä»¶å‘ç”Ÿæ—¶å¯è§‚å¯Ÿè€…ï¼ˆObservableï¼‰é€šçŸ¥è®¢é˜…è€…ã€‚ä½ å¯ä»¥åœ¨Observableå’ŒObserverä¹‹é—´æ”¾ç½®å„ç§è½¬æ¢ã€‚ å› ä¸ºObservableé˜Ÿåˆ—æ˜¯æ•°æ®æµï¼Œä½ å¯ä»¥ä½¿ç”¨ç›¸å…³æ“ä½œç¬¦è¿›è¡Œé“¾å¼æ“ä½œã€‚ä½ å¯ä»¥filterï¼Œmapï¼Œreduceï¼Œcomposeï¼ŒåŸºäºæ—¶é—´çš„æ“ä½œï¼Œç­‰ç­‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šå…¶ä»–ç‰¹å®šäºå“åº”æµçš„æ“ä½œç¬¦å…è®¸ç¼–å†™åŠŸèƒ½å¼ºå¤§çš„æŸ¥è¯¢ã€‚å–æ¶ˆã€å¼‚å¸¸å’ŒåŒæ­¥ä¹Ÿå¯ä»¥é€šè¿‡ä¸“ç”¨çš„æ“ä½œç¬¦å¤„ç†ã€‚ å¼€å§‹Observableæ˜¯ReactiveXçš„æ ¸å¿ƒç±»å‹ã€‚å®ƒä¸²è¡Œçš„æ·»åŠ å…ƒç´ ï¼Œåƒæ’æ”¾ç³»ç»Ÿä¸€æ ·ï¼Œé€šè¿‡ä¸€ç³»åˆ—çš„æ“ä½œç›´åˆ°æœ€åä¼ é€’åˆ°Observerï¼Œåœ¨é‚£é‡Œå®ƒä»¬è¢«æ¶ˆè´¹ã€‚ åŸºäºæ¨(è€Œä¸æ˜¯åŸºäºæ‹‰)çš„è¿­ä»£ä¸ºè¡¨è¾¾ä»£ç å’Œå¹¶å‘æä¾›äº†å¼ºå¤§çš„æ–°å¯èƒ½æ€§ã€‚å› ä¸ºä¸€ä¸ªObservableå°†äº‹ä»¶å½“ä½œæ•°æ®ï¼Œä¹Ÿå°†æ•°æ®å½“ä½œäº‹ä»¶ã€‚ æœ‰å¾ˆå¤šç§æ–¹å¼åˆ›å»ºObserableï¼Œä½ å¯ä»¥ä½¿ç”¨createï¼ˆï¼‰å·¥å‚æ–¹æ³•ï¼Œä¼ é€’ä¸€ä¸ªå‡½æ•°ç»™ä»–ã€‚ - on_nextåœ¨Observableå‘å°„ä¸€ä¸ªå…ƒç´ æ—¶è¢«è°ƒç”¨ - on_completedåœ¨Obserableå®Œæˆæ—¶è¢«è°ƒç”¨ - on_erroråœ¨Obserableå‘ç”Ÿé”™è¯¯æ—¶è¢«è°ƒç”¨ è¿™ä¸‰ä¸ªå›è°ƒæ˜¯å¯é€‰çš„ã€‚ è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š 123456789101112131415161718from rx import createdef push_five_strings(observer, scheduler): observer.on_next(&quot;Alpha&quot;) observer.on_next(&quot;Beta&quot;) observer.on_next(&quot;Gamma&quot;) observer.on_next(&quot;Delta&quot;) observer.on_next(&quot;Epsilon&quot;) observer.on_completed()source = create(push_five_strings)source.subscribe( on_next = lambda i: print(&quot;Received &#123;0&#125;&quot;.format(i)), on_error = lambda e: print(&quot;Error Occurred: &#123;0&#125;&quot;.format(e)), on_completed = lambda: print(&quot;Done!&quot;),) Observableé€šè¿‡createåˆ›å»ºï¼Œpush_five_stringsè¢«è°ƒç”¨ã€‚è¿™ä¸ªå‡½æ•°å‘å°„äº†äº”ä¸ªå…ƒç´ ã€‚subscribeä¸­å®ç°äº†ä¸‰ä¸ªå›è°ƒå‡½æ•°ã€‚è¾“å‡ºç»“æœä¸ºï¼š 123456Received AlphaReceived BetaReceived GammaReceived DeltaReceived EpsilonDone! ofå·¥å‚å‡½æ•°ï¼Œæ¥æ”¶listå‚æ•°ï¼Œä¼šä¾æ­¤å‘å°„å®ƒä»¬ï¼Œå¦‚æœå¿½ç•¥completionå’Œerrorï¼Œsubscribeå¯ä»¥æ”¯ä¼ ä¸€ä¸ªå‚æ•° 12345678910111213141516from rx import ofsource = of(&quot;Alpha&quot;, &quot;Beta&quot;, &quot;Gamma&quot;, &quot;Delta&quot;, &quot;Epsilon&quot;)source.subscribe( on_next = lambda i: print(&quot;Received &#123;0&#125;&quot;.format(i)), on_error = lambda e: print(&quot;Error Occurred: &#123;0&#125;&quot;.format(e)), on_completed = lambda: print(&quot;Done!&quot;),)è¾“å‡ºç»“æœï¼šReceived AlphaReceived BetaReceived GammaReceived DeltaReceived Epsilon æ“ä½œç¬¦å’Œé“¾æ¥ä½ å¯ä»¥ä½¿ç”¨è¶…è¿‡130ä¸ªæ“ä½œç¬¦æ¥å¯¼å‡ºæ–°çš„Observablesï¼Œæ¯ä¸ªæ“ä½œç¬¦ä¼šç”Ÿäº§ä¸€ä¸ªObservableï¼Œå®ƒä¼šä»¥ç®¡é“çš„å½¢å¼æ”¹å˜åŸæ¥çš„Observableã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨map()å¤„ç†æ¯ä¸ªå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç„¶åfilter()æ¥è¿‡æ»¤é•¿åº¦è¶…è¿‡5çš„å…ƒç´ ã€‚ 123456789101112131415from rx import of, operators as opsource = of(&quot;Alpha&quot;, &quot;Beta&quot;, &quot;Gamma&quot;, &quot;Delta&quot;, &quot;Epsilon&quot;)composed = source.pipe( op.map(lambda s: len(s)), op.filter(lambda i: i &gt;= 5))composed.subscribe(lambda value: print(&quot;Received &#123;0&#125;&quot;.format(value)))Received 5Received 5Received 5Received 7 è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å°†æ•´ä¸ªæ“ä½œé“¾æ¥èµ·æ¥ï¼Œè¿˜èƒ½å‡å°‘ä¸´æ—¶å˜é‡çš„äº§ç”Ÿ 123456from rx import of, operators as opof(&quot;Alpha&quot;, &quot;Beta&quot;, &quot;Gamma&quot;, &quot;Delta&quot;, &quot;Epsilon&quot;).pipe( op.map(lambda s: len(s)), op.filter(lambda i: i &gt;= 5)).subscribe(lambda value: print(&quot;Received &#123;0&#125;&quot;.format(value))) è‡ªå®šä¹‰æ“ä½œç¬¦éšç€æ“ä½œç¬¦é“¾çš„å‘å±•ï¼Œä¸ºäº†æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œé¡»å¯¹é“¾è¿›è¡Œæ‹†åˆ†ã€‚æ–°çš„æ“ä½œç¬¦è¢«å®ç°ä¸ºå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥åœ¨ç®¡é“æ“ä½œç¬¦ä¸­ä½¿ç”¨ã€‚å½“ä¸€ä¸ªæ“ä½œç¬¦è¢«å®ç°ä¸ºå…¶ä»–æ“ä½œç¬¦çš„ç»„åˆæ—¶ï¼Œç”±äºç®¡é“å‡½æ•°çš„å­˜åœ¨ï¼Œå®ç°éå¸¸ç®€å• 123456789101112import rxfrom rx import operators as opsdef length_more_than_5(): return rx.pipe( ops.map(lambda s: len(s)), ops.filter(lambda i: i &gt;= 5), )rx.of(&quot;Alpha&quot;, &quot;Beta&quot;, &quot;Gamma&quot;, &quot;Delta&quot;, &quot;Epsilon&quot;).pipe( length_more_than_5()).subscribe(lambda value: print(&quot;Received &#123;0&#125;&quot;.format(value))) ä¹Ÿå¯ä»¥è‡ªå·±åˆ›å»ºä¸€ä¸ªæ“ä½œç¬¦ï¼Œä»¥ä¸‹æ“ä½œç¬¦å®ç°äº†å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™çš„åŠŸèƒ½ 12345678910111213141516171819import rxdef lowercase(): def _lowercase(source): def subscribe(observer, scheduler = None): def on_next(value): observer.on_next(value.lower()) return source.subscribe( on_next, observer.on_error, observer.on_completed, scheduler) return rx.create(subscribe) return _lowercaserx.of(&quot;Alpha&quot;, &quot;Beta&quot;, &quot;Gamma&quot;, &quot;Delta&quot;, &quot;Epsilon&quot;).pipe( lowercase() ).subscribe(lambda value: print(&quot;Received &#123;0&#125;&quot;.format(value))) å¹¶å‘æ§åˆ¶ä¸ºäº†å®ç°å¹¶å‘ï¼Œä½ è¦ä½¿ç”¨ä¸¤ä¸ªæ“ä½œç¬¦ï¼šsubscribe_onå’Œobserve_onã€‚ä¸¤è€…éƒ½éœ€è¦Scheduleræ¥æä¾›çº¿ç¨‹ç»™è®¢é˜…è€…å·¥ä½œã€‚ThreadPoolScheduleræ˜¯ä¸€ä¸ªé‡ç”¨çº¿ç¨‹çš„å¥½é€‰æ‹©ã€‚ GILå¯èƒ½ä¼šç ´åå¹¶å‘æ€§èƒ½ï¼Œå› ä¸ºå®ƒé˜»æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®åŒä¸€è¡Œä»£ç ã€‚åƒNumPyè¿™æ ·çš„åº“å¯ä»¥åœ¨é‡Šæ”¾GILæ—¶å‡è½»è¿™ç§å¹¶è¡Œå¯†é›†è®¡ç®—çš„è´Ÿæ‹…ã€‚RxPyè¿˜å¯ä»¥åœ¨æŸç§ç¨‹åº¦ä¸Šå‡å°‘çº¿ç¨‹é‡å ã€‚ä¸€å®šè¦ç”¨å¹¶å‘æ€§æµ‹è¯•æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ç¡®ä¿æœ‰æ€§èƒ½å¢ç›Š. subscribe_on()æŒ‡ç¤ºé“¾å¼€å§‹å¤„çš„æºObservableåºä½¿ç”¨å“ªä¸ªè°ƒåº¦å™¨(ä¸ç®¡æ‚¨å°†è¯¥æ“ä½œç¬¦æ”¾åœ¨å“ªé‡Œ)ã€‚ä¸è¿‡ï¼Œobserve_on()ä¼šåœ¨è¿™ä¸ªæ—¶å€™åˆ‡æ¢åˆ°ä¸åŒçš„è°ƒåº¦ç¨‹åºï¼Œæœ‰æ•ˆåœ°å°†å‘å°„ä»ä¸€ä¸ªçº¿ç¨‹è½¬ç§»åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ã€‚ä¸€äº›å·¥å‚å‡½æ•°å’Œæ“ä½œç¬¦ï¼Œå¦‚interval()å’Œdelay()ï¼Œå·²ç»æœ‰äº†é»˜è®¤çš„è°ƒåº¦ç¨‹åºã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950import multiprocessingimport randomimport timefrom threading import current_threadimport rxfrom rx.scheduler import ThreadPoolSchedulerfrom rx import operators as opsdef intense_calculation(value): # sleep for a random short duration between 0.5 to 2.0 seconds to simulate a long-running calculation time.sleep(random.randint(5, 20) * 0.1) return value# calculate number of CPUs, then create a ThreadPoolScheduler with that number of threadsoptimal_thread_count = multiprocessing.cpu_count()pool_scheduler = ThreadPoolScheduler(optimal_thread_count)# Create Process 1rx.of(&quot;Alpha&quot;, &quot;Beta&quot;, &quot;Gamma&quot;, &quot;Delta&quot;, &quot;Epsilon&quot;).pipe( ops.map(lambda s: intense_calculation(s)), ops.subscribe_on(pool_scheduler)).subscribe( on_next=lambda s: print(&quot;PROCESS 1: &#123;0&#125; &#123;1&#125;&quot;.format(current_thread().name, s)), on_error=lambda e: print(e), on_completed=lambda: print(&quot;PROCESS 1 done!&quot;),)# Create Process 2rx.range(1, 10).pipe( ops.map(lambda s: intense_calculation(s)), ops.subscribe_on(pool_scheduler)).subscribe( on_next=lambda i: print(&quot;PROCESS 2: &#123;0&#125; &#123;1&#125;&quot;.format(current_thread().name, i)), on_error=lambda e: print(e), on_completed=lambda: print(&quot;PROCESS 2 done!&quot;),)# Create Process 3, which is infiniterx.interval(1).pipe( ops.map(lambda i: i * 100), ops.observe_on(pool_scheduler), ops.map(lambda s: intense_calculation(s)),).subscribe( on_next=lambda i: print(&quot;PROCESS 3: &#123;0&#125; &#123;1&#125;&quot;.format(current_thread().name, i)), on_error=lambda e: print(e),)input(&quot;Press any key to exit\\n&quot;) IOå¼‚æ­¥ è®¸å¤šå¼‚æ­¥æ¡†æ¶éƒ½æ”¯æŒIOå¼‚æ­¥ï¼ŒRxPYä¸­ä½¿ç”¨ç›¸å…³è¿çš„schedulersã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859from collections import namedtupleimport asyncioimport rximport rx.operators as opsfrom rx.subject import Subjectfrom rx.scheduler.eventloop import AsyncIOSchedulerEchoItem = namedtuple(&#x27;EchoItem&#x27;, [&#x27;future&#x27;, &#x27;data&#x27;])def tcp_server(sink, loop): def on_subscribe(observer, scheduler): async def handle_echo(reader, writer): print(&quot;new client connected&quot;) while True: data = await reader.readline() data = data.decode(&quot;utf-8&quot;) if not data: break future = asyncio.Future() observer.on_next(EchoItem( future=future, data=data )) await future writer.write(future.result().encode(&quot;utf-8&quot;)) print(&quot;Close the client socket&quot;) writer.close() def on_next(i): i.future.set_result(i.data) print(&quot;starting server&quot;) server = asyncio.start_server(handle_echo, &#x27;127.0.0.1&#x27;, 8888, loop=loop) loop.create_task(server) sink.subscribe( on_next=on_next, on_error=observer.on_error, on_completed=observer.on_completed) return rx.create(on_subscribe)loop = asyncio.get_event_loop()proxy = Subject()source = tcp_server(proxy, loop)aio_scheduler = AsyncIOScheduler(loop=loop)source.pipe( ops.map(lambda i: i._replace(data=&quot;echo: &#123;&#125;&quot;.format(i.data))), ops.delay(5.0)).subscribe(proxy, scheduler=aio_scheduler)loop.run_forever()print(&quot;done&quot;)loop.close() é»˜è®¤çš„Scheduler æœ‰å¤šç§æ–¹å¼é€‰é¢schedulerã€‚ç¬¬ä¸€ç§æ˜¯ç»™æ“ä½œç¬¦æä¾›schedulerã€‚ä½†å½“æœ‰å¤šä¸ªæ“ä½œç¬¦æ—¶ï¼Œå¯èƒ½ä¼šè¢«å¿½ç•¥ã€‚æ‰€ä»¥ç¬¬äºŒç§æ–¹å¼æ—¶æä¾›é»˜è®¤çš„schedulerã€‚ 123source.pipe( ...).subscribe(proxy, scheduler=my_default_scheduler) æ“ä½œç¬¦é€‰æ‹©schedulerçš„æ–¹å¼å¦‚ä¸‹ï¼š å¦‚æœç»™æ“ä½œç¬¦æä¾›äº†schedulerï¼Œé€‰æ‹©å®ƒ å¦‚æœé»˜è®¤scheduleræœ‰æä¾›ï¼Œé€‰æ‹©å®ƒ å¦åˆ™é€‰æ‹©è‡ªå¸¦çš„ è¿ç§»https://rxpy.readthedocs.io/en/latest/migration.html ä»RxPY v1è¿ç§»åˆ°v3 æ“ä½œç¬¦åˆ›å»ºObservable æ“ä½œç¬¦ æè¿° create åˆ›å»ºä¸€ä¸ªObservable empty åˆ›å»ºç©ºçš„Obserbaleï¼Œå‘å°„ç©ºå…ƒç´ ï¼Œé©¬ä¸Šç»“æŸ never throw åˆ›å»ºä¸€ä¸ªç«‹é©¬æŠ›å‡ºé”™è¯¯çš„Observable from_ è½¬æ¢å…¶ä»–æ•°æ®æˆ–å¯¹è±¡ç»™Observable interval åˆ›å»ºä¸€ä¸ªé—´éš”æ‰§è¡Œçš„Observable just range åˆ›å»ºä¸€ä¸ªæ•´æ•°é˜Ÿåˆ—çš„Observable repeat_value é‡å¤å‘é€ç‰¹æ®Šå…ƒç´ æˆ–é˜Ÿåˆ—å…ƒç´  start timer è½¬æ¢Observables æ“ä½œç¬¦ æè¿° buffer flat_map group_by map scan window è¿‡æ»¤Observables æ“ä½œç¬¦ æè¿° debounce distinct element_at filter first ignore_elements last sample skip skip_last take take_last ç»“åˆObservables æ“ä½œç¬¦ æè¿° combine_latest join merge start_with switch_latest zip é”™è¯¯å¤„ç† æ“ä½œç¬¦ æè¿° catch retry å®ç”¨æ“ä½œç¬¦ æ“ä½œç¬¦ æè¿° delay do materizlize dematerialize observe_on subscribe subscribe_on time_interval timeout timestamp æ¡ä»¶å’Œå¸ƒå°”æ“ä½œç¬¦ æ“ä½œç¬¦ æè¿° all amb contains default_if_empty sequence_equal skip_until skip_while take_until take_while æ•°å­¦ç›¸å…³æ“ä½œç¬¦ æ“ä½œç¬¦ æè¿° average concat count max min reduce sum å¯è¿æ¥Observableæ“ä½œç¬¦ æ“ä½œç¬¦ æè¿° connect publish ref_count replay é¢å¤–çš„é˜…è¯»RxPYæºç ä»“åº“åŒ…å«å®ä¾‹notebooks ReactiveXå®˜æ–¹åœ°å€å’Œæ–‡æ¡£ï¼š Introduction Tutorials Operators ä¸€äº›å•†ä¸šå†…å®¹å¯ä»¥å…è´¹è·å¾—å®ƒä»¬ç›¸å…³è”çš„ç¤ºä¾‹ä»£ç  Packt Reactive Programming in Python RxPY 3.0.0å–æ¶ˆäº†å¯¹backpressureçš„æ”¯æŒï¼Œä»¥ä¸‹æ˜¯å·²çŸ¥çš„æ”¯æŒbackpressçš„ç¤¾åŒºé¡¹ç›® rxbackpressure rxpy extension rxpy_backpressure observer decorators å•†ä¸šèµ„æº Oâ€™Reilly Video Oâ€™Reilly has published the video Reactive Python for Data Science which is available on both the Oâ€™Reilly Store as well as Oâ€™Reilly Safari. This video teaches RxPY from scratch with applications towards data science, but should be helpful for anyone seeking to learn RxPY and reactive programming. Packt Video Packt has published the video Reactive Programming in Python, available on Packt store. This video teaches how to write reactive GUI and network applications. å¦‚ä½•åœ¨PyQt5ä¸­ä½¿ç”¨schedulerï¼Œåœ¨éä¸»çº¿ç¨‹ä¸­æ‰§è¡ŒæŸä¸ªæ“ä½œï¼Œç„¶åå›åˆ°UIçº¿ç¨‹æ‰§è¡Œå¦ä¸€ä¸ªæ“ä½œã€‚12345rx.from_list([1, 2, 3, 4]).pipe(operators.map(add), operators.subscribe_on(pool_scheduler), operators.observe_on(QtThreadSafeScheduler(QtCore))).subscribe( on_next=lambda i: print(&quot;PROCESS 3: &#123;0&#125; &#123;1&#125;&quot;.format(threading.current_thread().name, i)), on_error=lambda e: print(e), on_completed=lambda: print(&quot;Done!&quot;) ) å…¶ä¸­çš„QtThreadScheduleræ¥è‡ªäºhttps://github.com/jcafhe/RxPY å‚è€ƒ Githubå®˜æ–¹åœ°å€ æ–‡æ¡£ https://rxmarbles.com","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"ctypesæ¨¡å—","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/ctypes/","text":"ctypes æ˜¯ Python çš„å¤–éƒ¨å‡½æ•°åº“ã€‚å®ƒæä¾›äº†ä¸ C å…¼å®¹çš„æ•°æ®ç±»å‹ï¼Œå¹¶å…è®¸è°ƒç”¨ DLL æˆ–å…±äº«åº“ä¸­çš„å‡½æ•°ã€‚å¯ä½¿ç”¨è¯¥æ¨¡å—ä»¥çº¯ Python å½¢å¼å¯¹è¿™äº›åº“è¿›è¡Œå°è£…ã€‚ Hello World ç¼–å†™Cæ–‡ä»¶ ç¼–è¯‘Cæ–‡ä»¶ ç¼–å†™Pythonæ–‡ä»¶ã€æµ‹è¯• 1. ç¼–å†™Cæ–‡ä»¶1234567#include &lt;stdio.h&gt;int hello(const char* name) &#123; printf(&quot;~~~hello %s ! \\n&quot;, name); return 0;&#125; 2. ç¼–è¯‘Cæ–‡ä»¶ä¸åŒå¹³å°ç”Ÿæˆä¸åŒæ ¼å¼çš„åŠ¨æ€åº“ï¼Œwindowsä¸‹ä¸ºdllï¼Œlinuxä¸‹ä¸ºso gcc -fPIC -shared hello_module.c -o hello_module.dylib 3. ç¼–å†™Pythonæ–‡ä»¶123456import ctypesfrom ctypes import c_char_plib = ctypes.cdll.LoadLibrary(&quot;hello_module.dylib&quot;)lib.hello(c_char_p(bytes(&quot;world&quot;, &quot;utf-8&quot;))) ç±»å‹æ˜ å°„å…³ç³» ctypes C ç±»å‹ Pythonç±»å‹ c_bool _Bool bool (1) c_char char å•å­—ç¬¦å­—èŠ‚å¯¹è±¡ c_wchar wchar_t å•å­—ç¬¦å­—ç¬¦ä¸² c_byte char int c_ubyte unsigned char int c_short short int c_ushort unsigned short int c_int int int c_uint unsigned int int c_long long int c_ulong unsigned long int c_longlong __int64 æˆ– long long int c_ulonglong unsigned __int64 æˆ– unsigned long long int c_size_t size_t int c_ssize_t ssize_t æˆ– Py_ssize_t int c_float float float c_double double float c_longdouble long double float c_char_p char * (NUL terminated) å­—èŠ‚ä¸²å¯¹è±¡æˆ– None c_wchar_p wchar_t * (NUL terminated) å­—ç¬¦ä¸²æˆ– None c_void_p void * int æˆ– None å›è°ƒå‡½æ•°1234567891011121314151617181920212223242526272829############## main.c ###############include &lt;stdint.h&gt;#include &lt;stdio.h&gt;struct mes_t&#123; uint32_t field1; uint32_t field2; void* data;&#125;;typedef int function_callback(struct mes_t* message );function_callback* my_callback;int function_one(function_callback fcb)&#123; //Set to a global variable for later use my_callback = fcb; //Declare object in stack struct mes_t mes; mes.field1 = 132; mes.field2 = 264; mes.data = NULL; //Pass pointer of object in stack, and print the return value printf(&quot;Got from python: %d\\n&quot;, my_callback( &amp;mes ) );&#125; 123456789101112131415161718192021222324252627282930313233############ main.py ################import ctypestestlib = ctypes.CDLL(&#x27;./testlib.so&#x27;)#Declare the data structureclass mes_t(ctypes.Structure): _fields_ = ( (&#x27;field1&#x27;, ctypes.c_uint32), (&#x27;field2&#x27;, ctypes.c_uint32), (&#x27;data&#x27;, ctypes.c_void_p))#Declare the callback type, since that is not stored in the librarycallback_type = ctypes.CFUNCTYPE(ctypes.c_int, ctypes.POINTER(mes_t) )def the_callback(mes_p): #dereference the pointer my_mes = mes_p[0] print &quot;I got a mes_t object! mes.field1=%r, mes.field2=%r, mes.data=%r&quot; \\ % (my_mes.field1, my_mes.field2, my_mes.data) #Return some random value return 999#Let the library know about the callback function by calling &quot;function_one&quot;result = testlib.function_one(callback_type(the_callback) )#########################gcc -shared -o testlib.so -fPIC main.cpython main.py å‚è€ƒï¼šhttp://blog.sina.com.cn/s/blog_6e22d8fb0102y462.html çº¿ç¨‹çŠ¶æ€å’ŒGILPythonè§£é‡Šå™¨ä¸æ˜¯å®Œå…¨çº¿ç¨‹å®‰å…¨çš„ã€‚ä¸ºäº†æ”¯æŒå¤šçº¿ç¨‹Pythonç¨‹åºï¼Œæœ‰ä¸€ä¸ªå…¨å±€é”ï¼Œç§°ä¸ºglobal interpreter lockæˆ–GILï¼Œå®ƒå¿…é¡»ç”±å½“å‰çº¿ç¨‹æŒæœ‰æ‰èƒ½å®‰å…¨è®¿é—®Pythonå¯¹è±¡ã€‚æ²¡æœ‰é”ï¼Œå³ä½¿æœ€ç®€å•çš„æ“ä½œä¹Ÿå¯èƒ½å¯¼è‡´å¤šçº¿ç¨‹ç¨‹åºä¸­çš„é—®é¢˜ï¼šä¾‹å¦‚ï¼Œå½“ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¢åŠ åŒä¸€å¯¹è±¡çš„å¼•ç”¨è®¡æ•°æ—¶ï¼Œå¼•ç”¨è®¡æ•°å¯èƒ½æœ€ç»ˆåªå¢åŠ ä¸€æ¬¡è€Œä¸æ˜¯ä¸¤æ¬¡ã€‚ é‡Šæ”¾GIL123Py_BEGIN_ALLOW_THREADS... Do some blocking I/O operation ...Py_END_ALLOW_THREADS éPythonåˆ›å»ºçš„çº¿ç¨‹å½“ä½¿ç”¨ä¸“ç”¨çš„Python APIï¼ˆä¾‹å¦‚threadingæ¨¡å—ï¼‰åˆ›å»ºçº¿ç¨‹æ—¶ï¼Œçº¿ç¨‹çŠ¶æ€ä¼šè‡ªåŠ¨å…³è”åˆ°å®ƒä»¬ï¼Œå› æ­¤ä¸Šé¢æ˜¾ç¤ºçš„ä»£ç æ˜¯æ­£ç¡®çš„ã€‚ä½†æ˜¯ï¼Œå½“ä»Cåˆ›å»ºçº¿ç¨‹æ—¶ï¼ˆä¾‹å¦‚ç”±å…·æœ‰è‡ªå·±çš„çº¿ç¨‹ç®¡ç†çš„ç¬¬ä¸‰æ–¹åº“ï¼‰ï¼Œå®ƒä»¬ä¸æŒæœ‰GILï¼Œä¹Ÿæ²¡æœ‰çº¿ç¨‹çŠ¶æ€ç»“æ„ã€‚ å¦‚æœä½ éœ€è¦ä»è¿™äº›çº¿ç¨‹è°ƒç”¨Pythonä»£ç ï¼ˆé€šå¸¸è¿™å°†æ˜¯ä¸Šè¿°ç¬¬ä¸‰æ–¹åº“æä¾›çš„å›è°ƒAPIçš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œä½ å¿…é¡»é¦–å…ˆé€šè¿‡åˆ›å»ºçº¿ç¨‹çŠ¶æ€æ•°æ®ç»“æ„æ¥æ³¨å†Œè¿™äº›çº¿ç¨‹å’Œè§£é‡Šå™¨ï¼Œç„¶åè·å–GILï¼Œæœ€åå­˜å‚¨ä»–ä»¬çš„çº¿ç¨‹çŠ¶æ€æŒ‡é’ˆï¼Œç„¶åæ‰èƒ½å¼€å§‹ä½¿ç”¨Python &#x2F; C APIã€‚å½“ä½ å®Œæˆåï¼Œä½ åº”è¯¥é‡ç½®çº¿ç¨‹çŠ¶æ€æŒ‡é’ˆï¼Œé‡Šæ”¾GILï¼Œæœ€åé‡Šæ”¾çº¿ç¨‹çŠ¶æ€æ•°æ®ç»“æ„ã€‚ 123456789PyGILState_STATE gstate;gstate = PyGILState_Ensure();/* Perform Python actions here. */result = CallSomeFunction();/* evaluate result or handle exception *//* Release the thread. No Python API allowed beyond this point. */PyGILState_Release(gstate); é‡Šæ”¾GILå’Œépythonåˆ›å»ºçš„çº¿ç¨‹ä¸­è°ƒç”¨pythonå‡½æ•°éƒ½æ²¡æœ‰æµ‹è¯•æˆåŠŸâ€¦ å‚è€ƒ http://icejoywoo.github.io/2018/12/10/intro-python-ctyps.html https://anribras.github.io/tech/2019/01/03/python-ctypes%E6%80%BB%E7%BB%93/","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"CFFIç¬”è®°","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/cffiç¬”è®°/","text":"","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"jsonè§£æåº“é€‰æ‹©å’Œä½¿ç”¨","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/jsonè§£æåº“é€‰æ‹©å’Œä½¿ç”¨/","text":"æ¯”è¾ƒ simplejsonï¼šdjangoçš„å†…ç½®æ¨¡å—ï¼Œå¦‚æœæ²¡æœ‰Cæ‰©å±•åŠ é€Ÿï¼Œæ•ˆç‡æå…¶ä½ä¸‹ã€‚ rapidjsonï¼š ujsonï¼šä½¿ç”¨Cè¯­è¨€å®ç° orjsonï¼šä½¿ç”¨Rustè¯­è¨€å®ç° æµ‹è¯•ä»£ç  12345678910111213141516171819202122232425262728from time import timeimport sysimport string num = int(sys.argv[1])lib = sys.argv[2] items = []for i in range(num): items.append(&#123;c:c for c in string.ascii_letters&#125;) start = time()if lib == &#x27;ujson&#x27;: import ujson ujson.dumps(items)elif lib == &#x27;rapidjson&#x27;: import rapidjson rapidjson.dumps(items)elif lib == &#x27;orjson&#x27;: import orjson orjson.dumps(items)else: import json json.dumps(items) print(time() - start)&gt;&gt;python 1000|10000|100000|1000000 json|ujson|rapidjson|orjson orjsongithubåœ°å€ å®‰è£… é¦–å…ˆå®‰è£…rustï¼Œä»rustå®˜ç½‘ä¸‹è½½rustup-init.exeå®‰è£…ç¨‹åºã€‚é€‰æ‹©å®‰è£…nightlyç±»å‹ã€‚å‚è€ƒã€‚ å®‰è£…orjsonï¼Œpip install orjson æ³¨æ„ orjson is tested for amd64 and aarch64 on Linux, macOS, and Windows. It may not work on 32-bit targets. ujsonå®‰è£…éœ€è¦ä¾èµ–C&amp;C++ç¼–è¯‘ç¯å¢ƒï¼Œå‚è€ƒhttps://github.com/statsmodels/statsmodels/issues/4160 å‚è€ƒ https://yanbin.blog/python-json-choose-ujson-if-necessary/","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"win32æ¨¡å—","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/pywin32æ¨¡å—/","text":"Pythonæä¾›äº†è°ƒç”¨ç³»ç»Ÿçº§åˆ«APIçš„åŠŸèƒ½ï¼Œctypeã€sipç­‰éƒ½å¯ä»¥ç”¨æ¥è°ƒç”¨C++ä»£ç ï¼Œä»¥æ­¤æ¥å’Œç³»ç»Ÿäº¤äº’ã€‚win32æ¨¡å—æä¾›äº†è°ƒç”¨æœ¬åœ°win32 GUI APIçš„æ¥å£ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿çš„è°ƒç”¨ç³»ç»Ÿçº§åˆ«çš„APIã€‚å¯ä»¥åšè¯¸å¦‚ç›‘å¬å…¨å±€å¿«æ·é”®ã€æ“ä½œä»»åŠ¡æ ç³»ç»Ÿå›¾æ ‡ç­‰åŠŸèƒ½ã€‚ åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸‹WIndowså¸¸ç”¨çš„APIã€‚ 1. WIndows API1.1 APIä¹‹æ¶ˆæ¯å‡½æ•° å‡½æ•° ä½œç”¨ BroadcastSystemMessage å°†ä¸€æ¡ç³»ç»Ÿæ¶ˆæ¯å¹¿æ’­ç»™ç³»ç»Ÿä¸­æ‰€æœ‰çš„é¡¶çº§çª—å£ GetMessagePos å–å¾—æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸Šä¸€æ¡æ¶ˆæ¯å¤„ç†å®Œæ¯•æ—¶çš„é¼ æ ‡æŒ‡é’ˆå±å¹•ä½ç½® GetMessageTime å–å¾—æ¶ˆæ¯é˜Ÿåˆ—ä¸­ä¸Šä¸€æ¡æ¶ˆæ¯å¤„ç†å®Œæ¯•æ—¶çš„æ—¶é—´ PostMessage å°†ä¸€æ¡æ¶ˆæ¯æŠ•é€’åˆ°æŒ‡å®šçª—å£çš„æ¶ˆæ¯é˜Ÿåˆ— PostThreadMessage å°†ä¸€æ¡æ¶ˆæ¯æŠ•é€’ç»™åº”ç”¨ç¨‹åº RegisterWindowMessage è·å–åˆ†é…ç»™ä¸€ä¸ªå­—ä¸²æ ‡è¯†ç¬¦çš„æ¶ˆæ¯ç¼–å· ReplyMessage ç­”å¤ä¸€ä¸ªæ¶ˆæ¯ SendMessage è°ƒç”¨ä¸€ä¸ªçª—å£çš„çª—å£å‡½æ•°ï¼Œå°†ä¸€æ¡æ¶ˆæ¯å‘ç»™é‚£ä¸ªçª—å£ SendMessageCallback å°†ä¸€æ¡æ¶ˆæ¯å‘ç»™çª—å£ SendMessageTimeout å‘çª—å£å‘é€ä¸€æ¡æ¶ˆæ¯ SendNotifyMessage å‘çª—å£å‘é€ä¸€æ¡æ¶ˆæ¯ 1.2 APIä¹‹æ§ä»¶ä¸æ¶ˆæ¯å‡½æ•° å‡½æ•°å ä½œç”¨ AdjustWindowRect ç»™å®šä¸€ç§çª—å£æ ·å¼ï¼Œè®¡ç®—è·å¾—ç›®æ ‡å®¢æˆ·åŒºçŸ©å½¢æ‰€éœ€çš„çª—å£å¤§å° AnyPopup åˆ¤æ–­å±å¹•ä¸Šæ˜¯å¦å­˜åœ¨ä»»ä½•å¼¹å‡ºå¼çª—å£ ArrangeIconicWindows æ’åˆ—ä¸€ä¸ªçˆ¶çª—å£çš„æœ€å°åŒ–å­çª—å£ AttachThreadInput è¿æ¥çº¿ç¨‹è¾“å…¥å‡½æ•° BeginDeferWindowPos å¯åŠ¨æ„å»ºä¸€ç³»åˆ—æ–°çª—å£ä½ç½®çš„è¿‡ç¨‹ BringWindowToTop å°†æŒ‡å®šçš„çª—å£å¸¦è‡³çª—å£åˆ—è¡¨é¡¶éƒ¨ CascadeWindows ä»¥å±‚å æ–¹å¼æ’åˆ—çª—å£ ChildWindowFromPoint è¿”å›çˆ¶çª—å£ä¸­åŒ…å«äº†æŒ‡å®šç‚¹çš„ç¬¬ä¸€ä¸ªå­çª—å£çš„å¥æŸ„ ClientToScreen åˆ¤æ–­çª—å£å†…ä»¥å®¢æˆ·åŒºåæ ‡è¡¨ç¤ºçš„ä¸€ä¸ªç‚¹çš„å±å¹•åæ ‡ CloseWindow æœ€å°åŒ–æŒ‡å®šçš„çª—å£ CopyRect çŸ©å½¢å†…å®¹å¤åˆ¶ DeferWindowPos è¯¥å‡½æ•°ä¸ºç‰¹å®šçš„çª—å£æŒ‡å®šä¸€ä¸ªæ–°çª—å£ä½ç½® DestroyWindow æ¸…é™¤æŒ‡å®šçš„çª—å£ä»¥åŠå®ƒçš„æ‰€æœ‰å­çª—å£ DrawAnimatedRects æç»˜ä¸€ç³»åˆ—åŠ¨æ€çŸ©å½¢ EnableWindow æŒ‡å®šçš„çª—å£é‡Œå…è®¸æˆ–ç¦æ­¢æ‰€æœ‰é¼ æ ‡åŠé”®ç›˜è¾“å…¥ EndDeferWindowPos åŒæ—¶æ›´æ–°DeferWindowPosè°ƒç”¨æ—¶æŒ‡å®šçš„æ‰€æœ‰çª—å£çš„ä½ç½®åŠçŠ¶æ€ EnumChildWindows ä¸ºæŒ‡å®šçš„çˆ¶çª—å£æšä¸¾å­çª—å£ EnumThreadWindows æšä¸¾ä¸æŒ‡å®šä»»åŠ¡ç›¸å…³çš„çª—å£ EnumWindows æšä¸¾çª—å£åˆ—è¡¨ä¸­çš„æ‰€æœ‰çˆ¶çª—å£ EqualRect åˆ¤æ–­ä¸¤ä¸ªçŸ©å½¢ç»“æ„æ˜¯å¦ç›¸åŒ FindWindow å¯»æ‰¾çª—å£åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªç¬¦åˆæŒ‡å®šæ¡ä»¶çš„é¡¶çº§çª—å£ FindWindowEx åœ¨çª—å£åˆ—è¡¨ä¸­å¯»æ‰¾ä¸æŒ‡å®šæ¡ä»¶ç›¸ç¬¦çš„ç¬¬ä¸€ä¸ªå­çª—å£ FlashWindow é—ªçƒæ˜¾ç¤ºæŒ‡å®šçª—å£ GetActiveWindow è·å¾—æ´»åŠ¨çª—å£çš„å¥æŸ„ GetCapture è·å¾—ä¸€ä¸ªçª—å£çš„å¥æŸ„ï¼Œè¿™ä¸ªçª—å£ä½äºå½“å‰è¾“å…¥çº¿ç¨‹ï¼Œä¸”æ‹¥æœ‰é¼ æ ‡æ•è·ï¼ˆé¼ æ ‡æ´»åŠ¨ç”±å®ƒæ¥æ”¶ï¼‰ GetClassInfo å–å¾—WNDCLASSç»“æ„ï¼ˆæˆ–WNDCLASSEXç»“æ„ï¼‰çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œç»“æ„ä¸­åŒ…å«äº†ä¸æŒ‡å®šç±»æœ‰å…³çš„ä¿¡æ¯ GetClassLong å–å¾—çª—å£ç±»çš„ä¸€ä¸ªLongå˜é‡æ¡ç›® GetClassName ä¸ºæŒ‡å®šçš„çª—å£å–å¾—ç±»å GetClassWord ä¸ºçª—å£ç±»å–å¾—ä¸€ä¸ªæ•´æ•°å˜é‡ GetClientRect è¿”å›æŒ‡å®šçª—å£å®¢æˆ·åŒºçŸ©å½¢çš„å¤§å° GetDesktopWindow è·å¾—ä»£è¡¨æ•´ä¸ªå±å¹•çš„ä¸€ä¸ªçª—å£ï¼ˆæ¡Œé¢çª—å£ï¼‰å¥æŸ„ GetFocus è·å¾—æ‹¥æœ‰è¾“å…¥ç„¦ç‚¹çš„çª—å£çš„å¥æŸ„ GetForegroundWindow è·å¾—å‰å°çª—å£çš„å¥æŸ„ GetLastActivePopup è·å¾—åœ¨ä¸€ä¸ªç»™å®šçˆ¶çª—å£ä¸­æœ€è¿‘æ¿€æ´»è¿‡çš„å¼¹å‡ºå¼çª—å£çš„å¥æŸ„ GetParent åˆ¤æ–­æŒ‡å®šçª—å£çš„çˆ¶çª—å£ GetTopWindow æœç´¢å†…éƒ¨çª—å£åˆ—è¡¨ï¼Œå¯»æ‰¾éš¶å±äºæŒ‡å®šçª—å£çš„å¤´ä¸€ä¸ªçª—å£çš„å¥æŸ„ GetUpdateRect è·å¾—ä¸€ä¸ªçŸ©å½¢ï¼Œå®ƒæå™äº†æŒ‡å®šçª—å£ä¸­éœ€è¦æ›´æ–°çš„é‚£ä¸€éƒ¨åˆ† GetWindow è·å¾—ä¸€ä¸ªçª—å£çš„å¥æŸ„ï¼Œè¯¥çª—å£ä¸æŸæºçª—å£æœ‰ç‰¹å®šçš„å…³ç³» GetWindowContextHelpId å–å¾—ä¸çª—å£å…³è”åœ¨ä¸€èµ·çš„å¸®åŠ©åœºæ™¯ID GetWindowLong ä»æŒ‡å®šçª—å£çš„ç»“æ„ä¸­å–å¾—ä¿¡æ¯ GetWindowPlacement è·å¾—æŒ‡å®šçª—å£çš„çŠ¶æ€åŠä½ç½®ä¿¡æ¯ GetWindowRect è·å¾—æ•´ä¸ªçª—å£çš„èŒƒå›´çŸ©å½¢,çª—å£çš„è¾¹æ¡†ã€æ ‡é¢˜æ ã€æ»šåŠ¨æ¡åŠèœå•ç­‰éƒ½åœ¨è¿™ä¸ªçŸ©å½¢å†… GetWindowText å–å¾—ä¸€ä¸ªçª—ä½“çš„æ ‡é¢˜ï¼ˆcaptionï¼‰æ–‡å­—ï¼Œæˆ–è€…ä¸€ä¸ªæ§ä»¶çš„å†…å®¹ GetWindowTextLength è°ƒæŸ¥çª—å£æ ‡é¢˜æ–‡å­—æˆ–æ§ä»¶å†…å®¹çš„é•¿çŸ­ GetWindowWord è·å¾—æŒ‡å®šçª—å£ç»“æ„çš„ä¿¡æ¯ InflateRect å¢å¤§æˆ–å‡å°ä¸€ä¸ªçŸ©å½¢çš„å¤§å° IntersectRect è¿™ä¸ªå‡½æ•°åœ¨ lpDestRect é‡Œè½½å…¥ä¸€ä¸ªçŸ©å½¢, å®ƒæ˜¯lpSrc1Rectä¸lpSrc2Rectä¸¤ä¸ªçŸ©å½¢çš„äº¤é›† InvalidateRect å±è”½ä¸€ä¸ªçª—å£å®¢æˆ·åŒºçš„å…¨éƒ¨æˆ–éƒ¨åˆ†åŒºåŸŸ IsChild åˆ¤æ–­ä¸€ä¸ªçª—å£æ˜¯å¦ä¸ºå¦ä¸€çª—å£çš„å­æˆ–éš¶å±çª—å£ IsIconic åˆ¤æ–­çª—å£æ˜¯å¦å·²æœ€å°åŒ– IsRectEmpty åˆ¤æ–­ä¸€ä¸ªçŸ©å½¢æ˜¯å¦ä¸ºç©º IsWindow åˆ¤æ–­ä¸€ä¸ªçª—å£å¥æŸ„æ˜¯å¦æœ‰æ•ˆ IsWindowEnabled åˆ¤æ–­çª—å£æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ IsWindowUnicode åˆ¤æ–­ä¸€ä¸ªçª—å£æ˜¯å¦ä¸ºUnicodeçª—å£ã€‚è¿™æ„å‘³ç€çª—å£ä¸ºæ‰€æœ‰åŸºäºæ–‡æœ¬çš„æ¶ˆæ¯éƒ½æ¥æ”¶Unicodeæ–‡å­— IsWindowVisible åˆ¤æ–­çª—å£æ˜¯å¦å¯è§ IsZoomed åˆ¤æ–­çª—å£æ˜¯å¦æœ€å¤§åŒ– LockWindowUpdate é”å®šæŒ‡å®šçª—å£ï¼Œç¦æ­¢å®ƒæ›´æ–° MapWindowPoints å°†ä¸€ä¸ªçª—å£å®¢æˆ·åŒºåæ ‡çš„ç‚¹è½¬æ¢åˆ°å¦ä¸€çª—å£çš„å®¢æˆ·åŒºåæ ‡ç³»ç»Ÿ MoveWindow æ”¹å˜æŒ‡å®šçª—å£çš„ä½ç½®å’Œå¤§å° OffsetRect é€šè¿‡åº”ç”¨ä¸€ä¸ªæŒ‡å®šçš„åç§»ï¼Œä»è€Œè®©çŸ©å½¢ç§»åŠ¨èµ·æ¥ OpenIcon æ¢å¤ä¸€ä¸ªæœ€å°åŒ–çš„ç¨‹åºï¼Œå¹¶å°†å…¶æ¿€æ´» PtInRect åˆ¤æ–­æŒ‡å®šçš„ç‚¹æ˜¯å¦ä½äºçŸ©å½¢å†…éƒ¨ RedrawWindow é‡ç”»å…¨éƒ¨æˆ–éƒ¨åˆ†çª—å£ ReleaseCapture ä¸ºå½“å‰çš„åº”ç”¨ç¨‹åºé‡Šæ”¾é¼ æ ‡æ•è· ScreenToClient åˆ¤æ–­å±å¹•ä¸Šä¸€ä¸ªæŒ‡å®šç‚¹çš„å®¢æˆ·åŒºåæ ‡ ScrollWindow æ»šåŠ¨çª—å£å®¢æˆ·åŒºçš„å…¨éƒ¨æˆ–ä¸€éƒ¨åˆ† ScrollWindowEx æ ¹æ®é™„åŠ çš„é€‰é¡¹ï¼Œæ»šåŠ¨çª—å£å®¢æˆ·åŒºçš„å…¨éƒ¨æˆ–éƒ¨åˆ† SetActiveWindow æ¿€æ´»æŒ‡å®šçš„çª—å£ SetCapture å°†é¼ æ ‡æ•è·è®¾ç½®åˆ°æŒ‡å®šçš„çª—å£ SetClassLong ä¸ºçª—å£ç±»è®¾ç½®ä¸€ä¸ªLongå˜é‡æ¡ç›® SetClassWord ä¸ºçª—å£ç±»è®¾ç½®ä¸€ä¸ªæ¡ç›® SetFocusAPI å°†è¾“å…¥ç„¦ç‚¹è®¾åˆ°æŒ‡å®šçš„çª—å£ã€‚å¦‚æœ‰å¿…è¦ï¼Œä¼šæ¿€æ´»çª—å£ SetForegroundWindow å°†çª—å£è®¾ä¸ºç³»ç»Ÿçš„å‰å°çª—å£ SetParent æŒ‡å®šä¸€ä¸ªçª—å£çš„æ–°çˆ¶ SetRect è®¾ç½®æŒ‡å®šçŸ©å½¢çš„å†…å®¹ SetRectEmpty å°†çŸ©å½¢è®¾ä¸ºä¸€ä¸ªç©ºçŸ©å½¢ SetWindowContextHelpId ä¸ºæŒ‡å®šçš„çª—å£è®¾ç½®å¸®åŠ©åœºæ™¯ï¼ˆä¸Šä¸‹æ–‡ï¼‰ID SetWindowLong åœ¨çª—å£ç»“æ„ä¸­ä¸ºæŒ‡å®šçš„çª—å£è®¾ç½®ä¿¡æ¯ SetWindowPlacement è®¾ç½®çª—å£çŠ¶æ€å’Œä½ç½®ä¿¡æ¯ SetWindowPos ä¸ºçª—å£æŒ‡å®šä¸€ä¸ªæ–°ä½ç½®å’ŒçŠ¶æ€ SetWindowText è®¾ç½®çª—å£çš„æ ‡é¢˜æ–‡å­—æˆ–æ§ä»¶çš„å†…å®¹ SetWindowWord åœ¨çª—å£ç»“æ„ä¸­ä¸ºæŒ‡å®šçš„çª—å£è®¾ç½®ä¿¡æ¯ ShowOwnedPopups æ˜¾ç¤ºæˆ–éšè—ç”±æŒ‡å®šçª—å£æ‰€æœ‰çš„å…¨éƒ¨å¼¹å‡ºå¼çª—å£ ShowWindow æ§åˆ¶çª—å£çš„å¯è§æ€§ ShowWindowAsync ä¸ShowWindowç›¸ä¼¼ SubtractRect è£…è½½çŸ©å½¢lprcDstï¼Œå®ƒæ˜¯åœ¨çŸ©å½¢lprcSrc1ä¸­å‡å»lprcSrc2å¾—åˆ°çš„ç»“æœ TileWindows ä»¥å¹³é“ºé¡ºåºæ’åˆ—çª—å£ UnionRect è£…è½½ä¸€ä¸ªlpDestRectç›®æ ‡çŸ©å½¢ï¼Œå®ƒæ˜¯lpSrc1Rectå’ŒlpSrc2Rectè”åˆèµ·æ¥çš„ç»“æœ UpdateWindow å¼ºåˆ¶ç«‹å³æ›´æ–°çª—å£ ValidateRect æ ¡éªŒçª—å£çš„å…¨éƒ¨æˆ–éƒ¨åˆ†å®¢æˆ·åŒº WindowFromPoint è¿”å›åŒ…å«äº†æŒ‡å®šç‚¹çš„çª—å£çš„å¥æŸ„ã€‚å¿½ç•¥å±è”½ã€éšè—ä»¥åŠé€æ˜çª—å£ 1.3 APIä¹‹æ–‡æœ¬å’Œå­—ä½“å‡½æ•° å‡½æ•°å ä½œç”¨ AddFontResource åœ¨Windowsç³»ç»Ÿä¸­æ·»åŠ ä¸€ç§å­—ä½“èµ„æº CreateFont ç”¨æŒ‡å®šçš„å±æ€§åˆ›å»ºä¸€ç§é€»è¾‘å­—ä½“ CreateFontIndirect ç”¨æŒ‡å®šçš„å±æ€§åˆ›å»ºä¸€ç§é€»è¾‘å­—ä½“ CreateScalableFontResource ä¸ºä¸€ç§TureTypeå­—ä½“åˆ›å»ºä¸€ä¸ªèµ„æºæ–‡ä»¶ï¼Œä»¥ä¾¿èƒ½ç”¨APIå‡½æ•°AddFontResourceå°†å…¶åŠ å…¥Windowsç³»ç»Ÿ DrawText å°†æ–‡æœ¬æç»˜åˆ°æŒ‡å®šçš„çŸ©å½¢ä¸­ DrawTextEx ä¸DrawTextç›¸ä¼¼ï¼Œåªæ˜¯åŠ å…¥äº†æ›´å¤šçš„åŠŸèƒ½ EnumFontFamilies åˆ—ä¸¾æŒ‡å®šè®¾å¤‡å¯ç”¨çš„å­—ä½“ EnumFontFamiliesEx åˆ—ä¸¾æŒ‡å®šè®¾å¤‡å¯ç”¨çš„å­—ä½“ EnumFonts åˆ—ä¸¾æŒ‡å®šè®¾å¤‡å¯ç”¨çš„å­—ä½“ ExtTextOut ç»è¿‡æ‰©å±•çš„æ–‡æœ¬æç»˜å‡½æ•°ã€‚ä¹Ÿè¯·å‚è€ƒSetTextAlignå‡½æ•° GetAspectRatioFilterEx ç”¨SetMapperFlagsè¦æ±‚Windowsåªé€‰æ‹©ä¸è®¾å¤‡å½“å‰çºµæ¨ªæ¯”ç›¸ç¬¦çš„å…‰æ …å­—ä½“æ—¶ï¼Œæœ¬å‡½æ•°å¯åˆ¤æ–­çºµæ¨ªæ¯”å¤§å° GetCharABCWidths åˆ¤æ–­TureTypeå­—ä½“ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„A-B-Cå¤§å° GetCharABCWidthsFloat æŸ¥è¯¢ä¸€ç§å­—ä½“ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„A-B-Cå°ºå¯¸ GetCharacterPlacement è¯¥å‡½æ•°ç”¨äºäº†è§£å¦‚ä½•ç”¨ä¸€ä¸ªç»™å®šçš„å­—ç¬¦æ˜¾ç¤ºä¸€ä¸ªå­—ä¸² GetCharWidth è°ƒæŸ¥å­—ä½“ä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦çš„å®½åº¦ GetFontData æ¥æ”¶ä¸€ç§å¯ç¼©æ”¾å­—ä½“æ–‡ä»¶çš„æ•°æ® GetFontLanguageInfo è¿”å›ç›®å‰é€‰å…¥æŒ‡å®šè®¾å¤‡åœºæ™¯ä¸­çš„å­—ä½“çš„ä¿¡æ¯ GetGlyphOutline å–å¾—TureTypeå­—ä½“ä¸­æ„æˆä¸€ä¸ªå­—ç¬¦çš„æ›²çº¿ä¿¡æ¯ GetKerningPairs å–å¾—æŒ‡å®šå­—ä½“çš„å­—è·ä¿¡æ¯ GetOutlineTextMetrics æ¥æ”¶ä¸TureTypeå­—ä½“å†…éƒ¨ç‰¹å¾æœ‰å…³çš„è¯¦ç»†ä¿¡æ¯ GetRasterizerCaps äº†è§£ç³»ç»Ÿæ˜¯å¦æœ‰èƒ½åŠ›æ”¯æŒå¯ç¼©æ”¾çš„å­—ä½“ GetTabbedTextExtent åˆ¤æ–­ä¸€ä¸ªå­—ä¸²å æ®çš„èŒƒå›´ï¼ŒåŒæ—¶è€ƒè™‘åˆ¶è¡¨ç«™æ‰©å……çš„å› ç´  GetTextAlign æ¥æ”¶ä¸€ä¸ªè®¾å¤‡åœºæ™¯å½“å‰çš„æ–‡æœ¬å¯¹é½æ ‡å¿— GetTextCharacterExtra åˆ¤æ–­é¢å¤–å­—ç¬¦é—´è·çš„å½“å‰å€¼ GetTextCharset æ¥æ”¶å½“å‰é€‰å…¥æŒ‡å®šè®¾å¤‡åœºæ™¯çš„å­—ä½“çš„å­—ç¬¦é›†æ ‡è¯†ç¬¦ GetTextCharsetInfo è·å–ä¸å½“å‰é€‰å®šå­—ä½“çš„å­—ç¬¦é›†æœ‰å…³çš„è¯¦ç»†ä¿¡æ¯ GetTextColor åˆ¤æ–­å½“å‰å­—ä½“é¢œè‰²ã€‚é€šå¸¸ä¹Ÿç§°ä¸ºâ€œå‰æ™¯è‰²â€ GetTextExtentExPoint åˆ¤æ–­è¦å¡«å…¥æŒ‡å®šåŒºåŸŸçš„å­—ç¬¦æ•°é‡ã€‚ä¹Ÿç”¨ä¸€ä¸ªæ•°ç»„è£…è½½æ¯ä¸ªå­—ç¬¦çš„èŒƒå›´ä¿¡æ¯ GetTextExtentPoint åˆ¤æ–­ä¸€ä¸ªå­—ä¸²çš„å¤§å°ï¼ˆèŒƒå›´ï¼‰ GetTextFace è·å–ä¸€ç§å­—ä½“çš„å­—æ ·å GetTextMetrics è·å–ä¸é€‰å…¥ä¸€ç§è®¾å¤‡åœºæ™¯çš„ç‰©ç†å­—ä½“æœ‰å…³çš„ä¿¡æ¯ GrayString æç»˜ä¸€ä¸ªä»¥ç°è‰²æ˜¾ç¤ºçš„å­—ä¸²ã€‚é€šå¸¸ç”±Windowsç”¨äºæ ‡è¯†ç¦æ­¢çŠ¶æ€ PolyTextOut æç»˜ä¸€ç³»åˆ—å­—ä¸² RemoveFontResource ä»Windowsç³»ç»Ÿä¸­åˆ é™¤ä¸€ç§å­—ä½“èµ„æº SetMapperFlags Windows å¯¹å­—ä½“è¿›è¡Œæ˜ å°„æ—¶ï¼Œå¯ç”¨è¯¥å‡½æ•°é€‰æ‹©ä¸ç›®æ ‡è®¾å¤‡çš„çºµæ¨ªæ¯”ç›¸ç¬¦çš„å…‰æ …å­—ä½“ SetTextAlign è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ï¼Œå¹¶æŒ‡å®šåœ¨æ–‡æœ¬è¾“å‡ºè¿‡ç¨‹ä¸­ä½¿ç”¨è®¾å¤‡åœºæ™¯çš„å½“å‰ä½ç½® SetTextCharacterExtra æç»˜æ–‡æœ¬çš„æ—¶å€™ï¼ŒæŒ‡å®šè¦åœ¨å­—ç¬¦é—´æ’å…¥çš„é¢å¤–é—´è· SetTextColor è®¾ç½®å½“å‰æ–‡æœ¬é¢œè‰²ã€‚è¿™ç§é¢œè‰²ä¹Ÿç§°ä¸ºâ€œå‰æ™¯è‰²â€ SetTextJustification é€šè¿‡æŒ‡å®šä¸€ä¸ªæ–‡æœ¬è¡Œåº”å æ®çš„é¢å¤–ç©ºé—´ï¼Œå¯ç”¨è¿™ä¸ªå‡½æ•°å¯¹æ–‡æœ¬è¿›è¡Œä¸¤ç«¯å¯¹é½å¤„ç† TabbedTextOut æ”¯æŒåˆ¶è¡¨ç«™çš„ä¸€ä¸ªæ–‡æœ¬æç»˜å‡½æ•° TextOut æ–‡æœ¬ç»˜å›¾å‡½æ•° 1.4 APIä¹‹ä½å›¾ã€å›¾æ ‡å’Œå…‰æ …è¿ç®—å‡½æ•° å‡½æ•°å ä½œç”¨ BitBlt å°†ä¸€å¹…ä½å›¾ä»ä¸€ä¸ªè®¾å¤‡åœºæ™¯å¤åˆ¶åˆ°å¦ä¸€ä¸ª CopyIcon åˆ¶ä½œæŒ‡å®šå›¾æ ‡æˆ–é¼ æ ‡æŒ‡é’ˆçš„ä¸€ä¸ªå‰¯æœ¬ã€‚è¿™ä¸ªå‰¯æœ¬ä»å±äºå‘å‡ºè°ƒç”¨çš„åº”ç”¨ç¨‹åº CopyImage å¤åˆ¶ä½å›¾ã€å›¾æ ‡æˆ–æŒ‡é’ˆï¼ŒåŒæ—¶åœ¨å¤åˆ¶è¿‡ç¨‹ä¸­è¿›è¡Œä¸€äº›è½¬æ¢å·¥ä½œ CreateBitmap æŒ‰ç…§è§„å®šçš„æ ¼å¼åˆ›å»ºä¸€å¹…ä¸è®¾å¤‡æœ‰å…³ä½å›¾ CreateBitmapIndirect åˆ›å»ºä¸€å¹…ä¸è®¾å¤‡æœ‰å…³ä½å›¾ CreateCompatibleBitmap åˆ›å»ºä¸€å¹…ä¸è®¾å¤‡æœ‰å…³ä½å›¾ï¼Œå®ƒä¸æŒ‡å®šçš„è®¾å¤‡åœºæ™¯å…¼å®¹ CreateCursor åˆ›å»ºä¸€ä¸ªé¼ æ ‡æŒ‡é’ˆ CreateDIBitmap æ ¹æ®ä¸€å¹…ä¸è®¾å¤‡æ— å…³çš„ä½å›¾åˆ›å»ºä¸€å¹…ä¸è®¾å¤‡æœ‰å…³çš„ä½å›¾ CreateDIBSection åˆ›å»ºä¸€ä¸ªDIBSection CreateIcon åˆ›å»ºä¸€ä¸ªå›¾æ ‡ CreateIconIndirect åˆ›å»ºä¸€ä¸ªå›¾æ ‡ DestroyCursor æ¸…é™¤æŒ‡å®šçš„é¼ æ ‡æŒ‡é’ˆï¼Œå¹¶é‡Šæ”¾å®ƒå ç”¨çš„æ‰€æœ‰ç³»ç»Ÿèµ„æº DestroyIcon æ¸…é™¤å›¾æ ‡ DrawIcon åœ¨æŒ‡å®šçš„ä½ç½®ç”»ä¸€ä¸ªå›¾æ ‡ DrawIconEx æç»˜ä¸€ä¸ªå›¾æ ‡æˆ–é¼ æ ‡æŒ‡é’ˆã€‚ä¸DrawIconç›¸æ¯”ï¼Œè¿™ä¸ªå‡½æ•°æä¾›äº†æ›´å¤šçš„åŠŸèƒ½ ExtractAssociatedIcon åˆ¤æ–­ä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºæˆ–DLLä¸­æ˜¯å¦å­˜åœ¨å›¾æ ‡ï¼Œæˆ–æ˜¯å¦æœ‰å›¾æ ‡ä¸ç³»ç»Ÿæ³¨å†Œè¡¨ä¸­æŒ‡å®šçš„æ–‡ä»¶å­˜åœ¨å…³è”å¹¶æå–ä¹‹ ExtractIcon åˆ¤æ–­ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶æˆ–DLLä¸­æ˜¯å¦æœ‰å›¾æ ‡å­˜åœ¨ï¼Œå¹¶å°†å…¶æå–å‡ºæ¥ GetBitmapBits å°†æ¥è‡ªä½å›¾çš„äºŒè¿›åˆ¶ä½å¤åˆ¶åˆ°ä¸€ä¸ªç¼“å†²åŒº GetBitmapDimensionEx å–å¾—ä¸€å¹…ä½å›¾çš„å®½åº¦å’Œé«˜åº¦ GetDIBColorTable ä»é€‰å…¥è®¾å¤‡åœºæ™¯çš„DIBSectionä¸­å–å¾—é¢œè‰²è¡¨ä¿¡æ¯ GetDIBits å°†æ¥è‡ªä¸€å¹…ä½å›¾çš„äºŒè¿›åˆ¶ä½å¤åˆ¶åˆ°ä¸€å¹…ä¸è®¾å¤‡æ— å…³çš„ä½å›¾é‡Œ GetIconInfo å–å¾—ä¸å›¾æ ‡æœ‰å…³çš„ä¿¡æ¯ GetStretchBltMode åˆ¤æ–­StretchBlt å’Œ StretchDIBitså‡½æ•°é‡‡ç”¨çš„ä¼¸ç¼©æ¨¡å¼ LoadBitmap ä»æŒ‡å®šçš„æ¨¡å—æˆ–åº”ç”¨ç¨‹åºå®ä¾‹ä¸­è½½å…¥ä¸€å¹…ä½å›¾ LoadCursor ä»æŒ‡å®šçš„æ¨¡å—æˆ–åº”ç”¨ç¨‹åºå®ä¾‹ä¸­è½½å…¥ä¸€ä¸ªé¼ æ ‡æŒ‡é’ˆ LoadCursorFromFile åœ¨ä¸€ä¸ªæŒ‡é’ˆæ–‡ä»¶æˆ–ä¸€ä¸ªåŠ¨ç”»æŒ‡é’ˆæ–‡ä»¶çš„åŸºç¡€ä¸Šåˆ›å»ºä¸€ä¸ªæŒ‡é’ˆ LoadIcon ä»æŒ‡å®šçš„æ¨¡å—æˆ–åº”ç”¨ç¨‹åºå®ä¾‹ä¸­è½½å…¥ä¸€ä¸ªå›¾æ ‡ LoadImage è½½å…¥ä¸€ä¸ªä½å›¾ã€å›¾æ ‡æˆ–æŒ‡é’ˆ MaskBlt æ‰§è¡Œå¤æ‚çš„å›¾è±¡ä¼ è¾“ï¼ŒåŒæ—¶è¿›è¡Œæ©æ¨¡ï¼ˆMASKï¼‰å¤„ç† PatBlt åœ¨å½“å‰é€‰å®šçš„åˆ·å­çš„åŸºç¡€ä¸Šï¼Œç”¨ä¸€ä¸ªå›¾æ¡ˆå¡«å……æŒ‡å®šçš„è®¾å¤‡åœºæ™¯ PlgBlt å¤åˆ¶ä¸€å¹…ä½å›¾ï¼ŒåŒæ—¶å°†å…¶è½¬æ¢æˆä¸€ä¸ªå¹³è¡Œå››è¾¹å½¢ã€‚åˆ©ç”¨å®ƒå¯å¯¹ä½å›¾è¿›è¡Œæ—‹è½¬å¤„ç† SetBitmapBits å°†æ¥è‡ªç¼“å†²åŒºçš„äºŒè¿›åˆ¶ä½å¤åˆ¶åˆ°ä¸€å¹…ä½å›¾ SetBitmapDimensionEx è®¾ç½®ä¸€å¹…ä½å›¾çš„å®½åº¦ã€‚ä»¥ä¸€æ¯«ç±³çš„ååˆ†ä¹‹ä¸€ä¸ºå•ä½ SetDIBColorTable è®¾ç½®é€‰å…¥è®¾å¤‡åœºæ™¯çš„ä¸€ä¸ªDIBSectionçš„é¢œè‰²è¡¨ä¿¡æ¯ SetDIBits å°†æ¥è‡ªä¸è®¾å¤‡æ— å…³ä½å›¾çš„äºŒè¿›åˆ¶ä½å¤åˆ¶åˆ°ä¸€å¹…ä¸è®¾å¤‡æœ‰å…³çš„ä½å›¾é‡Œ SetDIBitsToDevice å°†ä¸€å¹…ä¸è®¾å¤‡æ— å…³ä½å›¾çš„å…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®ç›´æ¥å¤åˆ¶åˆ°ä¸€ä¸ªè®¾å¤‡ SetStretchBltMode æŒ‡å®šStretchBlt å’Œ StretchDIBitså‡½æ•°çš„ä¼¸ç¼©æ¨¡å¼ StretchBlt å°†ä¸€å¹…ä½å›¾ä»ä¸€ä¸ªè®¾å¤‡åœºæ™¯å¤åˆ¶åˆ°å¦ä¸€ä¸ª StretchDIBits å°†ä¸€å¹…ä¸è®¾å¤‡æ— å…³ä½å›¾çš„å…¨éƒ¨æˆ–éƒ¨åˆ†æ•°æ®ç›´æ¥å¤åˆ¶åˆ°æŒ‡å®šçš„è®¾å¤‡åœºæ™¯ 1.5 APIä¹‹èœå•å‡½æ•° å‡½æ•°å ä½œç”¨ AppendMenu åœ¨æŒ‡å®šçš„èœå•é‡Œæ·»åŠ ä¸€ä¸ªèœå•é¡¹ CheckMenuItem å¤é€‰æˆ–æ’¤æ¶ˆå¤é€‰æŒ‡å®šçš„èœå•æ¡ç›® CheckMenuRadioItem æŒ‡å®šä¸€ä¸ªèœå•æ¡ç›®è¢«å¤é€‰æˆâ€œå•é€‰â€é¡¹ç›® CreateMenu åˆ›å»ºæ–°èœå• CreatePopupMenu åˆ›å»ºä¸€ä¸ªç©ºçš„å¼¹å‡ºå¼èœå• DeleteMenu åˆ é™¤æŒ‡å®šçš„èœå•æ¡ç›® DestroyMenu åˆ é™¤æŒ‡å®šçš„èœå• DrawMenuBar ä¸ºæŒ‡å®šçš„çª—å£é‡ç”»èœå• EnableMenuItem å…è®¸æˆ–ç¦æ­¢æŒ‡å®šçš„èœå•æ¡ç›® GetMenu å–å¾—çª—å£ä¸­ä¸€ä¸ªèœå•çš„å¥æŸ„ GetMenuCheckMarkDimensions è¿”å›ä¸€ä¸ªèœå•å¤é€‰ç¬¦çš„å¤§å° GetMenuContextHelpId å–å¾—ä¸€ä¸ªèœå•çš„å¸®åŠ©åœºæ™¯ID GetMenuDefaultItem åˆ¤æ–­èœå•ä¸­çš„å“ªä¸ªæ¡ç›®æ˜¯é»˜è®¤æ¡ç›® GetMenuItemCount è¿”å›èœå•ä¸­æ¡ç›®ï¼ˆèœå•é¡¹ï¼‰çš„æ•°é‡ GetMenuItemID è¿”å›ä½äºèœå•ä¸­æŒ‡å®šä½ç½®å¤„çš„æ¡ç›®çš„èœå•ID GetMenuItemInfo å–å¾—ï¼ˆæ¥æ”¶ï¼‰ä¸ä¸€ä¸ªèœå•æ¡ç›®æœ‰å…³çš„ç‰¹å®šä¿¡æ¯ GetMenuItemRect åœ¨ä¸€ä¸ªçŸ©å½¢ä¸­è£…è½½æŒ‡å®šèœå•æ¡ç›®çš„å±å¹•åæ ‡ä¿¡æ¯ GetMenuState å–å¾—ä¸æŒ‡å®šèœå•æ¡ç›®çŠ¶æ€æœ‰å…³çš„ä¿¡æ¯ GetMenuString å–å¾—æŒ‡å®šèœå•æ¡ç›®çš„å­—ä¸² GetSubMenu å–å¾—ä¸€ä¸ªå¼¹å‡ºå¼èœå•çš„å¥æŸ„ï¼Œå®ƒä½äºèœå•ä¸­æŒ‡å®šçš„ä½ç½® GetSystemMenu å–å¾—æŒ‡å®šçª—å£çš„ç³»ç»Ÿèœå•çš„å¥æŸ„ HiliteMenuItem æ§åˆ¶é¡¶çº§èœå•æ¡ç›®çš„åŠ äº®æ˜¾ç¤ºçŠ¶æ€ InsertMenu åœ¨èœå•çš„æŒ‡å®šä½ç½®å¤„æ’å…¥ä¸€ä¸ªèœå•æ¡ç›®ï¼Œå¹¶æ ¹æ®éœ€è¦å°†å…¶ä»–æ¡ç›®å‘ä¸‹ç§»åŠ¨ InsertMenuItem æ’å…¥ä¸€ä¸ªæ–°èœå•æ¡ç›® IsMenu åˆ¤æ–­æŒ‡å®šçš„å¥æŸ„æ˜¯å¦ä¸ºä¸€ä¸ªèœå•çš„å¥æŸ„ LoadMenu ä»æŒ‡å®šçš„æ¨¡å—æˆ–åº”ç”¨ç¨‹åºå®ä¾‹ä¸­è½½å…¥ä¸€ä¸ªèœå• LoadMenuIndirect è½½å…¥ä¸€ä¸ªèœå• MenuItemFromPoint åˆ¤æ–­å“ªä¸ªèœå•æ¡ç›®åŒ…å«äº†å±å¹•ä¸Šä¸€ä¸ªæŒ‡å®šçš„ç‚¹ ModifyMenu æ”¹å˜èœå•æ¡ç›® RemoveMenu åˆ é™¤æŒ‡å®šçš„èœå•æ¡ç›® SetMenu è®¾ç½®çª—å£èœå• SetMenuContextHelpId è®¾ç½®ä¸€ä¸ªèœå•çš„å¸®åŠ©åœºæ™¯ID SetMenuDefaultItem å°†ä¸€ä¸ªèœå•æ¡ç›®è®¾ä¸ºé»˜è®¤æ¡ç›® SetMenuItemBitmaps è®¾ç½®ä¸€å¹…ç‰¹å®šä½å›¾ï¼Œä»¤å…¶åœ¨æŒ‡å®šçš„èœå•æ¡ç›®ä¸­ä½¿ç”¨ï¼Œä»£æ›¿æ ‡å‡†çš„å¤é€‰ç¬¦å·ï¼ˆâˆšï¼‰ SetMenuItemInfo ä¸ºä¸€ä¸ªèœå•æ¡ç›®è®¾ç½®æŒ‡å®šçš„ä¿¡æ¯ TrackPopupMenu åœ¨å±å¹•çš„ä»»æ„åœ°æ–¹æ˜¾ç¤ºä¸€ä¸ªå¼¹å‡ºå¼èœå• TrackPopupMenuEx ä¸TrackPopupMenu ç›¸ä¼¼ï¼Œåªæ˜¯å®ƒæä¾›äº†é¢å¤–çš„åŠŸèƒ½ 1.6 APIä¹‹è®¾å¤‡åœºæ™¯å‡½æ•° å‡½æ•°å ä½œç”¨ CombineRgn å°†ä¸¤ä¸ªåŒºåŸŸç»„åˆä¸ºä¸€ä¸ªæ–°åŒºåŸŸ CombineTransform é©±åŠ¨ä¸–ç•Œè½¬æ¢ã€‚å®ƒç›¸å½“äºä¾é¡ºåºè¿›è¡Œä¸¤æ¬¡è½¬æ¢ CreateCompatibleDC åˆ›å»ºä¸€ä¸ªä¸ç‰¹å®šè®¾å¤‡åœºæ™¯ä¸€è‡´çš„å†…å­˜è®¾å¤‡åœºæ™¯ CreateDC ä¸ºä¸“é—¨è®¾å¤‡åˆ›å»ºè®¾å¤‡åœºæ™¯ CreateEllipticRgn åˆ›å»ºä¸€ä¸ªæ¤­åœ† CreateEllipticRgnIndirect åˆ›å»ºä¸€ä¸ªå†…åˆ‡äºç‰¹å®šçŸ©å½¢çš„æ¤­åœ†åŒºåŸŸ CreateIC ä¸ºä¸“ç”¨è®¾å¤‡åˆ›å»ºä¸€ä¸ªä¿¡æ¯åœºæ™¯ CreatePolygonRgn åˆ›å»ºä¸€ä¸ªç”±ä¸€ç³»åˆ—ç‚¹å›´æˆçš„åŒºåŸŸ CreatePolyPolygonRgn åˆ›å»ºç”±å¤šä¸ªå¤šè¾¹å½¢æ„æˆçš„åŒºåŸŸã€‚æ¯ä¸ªå¤šè¾¹å½¢éƒ½åº”æ˜¯å°é—­çš„ CreateRectRgn åˆ›å»ºä¸€ä¸ªçŸ©å½¢åŒºåŸŸ CreateRectRgnIndirect åˆ›å»ºä¸€ä¸ªçŸ©å½¢åŒºåŸŸ CreateRoundRectRgn åˆ›å»ºä¸€ä¸ªåœ†è§’çŸ©å½¢ DeleteDC åˆ é™¤ä¸“ç”¨è®¾å¤‡åœºæ™¯æˆ–ä¿¡æ¯åœºæ™¯ï¼Œé‡Šæ”¾æ‰€æœ‰ç›¸å…³çª—å£èµ„æº DPtoLP å°†ç‚¹é˜µä»è®¾å¤‡åæ ‡è½¬æ¢åˆ°ä¸“ç”¨è®¾å¤‡åœºæ™¯é€»è¾‘åæ ‡ EqualRgn ç¡®å®šä¸¤ä¸ªåŒºåŸŸæ˜¯å¦ç›¸ç­‰ ExcludeClipRect ä»ä¸“ç”¨è®¾å¤‡åœºæ™¯çš„å‰ªè£åŒºä¸­å»æ‰ä¸€ä¸ªçŸ©å½¢åŒºã€‚çŸ©å½¢å†…ä¸èƒ½è¿›è¡Œç»˜å›¾ ExcludeUpdateRgn ä»ä¸“ç”¨è®¾å¤‡åœºæ™¯å‰ªè£åŒºå»æ‰æŒ‡å®šçª—å£çš„åˆ·æ–°åŒºåŸŸ ExtCreateRegion æ ¹æ®ä¸–ç•Œè½¬æ¢ä¿®æ”¹åŒºåŸŸ ExtSelectClipRgn å°†æŒ‡å®šåŒºåŸŸç»„åˆåˆ°è®¾å¤‡åœºæ™¯çš„å½“å‰å‰ªè£åŒº FillRgn ç”¨æŒ‡å®šåˆ·å­å¡«å……æŒ‡å®šåŒºåŸŸ FrameRgn ç”¨æŒ‡å®šåˆ·å­å›´ç»•æŒ‡å®šåŒºåŸŸç”»ä¸€ä¸ªå¤–æ¡† GetBoundsRect è·å–æŒ‡å®šè®¾å¤‡åœºæ™¯çš„è¾¹ç•ŒçŸ©å½¢ GetClipBox è·å–å®Œå…¨åŒ…å«æŒ‡å®šè®¾å¤‡åœºæ™¯å‰ªè£åŒºçš„æœ€å°çŸ©å½¢ GetClipRgn è·å–è®¾å¤‡åœºæ™¯å½“å‰å‰ªè£åŒº GetDC è·å–æŒ‡å®šçª—å£çš„è®¾å¤‡åœºæ™¯ GetDCEx ä¸ºæŒ‡å®šçª—å£è·å–è®¾å¤‡åœºæ™¯ã€‚ç›¸æ¯”GetDCï¼Œæœ¬å‡½æ•°æä¾›äº†æ›´å¤šçš„é€‰é¡¹ GetDCOrgEx è·å–æŒ‡å®šè®¾å¤‡åœºæ™¯èµ·ç‚¹ä½ç½®ï¼ˆä»¥å±å¹•åæ ‡è¡¨ç¤ºï¼‰ GetDeviceCaps æ ¹æ®æŒ‡å®šè®¾å¤‡åœºæ™¯ä»£è¡¨çš„è®¾å¤‡çš„åŠŸèƒ½è¿”å›ä¿¡æ¯ GetGraphicsMode ç¡®å®šæ˜¯å¦å…è®¸å¢å¼ºå›¾å½¢æ¨¡å¼ï¼ˆä¸–ç•Œè½¬æ¢ï¼‰ GetMapMode ä¸ºç‰¹å®šè®¾å¤‡åœºæ™¯è°ƒå…¥æ˜ è±¡æ¨¡å¼ GetRegionData è£…å…¥æè¿°ä¸€ä¸ªåŒºåŸŸä¿¡æ¯çš„RgnDataç»“æ„æˆ–ç¼“å†²åŒº GetRgnBox è·å–å®Œå…¨åŒ…å«æŒ‡å®šåŒºåŸŸçš„æœ€å°çŸ©å½¢ GetUpdateRgn ç¡®å®šæŒ‡å®šçª—å£çš„åˆ·æ–°åŒºåŸŸã€‚è¯¥åŒºåŸŸå½“å‰æ— æ•ˆï¼Œéœ€è¦åˆ·æ–° GetViewportExtEx è·å–è®¾å¤‡åœºæ™¯è§†å£ï¼ˆviewportï¼‰èŒƒå›´ GetViewportOrgEx è·å–è®¾å¤‡åœºæ™¯è§†å£èµ·ç‚¹ GetWindowDC è·å–æ•´ä¸ªçª—å£ï¼ˆåŒ…æ‹¬è¾¹æ¡†ã€æ»šåŠ¨æ¡ã€æ ‡é¢˜æ ã€èœå•ç­‰ï¼‰çš„è®¾å¤‡åœºæ™¯ GetWindowExtEx è·å–æŒ‡å®šè®¾å¤‡åœºæ™¯çš„çª—å£èŒƒå›´ GetWindowOrgEx è·å–æŒ‡å®šè®¾å¤‡åœºæ™¯çš„é€»è¾‘çª—å£çš„èµ·ç‚¹ GetWindowRgn è·å–çª—å£åŒºåŸŸ GetWorldTransform å¦‚æœæœ‰ä¸–ç•Œè½¬æ¢ï¼Œä¸ºè®¾å¤‡åœºæ™¯è·å–å½“å‰ä¸–ç•Œè½¬æ¢ IntersectClipRect ä¸ºæŒ‡å®šè®¾å¤‡å®šä¹‰ä¸€ä¸ªæ–°çš„å‰ªè£åŒº InvalidateRgn ä½¿çª—å£æŒ‡å®šåŒºåŸŸä¸æ´»åŠ¨ï¼Œå¹¶å°†å®ƒåŠ å…¥çª—å£åˆ·æ–°åŒºï¼Œä½¿ä¹‹å¯éšåè¢«é‡ç”» InvertRgn é€šè¿‡é¢ å€’æ¯ä¸ªåƒç´ å€¼åè½¬è®¾å¤‡åœºæ™¯æŒ‡å®šåŒºåŸŸ LPtoDP å°†ç‚¹é˜µä»æŒ‡å®šè®¾å¤‡åœºæ™¯é€»è¾‘åæ ‡è½¬æ¢ä¸ºè®¾å¤‡åæ ‡ ModifyWorldTransform æ ¹æ®æŒ‡å®šçš„æ¨¡å¼ä¿®æ”¹ä¸–ç•Œè½¬æ¢ OffsetClipRgn æŒ‰æŒ‡å®šé‡å¹³ç§»è®¾å¤‡åœºæ™¯å‰ªè£åŒº OffsetRgn æŒ‰æŒ‡å®šåç§»é‡å¹³ç§»æŒ‡å®šåŒºåŸŸ OffsetViewportOrgEx å¹³ç§»è®¾å¤‡åœºæ™¯è§†å£åŒºåŸŸ OffsetWindowOrgEx å¹³ç§»æŒ‡å®šè®¾å¤‡åœºæ™¯çª—å£èµ·ç‚¹ PaintRgn ç”¨å½“å‰åˆ·å­èƒŒæ™¯è‰²å¡«å……æŒ‡å®šåŒºåŸŸ PtInRegion ç¡®å®šç‚¹æ˜¯å¦åœ¨æŒ‡å®šåŒºåŸŸå†… PtVisible ç¡®å®šæŒ‡å®šç‚¹æ˜¯å¦å¯è§ï¼ˆå³ï¼Œç‚¹æ˜¯å¦åœ¨è®¾å¤‡åœºæ™¯å‰ªè£åŒºå†…ï¼‰ RectInRegion ç¡®å®šçŸ©å½¢æ˜¯å¦æœ‰éƒ¨åˆ†åœ¨æŒ‡å®šåŒºåŸŸå†… RectVisible ç¡®å®šæŒ‡å®šçŸ©å½¢æ˜¯å¦æœ‰éƒ¨åˆ†å¯è§ï¼ˆæ˜¯å¦åœ¨è®¾å¤‡åœºæ™¯å‰ªè£åŒºå†…ï¼‰ ReleaseDC é‡Šæ”¾ç”±è°ƒç”¨GetDCæˆ–GetWindowDCå‡½æ•°è·å–çš„æŒ‡å®šè®¾å¤‡åœºæ™¯ RestoreDC ä»è®¾å¤‡åœºæ™¯å †æ ˆæ¢å¤ä¸€ä¸ªåŸå…ˆä¿å­˜çš„è®¾å¤‡åœºæ™¯ SaveDC å°†æŒ‡å®šè®¾å¤‡åœºæ™¯çŠ¶æ€ä¿å­˜åˆ°Windowsè®¾å¤‡åœºæ™¯å †æ ˆ ScaleViewportExtEx ç¼©æ”¾è®¾å¤‡åœºæ™¯è§†å£çš„èŒƒå›´ ScaleWindowExtEx ç¼©æ”¾æŒ‡å®šè®¾å¤‡åœºæ™¯çª—å£èŒƒå›´ ScrollDC åœ¨çª—å£ï¼ˆç”±è®¾å¤‡åœºæ™¯ä»£è¡¨ï¼‰ä¸­æ°´å¹³å’Œï¼ˆæˆ–ï¼‰å‚ç›´æ»šåŠ¨çŸ©å½¢ SelectClipRgn ä¸ºæŒ‡å®šè®¾å¤‡åœºæ™¯é€‰æ‹©æ–°çš„å‰ªè£åŒº SetBoundsRect è®¾ç½®æŒ‡å®šè®¾å¤‡åœºæ™¯çš„è¾¹ç•ŒçŸ©å½¢ SetGraphicsMode å…è®¸æˆ–ç¦æ­¢å¢å¼ºå›¾å½¢æ¨¡å¼ï¼Œä»¥æä¾›æŸäº›æ”¯æŒï¼ˆåŒ…æ‹¬ä¸–ç•Œè½¬æ¢ï¼‰ SetMapMode è®¾ç½®æŒ‡å®šè®¾å¤‡åœºæ™¯çš„æ˜ å°„æ¨¡å¼ SetRectRgn è®¾ç½®åŒºåŸŸä¸ºæŒ‡å®šçš„çŸ©å½¢ SetViewportExtEx è®¾ç½®è®¾å¤‡åœºæ™¯è§†å£èŒƒå›´ SetViewportOrgEx è®¾ç½®è®¾å¤‡åœºæ™¯è§†å£èµ·ç‚¹ SetWindowExtEx è®¾ç½®æŒ‡å®šè®¾å¤‡åœºæ™¯çª—å£èŒƒå›´ SetWindowOrgEx è®¾ç½®æŒ‡å®šè®¾å¤‡åœºæ™¯çª—å£èµ·ç‚¹ SetWindowRgn è®¾ç½®çª—å£åŒºåŸŸ SetWorldTransform è®¾ç½®ä¸–ç•Œè½¬æ¢ ValidateRgn æ¿€æ´»çª—å£ä¸­æŒ‡å®šåŒºåŸŸï¼ŒæŠŠå®ƒä»åˆ·æ–°åŒºç§»èµ° WindowFromDC å–å›ä¸æŸä¸€è®¾å¤‡åœºæ™¯ç›¸å…³çš„çª—å£çš„å¥æŸ„ 1.7 APIä¹‹è¿›ç¨‹å’Œçº¿ç¨‹å‡½æ•° å‡½æ•°å ä½œç”¨ CancelWaitableTimer è¿™ä¸ªå‡½æ•°ç”¨äºå–æ¶ˆä¸€ä¸ªå¯ä»¥ç­‰å¾…ä¸‹å»çš„è®¡æ—¶å™¨æ“ä½œ CallNamedPipe è¿™ä¸ªå‡½æ•°ç”±ä¸€ä¸ªå¸Œæœ›é€šè¿‡ç®¡é“é€šä¿¡çš„ä¸€ä¸ªå®¢æˆ·è¿›ç¨‹è°ƒç”¨ ConnectNamedPipe æŒ‡ç¤ºä¸€å°æœåŠ¡å™¨ç­‰å¾…ä¸‹å»ï¼Œç›´è‡³å®¢æˆ·æœºåŒä¸€ä¸ªå‘½åç®¡é“è¿æ¥ CreateEvent åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¯¹è±¡ CreateMailslot åˆ›å»ºä¸€ä¸ªé‚®è·¯ã€‚è¿”å›çš„å¥æŸ„ç”±é‚®è·¯æœåŠ¡å™¨ä½¿ç”¨ï¼ˆæ”¶ä»¶äººï¼‰ CreateMutex åˆ›å»ºä¸€ä¸ªäº’æ–¥ä½“ï¼ˆMUTEXï¼‰ CreateNamedPipe åˆ›å»ºä¸€ä¸ªå‘½åç®¡é“ã€‚è¿”å›çš„å¥æŸ„ç”±ç®¡é“çš„æœåŠ¡å™¨ç«¯ä½¿ç”¨ CreatePipe åˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“ CreateProcess åˆ›å»ºä¸€ä¸ªæ–°è¿›ç¨‹ï¼ˆæ¯”å¦‚æ‰§è¡Œä¸€ä¸ªç¨‹åºï¼‰ CreateSemaphore åˆ›å»ºä¸€ä¸ªæ–°çš„ä¿¡å·æœº CreateWaitableTimer åˆ›å»ºä¸€ä¸ªå¯ç­‰å¾…çš„è®¡æ—¶å™¨å¯¹è±¡ DisconnectNamedPipe æ–­å¼€ä¸€ä¸ªå®¢æˆ·ä¸ä¸€ä¸ªå‘½åç®¡é“çš„è¿æ¥ DuplicateHandle åœ¨æŒ‡å‡ºä¸€ä¸ªç°æœ‰ç³»ç»Ÿå¯¹è±¡å½“å‰å¥æŸ„çš„æƒ…å†µä¸‹ï¼Œä¸ºé‚£ä¸ªå¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°å¥æŸ„ ExitProcess ä¸­æ­¢ä¸€ä¸ªè¿›ç¨‹ FindCloseChangeNotification å…³é—­ä¸€ä¸ªæ”¹åŠ¨é€šçŸ¥å¯¹è±¡ FindExecutable æŸ¥æ‰¾ä¸ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶å…³è”åœ¨ä¸€èµ·çš„ç¨‹åºçš„æ–‡ä»¶å FindFirstChangeNotification åˆ›å»ºä¸€ä¸ªæ–‡ä»¶é€šçŸ¥å¯¹è±¡ã€‚è¯¥å¯¹è±¡ç”¨äºç›‘è§†æ–‡ä»¶ç³»ç»Ÿå‘ç”Ÿçš„å˜åŒ– FindNextChangeNotification é‡è®¾ä¸€ä¸ªæ–‡ä»¶æ”¹å˜é€šçŸ¥å¯¹è±¡ï¼Œä»¤å…¶ç»§ç»­ç›‘è§†ä¸‹ä¸€æ¬¡å˜åŒ– FreeLibrary é‡Šæ”¾æŒ‡å®šçš„åŠ¨æ€é“¾æ¥åº“ GetCurrentProcess è·å–å½“å‰è¿›ç¨‹çš„ä¸€ä¸ªä¼ªå¥æŸ„ GetCurrentProcessId è·å–å½“å‰è¿›ç¨‹ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ GetCurrentThread è·å–å½“å‰çº¿ç¨‹çš„ä¸€ä¸ªä¼ªå¥æŸ„ GetCurrentThreadId è·å–å½“å‰çº¿ç¨‹ä¸€ä¸ªå”¯ä¸€çš„çº¿ç¨‹æ ‡è¯†ç¬¦ GetExitCodeProces è·å–ä¸€ä¸ªå·²ä¸­æ–­è¿›ç¨‹çš„é€€å‡ºä»£ç  GetExitCodeThread è·å–ä¸€ä¸ªå·²ä¸­æ­¢çº¿ç¨‹çš„é€€å‡ºä»£ç  GetHandleInformation è·å–ä¸ä¸€ä¸ªç³»ç»Ÿå¯¹è±¡å¥æŸ„æœ‰å…³çš„ä¿¡æ¯ GetMailslotInfo è·å–ä¸ä¸€ä¸ªé‚®è·¯æœ‰å…³çš„ä¿¡æ¯ GetModuleFileName è·å–ä¸€ä¸ªå·²è£…è½½æ¨¡æ¿çš„å®Œæ•´è·¯å¾„åç§° GetModuleHandle è·å–ä¸€ä¸ªåº”ç”¨ç¨‹åºæˆ–åŠ¨æ€é“¾æ¥åº“çš„æ¨¡å—å¥æŸ„ GetPriorityClass è·å–ç‰¹å®šè¿›ç¨‹çš„ä¼˜å…ˆçº§åˆ« GetProcessShutdownParameters è°ƒæŸ¥ç³»ç»Ÿå…³é—­æ—¶ä¸€ä¸ªæŒ‡å®šçš„è¿›ç¨‹ç›¸å¯¹äºå…¶å®ƒè¿›ç¨‹çš„å…³é—­æ—©è¿Ÿæƒ…å†µ GetProcessTimes è·å–ä¸ä¸€ä¸ªè¿›ç¨‹çš„ç»è¿‡æ—¶é—´æœ‰å…³çš„ä¿¡æ¯ GetProcessWorkingSetSize äº†è§£ä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨è¿è¡Œè¿‡ç¨‹ä¸­å®é™…å‘å®ƒäº¤ä»˜äº†å¤šå¤§å®¹é‡çš„å†…å­˜ GetSartupInfo è·å–ä¸€ä¸ªè¿›ç¨‹çš„å¯åŠ¨ä¿¡æ¯ GetThreadPriority è·å–ç‰¹å®šçº¿ç¨‹çš„ä¼˜å…ˆçº§åˆ« GetTheardTimes è·å–ä¸ä¸€ä¸ªçº¿ç¨‹çš„ç»è¿‡æ—¶é—´æœ‰å…³çš„ä¿¡æ¯ GetWindowThreadProcessId è·å–ä¸æŒ‡å®šçª—å£å…³è”åœ¨ä¸€èµ·çš„ä¸€ä¸ªè¿›ç¨‹å’Œçº¿ç¨‹æ ‡è¯†ç¬¦ LoadLibrary è½½å…¥æŒ‡å®šçš„åŠ¨æ€é“¾æ¥åº“ï¼Œå¹¶å°†å®ƒæ˜ å°„åˆ°å½“å‰è¿›ç¨‹ä½¿ç”¨çš„åœ°å€ç©ºé—´ LoadLibraryEx è£…è½½æŒ‡å®šçš„åŠ¨æ€é“¾æ¥åº“ï¼Œå¹¶ä¸ºå½“å‰è¿›ç¨‹æŠŠå®ƒæ˜ å°„åˆ°åœ°å€ç©ºé—´ LoadModule è½½å…¥ä¸€ä¸ªWindowsåº”ç”¨ç¨‹åºï¼Œå¹¶åœ¨æŒ‡å®šçš„ç¯å¢ƒä¸­è¿è¡Œ MsgWaitForMultipleObjects ç­‰ä¾¯å•ä¸ªå¯¹è±¡æˆ–ä¸€ç³»åˆ—å¯¹è±¡å‘å‡ºä¿¡å·ã€‚å¦‚è¿”å›æ¡ä»¶å·²ç»æ»¡è¶³ï¼Œåˆ™ç«‹å³è¿”å› SetPriorityClass è®¾ç½®ä¸€ä¸ªè¿›ç¨‹çš„ä¼˜å…ˆçº§åˆ« SetProcessShutdownParameters åœ¨ç³»ç»Ÿå…³é—­æœŸé—´ï¼Œä¸ºæŒ‡å®šè¿›ç¨‹è®¾ç½®ä»–ç›¸å¯¹äºå…¶å®ƒç¨‹åºçš„å…³é—­é¡ºåº SetProcessWorkingSetSize è®¾ç½®æ“ä½œç³»ç»Ÿå®é™…åˆ’åˆ†ç»™è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜å®¹é‡ SetThreadPriority è®¾å®šçº¿ç¨‹çš„ä¼˜å…ˆçº§åˆ« ShellExecute æŸ¥æ‰¾ä¸æŒ‡å®šæ–‡ä»¶å…³è”åœ¨ä¸€èµ·çš„ç¨‹åºçš„æ–‡ä»¶å TerminateProcess ç»“æŸä¸€ä¸ªè¿›ç¨‹ WinExec è¿è¡ŒæŒ‡å®šçš„ç¨‹åº 1.7 APIä¹‹ç½‘ç»œå‡½æ•° å‡½æ•°å ä½œç”¨ WNetAddConnection åˆ›å»ºåŒä¸€ä¸ªç½‘ç»œèµ„æºçš„æ°¸ä¹…æ€§è¿æ¥ WNetAddConnection2 åˆ›å»ºåŒä¸€ä¸ªç½‘ç»œèµ„æºçš„è¿æ¥ WNetAddConnection3 åˆ›å»ºåŒä¸€ä¸ªç½‘ç»œèµ„æºçš„è¿æ¥ WNetCancelConnection ç»“æŸä¸€ä¸ªç½‘ç»œè¿æ¥ WNetCancelConnection2 ç»“æŸä¸€ä¸ªç½‘ç»œè¿æ¥ WNetCloseEnum ç»“æŸä¸€æ¬¡æšä¸¾æ“ä½œ WNetConnectionDialog å¯åŠ¨ä¸€ä¸ªæ ‡å‡†å¯¹è¯æ¡†ï¼Œä»¥ä¾¿å»ºç«‹åŒç½‘ç»œèµ„æºçš„è¿æ¥ WNetDisconnectDialog å¯åŠ¨ä¸€ä¸ªæ ‡å‡†å¯¹è¯æ¡†ï¼Œä»¥ä¾¿æ–­å¼€åŒç½‘ç»œèµ„æºçš„è¿æ¥ WNetEnumResource æšä¸¾ç½‘ç»œèµ„æº WNetGetConnection è·å–æœ¬åœ°æˆ–å·²è¿æ¥çš„ä¸€ä¸ªèµ„æºçš„ç½‘ç»œåç§° WNetGetLastError è·å–ç½‘ç»œé”™è¯¯çš„æ‰©å±•é”™è¯¯ä¿¡æ¯ WNetGetUniversalName è·å–ç½‘ç»œä¸­ä¸€ä¸ªæ–‡ä»¶çš„è¿œç¨‹åç§°ä»¥åŠ&#x2F;æˆ–è€…UNCï¼ˆç»Ÿä¸€å‘½åè§„èŒƒï¼‰åç§° WNetGetUser è·å–ä¸€ä¸ªç½‘ç»œèµ„æºç”¨ä»¥è¿æ¥çš„åå­— WNetOpenEnum å¯åŠ¨å¯¹ç½‘ç»œèµ„æºè¿›è¡Œæšä¸¾çš„è¿‡ç¨‹ 2. å®‰è£…å’ŒåŸºæœ¬ä½¿ç”¨2.1 å®‰è£…1python -m pip install pypiwin32 2.2 åŸºæœ¬ä½¿ç”¨123456789101112131415161718192021hwnd = win32gui.FindWindow(&quot;ç±»å&quot;, &quot;æ ‡é¢˜å&quot;) # ä½¿ç”¨spy++æŸ¥è¯¢çª—å£å¥æŸ„çš„ä¿¡æ¯# ä¿®æ”¹çª—å£å¤§å°win32gui.MoveWindow(hwnd, 100, 100, 200, 200, True) # è®¾ç½®å‰å°åå°win32gui.SetForegroundWindow(hwnd)win32gui.SetBkMode(hwnd, win32con.TRANSPARENT)# è·å–é¼ æ ‡å½“å‰åæ ‡win32api.GetCursorPos()# å°†é¼ æ ‡ç§»åŠ¨åˆ°æŸåæ ‡å¤„win32api.SetCursorPos((100,100))# é€šè¿‡åæ ‡è·å–å¥æŸ„win32api.WindowFromPoint(win32api.GetCursorPos())# æ ¹æ®çª—å£å¥æŸ„idè·å–ClassNamewin32gui.GetClassName(hwnd)# è·å–çª—å£æ ‡é¢˜win32gui.GetWindowText(hwnd)# è·å–çª—å£åæ ‡win32gui.GetWindowRect(hwnd)# æ¨¡æ‹Ÿç‚¹å‡»win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN, 200, 200, 0, 0) ä½¿ç”¨ç®¡ç†å‘˜æƒé™å¯åŠ¨pythonè„šæœ¬12345678910111213141516171819202122232425262728def admin(func): def wrap(): def is_admin(): try: return ctypes.windll.shell32.IsUserAnAdmin() except: return False if is_script(): func() elif is_admin(): func() else: params = &#x27; &#x27;.join([&#x27;&quot;&#123;&#125;&quot;&#x27;.format(x) for x in sys.argv]) # å°†å¯åŠ¨å‚æ•°ä¼ é€’ç»™è„šæœ¬ ctyps.windll.shell32.ShellExecuteW(None, &#x27;runas&#x27;, sys.executable, params, None, 1) return wrap### main.py@admindef main(): print(&#x27;init&#x27;)if __name__ == &#x27;__main__&#x27;: main() å‚è€ƒ http://timgolden.me.uk/pywin32-docs/contents.html https://www.cnblogs.com/zoro-robin/p/5591185.html Shell_NotifyIcon Windowså¸¸ç”¨API","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"pandas","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/pandas/","text":"æ•°æ®åˆ†ææ¸…æ´—ä½¿ç”¨pandasï¼Œnumpyã€‚ http://pandas.pydata.org/ https://www.pypandas.cn/ Series æ˜¯å¸¦æ ‡ç­¾çš„ä¸€ç»´æ•°ç»„ï¼Œå¯å­˜å‚¨æ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²ã€Python å¯¹è±¡ç­‰ç±»å‹çš„æ•°æ®ã€‚è½´æ ‡ç­¾ç»Ÿç§°ä¸ºç´¢å¼•ã€‚è°ƒç”¨ pd.Series å‡½æ•°å³å¯åˆ›å»º Series 1s = pd.Series(data, index=index) ä¸Šè¿°ä»£ç ä¸­ï¼Œdata æ”¯æŒä»¥ä¸‹æ•°æ®ç±»å‹ï¼š Python å­—å…¸ å¤šç»´æ•°ç»„ æ ‡é‡å€¼ï¼ˆå¦‚ï¼Œ5ï¼‰ index æ˜¯è½´æ ‡ç­¾åˆ—è¡¨ã€‚ä¸åŒæ•°æ®å¯åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š å¤šç»´æ•°ç»„ data æ˜¯å¤šç»´æ•°ç»„æ—¶ï¼Œindex é•¿åº¦å¿…é¡»ä¸ data é•¿åº¦ä¸€è‡´ã€‚æ²¡æœ‰æŒ‡å®š index å‚æ•°æ—¶ï¼Œåˆ›å»ºæ•°å€¼å‹ç´¢å¼•ï¼Œå³ [0, â€¦, len(data) - 1]ã€‚ 12345678910111213141516171819202122In [3]: s = pd.Series(np.random.randn(5), index=[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;])In [4]: sOut[4]: a 0.469112b -0.282863c -1.509059d -1.135632e 1.212112dtype: float64In [5]: s.indexOut[5]: Index([&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;], dtype=&#x27;object&#x27;)In [6]: pd.Series(np.random.randn(5))Out[6]: 0 -0.1732151 0.1192092 -1.0442363 -0.8618494 -2.104569dtype: float64 å­—å…¸ 12345678In [7]: d = &#123;&#x27;b&#x27;: 1, &#x27;a&#x27;: 0, &#x27;c&#x27;: 2&#125;In [8]: pd.Series(d)Out[8]: b 1a 0c 2dtype: int64 æ ‡é‡å€¼ data æ˜¯æ ‡é‡å€¼æ—¶ï¼Œå¿…é¡»æä¾›ç´¢å¼•ã€‚Series æŒ‰ç´¢å¼•é•¿åº¦é‡å¤è¯¥æ ‡é‡å€¼ã€‚ 12345678In [12]: pd.Series(5., index=[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;, &#x27;d&#x27;, &#x27;e&#x27;])Out[12]: a 5.0b 5.0c 5.0d 5.0e 5.0dtype: float64 Seriesç±»ä¼¼å¤šç»´æ•°ç»„ 1234567891011121314151617181920212223242526272829303132In [13]: s[0]Out[13]: 0.4691122999071863In [14]: s[:3]Out[14]: a 0.469112b -0.282863c -1.509059dtype: float64In [15]: s[s &gt; s.median()]Out[15]: a 0.469112e 1.212112dtype: float64In [16]: s[[4, 3, 1]]Out[16]: e 1.212112d -1.135632b -0.282863dtype: float64In [17]: np.exp(s)Out[17]: a 1.598575b 0.753623c 0.221118d 0.321219e 3.360575dtype: float64 çŸ¢é‡æ“ä½œä¸å¯¹é½ Series æ ‡ç­¾ åç§°å±æ€§ 12345678910111213In [32]: s = pd.Series(np.random.randn(5), name=&#x27;something&#x27;)In [33]: sOut[33]: 0 -0.4949291 1.0718042 0.7215553 -0.7067714 -1.039575Name: something, dtype: float64In [34]: s.nameOut[34]: &#x27;something&#x27; DataFrame æ˜¯ç”±å¤šç§ç±»å‹çš„åˆ—æ„æˆçš„äºŒç»´æ ‡ç­¾æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äº Excel ã€SQL è¡¨ï¼Œæˆ– Series å¯¹è±¡æ„æˆçš„å­—å…¸ã€‚DataFrame æ˜¯æœ€å¸¸ç”¨çš„ Pandas å¯¹è±¡ï¼Œä¸ Series ä¸€æ ·ï¼ŒDataFrame æ”¯æŒå¤šç§ç±»å‹çš„è¾“å…¥æ•°æ®ï¼š ä¸€ç»´ ndarrayã€åˆ—è¡¨ã€å­—å…¸ã€Series å­—å…¸ äºŒç»´ numpy.ndarray ç»“æ„å¤šç»´æ•°ç»„æˆ–è®°å½•å¤šç»´æ•°ç»„ Series DataFrame é™¤äº†æ•°æ®ï¼Œè¿˜å¯ä»¥æœ‰é€‰æ‹©åœ°ä¼ é€’ indexï¼ˆè¡Œæ ‡ç­¾ï¼‰å’Œ columnsï¼ˆåˆ—æ ‡ç­¾ï¼‰å‚æ•°ã€‚ä¼ é€’äº†ç´¢å¼•æˆ–åˆ—ï¼Œå°±å¯ä»¥ç¡®ä¿ç”Ÿæˆçš„ DataFrame é‡ŒåŒ…å«ç´¢å¼•æˆ–åˆ—ã€‚Series å­—å…¸åŠ ä¸ŠæŒ‡å®šç´¢å¼•æ—¶ï¼Œä¼šä¸¢å¼ƒä¸ä¼ é€’çš„ç´¢å¼•ä¸åŒ¹é…çš„æ‰€æœ‰æ•°æ®ã€‚ æ²¡æœ‰ä¼ é€’è½´æ ‡ç­¾æ—¶ï¼ŒæŒ‰å¸¸è§„ä¾æ®è¾“å…¥æ•°æ®è¿›è¡Œæ„å»ºã€‚","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"sqlalchemy","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/sqlalchemy/","text":"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ORMæ¡†æ¶ï¼Ÿ ä¸ºäº†æ–¹ä¾¿ï¼Œé™ä½å‡ºé”™æ¦‚ç‡ï¼Œå¯è¯»æ€§æ›´å¥½ã€‚ åŸºæœ¬æ“ä½œ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152è¿æ¥æ•°æ®#Unix/Mac - 4 initial slashes in totalengine = create_engine(&#x27;sqlite:////absolute/path/to/foo.db&#x27;)#Windowsengine = create_engine(&#x27;sqlite:///C:\\\\path\\\\to\\\\foo.db&#x27;)#Windows alternative using raw stringengine = create_engine(r&#x27;sqlite:///C:\\path\\to\\foo.db&#x27;)åˆ›å»ºå¼•æ“engine = create_engine(&#x27;sqlite:///foo.db?check_same_thread=False&#x27;, echo=True)å®šä¹‰æ˜ å°„from sqlalchemy.ext.declarative import declarative_baseBase = declarative_base()åˆ›å»ºå®ä½“ç±»from sqlalchemy import Column, Integer, String# å®šä¹‰æ˜ å°„ç±»Userï¼Œå…¶ç»§æ‰¿ä¸Šä¸€æ­¥åˆ›å»ºçš„Baseclass User(Base): # æŒ‡å®šæœ¬ç±»æ˜ å°„åˆ°usersè¡¨ __tablename__ = &#x27;users&#x27; # å¦‚æœæœ‰å¤šä¸ªç±»æŒ‡å‘åŒä¸€å¼ è¡¨ï¼Œé‚£ä¹ˆåœ¨åè¾¹çš„ç±»éœ€è¦æŠŠextend_existingè®¾ä¸ºTrueï¼Œè¡¨ç¤ºåœ¨å·²æœ‰åˆ—åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±• # æˆ–è€…æ¢å¥è¯è¯´ï¼Œsqlalchemyå…è®¸ç±»æ˜¯è¡¨çš„å­—é›† # __table_args__ = &#123;&#x27;extend_existing&#x27;: True&#125; # å¦‚æœè¡¨åœ¨åŒä¸€ä¸ªæ•°æ®åº“æœåŠ¡ï¼ˆdatebaseï¼‰çš„ä¸åŒæ•°æ®åº“ä¸­ï¼ˆschemaï¼‰ï¼Œå¯ä½¿ç”¨schemaå‚æ•°è¿›ä¸€æ­¥æŒ‡å®šæ•°æ®åº“ # __table_args__ = &#123;&#x27;schema&#x27;: &#x27;test_database&#x27;&#125; # å„å˜é‡åä¸€å®šè¦ä¸è¡¨çš„å„å­—æ®µåä¸€æ ·ï¼Œå› ä¸ºç›¸åŒçš„åå­—æ˜¯ä»–ä»¬ä¹‹é—´çš„å”¯ä¸€å…³è”å…³ç³» # ä»è¯­æ³•ä¸Šè¯´ï¼Œå„å˜é‡ç±»å‹å’Œè¡¨çš„ç±»å‹å¯ä»¥ä¸å®Œå…¨ä¸€è‡´ï¼Œå¦‚è¡¨å­—æ®µæ˜¯String(64)ï¼Œä½†æˆ‘å°±å®šä¹‰æˆString(32) # ä½†ä¸ºäº†é¿å…é€ æˆä¸å¿…è¦çš„é”™è¯¯ï¼Œå˜é‡çš„ç±»å‹å’Œå…¶å¯¹åº”çš„è¡¨çš„å­—æ®µçš„ç±»å‹è¿˜æ˜¯è¦ç›¸ä¸€è‡´ # sqlalchemyå¼ºåˆ¶è¦æ±‚å¿…é¡»è¦æœ‰ä¸»é”®å­—æ®µä¸ç„¶ä¼šæŠ¥é”™ï¼Œå¦‚æœè¦æ˜ å°„ä¸€å¼ å·²å­˜åœ¨ä¸”æ²¡æœ‰ä¸»é”®çš„è¡¨ï¼Œé‚£ä¹ˆå¯è¡Œçš„åšæ³•æ˜¯å°†æ‰€æœ‰å­—æ®µéƒ½è®¾ä¸ºprimary_key=True # ä¸è¦çœ‹éšä¾¿å°†ä¸€ä¸ªéä¸»é”®å­—æ®µè®¾ä¸ºprimary_keyï¼Œç„¶åä¼¼ä¹å°±æ²¡æŠ¥é”™å°±èƒ½ä½¿ç”¨äº†ï¼Œsqlalchemyåœ¨æ¥æ”¶åˆ°æŸ¥è¯¢ç»“æœåè¿˜ä¼šè‡ªå·±æ ¹æ®ä¸»é”®è¿›è¡Œä¸€æ¬¡å»é‡ # æŒ‡å®šidæ˜ å°„åˆ°idå­—æ®µ; idå­—æ®µä¸ºæ•´å‹ï¼Œä¸ºä¸»é”®ï¼Œè‡ªåŠ¨å¢é•¿ï¼ˆå…¶å®æ•´å‹ä¸»é”®é»˜è®¤å°±è‡ªåŠ¨å¢é•¿ï¼‰ id = Column(Integer, primary_key=True, autoincrement=True) # æŒ‡å®šnameæ˜ å°„åˆ°nameå­—æ®µ; nameå­—æ®µä¸ºå­—ç¬¦ä¸²ç±»å½¢ï¼Œ name = Column(String(20)) fullname = Column(String(32)) password = Column(String(32)) # __repr__æ–¹æ³•ç”¨äºè¾“å‡ºè¯¥ç±»çš„å¯¹è±¡è¢«print()æ—¶è¾“å‡ºçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœä¸æƒ³å†™å¯ä»¥ä¸å†™ def __repr__(self): return &quot;&lt;User(name=&#x27;%s&#x27;, fullname=&#x27;%s&#x27;, password=&#x27;%s&#x27;)&gt;&quot; % ( self.name, self.fullname, self.password)# æŸ¥çœ‹æ˜ å°„å¯¹åº”çš„è¡¨User.__table__# åˆ›å»ºæ•°æ®è¡¨ã€‚ä¸€æ–¹é¢é€šè¿‡engineæ¥è¿æ¥æ•°æ®åº“ï¼Œå¦ä¸€æ–¹é¢æ ¹æ®å“ªäº›ç±»ç»§æ‰¿äº†Baseæ¥å†³å®šåˆ›å»ºå“ªäº›è¡¨# checkfirst=Trueï¼Œè¡¨ç¤ºåˆ›å»ºè¡¨å‰å…ˆæ£€æŸ¥è¯¥è¡¨æ˜¯å¦å­˜åœ¨ï¼Œå¦‚åŒåè¡¨å·²å­˜åœ¨åˆ™ä¸å†åˆ›å»ºã€‚å…¶å®é»˜è®¤å°±æ˜¯TrueBase.metadata.create_all(engine, checkfirst=True)# ä¸Šè¾¹çš„å†™æ³•ä¼šåœ¨engineå¯¹åº”çš„æ•°æ®åº“ä¸­åˆ›å»ºæ‰€æœ‰ç»§æ‰¿Baseçš„ç±»å¯¹åº”çš„è¡¨ï¼Œä½†å¾ˆå¤šæ—¶å€™å¾ˆå¤šåªæ˜¯ç”¨æ¥åˆ™è¯•çš„æˆ–æ˜¯å…¶ä»–åº“çš„# æ­¤æ—¶å¯ä»¥é€šè¿‡tableså‚æ•°æŒ‡å®šæ–¹å¼ï¼ŒæŒ‡ç¤ºä»…åˆ›å»ºå“ªäº›è¡¨# Base.metadata.create_all(engine,tables=[Base.metadata.tables[&#x27;users&#x27;]],checkfirst=True)# åœ¨é¡¹ç›®ä¸­ç”±äºmodelç»å¸¸åœ¨åˆ«çš„æ–‡ä»¶å®šä¹‰ï¼Œæ²¡ä¸»åŠ¨åŠ è½½æ—¶ä¸Šè¾¹çš„å†™æ³•å¯èƒ½å†™å¯¼è‡´æŠ¥é”™ï¼Œå¯ä½¿ç”¨ä¸‹è¾¹è¿™ç§æ›´æ˜ç¡®çš„å†™æ³•# User.__table__.create(engine, checkfirst=True)# å¦å¤–æˆ‘ä»¬è¯´è¿™ä¸€æ­¥çš„ä½œç”¨æ˜¯åˆ›å»ºè¡¨ï¼Œå½“æˆ‘ä»¬å·²ç»ç¡®å®šè¡¨å·²ç»åœ¨æ•°æ®åº“ä¸­å­˜åœ¨æ—¶ï¼Œæˆ‘å®Œå¯ä»¥è·³è¿‡è¿™ä¸€æ­¥# é’ˆå¯¹å·²å­˜æ”¾æœ‰å…³é”®æ•°æ®çš„è¡¨ï¼Œæˆ–å¤§å®¶å…±ç”¨çš„è¡¨ï¼Œç›´æ¥ä¸å†™è¿™åˆ›å»ºä»£ç æ›´è®©äººå¿ƒé‡Œè¸å®åˆ›å»ºä¼šè¯# engineæ˜¯2.2ä¸­åˆ›å»ºçš„è¿æ¥Session = sessionmaker(bind=engine)# åˆ›å»ºSessionç±»å®ä¾‹session = Session()æ–°å¢# åˆ›å»ºUserç±»å®ä¾‹ed_user = User(name=&#x27;ed&#x27;, fullname=&#x27;Ed Jones&#x27;, password=&#x27;edspassword&#x27;)# å°†è¯¥å®ä¾‹æ’å…¥åˆ°usersè¡¨session.add(ed_user)# ä¸€æ¬¡æ’å…¥å¤šæ¡è®°å½•å½¢å¼session.add_all( [User(name=&#x27;wendy&#x27;, fullname=&#x27;Wendy Williams&#x27;, password=&#x27;foobar&#x27;), User(name=&#x27;mary&#x27;, fullname=&#x27;Mary Contrary&#x27;, password=&#x27;xxg527&#x27;), User(name=&#x27;fred&#x27;, fullname=&#x27;Fred Flinstone&#x27;, password=&#x27;blah&#x27;)])# å½“å‰æ›´æ”¹åªæ˜¯åœ¨sessionä¸­ï¼Œéœ€è¦ä½¿ç”¨commitç¡®è®¤æ›´æ”¹æ‰ä¼šå†™å…¥æ•°æ®åº“session.commit()æŸ¥è¯¢our_user = session.query(User).filter_by(name=&#x27;ed&#x27;).first()our_user# æ¯”è¾ƒed_userä¸æŸ¥è¯¢åˆ°çš„our_useræ˜¯å¦ä¸ºåŒä¸€æ¡è®°å½•ed_user is our_user# åªè·å–æŒ‡å®šå­—æ®µ# ä½†è¦æ³¨æ„å¦‚æœåªè·å–éƒ¨åˆ†å­—æ®µï¼Œé‚£ä¹ˆè¿”å›çš„å°±æ˜¯å…ƒç»„è€Œä¸æ˜¯å¯¹è±¡äº†# session.query(User.name).filter_by(name=&#x27;ed&#x27;).all()# likeæŸ¥è¯¢# session.query(User).filter(User.name.like(&quot;ed%&quot;)).all()# æ­£åˆ™æŸ¥è¯¢# session.query(User).filter(User.name.op(&quot;regexp&quot;)(&quot;^ed&quot;)).all()# ç»Ÿè®¡æ•°é‡# session.query(User).filter(User.name.like(&quot;ed%&quot;)).count()# è°ƒç”¨æ•°æ®åº“å†…ç½®å‡½æ•°# ä»¥count()ä¸ºä¾‹ï¼Œéƒ½æ˜¯ç›´æ¥func.func_name()è¿™ç§æ ¼å¼ï¼Œfunc_nameä¸æ•°æ®åº“å†…çš„å†™æ³•ä¿æŒä¸€è‡´# from sqlalchemy import func# session.query(func.count(User3.name)).one()# å­—æ®µåä¸ºå­—ç¬¦ä¸²å½¢å¼# column_name = &quot;name&quot;# session.query(User).filter(User3.__table__.columns[column_name].like(&quot;ed%&quot;)).all()# è·å–æ‰§è¡Œçš„sqlè¯­å¥# è·å–è®°å½•æ•°çš„æ–¹æ³•æœ‰all()/one()/first()ç­‰å‡ ä¸ªæ–¹æ³•ï¼Œå¦‚æœæ²¡åŠ è¿™äº›æ–¹æ³•ï¼Œå¾—åˆ°çš„åªæ˜¯ä¸€ä¸ªå°†è¦æ‰§è¡Œçš„sqlå¯¹è±¡ï¼Œå¹¶æ²¡çœŸæ­£æäº¤æ‰§è¡Œ# from sqlalchemy.dialects import mysql# sql_obj = session.query(User).filter_by(name=&#x27;ed&#x27;)# sql_command = sql_obj.statement.compile(dialect=mysql.dialect(), compile_kwargs=&#123;&quot;literal_binds&quot;: True&#125;)# sql_result = sql_obj.all()ä¿®æ”¹# session.query(User).filter_by(name=&#x27;ed&#x27;).update(&#123;User.password: &#x27;modify_passwd&#x27;&#125;)# session.commit()åˆ é™¤# è¦åˆ é™¤éœ€è¦å…ˆå°†è®°å½•æŸ¥å‡ºæ¥del_user = session.query(User).filter_by(name=&#x27;ed&#x27;).first()# æ‰“å°ä¸€ä¸‹ï¼Œç¡®è®¤æœªåˆ é™¤å‰è®°å½•å­˜åœ¨del_user# å°†edç”¨æˆ·è®°å½•åˆ é™¤session.delete(del_user)# ç¡®è®¤åˆ é™¤session.commit()# éå†æŸ¥çœ‹ï¼Œå·²æ— edç”¨æˆ·è®°å½•for user in session.query(User): print(user)# ä½†ä¸Šè¾¹çš„å†™æ³•ï¼Œå…ˆæŸ¥è¯¢å†åˆ é™¤ï¼Œç›¸å½“äºç»™mysqlæœåŠ¡ç«¯å‘äº†ä¸¤æ¡è¯­å¥ï¼Œå’Œæˆ‘ä»¬å°è±¡ä¸­çš„deleteè¯­å¥ä¸ä¸€è‡´# å¯ç›´æ¥ä½¿ç”¨ä¸‹è¾¹çš„å†™æ³•ï¼Œä¼ ç»™æœåŠ¡ç«¯çš„å°±æ˜¯deleteè¯­å¥# session.query(User).filter_by(name=&#x27;ed&#x27;).first().delete() å‚è€ƒ githubå®˜æ–¹åœ°å€ï¼šhttps://github.com/sqlalchemy/sqlalchemy å®˜æ–¹æ–‡æ¡£åœ°å€ï¼šhttps://docs.sqlalchemy.org/en/13/ https://docs.sqlalchemy.org/en/13/orm/tutorial.html","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"stockstats","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/stockstats/","text":"å¯¹pandasè¿›è¡Œäº†å°è£… https://github.com/jealous/stockstats","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"structæ¨¡å—","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/structæ¨¡å—/","text":"structæ¨¡å—ä¸»è¦äºŒè¿›åˆ¶å’Œç»“æ„ä½“ä¹‹é—´çš„äº’ç›¸è½¬åŒ–ã€‚åœ¨ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œsocketæ•°æ®çš„å¤„ç†ä¼šä½¿ç”¨åˆ°ã€‚çº¯æ–‡æœ¬æ˜¯æ— æ³•è¿›è¡Œä¼ è¾“åˆ°ï¼Œå› ä¸ºä¸åŒç³»ç»Ÿç¡¬ä»¶çš„å­˜å‚¨æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™ä¸ªæ—¶å€™ä½¿ç”¨structå¯ä»¥æŒ‰ç…§æŸç§è§„åˆ™è¿›è¡Œpackå¤„ç†æˆäºŒè¿›åˆ¶æ•°æ®ï¼Œå¦ä¸€ç«¯æ¥æ”¶åˆ°æ—¶æŒ‰ç…§çº¦å®šè¿›è¡Œunpackæˆç›¸åº”æ•°æ®ã€‚ å¸¸ç”¨API å‡½æ•° return explain pack(fmt,v1,v2â€¦) string æŒ‰ç…§ç»™å®šçš„æ ¼å¼(fmt),æŠŠæ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²(å­—èŠ‚æµ),å¹¶å°†è¯¥å­—ç¬¦ä¸²è¿”å›. pack_into(fmt,buffer,offset,v1,v2â€¦) None æŒ‰ç…§ç»™å®šçš„æ ¼å¼(fmt),å°†æ•°æ®è½¬æ¢æˆå­—ç¬¦ä¸²(å­—èŠ‚æµ),å¹¶å°†å­—èŠ‚æµå†™å…¥ä»¥offsetå¼€å§‹çš„bufferä¸­.(bufferä¸ºå¯å†™çš„ç¼“å†²åŒº,å¯ç”¨arrayæ¨¡å—) unpack(fmt,v1,v2â€¦..) tuple æŒ‰ç…§ç»™å®šçš„æ ¼å¼(fmt)è§£æå­—èŠ‚æµ,å¹¶è¿”å›è§£æç»“æœ pack_from(fmt,buffer,offset) tuple æŒ‰ç…§ç»™å®šçš„æ ¼å¼(fmt)è§£æä»¥offsetå¼€å§‹çš„ç¼“å†²åŒº,å¹¶è¿”å›è§£æç»“æœ calcsize(fmt) size of fmt è®¡ç®—ç»™å®šçš„æ ¼å¼(fmt)å ç”¨å¤šå°‘å­—èŠ‚çš„å†…å­˜ï¼Œæ³¨æ„å¯¹é½æ–¹å¼ Hello Worldvalues = (1, b&#39;abc&#39;, 2.5) s = struct.Struct(&#39;I3sf&#39;) # å£°æ˜æ¯ä¸ªå€¼çš„ç±»å‹ï¼ŒIè¡¨ç¤ºæ•´å‹ã€3sè¡¨ç¤ºé•¿åº¦ä¸º3çš„å­—ç¬¦ä¸²ã€fè¡¨ç¤ºæµ®ç‚¹å‹ packed_data = s.pack(*values) print(packed_data) unpacked_data = s.unpack(packed_data) print(type(unpacked_data), unpacked_data) å­—èŠ‚é¡ºåºï¼Œå¤§å°ï¼Œå¯¹é½é»˜è®¤æƒ…å†µä¸‹ï¼ŒCè¯­è¨€ç±»å‹ä»¥æœºå™¨çš„æœ¬åœ°æ ¼å¼å’Œå­—èŠ‚é¡ºåºè¡¨ç¤ºã€‚ Characterï¼ˆå­—ç¬¦ï¼‰ Byte orderï¼ˆå­—èŠ‚é¡ºåºï¼‰ Size Alignment @(é»˜è®¤) æœ¬æœº æœ¬æœº æœ¬æœº,å‡‘å¤Ÿ4å­—èŠ‚ &#x3D; æœ¬æœº æ ‡å‡† none,æŒ‰åŸå­—èŠ‚æ•° &lt; å°ç«¯ æ ‡å‡† none,æŒ‰åŸå­—èŠ‚æ•° &gt; å¤§ç«¯ æ ‡å‡† none,æŒ‰åŸå­—èŠ‚æ•° ! network(å¤§ç«¯) æ ‡å‡† none,æŒ‰åŸå­—èŠ‚æ•° æ ¼å¼å­—ç¬¦ æ–‡ä»¶æ ¼å¼ C ç±»å‹ Pythonæ•°æ®ç±»å‹ Standard size æ³¨é‡Š x pad byte no value c char bytes of length 1 1 b signed char integer 1 (1),(3) B unsigned char integer 1 (3) ? _Bool bool 1 (1) h short integer 2 (3) H unsigned short integer 2 (3) i int integer 4 (3) I unsigned int integer 4 (3) l long integer 4 (3) L unsigned long integer 4 (3) q long long integer 8 (2), (3) Q unsigned long long integer 8 (2), (3) n ssize_t integer (4) N size_t integer (4) e (7) float 2 (5) f float float 4 (5) d double float 8 (5) s char[] bytes p char[] bytes P void * integer (6) å®ä¾‹ï¼š12 å‚è€ƒ https://docs.python.org/zh-cn/3.7/library/struct.html https://docs.python.org/3/library/struct.html","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"tornado","date":"2022-03-08T02:25:29.695Z","path":"wiki/Python/tornado/","text":"åŸºæœ¬APIä½¿ç”¨Application RequestHandler å‚è€ƒhttps://tornado-zh.readthedocs.io/zh/latest/","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"Pillow","date":"2022-03-08T02:25:29.694Z","path":"wiki/Python/Pillow/","text":"Pillowæ˜¯ç”¨äºå›¾åƒå¤„ç†çš„åº“ï¼Œå¯ç”¨äºå›¾åƒå­˜å‚¨ã€å›¾åƒæ˜¾ç¤ºã€å›¾åƒå¤„ç†ï¼ˆæ”¹å˜å¤§å°ã€æ—‹è½¬ç­‰ï¼‰ã€‚ åŸºæœ¬ä½¿ç”¨123456789from PIL import Imageim = Image.open(&quot;test.png&quot;)print(im.format, im.size, im.mode)# format è¿™ä¸ªå±æ€§æ ‡è¯†äº†å›¾åƒæ¥æºã€‚å¦‚æœå›¾åƒä¸æ˜¯ä»æ–‡ä»¶è¯»å–å®ƒçš„å€¼å°±æ˜¯Noneã€‚# sizeå±æ€§æ˜¯ä¸€ä¸ªäºŒå…ƒtupleï¼ŒåŒ…å«widthå’Œheightï¼ˆå®½åº¦å’Œé«˜åº¦ï¼Œå•ä½éƒ½æ˜¯pxï¼‰ã€‚ # mode å±æ€§å®šä¹‰äº†å›¾åƒbandsçš„æ•°é‡å’Œåç§°ï¼Œä»¥åŠåƒç´ ç±»å‹å’Œæ·±åº¦ã€‚å¸¸è§çš„modes æœ‰ â€œLâ€ (luminance) è¡¨ç¤ºç°åº¦å›¾åƒ, â€œRGBâ€ è¡¨ç¤ºçœŸå½©è‰²å›¾åƒ, and â€œCMYKâ€ è¡¨ç¤ºå‡ºç‰ˆå›¾åƒã€‚im.show() # æ˜¾ç¤ºå›¾åƒ è½¬æ¢æ–‡ä»¶æ ¼å¼åˆ°JPEG12345678910111213from __future__ import print_functionimport os, sysfrom PIL import Imagefor infile in sys.argv[1:]: f, e = os.path.splitext(infile) outfile = f + &quot;.jpg&quot; if infile != outfile: try: Image.open(infile).save(outfile) # saveæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æŒ‡å®šæ–‡ä»¶æ ¼å¼ except IOError: print(&quot;cannot convert&quot;, infile) åˆ›å»º JPEG ç¼©ç•¥å›¾12345678910111213141516from __future__ import print_functionimport os, sysfrom PIL import Imagesize = (128, 128)for infile in sys.argv[1:]: outfile = os.path.splitext(infile)[0] + &quot;.thumbnail&quot; if infile != outfile: try: im = Image.open(infile) im.thumbnail(size) im.save(outfile, &quot;JPEG&quot;) except IOError: print(&quot;cannot create thumbnail for&quot;, infile) é‡è¦çš„ä¸€ç‚¹æ˜¯è¿™ä¸ªåº“ä¸ä¼šç›´æ¥è§£ç æˆ–è€…åŠ è½½å›¾åƒæ …æ ¼æ•°æ®ã€‚å½“ä½ æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œåªä¼šè¯»å–æ–‡ä»¶å¤´ä¿¡æ¯ç”¨æ¥ç¡®å®šæ ¼å¼ï¼Œé¢œè‰²æ¨¡å¼ï¼Œå¤§å°ç­‰ç­‰ï¼Œæ–‡ä»¶çš„å‰©ä½™éƒ¨åˆ†ä¸ä¼šä¸»åŠ¨å¤„ç†ã€‚è¿™æ„å‘³ç€æ‰“å¼€ä¸€ä¸ªå›¾åƒæ–‡ä»¶çš„æ“ä½œååˆ†å¿«é€Ÿï¼Œè·Ÿå›¾ç‰‡å¤§å°å’Œå‹ç¼©æ–¹å¼æ— å…³ã€‚ å‰ªåˆ‡ï¼Œç²˜è´´ï¼Œåˆå¹¶å›¾åƒ1234567891011121314151617181920212223242526272829303132# ä»å›¾åƒä¸­å¤åˆ¶å‡ºä¸€ä¸ªçŸ©å½¢é€‰åŒºÂ¶box = (100, 100, 400, 400)region = im.crop(box)# çŸ©å½¢é€‰åŒºæœ‰ä¸€ä¸ª4å…ƒå…ƒç»„å®šä¹‰ï¼Œåˆ†åˆ«è¡¨ç¤ºå·¦ã€ä¸Šã€å³ã€ä¸‹çš„åæ ‡ã€‚è¿™ä¸ªåº“ä»¥å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œå•ä½æ˜¯pxï¼Œæ‰€ä»¥ä¸Šè¯‰ä»£ç å¤åˆ¶äº†ä¸€ä¸ª 300x300 pixels çš„çŸ©å½¢é€‰åŒºã€‚è¿™ä¸ªé€‰åŒºç°åœ¨å¯ä»¥è¢«å¤„ç†å¹¶ä¸”ç²˜è´´åˆ°åŸå›¾ã€‚# å¤„ç†å¤åˆ¶çš„çŸ©å½¢é€‰åŒºå¹¶ç²˜è´´åˆ°åŸå›¾region = region.transpose(Image.ROTATE_180)im.paste(region, box)# åˆ†ç¦»å’Œåˆå¹¶é¢œè‰²é€šé“r, g, b = im.split()im = Image.merge(&quot;RGB&quot;, (b, g, r))out = im.resize((128, 128)) # ç¼©æ”¾out = im.rotate(45) # æ—‹è½¬# è¿‡æ»¤å™¨from PIL import ImageFilterout = im.filter(ImageFilter.DETAIL)# è¯»å–å¤šå¸§im = Image.open(&quot;animation.gif&quot;)im.seek(1) # skip to the second frametry: while 1: im.seek(im.tell()+1) # è¿™é‡Œseekåï¼Œå¯æ˜¾ç¤ºå½“å‰å¸§ï¼Œå¯è½¬æ¢æˆQtä¸­çš„QPixmapæˆ–è€…QIamge # do something to imexcept EOFError: pass # end of sequence æ¦‚å¿µBandsï¼ˆé€šé“ï¼‰æ¯å¼ å›¾åƒéƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®é€šé“æ„æˆï¼ŒPILå¯ä»¥åœ¨å•å¼ å›¾ç‰‡ä¸­åˆæˆç›¸åŒç»´æ•°å’Œæ·±åº¦çš„å¤šä¸ªé€šé“ï¼Œå¦‚RGBæœ‰ä¸‰ä¸ªé€šé“ï¼Œè€Œç°åº¦å›¾åƒåˆ™åªæœ‰ä¸€ä¸ªé€šé“ã€‚getbandsæ–¹æ³•è¿”å›é€šé“åå­—ã€‚ Modeï¼ˆæ¨¡å¼ï¼‰å›¾åƒçš„æ¨¡å¼å®šä¹‰äº†å›¾åƒä¸­åƒç´ çš„ç±»å‹å’Œæ·±åº¦ï¼Œå®ƒåœ¨å›¾åƒä¸­å®šä¹‰modeæ¨¡å¼çš„æ¦‚å¿µï¼Œå¦‚ï¼š 1:1ä½åƒç´ ï¼Œè¡¨ç¤ºé»‘å’Œç™½ï¼Œå 8bitï¼Œåœ¨å›¾åƒè¡¨ç¤ºä¸­ç§°ä¸ºä½å›¾ Lï¼šè¡¨ç¤ºé»‘ç™½ä¹‹é—´çš„ç°åº¦ï¼Œå 8bitåƒç´  pï¼š8ä½åƒç´ ï¼Œä½¿ç”¨è°ƒè‰²ç‰ˆæ˜ å°„ RGBï¼šä¸ºçœŸå½©è‰²ï¼Œå ç”¨3x8ä½åƒç´ ï¼Œå…¶ä¸­Rä¸ºredçº¢è‰²ï¼ŒGä¸ºgreenç»¿è‰²ï¼ŒBä¸ºblueè“è‰²ï¼Œä¸‰åŸè‰²å åŠ å½¢æˆçš„è‰²å½©å˜åŒ–ï¼Œå¦‚ä¸‰é€šé“éƒ½ä¸º0åˆ™ä»£è¡¨é»‘è‰²ï¼Œéƒ½ä¸º255åˆ™ä»£è¡¨ç™½è‰² RGBAï¼šä¸ºå¸¦é€æ˜è’™ç‰ˆçš„çœŸå½©è‰²ï¼Œå…¶ä¸­çš„Aä¸ºalphaé€æ˜åº¦ï¼Œå ç”¨4x8ä½åƒ CMYK (4x8-bit åƒç´ , color separation) YCbCr (3x8-bit åƒç´ , color video format) I (32-bit signed integer åƒç´ ) F (32-bit floating point åƒç´ ) Sizeï¼ˆå¤§å°ï¼‰sizeå±æ€§è¡¨è¾¾å¤§å°ï¼Œè¿”å›ä¸€ä¸ªå…ƒç¥–ï¼Œåˆ†åˆ«ä¸ºé«˜ã€å®½å€¼ã€‚ Coordinates Systemï¼ˆåæ ‡ç³»ç»Ÿï¼‰PILä½¿ç”¨ç¬›å¡å°”åƒç´ åæ ‡ç³»ç»Ÿï¼Œå›¾åƒçš„åæ ‡ä»å·¦ä¸Šè§’å¼€å§‹ï¼ˆ0,0ï¼‰ï¼Œåæ ‡å€¼è¡¨ç¤ºåƒç´ çš„è§’ï¼Œå®ƒå®é™…ä¸Šä½äºï¼ˆ0.5,0.5ï¼‰ï¼›pythonä¸­åæ ‡é€šå¸¸ä»¥2å…ƒç»„(X,Y)çš„å½¢å¼ä¼ é€’ï¼ŒçŸ©å½¢è¡¨ç¤ºä¸º4å…ƒç»„ï¼ˆl_x,t_y,r_x,b_yï¼‰ï¼ŒXè½´ä»å·¦åˆ°å³ï¼ŒYè½´ä»ä¸Šåˆ°ä¸‹ï¼Œé¡ºåºæ˜¯ä»å·¦ä¸Šå³ä¸‹è¡¨ç¤ºï¼Œä»å·¦ä¸Šè§’å¼€å§‹ï¼Œå¦‚ä¸€ä¸ª800X600åƒç´ çš„å›¾åƒçŸ©å½¢è¡¨ç¤ºä¸ºï¼ˆ0,0,800,600ï¼‰ï¼Œå®ƒå®é™…ä¸Šæ—¶å·¦ä¸Šè§’é”å®šï¼Œå‘å³ä¸‹å»¶ä¼¸çš„ã€‚ Palatteï¼ˆè°ƒè‰²æ¿ï¼‰å®šä¹‰æ¯ä¸€ä¸ªåƒç´ çš„çœŸå®é¢œè‰² Infoï¼ˆä¿¡æ¯ï¼‰infoå±æ€§åŒ…å«äº†å›¾ç‰‡çš„ä¸€äº›ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªå­—å…¸å¯¹è±¡ã€‚å¦‚æœæ˜¯ä¸€ä¸ªåŠ¨ç”»ç±»å‹çš„å›¾ç‰‡ï¼Œåˆ™é‡Œé¢å¯åŒ…å«durationï¼Œè¡¨ç¤ºä¸€å¸§ç”»é¢çš„ç°å®æ—¶é—´ã€‚ Filtersï¼ˆè¿‡æ»¤å™¨ï¼‰æä¾›ä¸åŒç±»å‹çš„è¿‡æ»¤å™¨ NEAREST Pick the nearest pixel from the input image. Ignore all other input pixels. æœ€è¿‘æ»¤æ³¢ã€‚ä»è¾“å…¥å›¾åƒä¸­é€‰å–æœ€è¿‘çš„åƒç´ ä½œä¸ºè¾“å‡ºåƒç´ ã€‚å®ƒå¿½ç•¥äº†æ‰€æœ‰å…¶ä»–çš„åƒç´ ã€‚ BILINEAR Use linear interpolation over a 2x2 environment in the input image. Note that in the current version of PIL, this filter uses a fixed input environment when downsampling. åŒçº¿æ€§æ»¤æ³¢ã€‚åœ¨è¾“å…¥å›¾åƒçš„2x2çŸ©é˜µä¸Šè¿›è¡Œçº¿æ€§æ’å€¼ï¼Œï¼Œåšä¸‹é‡‡æ ·æ—¶è¯¥æ»¤æ³¢å™¨ä½¿ç”¨äº†å›ºå®šè¾“å…¥æ¨¡æ¿ BICUBIC Use cubic interpolation over a 4x4 environment in the input image. Note that in the current version of PIL, this filter uses a fixed input environment when downsampling. åŒç«‹æ–¹æ»¤æ³¢ã€‚åœ¨è¾“å…¥å›¾åƒçš„4x4çŸ©é˜µä¸Šè¿›è¡Œç«‹æ–¹æ’å€¼ï¼Œåšä¸‹é‡‡æ ·æ—¶è¯¥æ»¤æ³¢å™¨ä½¿ç”¨äº†å›ºå®šè¾“å…¥æ¨¡æ¿ ANTIALIAS Calculate the output pixel value using a high-quality resampling filter (a truncated sinc) on all pixels that may contribute to the output value. In the current version of PIL, this filter can only be used with the resize and thumbnail methods. å¹³æ»‘æ»¤æ³¢ï¼Œå¯¹æ‰€æœ‰å¯ä»¥å½±å“è¾“å‡ºåƒç´ çš„è¾“å…¥åƒç´ è¿›è¡Œé«˜è´¨é‡çš„é‡é‡‡æ ·æ»¤æ³¢ï¼Œä»¥è®¡ç®—è¾“å‡ºåƒç´ å€¼ï¼Œè¿™ä¸ªæ»¤æ³¢å™¨åªç”¨äºæ”¹å˜å°ºå¯¸å’Œç¼©ç•¥å›¾æ–¹æ³•ã€‚ANTIALIASæ»¤æ³¢å™¨æ˜¯ä¸‹é‡‡æ ·ï¼Œå°†å¤§å›¾è½¬æ¢ä¸ºå°å›¾æˆ–å·¦ç¼©ç•¥å›¾æ—¶å”¯ä¸€æ­£ç¡®çš„æ»¤æ³¢å™¨ï¼ŒBILIEARå’ŒBICUBICæ»¤æ³¢å™¨ä½¿ç”¨å›ºå®šçš„è¾“å…¥æ¨¡æ¿ï¼Œç”¨äºå›ºå®šæ¯”ä¾‹çš„å‡ ä½•å˜æ¢å’Œä¸Šé‡‡æ ·æ˜¯æœ€å¥½çš„ è§£æåŠ¨ç”»Gifã€Webp12345678910image = Image.open(path)while image.tell() &lt; image.n_frames: image.seek(image.tell() + 1) # image.toqpixmap() è·å–å½“å‰ç”»é¢ # duration è¡¨ç¤ºä¸€å¸§çš„æ˜¾ç¤ºæ—¶é—´ if &#x27;duration&#x27; in image.info.keys(): duration = image.info[&#x27;duration&#x27;] else: duration = 100 time.sleep(duration/1000) å‚è€ƒ https://github.com/python-pillow/Pillow https://www.osgeo.cn/pillow/handbook/tutorial.html","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"Pyhon2è·ŸPython3çš„åŒºåˆ«","date":"2022-03-08T02:25:29.694Z","path":"wiki/Python/Python2è·ŸPython3çš„åŒºåˆ«/","text":"strå’ŒbytesåŸºæœ¬æ¦‚å¿µ å­—èŠ‚ï¼ˆByte ï¼‰ï¼šæ˜¯è®¡ç®—æœºä¿¡æ¯æŠ€æœ¯ç”¨äºè®¡é‡å­˜å‚¨å®¹é‡çš„ä¸€ç§è®¡é‡å•ä½ï¼Œä½œä¸ºä¸€ä¸ªå•ä½æ¥å¤„ç†çš„ä¸€ä¸ªäºŒè¿›åˆ¶æ•°å­—ä¸²ï¼Œæ˜¯æ„æˆä¿¡æ¯çš„ä¸€ä¸ªå°å•ä½ã€‚æœ€å¸¸ç”¨çš„å­—èŠ‚æ˜¯å…«ä½çš„å­—èŠ‚ï¼Œå³å®ƒåŒ…å«å…«ä½çš„äºŒè¿›åˆ¶æ•°; ä½(bit)ï¼šæ˜¯è®¡ç®—æœº å†…éƒ¨æ•°æ® å‚¨å­˜çš„æœ€å°å•ä½ï¼Œ11001100æ˜¯ä¸€ä¸ªå…«ä½äºŒè¿›åˆ¶æ•°; å­—èŠ‚(byte)ï¼šæ˜¯è®¡ç®—æœºä¸­ æ•°æ®å¤„ç† çš„åŸºæœ¬å•ä½ï¼Œä¹ æƒ¯ä¸Šç”¨å¤§å†™ B æ¥è¡¨ç¤º,1B(byte,å­—èŠ‚)&#x3D; 8bit(ä½); å­—ç¬¦ï¼šæŒ‡è®¡ç®—æœºä¸­ä½¿ç”¨çš„å­—æ¯ã€æ•°å­—ã€å­—å’Œç¬¦å·ï¼ŒåŒ…æ‹¬ï¼š1ã€2ã€3ã€Aã€Bã€Cã€~ï¼Â·#ï¿¥%â€¦â€¦â€”*ï¼ˆï¼‰â€”â€”+ç­‰ç­‰ã€‚ å­—ç¬¦ä¸²ï¼šå­—ç¬¦ä¸²æ˜¯å­—ç¬¦åºåˆ—ï¼Œå®ƒæ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µï¼Œä¸èƒ½ç›´æ¥å­˜å‚¨åœ¨ç¡¬ç›˜ â€“ å­—èŠ‚ä¸²æ˜¯ç»™è®¡ç®—æœºçœ‹çš„ ï¼Œç»™è®¡ç®—æœºä¼ è¾“æˆ–è€…ä¿å­˜çš„ï¼Œ åœ¨Pythonä¸­ï¼Œç¨‹åºä¸­çš„æ–‡æœ¬éƒ½ç”¨å­—ç¬¦ä¸²è¡¨ç¤ºã€‚ å­—èŠ‚ä¸²ï¼šå­—èŠ‚ä¸²æ˜¯å­—èŠ‚åºåˆ—ï¼Œå®ƒå¯ä»¥ç›´æ¥å­˜å‚¨åœ¨ç¡¬ç›˜ï¼Œ å­—èŠ‚ä¸²æ˜¯ç»™è®¡ç®—æœºçœ‹çš„ ã€‚å®ƒä»¬ä¹‹é—´çš„æ˜ å°„è¢«ç§°ä¸ºç¼–ç &#x2F;è§£ç  â€“ å­—ç¬¦ä¸²æ˜¯ç»™äººçœ‹çš„ï¼Œç”¨æ¥æ“ä½œçš„ã€‚ å­—ç¬¦é›†ï¼šä¸ºæ¯ä¸€ä¸ªå­—ç¬¦åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„IDï¼ˆç ä½&#x2F;ç ç‚¹&#x2F;Code Pointï¼‰ã€‚Unicodeæ˜¯å­—ç¬¦é›†ã€‚ ç¼–ç è§„åˆ™ï¼šå°†ç ä½è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è§„åˆ™ï¼ˆç¼–ç &#x2F;è§£ç  å¯ä»¥ç†è§£ä¸º åŠ å¯†&#x2F;è§£å¯† çš„è¿‡ç¨‹ï¼‰ã€‚utf-8æ˜¯ç¼–ç è§„åˆ™ã€‚ 12341 KB = 1024 B(å­—èŠ‚)ï¼›1 MB = 1024 KB; (2^10 B)1 GB = 1024 MB; (2^20 B)1 TB = 1024 GB; (2^30 B) Python2ä¸­çš„strå’Œunicode str:è¡¨ç¤ºç”±bytesåºåˆ—çš„å­—ç¬¦ä¸²ã€‚ unicode:è¡¨ç¤ºunicodeç ç‚¹åºåˆ—çš„å­—ç¬¦ä¸²ã€‚ 12345678910111213141516171819202122&gt;&gt;&gt; a=&#x27;ä½ å¥½&#x27;&gt;&gt;&gt; a&#x27;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd&#x27;&gt;&gt;&gt; b=u&#x27;ä½ å¥½&#x27;&gt;&gt;&gt; bu&#x27;\\u4f60\\u597d&#x27;&gt;&gt;&gt; print(a)ä½ å¥½&gt;&gt;&gt; print(b)ä½ å¥½&gt;&gt;&gt; a.__class__&lt;type &#x27;str&#x27;&gt;&gt;&gt;&gt; b.__class__&lt;type &#x27;unicode&#x27;&gt;&gt;&gt;&gt; len(a)6&gt;&gt;&gt; len(b)2&gt;&gt;&gt; a.decode(&#x27;utf-8&#x27;)u&#x27;\\u4f60\\u597d&#x27;&gt;&gt;&gt; b.encode(&#x27;utf-8&#x27;)&#x27;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd&#x27; æ€»ç»“ï¼š stringç›´æ¥ç”¨å¼•å·æ¥è¡¨ç¤ºï¼Œunicodeåœ¨å¼•å·å‰åŠ ä¸€ä¸ªuã€‚ ç›´æ¥è¾“å…¥çš„stringå¸¸é‡ä¼šç”¨ç³»ç»Ÿç¼ºçœç¼–ç æ–¹å¼æ¥ç¼–ç ã€‚ len(string)è¿”å›stringçš„å­—èŠ‚æ•°ï¼Œlen(unicode)è¿”å›çš„æ˜¯å­—ç¬¦æ•°ã€‚ encodeå’Œdecodeä½¿å¾—strå’Œunicodeä¹‹é—´è¿›è¡Œç›¸äº’è½¬æ¢ã€‚ Python3ä¸­çš„strå’Œbyte strï¼šstræ ¼å¼çš„å®šä¹‰å˜æ›´ä¸ºâ€Unicodeç±»å‹çš„å­—ç¬¦ä¸²â€œï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¢«å¼•å·æ¡†èµ·æ¥çš„å­—ç¬¦ä¸²ï¼Œæ˜¯ä½¿ç”¨Unicodeç¼–ç çš„ã€‚ä¹Ÿå°±æ˜¯è¯´unicodeç±»å‹åœ¨python3ä¸­æ²¡æœ‰äº†ï¼Œpython3ä¸­çš„strå°±ç›¸å½“äºpython2ä¸­çš„unicodeã€‚ bytesï¼šbytes å‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„ bytes å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯ä¸€ä¸ª 0 &lt;&#x3D; x &lt; 256 åŒºé—´å†…çš„æ•´æ•°ä¸å¯å˜åºåˆ—ã€‚å®ƒæ˜¯ bytearray çš„ä¸å¯å˜ç‰ˆæœ¬ã€‚bytes åªè´Ÿè´£ä»¥å­—èŠ‚åºåˆ—çš„å½¢å¼ï¼ˆäºŒè¿›åˆ¶å½¢å¼ï¼‰æ¥å­˜å‚¨æ•°æ®ï¼Œè‡³äºè¿™äº›æ•°æ®åˆ°åº•è¡¨ç¤ºä»€ä¹ˆå†…å®¹ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ç­‰ï¼‰ï¼Œå®Œå…¨ç”±ç¨‹åºçš„è§£ææ–¹å¼å†³å®šã€‚å¦‚æœé‡‡ç”¨åˆé€‚çš„å­—ç¬¦ç¼–ç æ–¹å¼ï¼ˆå­—ç¬¦é›†ï¼‰ï¼Œå­—èŠ‚ä¸²å¯ä»¥æ¢å¤æˆå­—ç¬¦ä¸²ï¼›åä¹‹äº¦ç„¶ï¼Œå­—ç¬¦ä¸²ä¹Ÿå¯ä»¥è½¬æ¢æˆå­—èŠ‚ä¸²ã€‚ bytearrayï¼šå¯å˜çš„å­èŠ‚æ•°ç»„ã€‚ 1234567891011121314&gt;&gt;&gt; a=&#x27;ä½ å¥½&#x27;&gt;&gt;&gt; a&#x27;ä½ å¥½&#x27;&gt;&gt;&gt; type(a)&lt;class &#x27;str&#x27;&gt;&gt;&gt;&gt; b = bytes(a, encoding=&#x27;utf-8&#x27;)&gt;&gt;&gt; bb&#x27;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd&#x27;&gt;&gt;&gt; type(b)&lt;class &#x27;bytes&#x27;&gt;&gt;&gt;&gt; a.encode()b&#x27;\\xe4\\xbd\\xa0\\xe5\\xa5\\xbd&#x27;&gt;&gt;&gt; b.decode()&#x27;ä½ å¥½&#x27;","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"Pythonå¤šçº¿ç¨‹","date":"2022-03-08T02:25:29.694Z","path":"wiki/Python/Pythonå¤šçº¿ç¨‹ç¼–ç¨‹/","text":"Pythonä»£ç çš„æ‰§è¡Œç”±è™šæ‹Ÿæœºæ¥æ§åˆ¶ã€‚Pythonå†ä¸»å¾ªç¯ä¸­ï¼ŒåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹å†æ‰§è¡Œï¼Œå°±åƒå•CPUçš„ç³»ç»Ÿä¸­è¿è¡Œå¤šä¸ªè¿›ç¨‹é‚£æ ·ï¼Œå†…å­˜ä¸­å¯ä»¥å­˜æ”¾å¤šä¸ªç¨‹åºï¼Œä½†ä»»æ„æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªç¨‹åºå†CPUä¸­è¿è¡Œã€‚ å¯¹Pythonè™šæ‹Ÿæœºçš„è®¿é—®ç”±å…¨å±€è§£é‡Šå™¨é”ï¼ˆglobal interpreter lockï¼‰æ¥æ§åˆ¶ï¼Œæ­£æ˜¯è¿™ä¸ªé”èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œã€‚ å‚è€ƒ https://docs.python.org/zh-cn/3/library/threading.html","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"Pythonæ‰©å±•","date":"2022-03-08T02:25:29.694Z","path":"wiki/Python/Python Extending/","text":"å®˜æ–¹æ–‡æ¡£ï¼šhttps://docs.python.org/zh-cn/3/extending/extending.html ** ä»€ä¹ˆæ—¶å€™è¦ç”¨æ‰©å±• æ€§èƒ½ç“¶é¢ˆï¼šæ¯”å¦‚æŸäº›è®¡ç®—åœ¨Pythonä¸­å¾ˆæ…¢ï¼Œæ¯”å¦‚GILå¯¼è‡´CPUåªèƒ½ä½¿ç”¨å•æ ¸ã€‚ ä»£ç ä¿æŠ¤ï¼šå°†æ ¸å¿ƒä»£ç æ”¾åˆ°æ›´ä½å±‚ï¼Œå¢åŠ åç¼–è¯‘éš¾åº¦ã€‚ ** Hello World æ­¥éª¤ ç¼–å†™Cæ–‡ä»¶ ç¼–å†™åŒ…è£…æ–‡ä»¶ ç¼–å†™setupæ–‡ä»¶ ç¼–è¯‘ã€æµ‹è¯• 1. ç¼–å†™Cæ–‡ä»¶12345678910//fib.cæ–‡ä»¶long long _fib(long long n)&#123; if(n &lt; 2) return n; else return _fib(n-1) + _fib(n-2);&#125;; 2. ç¼–å†™åŒ…è£…æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243//speedup_fib.c#include &lt;Python.h&gt; //å¯¼å…¥åŸºç¡€çš„å¤´æ–‡ä»¶//å°è£…å‡½æ•°static PyObject *fib(PyObject *self, PyObject *args) &#123; // Arguments long long n; long long res; if (!PyArg_ParseTuple(args, &quot;l&quot;, &amp;n)) //è½¬æ¢è¾“å…¥å‚æ•°ç±»å‹ç»™C return NULL; res = _fib(n);//è°ƒç”¨å‡½æ•° return Py_BuildValue(&quot;l&quot;, res);//ç»“æœè½¬æ¢æˆPythonç±»å‹&#125;;//æ¨¡å—æ–¹æ³•è¡¨static PyMethodDef SpeedupFibMethods[] = &#123; &#123;&quot;speedup_fib&quot;, (PyCFunction) fib, METH_VARARGS, &quot;fast fib&quot;&#125;, &#123;NULL, NULL, 0, NULL&#125;&#125;;static struct PyModuleDef speedup_fib_module = &#123; PyModuleDef_HEAD_INIT, &quot;speedup_fib&quot;,//æ¨¡å—åå­— &quot;A module containing methods with faster fib.&quot;, -1, SpeedupFibMethods&#125;;//åˆ›å»ºæ¨¡å—PyMODINIT_FUNC PyInit_speedup_fib() &#123; return PyModule_Create(&amp;speedup_fib_module);&#125; 3. ç¼–å†™setup.pyæ–‡ä»¶12345678910from distutils.core import setup, Extensionspeedup_fib_module = Extension(&#x27;speedup_fib&#x27;, sources=[&#x27;speedup_fib.c&#x27;])setup( name=&#x27;SpeedupFoo&#x27;, description=&#x27;A package containing modules for speeding up fib.&#x27;, ext_modules=[speedup_fib_module],) 4. ç¼–è¯‘ã€æµ‹è¯• python setup.py build ç¼–è¯‘æˆåŠŸåä¼šåœ¨buildæ–‡ä»¶å¤¹ç”ŸæˆåŠ¨æ€åº“ï¼Œwindowsä¸‹ä¸ºpydï¼Œlinuxä¸‹ä¸ºso ç¼–å†™æµ‹è¯•è„šæœ¬ 123456789101112131415161718import timedef fib_recursive(n): if n &lt;= 1: return n return fib_recursive(n - 1) + fib_recursive(n - 2)start_ts = time.time()print(fib_recursive(35))print(time.time() - start_ts)from speedup_fib import speedup_fibstart_ts = time.time()print(speedup_fib(35))print(time.time() - start_ts) åŸºæœ¬æ¦‚å¿µå®ä¾‹ä»£ç ","tags":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"}],"categories":[{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"}]},{"title":"Synchronizedä¸ReentrantLockçš„åŒºåˆ«","date":"2022-03-08T02:25:29.692Z","path":"wiki/Java/é¢è¯•é¢˜/Synchronizedä¸ReentrantLockçš„åŒºåˆ«/","text":"åº•å±‚åŸç†åŒºåˆ« åº•å±‚å®ç°ä¸Šæ¥è¯´ï¼Œsynchronized æ˜¯JVMå±‚é¢çš„é”ï¼Œæ˜¯Javaå…³é”®å­—ï¼Œé€šè¿‡monitorå¯¹è±¡æ¥å®Œæˆï¼ˆmonitorenterä¸monitorexitï¼‰ï¼Œå¯¹è±¡åªæœ‰åœ¨åŒæ­¥å—æˆ–åŒæ­¥æ–¹æ³•ä¸­æ‰èƒ½è°ƒç”¨wait&#x2F;notifyæ–¹æ³•ï¼Œ ReentrantLock æ˜¯ä»jdk1.5ä»¥æ¥ï¼ˆjava.util.concurrent.locks.Lockï¼‰æä¾›çš„APIå±‚é¢çš„é”ã€‚ synchronized çš„å®ç°æ¶‰åŠåˆ°é”çš„å‡çº§ï¼Œå…·ä½“ä¸ºæ— é”ã€åå‘é”ã€è‡ªæ—‹é”ã€å‘OSç”³è¯·é‡é‡çº§é”ï¼Œ ReentrantLockå®ç°åˆ™æ˜¯é€šè¿‡åˆ©ç”¨CASï¼ˆCompareAndSwapï¼‰è‡ªæ—‹æœºåˆ¶ä¿è¯çº¿ç¨‹æ“ä½œçš„åŸå­æ€§å’Œvolatileä¿è¯æ•°æ®å¯è§æ€§ä»¥å®ç°é”çš„åŠŸèƒ½ã€‚ æ˜¯å¦å¯æ‰‹åŠ¨é‡Šæ”¾ synchronized ä¸éœ€è¦ç”¨æˆ·å»æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œsynchronized ä»£ç æ‰§è¡Œå®Œåç³»ç»Ÿä¼šè‡ªåŠ¨è®©çº¿ç¨‹é‡Šæ”¾å¯¹é”çš„å ç”¨ï¼› ReentrantLockåˆ™éœ€è¦ç”¨æˆ·å»æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œå¦‚æœæ²¡æœ‰æ‰‹åŠ¨é‡Šæ”¾é”ï¼Œå°±å¯èƒ½å¯¼è‡´æ­»é”ç°è±¡ã€‚ä¸€èˆ¬é€šè¿‡lock()å’Œunlock()æ–¹æ³•é…åˆtry&#x2F;finallyè¯­å¥å—æ¥å®Œæˆï¼Œä½¿ç”¨é‡Šæ”¾æ›´åŠ çµæ´»ã€‚ æ˜¯å¦å¯ä¸­æ–­ synchronizedæ˜¯ä¸å¯ä¸­æ–­ç±»å‹çš„é”ï¼Œé™¤éåŠ é”çš„ä»£ç ä¸­å‡ºç°å¼‚å¸¸æˆ–æ­£å¸¸æ‰§è¡Œå®Œæˆï¼› ReentrantLockåˆ™å¯ä»¥ä¸­æ–­ï¼Œå¯é€šè¿‡trylock(long timeout,TimeUnit unit)è®¾ç½®è¶…æ—¶æ–¹æ³•æˆ–è€…å°†lockInterruptibly()æ”¾åˆ°ä»£ç å—ä¸­ï¼Œè°ƒç”¨interruptæ–¹æ³•è¿›è¡Œä¸­æ–­ã€‚ æ˜¯å¦å…¬å¹³é” synchronizedä¸ºéå…¬å¹³é” ReentrantLockåˆ™å³å¯ä»¥é€‰å…¬å¹³é”ä¹Ÿå¯ä»¥é€‰éå…¬å¹³é”ï¼Œé€šè¿‡æ„é€ æ–¹æ³•new ReentrantLockæ—¶ä¼ å…¥booleanå€¼è¿›è¡Œé€‰æ‹©ï¼Œä¸ºç©ºé»˜è®¤falseéå…¬å¹³é”ï¼Œtrueä¸ºå…¬å¹³é”ã€‚ é”æ˜¯å¦å¯ç»‘å®šæ¡ä»¶Condition synchronizedä¸èƒ½ç»‘å®šï¼› ReentrantLocké€šè¿‡ç»‘å®šConditionç»“åˆawait()&#x2F;singal()æ–¹æ³•å®ç°çº¿ç¨‹çš„ç²¾ç¡®å”¤é†’ï¼Œè€Œä¸æ˜¯åƒsynchronizedé€šè¿‡Objectç±»çš„wait()&#x2F;notify()&#x2F;notifyAll()æ–¹æ³•è¦ä¹ˆéšæœºå”¤é†’ä¸€ä¸ªçº¿ç¨‹è¦ä¹ˆå”¤é†’å…¨éƒ¨çº¿ç¨‹ã€‚ é”çš„å¯¹è±¡ synchronziedé”çš„æ˜¯å¯¹è±¡ï¼Œé”æ˜¯ä¿å­˜åœ¨å¯¹è±¡å¤´é‡Œé¢çš„ï¼Œæ ¹æ®å¯¹è±¡å¤´æ•°æ®æ¥æ ‡è¯†æ˜¯å¦æœ‰çº¿ç¨‹è·å¾—é”&#x2F;äº‰æŠ¢é”ï¼› ReentrantLocké”çš„æ˜¯çº¿ç¨‹ï¼Œæ ¹æ®è¿›å…¥çš„çº¿ç¨‹å’Œintç±»å‹çš„stateæ ‡è¯†é”çš„è·å¾—&#x2F;äº‰æŠ¢ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é¢è¯•é¢˜","slug":"Java/é¢è¯•é¢˜","permalink":"http://airshu.github.io/categories/Java/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"Javaç¬”è¯•é¢˜æ”¶é›†","date":"2022-03-08T02:25:29.691Z","path":"wiki/Java/é¢è¯•é¢˜/Javaç¬”è¯•é¢˜æ”¶é›†/","text":"TCPã€UDPåŒºåˆ« TCPé¢å‘è¿æ¥ï¼ˆå¦‚æ‰“ç”µè¯è¦å…ˆæ‹¨å·å»ºç«‹è¿æ¥ï¼‰;UDPæ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€æ•°æ®ä¹‹å‰ä¸éœ€è¦å»ºç«‹è¿æ¥ TCPæä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡TCPè¿æ¥ä¼ é€çš„æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾;UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ TCPé¢å‘å­—èŠ‚æµï¼Œå®é™…ä¸Šæ˜¯TCPæŠŠæ•°æ®çœ‹æˆä¸€è¿ä¸²æ— ç»“æ„çš„å­—èŠ‚æµ;UDPæ˜¯é¢å‘æŠ¥æ–‡çš„,UDPæ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼Œå› æ­¤ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿æºä¸»æœºçš„å‘é€é€Ÿç‡é™ä½ï¼ˆå¯¹å®æ—¶åº”ç”¨å¾ˆæœ‰ç”¨ï¼Œå¦‚IPç”µè¯ï¼Œå®æ—¶è§†é¢‘ä¼šè®®ç­‰ï¼‰ TCPé¦–éƒ¨å¼€é”€20å­—èŠ‚;UDPçš„é¦–éƒ¨å¼€é”€å°ï¼Œåªæœ‰8ä¸ªå­—èŠ‚ TCPçš„é€»è¾‘é€šä¿¡ä¿¡é“æ˜¯å…¨åŒå·¥çš„å¯é ä¿¡é“ï¼ŒUDPåˆ™æ˜¯ä¸å¯é ä¿¡é“ ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹ä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯æƒ³è·ŸæœåŠ¡å™¨è¿›è¡Œè¿æ¥ï¼Œæ‰€ä»¥çŠ¶æ€å˜ä¸ºä¸»åŠ¨æ‰“å¼€ï¼ŒåŒæ—¶å‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡ç»™æœåŠ¡å™¨ç«¯SYN&#x3D;1ï¼Œå¹¶ä¸”ä¼šæºå¸¦xä¸ªå­—èŠ‚è¿‡å»ã€‚å‘é€å®Œè¯·æ±‚è¿æ¥æŠ¥æ–‡åï¼Œå®¢æˆ·ç«¯çš„çŠ¶æ€å°±å˜ä¸ºSYN_SENT,è¿™ä¸ªçŠ¶æ€ç­‰å¾…å‘é€ç¡®è®¤ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šæœåŠ¡ç«¯æ¥æ”¶åˆ°è¿æ¥è¯·æ±‚æŠ¥æ–‡åï¼Œä»LISTENçŠ¶æ€å˜ä¸ºè¢«åŠ¨æ‰“å¼€çŠ¶æ€ï¼Œç„¶åç»™å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªæŠ¥æ–‡ã€‚è¿™ä¸ªæŠ¥æ–‡æœ‰ä¸¤å±‚æ„æ€ï¼Œä¸€æ˜¯ç¡®è®¤æŠ¥æ–‡ï¼ŒäºŒæ˜¯å¯ä»¥è¾¾åˆ°å‘Šè¯‰å®¢æˆ·ç«¯ï¼Œæˆ‘ä¹Ÿæ‰“å¼€è¿æ¥äº†ã€‚å‘é€å®Œæ¯•åï¼Œå˜ä¸ºSYN_RCVDçŠ¶æ€ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šå®¢æˆ·ç«¯å¾—åˆ°æœåŠ¡ç«¯çš„ç¡®è®¤å’ŒçŸ¥é“æœåŠ¡ç«¯å·²ç»å‡†å¤‡å¥½è¿æ¥åï¼Œè¿˜ä¼šå‘ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡åˆ°æœåŠ¡ç«¯ï¼Œå‘é€å®Œåå®¢æˆ·ç«¯è¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œå½“æœåŠ¡ç«¯æ¥æ”¶åï¼ŒçŠ¶æ€ä¹Ÿå˜ä¸ºESTABLISHEDã€‚ å››æ¬¡æŒ¥æ‰‹ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šä»ESTABLISHEDå˜ä¸ºä¸»åŠ¨å…³é—­çŠ¶æ€ï¼Œå®¢æˆ·ç«¯ä¸»åŠ¨å‘é€é‡Šæ”¾è¿æ¥è¯·æ±‚ç»™æœåŠ¡å™¨ç«¯ï¼ŒFIN&#x3D;1ã€‚å‘é€å®Œä¹‹åå°±å˜ä¸ºFIN_WAIT_1çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€å¯ä»¥è¯´æ˜¯ç­‰å¾…ç¡®è®¤çŠ¶æ€ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„é‡Šæ”¾è¿æ¥è¯·æ±‚åï¼ŒçŠ¶æ€å˜ä¸ºCLOSE_WAITï¼Œç„¶åå‘é€ç¡®è®¤æŠ¥æ–‡ç»™å®¢æˆ·ç«¯ï¼Œå‘Šè¯‰ä»–æˆ‘æ¥æ”¶åˆ°äº†ä½ çš„è¯·æ±‚ã€‚ä¸ºä»€ä¹ˆå˜ä¸ºCLOSE_WAITï¼ŒåŸå› æ˜¯å®¢æˆ·ç«¯å‘é€çš„é‡Šæ”¾è¿æ¥è¯·æ±‚ï¼Œå¯èƒ½è‡ªå·±è¿™ç«¯è¿˜æœ‰æ•°æ®æ²¡æœ‰å‘é€å®Œå‘¢ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™æ•´ä¸ªTCPè¿æ¥çš„çŠ¶æ€å°±å˜ä¸ºäº†åŠå…³é—­çŠ¶æ€ã€‚æœåŠ¡å™¨ç«¯è¿˜èƒ½å‘é€æ•°æ®ï¼Œå¹¶ä¸”å®¢æˆ·ç«¯ä¹Ÿèƒ½æ¥æ”¶æ•°æ®ï¼Œä½†æ˜¯å®¢æˆ·ç«¯ä¸èƒ½åœ¨å‘é€æ•°æ®äº†ï¼Œåªèƒ½å¤Ÿå‘é€ç¡®è®¤æŠ¥æ–‡ã€‚å®¢æˆ·ç«¯æ¥åˆ°æœåŠ¡å™¨çš„ç¡®è®¤æŠ¥æ–‡åï¼Œå°±è¿›å…¥äº†FIN_WAIT_2çŠ¶æ€ã€‚ä¹Ÿå¯ä»¥è¯´è¿™æ˜¯ç­‰å¾…æœåŠ¡å™¨é‡Šæ”¾è¿æ¥çŠ¶æ€ã€‚ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡å™¨ç«¯æ‰€æœ‰çš„æ•°æ®åº¦å‘é€å®Œäº†ï¼Œè®¤ä¸ºå¯ä»¥å…³é—­è¿æ¥äº†ï¼ŒçŠ¶æ€å˜ä¸ºè¢«åŠ¨å…³é—­ï¼Œæ‰€ä»¥å‘å®¢æˆ·ç«¯å‘é€é‡Šæ”¾è¿æ¥æŠ¥æ–‡ï¼Œå‘å®Œä¹‹åè‡ªå·±å˜ä¸ºLAST_WAITçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ç­‰å¾…å®¢æˆ·ç«¯ç¡®è®¤çŠ¶æ€ã€‚ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ¥åˆ°é‡Šæ”¾è¿æ¥æŠ¥æ–‡åï¼Œå‘é€ä¸€ä¸ªç¡®è®¤æŠ¥æ–‡ï¼Œç„¶åè‡ªå·±å˜ä¸ºTIME_WAIT,è€Œä¸æ˜¯ç«‹é©¬å…³é—­ï¼Œå› ä¸ºå®¢æˆ·ç«¯å‘é€çš„ç¡®è®¤æŠ¥æ–‡å¯èƒ½ä¼šä¸¢å¤±ï¼Œä¸¢å¤±çš„è¯æœåŠ¡å™¨å°±ä¼šé‡ä¼ ä¸€ä¸ªFINï¼Œä¹Ÿå°±æ˜¯é‡Šæ”¾è¿æ¥æŠ¥æ–‡ï¼Œè¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯å¿…é¡»è¿˜æ²¡å…³é—­ã€‚ å½“æœåŠ¡å™¨æ¥å—åˆ°ç¡®è®¤æŠ¥æ–‡åï¼ŒæœåŠ¡å™¨å°±è¿›å…¥CLOSEçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å…³é—­äº†ã€‚ä½†æ˜¯ç”±äºä¸Šé¢è¯´çš„è¿™ä¸ªåŸå› ï¼Œå®¢æˆ·ç«¯å¿…é¡»ç­‰å¾…ä¸€å®šçš„æ—¶é—´æ‰èƒ½å¤Ÿè¿›å…¥CLOSEçŠ¶æ€ã€‚ volatileæ‰§è¡Œæ§åˆ¶ï¼šç›®çš„æ˜¯æ§åˆ¶ä»£ç æ‰§è¡Œï¼ˆé¡ºåºï¼‰åŠæ˜¯å¦å¯ä»¥å¹¶è¡Œæ‰§è¡Œã€‚ å†…å­˜å¯è§ï¼šçº¿ç¨‹æ‰§è¡Œç»“æœåœ¨å†…å­˜ä¸­å¯¹å…¶ä»–çº¿ç¨‹çš„å¯è§æ€§ã€‚ volatileæœ¬è´¨æ˜¯åœ¨å‘Šè¯‰jvmå½“å‰å˜é‡åœ¨å¯„å­˜å™¨ï¼ˆå·¥ä½œå†…å­˜ï¼‰ä¸­çš„å€¼æ˜¯ä¸ç¡®å®šçš„ï¼Œéœ€è¦ä»ä¸»å­˜ä¸­è¯»å–ï¼› synchronizedåˆ™æ˜¯é”å®šå½“å‰å˜é‡ï¼Œåªæœ‰å½“å‰çº¿ç¨‹å¯ä»¥è®¿é—®è¯¥å˜é‡ï¼Œå…¶ä»–çº¿ç¨‹è¢«é˜»å¡ä½ã€‚ volatileä»…èƒ½ä½¿ç”¨åœ¨å˜é‡çº§åˆ«ï¼›synchronizedåˆ™å¯ä»¥ä½¿ç”¨åœ¨å˜é‡ã€æ–¹æ³•ã€å’Œç±»çº§åˆ«çš„ volatileä»…èƒ½å®ç°å˜é‡çš„ä¿®æ”¹å¯è§æ€§ï¼Œä¸èƒ½ä¿è¯åŸå­æ€§ï¼›è€Œsynchronizedåˆ™å¯ä»¥ä¿è¯å˜é‡çš„ä¿®æ”¹å¯è§æ€§å’ŒåŸå­æ€§ volatileä¸ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ï¼›synchronizedå¯èƒ½ä¼šé€ æˆçº¿ç¨‹çš„é˜»å¡ã€‚ volatileæ ‡è®°çš„å˜é‡ä¸ä¼šè¢«ç¼–è¯‘å™¨ä¼˜åŒ–ï¼›synchronizedæ ‡è®°çš„å˜é‡å¯ä»¥è¢«ç¼–è¯‘å™¨ä¼˜åŒ– å†…å­˜æ¨¡å‹ å®šä¹‰ ä¸ºä»€ä¹ˆè¦æœ‰å†…å­˜æ¨¡å‹ ä¸ºä»€ä¹ˆè¦é‡æ’åºï¼Œé‡æ’åºåœ¨ä»€ä¹ˆæ—¶å€™æ’ å¦‚ä½•çº¦æŸé‡æ’åºè§„åˆ™ happens-before ä»€ä¹ˆæ˜¯é¡ºåºä¸€è‡´æ€§ CAS å®ç°çš„åŸç†ï¼Œæ˜¯é˜»å¡è¿˜æ˜¯éé˜»å¡æ–¹å¼ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ï¼Œä½¿ç”¨æ—¶éœ€è¦è€ƒè™‘çš„é—®é¢˜ å¤„ç†å™¨å’Œ Java åˆ†åˆ«æ€ä¹ˆä¿è¯åŸå­æ“ä½œ ä¿è¯äº†åŸå­æ€§å°±èƒ½ä¿è¯å¯è§æ€§å—ï¼Ÿ final å†…å­˜è¯­ä¹‰ï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨ï¼Œä½¿ç”¨æ—¶éœ€è¦è€ƒè™‘çš„é—®é¢˜ volatile å†…å­˜è¯­ä¹‰ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ï¼Œç”¨çš„æ—¶å€™éœ€è¦è€ƒè™‘ä»€ä¹ˆé—®é¢˜ synchronized å†…å­˜è¯­ä¹‰ï¼Œä»€ä¹ˆæ—¶å€™ç”¨ï¼Œå’Œé”æ¯”è¾ƒä¸€ä¸‹ä¼˜ç¼ºç‚¹ synchronized ä¸­æ¶‰åŠçš„é”å‡çº§æµç¨‹ é”çš„å†…å­˜è¯­ä¹‰ï¼Œä¸¾ä¾‹è¯´æ˜ï¼ŒåŠ é”å¤±è´¥æ—¶å€™çš„å¤„ç†æµç¨‹ æ¯”è¾ƒä¸‹ CAS ã€volatile ã€synchronizedã€Lock åŒºåˆ« åŸå­æ“ä½œç±»åº•å±‚å®ç°æœºåˆ¶ï¼Ÿè‡ªå¢æ“ä½œæ˜¯æ€ä¹ˆä¿è¯åŸå­æ€§çš„ï¼Ÿ çº¿ç¨‹ çº¿ç¨‹çš„çŠ¶æ€æœ‰å“ªäº› å¦‚ä½•åœ¨ Java ä¸­å®ç°çº¿ç¨‹ï¼Ÿ å¦‚ä½•åœ¨ Java ä¸­å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Ÿ è®¾è®¡çº¿ç¨‹ä¸­æ–­çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ Java ä¸­ interrupted å’Œ isInterrupted æ–¹æ³•çš„åŒºåˆ«ï¼Ÿ å¦‚ä½•åœæ­¢ä¸€ä¸ªçº¿ç¨‹ï¼Ÿ çº¿ç¨‹ join æ–¹æ³•å¹²ä»€ä¹ˆç”¨ï¼Ÿ æœ‰ä¸‰ä¸ªçº¿ç¨‹ T1ï¼ŒT2ï¼ŒT3ï¼Œæ€ä¹ˆç¡®ä¿å®ƒä»¬æŒ‰é¡ºåºæ‰§è¡Œï¼Ÿ çº¿ç¨‹çš„ç­‰å¾…é€šçŸ¥æœºåˆ¶å®ç°æœºåˆ¶ï¼Ÿ ä¸ºä»€ä¹ˆåº”è¯¥åœ¨å¾ªç¯ä¸­æ£€æŸ¥ç­‰å¾…æ¡ä»¶? ä¸ºä»€ä¹ˆ wait å’Œ notify æ–¹æ³•è¦åœ¨åŒæ­¥å—ä¸­è°ƒç”¨ï¼Ÿ ä¸ºä»€ä¹ˆ wait, notify å’Œ notifyAll è¿™äº›æ–¹æ³•ä¸åœ¨ thread ç±»é‡Œé¢ï¼Ÿ ThreadLocal æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå®ç°çš„ çº¿ç¨‹æ± æ˜¯ä»€ä¹ˆï¼Œæäº¤ä¸€ä¸ªä»»åŠ¡è¿›å»ï¼Œå¤„ç†æµç¨‹ï¼Ÿ Executor æ¡†æ¶ä»‹ç» JUC åŒ…ä¸­æä¾›äº†å“ªäº›é…ç½®å¥½çš„çº¿ç¨‹æ± ï¼Œå·®å¼‚åŒ–æ˜¯ä»€ä¹ˆ ä»€ä¹ˆæ˜¯ FutureTaskï¼Ÿ é” Lock æ¥å£æä¾›äº†å“ªäº›å®ç°ç±» AQS æ˜¯ä»€ä¹ˆï¼Œæä¾›äº†å“ªäº›æ–¹æ³• AQS ä¸­ç‹¬å é”å’Œå…±äº«é”çš„æ“ä½œæµç¨‹å¤§ä½“æè¿°ä¸€ä¸‹ é‡å…¥é”æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œä»€ä¹ˆæ—¶å€™è€ƒè™‘ç”¨ è¯»å†™é”æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œä»€ä¹ˆæ—¶å€™è€ƒè™‘ç”¨ï¼Ÿè¯»é”æ˜¯ä»€ä¹ˆç±»å‹çš„é”ï¼Œå†™é”å‘¢ï¼Ÿ è¯´ä¸‹è¯»å†™é”é‡Œçš„é”é™çº§æµç¨‹ï¼Œä»€ä¹ˆæ—¶å€™å¯ä»¥è€ƒè™‘ç”¨è¿™ä¸ªæœºåˆ¶ park æ–¹æ³•æ˜¯æ€ä¹ˆå®ç°çš„ é”çš„ç­‰å¾…é€šçŸ¥æœºåˆ¶ Condition æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæœ‰äº†çº¿ç¨‹çš„ç­‰å¾…é€šçŸ¥æœºåˆ¶ä¸ºä»€ä¹ˆè¿˜è¦è®¾è®¡ Conditionï¼Ÿ æ­»é”æ€ä¹ˆäº§ç”Ÿçš„ï¼Œå¦‚ä½•é¿å… è¯´è¯´ Java ä¸­æœ‰å“ªäº›é” sleepã€waitã€parkã€Condition éƒ½èƒ½è®©çº¿ç¨‹ç­‰å¾…ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å®¹å™¨ä¸å·¥å…· é˜»å¡å’Œéé˜»å¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä»–ä»¬å¯ä»¥ç”¨ä»€ä¹ˆæ–¹å¼å®ç° é˜Ÿåˆ—ï¼ˆQueueï¼‰æä¾›å“ªäº›æ“ä½œ é˜»å¡é˜Ÿåˆ—æä¾›äº†å“ªäº›è·å–å…ƒç´ çš„æ–¹æ³•ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ é˜»å¡é˜Ÿåˆ—æœ‰å“ªäº›å®ç°ï¼Ÿä¸ºä»€ä¹ˆè¦åˆ†æœ‰ç•Œæ— ç•Œï¼Ÿ CountDownLatch æ€ä¹ˆå®ç°çš„ï¼Œä»€ä¹ˆæ—¶å€™è€ƒè™‘ç”¨ï¼Ÿ CyclicBarrier æ€ä¹ˆå®ç°çš„ï¼Œä»€ä¹ˆæ—¶å€™è€ƒè™‘ç”¨ï¼Ÿ Semaphore æ€ä¹ˆå®ç°çš„ï¼Œä»€ä¹ˆæ—¶å€™è€ƒè™‘ç”¨ï¼Ÿ å¦‚ä½•åœ¨ä¸¤ä¸ªçº¿ç¨‹é—´å…±äº«æ•°æ®ï¼Ÿ Exchanger æ€ä¹ˆå®ç°çš„ï¼Œä»€ä¹ˆæ—¶å€™è€ƒè™‘ç”¨ï¼Ÿ ConcurrentHashMap å®ç°ï¼Ÿ fork&#x2F;join æ¡†æ¶æ˜¯ä»€ä¹ˆï¼Ÿ å†…å­˜ç®¡ç† ä¸ºä»€ä¹ˆéœ€è¦ JVMï¼Ÿ ç®€å•æè¿° JMM å’Œ JVM ä¸¤ä¸ªæ¦‚å¿µ JVM å†…å­˜ç®¡ç† æ°¸ä¹…ä»£ã€å…ƒç©ºé—´ã€æ–¹æ³•åŒºçš„å…³ç³» ç±»åŠ è½½è¿‡ç¨‹ åŒäº²å§”æ´¾æ¨¡å¼æœ‰ä»€ä¹ˆå¥½å¤„ å¦‚ä½•è¦†ç›– JDK æä¾›çš„ç»„ä»¶ï¼Œæ¯”å¦‚è¦†ç›– ArrayList çš„å®ç° new ä¸€ä¸ªå¯¹è±¡çš„è¿‡ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆï¼ˆç±»åŠ è½½ã€å˜é‡åˆå§‹åŒ–ã€å†…å­˜åˆ†é…ï¼‰ å¯¹è±¡çš„æ­»äº¡è¿‡ç¨‹ JVM å¯èƒ½ä¼šæŠ›å‡ºå“ªäº› OOM åƒåœ¾å›æ”¶ç®—æ³•æœ‰å“ªäº›ï¼Ÿä¼˜ç¼ºç‚¹æ¯”è¾ƒ ç†ŸçŸ¥çš„åƒåœ¾å›æ”¶å™¨æœ‰å“ªäº›ï¼Œç®€å•æè¿°æ¯ä¸ªåº”ç”¨åœºæ™¯ CMS å’Œ G1 çš„åƒåœ¾å›æ”¶æ­¥éª¤æ˜¯ï¼Ÿ G1 ç›¸å¯¹äº CMS çš„ä¼˜ç¼ºç‚¹ æ€§èƒ½ç›‘æ§ä¸è°ƒä¼˜ å¦‚ä½•ç›‘æ§ GC å¸¸è§ OutOfMemoryError æœ‰å“ªäº› å¸¸è§çš„ JDK è¯Šæ–­å‘½ä»¤æœ‰å“ªäº›ï¼Œåº”ç”¨åœºæ™¯ï¼Ÿ CPU è¾ƒé«˜ï¼Œå¦‚ä½•å®šä½é—®é¢˜ å†…å­˜å ç”¨è¾ƒé«˜ï¼Œå¦‚ä½•å®šä½å¤§å¯¹è±¡ å†…å­˜æ³„æ¼æ—¶ï¼Œå¦‚ä½•å®æ—¶è·Ÿè¸ªå†…å­˜å˜åŒ–æƒ…å†µ å†…å­˜æ³„æ¼æ—¶ï¼Œå¦‚ä½•å®šä½é—®é¢˜ä»£ç  å¤§å‹é¡¹ç›®å¦‚ä½•è¿›è¡Œæ€§èƒ½ç“¶é¢ˆè°ƒä¼˜ï¼Ÿè™šæ‹Ÿæœºå­ç³»ç»Ÿ å­—èŠ‚ç æ˜¯å¦‚ä½•åœ¨ JVM ä¸­è¿›è¡Œæµè½¬çš„ï¼ˆæ ˆå¸§ï¼‰ æ–¹æ³•è°ƒç”¨çš„åº•å±‚å®ç° æ–¹æ³•é‡å†™å’Œé‡è½½çš„å®ç°è¿‡ç¨‹ invokedynamic æŒ‡ä»¤å®ç° å¦‚ä½•ä¿®æ”¹å­—èŠ‚ç  JIT å‚æ•°é…ç½®å¦‚ä½•å½±å“ç¨‹åºè¿è¡Œï¼Ÿ è™šæ‹Ÿæœºæœ‰å“ªäº›æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ JavaåŸºç¡€ 1.JAVA ä¸­çš„å‡ ç§æ•°æ®ç±»å‹æ˜¯ä»€ä¹ˆï¼Œå„è‡ªå ç”¨å¤šå°‘å­—èŠ‚ã€‚2.String ç±»èƒ½è¢«ç»§æ‰¿å—ï¼Œä¸ºä»€ä¹ˆã€‚3. ä¸¤ä¸ªå¯¹è±¡çš„ hashCode() ç›¸åŒï¼Œåˆ™ equals() ä¹Ÿä¸€å®šä¸º trueï¼Œå¯¹å—ï¼Ÿ4. String å±äºåŸºç¡€çš„æ•°æ®ç±»å‹å—ï¼Ÿ5.Java ä¸­æ“ä½œå­—ç¬¦ä¸²éƒ½æœ‰å“ªäº›ç±»ï¼Ÿå®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ6.Java ä¸­ IO æµåˆ†ä¸ºå‡ ç§ï¼Ÿ7.BIOã€NIOã€AIO æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ8.ç”¨è¿‡å“ªäº› Map ç±»ï¼Œéƒ½æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ŒHashMap æ—¶çº¿ç¨‹å®‰å…¨çš„å—ï¼Œå¹¶å‘ä¸‹ä½¿ç”¨çš„ Map æ˜¯ä»€ä¹ˆï¼Œä»–ä»¬çš„å†…éƒ¨åŸç†åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Œæ¯”å¦‚å­˜å‚¨æ–¹æ³•ï¼Œhashcodeï¼Œæ‰©å®¹ï¼Œé»˜è®¤å®¹é‡ç­‰ã€‚9. å¦‚ä½•å°†å­—ç¬¦ä¸²åè½¬ï¼Ÿ10.æŠ½è±¡ç±»å¿…é¡»è¦æœ‰æŠ½è±¡æ–¹æ³•å—ï¼Ÿ11.æ™®é€šç±»å’ŒæŠ½è±¡ç±»æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ12.æŠ½è±¡ç±»èƒ½ä½¿ç”¨ final ä¿®é¥°å—ï¼Ÿ13.ArrayList å’Œ LinkedList æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ14.ConcurrentHashMapçš„æ•°æ®ç»“æ„15.volatileä½œç”¨16.Atomicç±»å¦‚ä½•ä¿è¯åŸå­æ€§ï¼ˆCASæ“ä½œï¼‰17.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨çº¿ç¨‹æ±  JVM è¿è¡Œæ—¶æ•°æ®åŒºåŸŸï¼ˆå†…å­˜æ¨¡å‹ï¼‰ åƒåœ¾å›æ”¶æœºåˆ¶ åƒåœ¾å›æ”¶ç®—æ³• Minor GCå’ŒFull GCè§¦å‘æ¡ä»¶ GCä¸­Stop the worldï¼ˆSTWï¼‰ å„åƒåœ¾å›æ”¶å™¨çš„ç‰¹ç‚¹åŠåŒºåˆ« åŒäº²å§”æ´¾æ¨¡å‹ JDBCå’ŒåŒäº²å§”æ´¾æ¨¡å‹å…³ç³» JVM ä¸­ä¸€æ¬¡å®Œæ•´çš„ GC æµç¨‹æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œå¯¹è±¡å¦‚ä½•æ™‹å‡åˆ°è€å¹´ä»£ï¼Œè¯´è¯´ä½ çŸ¥é“çš„å‡ ç§ä¸»è¦çš„ JVM å‚æ•° æ“ä½œç³»ç»Ÿç¯‡ è¿›ç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ« è¿›ç¨‹åŒæ­¥çš„å‡ ç§æ–¹å¼ çº¿ç¨‹é—´åŒæ­¥çš„æ–¹å¼ ä»€ä¹ˆæ˜¯ç¼“å†²åŒºæº¢å‡ºã€‚æœ‰ä»€ä¹ˆå±å®³ï¼Œå…¶åŸå› æ˜¯ä»€ä¹ˆ è¿›ç¨‹ä¸­æœ‰å“ªå‡ ç§çŠ¶æ€ åˆ†é¡µå’Œåˆ†æ®µæœ‰ä»€ä¹ˆåŒºåˆ«","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é¢è¯•é¢˜","slug":"Java/é¢è¯•é¢˜","permalink":"http://airshu.github.io/categories/Java/%E9%9D%A2%E8%AF%95%E9%A2%98/"}]},{"title":"LinkedList","date":"2022-03-08T02:25:29.690Z","path":"wiki/Java/é›†åˆ/LinkedList/","text":"æ¦‚è¿° LinkedList æ˜¯ä¸€ä¸ªç»§æ‰¿äºAbstractSequentialListçš„åŒå‘é“¾è¡¨ã€‚å®ƒä¹Ÿå¯ä»¥è¢«å½“ä½œå †æ ˆã€é˜Ÿåˆ—æˆ–åŒç«¯é˜Ÿåˆ—è¿›è¡Œæ“ä½œã€‚ LinkedList å®ç° List æ¥å£ï¼Œèƒ½å¯¹å®ƒè¿›è¡Œé˜Ÿåˆ—æ“ä½œã€‚ LinkedList å®ç° Deque æ¥å£ï¼Œå³èƒ½å°†LinkedListå½“ä½œåŒç«¯é˜Ÿåˆ—ä½¿ç”¨ã€‚ LinkedList å®ç°äº†Cloneableæ¥å£ï¼Œå³è¦†ç›–äº†å‡½æ•°clone()ï¼Œèƒ½å…‹éš†ã€‚ LinkedList å®ç°java.io.Serializableæ¥å£ï¼Œè¿™æ„å‘³ç€LinkedListæ”¯æŒåºåˆ—åŒ–ï¼Œèƒ½é€šè¿‡åºåˆ—åŒ–å»ä¼ è¾“ã€‚ LinkedList æ˜¯éåŒæ­¥çš„ã€‚ ä½¿ç”¨åœºæ™¯ éœ€è¦é€šè¿‡å¾ªç¯è¿­ä»£æ¥è®¿é—®åˆ—è¡¨ä¸­çš„æŸäº›å…ƒç´ ã€‚ éœ€è¦é¢‘ç¹çš„åœ¨åˆ—è¡¨å¼€å¤´ã€ä¸­é—´ã€æœ«å°¾ç­‰ä½ç½®è¿›è¡Œæ·»åŠ å’Œåˆ é™¤å…ƒç´ æ“ä½œã€‚ å‚è€ƒ https://www.cnblogs.com/skywang12345/p/3308807.html","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é›†åˆ","slug":"Java/é›†åˆ","permalink":"http://airshu.github.io/categories/Java/%E9%9B%86%E5%90%88/"}]},{"title":"ç±»åŠ è½½","date":"2022-03-08T02:25:29.689Z","path":"wiki/Java/è¿›é˜¶/ç±»åŠ è½½/","text":"ç±»åŠ è½½è¿‡ç¨‹åŠ è½½ï¼ŒéªŒè¯ï¼Œå‡†å¤‡ï¼Œè§£æï¼Œåˆå§‹åŒ–ï¼Œä½¿ç”¨ï¼Œå¸è½½ åŠ è½½ ä½¿ç”¨ new å…³é”®å­—å®ä¾‹åŒ–å¯¹è±¡ï¼Œè¯»å–æˆ–è€…è®¾ç½®ä¸€ä¸ªç±»çš„é™æ€å˜é‡(è¢« finalä¿®é¥°çš„é™¤å¤–ï¼Œå·²ç»åœ¨ç¼–è¯‘å™¨è¢«åŠ å…¥å¸¸é‡æ± )ï¼Œä»¥åŠè°ƒç”¨ä¸€ä¸ªç±»çš„é™æ€æ–¹æ³•çš„ æ—¶å€™ å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨çš„æ—¶å€™ å½“åˆå§‹åŒ–ä¸€ä¸ªç±»æ—¶ï¼Œå¦‚æœå…¶çˆ¶ç±»æ²¡æœ‰è¢«åŠ è½½ï¼Œåˆ™å…ˆå¯¹å…¶çˆ¶ç±»è¿›è¡ŒåŠ è½½ å½“è™šæ‹Ÿæœºå¯åŠ¨çš„æ—¶å€™ï¼Œç”¨æˆ·æŒ‡å®šçš„(åŒ…å« main æ–¹æ³•)çš„ç±»ä¼šè¢«åŠ è½½ åœ¨ç±»çš„åŠ è½½é˜¶æ®µï¼Œè™šæ‹Ÿæœºä¼šå®Œæˆä»¥ä¸‹ä¸‰ä»¶äº‹æƒ…: é€šè¿‡ä¸€ä¸ªç±»çš„å…¨é™å®šåè·å–å®šä¹‰ç±»çš„äºŒè¿›åˆ¶å­—èŠ‚æµ å°†è¿™ä¸ªå­—èŠ‚æµæ‰€ä»£è¡¨çš„é™æ€å­˜å‚¨ç»“æ„è½¬åŒ–ä¸ºæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ åœ¨ Java å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„ Class å¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºè¿™äº›æ•°æ®çš„è®¿é—®å…¥å£ã€‚ éªŒè¯è¿™ä¸€é˜¶æ®µæ˜¯ä¸ºäº†ç¡®ä¿ class æ–‡ä»¶çš„å­—èŠ‚æµåŒ…å«çš„ä¿¡æ¯ç¬¦åˆå½“å‰è™šæ‹Ÿæœºçš„è¦æ±‚ï¼Œå¹¶ä¸”ä¸ä¼šå±å®³è™šæ‹Ÿæœºè‡ªèº«çš„å®‰å…¨ã€‚ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªè¿‡ç¨‹: æ–‡ä»¶æ ¼å¼éªŒè¯ å…ƒæ•°æ®éªŒè¯ å­—èŠ‚ç éªŒè¯ ç¬¦å·å¼•ç”¨éªŒè¯ å‡†å¤‡å‡†å¤‡é˜¶æ®µæ˜¯æ­£å¼ä¸ºç±»å˜é‡åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å†…å­˜éƒ½å°†åœ¨ æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…ã€‚è¿™ä¸ªé˜¶æ®µä¸­è¿›è¡Œå†…å­˜åˆ†é…çš„å˜é‡åªæœ‰è¢« static ä¿®é¥°çš„å˜é‡ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸ºé»˜è®¤å€¼ï¼Œè€ŒçœŸæ­£çš„èµ‹å€¼åˆ™åœ¨åˆå§‹åŒ–é˜¶æ®µã€‚å¦å¤–ï¼Œè¢« final static å­—æ®µ ä¿®é¥°çš„å¸¸é‡åœ¨ç¼–è¯‘å™¨å°±å·²ç»è¢«èµ‹å€¼ã€‚ è§£æè§£æé˜¶æ®µä¸»è¦æ˜¯è™šæ‹Ÿæœºå°†å¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨çš„è¿‡ç¨‹ã€‚ åˆå§‹åŒ–åˆå§‹åŒ–é˜¶æ®µæ˜¯æ‰§è¡Œç±»æ„é€ å™¨&lt;cinit&gt;()æ–¹æ³•çš„è¿‡ç¨‹ã€‚ &lt;cinit&gt;()ä¸ç±»çš„æ„é€ æ–¹æ³•ä¸åŒï¼Œ&lt;cinit&gt;()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ”¶é›†ç±»ä¸­çš„æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€è¯­å¥å—ä¸­çš„è¯­å¥åˆå¹¶è€Œæˆçš„ã€‚ç¼–è¯‘å™¨æ”¶é›†çš„é¡ºåºæ˜¯æŒ‰è¯­å¥åœ¨æºæ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºå†³å®šçš„ï¼Œé™æ€è¯­å¥å—ä¸­åªèƒ½è®¿é—®å®šä¹‰åœ¨å®ƒä¹‹å‰çš„é™æ€å˜ é‡ï¼Œå®šä¹‰åœ¨å®ƒä¹‹åçš„é™æ€å˜é‡ï¼Œåªå¯ä»¥èµ‹å€¼ï¼Œä¸å¯ä»¥è®¿é—®ã€‚ è™šæ‹Ÿæœºä¼šä¿è¯å­ç±»çš„&lt;cinit&gt;()æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå…¶çˆ¶ç±»çš„&lt;cinit&gt;()æ–¹æ³•ä¸€å®šè¢«æ‰§è¡Œ (çˆ¶ç±»å…ˆä¸å­ç±»å®ŒæˆåŠ è½½è¿‡ç¨‹)","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"æ³¨è§£","date":"2022-03-08T02:25:29.689Z","path":"wiki/Java/è¿›é˜¶/æ³¨è§£/","text":"Javaä»1.5å¼•å…¥äº†æ³¨è§£(Annotation)ï¼Œä½¿å¾—Javaå…·æœ‰åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§ã€‚ Javaä¸­å¸¸ç”¨çš„æ³¨è§£æœ‰ï¼š @Override @Deprecated @SuppressWarnings å…ƒæ³¨è§£ç”¨æ¥ä¿®é¥°æ³¨è§£çš„æ³¨è§£ @Documented @Retention @Target @Inherited @Documentedç”¨äºæè¿°å…¶å®ƒç±»å‹çš„annotationåº”è¯¥è¢«ä½œä¸ºè¢«æ ‡æ³¨çš„ç¨‹åºæˆå‘˜çš„å…¬å…±APIï¼Œå› æ­¤å¯ä»¥è¢«ä¾‹å¦‚javadocæ­¤ç±»çš„å·¥å…·æ–‡æ¡£åŒ–ã€‚ @Retention SOURCE:æºæ–‡ä»¶ä¿ç•™ï¼Œåœ¨ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘æ—¶å®ƒå°†è¢«ä¸¢å¼ƒå¿½è§†ï¼› CLASS:classä¿ç•™ï¼Œå¹¶ä¸ä¼šè¢«åŠ è½½åˆ° JVM ä¸­ï¼› RUNTIME:è¿è¡Œæ—¶ä¿ç•™ï¼› @Target CONSTRUCTOR:æ„é€ å™¨ï¼› FIELD:å®ä¾‹ï¼› LOCAL_VARIABLE:å±€éƒ¨å˜é‡ï¼› METHOD:æ–¹æ³•ï¼› PACKAGE:åŒ…ï¼› PARAMETER:å‚æ•°; TYPE:ç±»ã€æ¥å£(åŒ…æ‹¬æ³¨è§£ç±»å‹) æˆ–enumå£°æ˜ã€‚ @Inheritedç”¨äºæè¿°æŸä¸ªè¢«æ ‡æ³¨çš„ç±»å‹æ˜¯å¯è¢«ç»§æ‰¿çš„ã€‚å¦‚æœä¸€ä¸ªä½¿ç”¨äº†@Inheritedä¿®é¥°çš„annotationç±»å‹è¢«ç”¨äºä¸€ä¸ªclassï¼Œåˆ™è¿™ä¸ªannotationå°†è¢«ç”¨äºè¯¥classçš„å­ç±»ã€‚ è‡ªå®šä¹‰æ³¨è§£æ³¨æ„äº‹é¡¹12345678910111213141516171819202122package com.shjlone.anno;enum Lamp &#123; RED, GREEN, YELLOW&#125;public @interface MyAnno &#123;//åŸºæœ¬æ•°æ®ç±»å‹ int num() default 1; //Stringç±»å‹ String value(); //æšä¸¾ç±»å‹ Lamp lamp(); //æ³¨è§£ç±»å‹ MyAnno2 myAnno2(); //ä»¥ä¸Šç±»å‹çš„æ•°ç»„ String[] values(); Lamp[] lamps(); MyAnno2[] myAnno2s(); int[] nums();&#125; æ³¨è§£å±æ€§çš„è¿”å›å€¼ç±»å‹å¿…é¡»æ˜¯ä»¥ä¸‹å‡ ç§ï¼š åŸºæœ¬æ•°æ®ç±»å‹ Stringç±»å‹ æšä¸¾ç±»å‹ æ³¨è§£ ä»¥ä¸Šç±»å‹çš„æ•°ç»„ å¦‚æœè¿”å›å€¼æ²¡æœ‰é»˜è®¤å€¼ï¼Œåˆ™åœ¨ä½¿ç”¨æ³¨è§£æ—¶å¿…é¡»æ˜¾ç¤ºè®¾ç½® APTAPT å³ä¸º Annotation Processing Toolï¼Œå®ƒæ˜¯ javac çš„ä¸€ä¸ªå·¥å…·ï¼Œä¸­æ–‡æ„æ€ä¸ºç¼–è¯‘ æ—¶æ³¨è§£å¤„ç†å™¨ã€‚APT å¯ä»¥ç”¨æ¥åœ¨ç¼–è¯‘æ—¶æ‰«æå’Œå¤„ç†æ³¨è§£ã€‚è·å–æ³¨è§£åŠç”Ÿæˆä»£ç éƒ½æ˜¯åœ¨ä»£ç ç¼–è¯‘æ—¶å€™å®Œæˆçš„ï¼Œç›¸æ¯”åå°„åœ¨è¿è¡Œæ—¶å¤„ç†æ³¨è§£å¤§å¤§æé«˜äº†ç¨‹åºæ€§èƒ½ã€‚APT çš„æ ¸å¿ƒæ˜¯ AbstractProcessor ç±»ã€‚ RoundEnvironmentprocessingOverå¦‚æœå½“å‰è½®æ¬¡ä¸æ˜¯æœ€åä¸€è½®ï¼Œåˆ™processingOver()è¿”å›falseï¼Œå¦åˆ™è¿”å›trueã€‚ getElementsAnnotatedWithè¿”å›å€¼æ˜¯ä¸€ä¸ªElementç±»å‹çš„Seté›†åˆï¼Œå…¥å‚æœ‰ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯Classç±»å‹ï¼Œè¿™é‡Œå°±æ˜¯è‡ªå®šä¹‰çš„æŸç§æ³¨è§£ç±»å‹ï¼Œä¸€ç§æ˜¯TypeElementç±»å‹ï¼ŒTypeElementä½äºjavax.lang.model.elementåŒ…ä¸‹ï¼Œæ˜¯Elementçš„å­ç±»å‹ï¼Œä»£è¡¨äº†ä¸€ç§ç±»æˆ–è€…æ¥å£ç±»å‹ã€‚ ProcessingEnvironmentProcessingEnvironmentç›¸å½“äºä¸€ä¸ªå·¥å…·ç±»é›†åˆï¼Œå®ƒå¯ä»¥é€šè¿‡è¯¥å·¥å…·ç±»è¿›è¡Œå†™å…¥æ–‡ä»¶ã€æ‰“å°æ—¥å¿—ä»¥åŠæŸ¥æ‰¾å…¶å®ƒå…ƒç´ ç±»å‹ã€‚ å‚è€ƒ https://bbs.huaweicloud.com/blogs/173996 https://www.jianshu.com/p/5cac4cb9be54 Javaè¿›é˜¶â€“ç¼–è¯‘æ—¶æ³¨è§£å¤„ç†å™¨ï¼ˆAPTï¼‰è¯¦è§£","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"ArrayDeque","date":"2022-03-08T02:25:29.689Z","path":"wiki/Java/é›†åˆ/ArrayDeque/","text":"ArrayDequeä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ ArrayDequeä¸å¯ä»¥å­˜å–nullå…ƒç´  å½“ä½œä¸ºæ ˆä½¿ç”¨æ—¶ï¼Œæ€§èƒ½æ¯”Stackå¥½ï¼›å½“ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨æ—¶ï¼Œæ€§èƒ½æ¯”LinkedListå¥½ã€‚ å‚è€ƒ https://blog.jrwang.me/2016/java-collections-deque-arraydeque/","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é›†åˆ","slug":"Java/é›†åˆ","permalink":"http://airshu.github.io/categories/Java/%E9%9B%86%E5%90%88/"}]},{"title":"Javaå®¹å™¨","date":"2022-03-08T02:25:29.689Z","path":"wiki/Java/é›†åˆ/Java_Collections/","text":"å®¹å™¨ç±»å›¾ Java ä¸­å¸¸ç”¨çš„å­˜å‚¨å®¹å™¨å°±æ˜¯æ•°ç»„å’Œå®¹å™¨ï¼ŒäºŒè€…æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š å­˜å‚¨å¤§å°æ˜¯å¦å›ºå®š æ•°ç»„çš„é•¿åº¦å›ºå®šï¼› å®¹å™¨çš„é•¿åº¦å¯å˜ã€‚ æ•°æ®ç±»å‹ æ•°ç»„å¯ä»¥å­˜å‚¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ï¼› å®¹å™¨åªèƒ½å­˜å‚¨å¼•ç”¨æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡è¦è½¬æ¢æˆå¯¹åº”çš„åŒ…è£…ç±»æ‰èƒ½æ”¾å…¥å®¹å™¨ç±»ä¸­ã€‚ Java å®¹å™¨æ¡†æ¶ä¸»è¦åˆ†ä¸º Collection å’Œ Map ä¸¤ç§ã€‚å…¶ä¸­ï¼ŒCollection åˆåˆ†ä¸º Listã€Set ä»¥åŠ Queueã€‚ Collection - ä¸€ä¸ªç‹¬ç«‹å…ƒç´ çš„åºåˆ—ï¼Œè¿™äº›å…ƒç´ éƒ½æœä»ä¸€æ¡æˆ–è€…å¤šæ¡è§„åˆ™ã€‚ List - å¿…é¡»æŒ‰ç…§æ’å…¥çš„é¡ºåºä¿å­˜å…ƒç´ ã€‚ Set - ä¸èƒ½æœ‰é‡å¤çš„å…ƒç´ ã€‚ Queue - æŒ‰ç…§æ’é˜Ÿè§„åˆ™æ¥ç¡®å®šå¯¹è±¡äº§ç”Ÿçš„é¡ºåºï¼ˆé€šå¸¸ä¸å®ƒä»¬è¢«æ’å…¥çš„é¡ºåºç›¸åŒï¼‰ã€‚ Map - ä¸€ç»„æˆå¯¹çš„â€œé”®å€¼å¯¹â€å¯¹è±¡ï¼Œå…è®¸ä½ ä½¿ç”¨é”®æ¥æŸ¥æ‰¾å€¼ã€‚ åŸºç¡€æ¥å£Iteratorã€IterableIteratorï¼šå¯è¿­ä»£æ¥å£ï¼Œè¿­ä»£å¯¹è±¡Iterableï¼šCollection æ¥å£æ‰©å±•äº† Iterable æ¥å£ 123456789101112131415public class IteratorDemo &#123; public static void main(String[] args) &#123; List&lt;Integer&gt; list = new ArrayList&lt;&gt;(); list.add(1); list.add(2); list.add(3); Iterator it = list.iterator(); while (it.hasNext()) &#123; System.out.println(it.next()); &#125; &#125;&#125; Comparable å’Œ ComparatorComparableï¼šæ’åºæ¥å£ã€‚è‹¥ä¸€ä¸ªç±»å®ç°äº† Comparable æ¥å£ï¼Œè¡¨ç¤ºè¯¥ç±»çš„å®ä¾‹å¯ä»¥æ¯”è¾ƒï¼Œä¹Ÿå°±æ„å‘³ç€æ”¯æŒæ’åºã€‚å®ç°äº† Comparable æ¥å£çš„ç±»çš„å¯¹è±¡çš„åˆ—è¡¨æˆ–æ•°ç»„å¯ä»¥é€šè¿‡ Collections.sort æˆ– Arrays.sort è¿›è¡Œè‡ªåŠ¨æ’åºã€‚ Comparatorï¼šæ¯”è¾ƒæ¥å£ã€‚åœ¨ Java å®¹å™¨ä¸­ï¼Œä¸€äº›å¯ä»¥æ’åºçš„å®¹å™¨ï¼Œå¦‚ TreeMapã€TreeSetï¼Œéƒ½å¯ä»¥é€šè¿‡ä¼ å…¥ Comparatorï¼Œæ¥å®šä¹‰å†…éƒ¨å…ƒç´ çš„æ’åºè§„åˆ™ã€‚ CloneableJava ä¸­ ä¸€ä¸ªç±»è¦å®ç° clone åŠŸèƒ½ å¿…é¡»å®ç° Cloneable æ¥å£ï¼Œå¦åˆ™åœ¨è°ƒç”¨ clone() æ—¶ä¼šæŠ¥ CloneNotSupportedException å¼‚å¸¸ã€‚Java ä¸­æ‰€æœ‰ç±»éƒ½é»˜è®¤ç»§æ‰¿ java.lang.Object ç±»ï¼Œåœ¨ java.lang.Object ç±»ä¸­æœ‰ä¸€ä¸ªæ–¹æ³• clone()ï¼Œè¿™ä¸ªæ–¹æ³•å°†è¿”å› Object å¯¹è±¡çš„ä¸€ä¸ªæ‹·è´ã€‚Object ç±»é‡Œçš„ clone() æ–¹æ³•ä»…ä»…ç”¨äºæµ…æ‹·è´ï¼ˆæ‹·è´åŸºæœ¬æˆå‘˜å±æ€§ï¼Œå¯¹äºå¼•ç”¨ç±»å‹ä»…è¿”å›æŒ‡å‘æ”¹åœ°å€çš„å¼•ç”¨ï¼‰ã€‚å¦‚æœ Java ç±»éœ€è¦æ·±æ‹·è´ï¼Œéœ€è¦è¦†å†™ clone() æ–¹æ³•ã€‚ fail-fastæœºåˆ¶Java å®¹å™¨çš„ä¸€ç§é”™è¯¯æ£€æµ‹æœºåˆ¶ã€‚ä¾‹å¦‚ï¼šå‡è®¾å­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹ï¼ˆçº¿ç¨‹ 1ã€çº¿ç¨‹ 2ï¼‰ï¼Œçº¿ç¨‹ 1 é€šè¿‡ Iterator åœ¨éå†å®¹å™¨ A ä¸­çš„å…ƒç´ ï¼Œåœ¨æŸä¸ªæ—¶å€™çº¿ç¨‹ 2 ä¿®æ”¹äº†å®¹å™¨ A çš„ç»“æ„ï¼ˆæ˜¯ç»“æ„ä¸Šé¢çš„ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ç®€å•çš„ä¿®æ”¹å®¹å™¨å…ƒç´ çš„å†…å®¹ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¨‹åºå°±ä¼šæŠ›å‡º ConcurrentModificationException å¼‚å¸¸ï¼Œä»è€Œäº§ç”Ÿ fail-fast æœºåˆ¶ã€‚ Listç‰¹å¾ å…ƒç´ å¯é‡å¤ å¸¸ç”¨List ArrayListï¼šæ•°ç»„å®ç°ï¼Œéšæœºè®¿é—®é€Ÿåº¦å¿«ï¼Œæ’å…¥åˆ é™¤è¾ƒæ…¢ LinkedListï¼šé“¾è¡¨å®ç°ï¼Œæ’å…¥ã€åˆ é™¤è¾ƒå¿«ï¼Œä½†æŸ¥æ‰¾éœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼Œé€Ÿåº¦è¾ƒæ…¢ Vectorï¼šå’Œ ArrayList ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ Setç‰¹å¾ å…ƒç´ ä¸èƒ½é‡å¤ å¸¸ç”¨Set HashSetï¼šåŸºäºå“ˆå¸Œå®ç°ï¼Œæ”¯æŒå¿«é€ŸæŸ¥æ‰¾ï¼Œä½†ä¸æ”¯æŒæœ‰åºæ€§æ“ä½œï¼Œä¾‹å¦‚æ ¹æ®ä¸€ä¸ªèŒƒå›´æŸ¥æ‰¾å…ƒç´ çš„æ“ä½œã€‚å¹¶ä¸”å¤±å»äº†å…ƒç´ çš„æ’å…¥é¡ºåºä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ Iteratoréå† HashSet å¾—åˆ°çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚ TreeSetï¼šåº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ï¼Œæ”¯æŒæœ‰åºæ€§æ“ä½œï¼Œä½†æ˜¯æŸ¥æ‰¾æ•ˆç‡ä¸å¦‚ HashSetï¼ŒHashSet æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ŒTreeSet åˆ™ä¸º O(logn)ï¼› LinkedHashSetï¼šå…·æœ‰ HashSet çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œä¸”å†…éƒ¨ä½¿ç”¨é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºã€‚ Mapç‰¹å¾ ä½¿ç”¨é”®å€¼å¯¹å­˜å‚¨ é”®å€¼å¯¹éƒ½å¯ä»¥ä¸ºnull å¸¸ç”¨Map HashMapï¼šåœ¨JDK1.8ä¸­ï¼ŒåŸºäºæ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ã€‚éœ€è¦è‡ªåŠ¨è£…ç®±ï¼Œæœ‰hashç¢°æ’é—®é¢˜ HashTableï¼šå“ˆå¸Œè¡¨å®ç°ï¼Œæœ¬èº«æ˜¯åŒæ­¥çš„ï¼Œputæ“ä½œç›´æ¥é”ä½ï¼Œä¸æ”¯æŒnullé”®å’Œå€¼ã€‚ ConcurrentHashMapï¼šçº¿ç¨‹å®‰å…¨çš„HashMapï¼Œä½¿ç”¨synchronizedé”ä½äº†é“¾è¡¨ï¼Œæ€§èƒ½å¼ºäºHashTable LinkedHashMapï¼šä½¿ç”¨é“¾è¡¨æ¥ç»´æŠ¤å…ƒç´ çš„é¡ºåºï¼Œé¡ºåºä¸ºæ’å…¥é¡ºåºæˆ–è€…æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰é¡ºåºã€‚ SortedMapï¼š TreeMapï¼šåŸºäºçº¢é»‘æ ‘çš„ä¸€ç§æä¾›é¡ºåºè®¿é—®çš„Map SparseArrayï¼šAndroidå¹³å°ä¸“æœ‰ï¼Œé¿å…è‡ªåŠ¨è£…ç®±ï¼Œkã€véƒ½ä½¿ç”¨æ•°ç»„å®ç°ï¼Œkä¸ºæ•´å‹ã€‚ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ã€‚åˆ é™¤æ—¶å°†vè®¾ç½®ä¸ºDELETEã€‚ Queue LinkedListï¼šå¯ä»¥ç”¨å®ƒæ¥æ”¯æŒåŒå‘é˜Ÿåˆ—ï¼› PriorityQueue æ˜¯åŸºäºå †ç»“æ„å®ç°ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚ å¸¸è§é¢è¯•é¢˜ArrayListä¸LinkedListçš„å®ç°å’ŒåŒºåˆ«ï¼Ÿ ArrayListç”±åŠ¨æ€æ•°ç»„å®ç°ï¼ŒLinkedListç”±é“¾è¡¨å®ç° ArrayListéšæœºè®¿é—®å¿«ï¼ŒLinkedListæ’å…¥åˆ é™¤å¿«","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é›†åˆ","slug":"Java/é›†åˆ","permalink":"http://airshu.github.io/categories/Java/%E9%9B%86%E5%90%88/"}]},{"title":"HashMap","date":"2022-03-08T02:25:29.689Z","path":"wiki/Java/é›†åˆ/HashMap/","text":"æ¦‚è¦åœ¨JDK1.6ï¼ŒJDK1.7ä¸­ï¼ŒHashMapé‡‡ç”¨ä½æ¡¶+é“¾è¡¨å®ç°ï¼Œå³ä½¿ç”¨é“¾è¡¨å¤„ç†å†²çª,åŒä¸€hashå€¼çš„é”®å€¼å¯¹ä¼šè¢«æ”¾åœ¨åŒä¸€ä¸ªä½æ¡¶é‡Œï¼Œå½“æ¡¶ä¸­å…ƒç´ è¾ƒå¤šæ—¶ï¼Œé€šè¿‡keyå€¼æŸ¥æ‰¾çš„æ•ˆç‡è¾ƒä½ã€‚ åœ¨æç«¯æƒ…å†µä¸‹å¯èƒ½ä¼šå­˜åœ¨æŸä¸ªé“¾è¡¨å¾ˆé•¿ï¼Œæ•´ä¸ªæ—¶å€™æ•´ä¸ªæŸ¥æ‰¾æ•ˆç‡å°±å˜ä½äº†ï¼Œäºæ˜¯æœ‰äº†1.8çš„æ”¹è¿›æ–¹å¼ã€‚ä½¿ç”¨çº¢é»‘æ ‘ï¼Œæå‡æŸ¥è¯¢æ•ˆç‡ã€‚ è€ŒJDK1.8ä¸­ï¼ŒHashMapé‡‡ç”¨ä½æ¡¶+é“¾è¡¨+çº¢é»‘æ ‘å®ç°ï¼Œå¦‚æœå“ˆå¸Œè¡¨å•å‘é“¾è¡¨ä¸­å…ƒç´ è¶…è¿‡8ä¸ªï¼Œé‚£ä¹ˆå•å‘é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„ä¼šå˜æˆçº¢é»‘æ ‘æ•°æ®ç»“æ„ã€‚å½“çº¢é»‘æ ‘ä¸Šçš„èŠ‚ç‚¹æ•°é‡å°äº6ä¸ªï¼Œä¼šé‡æ–°æŠŠçº¢é»‘æ ‘å˜æˆå•å‘é“¾è¡¨æ•°æ®ç»“æ„ã€‚ æ•°ç»„å­˜å‚¨åŒºé—´æ˜¯è¿ç»­ï¼Œä¸”å ç”¨å†…å­˜ä¸¥é‡ï¼Œç©ºé—´å¤æ‚ä¹Ÿå¾ˆå¤§ï¼Œæ—¶é—´å¤æ‚ä¸ºOï¼ˆ1ï¼‰ã€‚ ä¼˜ç‚¹ï¼šæ˜¯éšæœºè¯»å–æ•ˆç‡å¾ˆé«˜ï¼ŒåŸå› æ•°ç»„æ˜¯è¿ç»­ï¼ˆéšæœºè®¿é—®æ€§å¼ºï¼ŒæŸ¥æ‰¾é€Ÿåº¦å¿«ï¼‰ã€‚ ç¼ºç‚¹ï¼šæ’å…¥å’Œåˆ é™¤æ•°æ®æ•ˆç‡ä½ï¼Œå› æ’å…¥æ•°æ®ï¼Œè¿™ä¸ªä½ç½®åé¢çš„æ•°æ®åœ¨å†…å­˜ä¸­è¦å¾€åç§»çš„ï¼Œä¸”å¤§å°å›ºå®šä¸æ˜“åŠ¨æ€æ‰©å±•ã€‚ é“¾è¡¨åŒºé—´ç¦»æ•£ï¼Œå ç”¨å†…å­˜å®½æ¾ï¼Œç©ºé—´å¤æ‚åº¦å°ï¼Œæ—¶é—´å¤æ‚åº¦O(N)ã€‚ ä¼˜ç‚¹ï¼šæ’å…¥åˆ é™¤é€Ÿåº¦å¿«ï¼Œå†…å­˜åˆ©ç”¨ç‡é«˜ï¼Œæ²¡æœ‰å¤§å°å›ºå®šï¼Œæ‰©å±•çµæ´»ã€‚ ç¼ºç‚¹ï¼šä¸èƒ½éšæœºæŸ¥æ‰¾ï¼Œæ¯æ¬¡éƒ½æ˜¯ä»ç¬¬ä¸€ä¸ªå¼€å§‹éå†ï¼ˆæŸ¥è¯¢æ•ˆç‡ä½ï¼‰ã€‚ æºç åˆ†æ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253//åŸºäºjdk1.8.0.121public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable &#123; //é»˜è®¤åˆå§‹å®¹é‡ä¸º16ï¼Œ0000 0001 å³ç§»4ä½ 0001 0000ä¸º16ï¼Œä¸»å¹²æ•°ç»„çš„åˆå§‹å®¹é‡ä¸º16ï¼Œè€Œä¸”è¿™ä¸ªæ•°ç»„ //å¿…é¡»æ˜¯2çš„å€æ•° static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16 //æœ€å¤§å®¹é‡ä¸ºintçš„æœ€å¤§å€¼é™¤2 static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30; //é»˜è®¤åŠ è½½å› å­ä¸º0.75 static final float DEFAULT_LOAD_FACTOR = 0.75f; //é˜ˆå€¼ï¼Œå¦‚æœä¸»å¹²æ•°ç»„ä¸Šçš„é“¾è¡¨çš„é•¿åº¦å¤§äº8ï¼Œé“¾è¡¨è½¬åŒ–ä¸ºçº¢é»‘æ ‘ static final int TREEIFY_THRESHOLD = 8; //hashè¡¨æ‰©å®¹åï¼Œå¦‚æœå‘ç°æŸä¸€ä¸ªçº¢é»‘æ ‘çš„é•¿åº¦å°äº6ï¼Œåˆ™ä¼šé‡æ–°é€€åŒ–ä¸ºé“¾è¡¨ static final int UNTREEIFY_THRESHOLD = 6; //å½“hashmapå®¹é‡å¤§äº64æ—¶ï¼Œé“¾è¡¨æ‰èƒ½è½¬æˆçº¢é»‘æ ‘ static final int MIN_TREEIFY_CAPACITY = 64; //ä¸´ç•Œå€¼=ä¸»å¹²æ•°ç»„å®¹é‡*è´Ÿè½½å› å­ int threshold; public HashMap(int initialCapacity) &#123; this(initialCapacity, DEFAULT_LOAD_FACTOR); &#125; //initialCapacityä¸ºåˆå§‹å®¹é‡ï¼ŒloadFactorä¸ºè´Ÿè½½å› å­ public HashMap(int initialCapacity, float loadFactor) &#123; //åˆå§‹å®¹é‡å°äº0ï¼ŒæŠ›å‡ºéæ³•æ•°æ®å¼‚å¸¸ if (initialCapacity &lt; 0) throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; + initialCapacity); //åˆå§‹å®¹é‡æœ€å¤§ä¸ºMAXIMUM_CAPACITY if (initialCapacity &gt; MAXIMUM_CAPACITY) initialCapacity = MAXIMUM_CAPACITY; //è´Ÿè½½å› å­å¿…é¡»å¤§äº0ï¼Œå¹¶ä¸”æ˜¯åˆæ³•æ•°å­— if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) throw new IllegalArgumentException(&quot;Illegal load factor: &quot; + loadFactor); this.loadFactor = loadFactor; this.threshold = tableSizeFor(initialCapacity); &#125; //å¦‚æœä¼ å…¥Aï¼Œå½“Aå¤§äº0ï¼Œå°äºå®šä¹‰çš„æœ€å¤§å®¹é‡æ—¶ï¼Œ //å¦‚æœAæ˜¯2æ¬¡å¹‚åˆ™è¿”å›Aï¼Œå¦åˆ™å°†Aè½¬åŒ–ä¸ºä¸€ä¸ªæ¯”Aå¤§ä¸”å·®è·æœ€å°çš„2æ¬¡å¹‚ã€‚ //ä¾‹å¦‚ä¼ å…¥7è¿”å›8ï¼Œä¼ å…¥8è¿”å›8ï¼Œä¼ å…¥9è¿”å›16 static final int tableSizeFor(int cap) &#123; int n = cap - 1; n |= n &gt;&gt;&gt; 1; n |= n &gt;&gt;&gt; 2; n |= n &gt;&gt;&gt; 4; n |= n &gt;&gt;&gt; 8; n |= n &gt;&gt;&gt; 16; return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1; &#125; //é»˜è®¤æ„é€ æ–¹æ³•ï¼Œè´Ÿè½½å› å­ä¸º0.75ï¼Œåˆå§‹å®¹é‡ä¸ºDEFAULT_INITIAL_CAPACITY=16ï¼Œåˆå§‹å®¹é‡åœ¨ç¬¬ä¸€æ¬¡putæ—¶æ‰ä¼šåˆå§‹åŒ– public HashMap() &#123; this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted &#125; //ä¼ å…¥mapçš„æ„é€ æ–¹æ³• public HashMap(Map&lt;? extends K, ? extends V&gt; m) &#123; this.loadFactor = DEFAULT_LOAD_FACTOR; putMapEntries(m, false); &#125; final void putMapEntries(Map&lt;? extends K, ? extends V&gt; m, boolean evict) &#123; int s = m.size(); if (s &gt; 0) &#123; if (table == null) &#123; // pre-size float ft = ((float)s / loadFactor) + 1.0F; int t = ((ft &lt; (float)MAXIMUM_CAPACITY) ? (int)ft : MAXIMUM_CAPACITY); //è®¾ç½®ä¸´ç•Œå€¼ if (t &gt; threshold) threshold = tableSizeFor(t); &#125; else if (s &gt; threshold) resize();//åˆå§‹åŒ–æˆ–æ‰©å……table //éå†mapï¼Œæ·»åŠ æ¯ä¸ªå…ƒç´  for (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entrySet()) &#123; K key = e.getKey(); V value = e.getValue(); putVal(hash(key), key, value, false, evict); &#125; &#125; &#125; //æ·»åŠ é”®å€¼å¯¹ public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true); &#125; //integerç±»å‹çš„hashcodeéƒ½æ˜¯ä»–è‡ªèº«çš„å€¼ï¼Œå³h=keyï¼›h &gt;&gt;&gt; 16ä¸ºæ— ç¬¦å·å³ç§»16ä½ï¼Œä½ä½æŒ¤èµ°ï¼Œé«˜ä½è¡¥0ï¼› //^ ä¸ºæŒ‰ä½å¼‚æˆ–ï¼Œå³è½¬æˆäºŒè¿›åˆ¶åï¼Œç›¸å¼‚ä¸º1ï¼Œç›¸åŒä¸º0ï¼Œç”±æ­¤å¯å‘ç°ï¼Œå½“ä¼ å…¥çš„å€¼å°äº 2çš„16æ¬¡æ–¹-1 æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•è¿”å›çš„å€¼ï¼Œéƒ½æ˜¯è‡ªèº«çš„å€¼ã€‚ static final int hash(Object key) &#123; int h; return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16); &#125; //onlyIfAbsentæ˜¯trueçš„è¯ï¼Œä¸è¦æ”¹å˜ç°æœ‰çš„å€¼ //evictä¸ºtrueçš„è¯ï¼Œè¡¨å¤„äºåˆ›å»ºæ¨¡å¼ final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; //å¦‚æœä¸»å¹²ä¸Šçš„tableä¸ºç©ºï¼Œé•¿åº¦ä¸º0ï¼Œè°ƒç”¨resizeæ–¹æ³•ï¼Œè°ƒæ•´tableçš„é•¿åº¦ //å¦‚æœæ˜¯é€šè¿‡ä¼ å…¥mapçš„æ–¹å¼åˆ›å»ºçš„HashMapï¼Œåˆ™åœ¨ç›¸åº”æ„é€ å‡½æ•°ä¸­å°±ä¼šè°ƒç”¨resize if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; //å°†æ•°ç»„é•¿åº¦ä¸è®¡ç®—å¾—åˆ°çš„hashå€¼æ¯”è¾ƒ if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null);//ä½ç½®ä¸ºç©ºï¼Œå°†iä½ç½®ä¸Šèµ‹å€¼ä¸€ä¸ªnodeå¯¹è±¡ else &#123; Node&lt;K,V&gt; e; K k; //å¦‚æœè¿™ä¸ªä½ç½®çš„oldèŠ‚ç‚¹ä¸newèŠ‚ç‚¹çš„keyå®Œå…¨ç›¸åŒ if (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != null &amp;&amp; key.equals(k)))) e = p; else if (p instanceof TreeNode) // å¦‚æœpå·²ç»æ˜¯æ ‘èŠ‚ç‚¹çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ—¢è¿™é‡Œå·²ç»æ˜¯æ ‘äº† e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value); else &#123; //pä¸æ–°èŠ‚ç‚¹æ—¢ä¸å®Œå…¨ç›¸åŒï¼Œpä¹Ÿä¸æ˜¯treenodeçš„å®ä¾‹ for (int binCount = 0; ; ++binCount) &#123; //e=p.next,å¦‚æœpçš„nextæŒ‡å‘ä¸ºnull if ((e = p.next) == null) &#123; //æŒ‡å‘ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ p.next = newNode(hash, key, value, null); // å¦‚æœé“¾è¡¨é•¿åº¦å¤§äºç­‰äº8 if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st treeifyBin(tab, hash); //å°†é“¾è¡¨è½¬ä¸ºçº¢é»‘æ ‘ break; &#125; //å¦‚æœéå†è¿‡ç¨‹ä¸­é“¾è¡¨ä¸­çš„å…ƒç´ ä¸æ–°æ·»åŠ çš„å…ƒç´ å®Œå…¨ç›¸åŒï¼Œåˆ™è·³å‡ºå¾ªç¯ if (e.hash == hash &amp;&amp; ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) break; p = e;//å°†pä¸­çš„nextèµ‹å€¼ç»™p,å³å°†é“¾è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªnodeèµ‹å€¼ç»™pï¼Œç»§ç»­å¾ªç¯éå†é“¾è¡¨ä¸­çš„å…ƒç´  &#125; &#125; //å¦‚æœæ·»åŠ çš„å…ƒç´ äº§ç”Ÿäº†hashå†²çªï¼Œé‚£ä¹ˆè°ƒç”¨ //putæ–¹æ³•æ—¶ï¼Œä¼šå°†ä»–åœ¨é“¾è¡¨ä¸­ä»–çš„ä¸Šä¸€ä¸ªå…ƒç´ çš„å€¼è¿”å› if (e != null) &#123; // existing mapping for key V oldValue = e.value; //åˆ¤æ–­æ¡ä»¶æˆç«‹çš„è¯ï¼Œå°†oldvalueæ›¿æ¢ //ä¸ºnewvalueï¼Œè¿”å›oldvalueï¼›ä¸æˆç«‹åˆ™ä¸æ›¿æ¢ï¼Œç„¶åè¿”å›oldvalue if (!onlyIfAbsent || oldValue == null) e.value = value; afterNodeAccess(e);//ç”¨äºLinkedHashMapå›è°ƒ return oldValue; &#125; &#125; ++modCount;//è®°å½•ä¿®æ”¹æ¬¡æ•° if (++size &gt; threshold)//å¦‚æœå…ƒç´ æ•°é‡å¤§äºä¸´ç•Œå€¼ï¼Œåˆ™è¿›è¡Œæ‰©å®¹ resize(); afterNodeInsertion(evict); return null; &#125; // æ‰©å®¹ final Node&lt;K,V&gt;[] resize() &#123; Node&lt;K,V&gt;[] oldTab = table; int oldCap = (oldTab == null) ? 0 : oldTab.length; int oldThr = threshold; int newCap, newThr = 0; if (oldCap &gt; 0) &#123; //æœ€å¤§å®¹é‡ if (oldCap &gt;= MAXIMUM_CAPACITY) &#123; threshold = Integer.MAX_VALUE; return oldTab; &#125; else if ((newCap = oldCap &lt;&lt; 1) &lt; MAXIMUM_CAPACITY &amp;&amp; oldCap &gt;= DEFAULT_INITIAL_CAPACITY) //æ‰©å®¹ä¸¤å€ newThr = oldThr &lt;&lt; 1; // double threshold &#125; else if (oldThr &gt; 0) // initial capacity was placed in threshold newCap = oldThr; else &#123; // zero initial threshold signifies using defaults newCap = DEFAULT_INITIAL_CAPACITY; newThr = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY); &#125; if (newThr == 0) &#123; float ft = (float)newCap * loadFactor; newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ? (int)ft : Integer.MAX_VALUE); &#125; threshold = newThr;//æ–°çš„ä¸´ç•Œç‚¹ @SuppressWarnings(&#123;&quot;rawtypes&quot;,&quot;unchecked&quot;&#125;) Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])new Node[newCap]; table = newTab;//æ–°çš„æ•°ç»„ if (oldTab != null) &#123; //é€šè¿‡åŸå®¹é‡éå†åŸæ•°ç»„ for (int j = 0; j &lt; oldCap; ++j) &#123; Node&lt;K,V&gt; e; if ((e = oldTab[j]) != null) &#123; oldTab[j] = null; if (e.next == null) newTab[e.hash &amp; (newCap - 1)] = e; else if (e instanceof TreeNode) ((TreeNode&lt;K,V&gt;)e).split(this, newTab, j, oldCap); else &#123; // preserve order Node&lt;K,V&gt; loHead = null, loTail = null; Node&lt;K,V&gt; hiHead = null, hiTail = null; Node&lt;K,V&gt; next; do &#123; next = e.next; if ((e.hash &amp; oldCap) == 0) &#123; if (loTail == null) loHead = e; else loTail.next = e; loTail = e; &#125; else &#123; if (hiTail == null) hiHead = e; else hiTail.next = e; hiTail = e; &#125; &#125; while ((e = next) != null); if (loTail != null) &#123; loTail.next = null; newTab[j] = loHead; &#125; if (hiTail != null) &#123; hiTail.next = null; newTab[j + oldCap] = hiHead; &#125; &#125; &#125; &#125; &#125; return newTab; &#125;&#125; å‚è€ƒ","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é›†åˆ","slug":"Java/é›†åˆ","permalink":"http://airshu.github.io/categories/Java/%E9%9B%86%E5%90%88/"}]},{"title":"ConcurrentHashMap","date":"2022-03-08T02:25:29.689Z","path":"wiki/Java/é›†åˆ/ConcurrentHashMap/","text":"ConcurrentHashMap æ˜¯ä¸€ä¸ªå¹¶å‘æ•£åˆ—æ˜ å°„è¡¨çš„å®ç°ï¼Œå®ƒå…è®¸å®Œå…¨å¹¶å‘çš„è¯»å–ï¼Œå¹¶ä¸”æ”¯æŒç»™å®šæ•°é‡çš„å¹¶å‘æ›´æ–°ã€‚ç›¸æ¯”äº HashTable å’Œç”¨åŒæ­¥åŒ…è£…å™¨åŒ…è£…çš„HashMap(Collections.synchronizedMap(new HashMap()))ï¼ŒConcurrentHashMap æ‹¥æœ‰æ›´é«˜çš„å¹¶å‘æ€§ã€‚åœ¨ HashTable å’Œç”±åŒæ­¥åŒ…è£…å™¨åŒ…è£…çš„ HashMap ä¸­ï¼Œä½¿ç”¨ä¸€ä¸ªå…¨å±€çš„é”æ¥åŒæ­¥ä¸åŒçº¿ç¨‹é—´çš„å¹¶å‘è®¿é—®ã€‚åŒä¸€æ—¶é—´ç‚¹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹æŒæœ‰é”ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨åŒä¸€æ—¶é—´ç‚¹ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è®¿é—®å®¹å™¨ã€‚è¿™è™½ç„¶ä¿è¯å¤šçº¿ç¨‹é—´çš„å®‰å…¨å¹¶å‘è®¿é—®ï¼Œä½†åŒæ—¶ä¹Ÿå¯¼è‡´å¯¹å®¹å™¨çš„è®¿é—®å˜æˆä¸²è¡ŒåŒ–çš„äº†ã€‚åœ¨ä½¿ç”¨é”æ¥åè°ƒå¤šçº¿ç¨‹é—´å¹¶å‘è®¿é—®çš„æ¨¡å¼ä¸‹ï¼Œå‡å°å¯¹é”çš„ç«äº‰å¯ä»¥æœ‰æ•ˆæé«˜å¹¶å‘æ€§ã€‚æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å‡å°å¯¹é”çš„ç«äº‰: å‡å°è¯·æ±‚åŒä¸€ä¸ªé”çš„é¢‘ç‡ã€‚å‡å°‘æŒæœ‰é”çš„æ—¶é—´ã€‚ ConcurrentHashMap çš„é«˜å¹¶å‘æ€§ä¸»è¦æ¥è‡ªäºä¸‰ä¸ªæ–¹é¢: ç”¨åˆ†ç¦»é”å®ç°å¤šä¸ªçº¿ç¨‹é—´çš„æ›´æ·±å±‚æ¬¡çš„å…±äº«è®¿é—®ã€‚ ç”¨HashEnteryå¯¹è±¡çš„ä¸å˜æ€§æ¥é™ä½æ‰§è¡Œè¯»æ“ä½œçš„çº¿ç¨‹åœ¨éå†é“¾è¡¨æœŸé—´å¯¹åŠ é”çš„æ±‚ã€‚ é€šè¿‡å¯¹åŒä¸€ä¸ª volatile å˜é‡çš„å†™ &#x2F; è¯»è®¿é—®ï¼Œåè°ƒä¸åŒçº¿ç¨‹é—´è¯» &#x2F; å†™æ“ä½œçš„å†…å­˜å¯è§æ€§ã€‚ ä½¿ç”¨åˆ†ç¦»é”ï¼Œå‡å°äº†è¯·æ±‚åŒä¸€ä¸ªé”çš„é¢‘ç‡ã€‚ é€šè¿‡ HashEntery å¯¹è±¡çš„ä¸å˜æ€§åŠå¯¹åŒä¸€ä¸ª volatile å˜é‡çš„ è¯» &#x2F; å†™æ¥åè°ƒå†…å­˜å¯è§æ€§ï¼Œä½¿å¾—è¯»æ“ä½œå¤§å¤šæ•°æ—¶å€™ä¸éœ€è¦åŠ é”å°±èƒ½æˆåŠŸè·å–åˆ°éœ€è¦çš„å€¼ã€‚ç”±äºæ•£åˆ—æ˜ å°„è¡¨åœ¨å®é™…åº”ç”¨ä¸­å¤§å¤šæ•°æ“ä½œéƒ½æ˜¯æˆåŠŸçš„è¯»æ“ä½œï¼Œæ‰€ä»¥ 2 å’Œ 3 æ—¢å¯ä»¥å‡å°‘è¯·æ±‚åŒä¸€ä¸ªé”çš„é¢‘ç‡ï¼Œä¹Ÿå¯ä»¥æœ‰æ•ˆå‡å°‘æŒæœ‰é”çš„æ—¶é—´ã€‚é€šè¿‡å‡å°è¯·æ±‚åŒä¸€ä¸ªé”çš„é¢‘ç‡å’Œå°½é‡å‡å°‘æŒæœ‰é”çš„æ—¶é—´ï¼Œä½¿å¾— ConcurrentHashMap çš„å¹¶å‘æ€§ç›¸å¯¹äº HashTable å’Œç”¨åŒæ­¥åŒ…è£…å™¨åŒ…è£…çš„ HashMapæœ‰äº†è´¨çš„æé«˜ã€‚","tags":[{"name":"Javaé›†åˆ","slug":"Javaé›†åˆ","permalink":"http://airshu.github.io/tags/Java%E9%9B%86%E5%90%88/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é›†åˆ","slug":"Java/é›†åˆ","permalink":"http://airshu.github.io/categories/Java/%E9%9B%86%E5%90%88/"}]},{"title":"åå°„","date":"2022-03-08T02:25:29.688Z","path":"wiki/Java/è¿›é˜¶/åå°„/","text":"åå°„ï¼ˆReflectionï¼‰çš„ä½œç”¨ï¼š åå°„è®©å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡å¤–éƒ¨ç±»çš„å…¨è·¯å¾„ååˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨è¿™äº›ç±»ï¼Œå®ç°ä¸€äº›æ‰©å±•çš„åŠŸèƒ½ã€‚ åå°„è®©å¼€å‘äººå‘˜å¯ä»¥æšä¸¾å‡ºç±»çš„å…¨éƒ¨æˆå‘˜ï¼ŒåŒ…æ‹¬æ„é€ å‡½æ•°ã€å±æ€§ã€æ–¹æ³•ã€‚ä»¥å¸®åŠ©å¼€å‘è€…å†™å‡ºæ­£ç¡®çš„ä»£ç ã€‚ æµ‹è¯•æ—¶å¯ä»¥åˆ©ç”¨åå°„APIè®¿é—®ç±»çš„ç§æœ‰æˆå‘˜ï¼Œä»¥ä¿è¯æµ‹è¯•ä»£ç è¦†ç›–ç‡ã€‚ API è·å–Classå¯¹è±¡12345678910//è·å–Classçš„æ–¹æ³•Class clz = Class.forName(&quot;java.lang.String&quot;);Class clz = String.class;String str = new String(&quot;Hello&quot;);Class clz = str.getClass(); åˆ›å»ºå¯¹è±¡å¦‚æœé»˜è®¤æ— å‚æ„é€ å‡½æ•°æ˜¯publicï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨class.newInstance()ï¼Œè€Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™éœ€è¦ä½¿ç”¨getDeclaredConstructorã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344class Rectangle &#123; public int x; public int y;&#125;class User &#123; private String name; private int age; public User(String name, int age) &#123; this.name = name; this.age = age; &#125; public int getAge() &#123; return age; &#125; public void setAge(int age) &#123; this.age = age; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125;&#125;public class TestPerformance &#123; public static void main(String[] args) throws InstantiationException, IllegalAccessException, NoSuchMethodException, InvocationTargetException &#123; Class c1 = Rectangle.class; c1.newInstance(); Class user = User.class; //éœ€è¦å¡«å……å‚æ•° user.getDeclaredConstructor(String.class, int.class).newInstance(&quot;zhangsan&quot;, 19); &#125;&#125; è·å–å±æ€§ã€æ–¹æ³•123456789101112131415161718//è·å–æ–¹æ³•Method[] methods = user.getDeclaredMethods();for (Method method : methods) &#123; System.out.println(method.getName());&#125;//è·å–å±æ€§Field[] fields = user.getDeclaredFields();for (Field field : fields) &#123; System.out.println(field.getName());&#125;//è°ƒç”¨æ–¹æ³•User user1 = new User(&quot;lisi&quot;, 20);Method method = user1.getClass().getMethod(&quot;setAge&quot;, int.class);method.setAccessible(true); //å¦‚æœæ˜¯ç§æœ‰æ–¹æ³•ï¼Œéœ€è¦æ‰§è¡Œè¿™æ ·è¯­å¥method.invoke(user1, 88);System.out.println(user1); è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒgetDeclaredFieldsæ–¹æ³•å¯ä»¥æ‹¿åˆ°ç§æœ‰å±æ€§ï¼Œè€ŒgetFieldsä¸è¡Œã€‚ æ€§èƒ½åˆ†æè™½ç„¶åå°„åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¦æ³¨æ„æ•ˆç‡é—®é¢˜ã€‚å› ä¸ºï¼š å› ä¸ºæ¥å£çš„é€šç”¨æ€§ï¼ŒJavaçš„invokeæ–¹æ³•æ˜¯ä¼ objectå’Œobject[]æ•°ç»„çš„ã€‚åŸºæœ¬ç±»å‹å‚æ•°éœ€è¦è£…ç®±å’Œæ‹†ç®±ï¼Œäº§ç”Ÿå¤§é‡é¢å¤–çš„å¯¹è±¡å’Œå†…å­˜å¼€é”€ï¼Œé¢‘ç¹ä¿ƒå‘GCã€‚ ç¼–è¯‘å™¨éš¾ä»¥å¯¹åŠ¨æ€è°ƒç”¨çš„ä»£ç æå‰åšä¼˜åŒ–ï¼Œæ¯”å¦‚æ–¹æ³•å†…è”ã€‚ åå°„éœ€è¦æŒ‰åæ£€ç´¢ç±»å’Œæ–¹æ³•ï¼Œæœ‰ä¸€å®šçš„æ—¶é—´å¼€é”€ã€‚ æˆ‘ä»¬å¯ä»¥è¿›è¡Œç®€å•çš„æµ‹è¯•ï¼š 123456789101112131415Class c1 = User.class;long duration = 0;duration = System.currentTimeMillis();for(int i=0; i&lt;999999999;i++) &#123; c1.newInstance();&#125;long current = System.currentTimeMillis();System.out.println(current - duration);for(int i=0; i&lt;999999999;i++) &#123; new User(&quot;zhangsan&quot;, 20);&#125;System.out.println(System.currentTimeMillis() - current); ä»¥ä¸Šä»£ç çš„è¾“å‡ºç»“æœï¼Œä¸¤è€…å·®è·æœ‰è¿‘åƒå€ï¼ï¼ï¼ å‚è€ƒ https://www.jianshu.com/p/356e1d7a9d11","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"æ³›å‹","date":"2022-03-08T02:25:29.688Z","path":"wiki/Java/è¿›é˜¶/æ³›å‹/","text":"æ¦‚è¿°èŒƒå‹çš„è®¾è®¡å‚è€ƒäº†C++ä¸­çš„æ¨¡ç‰ˆï¼Œç›®çš„æ˜¯å†™å‡ºæ›´åŠ é€šç”¨çš„ä»£ç ã€‚æ³›å‹å°†ä»£ç å®‰å…¨æ€§æ£€æŸ¥æå‰åˆ°ç¼–è¯‘æœŸã€‚æ·»åŠ äº†èŒƒå‹ç‰¹æ€§åï¼Œè§£å†³äº†Javaä¸­å®¹å™¨çš„ç±»å‹å®‰å…¨é—®é¢˜ã€‚ æ³›å‹çš„æœ¬è´¨æ˜¯å‚æ•°åŒ–ç±»å‹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ³›å‹å°±æ˜¯å°†æ‰€æ“ä½œçš„æ•°æ®ç±»å‹ä½œä¸ºå‚æ•°çš„ä¸€ç§è¯­æ³•ã€‚ Javaæ³›å‹ä¸ºäº†å‘å‰å…¼å®¹ï¼Œé‡‡å–è¿è¡ŒæœŸç±»å‹æ“¦å‡ºæ³›å‹å‚æ•°çš„æ–¹å¼æ¥å®ç°ã€‚è¿™å°±æ„å‘³ç€ï¼Œä½ åœ¨ä½¿ç”¨æ³›å‹çš„æ—¶å€™ï¼Œä»»ä½•å…·ä½“çš„ç±»å‹éƒ½å·²ç»è¢«æ“¦é™¤ã€‚ 12345public class Paly&lt;T&gt;&#123; T play()&#123;&#125;&#125;Play&lt;Integer&gt; playInteger=new Play&lt;&gt;();//è¿™é‡Œ T å°±ä¼šè¢«å®ä¾‹åŒ–ä¸º Integer æ³›å‹ç±»å‹è‡ªå®šä¹‰æ³›å‹æ¥å£1interface Observer&lt;T&gt; æ³›å‹ç±»12345678910111213class ImplObserver&lt;T&gt; implements Observer&lt;T&gt;interface BaseDongXi&lt;T&gt; &#123;&#125;class Dongxi&lt;A, T, M&gt; implements BaseDongXi&lt;T&gt; &#123; public T get(T t) &#123; return t; &#125; public void set(M m) &#123; &#125;&#125; æ³›å‹æ–¹æ³• ä¸€ä¸ªç±»ä¸­å¤šä¸ªæ³›å‹123456789101112131415161718192021222324252627282930313233343536373839404142434445package book; class Notepad&lt;N, A, H&gt; &#123; private N name; private A age; private H height; public N getName() &#123; return name; &#125; public void setName(N name) &#123; this.name = name; &#125; public A getAge() &#123; return age; &#125; public void setAge(A age) &#123; this.age = age; &#125; public H getHeight() &#123; return height; &#125; public void setHeight(H height) &#123; this.height = height; &#125;&#125; public class JiOu &#123; public static void main(String args[]) &#123; Notepad&lt;String, Integer, Float&gt; t = null; t = new Notepad&lt;String, Integer, Float&gt;(); t.setName(&quot;smc&quot;); t.setAge(22); t.setHeight(170.0f); System.out.println(&quot;å§“å:&quot; + t.getName()); System.out.println(&quot;å¹´é¾„:&quot; + t.getAge()+&quot;å²&quot;); System.out.println(&quot;èº«é«˜:&quot; + t.getHeight()+&quot;cm&quot;); &#125;&#125; æ³›å‹ä½œç”¨åŸŸ å¦‚æœå°†æ³›å‹å£°æ˜æ”¾åœ¨æ³›å‹æ¥å£,æ³›å‹ç±»ä¸Š,åˆ™è¯¥æ³›å‹åœ¨è¯¥ç±»ä¸­å°±æ˜¯ç¡®å®šçš„äº†ã€‚ å¦‚æœå°†æ³›å‹å£°æ˜æ”¾åœ¨äº†æ³›å‹æ–¹æ³•ä¸Š,åˆ™è¯¥æ³›å‹åªåœ¨è¯¥æ–¹æ³•ä¸­æœ‰æ•ˆã€‚ å¦‚æœæ³›å‹æ–¹æ³•ä¸Šå£°æ˜çš„æ³›å‹ç±»å‹å’Œç±»æˆ–æ¥å£ä¸­å£°æ˜çš„æ³›å‹ä¸€è‡´,åˆ™ä¼šåœ¨è¯¥æ–¹æ³•ä¸­éšè—ç±»æˆ–æ¥å£ä¸Šçš„æ³›å‹ã€‚ é€šé…ç¬¦ä¸åµŒå¥—é€šé…ç¬¦?:è¡¨ç¤ºç±»å‹ä¸ç¡®å®šï¼Œåªèƒ½ç”¨äºå£°æ˜å˜é‡æˆ–è€…å½¢å‚ä¸Šï¼Œä¸èƒ½ç”¨åœ¨åˆ›å»ºæ³›å‹ç±»ï¼Œæ³›å‹æ–¹æ³•å’Œæ¥å£ä¸Š 123456public static void main(String[] args) &#123; List&lt;?&gt; list=new ArrayList&lt;Integer&gt;(); list=new ArrayList&lt;String&gt;(); test(list);&#125;public static void test(List&lt;?&gt; list)&#123; &#125; æ³›å‹åµŒå¥—1234567891011121314151617181920212223242526272829303132class Student&lt;T&gt;&#123; private T score; public T getScore()&#123; return score; &#125; public void setScore(T score)&#123; this.score=score; &#125;&#125;class MyClass&lt;T&gt; &#123; private T cls; public T getCls() &#123; return cls; &#125; public void setCls(T cls) &#123; this.cls = cls; &#125;&#125;public static void main(String[] args) &#123; Student&lt;String&gt; stu = new Student&lt;String&gt;(); stu.setScore(&quot;great&quot;); //æ³›å‹åµŒå¥— MyClass&lt;Student&lt;String&gt;&gt; cls = new MyClass&lt;Student&lt;String&gt;&gt;(); cls.setCls(stu); Student&lt;String&gt; stu2 = new Student&lt;String&gt;(); stu2 = cls.getCls(); System.out.println(stu2.getScore());//great&#125; å®šä¹‰ä¸¤ä¸ªæ³›å‹ç±» ï¼ŒMyclassç±»çš„æ³›å‹å°±æ˜¯Studentç±» ï¼Œè€ŒStudentç±»çš„æ³›å‹æ˜¯Stringç±» æ³›å‹ä¸Šä¸‹è¾¹ç•Œ? extends E æ˜¯æ³›å‹çš„ä¸Šè¾¹ç•ŒList &lt; ? extends A &gt;è¡¨ç¤ºè¿™ä¸ª list é‡Œé¢å­˜çš„æ˜¯ A çš„å­ç±»ï¼Œå…·ä½“æ˜¯å•¥ä¸çŸ¥é“ï¼ŒåªçŸ¥é“èŒƒå›´! ? super T æ˜¯æ³›å‹çš„ä¸‹è¾¹ç•ŒList &lt; ? super C &gt; è¡¨ç¤º list é‡Œé¢å­˜çš„æ˜¯ C å’Œå…¶çˆ¶ç±»ï¼Œå…·ä½“æ˜¯å•¥ä¸ç¡®å®šï¼ŒåªçŸ¥é“èŒƒå›´ã€‚","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"å¼•ç”¨ç±»å‹","date":"2022-03-08T02:25:29.688Z","path":"wiki/Java/è¿›é˜¶/å¼•ç”¨ç±»å‹/","text":"æ¦‚è¦ä»‹ç»Javaä¸­çš„å‡ ç§å¼•ç”¨ç±»å‹ï¼š å¼ºå¼•ç”¨: å¼ºå¼•ç”¨æŒ‡çš„æ˜¯åœ¨ç¨‹åºä»£ç ä¹‹ä¸­æ™®éå­˜åœ¨çš„ï¼Œç±»ä¼¼äºâ€Object obj &#x3D; new Object()â€è¿™ç±»çš„å¼•ç”¨ï¼Œåªè¦å¼ºå¼•ç”¨è¿˜å­˜åœ¨ï¼Œåƒåœ¾å›æ”¶å™¨æ°¸è¿œä¸ä¼šå›æ”¶æ‰è¢«å¼•ç”¨çš„å¯¹è±¡å®ä¾‹ã€‚ è½¯å¼•ç”¨: è½¯å¼•ç”¨æ˜¯ç”¨æ¥æè¿°ä¸€äº›è¿˜æœ‰ç”¨ä½†æ˜¯ä¸æ˜¯å¿…é¡»çš„å¯¹è±¡ã€‚å¯¹äºè½¯å¼•ç”¨å…³è”ç€çš„å¯¹è±¡ï¼Œåœ¨ç³»ç»Ÿå°†è¦å‘ç”Ÿå†…å­˜æº¢å‡ºä¹‹å‰ï¼Œä¼šæŠŠè¿™äº›å¯¹è±¡åˆ—å…¥å›æ”¶èŒƒå›´ ä¹‹ä¸­è¿›è¡Œç¬¬äºŒæ¬¡å›æ”¶ã€‚å¦‚æœè¿™æ¬¡å›æ”¶è¿˜æ˜¯æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œæ‰ä¼šæŠ›å‡ºå†…å­˜æº¢ å‡ºå¼‚å¸¸ã€‚åœ¨ JDK1.2 ä¹‹åï¼Œæä¾›äº† SoftReference ç±»æ¥å®ç°è½¯å¼•ç”¨ã€‚ å¼±å¼•ç”¨: å¼±å¼•ç”¨ä¹Ÿæ˜¯ç”¨æ¥æè¿°éå¿…éœ€å¯¹è±¡çš„ã€‚ä½†æ˜¯å®ƒçš„å¼ºåº¦è¦å¼±äºè½¯å¼•ç”¨ã€‚è¢«å¼±å¼•ç”¨å…³è”çš„å¯¹è±¡åªèƒ½ç”Ÿå­˜åˆ°ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶å‘ç”Ÿä¹‹å‰ã€‚å½“åƒåœ¾å›æ”¶ å™¨å¼€å§‹è¿›è¡Œå·¥ä½œæ—¶ï¼Œæ— è®ºå½“å‰å†…å®¹æ˜¯å¦å¤Ÿç”¨ï¼Œéƒ½ä¼šå›æ”¶æ‰åªè¢«å¼±å¼•ç”¨å…³è”çš„ å¯¹è±¡ã€‚åœ¨ JDK1.2 ä¹‹åæä¾›äº† WeakReference ç±»æ¥å®ç°å¼±å¼•ç”¨ã€‚ è™šå¼•ç”¨: è™šå¼•ç”¨ä¹Ÿè¢«ç§°ä¸ºå¹½çµå¼•ç”¨æˆ–è€…å¹»å½±å¼•ç”¨ï¼Œå®ƒæ˜¯æœ€å¼±çš„ä¸€ç§å¼•ç”¨å…³ç³»ã€‚ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æœ‰è™šå¼•ç”¨çš„å­˜åœ¨ï¼Œå®Œå…¨ä¸ä¼šå¯¹å…¶ç”Ÿå­˜æ—¶é—´æ„æˆå½±å“ï¼Œä¹Ÿæ— æ³•é€šè¿‡è™šå¼•ç”¨æ¥å–å¾—ä¸€ä¸ªå¯¹è±¡å®ä¾‹ã€‚ä¸ºä¸€ä¸ªå¯¹è±¡è®¾ç½®è™šå¼•ç”¨çš„å”¯ä¸€ç›®çš„å°±æ˜¯ èƒ½åœ¨è¿™ä¸ªå¯¹è±¡è¢«æ”¶é›†å™¨å›æ”¶æ—¶æ”¶åˆ°ä¸€ä¸ªç³»ç»Ÿé€šçŸ¥ã€‚åœ¨ JDK1.2 ä¹‹åï¼Œæä¾›äº†PhantomReference ç±»æ¥å®ç°è™šå¼•ç”¨ã€‚ å‚è€ƒèµ„æ–™","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"åŠ¨æ€ä»£ç†","date":"2022-03-08T02:25:29.687Z","path":"wiki/Java/è¿›é˜¶/åŠ¨æ€ä»£ç†/","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243444546package com.shjlone.proxy;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.lang.reflect.Proxy;/** * åŠ¨æ€ä»£ç†demo */public class ProxyClient &#123; public static void main(String[] args) &#123; Shape realSubject = new Circle(); InvocationHandler handler = new DynamicProxy(realSubject); Shape subject = (Shape) Proxy.newProxyInstance(handler.getClass().getClassLoader(), realSubject.getClass().getInterfaces(), handler); subject.draw(); &#125;&#125;interface Shape &#123; void draw();&#125;class Circle implements Shape &#123; @Override public void draw() &#123; System.out.println(&quot;draw cicle&quot;); &#125;&#125;class DynamicProxy implements InvocationHandler &#123; private Object subject; public DynamicProxy(Object subject) &#123; this.subject = subject; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; return method.invoke(subject, args); &#125;&#125; å‚è€ƒ https://allenwu.itscoder.com/use-of-proxy","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"åŒäº²å§”æ´¾æœºåˆ¶","date":"2022-03-08T02:25:29.687Z","path":"wiki/Java/è¿›é˜¶/åŒäº²å§”æ´¾æœºåˆ¶/","text":"Bootstrap ClassLoader:ä½¿ç”¨ C++å®ç°ï¼Œæ˜¯è™šæ‹Ÿæœºçš„ä¸€éƒ¨åˆ†ã€‚å®ƒä¸»è¦è´Ÿè´£ åŠ è½½å­˜æ”¾åœ¨%JAVAHOME%&#x2F;lib ç›®å½•ä¸­çš„ï¼Œæˆ–è€…è¢«-Xbootclasspath æŒ‡å®šçš„ç±»åº“åˆ°è™šæ‹Ÿæœºå†…å­˜ä¸­ï¼ŒBootstrap ClassLoader æ— æ³•è¢« java ç¨‹åºç›´æ¥å¼•ç”¨ã€‚ Extension ClassLoader:ä¸»è¦è´Ÿè´£åŠ è½½%JAVAHOME%&#x2F;lib&#x2F;ext ç›®å½•ä¸­çš„ï¼Œ æˆ–è€…è¢« java.ext.dirs ç³»ç»Ÿå˜é‡æŒ‡å®šè·¯å¾„çš„æ‰€æœ‰ç±»ã€‚ Application ClassLoader:ä¹Ÿè¢«ç§°ä¸ºç³»ç»Ÿç±»åŠ è½½å™¨(å› ä¸ºå…¶å® getSystemClassLoader çš„è¿”å›å¯¹è±¡)ï¼Œä¸»è¦è´Ÿè´£åŠ è½½ç”¨æˆ·ç±»è·¯å¾„(ClassPath) ä¸‹çš„ç±»åº“ å·¥ä½œæµç¨‹è®²è§£12345678910111213141516171819202122232425262728293031323334353637protected Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException &#123; synchronized(this.getClassLoadingLock(name)) &#123; Class var4 = this.findLoadedClass(name); // æ£€æŸ¥éœ€è¦åŠ è½½çš„ç±»æ˜¯å¦å·²ç»è¢«åŠ è½½è¿‡ if (var4 == null) &#123; long var5 = System.nanoTime(); try &#123; // è‹¥æ²¡æœ‰åŠ è½½ï¼Œåˆ™è°ƒç”¨çˆ¶åŠ è½½å™¨çš„ loadClass()æ–¹æ³• if (this.parent != null) &#123; var4 = this.parent.loadClass(name, false); &#125; else &#123; var4 = this.findBootstrapClassOrNull(name); &#125; &#125; catch (ClassNotFoundException name0) &#123; // è‹¥çˆ¶ç±»åŠ è½½å™¨åŠ è½½å¤±è´¥ä¼šæŠ›å‡º ClassNotFoundExceptionï¼Œ //è¯´æ˜çˆ¶ç±»åŠ è½½å™¨æ— æ³•å®ŒæˆåŠ è½½è¯·æ±‚ &#125; if (var4 == null) &#123; long var7 = System.nanoTime(); // åœ¨çˆ¶ç±»åŠ è½½å™¨æ— æ³•åŠ è½½æ—¶ // å†è°ƒç”¨æœ¬èº«çš„ findClass æ–¹æ³•è¿›è¡Œç±»åŠ è½½ var4 = this.findClass(name); PerfCounter.getParentDelegationTime().addTime(var7 - var5); PerfCounter.getFindClassTime().addElapsedTimeFrom(var7); PerfCounter.getFindClasses().increment(); &#125; &#125; if (resolve) &#123; this.resolveClass(var4); &#125; return var4; &#125;&#125; è‹¥ä¸€ä¸ªç±»åŠ è½½å™¨æ”¶åˆ°äº†ç±»åŠ è½½è¯·æ±‚ï¼š æŠŠè¯¥ç±»åŠ è½½è¯·æ±‚å§”æ´¾ç»™çˆ¶ç±»åŠ è½½å™¨å»å®Œæˆï¼Œè€Œä¸ä¼šè‡ªå·±å»åŠ è½½è¯¥ç±»æ¯å±‚çš„ç±»åŠ è½½å™¨éƒ½æ˜¯å¦‚æ­¤ï¼Œå› æ­¤æ‰€æœ‰çš„åŠ è½½è¯·æ±‚æœ€ç»ˆéƒ½åº”ä¼ é€åˆ°é¡¶å±‚çš„å¯åŠ¨ç±»åŠ è½½å™¨ä¸­ åªæœ‰å½“çˆ¶ç±»åŠ è½½å™¨åé¦ˆè‡ªå·±æ— æ³•å®Œæˆè¯¥åŠ è½½è¯·æ±‚(å®ƒçš„æœç´¢èŒƒå›´ä¸­æ²¡æœ‰æ‰¾åˆ°æ‰€éœ€çš„ç±»)æ—¶ï¼Œå­åŠ è½½å™¨æ‰ä¼šè‡ªå·±å»åŠ è½½","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"è™šæ‹Ÿæœºæ˜¯å¦‚ä½•è£…è½½ä¸€ä¸ªç±»çš„","date":"2022-03-08T02:25:29.684Z","path":"wiki/Java/è™šæ‹Ÿæœº/è™šæ‹Ÿæœºæ˜¯å¦‚ä½•è£…è½½ä¸€ä¸ªç±»çš„/","text":"Javaè¯­è¨€çš„ç±»å‹å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»:åŸºæœ¬ç±»å‹(primitive types)å’Œå¼•ç”¨ç±»å‹(reference types)ã€‚ åŸºæœ¬ç±»å‹æ˜¯ç”±Javaè™šæ‹Ÿæœºé¢„å…ˆå®šä¹‰å¥½çš„ã€‚ å¦ä¸€ä¸ªå¤§ç±»å¼•ç”¨ç±»å‹ï¼ŒJavaå°†å…¶ç»†åˆ†ä¸ºå››ç§:ç±»ã€æ¥å£ã€æ•°ç»„ç±»å’Œæ³›å‹å‚æ•°ã€‚ç”±äºæ³›å‹å‚æ•°ä¼šåœ¨ ç¼–è¯‘è¿‡ç¨‹ä¸­è¢«æ“¦é™¤ï¼Œå› æ­¤Javaè™šæ‹Ÿæœºå®é™…ä¸Šåªæœ‰å‰ä¸‰ç§ã€‚åœ¨ç±»ã€æ¥å£å’Œæ•°ç»„ç±»ä¸­ï¼Œæ•°ç»„ç±»æ˜¯ç”± Javaè™šæ‹Ÿæœºç›´æ¥ç”Ÿæˆçš„ï¼Œå…¶ä»–ä¸¤ç§åˆ™æœ‰å¯¹åº”çš„å­—èŠ‚æµã€‚ è¯´åˆ°å­—èŠ‚æµï¼Œæœ€å¸¸è§çš„å½¢å¼è¦å±ç”±Javaç¼–è¯‘å™¨ç”Ÿæˆçš„classæ–‡ä»¶ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç¨‹åºå†… éƒ¨ç›´æ¥ç”Ÿæˆï¼Œæˆ–è€…ä»ç½‘ç»œä¸­è·å–(ä¾‹å¦‚ç½‘é¡µä¸­å†…åµŒçš„å°ç¨‹åºJava applet)å­—èŠ‚æµã€‚è¿™äº›ä¸åŒå½¢å¼çš„å­—èŠ‚æµï¼Œéƒ½ä¼šè¢«åŠ è½½åˆ°Javaè™šæ‹Ÿæœºä¸­ï¼Œæˆä¸ºç±»æˆ–æ¥å£ã€‚ä¸ºäº†å™è¿°æ–¹ä¾¿ï¼Œä¸‹é¢æˆ‘å°±ç”¨â€œç±»â€æ¥ç»Ÿç§°å®ƒä»¬ã€‚ æ— è®ºæ˜¯ç›´æ¥ç”Ÿæˆçš„æ•°ç»„ç±»ï¼Œè¿˜æ˜¯åŠ è½½çš„ç±»ï¼ŒJavaè™šæ‹Ÿæœºéƒ½éœ€è¦å¯¹å…¶è¿›è¡Œé“¾æ¥å’Œåˆå§‹åŒ–ã€‚ åŠ è½½åŠ è½½ï¼Œæ˜¯æŒ‡æŸ¥æ‰¾å­—èŠ‚æµï¼Œå¹¶ä¸”æ®æ­¤åˆ›å»ºç±»çš„è¿‡ç¨‹ã€‚å¯¹äºæ•°ç»„ç±»æ¥è¯´ï¼Œå®ƒå¹¶æ²¡æœ‰å¯¹åº”çš„å­—èŠ‚æµï¼Œè€Œ æ˜¯ç”±Javaè™šæ‹Ÿæœºç›´æ¥ç”Ÿæˆçš„ã€‚å¯¹äºå…¶ä»–çš„ç±»æ¥è¯´ï¼ŒJavaè™šæ‹Ÿæœºåˆ™éœ€è¦å€ŸåŠ©ç±»åŠ è½½å™¨æ¥å®ŒæˆæŸ¥æ‰¾å­— èŠ‚æµçš„è¿‡ç¨‹ã€‚ javaä¸­æœ‰å¾ˆå¤šç±»åŠ è½½å™¨ï¼Œå…±åŒçš„ç¥–å¸ˆçˆ·ï¼Œå«å¯åŠ¨ç±»åŠ è½½å™¨(bootstrap class loader)ã€‚å¯åŠ¨ç±»åŠ è½½ å™¨æ˜¯ç”±C++å®ç°çš„ï¼Œæ²¡æœ‰å¯¹åº”çš„Javaå¯¹è±¡ï¼Œå› æ­¤åœ¨Javaç§åªèƒ½ç”¨nullæ¥æŒ‡ä»£ã€‚ é™¤äº†å¯åŠ¨ç±»åŠ è½½å™¨ä¹‹å¤–ï¼Œå…¶ä»–çš„ç±»åŠ è½½å™¨éƒ½æ˜¯java.lang.ClassLoaderçš„å­ç±»ï¼Œå› æ­¤æœ‰å¯¹åº”çš„Javaå¯¹ è±¡ã€‚è¿™äº›ç±»åŠ è½½å™¨éœ€è¦å…ˆç”±å¦ä¸€ä¸ªç±»åŠ è½½å™¨ï¼Œæ¯”å¦‚è¯´å¯åŠ¨ç±»åŠ è½½å™¨ï¼ŒåŠ è½½è‡³Javaè™šæ‹Ÿæœºä¸­ï¼Œæ–¹èƒ½ æ‰§è¡Œç±»åŠ è½½ã€‚ æ¯å½“ä¸€ä¸ªç±»åŠ è½½å™¨æ¥æ”¶åˆ°åŠ è½½è¯·æ±‚æ—¶ï¼Œå®ƒä¼šå°†è¯·æ±‚è½¬å‘ç»™çˆ¶ç±»åŠ è½½å™¨ã€‚åœ¨çˆ¶ç±»åŠ è½½å™¨æ²¡æœ‰æ‰¾åˆ°æ‰€è¯·æ±‚çš„ç±»çš„æƒ…å†µä¸‹ï¼Œè¯¥ç±»åŠ è½½å™¨æ‰ä¼šå°è¯•å»åŠ è½½ã€‚å«åŒäº²å§”æ´¾æ¨¡å‹ã€‚ åœ¨Java9ä¹‹å‰ï¼Œå¯åŠ¨ç±»åŠ è½½å™¨è´Ÿè´£åŠ è½½æœ€ä¸ºåŸºç¡€ã€æœ€ä¸ºé‡è¦çš„ç±»ï¼Œæ¯”å¦‚å­˜æ”¾åœ¨JREçš„libç›®å½•ä¸‹jaråŒ…ä¸­çš„ç±»(ä»¥åŠç”±è™šæ‹Ÿæœºå‚æ•°-Xbootclasspath æŒ‡å®šçš„ç±»)ã€‚é™¤äº†å¯åŠ¨ç±»åŠ è½½å™¨ä¹‹å¤–ï¼Œå¦å¤–ä¸¤ä¸ªé‡è¦ çš„ç±»åŠ è½½å™¨æ˜¯æ‰©å±•åŠ è½½å™¨(extension class loader)å’Œåº”ç”¨ç±»åŠ è½½å™¨(application class loader)ï¼Œ å‡ç”±Javaæ ¸å¿ƒç±»åº“æä¾›ã€‚ æ‰©å±•ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨æ˜¯å¯åŠ¨ç±»åŠ è½½å™¨ã€‚å®ƒè´Ÿè´£åŠ è½½ç›¸å¯¹æ¬¡è¦ã€ä½†åˆé€šç”¨çš„ç±»ï¼Œæ¯”å¦‚æ”¾åœ¨JRE çš„lib&#x2F;extç›®å½•ä¸‹jaråŒ…ä¸­çš„ç±»(ä»¥åŠç”±ç³»ç»Ÿå˜é‡java.ext.dirsæŒ‡å®šçš„ç±»)ã€‚ åº”ç”¨ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨åˆ™æ˜¯æ‰©å±•ç±»åŠ è½½å™¨ã€‚å®ƒè´Ÿè´£åŠ è½½åº”ç”¨ç¨‹åºè·¯å¾„ä¸‹çš„ç±»ã€‚(è¿™é‡Œçš„åº”ç”¨ ç¨‹åºè·¯å¾„ï¼Œä¾¿æ˜¯æŒ‡è™šæ‹Ÿæœºå‚æ•° -cp&#x2F;-classpathã€ç³»ç»Ÿå˜é‡java.class.pathæˆ–ç¯å¢ƒå˜é‡CLASSPATHæ‰€ æŒ‡å®šçš„è·¯å¾„ã€‚)é»˜è®¤æƒ…å†µä¸‹ï¼Œåº”ç”¨ç¨‹åºä¸­åŒ…å«çš„ç±»ä¾¿æ˜¯ç”±åº”ç”¨ç±»åŠ è½½å™¨åŠ è½½çš„ã€‚ Java9å¼•å…¥æ¨¡å—ç³»ç»Ÿï¼Œå¹¶ä¸”ç•¥å¾®æ›´æ”¹äº†ä¸Šè¿°çš„ç±»åŠ è½½å™¨ã€‚æ‰©å±•ç±»åŠ è½½å™¨è¢«æ”¹åä¸ºå¹³å°ç±»åŠ è½½å™¨ (platform class loader)ã€‚Java SEä¸­é™¤äº†å°‘æ•°å‡ ä¸ªå…³é”®æ¨¡å—ï¼Œæ¯”å¦‚è¯´java.baseæ˜¯ç”±å¯åŠ¨ç±»åŠ è½½å™¨ åŠ è½½ä¹‹å¤–ï¼Œå…¶ä»–çš„æ¨¡å—å‡ç”±å¹³å°ç±»åŠ è½½å™¨æ‰€åŠ è½½ã€‚ é™¤äº†ç”±Javaæ ¸å¿ƒç±»åº“æä¾›çš„ç±»åŠ è½½å™¨å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŠ å…¥è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨ï¼Œæ¥å®ç°ç‰¹æ®Šçš„åŠ è½½ æ–¹å¼ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹classæ–‡ä»¶è¿›è¡ŒåŠ å¯†ï¼ŒåŠ è½½æ—¶å†åˆ©ç”¨è‡ªå®šä¹‰çš„ç±»åŠ è½½å™¨å¯¹å…¶è§£å¯†ã€‚ åœ¨Javaè™šæ‹Ÿæœºä¸­ï¼Œç±»çš„å”¯ä¸€æ€§æ˜¯ç”±ç±»åŠ è½½å™¨å®ä¾‹ä»¥åŠç±»çš„å…¨åä¸€åŒç¡®å®šçš„ã€‚å³ä¾¿æ˜¯åŒä¸€ä¸²å­—èŠ‚ æµï¼Œç»è¿‡ä¸åŒçš„ç±»åŠ è½½å™¨åŠ è½½ï¼Œä¹Ÿä¼šå¾—åˆ°ä¸¤ä¸ªä¸åŒçš„ç±»ã€‚åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€å€ŸåŠ©è¿™ä¸€ç‰¹ æ€§ï¼Œæ¥è¿è¡ŒåŒä¸€ä¸ªç±»çš„ä¸åŒç‰ˆæœ¬ é“¾æ¥é“¾æ¥ï¼Œæ˜¯æŒ‡å°†åˆ›å»ºæˆçš„ç±»åˆå¹¶è‡³Javaè™šæ‹Ÿæœºä¸­ï¼Œä½¿ä¹‹èƒ½å¤Ÿæ‰§è¡Œçš„è¿‡ç¨‹ã€‚å®ƒå¯ä»¥åˆ†ä¸ºéªŒè¯ã€å‡†å¤‡ä»¥åŠè§£æä¸‰ä¸ªé˜¶æ®µã€‚ éªŒè¯é˜¶æ®µçš„ç›®çš„ï¼Œåœ¨äºç¡®ä¿è¢«åŠ è½½çš„ç±»èƒ½å¤Ÿæ»¡è¶³Javaè™šæ‹Ÿæœºçš„çº¦æŸæ¡ä»¶ã€‚é€šå¸¸è€Œè¨€ï¼ŒJavaç¼–è¯‘å™¨ ç”Ÿæˆçš„ç±»æ–‡ä»¶å¿…ç„¶æ»¡è¶³Javaè™šæ‹Ÿæœºçš„çº¦æŸæ¡ä»¶ã€‚ å‡†å¤‡é˜¶æ®µçš„ç›®çš„ï¼Œåˆ™æ˜¯ä¸ºè¢«åŠ è½½ç±»çš„é™æ€å­—æ®µåˆ†é…å†…å­˜ã€‚Javaä»£ç ä¸­å¯¹é™æ€å­—æ®µçš„å…·ä½“åˆå§‹åŒ–ï¼Œ åˆ™ä¼šåœ¨ç¨åçš„åˆå§‹åŒ–é˜¶æ®µä¸­è¿›è¡Œã€‚é™¤äº†åˆ†é…å†…å­˜å¤–ï¼Œéƒ¨åˆ†Javaè™šæ‹Ÿæœºè¿˜ä¼šåœ¨æ­¤é˜¶æ®µæ„é€  å…¶ä»–è·Ÿç±» å±‚æ¬¡ç›¸å…³çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚è¯´ç”¨æ¥å®ç°è™šæ–¹æ³•çš„åŠ¨æ€ç»‘å®šçš„æ–¹æ³•è¡¨ã€‚ åœ¨classæ–‡ä»¶è¢«åŠ è½½è‡³Javaè™šæ‹Ÿæœºä¹‹å‰ï¼Œè¿™ä¸ªç±»æ— æ³•çŸ¥é“å…¶ä»–ç±»åŠå…¶æ–¹æ³•ã€å­—æ®µæ‰€å¯¹åº”çš„å…·ä½“åœ°å€ï¼Œç”šè‡³ä¸çŸ¥é“è‡ªå·±æ–¹æ³•ã€å­—æ®µçš„åœ°å€ã€‚å› æ­¤ï¼Œæ¯å½“éœ€è¦å¼•ç”¨è¿™äº›æˆå‘˜æ—¶ï¼ŒJavaç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ ä¸ªç¬¦å·å¼•ç”¨ã€‚åœ¨è¿è¡Œé˜¶æ®µï¼Œè¿™ä¸ªç¬¦å·å¼•ç”¨ä¸€èˆ¬éƒ½èƒ½å¤Ÿæ— æ­§ä¹‰åœ°å®šä½åˆ°å…·ä½“ç›®æ ‡ä¸Šã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªæ–¹æ³•è°ƒç”¨ï¼Œç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªåŒ…å«ç›®æ ‡æ–¹æ³•æ‰€åœ¨ç±»çš„åå­—ã€ç›®æ ‡æ–¹æ³•çš„åå­—ã€æ¥æ”¶é¤å®¿å’Œç±»å‹ä»¥åŠè¿”å›å€¼ç±»å‹çš„ç¬¦å·å¼•ç”¨ï¼Œæ¥æŒ‡ä»£æ‰€è¦è°ƒç”¨çš„æ–¹æ³•ã€‚ è§£æé˜¶æ®µçš„ç›®çš„ï¼Œæ­£æ˜¯å°†è¿™äº›ç¬¦å·å¼•ç”¨è§£ææˆä¸ºå®é™…å¼•ç”¨ã€‚å¦‚æœç¬¦å·å¼•ç”¨æŒ‡å‘ä¸€ä¸ªæœªè¢«åŠ è½½çš„ç±»ï¼Œæˆ–è€…æœªè¢«åŠ è½½çš„å­—æ®µæˆ–æ–¹æ³•ï¼Œé‚£ä¹ˆè§£æå°†è§¦å‘è¿™ä¸ªç±»çš„åŠ è½½(ä½†æœªå¿…è§¦å‘è¿™ä¸ªç±»çš„é“¾æ¥ä»¥åŠåˆå§‹åŒ–ã€‚) Javaè™šæ‹Ÿæœºè§„èŒƒå¹¶æ²¡æœ‰è¦æ±‚åœ¨é“¾æ¥è¿‡ç¨‹ä¸­å®Œæˆè§£æã€‚å®ƒä»…è§„å®šäº†:å¦‚æœæŸäº›å­—èŠ‚ç ä½¿ç”¨äº†ç¬¦å·å¼• ç”¨ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œè¿™äº›å­—èŠ‚ç ä¹‹å‰ï¼Œéœ€è¦å®Œæˆå¯¹è¿™äº›ç¬¦å·å¼•ç”¨çš„è§£æã€‚ åˆå§‹åŒ–åœ¨Javaä»£ç ä¸­ï¼Œå¦‚æœè¦åˆå§‹åŒ–ä¸€ä¸ªé™æ€å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å£°æ˜æ—¶ç›´æ¥èµ‹å€¼ï¼Œä¹Ÿå¯ä»¥åœ¨é™æ€ä»£ç å— ä¸­å¯¹å…¶èµ‹å€¼ã€‚ å¦‚æœç›´æ¥èµ‹å€¼çš„é™æ€å­—æ®µè¢«finalæ‰€ä¿®é¥°ï¼Œå¹¶ä¸”å®ƒçš„ç±»å‹æ˜¯åŸºæœ¬ç±»å‹æˆ–å­—ç¬¦ä¸²æ—¶ï¼Œé‚£ä¹ˆè¯¥å­—æ®µä¾¿ä¼š è¢«Javaç¼–è¯‘å™¨æ ‡è®°æˆä¸ºå¸¸é‡å€¼(ConstantValue)ï¼Œå…¶åˆå§‹åŒ–ç›´æ¥ç”±Javaè™šæ‹Ÿæœºå®Œæˆã€‚é™¤æ­¤ä¹‹å¤–çš„ ç›´æ¥èµ‹å€¼æ“ä½œï¼Œä»¥åŠæ‰€æœ‰é™æ€ä»£ç å—ä¸­çš„ä»£ç ï¼Œåˆ™ä¼šè¢«Javaç¼–è¯‘å™¨ç½®äºåŒä¸€æ–¹æ³•ä¸­ï¼Œå¹¶æŠŠå®ƒå‘½å ä¸ºã€‚ ç±»åŠ è½½çš„æœ€åä¸€æ­¥æ—¶åˆå§‹åŒ–ï¼Œä¾¿æ˜¯ä¸ºæ ‡è®°ä¸ºå¸¸é‡å€¼çš„å­—æ®µèµ‹å€¼ï¼Œä»¥åŠæ‰§è¡Œæ–¹æ³•çš„è¿‡ç¨‹ã€‚Javaè™šæ‹Ÿ æœºä¼šé€šè¿‡åŠ é”æ¥ç¡®ä¿ç±»çš„æ–¹æ³•ä»…è¢«æ‰§è¡Œä¸€æ¬¡ã€‚ åªæœ‰å½“åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œç±»æ‰æ­£å¼æˆä¸ºå¯æ‰§è¡Œçš„çŠ¶æ€ã€‚é‚£ä¹ˆï¼Œç±»çš„åˆå§‹åŒ–ä½•æ—¶ä¼šè¢«è§¦å‘å‘¢?JVM è§„èŒƒæšä¸¾äº†ä¸‹è¿°å¤šç§è§¦å‘æƒ…å†µ: å½“è™šæ‹Ÿæœºå¯åŠ¨æ—¶ï¼Œåˆå§‹åŒ–ç”¨æˆ·æŒ‡å®šçš„ä¸»ç±»; å½“é‡åˆ°ç”¨ä»¥æ–°å»ºç›®æ ‡ç±»å®ä¾‹çš„newæŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–newæŒ‡ä»¤çš„ç›®æ ‡ç±»; å½“é‡åˆ°è°ƒç”¨é™æ€æ–¹æ³•çš„æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–è¯¥é™æ€æ–¹æ³•æ‰€åœ¨çš„ç±»; å½“é‡åˆ°è®¿é—®é™æ€å­—æ®µçš„æŒ‡ä»¤æ—¶ï¼Œåˆå§‹åŒ–è¯¥é™æ€å­—æ®µæ‰€åœ¨çš„ç±»; å­ç±»çš„åˆå§‹åŒ–ä¼šè§¦å‘çˆ¶ç±»çš„åˆå§‹åŒ–; å¦‚æœä¸€ä¸ªæ¥å£å®šä¹‰äº†defaultæ–¹æ³•ï¼Œé‚£ä¹ˆç›´æ¥å®ç°æˆ–è€…é—´æ¥å®ç°è¯¥æ¥å£çš„ç±»çš„åˆå§‹åŒ–ï¼Œä¼šè§¦å‘è¯¥ æ¥å£çš„åˆå§‹åŒ–; ä½¿ç”¨åå°„APIå¯¹æŸä¸ªç±»è¿›è¡Œåå°„è°ƒç”¨æ—¶ï¼Œåˆå§‹åŒ–è¿™ä¸ªç±»; å½“åˆæ¬¡è°ƒç”¨MethodHandleå®ä¾‹æ—¶ï¼Œåˆå§‹åŒ–è¯¥MethodHandleæŒ‡å‘çš„æ–¹æ³•æ‰€åœ¨çš„ç±»ã€‚ ä½¿ç”¨å¸è½½","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"http://airshu.github.io/tags/JVM/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è™šæ‹Ÿæœº","slug":"Java/è™šæ‹Ÿæœº","permalink":"http://airshu.github.io/categories/Java/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}]},{"title":"ClassLoader","date":"2022-03-08T02:25:29.684Z","path":"wiki/Java/è¿›é˜¶/ClassLoader/","text":"","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"å†…å­˜æ¨¡å‹","date":"2022-03-08T02:25:29.684Z","path":"wiki/Java/è¿›é˜¶/å†…å­˜æ¨¡å‹/","text":"æ¦‚è¿°Java å†…å­˜æ¨¡å‹ (Java Memory Model) å®šä¹‰äº† JVM å¦‚ä½•æ­£ç¡®è®¿é—®è®¡ç®—æœºä¸»å†…å­˜ã€‚JMM æŒ‡å®šäº†ä¸åŒçº¿ç¨‹å¦‚ä½•ä»¥åŠä½•æ—¶å¯ä»¥çœ‹åˆ°å…¶ä»–çº¿ç¨‹å†™å…¥åˆ°å…±äº«å˜é‡çš„å€¼ï¼Œä»¥åŠå¦‚ä½•åœ¨å¿…è¦æ—¶åŒæ­¥è®¿é—®å…±äº«å˜é‡ã€‚ Java å¤šçº¿ç¨‹ä¹‹é—´é€šä¿¡ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼: å…±äº«å†…å­˜å’Œæ¶ˆæ¯ä¼ é€’ã€‚Java çš„å¹¶å‘é‡‡ç”¨å…±äº«å†…å­˜çš„æ–¹å¼ï¼Œå…±äº«å†…å­˜é€šä¿¡æ–¹å¼å¯¹äºç¨‹åºå‘˜è€Œè¨€æ€»æ˜¯é€æ˜éšå¼è¿›è¡Œçš„ã€‚ JMM å…³é”®æŠ€æœ¯ç‚¹éƒ½æ˜¯å›´ç»•ç€å¤šçº¿ç¨‹çš„åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ¥è®¨è®ºçš„ã€‚JMM è§£å†³äº†å¯è§æ€§å’Œæœ‰åºæ€§çš„é—®é¢˜ï¼Œè€Œé”è§£å†³äº†åŸå­æ€§çš„é—®é¢˜ã€‚ Java å†…å­˜æ¨¡å‹çš„å¯è§æ€§é—®é¢˜çš„åº•å±‚å®ç°æ˜¯é€šè¿‡å†…å­˜å±éšœ (memory barriers) å®ç°ã€‚ ç°ä»£è®¡ç®—æœºå†…å­˜æ¨¡å‹ï¼š Javaå†…å­˜æ¨¡å‹ï¼š å…·ä½“æ“ä½œ read è¯»å–ï¼Œä½œç”¨äºä¸»å†…å­˜æŠŠå˜é‡ä»ä¸»å†…å­˜ä¸­è¯»å–åˆ°æœ¬æœ¬åœ°å†…å­˜ã€‚ load åŠ è½½ï¼Œä¸»è¦ä½œç”¨æœ¬åœ°å†…å­˜ï¼ŒæŠŠä»ä¸»å†…å­˜ä¸­è¯»å–çš„å˜é‡åŠ è½½åˆ°æœ¬åœ°å†…å­˜çš„å˜é‡å‰¯æœ¬ä¸­use ä½¿ç”¨ï¼Œä¸»è¦ä½œç”¨æœ¬åœ°å†…å­˜ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ° ä¸€ä¸ªéœ€è¦ä½¿ç”¨å˜é‡çš„å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶å°†ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ assign èµ‹å€¼ ä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠä¸€ä¸ªä»æ‰§è¡Œå¼•æ“æ¥æ”¶åˆ°çš„å€¼èµ‹å€¼ç»™å·¥ä½œå†…å­˜çš„å˜ é‡ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªç»™å˜é‡èµ‹å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶æ‰§è¡Œè¿™ä¸ªæ“ä½œã€‚ store å­˜å‚¨ ä½œç”¨äºå·¥ä½œå†…å­˜çš„å˜é‡ï¼ŒæŠŠå·¥ä½œå†…å­˜ä¸­çš„ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿éš åçš„writeçš„æ“ä½œã€‚ write å†™å…¥ ä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼Œå®ƒæŠŠstoreæ“ä½œä»å·¥ä½œå†…å­˜ä¸­ä¸€ä¸ªå˜é‡çš„å€¼ä¼ é€åˆ°ä¸»å†…å­˜çš„ å˜é‡ä¸­ã€‚ lock é”å®š :ä½œç”¨äºä¸»å†…å­˜çš„å˜é‡ï¼ŒæŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€æ¡çº¿ç¨‹ç‹¬å çŠ¶æ€ã€‚ unlock è§£é”:ä½œç”¨äºä¸»å†…å­˜å˜é‡ï¼ŒæŠŠä¸€ä¸ªå¤„äºé”å®šçŠ¶æ€çš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾åçš„å˜é‡æ‰å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹é”å®šã€‚ è§„åˆ™ ä¸å…è®¸readå’Œloadã€storeå’Œwriteçš„æ“ä½œå•ç‹¬å‡ºç°ã€‚ ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹ä¸¢å¼ƒå®ƒçš„æœ€è¿‘assignçš„æ“ä½œï¼Œå³å˜é‡åœ¨å·¥ä½œå†…å­˜ä¸­æ”¹å˜äº†ä¹‹åå¿…é¡»åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ã€‚ ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹æ— åŸå› åœ°(æ²¡æœ‰å‘ç”Ÿè¿‡ä»»ä½•assignæ“ä½œ)æŠŠæ•°æ®ä»å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜ ä¸­ã€‚ ä¸€ä¸ªæ–°çš„å˜é‡åªèƒ½åœ¨ä¸»å†…å­˜ä¸­è¯ç”Ÿï¼Œä¸å…è®¸åœ¨å·¥ä½œå†…å­˜ä¸­ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–(loadæˆ– assign)çš„å˜é‡ã€‚å³å°±æ˜¯å¯¹ä¸€ä¸ªå˜é‡å®æ–½useå’Œstoreæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰§è¡Œè¿‡äº†assignå’Œloadæ“ä½œã€‚ ä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œlockæ“ä½œï¼Œlockå’Œunlockå¿…é¡»æˆå¯¹å‡ºç° å¦‚æœå¯¹ ä¸€ä¸ªå˜é‡æ‰§è¡Œlockæ“ä½œï¼Œå°†ä¼šæ¸…ç©ºå·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“ä½¿ç”¨è¿™ä¸ªå˜é‡å‰éœ€è¦ é‡æ–°æ‰§è¡Œloadæˆ–assignæ“ä½œåˆå§‹åŒ–å˜é‡çš„å€¼ å¦‚æœä¸€ä¸ªå˜é‡äº‹å…ˆæ²¡æœ‰è¢«lockæ“ä½œé”å®šï¼Œåˆ™ä¸å…è®¸å¯¹å®ƒæ‰§è¡Œunlockæ“ä½œ;ä¹Ÿä¸å…è®¸å»unlockä¸€ä¸ªè¢«å…¶ä»–çº¿ç¨‹é”å®šçš„å˜é‡ã€‚ å¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œunlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­(æ‰§è¡Œstoreå’Œwriteæ“ä½œ) å†…å­˜ç»“æ„JVMè¿è¡Œæ—¶å†…å­˜ç»“æ„ ç¨‹åºè®¡æ•°å™¨ï¼šç¨‹åºè®¡æ•°å™¨æ˜¯ä¸€å—å¾ˆå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒæ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œå¯ä»¥è®¤ä½œä¸ºå½“å‰çº¿ç¨‹çš„è¡Œå·æŒ‡ç¤ºå™¨ã€‚ Javaæ ˆ(è™šæ‹Ÿæœºæ ˆ)ï¼šæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ã€‚æ¯ä¸ªæ–¹æ³•è¢«æ‰§è¡Œçš„æ—¶å€™éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§ç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ï¼Œæ“ä½œæ ˆï¼ŒåŠ¨æ€é“¾æ¥ï¼Œæ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚æ¯ä¸€ä¸ªæ–¹æ³•è¢«è°ƒç”¨çš„è¿‡ç¨‹å°±å¯¹åº”ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­ä»å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚ æ¯ä¸ªçº¿ç¨‹åŒ…å«ä¸€ä¸ªæ ˆåŒºï¼Œæ ˆä¸­åªä¿å­˜åŸºç¡€æ•°æ®ç±»å‹çš„å¯¹è±¡å’Œè‡ªå®šä¹‰å¯¹è±¡çš„å¼•ç”¨(ä¸æ˜¯å¯¹è±¡)ï¼Œå¯¹è±¡éƒ½å­˜æ”¾åœ¨å †åŒºä¸­ æ¯ä¸ªæ ˆä¸­çš„æ•°æ®(åŸå§‹ç±»å‹å’Œå¯¹è±¡å¼•ç”¨)éƒ½æ˜¯ç§æœ‰çš„ï¼Œå…¶ä»–æ ˆä¸èƒ½è®¿é—®ã€‚ æ ˆåˆ†ä¸º3ä¸ªéƒ¨åˆ†:åŸºæœ¬ç±»å‹å˜é‡åŒºã€æ‰§è¡Œç¯å¢ƒä¸Šä¸‹æ–‡ã€æ“ä½œæŒ‡ä»¤åŒº(å­˜æ”¾æ“ä½œæŒ‡ä»¤)ã€‚ å †åŒº:å †æ˜¯javaè™šæ‹Ÿæœºç®¡ç†å†…å­˜æœ€å¤§çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œå› ä¸ºå †å­˜æ”¾çš„å¯¹è±¡æ˜¯çº¿ç¨‹å…±äº«çš„ï¼Œæ‰€ä»¥å¤šçº¿ç¨‹çš„æ—¶å€™ä¹Ÿéœ€è¦åŒæ­¥æœºåˆ¶ã€‚ å­˜å‚¨çš„å…¨éƒ¨æ˜¯å¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªä¸ä¹‹å¯¹åº”çš„classçš„ä¿¡æ¯ã€‚(classçš„ç›®çš„æ˜¯å¾—åˆ°æ“ä½œæŒ‡ä»¤) jvmåªæœ‰ä¸€ä¸ªå †åŒº(heap)è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«ï¼Œå †ä¸­ä¸å­˜æ”¾åŸºæœ¬ç±»å‹å’Œå¯¹è±¡å¼•ç”¨ï¼Œåªå­˜æ”¾å¯¹è±¡æœ¬èº« æ–¹æ³•åŒº: åˆå«é™æ€åŒºï¼Œè·Ÿå †ä¸€æ ·ï¼Œè¢«æ‰€æœ‰çš„çº¿ç¨‹å…±äº«ã€‚æ–¹æ³•åŒºåŒ…å«æ‰€æœ‰çš„classå’Œstaticå˜é‡ã€‚ æ–¹æ³•åŒºä¸­åŒ…å«çš„éƒ½æ˜¯åœ¨æ•´ä¸ªç¨‹åºä¸­æ°¸è¿œå”¯ä¸€çš„å…ƒç´ ï¼Œå¦‚classï¼Œstaticå˜é‡ã€‚ åœ¨JAVAè™šæ‹Ÿæœºè¿›ç¨‹ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½ä¼šæ‹¥æœ‰ä¸€ä¸ªæ–¹æ³•è°ƒç”¨æ ˆï¼Œç”¨æ¥è·Ÿè¸ªçº¿ç¨‹è¿è¡Œä¸­ä¸€ç³»åˆ—çš„æ–¹æ³•è°ƒç”¨è¿‡ç¨‹ï¼Œæ ˆä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ å°±è¢«ç§°ä¸ºæ ˆå¸§ï¼Œæ¯å½“çº¿ç¨‹è°ƒç”¨ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™å°±ä¼šå‘æ–¹æ³•æ ˆå‹å…¥ä¸€ä¸ªæ–°å¸§ã€‚è¿™é‡Œçš„å¸§ç”¨æ¥å­˜å‚¨æ–¹æ³•çš„å‚æ•°ã€å±€éƒ¨å˜é‡å’Œè¿ç®—è¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚ çº¿ç¨‹æ ˆJVM å†…å­˜ç»“æ„ä¸­æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„å†…å­˜åŒºåŸŸå«åšçº¿ç¨‹æ ˆ , æ¯ä¸ªçº¿ç¨‹çš„æ ˆå¤§å°å¯ä»¥é€šè¿‡è®¾ç½® JVM å‚ æ•°-Xss, -Xss128k è¡¨ç¤ºæ¯ä¸ªçº¿ç¨‹å †æ ˆå¤§å°ä¸º 128Kï¼ŒJDK1.5 é»˜è®¤å€¼ä¸º 1Mã€‚(Androidä¹Ÿæ˜¯ï¼Œæ¯å½“æ–°å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œnativeå°±ä¼šåˆ’åˆ†1Må·¦å³ç©ºé—´å‡ºæ¥) çº¿ç¨‹æ ˆå†…å­˜å­˜å‚¨äº†åŸºæœ¬ç±»å‹å˜é‡å’Œå¯¹è±¡å¼•ç”¨ï¼Œå½“è®¿é—®äº†å¯¹è±¡çš„æŸä¸€å®ä¾‹å˜é‡æ—¶ï¼Œé€šè¿‡åœ¨æ ˆä¸­è·å¾—å¯¹è±¡å¼•ç”¨å†è·å–å˜é‡çš„å€¼ï¼Œç„¶åå°†å˜é‡çš„å€¼æ‹·è´è‡³çº¿ç¨‹çš„å·¥ä½œå†…å­˜ã€‚ æ¯ä¸ªçº¿ç¨‹ (å¤„ç†å™¨) éƒ½æœ‰å·¥ä½œå†…å­˜ï¼Œå·¥ä½œå†…å­˜å­˜äº†è¯¥çº¿ç¨‹ä»¥è¯»å†™å…±äº«å˜é‡çš„å‰¯æœ¬ã€‚å·¥ä½œå†…å­˜æ˜¯ JMM æŠ½è±¡æ¦‚å¿µ , å¹¶ä¸çœŸå®å­˜åœ¨ã€‚ read and load ä»ä¸»å­˜å¤åˆ¶å˜é‡åˆ°å½“å‰å·¥ä½œå†…å­˜; use and assign æ‰§è¡Œä»£ç ï¼Œæ”¹å˜å…±äº«å˜é‡å€¼; store and write ç”¨å·¥ä½œå†…å­˜æ•°æ®åˆ·æ–°ä¸»å­˜ç›¸å…³å†…å®¹; å…¶ä¸­ use and assign å¯ä»¥å¤šæ¬¡å‡ºç°ã€‚ ä½†æ˜¯è¿™ä¸€äº›æ“ä½œå¹¶ä¸æ˜¯åŸå­æ€§ï¼Œä¹Ÿå°±æ˜¯åœ¨ read load ä¹‹åï¼Œå¦‚æœä¸»å†…å­˜ count å˜é‡å‘ç”Ÿä¿®æ”¹ä¹‹åï¼Œçº¿ç¨‹å·¥ä½œå†…å­˜ä¸­çš„å€¼ç”±äºå·²ç»åŠ è½½ï¼Œä¸ä¼šäº§ç”Ÿå¯¹åº”çš„å˜åŒ–ï¼Œæ‰€ä»¥è®¡ç®—å‡ºæ¥çš„ç»“æœä¼šå’Œé¢„æœŸä¸ä¸€æ ·ã€‚ å¯è§æ€§å¯è§æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªçº¿ç¨‹å¯¹å˜é‡çš„å†™æ“ä½œå¯¹å…¶ä»–çº¿ç¨‹åç»­çš„è¯»æ“ä½œå¯è§ã€‚ ç”±äºç°ä»£ CPU éƒ½æœ‰å¤šçº§ç¼“å­˜ï¼ŒCPU çš„æ“ä½œéƒ½æ˜¯åŸºäºé«˜é€Ÿç¼“å­˜çš„ï¼Œè€Œçº¿ç¨‹é€šä¿¡æ˜¯åŸºäºå†…å­˜çš„ï¼Œè¿™ä¸­é—´æœ‰ä¸€ä¸ªGap, å¯è§æ€§çš„å…³é”®è¿˜æ˜¯åœ¨å¯¹å˜é‡çš„å†™æ“ä½œä¹‹åèƒ½å¤Ÿåœ¨æŸä¸ªæ—¶é—´ç‚¹æ˜¾ç¤ºåœ°å†™å›åˆ°ä¸»å†…å­˜ï¼Œ è¿™æ ·å…¶ä»–çº¿ç¨‹å°±èƒ½ä»ä¸»å†…å­˜ä¸­çœ‹åˆ°æœ€æ–°çš„å†™çš„å€¼ã€‚ volatileï¼Œsynchronized(éšå¼é”), Lockï¼ˆæ˜¾å¼é”ï¼‰ï¼ŒAtomicï¼ˆåŸå­å˜é‡ï¼‰è¿™äº›åŒæ­¥æ‰‹æ®µéƒ½å¯ä»¥ä¿è¯å¯è§æ€§ã€‚å¯è§æ€§åº•å±‚çš„å®ç°æ˜¯é€šè¿‡åŠ å†…å­˜å±éšœå®ç°çš„: å†™å˜é‡ååŠ å†™å±éšœï¼Œä¿è¯ CPU å†™ç¼“å†²åŒºçš„å€¼å¼ºåˆ¶åˆ·æ–°å›ä¸»å†…å­˜; è¯»å˜é‡ä¹‹å‰åŠ è¯»å±éšœï¼Œä½¿ç¼“å­˜å¤±æ•ˆï¼Œä»è€Œå¼ºåˆ¶ä»ä¸»å†…å­˜è¯»å–å˜é‡æœ€æ–°å€¼ã€‚ æŒ‡ä»¤é‡æ’åºå¯¹äºå¤„ç†å™¨è€Œè¨€ï¼Œä¸€æ¡æ±‡ç¼–æŒ‡ä»¤çš„æ‰§è¡Œæ—¶åˆ†ä¸ºå¾ˆå¤šæ­¥éª¤çš„ã€‚åœ¨å¤šå¤„ç†å™¨ä¸‹ï¼Œä¸€ä¸ªæ±‡ç¼–æŒ‡ä»¤ä¸ä¸€å®šæ˜¯åŸå­æ“ä½œçš„ã€‚ä¸ºæé«˜CPUåˆ©ç”¨ç‡ï¼ŒåŠ å¿«æ‰§è¡Œé€Ÿåº¦ï¼Œå°†æŒ‡ä»¤åˆ†ä¸ºè‹¥å¹²ä¸ªé˜¶æ®µï¼Œå¯å¹¶è¡Œæ‰§è¡Œä¸åŒæŒ‡ä»¤çš„ä¸åŒé˜¶æ®µï¼Œä»è€Œå¤šä¸ªæŒ‡ä»¤å¯ä»¥åŒæ—¶æ‰§è¡Œã€‚ æ•°æ®ä¾èµ–æ€§ ä¸Šé¢3ç§æƒ…å†µï¼Œåªè¦é‡æ’åºä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºï¼Œç¨‹åºçš„æ‰§è¡Œç»“æœå°±ä¼šè¢«æ”¹å˜ã€‚å‰é¢æåˆ°è¿‡ï¼Œç¼–è¯‘ å™¨å’Œå¤„ç†å™¨å¯èƒ½ä¼šå¯¹æ“ä½œåšé‡æ’åºã€‚ç¼–è¯‘å™¨å’Œå¤„ç†å™¨åœ¨é‡æ’åºæ—¶ï¼Œä¼šéµå®ˆæ•°æ®ä¾èµ–æ€§ï¼Œç¼–è¯‘å™¨å’Œ å¤„ç†å™¨ä¸ä¼šæ”¹å˜å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºã€‚è¿™é‡Œæ‰€è¯´çš„æ•°æ®ä¾èµ–æ€§ä»…é’ˆå¯¹å•ä¸ªå¤„ ç†å™¨ä¸­æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—å’Œå•ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œï¼Œä¸åŒå¤„ç†å™¨ä¹‹é—´å’Œä¸åŒçº¿ç¨‹ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§ ä¸è¢«ç¼–è¯‘å™¨å’Œå¤„ç†å™¨è€ƒè™‘ã€‚ as-if-serialä¸ç®¡æ€ä¹ˆé‡æ’åºï¼Œ(å•çº¿ç¨‹)ç¨‹åºçš„æ‰§è¡Œç»“æœä¸èƒ½è¢«æ”¹å˜ã€‚ç¼–è¯‘å™¨ã€runtimeå’Œå¤„ç†å™¨éƒ½å¿…é¡»éµå®ˆas-if-serialè¯­ä¹‰ã€‚ ä¸ºäº†éµå®ˆas-if-serialè¯­ä¹‰ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ä¼šå¯¹å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„æ“ä½œåšé‡æ’åºã€‚ happens-before åŸåˆ™happen ä¸ before è§„åˆ™é˜è¿°æ“ä½œä¹‹é—´çš„å†…å­˜å¯è§æ€§ï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†åœ¨ä¸æ”¹å˜ç¨‹åºçš„è¯­ä¹‰æƒ…å†µä¸‹æ é«˜ç¨‹åºçš„å¹¶è¡Œåº¦ã€‚åœ¨ JMM ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ“ä½œæ‰§è¡Œçš„ç»“æœéœ€è¦å¯¹å¦ä¸€ä¸ªæ“ä½œçº¿ç¨‹ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ“ä½œä¹‹é—´å¿…é¡»å­˜åœ¨ happen-before å…³ç³»ã€‚ ç¨‹åºæ¬¡åºè§„åˆ™:ä¸€ä¸ªçº¿ç¨‹å†…ï¼ŒæŒ‰ç…§ä»£ç é¡ºåºï¼Œä¹¦å†™åœ¨å‰é¢çš„æ“ä½œå…ˆè¡Œå‘ç”Ÿäºä¹¦å†™åœ¨åé¢çš„æ“ä½œ; é”å®šè§„åˆ™:ä¸€ä¸ª unLock æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„ lock æ“ä½œ; volatile å˜é‡è§„åˆ™:å¯¹ä¸€ä¸ªå˜é‡çš„å†™æ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œ; ä¼ é€’è§„åˆ™:å¦‚æœæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Bï¼Œè€Œæ“ä½œ B åˆå…ˆè¡Œå‘ç”Ÿäºæ“ä½œ Cï¼Œåˆ™å¯ä»¥å¾—å‡ºæ“ä½œ A å…ˆè¡Œå‘ç”Ÿäºæ“ä½œ C; çº¿ç¨‹å¯åŠ¨è§„åˆ™:Thread å¯¹è±¡çš„ start() æ–¹æ³•å…ˆè¡Œå‘ç”Ÿäºæ­¤çº¿ç¨‹çš„æ¯ä¸ªä¸€ä¸ªåŠ¨ä½œ; çº¿ç¨‹ä¸­æ–­è§„åˆ™:å¯¹çº¿ç¨‹ interrupt() æ–¹æ³•çš„è°ƒç”¨å…ˆè¡Œå‘ç”Ÿäºè¢«ä¸­æ–­çº¿ç¨‹çš„ä»£ç æ£€æµ‹åˆ°ä¸­æ–­äº‹ä»¶çš„å‘ç”Ÿ; çº¿ç¨‹ç»ˆç»“è§„åˆ™:çº¿ç¨‹ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºçº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Thread.join() æ–¹æ³•ç»“æŸã€Thread.isAlive() çš„è¿”å›å€¼æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œ; å¯¹è±¡ç»ˆç»“è§„åˆ™:ä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆå…ˆè¡Œå‘ç”Ÿäºä»–çš„ finalize() æ–¹æ³•çš„å¼€å§‹; ç¨‹åºé¡ºåºè§„åˆ™:ä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ¯ä¸ªæ“ä½œï¼Œhappen-before äºè¯¥çº¿ç¨‹ä¸­çš„ä»»æ„åç»­æ“ä½œ; ç›‘è§†å™¨é”è§„åˆ™:å¯¹ä¸€ä¸ªé”çš„è§£é”ï¼Œhappens-before äºéšåå¯¹è¿™ä¸ªé”çš„åŠ é”; Volatile å˜é‡è§„åˆ™:å¯¹ä¸€ä¸ª volatile åŸŸçš„å†™ï¼Œhappens-before äºä»»æ„åç»­å¯¹è¿™ä¸ª volatile åŸŸçš„è¯»; ä¼ é€’æ€§:å¦‚æœ A happens-beforeB , ä¸” B happens-before C, é‚£ä¹ˆ A happens-before C; Start è§„åˆ™: å¦‚æœçº¿ç¨‹ A æ‰§è¡Œæ“ä½œ ThreadB.start()(å¯åŠ¨çº¿ç¨‹ B), é‚£ä¹ˆ A çº¿ç¨‹çš„ ThreadB.start() æ“ä½œ happens-before äºçº¿ç¨‹ B ä¸­çš„ä»»æ„æ“ä½œã€‚ å‚è€ƒ ã€ŠTimeï¼ŒClocks and the Ordering of Events in a Distributed Systemã€‹","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"JVMTI","date":"2022-03-08T02:25:29.684Z","path":"wiki/Java/è¿›é˜¶/JVMTI/","text":"æ¦‚è¦JVM Tool Interfaceï¼šJVMTI æœ¬è´¨ä¸Šæ˜¯åœ¨JVMå†…éƒ¨çš„è®¸å¤šäº‹ä»¶è¿›è¡Œäº†åŸ‹ç‚¹ã€‚é€šè¿‡è¿™äº›åŸ‹ç‚¹å¯ä»¥ç»™å¤–éƒ¨æä¾›å½“å‰ä¸Šä¸‹æ–‡çš„ä¸€äº›ä¿¡æ¯ã€‚ç”šè‡³å¯ä»¥æ¥å—å¤–éƒ¨çš„å‘½ä»¤æ¥æ”¹å˜ä¸‹ä¸€æ­¥çš„åŠ¨ä½œã€‚å¤–éƒ¨ç¨‹åºä¸€èˆ¬åˆ©ç”¨C&#x2F;C++å®ç°ä¸€ä¸ªJVMTIAgentï¼Œåœ¨Agenté‡Œé¢æ³¨å†Œä¸€äº›JVMäº‹ä»¶çš„å›è°ƒã€‚å½“äº‹ä»¶å‘ç”Ÿæ—¶JVMTIè°ƒç”¨è¿™äº›å›è°ƒæ–¹æ³•ã€‚Agentå¯ä»¥åœ¨å›è°ƒæ–¹æ³•é‡Œé¢å®ç°è‡ªå·±çš„é€»è¾‘ã€‚JVMTIAgentæ˜¯ä»¥åŠ¨æ€é“¾æ¥åº“çš„å½¢å¼è¢«è™šæ‹ŸæœºåŠ è½½çš„ã€‚ ä¸»è¦çš„åŠŸèƒ½ï¼š é‡æ–°å®šä¹‰ç±»ã€‚ è·Ÿè¸ªå¯¹è±¡åˆ†é…å’Œåƒåœ¾å›æ”¶è¿‡ç¨‹ã€‚ éµå¾ªå¯¹è±¡çš„å¼•ç”¨æ ‘ï¼Œéå†å †ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚ æ£€æŸ¥ Java è°ƒç”¨å †æ ˆã€‚ æš‚åœï¼ˆå’Œæ¢å¤ï¼‰æ‰€æœ‰çº¿ç¨‹ã€‚ è¿ç”¨åœ¨Androidä¸­ï¼Œå†…å­˜æº¢å‡ºåˆ†æã€å¤§å›¾æ£€æµ‹ã€ANRç›‘æ§éƒ½å¯ä»¥é€šè¿‡æ­¤ä¸­æ–¹å¼å®ç°ã€‚ å‚è€ƒ ART TI Javaé»‘ç§‘æŠ€ä¹‹æºï¼šJVMTIå®Œå…¨è§£è¯» åŸºäºJVMTI å®ç°æ€§èƒ½ç›‘æ§","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"}]},{"title":"ASM","date":"2022-03-08T02:25:29.680Z","path":"wiki/Java/å¼€æºåº“/ASM/","text":"æ’æ¡© å‚è€ƒ https://asm.ow2.io/index.html https://github.com/Leifzhang/AndroidAutoTrack","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¼€æºåº“","slug":"Java/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Java/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"RxJava","date":"2022-03-08T02:25:29.680Z","path":"wiki/Java/å¼€æºåº“/RxJava/","text":"æ¦‚è¦ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ï¼Œç±»ä¼¼Javaçš„IOæµã€‚å°†ä¸åŒçš„æ“ä½œç¬¦ä¸€å±‚å±‚çš„å°è£…ï¼Œç„¶åå†è¿›è¡Œä¸€å±‚å±‚çš„è§£å°ã€‚ åŸºæœ¬æ¦‚å¿µ Observable(å¯è§‚å¯Ÿè€…ï¼Œå³è¢«è§‚å¯Ÿè€…) Observer (è§‚å¯Ÿè€…) subscribe (è®¢é˜…) äº‹ä»¶ çº¿ç¨‹è®¾ç½® Scheduler.immediate() ç›´æ¥è¿è¡Œåœ¨å½“å‰çº¿ç¨‹ï¼Œè¿™æ˜¯é»˜è®¤çš„scheduler Scheduler.newThread() å¼€ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œå¹¶åœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œæ“ä½œ Scheduler.io() ioæ“ä½œ(è¯»å†™æ–‡ä»¶ã€ç½‘ç»œäº¤äº’)æ‰€ä½¿ç”¨çš„schedulerï¼Œå’ŒnewTheadç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯ioå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªæ²¡æœ‰æ•°é‡ä¸Šé™çš„çº¿ç¨‹æ± ï¼Œä½¿ç”¨ioå¯ä»¥é¿å…ä¸å¿…è¦çš„çº¿ç¨‹åˆ›å»º Scheduler.computation() è®¡ç®—æ‰€ç”¨çš„schedulerï¼Œè®¡ç®—æŒ‡çš„æ˜¯cpuå¯†é›†å‹è®¡ç®—ï¼Œå¦‚å›¾å½¢çš„è®¡ç®—ï¼Œä½¿ç”¨å›ºå®šæ•°é‡(cpuæ ¸å¿ƒæ•°)çš„çº¿ç¨‹æ±  Scheduler.mainThread() åœ¨androidä¸»çº¿ç¨‹ä¸­è¿è¡Œ BackpressureStrategyå½“å¼‚æ­¥æƒ…å†µä¸‹, è¢«è§‚å¯Ÿè€…å‘é€æ•°æ®è¿‡å¿«, è€Œæ¶ˆè´¹è€…æ— æ³•åŠæ—¶å¤„ç†æ•°æ®, å¯¼è‡´ç¼“å­˜å†…å­˜å¢å¤§, æœ€ç»ˆå¯¼è‡´OOM, èƒŒå‹å°±æ˜¯ä¸ºäº†å¤„ç†è¿™ç§æƒ…å†µã€‚ ç­–ç•¥ æ•ˆæœ MISSING æ— ä»»ä½•èƒŒå‹ç­–ç•¥æ‰§è¡Œ, é™¤éè°ƒç”¨onBackpressureXXX ERROR æŠ›å‡ºå¼‚å¸¸ BUFFER å†…éƒ¨ç»´æŠ¤å¯æ‰©å®¹çš„ç¼“å­˜æ± , æ•ˆæœä¸Observerä¸€æ ·, å¯èƒ½å¯¼è‡´OOM DROP å¦‚æœä¸‹æµæ— æ³•è·Ÿä¸Šä¸Šæµå‘å°„é€Ÿåº¦, åˆ™ä¼šä¸¢å¼ƒè¿™å—æ•°æ® LATEST å½“ä¸‹æµæ— æ³•è·Ÿä¸Šä¸Šæµçš„å‘å°„é€Ÿåº¦çš„æ—¶å€™, åˆ™åªä¿å­˜æœ€è¿‘ç”Ÿäº§çš„æ•°æ® æ“ä½œç¬¦create12345678910111213141516171819202122232425262728293031323334353637383940414243Observable.create(new ObservableOnSubscribe&lt;String&gt;() &#123; @Override public void subscribe(ObservableEmitter&lt;String&gt; observableEmitter) throws Exception &#123; observableEmitter.onNext(&quot;1&quot;); observableEmitter.onNext(&quot;2&quot;); observableEmitter.onNext(&quot;3&quot;); observableEmitter.onNext(&quot;4&quot;); observableEmitter.onError(new Throwable()); observableEmitter.onComplete();//æ‰§è¡Œå®Œcompleteä¹‹åå°±ä¸èƒ½æ‰§è¡Œå…¶ä»–æ“ä½œäº† &#125; &#125;).map(new Function&lt;String, String&gt;() &#123; @Override public String apply(@NonNull String s) throws Exception &#123; return s + &quot;---&quot;;//è¿›è¡Œè½¬æ¢ &#125; &#125;).subscribe(new Observer&lt;String&gt;() &#123; private Disposable mDisposable; @Override public void onSubscribe(Disposable disposable) &#123; Log.d(TAG, &quot;onSubscribe&quot;); mDisposable = disposable; &#125; @Override public void onNext(String s) &#123; Log.d(TAG, &quot;onNext=&quot; + s); &#125; @Override public void onError(Throwable throwable) &#123; Log.d(TAG, &quot;onError&quot;); &#125; @Override public void onComplete() &#123; Log.d(TAG, &quot;onComplete&quot;); &#125; &#125;); mapä¸€å¯¹ä¸€å˜æ¢ 1 flatmapä¸€å¯¹å¤šã€å¤šå¯¹å¤šå˜æ¢ 1 intervalRangeé—´éš”è§¦å‘ 1234567891011121314151617/*startï¼šèµ·å§‹æ•°å€¼countï¼šå‘å°„æ•°é‡initialDelayï¼šå»¶è¿Ÿæ‰§è¡Œæ—¶é—´periodï¼šå‘å°„å‘¨æœŸæ—¶é—´unitï¼šæ—¶é—´å•ä½schedulerï¼šä½¿ç”¨çš„çº¿ç¨‹ç­–ç•¥*/public static Flowable&lt;Long&gt; intervalRange(long start, long count, long initialDelay, long period, TimeUnit unit, Scheduler scheduler)public static Flowable&lt;Long&gt; intervalRange(long start, long count, long initialDelay, long period, TimeUnit unit)// ä»0-100ï¼Œæ¯ä¸ª100æ¯«ç§’åˆ·æ–°ä¸€æ¬¡ï¼Œåˆ·æ–°100æ¬¡ï¼Œåœ¨Androidä¸»çº¿ç¨‹Flowable.intervalRange(1, 100, 0, 100, TimeUnit.MILLISECONDS, AndroidSchedulers.mainThread()) .subscribe(aLong -&gt; &#123; Log.d(TAG, &quot; =&quot; + (100-aLong) + &quot; &quot; + Thread.currentThread().getName()); &#125;); å‚è€ƒ RxJavaæºç è§£æ(ä¸‰)-èƒŒå‹","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¼€æºåº“","slug":"Java/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Java/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"Classæ–‡ä»¶","date":"2022-03-08T02:25:29.680Z","path":"wiki/Java/è™šæ‹Ÿæœº/Classæ–‡ä»¶/","text":"æ¦‚è¿°Classæ–‡ä»¶æ˜¯ä¸€ç»„ä»¥8ä½å­—èŠ‚ä¸ºåŸºç¡€å•ä½çš„äºŒè¿›åˆ¶æµï¼Œå„ä¸ªæ•°æ®é¡¹ç›®ä¸¥æ ¼æŒ‰ç…§é¡ºåºç´§å‡‘åœ°æ’åˆ—åœ¨ Classæ–‡ä»¶ä¹‹ä¸­ï¼Œä¸­é—´æ²¡æœ‰æ·»åŠ ä»»ä½•åˆ†éš”ç¬¦ã€‚æ ¹æ®Javaè™šæ‹Ÿæœºè§„èŒƒçš„è§„å®šï¼ŒClassæ–‡ä»¶ç»“æ„é‡‡ç”¨ä¸€ç§ ç±»ä¼¼äºCè¯­è¨€ç»“æ„ä½“çš„ä¼ªç»“æ„æ¥å­˜å‚¨æ•°æ®ï¼Œè¿™ç§ä¼ªç»“æ„åªæœ‰ä¸¤ç§æ•°æ®ç±»å‹:æ— ç¬¦å·æ•°å’Œè¡¨ã€‚ æ— ç¬¦å·æ•°å±äºåŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä»¥u1ã€u2ã€u4ã€u8æ¥è¡¨ç¤º1ä¸ªå­—èŠ‚ã€2ä¸ªå­—èŠ‚ã€4ä¸ªå­—èŠ‚å’Œ8ä¸ªå­—èŠ‚çš„æ— ç¬¦å·æ•°ï¼Œæ— ç¬¦å·æ•°å¯ä»¥ç”¨æ¥æè¿°æ•°å­—ã€ç´¢å¼•å¼•ç”¨ã€æ•°é‡å€¼æˆ–è€…æŒ‰ç…§UTF-8ç¼–ç æ„ æˆçš„å­—ç¬¦ä¸²å€¼ã€‚ è¡¨æ˜¯ç”±å¤šä¸ªæ— ç¬¦å·æ•°æˆ–è€…å…¶ä»–è¡¨ä½œä¸ºæ•°æ®é¡¹æ„æˆçš„ç¬¦åˆæ•°æ®ç±»å‹ï¼Œæ‰€æœ‰è¡¨éƒ½ä¹ æƒ¯æ€§åœ°ä»¥ â€œ_infoâ€ç»“å°¾ã€‚è¡¨ç”¨äºæè¿°æœ‰å±‚æ¬¡å…³ç³»çš„å¤åˆç»“æ„çš„æ•°æ®ï¼Œæ•´ä¸ªClassæ–‡ä»¶æœ¬è´¨ä¸Šå°±æ˜¯ä¸€å¼ è¡¨ï¼Œ å®ƒç”±ä¸‹è¡¨æ‰€ç¤ºçš„æ•°æ®é¡¹æ„æˆã€‚ é­”æ•°ä¸Classæ–‡ä»¶çš„ç‰ˆæœ¬æ¯ä¸ªClassæ–‡ä»¶çš„å¤´å››ä¸ªå­—èŠ‚ç§°ä¸ºé­”æ•°(Magic Number)ï¼Œå€¼ä¸º0xCAFEBABEã€‚ç´§è·Ÿç€é­”æ•°çš„å››ä¸ªå­—èŠ‚å­˜å‚¨çš„æ˜¯Classæ–‡ä»¶çš„ç‰ˆæœ¬å·:ç¬¬5å’Œç¬¬6ä¸ªå­—èŠ‚æ˜¯æ¬¡ç‰ˆæœ¬å·(Minor Version),ç¬¬7å’Œç¬¬8ä¸ªå­—èŠ‚æ˜¯ä¸»ç‰ˆæœ¬å·(Major Version)ã€‚ å¸¸é‡æ± (constant_pool)ç”±äºå¸¸é‡æ± ä¸­çš„å¸¸é‡æ•°é‡ä¸å›ºå®šï¼Œæ‰€ä»¥åœ¨å¸¸é‡æ± çš„å…¥å£éœ€è¦æ”¾ç½®ä¸€é¡¹u2ç±»å‹çš„æ•°æ®ï¼Œä»£è¡¨å®¹é‡æ± å®¹é‡è®¡æ•°å€¼(constant_pool_count)ï¼Œè¿™ä¸ªå®¹é‡è®¡æ•°ä»1è€Œä¸æ˜¯0å¼€å§‹ã€‚ å¸¸é‡æ± ä¸­ä¸»è¦å­˜æ”¾ä¸¤å¤§ç±»å¸¸é‡:å­—é¢é‡(Literal)å’Œç¬¦å·å¼•ç”¨(Symbolic Reference)ã€‚å­—é¢é‡ æ¯”è¾ƒæ¥è¿‘Javaè¯­è¨€å±‚é¢çš„å¸¸é‡æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ã€å£°æ˜ä¸ºfinalçš„å¸¸é‡å€¼ç­‰ã€‚è€Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬ä¸‹é¢ä¸‰ç±»å¸¸é‡: ç±»å’Œæ¥å£çš„å…¨é™å®šå å­—æ®µçš„åç§°å’Œæè¿°ç¬¦ æ–¹æ³•çš„åç§°å’Œæè¿°ç¬¦ JDK1.7ä¸­ï¼Œæ€»å…±æœ‰14ç§ç±»å‹çš„å¸¸é‡ï¼Œæ¯ç§å¸¸é‡éƒ½æ˜¯è¡¨ç±»å‹çš„æ•°æ®é¡¹ã€‚è¿™14ç§è¡¨éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ ç‚¹ï¼Œå°±æ˜¯è¡¨å¼€å§‹çš„ç¬¬ä¸€ä½æ˜¯ä¸€ä¸ªu1ç±»å‹çš„æ ‡å¿—ä½ï¼Œä»£è¡¨å½“å‰å¸¸é‡å±äºå“ªç§å¸¸é‡ç±»å‹ã€‚è¿™14ç§å¸¸é‡ç±»å‹ä»£è¡¨çš„å…·ä½“å«ä¹‰è§ä¸‹è¡¨: è®¿é—®æ ‡å¿—(access_flags)å¸¸é‡æ± ç»“æŸä¹‹åï¼Œç´§æ¥ç€çš„ä¸¤ä¸ªå­—èŠ‚ä»£è¡¨è®¿é—®æ ‡å¿—ï¼Œè¿™ä¸ªæ ‡å¿—ç”¨äºè¯†åˆ«ä¸€äº›ç±»æˆ–è€…æ¥å£å±‚æ¬¡çš„è®¿é—®ä¿¡æ¯ï¼ŒåŒ…æ‹¬:è¿™ä¸ªClassæ˜¯æ¥å£è¿˜æ˜¯ç±»;æ˜¯å¦è¢«å®šä¹‰ä¸ºpublicç±»å‹;æ˜¯å¦å®šä¹‰ä¸ºabstractç±»å‹;å¦‚ æœæ˜¯ç±»çš„è¯ï¼Œæ˜¯å¦è¢«å£°æ˜ä¸ºfinalç­‰ã€‚ ç±»ç´¢å¼•(this_class)ã€çˆ¶ç±»ç´¢å¼•(super_class)ä¸æ¥å£ç´¢å¼•é›†åˆ(interfaces)ç±»ç´¢å¼•ã€çˆ¶ç±»ç´¢å¼•å’Œæ¥å£ç´¢å¼•é›†åˆéƒ½æŒ‰é¡ºåºæ’åˆ—ä»£è®¿é—®æ ‡å¿—ä¹‹åï¼Œç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„å…¨é™ å®šåï¼Œçˆ¶ç±»ç´¢å¼•ç”¨äºç¡®å®šè¿™ä¸ªç±»çš„çˆ¶ç±»çš„å…¨é™å®šåã€‚ç”±äºJavaè¯­è¨€ä¸å…è®¸å¤šç»§æ‰¿ï¼Œå› æ­¤çˆ¶ç±»ç´¢å¼•åªæœ‰ä¸€ä¸ªï¼Œé™¤äº†java.lang.Objectä¹‹å¤–ï¼Œæ‰€æœ‰çš„Javaç±»éƒ½æœ‰çˆ¶ç±»ï¼Œå› æ­¤é™¤äº†Objectå¤–ï¼Œæ‰€æœ‰Javaç±»çš„çˆ¶ç±»ç´¢å¼•éƒ½ä¸ä¸º0ã€‚ ç±»ç´¢å¼•å’Œçˆ¶ç±»ç´¢å¼•å‡æ˜¯u2ç±»å‹çš„æ•°æ®ï¼Œå®ƒä»¬å„è‡ªæŒ‡å‘ä¸€ä¸ªç±»å‹ä¸ºCONSTANT_Class_infoç±»å‹çš„å¸¸ é‡ï¼Œé€šè¿‡CONSTANT_Class_infoç±»å‹çš„å¸¸é‡ä¸­çš„ç´¢å¼•å€¼å¯ä»¥æ‰¾åˆ°å®šä¹‰åœ¨CONSTATN_Utf8_infoç±»å‹ çš„å¸¸é‡ä¸­çš„å…¨é™å®šåå­—ç¬¦ä¸²ã€‚è¯¥æŸ¥æ‰¾è¿‡ç¨‹å¯ç”¨ä¸‹å›¾è¡¨ç¤º æ¥å£ç´¢å¼•é›†åˆç”¨æ¥æè¿°è¿™ä¸ªç±»å®ç°äº†å“ªäº›æ¥å£ï¼Œå®ƒæ˜¯ä¸€ç»„u2ç±»å‹çš„æ•°æ®çš„é›†åˆï¼Œé›†åˆä¸­çš„ç¬¬ä¸€é¡¹ æ˜¯æ¥å£è®¡æ•°å™¨ï¼Œè¡¨ç¤ºç´¢å¼•è¡¨çš„å®¹é‡ã€‚å¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®ç°ä»»ä½•æ¥å£ï¼Œåˆ™è¯¥è®¡æ•°å™¨å€¼ä¸º0ã€‚ å­—æ®µè¡¨é›†åˆ(fields)æ–¹æ³•è¡¨é›†åˆ(methods)å±æ€§è¡¨é›†åˆ(attributes)","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"http://airshu.github.io/tags/JVM/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è™šæ‹Ÿæœº","slug":"Java/è™šæ‹Ÿæœº","permalink":"http://airshu.github.io/categories/Java/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}]},{"title":"jenv","date":"2022-03-08T02:25:29.680Z","path":"wiki/Java/æœªåˆ†ç±»/jenv/","text":"æ¦‚è¿°æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦åœ¨ç”µè„‘ä¸­å®‰è£…å¤šä¸ªJavaç¯å¢ƒï¼Œåœ¨ä¸åŒçš„åœºæ™¯åˆ‡æ¢ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹JAVA_HOMEã€PATHç­‰ç¯å¢ƒå˜é‡ã€‚æ¯æ¬¡æ”¹èµ·æ¥å°±å¾ˆç¹çã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªshellå‘½ä»¤ï¼Œæ¥åŠ¨æ€åˆ‡æ¢ä¸åŒçš„ç‰ˆæœ¬ã€‚jenvå°±æ˜¯å¸®æˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ jenvæ”¯æŒåœ¨å½“å‰shellã€æ–‡ä»¶å¤¹ã€å…¨å±€åˆ‡æ¢ä¸åŒçš„Javaç‰ˆæœ¬ å®‰è£…å’Œé…ç½®å®‰è£…1brew install jenv é…ç½®æˆ‘ä»¬ä¸€èˆ¬å…ˆä¸‹è½½å¯¹åº”çš„JDK&#x2F;JREçš„å‹ç¼©åŒ…ï¼Œç„¶åå³å¯è¿›è¡Œé…ç½®ã€‚ 123456789101112131415161718192021222324252627282930313233343536è¿è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ ç¯å¢ƒå˜é‡export PATH=&quot;$HOME/.jenv/bin:$PATH&quot; eval &quot;$(jenv init -)&quot;æ·»åŠ JAVA_HOMEï¼Œæ¯æ¬¡åˆ‡æ¢ååªéœ€è¦sourceä¸€ä¸‹ï¼Œå°±ä¼šæ›´æ–°æ­¤å˜é‡export JAVA_HOME=&quot;$HOME/.jenv/versions/`jenv version-name`&quot;# æ·»åŠ javaç‰ˆæœ¬jenv add /Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Homejenv versions # æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬ system 1.8* 1.8.0.252 (set by /Users/loneqd/.java-version) 1.8.0.51 16.0 16.0.1 openjdk64-1.8.0.252 openjdk64-16.0.1 oracle64-1.8.0.51# åˆ‡æ¢å½“å‰ç›®å½•ä¸‹çš„jdkç‰ˆæœ¬ï¼Œå¦‚åˆ‡æ¢å½“å‰ç›®å½•ä¸‹çš„ç‰ˆæœ¬ä¸º1.6jenv local 1.8# å…¨å±€åˆ‡æ¢ç‰ˆæœ¬ï¼Œå¦‚ä¸‹åˆ‡æ¢ä¸º1.7jenv global 1.7# å½“å‰shellä¸­ä½¿ç”¨æŸä¸ªç‰ˆæœ¬jenv shell 1.6# æŸ¥çœ‹å½“å‰ä½¿ç”¨ç‰ˆæœ¬jenv version å‚è€ƒ Java8ç›¸å…³ç¯å¢ƒä¸‹è½½åœ°å€ https://www.jenv.be/ https://github.com/jenv/jenv/issues/44","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"æœªåˆ†ç±»","slug":"Java/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Java/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"volatileè¯¦è§£äºŒ","date":"2022-03-08T02:25:29.680Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/volatileè¯¦è§£äºŒ/","text":"","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"çº¿ç¨‹é—´é€šè®¯æ–¹å¼","date":"2022-03-08T02:25:29.680Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/çº¿ç¨‹é—´é€šè®¯æ–¹å¼/","text":"ä»€ä¹ˆæ˜¯çº¿ç¨‹å®‰å…¨ï¼Ÿçº¿ç¨‹çš„å·¥ä½œåŸç†ï¼Œjvmæœ‰ä¸€ä¸ªmain memoryï¼Œè€Œæ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„working memoryï¼Œä¸€ä¸ªçº¿ç¨‹å¯¹ä¸€ä¸ªvariableè¿›è¡Œæ“ä½œæ—¶ï¼Œéƒ½è¦åœ¨è‡ªå·±çš„working memoryé‡Œé¢å»ºç«‹ä¸€ä¸ªcopyï¼Œæ“ä½œå®Œä¹‹åå†å†™å…¥main memoryã€‚å¤šä¸ªçº¿ç¨‹åŒæ—¶æ“ä½œåŒä¸€ä¸ªvariableï¼Œå°±å¯èƒ½ä¼šå‡ºç°ä¸å¯é¢„çŸ¥çš„ç»“æœã€‚ è€Œç”¨synchronizedçš„å…³é”®æ˜¯å»ºç«‹ä¸€ä¸ªmonitorï¼Œè¿™ä¸ªmonitorå¯ä»¥æ˜¯è¦ä¿®æ”¹çš„variableä¹Ÿå¯ä»¥å…¶ä»–ä½  è®¤ä¸ºåˆé€‚çš„objectæ¯”å¦‚methodï¼Œç„¶åé€šè¿‡ç»™è¿™ä¸ªmonitoråŠ é”æ¥å®ç°çº¿ç¨‹å®‰å…¨ï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨è·å¾—è¿™ä¸ªé”ä¹‹åï¼Œè¦æ‰§è¡Œå®Œloadåˆ°workingmemory -&gt; use&amp;assign -&gt; storeåˆ°mainmemory çš„è¿‡ç¨‹ï¼Œæ‰ä¼šé‡Šæ”¾å®ƒå¾—åˆ°çš„é”ã€‚è¿™æ ·å°±å®ç°äº†æ‰€è°“çš„çº¿ç¨‹å®‰å…¨ã€‚ çº¿ç¨‹å®‰å…¨å°±æ˜¯è¯´å¤šçº¿ç¨‹è®¿é—®åŒä¸€å—å†…å­˜ï¼Œä¸ä¼šäº§ç”Ÿä¸ç¡®å®šçš„ç»“æœã€‚ç¼–å†™çº¿ç¨‹å®‰å…¨çš„ä»£ç æ˜¯ä¾é çº¿ç¨‹åŒæ­¥ã€‚ CPUæ—¶é—´ç‰‡è½®è½¬æœºåˆ¶cpu ç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ªâ€œæ—¶é—´æ®µâ€ï¼Œè¿™ä¸ªæ—¶é—´æ®µå°±å«åšè¿™ä¸ªè¿›ç¨‹çš„â€œæ—¶é—´ç‰‡â€ï¼Œè¿™ä¸ªæ—¶é—´ç‰‡å°±æ˜¯è¿™ä¸ªè¿›ç¨‹å…è®¸è¿è¡Œçš„æ—¶é—´ï¼Œå¦‚æœå½“è¿™ä¸ªè¿›ç¨‹çš„æ—¶é—´ç‰‡æ®µç»“æŸï¼Œæ“ä½œç³»ç»Ÿå°±ä¼šæŠŠåˆ†é…ç»™è¿™ä¸ªè¿›ç¨‹çš„ cpu å‰¥å¤ºï¼Œåˆ†é…ç»™å¦å¤–ä¸€ä¸ªè¿›ç¨‹ã€‚å¦‚æœè¿›ç¨‹åœ¨æ—¶é—´ç‰‡è¿˜æ²¡ç»“æŸçš„æƒ…å†µä¸‹é˜»å¡äº†ï¼Œæˆ–è€…è¯´è¿›ç¨‹è·‘å®Œäº†ï¼Œcpu å°±ä¼šè¿›è¡Œåˆ‡æ¢ã€‚cpu åœ¨ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„åˆ‡æ¢ç§°ä¸ºâ€œä¸Šä¸‹æ–‡åˆ‡æ¢â€ï¼Œä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯éœ€è¦æ—¶é—´çš„ï¼Œå¤§çº¦éœ€è¦èŠ±è´¹ 5000~20000(5 æ¯«ç§’åˆ° 20 æ¯«ç§’ï¼Œè¿™ä¸ªèŠ±è´¹çš„æ—¶é—´æ˜¯ç”±æ“ä½œç³»ç»Ÿå†³å®š)ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œå°½ç®¡æˆ‘ä»¬å¹³æ—¶æ„Ÿè§‰ä¸åˆ°ã€‚æ‰€ä»¥åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¦æ³¨æ„ä¸Šä¸‹æ–‡åˆ‡æ¢(ä¸¤ä¸ªè¿›ç¨‹ä¹‹é—´çš„åˆ‡æ¢)å¯¹æˆ‘ä»¬ç¨‹åºæ€§èƒ½çš„å½±å“ã€‚ æ­»é”é€ æˆæ­»é”çš„å››ä¸ªæ¡ä»¶ï¼š äº’æ–¥æ¡ä»¶ï¼šèµ„æºåªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨,å¦‚æœå…¶å®ƒçº¿ç¨‹è¯·æ±‚è·å–è¯¥èµ„æº,åˆ™è¯·æ±‚è€…åªèƒ½ç­‰å¾…,ç›´åˆ°å ç”¨èµ„æºçš„çº¿ç¨‹é‡Šæ”¾è¯¥èµ„æº. è¯·æ±‚å¹¶æŒæœ‰æ¡ä»¶ï¼šæŒ‡ä¸€ä¸ªçº¿ç¨‹å·²ç»æŒæœ‰äº†è‡³å°‘ä¸€ä¸ªèµ„æº,ä½†åˆæå‡ºäº†æ–°çš„èµ„æºè¯·æ±‚,è€Œæ–°çš„èµ„æºå·²è¢«å…¶ä»–çº¿ç¨‹å  ç”¨,æ‰€ä»¥å½“å‰çº¿ç¨‹ä¼šè¢«é˜»å¡,ä½†é˜»å¡çš„åŒæ—¶ä¸é‡Šæ”¾è‡ªå·±è·å–çš„èµ„æº. ä¸å¯å‰¥å¤ºæ¡ä»¶ï¼šè·å–åˆ°çš„èµ„æºåœ¨è‡ªå·±ä½¿ç”¨å®Œä¹‹å‰ä¸èƒ½è¢«å…¶ä»–çº¿ç¨‹æŠ¢å ,åªèƒ½åœ¨ä½¿ç”¨å®Œä¹‹åé‡Šæ”¾. ç¯è·¯ç­‰å¾…æ¡ä»¶ï¼šå‘ç”Ÿæ­»é”çš„æ—¶å€™å¿…ç„¶å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹-èµ„æºçš„ç¯å½¢é“¾,å³çº¿ç¨‹é›†åˆ{T0,T1,T2,â€¦Tn}ä¸­çš„T0æ­£åœ¨ç­‰å¾… ä¸€ä¸ªT1å ç”¨çš„èµ„æº,T1æ­£åœ¨ç­‰å¾…T2å ç”¨çš„èµ„æº,â€¦Tnæ­£åœ¨ç­‰å¾…T1å ç”¨çš„èµ„æº é€šä¿¡æ–¹å¼ å…±äº«è¿›ç¨‹çš„å˜é‡ ThreadLocal åŒæ­¥é”ã€ä¿¡å·é‡ï¼ˆSynchronizeã€Semaphoreã€Lockï¼‰","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"ThreadLocalåŸç†","date":"2022-03-08T02:25:29.679Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/ThreadLocalåŸç†/","text":"ThreadLocalæ˜¯ä¸€ä¸ªçº¿ç¨‹å†…éƒ¨çš„æ•°æ®å­˜å‚¨ç±»ï¼Œé€šè¿‡å®ƒå¯ä»¥åœ¨æŒ‡å®šçš„çº¿ç¨‹ä¸­å­˜å‚¨æ•°æ®ï¼Œæ•°æ®å­˜å‚¨ä»¥åï¼Œåªæœ‰åœ¨æŒ‡å®šçº¿ç¨‹ä¸­å¯ä»¥è·å–åˆ°å­˜å‚¨çš„æ•°æ®ï¼Œå¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´åˆ™æ— æ³•è·å–åˆ°æ•°æ®ã€‚ æºç åˆ†æThreadä¸­æœ‰ä¸€ä¸ªæˆå‘˜å˜é‡ï¼š 1ThreadLocal.ThreadLocalMap threadLocals = null; ThreadLocalçš„setæ–¹æ³•ä¸­ï¼Œå¦‚æœå½“å‰Threadçš„threadLocalsæœ‰å€¼ï¼Œåˆ™è®¾ç½®ï¼Œæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ThreadLocalMapã€‚ 123456789101112131415161718/** * Sets the current thread&#x27;s copy of this thread-local variable * to the specified value. Most subclasses will have no need to * override this method, relying solely on the &#123;@link #initialValue&#125; * method to set the values of thread-locals. * * @param value the value to be stored in the current thread&#x27;s copy of * this thread-local. */public void set(T value) &#123; Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) map.set(this, value); else createMap(t, value);&#125; ThreadLocalçš„getæ–¹æ³•ä¸­ï¼Œä»å½“å‰çº¿ç¨‹çš„threadLocalsæ‹¿mapï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œæ²¡æœ‰åˆ™åˆå§‹åŒ–å€¼ã€‚ 12345678910111213141516171819202122/** * Returns the value in the current thread&#x27;s copy of this * thread-local variable. If the variable has no value for the * current thread, it is first initialized to the value returned * by an invocation of the &#123;@link #initialValue&#125; method. * * @return the current thread&#x27;s value of this thread-local */public T get() &#123; Thread t = Thread.currentThread(); ThreadLocalMap map = getMap(t); if (map != null) &#123; ThreadLocalMap.Entry e = map.getEntry(this); if (e != null) &#123; @SuppressWarnings(&quot;unchecked&quot;) T result = (T)e.value; return result; &#125; &#125; return setInitialValue();&#125; å€¼çš„ä¿®æ”¹éƒ½æ˜¯åœ¨è‡ªå·±çº¿ç¨‹ä¸­æ“ä½œçš„ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ ä½¿ç”¨åœºæ™¯ æ¯ä¸ªçº¿ç¨‹éœ€è¦æœ‰è‡ªå·±å•ç‹¬çš„å®ä¾‹ å®ä¾‹éœ€è¦åœ¨å¤šä¸ªæ–¹æ³•ä¸­å…±äº«ï¼Œä½†ä¸å¸Œæœ›è¢«å¤šçº¿ç¨‹å…±äº« Androidä¸­Hander 1234567static final ThreadLocal&lt;Looper&gt; sThreadLocal = new ThreadLocal&lt;Looper&gt;();private static void prepare(boolean quitAllowed) &#123; if (sThreadLocal.get() != null) &#123; throw new RuntimeException(&quot;Only one Looper may be created per thread&quot;); &#125; sThreadLocal.set(new Looper(quitAllowed));&#125; å‚è€ƒ http://www.jasongj.com/java/threadlocal/ https://droidyue.com/blog/2016/03/13/learning-threadlocal-in-java/","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"ThreadPoolExecutor","date":"2022-03-08T02:25:29.679Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/ThreadPoolExecutor/","text":"å‚æ•°1234public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler); corePoolSize: çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹çš„æ•°é‡ï¼› maximumPoolSize: çº¿ç¨‹æ± å¯åˆ›å»ºçš„æœ€å¤§çº¿ç¨‹æ•°é‡ï¼› keepAliveTime: å½“çº¿ç¨‹æ•°é‡è¶…è¿‡äº†corePoolSizeæŒ‡å®šçš„çº¿ç¨‹æ•°ï¼Œå¹¶ä¸”ç©ºé—²çº¿ç¨‹ç©ºé—²çš„æ—¶é—´è¾¾åˆ°å½“å‰å‚æ•°æŒ‡å®šçš„æ—¶é—´æ—¶è¯¥çº¿ç¨‹å°±ä¼šè¢«é”€æ¯ï¼Œå¦‚æœè°ƒç”¨è¿‡allowCoreThreadTimeOut(boolean value)æ–¹æ³•å…è®¸æ ¸å¿ƒçº¿ç¨‹è¿‡æœŸï¼Œé‚£ä¹ˆè¯¥ç­–ç•¥é’ˆå¯¹æ ¸å¿ƒçº¿ç¨‹ä¹Ÿæ˜¯ç”Ÿæ•ˆçš„ï¼› allowCoreThreadTimeOutä¸ºtrue,åˆ™çº¿ç¨‹æ± æ•°é‡æœ€åé”€æ¯åˆ°0ä¸ªã€‚ allowCoreThreadTimeOutä¸ºfalse,è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°æ—¶ï¼Œè€Œä¸”ï¼ˆè¶…è¿‡æœ€å¤§å€¼æˆ–è€…timeoutï¼‰ï¼Œå°±ä¼šé”€æ¯ã€‚ unit: æŒ‡å®šäº†keepAliveTimeçš„å•ä½ï¼Œå¯ä»¥ä¸ºæ¯«ç§’ï¼Œç§’ï¼Œåˆ†ï¼Œå°æ—¶ç­‰ï¼› workQueue: å­˜å‚¨æœªæ‰§è¡Œçš„ä»»åŠ¡çš„é˜Ÿåˆ—ï¼› threadFactory: åˆ›å»ºçº¿ç¨‹çš„å·¥å‚ï¼Œå¦‚æœæœªæŒ‡å®šåˆ™ä½¿ç”¨é»˜è®¤çš„çº¿ç¨‹å·¥å‚ï¼› handler: æŒ‡å®šäº†å½“ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡ï¼Œå¹¶ä¸”æ²¡æœ‰å¯ç”¨çº¿ç¨‹æ‰§è¡Œä»»åŠ¡æ—¶å¯¹æ–°æ·»åŠ çš„ä»»åŠ¡çš„å¤„ç†ç­–ç•¥ï¼› è°ƒåº¦ç­–ç•¥å½“åˆå§‹åŒ–ä¸€ä¸ªçº¿ç¨‹æ± ä¹‹åï¼Œæ± ä¸­æ˜¯æ²¡æœ‰ä»»ä½•ç”¨æˆ·æ‰§è¡Œä»»åŠ¡çš„æ´»è·ƒçº¿ç¨‹çš„ï¼Œå½“æ–°çš„ä»»åŠ¡åˆ°æ¥æ—¶ï¼Œæ ¹æ®é…ç½®çš„å‚æ•°å…¶ä¸»è¦çš„æ‰§è¡Œä»»åŠ¡å¦‚ä¸‹ï¼š è‹¥çº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°å°äºcorePoolSizeæŒ‡å®šçš„çº¿ç¨‹æ•°æ—¶ï¼Œæ¯æ¥ä¸€ä¸ªä»»åŠ¡ï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œæ— è®ºçº¿ç¨‹æ± ä¸­æ˜¯å¦å·²æœ‰ç©ºé—²çš„çº¿ç¨‹ï¼› è‹¥å½“å‰æ‰§è¡Œçš„ä»»åŠ¡è¾¾åˆ°äº†corePoolSizeæŒ‡å®šçš„çº¿ç¨‹æ•°æ—¶ï¼Œä¹Ÿå³æ‰€æœ‰çš„æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œæ­¤æ—¶æ¥çš„æ–°ä»»åŠ¡ä¼šä¿å­˜åœ¨workQueueæŒ‡å®šçš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼› å½“å‰æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶ä¸”ä»»åŠ¡é˜Ÿåˆ—å·²æ»¡æ—¶ï¼Œä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶å€™å½“å‰æ€»å…±éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡æ•°æ˜¯(corePoolSize + workQueueSize)ï¼Œå¹¶ä¸æ˜¯åªæœ‰corePoolSizeä¸ªä»»åŠ¡ï¼› å½“æ‰€æœ‰çš„æ ¸å¿ƒçº¿ç¨‹éƒ½åœ¨æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶ä¸”ä»»åŠ¡é˜Ÿåˆ—ä¸­å­˜æ»¡äº†ä»»åŠ¡ï¼Œæ­¤æ—¶è‹¥æ–°æ¥äº†ä»»åŠ¡ï¼Œé‚£ä¹ˆçº¿ç¨‹æ± å°†ä¼šåˆ›å»ºæ–°çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼› è¿™é‡ŒworkQueueä¸»è¦æœ‰ä¸‰ç§ç±»å‹ï¼šArrayBlockingQueueã€LinkedBlockingQueueã€SynchronousQueueï¼Œç¬¬ä¸€ä¸ªæ˜¯æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œç¬¬äºŒä¸ªæ˜¯æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä¸ºå…¶æŒ‡å®šç•Œé™å¤§å°ï¼Œç¬¬ä¸‰ä¸ªæ˜¯åŒæ­¥é˜Ÿåˆ—ï¼Œå¯¹äºArrayBlockingQueueï¼Œå…¶æ˜¯éœ€è¦æŒ‡å®šé˜Ÿåˆ—å¤§å°çš„ï¼Œå½“é˜Ÿåˆ—å­˜æ»¡äº†ä»»åŠ¡çº¿ç¨‹æ± å°±ä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¯¹äºLinkedBlockingQueueï¼Œå¦‚æœå…¶æŒ‡å®šç•Œé™ï¼Œé‚£ä¹ˆå’ŒArrayBlockingQueueåŒºåˆ«ä¸å¤§ï¼Œå¦‚æœå…¶ä¸æŒ‡å®šç•Œé™ï¼Œé‚£ä¹ˆå…¶ç†è®ºä¸Šæ˜¯å¯ä»¥å­˜å‚¨æ— é™é‡çš„ä»»åŠ¡çš„ï¼Œå®é™…ä¸Šèƒ½å¤Ÿå­˜å‚¨Integer.MAX_VALUEä¸ªä»»åŠ¡ï¼ˆè¿˜æ˜¯ç›¸å½“äºå¯ä»¥å­˜å‚¨æ— é™é‡çš„ä»»åŠ¡ï¼‰ï¼Œæ­¤æ—¶ç”±äºLinkedBlockingQueueæ˜¯æ°¸è¿œæ— æ³•å­˜æ»¡ä»»åŠ¡çš„ï¼Œå› è€ŒmaxPoolSizeçš„è®¾å®šå°†æ²¡æœ‰æ„ä¹‰ï¼Œä¸€èˆ¬å…¶ä¼šè®¾å®šä¸ºå’ŒcorePoolSizeç›¸åŒçš„å€¼ï¼Œå¯¹äºSynchronousQueueï¼Œå…¶å†…éƒ¨æ˜¯æ²¡æœ‰ä»»ä½•ç»“æ„å­˜å‚¨ä»»åŠ¡çš„ï¼Œå½“ä¸€ä¸ªä»»åŠ¡æ·»åŠ åˆ°è¯¥é˜Ÿåˆ—æ—¶ï¼Œå½“å‰çº¿ç¨‹å’Œåç»­æ·»åŠ ä»»åŠ¡çš„çº¿ç¨‹éƒ½ä¼šè¢«é˜»å¡ï¼Œç›´è‡³æœ‰ä¸€ä¸ªçº¿ç¨‹ä»è¯¥é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡ï¼Œå½“å‰çº¿ç¨‹æ‰ä¼šè¢«é‡Šæ”¾ï¼Œå› è€Œå¦‚æœçº¿ç¨‹æ± ä½¿ç”¨äº†è¯¥é˜Ÿåˆ—ï¼Œé‚£ä¹ˆä¸€èˆ¬corePoolSizeéƒ½ä¼šè®¾è®¡å¾—æ¯”è¾ƒå°ï¼ŒmaxPoolSizeä¼šè®¾è®¡å¾—æ¯”è¾ƒå¤§ï¼Œå› ä¸ºè¯¥é˜Ÿåˆ—æ¯”è¾ƒé€‚åˆå¤§é‡å¹¶ä¸”æ‰§è¡Œæ—¶é—´è¾ƒçŸ­çš„ä»»åŠ¡çš„æ‰§è¡Œï¼› è‹¥æ‰€æœ‰çš„çº¿ç¨‹ï¼ˆmaximumPoolSizeæŒ‡å®šçš„çº¿ç¨‹æ•°ï¼‰éƒ½åœ¨æ‰§è¡Œä»»åŠ¡ï¼Œå¹¶ä¸”ä»»åŠ¡é˜Ÿåˆ—ä¹Ÿå­˜æ»¡äº†ä»»åŠ¡æ—¶ï¼Œå¯¹äºæ–°æ·»åŠ çš„ä»»åŠ¡ï¼Œå…¶éƒ½ä¼šä½¿ç”¨handleræ‰€æŒ‡å®šçš„æ–¹å¼å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚ DiscardPolicyå’ŒDiscardOldestPolicyä¸€èˆ¬ä¸ä¼šé…åˆSynchronousQueueä½¿ç”¨ï¼Œå› ä¸ºå½“åŒæ­¥é˜Ÿåˆ—é˜»å¡äº†ä»»åŠ¡æ—¶ï¼Œè¯¥ä»»åŠ¡éƒ½ä¼šè¢«æŠ›å¼ƒï¼›å¯¹äºAbortPolicyï¼Œå› ä¸ºå¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œé‚£ä¹ˆå…¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå› è€Œä½¿ç”¨æ—¶éœ€è¦å°å¿ƒï¼›å¯¹äºCallerRunsPolicyï¼Œç”±äºå½“æœ‰æ–°çš„ä»»åŠ¡åˆ°è¾¾æ—¶ä¼šä½¿ç”¨è°ƒç”¨çº¿ç¨‹æ‰§è¡Œå½“å‰ä»»åŠ¡ï¼Œå› è€Œä½¿ç”¨æ—¶éœ€è¦è€ƒè™‘å…¶å¯¹æœåŠ¡å™¨å“åº”çš„å½±å“ï¼Œå¹¶ä¸”è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›¸å¯¹äºå…¶ä»–å‡ ä¸ªç­–ç•¥ï¼Œè¯¥ç­–ç•¥ä¸ä¼šæŠ›å¼ƒä»»åŠ¡åˆ°è¾¾çš„ä»»åŠ¡ï¼Œå› ä¸ºå¦‚æœåˆ°è¾¾çš„ä»»åŠ¡ä½¿é˜Ÿåˆ—æ»¡äº†è€Œåªèƒ½ä½¿ç”¨è°ƒç”¨çº¿ç¨‹æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œè¯´æ˜çº¿ç¨‹æ± è®¾è®¡å¾—ä¸å¤Ÿåˆç†ï¼Œå¦‚æœä»»å…¶å‘å±•ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„è°ƒç”¨çº¿ç¨‹éƒ½å¯èƒ½ä¼šè¢«éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡æ‰€é˜»å¡ï¼Œå¯¼è‡´æœåŠ¡å™¨å‡ºç°é—®é¢˜ã€‚ ç³»ç»Ÿæä¾›çš„çº¿ç¨‹æ± FixedThreadPool123456public static ExecutorService newFixedThreadPool(int nThreads) &#123; return new ThreadPoolExecutor(nThreads, nThreads, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;());&#125; ç‰¹å¾ è¿™æ˜¯ä¸€ç§çº¿ç¨‹æ•°é‡å›ºå®šçš„çº¿ç¨‹æ± ï¼Œå› ä¸ºcorePoolSizeå’ŒmaximunPoolSizeéƒ½ä¸ºç”¨æˆ·è®¾å®šçš„çº¿ç¨‹æ•°é‡nThreads keepAliveTimeä¸º0ï¼Œæ„å‘³ç€ä¸€æ—¦æœ‰å¤šä½™çš„ç©ºé—²çº¿ç¨‹ï¼Œå°±ä¼šè¢«ç«‹å³åœæ­¢æ‰ï¼Œä¸è¿‡å› ä¸ºæœ€å¤šåªæœ‰nThreadsä¸ªçº¿ç¨‹ï¼Œä¸”corePoolSizeå’ŒmaximunPoolSizeå€¼ä¸€è‡´ï¼Œæ‰€ä»¥ä¸ä¼šå‘ç”Ÿçº¿ç¨‹åœæ‰çš„æƒ…å†µï¼› é˜»å¡é˜Ÿåˆ—é‡‡ç”¨äº†LinkedBlockingQueueï¼Œå®ƒæ˜¯ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ï¼Œç”±äºé˜»å¡é˜Ÿåˆ—æ˜¯ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ï¼Œå› æ­¤æ°¸è¿œä¸å¯èƒ½æ‹’ç»ä»»åŠ¡ å¼Šç«¯ ç”±äºä½¿ç”¨çš„æ˜¯LinkedBlockingQueueæ— ç•Œé˜Ÿåˆ—ï¼Œåœ¨èµ„æºæœ‰é™çš„æ—¶å€™å®¹æ˜“å¼•èµ·OOMå¼‚å¸¸ CachedThreadPool12345public static ExecutorService newCachedThreadPool() &#123; return new ThreadPoolExecutor(0, Integer.MAX_VALUE, 60L, TimeUnit.SECONDS, new SynchronousQueue&lt;Runnable&gt;());&#125; ç‰¹å¾ corePoolSizeä¸º0ï¼ŒmaximumPoolSizeä¸ºæ— é™å¤§ï¼Œæ„å‘³ç€çº¿ç¨‹æ•°é‡å¯ä»¥æ— é™å¤§ keepAliveTimeä¸º60Sï¼Œæ„å‘³ç€çº¿ç¨‹ç©ºé—²æ—¶é—´è¶…è¿‡60Så°±ä¼šè¢«æ€æ­» é‡‡ç”¨SynchronousQueueè£…ç­‰å¾…çš„ä»»åŠ¡ï¼Œè¿™ä¸ªé˜»å¡é˜Ÿåˆ—æ²¡æœ‰å­˜å‚¨ç©ºé—´ï¼Œè¿™æ„å‘³ç€åªè¦æœ‰è¯·æ±‚åˆ°æ¥ï¼Œå°±å¿…é¡»è¦æ‰¾åˆ°ä¸€æ¡å·¥ä½œçº¿ç¨‹å¤„ç†ä»–ï¼Œå¦‚æœå½“å‰æ²¡æœ‰ç©ºé—²çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆå°±ä¼šå†åˆ›å»ºä¸€æ¡æ–°çš„çº¿ç¨‹ å¼Šç«¯ å½“ä¸€ä¸ªä»»åŠ¡æäº¤æ—¶ï¼ŒcorePoolSizeä¸º0ä¸åˆ›å»ºæ ¸å¿ƒçº¿ç¨‹ï¼ŒSynchronousQueueæ˜¯ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ç†è§£ä¸ºé˜Ÿåˆ—æ°¸è¿œæ˜¯æ»¡çš„ï¼Œå› æ­¤æœ€ç»ˆä¼šåˆ›å»ºéæ ¸å¿ƒçº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚ å¯¹äºéæ ¸å¿ƒçº¿ç¨‹ç©ºé—²60sæ—¶å°†è¢«å›æ”¶ã€‚å› ä¸ºInteger.MAX_VALUEéå¸¸å¤§ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯å¯ä»¥æ— é™åˆ›å»ºçº¿ç¨‹çš„ï¼Œåœ¨èµ„æºæœ‰é™çš„æƒ…å†µä¸‹å®¹æ˜“å¼•èµ·OOMå¼‚å¸¸ SingleThreadExecutor1234567public static ExecutorService newSingleThreadExecutor() &#123; return new FinalizableDelegatedExecutorService (new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new LinkedBlockingQueue&lt;Runnable&gt;()));&#125; ç‰¹å¾ åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œä½¿ç”¨äº†æ— ç•Œé˜Ÿåˆ—LinkedBlockingQueueï¼ŒæŸç§æ„ä¹‰ä¸Šç­‰åŒäºnewFixedThreadPool(1) ScheduledThreadPool12345public ScheduledThreadPoolExecutor(int corePoolSize) &#123; super(corePoolSize, Integer.MAX_VALUE, DEFAULT_KEEPALIVE_MILLIS, MILLISECONDS, new DelayedWorkQueue());&#125; ç‰¹å¾ ScheduledThreadPoolExecutorç»§æ‰¿è‡ªThreadPoolExecutorã€‚èƒ½å¤Ÿå»¶æ—¶è°ƒåº¦ä»»åŠ¡æˆ–è€…å‘¨æœŸæ€§è°ƒåº¦ä»»åŠ¡ å‚è€ƒ https://juejin.cn/post/6844903542965157901 https://blog.csdn.net/kusedexingfu/article/details/107374172","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"ThreadPoolExecutoråŸç†åˆ†æ","date":"2022-03-08T02:25:29.679Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/ThreadPoolExecutoråŸç†åˆ†æ/","text":"çº¿ç¨‹æ± çŠ¶æ€1234567private final AtomicInteger ctl = new AtomicInteger(ctlOf(RUNNING, 0));// runState is stored in the high-order bitsprivate static final int RUNNING = -1 &lt;&lt; COUNT_BITS;private static final int SHUTDOWN = 0 &lt;&lt; COUNT_BITS;private static final int STOP = 1 &lt;&lt; COUNT_BITS;private static final int TIDYING = 2 &lt;&lt; COUNT_BITS;private static final int TERMINATED = 3 &lt;&lt; COUNT_BITS; å½“åˆ›å»ºçº¿ç¨‹æ± åï¼Œåˆå§‹æ—¶ï¼Œçº¿ç¨‹æ± å¤„äº RUNNING çŠ¶æ€;å¦‚æœè°ƒç”¨äº† shutdown()æ–¹æ³•ï¼Œåˆ™çº¿ç¨‹æ± å¤„äº SHUTDOWN çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹æ± ä¸ èƒ½å¤Ÿæ¥å—æ–°çš„ä»»åŠ¡ï¼Œå®ƒä¼šç­‰å¾…æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•;å¦‚æœè°ƒç”¨äº† shutdownNow()æ–¹æ³•ï¼Œåˆ™çº¿ç¨‹æ± å¤„äº STOP çŠ¶æ€ï¼Œæ­¤æ—¶çº¿ç¨‹æ± ä¸èƒ½ æ¥å—æ–°çš„ä»»åŠ¡ï¼Œå¹¶ä¸”ä¼šå»å°è¯•ç»ˆæ­¢æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡;å½“çº¿ç¨‹æ± å¤„äº SHUTDOWN æˆ– STOP çŠ¶æ€ï¼Œå¹¶ä¸”æ‰€æœ‰å·¥ä½œçº¿ç¨‹å·²ç»é”€æ¯ï¼Œä»»åŠ¡ç¼“ å­˜é˜Ÿåˆ—å·²ç»æ¸…ç©ºæˆ–æ‰§è¡Œç»“æŸåï¼Œçº¿ç¨‹æ± è¢«è®¾ç½®ä¸º TERMINATED çŠ¶æ€ã€‚ ä»»åŠ¡çš„æ‰§è¡Œ1234567891011121314private final BlockingQueue&lt;Runnable&gt; workQueue;//ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼Œç”¨æ¥å­˜æ”¾ç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡private final ReentrantLock mainLock = new ReentrantLock();//çº¿ç¨‹æ± çš„ä¸»è¦çŠ¶æ€é”ï¼Œå¯¹çº¿ç¨‹æ± çŠ¶æ€(æ¯”å¦‚çº¿ç¨‹æ± å¤§å°ã€runState ç­‰çš„æ”¹å˜éƒ½è¦ä½¿ç”¨è¿™ä¸ªé”)private final HashSet&lt;Worker&gt; workers = new HashSet&lt;&gt;();//ç”¨æ¥å­˜æ”¾å·¥ä½œé›†private volatile long keepAliveTime;//çº¿ç¨‹å­˜è´§æ—¶é—´private volatile boolean allowCoreThreadTimeOut;//æ˜¯å¦å…è®¸ä¸ºæ ¸å¿ƒçº¿ç¨‹è®¾ç½®å­˜æ´»æ—¶é—´private volatile int corePoolSize;//æ ¸å¿ƒæ± çš„å¤§å°(å³çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®å¤§äºè¿™ ä¸ªå‚æ•°æ—¶ï¼Œæäº¤çš„ä»»åŠ¡ä¼šè¢«æ”¾è¿›ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—)private volatile int maximumPoolSize;//çº¿ç¨‹æ± æœ€å¤§èƒ½å®¹å¿çš„çº¿ç¨‹æ•°public int getPoolSize()&#123;&#125;//è·å–å½“å‰çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°é‡private volatile RejectedExecutionHandler handler;//ä»»åŠ¡æ‹’ç»ç­–ç•¥private volatile ThreadFactory threadFactory;//çº¿ç¨‹å·¥å‚ï¼Œç”¨æ¥åˆ›å»ºçº¿ç¨‹private int largestPoolSize;//ç”¨æ¥è®°å½•çº¿ç¨‹æ± ä¸­æ›¾ç»å‡ºç°è¿‡çš„æœ€å¤§çº¿ç¨‹æ•°private long completedTaskCount;//ç”¨æ¥è®°å½•å·²ç»æ‰§è¡Œå®Œæ¯•çš„ä»»åŠ¡ä¸ªæ•° æœ€æ ¸å¿ƒçš„ä»»åŠ¡æäº¤æ–¹æ³•æ˜¯ execute()æ–¹æ³•ï¼Œè™½ç„¶é€š è¿‡ submit ä¹Ÿå¯ä»¥æäº¤ä»»åŠ¡ï¼Œä½†æ˜¯å®é™…ä¸Š submit æ–¹æ³•é‡Œé¢æœ€ç»ˆè°ƒç”¨çš„è¿˜æ˜¯ execute()æ–¹æ³• 12345678910111213141516171819public void execute(Runnable command) &#123; if (command == null) throw new NullPointerException(); int c = ctl.get(); if (workerCountOf(c) &lt; corePoolSize) &#123; if (addWorker(command, true)) return; c = ctl.get(); &#125; if (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123; int recheck = ctl.get(); if (! isRunning(recheck) &amp;&amp; remove(command)) reject(command); else if (workerCountOf(recheck) == 0) addWorker(null, false); &#125; else if (!addWorker(command, false)) reject(command);&#125; åˆ†ä¸‰æ­¥ï¼š If fewer than corePoolSize threads are running, try tostart a new thread with the given command as its firsttask. The call to addWorker atomically checks runState andworkerCount, and so prevents false alarms that would addthreads when it shouldnâ€™t, by returning false. If a task can be successfully queued, then we still needto double-check whether we should have added a thread(because existing ones died since last checking) or thatthe pool shut down since entry into this method. So werecheck state and if necessary roll back the enqueuing ifstopped, or start a new thread if there are none. If we cannot queue task, then we try to add a newthread. If it fails, we know we are shut down or saturatedand so reject the task. çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹åˆå§‹åŒ–addWorkerä¸­è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ›å»ºä¸€ä¸ªWorkerï¼ŒWorkerå†…éƒ¨ä»threadFactoryä¸­è·å–Threadã€‚ åœ¨Threadçš„runæ–¹æ³•ä¸­ä¼šè°ƒç”¨getTaskï¼Œæ¥è·å–ä»»åŠ¡æ¥æ‰§è¡Œã€‚ 12345678910111213141516171819202122232425262728293031323334353637private Runnable getTask() &#123; boolean timedOut = false; // Did the last poll() time out? for (;;) &#123; int c = ctl.get(); int rs = runStateOf(c); // Check if queue empty only if necessary. if (rs &gt;= SHUTDOWN &amp;&amp; (rs &gt;= STOP || workQueue.isEmpty())) &#123; decrementWorkerCount(); return null; &#125; int wc = workerCountOf(c); // Are workers subject to culling? boolean timed = allowCoreThreadTimeOut || wc &gt; corePoolSize; if ((wc &gt; maximumPoolSize || (timed &amp;&amp; timedOut)) &amp;&amp; (wc &gt; 1 || workQueue.isEmpty())) &#123; if (compareAndDecrementWorkerCount(c)) return null; continue; &#125; try &#123; Runnable r = timed ? workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : workQueue.take(); if (r != null) return r; timedOut = true; &#125; catch (InterruptedException retry) &#123; timedOut = false; &#125; &#125;&#125; ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—åŠæ’é˜Ÿç­–ç•¥workQueueçš„ç±»å‹ä¸ºBlockingQueueï¼Œé€šå¸¸å¯ä»¥å–ä¸‹é¢ä¸‰ç§ç±»å‹: ArrayBlockingQueue:åŸºäºæ•°ç»„çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œæ­¤é˜Ÿåˆ—åˆ›å»ºæ—¶å¿…é¡»æŒ‡å®šå¤§å°; LinkedBlockingQueue:åŸºäºé“¾è¡¨çš„å…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼Œå¦‚æœåˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šæ­¤ é˜Ÿåˆ—å¤§å°ï¼Œåˆ™é»˜è®¤ä¸º Integer.MAX_VALUE; SynchronousQueue:è¿™ä¸ªé˜Ÿåˆ—æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒä¸ä¼šä¿å­˜æäº¤çš„ä»»åŠ¡ï¼Œè€Œæ˜¯å°†ç›´ æ¥æ–°å»ºä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œæ–°æ¥çš„ä»»åŠ¡ã€‚ ä»»åŠ¡æ‹’ç»ç­–ç•¥å½“çº¿ç¨‹æ± çš„ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—å·²æ»¡å¹¶ä¸”çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°ç›®è¾¾åˆ° maximumPoolSizeï¼Œå¦‚æœè¿˜æœ‰ä»»åŠ¡åˆ°æ¥å°±ä¼šé‡‡å–ä»»åŠ¡æ‹’ç»ç­–ç•¥ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹å››ç§ç­–ç•¥: ThreadPoolExecutor.AbortPolicy:ä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡º RejectedExecutionException å¼‚å¸¸ã€‚ ThreadPoolExecutor.DiscardPolicy:ä¹Ÿæ˜¯ä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚ ThreadPoolExecutor.DiscardOldestPolicy:ä¸¢å¼ƒé˜Ÿåˆ—æœ€å‰é¢çš„ä»»åŠ¡ï¼Œç„¶åé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡(é‡å¤æ­¤è¿‡ç¨‹) ThreadPoolExecutor.CallerRunsPolicy:ç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡ çº¿ç¨‹æ± çš„å…³é—­ThreadPoolExecutor æä¾›äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œç”¨äºçº¿ç¨‹æ± çš„å…³é—­ï¼Œåˆ†åˆ«æ˜¯ shutdown()å’Œ shutdownNow()ï¼Œå…¶ä¸­ï¼š shutdown():ä¸ä¼šç«‹å³ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œè€Œæ˜¯è¦ç­‰æ‰€æœ‰ä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œåæ‰ç»ˆæ­¢ï¼Œä½†å†ä¹Ÿä¸ä¼šæ¥å—æ–°çš„ä»»åŠ¡ shutdownNow():ç«‹å³ç»ˆæ­¢çº¿ç¨‹æ± ï¼Œå¹¶å°è¯•æ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå¹¶ä¸”æ¸… ç©ºä»»åŠ¡ç¼“å­˜é˜Ÿåˆ—ï¼Œè¿”å›å°šæœªæ‰§è¡Œçš„ä»»åŠ¡ çº¿ç¨‹æ± å®¹é‡çš„åŠ¨æ€è°ƒæ•´ setCorePoolSize:è®¾ç½®æ ¸å¿ƒæ± å¤§å° setMaximumPoolSize:è®¾ç½®çº¿ç¨‹æ± æœ€å¤§èƒ½åˆ›å»ºçš„çº¿ç¨‹æ•°ç›®å¤§å°","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"volatile","date":"2022-03-08T02:25:29.679Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/volatile/","text":"volatileä½œç”¨åœ¨Javaå¹¶å‘ç¼–ç¨‹ä¸­ï¼Œvolatile æ˜¯ç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªå…³é”®å­—ï¼Œå®ƒå¯ä»¥ç”¨äºä¿è¯ä¸åŒçš„çº¿ç¨‹å…±äº«ä¸€ä¸ªå˜é‡æ—¶æ¯æ¬¡éƒ½èƒ½è·å–æœ€æ–°çš„å€¼ã€‚volatileå…·æœ‰é”çš„éƒ¨åˆ†åŠŸèƒ½å¹¶ä¸”æ€§èƒ½æ¯”é”æ›´å¥½ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºè½»é‡çº§é”ã€‚ ä¸€ä¸ªå˜é‡è¢«volatileä¿®é¥°ï¼Œåˆ™ï¼š ä¿è¯äº†ä¸åŒçº¿ç¨‹å¯¹è¿™ä¸ªå˜é‡è¿›è¡Œæ“ä½œæ—¶çš„å¯è§æ€§ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†æŸä¸ªå˜é‡çš„å€¼ï¼Œè¿™æ–°å€¼å¯¹å…¶ä»–çº¿ç¨‹æ¥è¯´æ˜¯ç«‹å³å¯è§çš„ã€‚ ç¦æ­¢è¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚ ä¸€äº›åŸºæœ¬æ¦‚å¿µCPUç¼“å­˜CPUçš„è®¡ç®—é€Ÿåº¦ç›¸æ¯”å†…å­˜çš„è¯»å†™æ˜¯éå¸¸å¿«çš„ï¼Œä¸ºäº†èƒ½å……åˆ†åˆ©ç”¨CPUçš„è®¡ç®—èƒ½åŠ›ï¼Œè¿™ä¸ªæ—¶å€™ç¼“å­˜çš„æ¦‚å¿µå‡ºç°äº†ã€‚CPUç¼“å­˜æ˜¯ä½äºCPUä¸å†…å­˜ä¹‹é—´çš„ä¸´æ—¶å­˜å‚¨å™¨ï¼Œå®ƒçš„å®¹é‡æ¯”å†…å­˜å°å¾—å¤šä½†æ˜¯äº¤æ¢é€Ÿåº¦å´æ¯”å†…å­˜å¿«å¾—å¤šã€‚è€Œç¼“å­˜ä¸­çš„æ•°æ®æ˜¯å†…å­˜ä¸­çš„ä¸€å°éƒ¨åˆ†æ•°æ®ï¼Œä½†è¿™ä¸€å°éƒ¨åˆ†æ˜¯çŸ­æ—¶é—´å†…CPUå³å°†è®¿é—®çš„ï¼Œå½“CPUè°ƒç”¨å¤§é‡æ•°æ®æ—¶ï¼Œå°±å¯å…ˆä»ç¼“å­˜ä¸­è¯»å–ï¼Œä»è€ŒåŠ å¿«è¯»å–é€Ÿåº¦ã€‚ æŒ‰ç…§è¯»å–é¡ºåºä¸CPUç»“åˆçš„ç´§å¯†ç¨‹åº¦ï¼ŒCPUç¼“å­˜å¯åˆ†ä¸ºï¼š ä¸€çº§ç¼“å­˜ï¼šç®€ç§°L1 Cacheï¼Œä½äºCPUå†…æ ¸çš„æ—è¾¹ï¼Œæ˜¯ä¸CPUç»“åˆæœ€ä¸ºç´§å¯†çš„CPUç¼“å­˜ äºŒçº§ç¼“å­˜ï¼šç®€ç§°L2 Cacheï¼Œåˆ†å†…éƒ¨å’Œå¤–éƒ¨ä¸¤ç§èŠ¯ç‰‡ï¼Œå†…éƒ¨èŠ¯ç‰‡äºŒçº§ç¼“å­˜è¿è¡Œé€Ÿåº¦ä¸ä¸»é¢‘ç›¸åŒï¼Œå¤–éƒ¨èŠ¯ç‰‡äºŒçº§ç¼“å­˜è¿è¡Œé€Ÿåº¦åˆ™åªæœ‰ä¸»é¢‘çš„ä¸€åŠ ä¸‰çº§ç¼“å­˜ï¼šç®€ç§°L3 Cacheï¼Œéƒ¨åˆ†é«˜ç«¯CPUæ‰æœ‰ å½“ç³»ç»Ÿè¿è¡Œæ—¶ï¼ŒCPUæ‰§è¡Œè®¡ç®—çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š ç¨‹åºä»¥åŠæ•°æ®è¢«åŠ è½½åˆ°ä¸»å†…å­˜ æŒ‡ä»¤å’Œæ•°æ®è¢«åŠ è½½åˆ°CPUç¼“å­˜ CPUæ‰§è¡ŒæŒ‡ä»¤ï¼ŒæŠŠç»“æœå†™åˆ°é«˜é€Ÿç¼“å­˜ é«˜é€Ÿç¼“å­˜ä¸­çš„æ•°æ®å†™å›ä¸»å†…å­˜ åŸå­æ€§å³ä¸€ä¸ªæ“ä½œæˆ–è€…å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œå¹¶ä¸”æ‰§è¡Œçš„è¿‡ç¨‹ä¸ä¼šè¢«ä»»ä½•å› ç´ æ‰“æ–­ï¼Œè¦ä¹ˆå°±éƒ½ä¸æ‰§è¡Œã€‚ å¯è§æ€§æŒ‡å½“å¤šä¸ªçº¿ç¨‹è®¿é—®åŒä¸€ä¸ªå˜é‡æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†è¿™ä¸ªå˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³çœ‹å¾—åˆ°ä¿®æ”¹çš„å€¼ã€‚ volatileæ˜¯å¦‚ä½•å®ç°å¯è§æ€§çš„å‘¢ï¼Ÿ åœ¨çº¿ç¨‹å’Œä¸»å†…å­˜ä¹‹é—´æ·»åŠ äº†ä¸€æ¡æ€»çº¿ï¼Œå½“çº¿ç¨‹ä¸­çš„å˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå°†å€¼å¤åˆ¶åˆ°ä¸»å†…å­˜ï¼Œè¿™ä¸ªæ—¶å€™è¿™ä¸ªå€¼ä¼šé€šè¿‡æ€»çº¿ï¼Œæ€»çº¿å°±ä¼šé€šçŸ¥å…¶ä»–çº¿ç¨‹åšä¿®æ”¹ã€‚ æŒ‡ä»¤é‡æ’å¤„ç†å™¨ä¸ºäº†æé«˜ç¨‹åºè¿è¡Œæ•ˆç‡ï¼Œå¯èƒ½ä¼šå¯¹è¾“å…¥ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œå®ƒä¸ä¿è¯ç¨‹åºä¸­å„ä¸ªè¯­å¥çš„æ‰§è¡Œå…ˆåé¡ºåºåŒä»£ç ä¸­çš„é¡ºåºä¸€è‡´ï¼Œä½†æ˜¯å®ƒä¼šä¿è¯ç¨‹åºæœ€ç»ˆæ‰§è¡Œç»“æœå’Œä»£ç é¡ºåºæ‰§è¡Œçš„ç»“æœæ˜¯ä¸€è‡´çš„ volatileå…³é”®å­—ç¦æ­¢æŒ‡ä»¤é‡æ’åºæœ‰ä¸¤å±‚æ„æ€ï¼š å½“ç¨‹åºæ‰§è¡Œåˆ°volatileå˜é‡çš„è¯»æ“ä½œæˆ–è€…å†™æ“ä½œæ—¶ï¼Œåœ¨å…¶å‰é¢çš„æ“ä½œçš„æ›´æ”¹è‚¯å®šå…¨éƒ¨å·²ç»è¿›è¡Œï¼Œä¸”ç»“æœå·²ç»å¯¹åé¢çš„æ“ä½œå¯è§ï¼›åœ¨å…¶åé¢çš„æ“ä½œè‚¯å®šè¿˜æ²¡æœ‰è¿›è¡Œï¼› åœ¨è¿›è¡ŒæŒ‡ä»¤ä¼˜åŒ–æ—¶ï¼Œä¸èƒ½å°†åœ¨å¯¹volatileå˜é‡è®¿é—®çš„è¯­å¥æ”¾åœ¨å…¶åé¢æ‰§è¡Œï¼Œä¹Ÿä¸èƒ½æŠŠvolatileå˜é‡åé¢çš„è¯­å¥æ”¾åˆ°å…¶å‰é¢æ‰§è¡Œã€‚ æ¯”å¦‚ï¼š 12345678//xã€yä¸ºévolatileå˜é‡//flagä¸ºvolatileå˜é‡ x = 2; //è¯­å¥1y = 0; //è¯­å¥2flag = true; //è¯­å¥3x = 4; //è¯­å¥4y = -1; //è¯­å¥5 ç”±äºflagå˜é‡ä¸ºvolatileå˜é‡ï¼Œé‚£ä¹ˆåœ¨è¿›è¡ŒæŒ‡ä»¤é‡æ’åºçš„è¿‡ç¨‹çš„æ—¶å€™ï¼Œä¸ä¼šå°†è¯­å¥3æ”¾åˆ°è¯­å¥1ã€è¯­å¥2å‰é¢ï¼Œä¹Ÿä¸ä¼šè®²è¯­å¥3æ”¾åˆ°è¯­å¥4ã€è¯­å¥5åé¢ã€‚ä½†æ˜¯è¦æ³¨æ„è¯­å¥1å’Œè¯­å¥2çš„é¡ºåºã€è¯­å¥4å’Œè¯­å¥5çš„é¡ºåºæ˜¯ä¸ä½œä»»ä½•ä¿è¯çš„ã€‚ å¹¶ä¸”volatileå…³é”®å­—èƒ½ä¿è¯ï¼Œæ‰§è¡Œåˆ°è¯­å¥3æ—¶ï¼Œè¯­å¥1å’Œè¯­å¥2å¿…å®šæ˜¯æ‰§è¡Œå®Œæ¯•äº†çš„ï¼Œä¸”è¯­å¥1å’Œè¯­å¥2çš„æ‰§è¡Œç»“æœå¯¹è¯­å¥3ã€è¯­å¥4ã€è¯­å¥5æ˜¯å¯è§çš„ã€‚ ä½¿ç”¨åœºæ™¯ä¿®é¥°booleanå˜é‡123456789volatile boolean flag = false; while(!flag)&#123; doSomething();&#125; public void setFlag() &#123; flag = true;&#125; åŒé‡é”æ ¡éªŒ123456789101112131415class Singleton &#123; private static volatile Singleton instance; public static Singleton getInstance() &#123; if (instance == null) &#123; synchronized (Singleton.class) &#123; if (instance == null) &#123; instance = new Singleton(); &#125; &#125; &#125; return instance; &#125;&#125; å…¶å®é—®é¢˜å‡ºåœ¨ instance &#x3D; new Singleton(); è¿™ä¸€è¡Œï¼Œè¿™é‡Œæ˜¯åˆ›å»º Singleton å¯¹è±¡çš„åœ°æ–¹ï¼Œå…¶å®è¿™é‡Œå¯ä»¥çœ‹æˆä¸‰ä¸ªæ­¥éª¤ï¼š 123memory = allocate(); //1: åˆ†é…å¯¹è±¡çš„å†…å­˜ç©ºé—´ctorInstance(memory); //2: åˆå§‹åŒ–å¯¹è±¡instance = memoryï¼› //3: è®¾ç½® instance æŒ‡å‘åˆšåˆ†é…çš„å†…å­˜åœ°å€ ä¸Šé¢çš„ä¼ªä»£ç å¯èƒ½ä¼šè¢«é‡æ’åºã€‚ä»€ä¹ˆæ˜¯é‡æ’åºï¼Ÿç¼–è¯‘å™¨ä»¥åŠå¤„ç†å™¨æœ‰æ—¶å€™ä¼šä¸ºäº†æ‰§è¡Œçš„æ•ˆç‡æ”¹å˜ä»£ç çš„æ‰§è¡Œé¡ºåºï¼Œè¿™ä¸ªè¢«ç§°ä¸ºé‡æ’åºã€‚ä¸Šé¢çš„ä¸‰ä¸ªæ­¥éª¤å¯èƒ½ä¼šè¢«é‡æ’åºä¸ºä¸‹é¢çš„æ­¥éª¤ï¼š 1234memory = allocate(); //1: åˆ†é…å¯¹è±¡çš„å†…å­˜ç©ºé—´instance = memoryï¼› //2: è®¾ç½® instance æŒ‡å‘åˆšåˆ†é…çš„å†…å­˜åœ°å€// æ³¨æ„ï¼šæ­¤æ—¶å¯¹è±¡è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ctorInstance(memory); //3: åˆå§‹åŒ–å¯¹è±¡ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œåˆ° instance &#x3D; memory; çš„æ—¶å€™ï¼Œå¯¹è±¡è¿˜æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¹Ÿè°ƒç”¨äº† getInstance æ–¹æ³•ï¼Œå‘ç° instance å¼•ç”¨ä¸ä¸º nullï¼Œå°±ä¼šè®¤ä¸ºè¿™ä¸ªå¯¹è±¡å·²ç»åˆ›å»ºå¥½äº†ï¼Œä»è€Œä½¿ç”¨äº†æœªåˆå§‹åŒ–çš„å¯¹è±¡ã€‚ ä¸ºä»€ä¹ˆ volatile å¯ä»¥é¿å…ä¸Šé¢çš„é—®é¢˜ï¼Ÿå…¶å®æ˜¯å› ä¸º volatile ä¼šç¦æ­¢é‡æ’åºï¼Œæ–¹æ³•æ˜¯æ’å…¥äº†å†…å­˜å±éšœã€‚ è§‚å¯ŸåŠ å…¥volatileå…³é”®å­—å’Œæ²¡æœ‰åŠ å…¥volatileå…³é”®å­—æ—¶æ‰€ç”Ÿæˆçš„æ±‡ç¼–ä»£ç å‘ç°ï¼ŒåŠ å…¥volatileå…³é”®å­—æ—¶ï¼Œä¼šå¤šå‡ºä¸€ä¸ªlockå‰ç¼€æŒ‡ä»¤ã€‚ lockå‰ç¼€æŒ‡ä»¤å®é™…ä¸Šç›¸å½“äºä¸€ä¸ªå†…å­˜å±éšœï¼ˆä¹Ÿæˆå†…å­˜æ …æ ï¼‰ï¼Œå†…å­˜å±éšœä¼šæä¾›3ä¸ªåŠŸèƒ½ï¼š å®ƒç¡®ä¿æŒ‡ä»¤é‡æ’åºæ—¶ä¸ä¼šæŠŠå…¶åé¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ï¼Œä¹Ÿä¸ä¼šæŠŠå‰é¢çš„æŒ‡ä»¤æ’åˆ°å†…å­˜å±éšœçš„åé¢ï¼›å³åœ¨æ‰§è¡Œåˆ°å†…å­˜å±éšœè¿™å¥æŒ‡ä»¤æ—¶ï¼Œåœ¨å®ƒå‰é¢çš„æ“ä½œå·²ç»å…¨éƒ¨å®Œæˆï¼› å®ƒä¼šå¼ºåˆ¶å°†å¯¹ç¼“å­˜çš„ä¿®æ”¹æ“ä½œç«‹å³å†™å…¥ä¸»å­˜ï¼› å¦‚æœæ˜¯å†™æ“ä½œï¼Œå®ƒä¼šå¯¼è‡´å…¶ä»–CPUä¸­å¯¹åº”çš„ç¼“å­˜è¡Œæ— æ•ˆã€‚ å‚è€ƒ https://mp.weixin.qq.com/s/Oa3tcfAFO9IgsbE22C5TEg https://www.cnblogs.com/dolphin0520/p/3920373.html https://github.com/AdoptOpenJDK/jitwatch volatileä¸lockå‰ç¼€æŒ‡ä»¤","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"Thread","date":"2022-03-08T02:25:29.678Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/Thread/","text":"Javaä¸­çš„Threadçš„ç”¨æ³• åŒæ­¥é˜Ÿåˆ—ä¸ç­‰å¾…é˜Ÿåˆ— åŒæ­¥é˜Ÿåˆ—ï¼šæ‰€æœ‰å°è¯•è·å–è¯¥å¯¹è±¡Monitorå¤±è´¥çš„çº¿ç¨‹ï¼Œéƒ½åŠ å…¥åŒæ­¥é˜Ÿåˆ—æ’é˜Ÿè·å–é”ã€‚è°ƒç”¨äº†startã€notifyæ–¹æ³•åä¼šè¿›å…¥è¯¥é˜Ÿåˆ—ã€‚ ç­‰å¾…é˜Ÿåˆ—ï¼šå·²ç»æ‹¿åˆ°é”çš„çº¿ç¨‹åœ¨ç­‰å¾…å…¶ä»–èµ„æºæ—¶ï¼Œä¸»åŠ¨é‡Šæ”¾é”ï¼Œç½®å…¥è¯¥å¯¹è±¡ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…è¢«å”¤é†’ï¼Œå½“è°ƒç”¨notifyä¼šåœ¨ç­‰å¾…é˜Ÿåˆ—ä¸­ä»»æ„å”¤é†’ä¸€ä¸ªçº¿ç¨‹ï¼Œå°†å…¶ç½®å…¥åŒæ­¥é˜Ÿåˆ—çš„å°¾éƒ¨ï¼Œæ’é˜Ÿè·å–é”ã€‚è°ƒç”¨waitæ–¹æ³•æ—¶ï¼Œä¼šè¿›å…¥è¯¥é˜Ÿåˆ—ã€‚ API joinä¸»è¦ä½œç”¨æ˜¯çº¿ç¨‹è°ƒåº¦ï¼Œç­‰å¾…è¯¥çº¿ç¨‹å®Œæˆåï¼Œæ‰èƒ½ç»§ç»­ç”¨ä¸‹è¿è¡Œã€‚ä¸€èˆ¬ç”¨äºç­‰å¾…å¼‚æ­¥çº¿ç¨‹æ‰§è¡Œå®Œç»“æœä¹‹åæ‰èƒ½ç»§ç»­è¿è¡Œçš„åœºæ™¯ã€‚ 123Thread t1 = new Thread(new Worker(&quot;thread-1&quot;)); t1.start();t1.join();//è¦ç­‰å¾…t1æ‰§è¡Œå®Œåï¼Œå½“å‰çº¿ç¨‹æ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œ yieldæš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹å¯¹è±¡ï¼Œä¸ä¼šé‡Šæ”¾èµ„æºé”ï¼Œå’Œsleepä¸åŒçš„æ˜¯yieldæ–¹æ³•å¹¶ä¸ä¼šè®©çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œè€Œæ˜¯è®©çº¿ç¨‹é‡å›å°±ç»ªçŠ¶æ€ï¼Œå®ƒåªéœ€è¦ç­‰å¾…é‡æ–°è·å–CPUæ‰§è¡Œæ—¶é—´ï¼Œæ‰€ä»¥æ‰§è¡Œyield()çš„çº¿ç¨‹æœ‰å¯èƒ½åœ¨è¿›å…¥åˆ°å¯æ‰§è¡ŒçŠ¶æ€åé©¬ä¸Šåˆè¢«æ‰§è¡Œã€‚ notifyè¯¥æ–¹æ³•ç”¨æ¥é€šçŸ¥é‚£äº›å¯èƒ½ç­‰å¾…è¯¥å¯¹è±¡çš„å¯¹è±¡é”çš„å…¶ä»–çº¿ç¨‹ã€‚ waitå’ŒsleepåŒºåˆ« åŒºåˆ« wait() sleep() å½’å±ç±» Objectç±»å®ä¾‹æ–¹æ³• Threadç±»é™æ€æ–¹æ³• æ˜¯å¦é‡Šæ”¾é” é‡Šæ”¾é” ä¸ä¼šé‡Šæ”¾é” çº¿ç¨‹çŠ¶æ€ ç­‰å¾… ç¡çœ  ä½¿ç”¨æ—¶æœº åªèƒ½åœ¨åŒæ­¥å—(Synchronized)ä¸­ä½¿ç”¨ åœ¨ä»»ä½•æ—¶å€™ä½¿ç”¨ å”¤é†’æ¡ä»¶ å…¶ä»–çº¿ç¨‹è°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³• è¶…æ—¶æˆ–è°ƒç”¨Interrupt()æ–¹æ³• cpuå ç”¨ ä¸å ç”¨cpuï¼Œç¨‹åºç­‰å¾…nç§’ å ç”¨cpuï¼Œç¨‹åºç­‰å¾…nç§’ interruptThreadç±»çš„sleep(),wait()ç­‰æ–¹æ³•ï¼Œåœ¨æ¥æ”¶åˆ°interrupt()æ–¹æ³•ä¸­æ–­æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸ï¼ŒåŒæ—¶ä¼šå°†ä¸­æ–­æ ‡å¿—ç½®ä¸ºfalse,å¦‚æœç¡®å®éœ€è¦ä¸­æ–­è¯¥çº¿ç¨‹ï¼Œåˆ™åº”è¯¥åœ¨æ•æ‰åˆ°å¼‚å¸¸åï¼Œç»§ç»­è°ƒç”¨interrupt()æ–¹æ³•è¿›è¡Œä¸­æ–­ã€‚ 123456789101112131415161718192021222324//ä¸ºä»€ä¹ˆä¸åœ¨å¼‚å¸¸æ—¶ç›´æ¥ä¸­æ–­çº¿ç¨‹å‘¢?ä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢çº¿ç¨‹çš„èµ„æºæ²¡æœ‰å¾—åˆ°é‡Šæ”¾è€Œä¸­æ–­äº†çº¿ç¨‹public class UserThread extends Thread &#123; public void run() &#123; while (!isInterrupt()) &#123; try &#123; Thread.sleep(1000); &#125; catch (InterruptedException e) &#123; System.out.println(Thread.currentThread().getName + &quot; Exception,interrupt flag is&quot; + isInterrupted()); //é‡Šæ”¾èµ„æº doRelease(); interrupt(); e.printStackTrace(); &#125; System.out.println(Thread.currentThread().getName + &quot; runing&quot;); &#125; System.out.println(Thread.currentThread().getName + &quot; interrupt flag is &quot; + isInterrupted()); &#125; public static void main(String args) &#123; UserThread thread = new UserThread(); thread.start(); Thread.sleep(30); thread.interrupt(); &#125;&#125; å‚è€ƒ æ·±å…¥ç†è§£çº¿ç¨‹é€šä¿¡","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"Synchronized","date":"2022-03-08T02:25:29.677Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/Synchronized/","text":"å‰è¨€åœ¨å­¦ä¹ synchronizedä¹‹å‰ï¼Œåº”è¯¥å…ˆäº†è§£å¤šçº¿ç¨‹çš„æœºåˆ¶å’Œé”çš„æ¦‚å¿µï¼Œè¯·å…ˆé˜…è¯»ä»¥ä¸‹æ–‡ç« ï¼š Javaé” Javaå¤šçº¿ç¨‹ ä½¿ç”¨æ–¹å¼ åŒæ­¥æ™®é€šæ–¹æ³•ï¼Œé”çš„æ˜¯å½“å‰å¯¹è±¡thisã€‚ 1234567891011121314151617181920public class SynchronizedTest &#123; public synchronized void sayHello()&#123; &#125;&#125;//å¯¹åº”å­—èŠ‚ç  Compiled from &quot;SynchronizedTest.java&quot; public class com.myth.SynchronizedTest &#123; public com.myth.SynchronizedTest(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return public synchronized void sayHello(); Code: 0: return &#125; åŒæ­¥é™æ€æ–¹æ³•ï¼Œé”çš„æ˜¯å½“å‰ Class å¯¹è±¡ã€‚ 12345678910111213141516171819public class SynchronizedTest &#123; public synchronized static void sayHello()&#123; &#125;&#125;//å¯¹åº”å­—èŠ‚ç public class com.myth.SynchronizedTest &#123;public com.myth.SynchronizedTest(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: returnpublic static synchronized void sayHello(); Code: 0: return&#125; åŒæ­¥å—ï¼Œé”çš„æ˜¯ () ä¸­çš„å¯¹è±¡ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940public class SynchronizedTest &#123; private String words; public void sayHello()&#123; synchronized(words)&#123; &#125; &#125;&#125;//å¯¹åº”å­—èŠ‚ç  Compiled from &quot;SynchronizedTest.java&quot; public class com.myth.SynchronizedTest &#123; public com.myth.SynchronizedTest(); Code: 0: aload_0 1: invokespecial #1 // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V 4: return public void sayHello(); Code: 0: aload_0 1: getfield #2 // Field words:Ljava/lang/String; 4: dup 5: astore_1 6: monitorenter 7: aload_1 8: monitorexit 9: goto 17 12: astore_2 13: aload_1 14: monitorexit 15: aload_2 16: athrow 17: return Exception table: from to target type 7 9 12 any 12 15 12 any &#125; é€šè¿‡æŸ¥é˜…å­—èŠ‚ç ï¼ˆjavap -c XXX.classï¼‰å¯çŸ¥ï¼Œsynchronizedä¿®é¥°å¯¹è±¡æ—¶ï¼Œä½¿ç”¨monitorenterã€monitorexitæ¥å®ç°åŒæ­¥æ“ä½œï¼Œä¿®é¥°æ–¹æ³•æ—¶ç½‘ç»œä¸Šå¾ˆå¤šèµ„æºéƒ½è¯´ä½¿ç”¨ACC_SYNCHRONIZEDæ¥å®ç°åŒæ­¥ï¼ŒACC_SYNCHRONIZEDå†…éƒ¨éšå¼çš„è°ƒç”¨monitorenterã€monitorexitï¼Œå¯è‡ªå·±æŸ¥çœ‹çš„å­—èŠ‚ç å´æ²¡æœ‰çœ‹åˆ°ï¼Œä¸çŸ¥é“å•¥åŸå› ï¼ŒğŸ¤·â€ åº•å±‚åŸç†å¯¹è±¡å¤´æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªJavaç±»ï¼Œç¼–è¯‘åä¼šç”Ÿæˆ.classæ–‡ä»¶ï¼Œå½“ç±»åŠ è½½å™¨å°†classæ–‡ä»¶åŠ è½½åˆ°jvmæ—¶ï¼Œä¼šç”Ÿæˆä¸€ä¸ªKlassç±»å‹çš„å¯¹è±¡(c++)ï¼Œç§°ä¸ºç±»æè¿°å…ƒæ•°æ®ï¼Œå­˜å‚¨åœ¨æ–¹æ³•åŒºä¸­ï¼Œå³jdk1.8ä¹‹åçš„å…ƒæ•°æ®åŒºã€‚å½“ä½¿ç”¨newåˆ›å»ºå¯¹è±¡æ—¶ï¼Œå°±æ˜¯æ ¹æ®ç±»æè¿°å…ƒæ•°æ®Klassåˆ›å»ºçš„å¯¹è±¡oopï¼Œå­˜å‚¨åœ¨å †ä¸­ã€‚æ¯ä¸ªjavaå¯¹è±¡éƒ½æœ‰ç›¸åŒçš„ç»„æˆéƒ¨åˆ†ï¼Œç§°ä¸ºå¯¹è±¡å¤´ã€‚ å¯¹è±¡å¤´ Mark Wordï¼ˆæ ‡è®°å­—æ®µï¼‰ï¼šé»˜è®¤å­˜å‚¨å¯¹è±¡çš„HashCodeï¼Œåˆ†ä»£å¹´é¾„å’Œé”æ ‡å¿—ä½ä¿¡æ¯ã€‚å®ƒä¼šæ ¹æ®å¯¹è±¡çš„çŠ¶æ€å¤ç”¨è‡ªå·±çš„å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿è¡ŒæœŸé—´Mark Wordé‡Œå­˜å‚¨çš„æ•°æ®ä¼šéšç€é”æ ‡å¿—ä½çš„å˜åŒ–è€Œå˜åŒ–ã€‚ MarkWordåœ¨64ä½JVMä¸­çš„ç»“æ„ï¼š MarkWordåœ¨32ä½JVMä¸­çš„ç»“æ„ï¼š Klass Pointï¼ˆç±»å‹æŒ‡é’ˆï¼‰ï¼šå¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚ å®ä¾‹æ•°æ® è¿™éƒ¨åˆ†ä¸»è¦æ˜¯å­˜æ”¾ç±»çš„æ•°æ®ä¿¡æ¯ï¼Œçˆ¶ç±»çš„ä¿¡æ¯ã€‚ å¯¹å…¶å¡«å…… ç”±äºè™šæ‹Ÿæœºè¦æ±‚å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯8å­—èŠ‚çš„æ•´æ•°å€ï¼Œå¡«å……æ•°æ®ä¸æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œä»…ä»…æ˜¯ä¸ºäº†å­—èŠ‚å¯¹é½ã€‚ æŸ¥çœ‹å¯¹è±¡å ç”¨å†…å­˜é€šè¿‡jol-coreå¯ä»¥åˆ†æå‡ºå†…å­˜å ç”¨æƒ…å†µå’Œé”çš„æƒ…å†µ 12345678910111213141516171819202122232425262728//æ·»åŠ ä¾èµ–&lt;dependency&gt; &lt;groupId&gt;org.openjdk.jol&lt;/groupId&gt; &lt;artifactId&gt;jol-core&lt;/artifactId&gt; &lt;version&gt;0.9&lt;/version&gt;&lt;/dependency&gt;//ä½¿ç”¨public class App &#123; public static void main(String[] args) &#123; System.out.println(ClassLayout.parseInstance(new MyObject()).toPrintable()); &#125;&#125;class MyObject &#123; public int age;&#125;//ç»“æœ OFFSET SIZE TYPE DESCRIPTION VALUE 0 4 (object header) 01 00 00 00 (00000001 00000000 00000000 00000000) (1) 4 4 (object header) 00 00 00 00 (00000000 00000000 00000000 00000000) (0) 8 4 (object header) 41 c1 00 f8 (01000001 11000001 00000000 11111000) (-134168255) 12 4 (loss due to the next object alignment)Instance size: 16 bytesSpace losses: 0 bytes internal + 4 bytes external = 4 bytes total é”å‡çº§JDK 1.6ä¹‹å‰ï¼Œsynchronized æ˜¯ä¸€ä¸ªé‡é‡çº§é”ï¼Œæ˜¯ä¸€ä¸ªæ•ˆç‡æ¯”è¾ƒä½ä¸‹çš„é”ï¼Œä½†æ˜¯åœ¨JDK 1.6åï¼ŒJvmä¸ºäº†æé«˜é”çš„è·å–ä¸é‡Šæ”¾æ•ˆç‡å¯¹ï¼ˆsynchronized ï¼‰è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå¼•å…¥äº†â€åå‘é”â€å’Œâ€è½»é‡çº§é”â€ï¼Œä»æ­¤ä»¥åé”çš„çŠ¶æ€å°±æœ‰äº†å››ç§ï¼ˆæ— é”ã€åå‘é”ã€è½»é‡çº§é”ã€é‡é‡çº§é”ï¼‰ï¼Œå¹¶ä¸”å››ç§çŠ¶æ€ä¼šéšç€ç«äº‰çš„æƒ…å†µé€æ¸å‡çº§ï¼Œè€Œä¸”æ˜¯ä¸å¯é€†çš„è¿‡ç¨‹ã€‚ å…³äºé”çš„æ¦‚å¿µï¼Œå‚è€ƒJavaé” å‚è€ƒ https://juejin.cn/post/6844904069845221384","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"Javaä¸­çš„å¼‚å¸¸","date":"2022-03-08T02:25:29.668Z","path":"wiki/Java/åŸºç¡€/Javaä¸­çš„å¼‚å¸¸/","text":"Javaè¯­è¨€æ˜¯ç¼–è¯‘å‹è¯­è¨€ï¼ŒJavaä»£ç ç¼–è¯‘æˆå­—èŠ‚ç ï¼Œç„¶åç”±JVMè§£é‡Šæˆç›®æ ‡ä»£ç ç”±CPUæ‰§è¡Œ;è¿™é‡ŒåŒ…å«æˆ‘ä»¬å¸¸è¯´çš„ä¸¤ä¸ªè¿‡ç¨‹ï¼Œå³ç¼–è¯‘æ—¶å’Œè¿è¡Œæ—¶;Javaè¯­è¨€æŠŠç¼–è¯‘æ—¶å¯èƒ½äº§ç”Ÿçš„å¼‚å¸¸ç§°ä¸ºå—æ£€æŸ¥å¼‚å¸¸ï¼ŒæŠŠè¿è¡Œæ—¶å¯èƒ½äº§ç”Ÿçš„å¼‚å¸¸ç§°ä¸ºä¸å—æ£€æŸ¥å¼‚å¸¸(æ¯”å¦‚NullPointExceptionå’ŒClassNotFoundException)ã€‚","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"åŸºç¡€","slug":"Java/åŸºç¡€","permalink":"http://airshu.github.io/categories/Java/%E5%9F%BA%E7%A1%80/"}]},{"title":"NIO","date":"2022-03-08T02:25:29.668Z","path":"wiki/Java/åŸºç¡€/NIO/","text":"","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"},{"name":"IO","slug":"IO","permalink":"http://airshu.github.io/tags/IO/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"åŸºç¡€","slug":"Java/åŸºç¡€","permalink":"http://airshu.github.io/categories/Java/%E5%9F%BA%E7%A1%80/"}]},{"title":"CASåŸç†","date":"2022-03-08T02:25:29.668Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/CASåŸç†/","text":"CASåŸç†åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œæ¯”è¾ƒå’Œäº¤æ¢(Conmpare And Swap)æ˜¯ç”¨äºå®ç°å¤šçº¿ç¨‹åŒæ­¥çš„åŸå­æŒ‡ä»¤ã€‚ å®ƒå°†å†…å­˜ä½ç½®çš„å†…å®¹ä¸ç»™å®šå€¼è¿›è¡Œæ¯”è¾ƒï¼Œåªæœ‰åœ¨ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œå°†è¯¥å†…å­˜ä½ç½®çš„å†…å®¹ä¿®æ”¹ ä¸ºæ–°çš„ç»™å®šå€¼ã€‚ è¿™æ˜¯ä½œä¸ºå•ä¸ªåŸå­æ“ä½œå®Œæˆçš„ã€‚ åŸå­æ€§ä¿è¯æ–°å€¼åŸºäºæœ€æ–°ä¿¡æ¯è®¡ç®—; å¦‚æœ è¯¥å€¼åœ¨åŒä¸€æ—¶é—´è¢«å¦ä¸€ä¸ªçº¿ç¨‹æ›´æ–°ï¼Œåˆ™å†™å…¥å°†å¤±è´¥ã€‚æ“ä½œç»“æœå¿…é¡»è¯´æ˜æ˜¯å¦è¿›è¡Œæ›¿æ¢; è¿™ å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„å¸ƒå°”å“åº”(è¿™ä¸ªå˜ä½“é€šå¸¸ç§°ä¸ºæ¯”è¾ƒå’Œè®¾ç½®)ï¼Œæˆ–é€šè¿‡è¿”å›ä»å†…å­˜ä½ç½®è¯»å–çš„å€¼æ¥å®Œæˆã€‚ CASå¸¦æ¥çš„é—®é¢˜å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä½¿ç”¨ CAS æ“ä½œæ¬²å°†æ•°æ® A ä¿®æ”¹æˆ Bï¼Œå½“ç„¶æˆ‘ä»¬åªå¸Œæœ› åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿæ­£ç¡®çš„ä¿®æ”¹æ•°æ®ï¼Œå¹¶ä¸”åªä¿®æ”¹ä¸€æ¬¡ã€‚å½“å¹¶å‘çš„æ—¶å€™ï¼Œå…¶ä¸­ä¸€ä¸ªçº¿ç¨‹å·²ç»å°† A æˆåŠŸçš„æ”¹æˆäº† Bï¼Œä½†æ˜¯åœ¨çº¿ç¨‹å¹¶å‘è°ƒåº¦è¿‡ç¨‹ä¸­å°šæœªè¢«è°ƒåº¦ï¼Œåœ¨è¿™ä¸ªæœŸé—´ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹(ä¸åœ¨å¹¶å‘ä¸­çš„è¯·æ±‚çº¿ç¨‹)å°† B åˆä¿®æ”¹æˆäº† Aï¼Œé‚£ä¹ˆåŸæ¥å¹¶å‘ä¸­çš„çº¿ç¨‹åˆå¯ä»¥é€šè¿‡ CAS æ“ä½œå°† A æ”¹æˆ Bã€‚ è§£å†³åŠæ³• java ä¸­æä¾›äº† AtomicStampedReference æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒæ˜¯åŸºäºç‰ˆæœ¬æˆ–è€…æ˜¯ ä¸€ç§çŠ¶æ€ï¼Œåœ¨ä¿®æ”¹çš„è¿‡ç¨‹ä¸­ä¸ä»…å¯¹æ¯”å€¼ï¼Œä¹ŸåŒæ—¶ä¼šå¯¹æ¯”ç‰ˆæœ¬å·","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"Javaé”","date":"2022-03-08T02:25:29.668Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/Javaé”/","text":"é”çš„åŸºæœ¬æ¦‚å¿µä»å¹¿ä¹‰ä¸Šæ¥å®šä¹‰ï¼š æ‚²è§‚é”ï¼š æ¯”å¦‚çº¿ç¨‹Aå¯¹æŸä¸ªå˜é‡è¿›è¡Œä¿®æ”¹ï¼Œåœ¨è¿™ä¸ªä¿®æ”¹æœŸé—´ï¼Œå®ƒæŒæ‚²è§‚å¿ƒç†ï¼Œè®¤ä¸ºå…¶ä»–çº¿ç¨‹åœ¨è¿™ä¸ªæœŸé—´ï¼Œä¹Ÿæœ‰å¯èƒ½å»ä¿®æ”¹è¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥å®ƒå°±ç»™å˜é‡åŠ ä¸ªé”ï¼Œä¿è¯åœ¨å®ƒä¿®æ”¹æœŸé—´ï¼Œåˆ«çš„çº¿ç¨‹æ²¡æ³•å»è®¿é—®è¿™ä¸ªå˜é‡ã€‚è¿™ä¸ªé”å°±æ˜¯æ‚²è§‚é”ã€‚æ‚²è§‚é”æ˜¯é‡é‡çº§é”ï¼Œä»£è¡¨å¯¹è±¡synchronizedå’ŒLockã€‚æ‚²è§‚é”é€‚åˆå†™æ“ä½œå¤šçš„åœºæ™¯ï¼Œå…ˆåŠ é”å¯ä»¥ä¿è¯å†™æ“ä½œæ—¶æ•°æ®æ­£ç¡®ã€‚ ä¹è§‚é”ï¼š æ¯”å¦‚çº¿ç¨‹Aå¯¹æŸä¸ªå˜é‡è¿›è¡Œä¿®æ”¹ï¼Œåœ¨è¿™ä¸ªä¿®æ”¹æœŸé—´ï¼Œå®ƒæŒä¹è§‚å¿ƒç†ï¼Œè®¤ä¸ºå…¶ä»–çº¿ç¨‹åœ¨è¿™ä¸ªæœŸé—´ï¼Œä¸ä¼šå»ä¿®æ”¹è¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥ä¸ä¼šåŠ é”ã€‚ åªæ˜¯åœ¨æ›´æ–°æ•°æ®çš„æ—¶å€™å»åˆ¤æ–­ä¹‹å‰æœ‰æ²¡æœ‰åˆ«çš„çº¿ç¨‹æ›´æ–°äº†è¿™ä¸ªæ•°æ®ã€‚å¦‚æœè¿™ä¸ªæ•°æ®æ²¡æœ‰è¢«æ›´æ–°ï¼Œå½“å‰çº¿ç¨‹å°†è‡ªå·±ä¿®æ”¹çš„æ•°æ®æˆåŠŸå†™å…¥ã€‚å¦‚æœæ•°æ®å·²ç»è¢«å…¶ä»–çº¿ç¨‹æ›´æ–°ï¼Œåˆ™æ ¹æ®ä¸åŒçš„å®ç°æ–¹å¼æ‰§è¡Œä¸åŒçš„æ“ä½œï¼ˆä¾‹å¦‚æŠ¥é”™æˆ–è€…è‡ªåŠ¨é‡è¯•ï¼‰ã€‚ä¹è§‚é”æ˜¯è½»é‡çº§é”ï¼Œä»£è¡¨å¯¹è±¡CASã€‚JavaåŸå­ç±»ä¸­çš„é€’å¢æ“ä½œå°±é€šè¿‡CASè‡ªæ—‹å®ç°çš„ã€‚ä¹è§‚é”é€‚åˆè¯»æ“ä½œå¤šçš„åœºæ™¯ï¼Œä¸åŠ é”çš„ç‰¹ç‚¹èƒ½å¤Ÿä½¿å…¶è¯»æ“ä½œçš„æ€§èƒ½å¤§å¹…æå‡ã€‚ æ‚²è§‚é”å’Œä¹è§‚é”çš„åŸºæœ¬ç”¨æ³•12345678910111213141516// ------------------------- æ‚²è§‚é”çš„è°ƒç”¨æ–¹å¼ -------------------------// synchronizedpublic synchronized void testMethod() &#123; // æ“ä½œåŒæ­¥èµ„æº&#125;// ReentrantLockprivate ReentrantLock lock = new ReentrantLock(); // éœ€è¦ä¿è¯å¤šä¸ªçº¿ç¨‹ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªé”public void modifyPublicResources() &#123; lock.lock(); // æ“ä½œåŒæ­¥èµ„æº lock.unlock();&#125;// ------------------------- ä¹è§‚é”çš„è°ƒç”¨æ–¹å¼ -------------------------private AtomicInteger atomicInteger = new AtomicInteger(); // éœ€è¦ä¿è¯å¤šä¸ªçº¿ç¨‹ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªAtomicIntegeratomicInteger.incrementAndGet(); //æ‰§è¡Œè‡ªå¢1 æ— é” VS åå‘é” VS è½»é‡çº§é” VS é‡é‡çº§é”Java SE 1.6ä¸ºäº†å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¼•å…¥äº†åå‘é”å’Œè½»é‡çº§é”ï¼Œåœ¨Java SE 1.6ä¸­ï¼Œé”ä¸€å…±æœ‰4ç§çŠ¶æ€ï¼Œçº§åˆ«ä»ä½åˆ°é«˜ä¾æ¬¡æ˜¯ï¼šæ— é”çŠ¶æ€ã€åå‘é”çŠ¶æ€ã€è½»é‡çº§é”çŠ¶æ€å’Œé‡é‡çº§é”çŠ¶æ€ã€‚è¿™å››ç§é”æ˜¯æŒ‡é”çš„çŠ¶æ€ï¼Œä¸“é—¨é’ˆå¯¹synchronizedçš„ã€‚ Javaå¤´å¯¹è±¡synchronizedæ˜¯æ‚²è§‚é”ï¼Œåœ¨æ“ä½œåŒæ­¥èµ„æºä¹‹å‰éœ€è¦ç»™åŒæ­¥èµ„æºå…ˆåŠ é”ï¼Œè¿™æŠŠé”å°±æ˜¯å­˜åœ¨Javaå¯¹è±¡å¤´é‡Œçš„ï¼Œè€ŒJavaå¯¹è±¡å¤´åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬ä»¥Hotspotè™šæ‹Ÿæœºä¸ºä¾‹ï¼ŒHotspotçš„å¯¹è±¡å¤´ä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†æ•°æ®ï¼šMark Wordï¼ˆæ ‡è®°å­—æ®µï¼‰ã€Klass Pointerï¼ˆç±»å‹æŒ‡é’ˆï¼‰ã€‚ Mark Wordï¼šé»˜è®¤å­˜å‚¨å¯¹è±¡çš„HashCodeï¼Œåˆ†ä»£å¹´é¾„å’Œé”æ ‡å¿—ä½ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯éƒ½æ˜¯ä¸å¯¹è±¡è‡ªèº«å®šä¹‰æ— å…³çš„æ•°æ®ï¼Œæ‰€ä»¥Mark Wordè¢«è®¾è®¡æˆä¸€ä¸ªéå›ºå®šçš„æ•°æ®ç»“æ„ä»¥ä¾¿åœ¨æå°çš„ç©ºé—´å†…å­˜å­˜å‚¨å°½é‡å¤šçš„æ•°æ®ã€‚å®ƒä¼šæ ¹æ®å¯¹è±¡çš„çŠ¶æ€å¤ç”¨è‡ªå·±çš„å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿è¡ŒæœŸé—´Mark Wordé‡Œå­˜å‚¨çš„æ•°æ®ä¼šéšç€é”æ ‡å¿—ä½çš„å˜åŒ–è€Œå˜åŒ–ã€‚ Klass Pointï¼šå¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®ä¾‹ã€‚ MonitorMonitorå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåŒæ­¥å·¥å…·æˆ–ä¸€ç§åŒæ­¥æœºåˆ¶ï¼Œé€šå¸¸è¢«æè¿°ä¸ºä¸€ä¸ªå¯¹è±¡ã€‚æ¯ä¸€ä¸ªJavaå¯¹è±¡å°±æœ‰ä¸€æŠŠçœ‹ä¸è§çš„é”ï¼Œç§°ä¸ºå†…éƒ¨é”æˆ–è€…Monitoré”ã€‚ Monitoræ˜¯çº¿ç¨‹ç§æœ‰çš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æœ‰ä¸€ä¸ªå¯ç”¨monitor recordåˆ—è¡¨ï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªå…¨å±€çš„å¯ç”¨åˆ—è¡¨ã€‚æ¯ä¸€ä¸ªè¢«é”ä½çš„å¯¹è±¡éƒ½ä¼šå’Œä¸€ä¸ªmonitorå…³è”ï¼ŒåŒæ—¶monitorä¸­æœ‰ä¸€ä¸ªOwnerå­—æ®µå­˜æ”¾æ‹¥æœ‰è¯¥é”çš„çº¿ç¨‹çš„å”¯ä¸€æ ‡è¯†ï¼Œè¡¨ç¤ºè¯¥é”è¢«è¿™ä¸ªçº¿ç¨‹å ç”¨ã€‚ ç°åœ¨è¯é¢˜å›åˆ°synchronizedï¼Œsynchronizedé€šè¿‡Monitoræ¥å®ç°çº¿ç¨‹åŒæ­¥ï¼ŒMonitoræ˜¯ä¾èµ–äºåº•å±‚çš„æ“ä½œç³»ç»Ÿçš„Mutex Lockï¼ˆäº’æ–¥é”ï¼‰æ¥å®ç°çš„çº¿ç¨‹åŒæ­¥ã€‚ å¦‚åŒæˆ‘ä»¬åœ¨è‡ªæ—‹é”ä¸­æåˆ°çš„â€œé˜»å¡æˆ–å”¤é†’ä¸€ä¸ªJavaçº¿ç¨‹éœ€è¦æ“ä½œç³»ç»Ÿåˆ‡æ¢CPUçŠ¶æ€æ¥å®Œæˆï¼Œè¿™ç§çŠ¶æ€è½¬æ¢éœ€è¦è€—è´¹å¤„ç†å™¨æ—¶é—´ã€‚å¦‚æœåŒæ­¥ä»£ç å—ä¸­çš„å†…å®¹è¿‡äºç®€å•ï¼ŒçŠ¶æ€è½¬æ¢æ¶ˆè€—çš„æ—¶é—´æœ‰å¯èƒ½æ¯”ç”¨æˆ·ä»£ç æ‰§è¡Œçš„æ—¶é—´è¿˜è¦é•¿â€ã€‚è¿™ç§æ–¹å¼å°±æ˜¯synchronizedæœ€åˆå®ç°åŒæ­¥çš„æ–¹å¼ï¼Œè¿™å°±æ˜¯JDK 6ä¹‹å‰synchronizedæ•ˆç‡ä½çš„åŸå› ã€‚è¿™ç§ä¾èµ–äºæ“ä½œç³»ç»ŸMutex Lockæ‰€å®ç°çš„é”æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œé‡é‡çº§é”â€ï¼ŒJDK 6ä¸­ä¸ºäº†å‡å°‘è·å¾—é”å’Œé‡Šæ”¾é”å¸¦æ¥çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¼•å…¥äº†â€œåå‘é”â€å’Œâ€œè½»é‡çº§é”â€ã€‚ æ‰€ä»¥ç›®å‰é”ä¸€å…±æœ‰4ç§çŠ¶æ€ï¼Œçº§åˆ«ä»ä½åˆ°é«˜ä¾æ¬¡æ˜¯ï¼šæ— é”ã€åå‘é”ã€è½»é‡çº§é”å’Œé‡é‡çº§é”ã€‚é”çŠ¶æ€åªèƒ½å‡çº§ä¸èƒ½é™çº§ã€‚ æ— é”ï¼š æ— é”æ²¡æœ‰å¯¹èµ„æºè¿›è¡Œé”å®šï¼Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½èƒ½è®¿é—®å¹¶ä¿®æ”¹åŒä¸€ä¸ªèµ„æºï¼Œä½†åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ä¿®æ”¹æˆåŠŸã€‚ æ— é”çš„ç‰¹ç‚¹å°±æ˜¯ä¿®æ”¹æ“ä½œåœ¨å¾ªç¯å†…è¿›è¡Œï¼Œçº¿ç¨‹ä¼šä¸æ–­çš„å°è¯•ä¿®æ”¹å…±äº«èµ„æºã€‚å¦‚æœæ²¡æœ‰å†²çªå°±ä¿®æ”¹æˆåŠŸå¹¶é€€å‡ºï¼Œå¦åˆ™å°±ä¼šç»§ç»­å¾ªç¯å°è¯•ã€‚å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹ä¿®æ”¹åŒä¸€ä¸ªå€¼ï¼Œå¿…å®šä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ä¿®æ”¹æˆåŠŸï¼Œè€Œå…¶ä»–ä¿®æ”¹å¤±è´¥çš„çº¿ç¨‹ä¼šä¸æ–­é‡è¯•ç›´åˆ°ä¿®æ”¹æˆåŠŸã€‚ä¸Šé¢æˆ‘ä»¬ä»‹ç»çš„CASåŸç†åŠåº”ç”¨å³æ˜¯æ— é”çš„å®ç°ã€‚æ— é”æ— æ³•å…¨é¢ä»£æ›¿æœ‰é”ï¼Œä½†æ— é”åœ¨æŸäº›åœºåˆä¸‹çš„æ€§èƒ½æ˜¯éå¸¸é«˜çš„ã€‚ åå‘é”ï¼š åå‘é”æ˜¯æŒ‡ä¸€æ®µåŒæ­¥ä»£ç ä¸€ç›´è¢«ä¸€ä¸ªçº¿ç¨‹æ‰€è®¿é—®ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹ä¼šè‡ªåŠ¨è·å–é”ï¼Œé™ä½è·å–é”çš„ä»£ä»·ã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé”æ€»æ˜¯ç”±åŒä¸€çº¿ç¨‹å¤šæ¬¡è·å¾—ï¼Œä¸å­˜åœ¨å¤šçº¿ç¨‹ç«äº‰ï¼Œæ‰€ä»¥å‡ºç°äº†åå‘é”ã€‚å…¶ç›®æ ‡å°±æ˜¯åœ¨åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶èƒ½å¤Ÿæé«˜æ€§èƒ½ã€‚ å½“ä¸€ä¸ªçº¿ç¨‹è®¿é—®åŒæ­¥ä»£ç å—å¹¶è·å–é”æ—¶ï¼Œä¼šåœ¨Mark Wordé‡Œå­˜å‚¨é”åå‘çš„çº¿ç¨‹IDã€‚åœ¨çº¿ç¨‹è¿›å…¥å’Œé€€å‡ºåŒæ­¥å—æ—¶ä¸å†é€šè¿‡CASæ“ä½œæ¥åŠ é”å’Œè§£é”ï¼Œè€Œæ˜¯æ£€æµ‹Mark Wordé‡Œæ˜¯å¦å­˜å‚¨ç€æŒ‡å‘å½“å‰çº¿ç¨‹çš„åå‘é”ã€‚å¼•å…¥åå‘é”æ˜¯ä¸ºäº†åœ¨æ— å¤šçº¿ç¨‹ç«äº‰çš„æƒ…å†µä¸‹å°½é‡å‡å°‘ä¸å¿…è¦çš„è½»é‡çº§é”æ‰§è¡Œè·¯å¾„ï¼Œå› ä¸ºè½»é‡çº§é”çš„è·å–åŠé‡Šæ”¾ä¾èµ–å¤šæ¬¡CASåŸå­æŒ‡ä»¤ï¼Œè€Œåå‘é”åªéœ€è¦åœ¨ç½®æ¢ThreadIDçš„æ—¶å€™ä¾èµ–ä¸€æ¬¡CASåŸå­æŒ‡ä»¤å³å¯ã€‚ åå‘é”åªæœ‰é‡åˆ°å…¶ä»–çº¿ç¨‹å°è¯•ç«äº‰åå‘é”æ—¶ï¼ŒæŒæœ‰åå‘é”çš„çº¿ç¨‹æ‰ä¼šé‡Šæ”¾é”ï¼Œçº¿ç¨‹ä¸ä¼šä¸»åŠ¨é‡Šæ”¾åå‘é”ã€‚åå‘é”çš„æ’¤é”€ï¼Œéœ€è¦ç­‰å¾…å…¨å±€å®‰å…¨ç‚¹ï¼ˆåœ¨è¿™ä¸ªæ—¶é—´ç‚¹ä¸Šæ²¡æœ‰å­—èŠ‚ç æ­£åœ¨æ‰§è¡Œï¼‰ï¼Œå®ƒä¼šé¦–å…ˆæš‚åœæ‹¥æœ‰åå‘é”çš„çº¿ç¨‹ï¼Œåˆ¤æ–­é”å¯¹è±¡æ˜¯å¦å¤„äºè¢«é”å®šçŠ¶æ€ã€‚æ’¤é”€åå‘é”åæ¢å¤åˆ°æ— é”ï¼ˆæ ‡å¿—ä½ä¸ºâ€œ01â€ï¼‰æˆ–è½»é‡çº§é”ï¼ˆæ ‡å¿—ä½ä¸ºâ€œ00â€ï¼‰çš„çŠ¶æ€ã€‚ åå‘é”åœ¨JDK 6åŠä»¥åçš„JVMé‡Œæ˜¯é»˜è®¤å¯ç”¨çš„ã€‚å¯ä»¥é€šè¿‡JVMå‚æ•°å…³é—­åå‘é”ï¼š-XX:-UseBiasedLocking&#x3D;falseï¼Œå…³é—­ä¹‹åç¨‹åºé»˜è®¤ä¼šè¿›å…¥è½»é‡çº§é”çŠ¶æ€ã€‚ è½»é‡çº§é”ï¼š æ˜¯æŒ‡å½“é”æ˜¯åå‘é”çš„æ—¶å€™ï¼Œè¢«å¦å¤–çš„çº¿ç¨‹æ‰€è®¿é—®ï¼Œåå‘é”å°±ä¼šå‡çº§ä¸ºè½»é‡çº§é”ï¼Œå…¶ä»–çº¿ç¨‹ä¼šé€šè¿‡è‡ªæ—‹çš„å½¢å¼å°è¯•è·å–é”ï¼Œä¸ä¼šé˜»å¡ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ åœ¨ä»£ç è¿›å…¥åŒæ­¥å—çš„æ—¶å€™ï¼Œå¦‚æœåŒæ­¥å¯¹è±¡é”çŠ¶æ€ä¸ºæ— é”çŠ¶æ€ï¼ˆé”æ ‡å¿—ä½ä¸ºâ€œ01â€çŠ¶æ€ï¼Œæ˜¯å¦ä¸ºåå‘é”ä¸ºâ€œ0â€ï¼‰ï¼Œè™šæ‹Ÿæœºé¦–å…ˆå°†åœ¨å½“å‰çº¿ç¨‹çš„æ ˆå¸§ä¸­å»ºç«‹ä¸€ä¸ªåä¸ºé”è®°å½•ï¼ˆLock Recordï¼‰çš„ç©ºé—´ï¼Œç”¨äºå­˜å‚¨é”å¯¹è±¡ç›®å‰çš„Mark Wordçš„æ‹·è´ï¼Œç„¶åæ‹·è´å¯¹è±¡å¤´ä¸­çš„Mark Wordå¤åˆ¶åˆ°é”è®°å½•ä¸­ã€‚ æ‹·è´æˆåŠŸåï¼Œè™šæ‹Ÿæœºå°†ä½¿ç”¨CASæ“ä½œå°è¯•å°†å¯¹è±¡çš„Mark Wordæ›´æ–°ä¸ºæŒ‡å‘Lock Recordçš„æŒ‡é’ˆï¼Œå¹¶å°†Lock Recordé‡Œçš„owneræŒ‡é’ˆæŒ‡å‘å¯¹è±¡çš„Mark Wordã€‚ å¦‚æœè¿™ä¸ªæ›´æ–°åŠ¨ä½œæˆåŠŸäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±æ‹¥æœ‰äº†è¯¥å¯¹è±¡çš„é”ï¼Œå¹¶ä¸”å¯¹è±¡Mark Wordçš„é”æ ‡å¿—ä½è®¾ç½®ä¸ºâ€œ00â€ï¼Œè¡¨ç¤ºæ­¤å¯¹è±¡å¤„äºè½»é‡çº§é”å®šçŠ¶æ€ã€‚ å¦‚æœè½»é‡çº§é”çš„æ›´æ–°æ“ä½œå¤±è´¥äº†ï¼Œè™šæ‹Ÿæœºé¦–å…ˆä¼šæ£€æŸ¥å¯¹è±¡çš„Mark Wordæ˜¯å¦æŒ‡å‘å½“å‰çº¿ç¨‹çš„æ ˆå¸§ï¼Œå¦‚æœæ˜¯å°±è¯´æ˜å½“å‰çº¿ç¨‹å·²ç»æ‹¥æœ‰äº†è¿™ä¸ªå¯¹è±¡çš„é”ï¼Œé‚£å°±å¯ä»¥ç›´æ¥è¿›å…¥åŒæ­¥å—ç»§ç»­æ‰§è¡Œï¼Œå¦åˆ™è¯´æ˜å¤šä¸ªçº¿ç¨‹ç«äº‰é”ã€‚ è‹¥å½“å‰åªæœ‰ä¸€ä¸ªç­‰å¾…çº¿ç¨‹ï¼Œåˆ™è¯¥çº¿ç¨‹é€šè¿‡è‡ªæ—‹è¿›è¡Œç­‰å¾…ã€‚ä½†æ˜¯å½“è‡ªæ—‹è¶…è¿‡ä¸€å®šçš„æ¬¡æ•°ï¼Œæˆ–è€…ä¸€ä¸ªçº¿ç¨‹åœ¨æŒæœ‰é”ï¼Œä¸€ä¸ªåœ¨è‡ªæ—‹ï¼Œåˆæœ‰ç¬¬ä¸‰ä¸ªæ¥è®¿æ—¶ï¼Œè½»é‡çº§é”å‡çº§ä¸ºé‡é‡çº§é”ã€‚ é‡é‡çº§é” é‡é‡çº§é”æ˜¯ä¾èµ–å¯¹è±¡å†…éƒ¨çš„monitoré”æ¥å®ç°ã€‚å½“ç³»ç»Ÿæ£€æŸ¥åˆ°é”æ˜¯é‡é‡çº§é”ä¹‹åï¼Œä¼šæŠŠç­‰å¾…æƒ³è¦è·å¾—é”çš„çº¿ç¨‹è¿›è¡Œé˜»å¡ï¼Œè¢«é˜»å¡çš„çº¿ç¨‹ä¸ä¼šæ¶ˆè€—cpuã€‚ä½†æ˜¯é˜»å¡æˆ–è€…å”¤é†’ä¸€ä¸ªçº¿ç¨‹æ—¶ï¼Œéƒ½éœ€è¦æ“ä½œç³»ç»Ÿæ¥å¸®å¿™ï¼Œéœ€è¦ä»ç”¨æˆ·æ€è½¬æ¢åˆ°å†…æ ¸æ€ï¼Œè€Œè½¬æ¢çŠ¶æ€æ˜¯éœ€è¦æ¶ˆè€—å¾ˆå¤šæ—¶é—´ã€‚ ç»¼ä¸Šï¼Œåå‘é”é€šè¿‡å¯¹æ¯”Mark Wordè§£å†³åŠ é”é—®é¢˜ï¼Œé¿å…æ‰§è¡ŒCASæ“ä½œã€‚è€Œè½»é‡çº§é”æ˜¯é€šè¿‡ç”¨CASæ“ä½œå’Œè‡ªæ—‹æ¥è§£å†³åŠ é”é—®é¢˜ï¼Œé¿å…çº¿ç¨‹é˜»å¡å’Œå”¤é†’è€Œå½±å“æ€§èƒ½ã€‚é‡é‡çº§é”æ˜¯å°†é™¤äº†æ‹¥æœ‰é”çš„çº¿ç¨‹ä»¥å¤–çš„çº¿ç¨‹éƒ½é˜»å¡ã€‚ CASCASé”ï¼šï¼ˆCompare And Swapï¼‰ ä¹è§‚é”çš„ä¸€ç§å®ç°æ–¹å¼ã€‚ CASç®—æ³•æ¶‰åŠåˆ°ä¸‰ä¸ªæ“ä½œæ•°ï¼š éœ€è¦è¯»å†™çš„å†…å­˜å€¼ Vã€‚ è¿›è¡Œæ¯”è¾ƒçš„å€¼ Aã€‚ è¦å†™å…¥çš„æ–°å€¼ Bã€‚ å½“ä¸”ä»…å½“ V çš„å€¼ç­‰äº A æ—¶ï¼ŒCASé€šè¿‡åŸå­æ–¹å¼ç”¨æ–°å€¼Bæ¥æ›´æ–°Vçš„å€¼ï¼ˆâ€œæ¯”è¾ƒ+æ›´æ–°â€æ•´ä½“æ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼‰ï¼Œå¦åˆ™ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œâ€œæ›´æ–°â€æ˜¯ä¸€ä¸ªä¸æ–­é‡è¯•çš„æ“ä½œã€‚ 123456789101112131415161718192021222324// ------------------------- JDK 8 -------------------------// AtomicInteger è‡ªå¢æ–¹æ³•public final int incrementAndGet() &#123; return unsafe.getAndAddInt(this, valueOffset, 1) + 1;&#125;// Unsafe.classpublic final int getAndAddInt(Object var1, long var2, int var4) &#123; int var5; do &#123; var5 = this.getIntVolatile(var1, var2); &#125; while(!this.compareAndSwapInt(var1, var2, var5, var5 + var4)); return var5;&#125;// ------------------------- OpenJDK 8 -------------------------// Unsafe.javapublic final int getAndAddInt(Object o, long offset, int delta) &#123; int v; do &#123; v = getIntVolatile(o, offset); &#125; while (!compareAndSwapInt(o, offset, v, v + delta)); return v;&#125; æ ¹æ®OpenJDK 8çš„æºç æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒgetAndAddInt()å¾ªç¯è·å–ç»™å®šå¯¹è±¡oä¸­çš„åç§»é‡å¤„çš„å€¼vï¼Œç„¶ååˆ¤æ–­å†…å­˜å€¼æ˜¯å¦ç­‰äºvã€‚å¦‚æœç›¸ç­‰åˆ™å°†å†…å­˜å€¼è®¾ç½®ä¸º v + deltaï¼Œå¦åˆ™è¿”å›falseï¼Œç»§ç»­å¾ªç¯è¿›è¡Œé‡è¯•ï¼Œç›´åˆ°è®¾ç½®æˆåŠŸæ‰èƒ½é€€å‡ºå¾ªç¯ï¼Œå¹¶ä¸”å°†æ—§å€¼è¿”å›ã€‚æ•´ä¸ªâ€œæ¯”è¾ƒ+æ›´æ–°â€æ“ä½œå°è£…åœ¨compareAndSwapInt()ä¸­ï¼Œåœ¨JNIé‡Œæ˜¯å€ŸåŠ©äºä¸€ä¸ªCPUæŒ‡ä»¤å®Œæˆçš„ï¼Œå±äºåŸå­æ“ä½œï¼Œå¯ä»¥ä¿è¯å¤šä¸ªçº¿ç¨‹éƒ½èƒ½å¤Ÿçœ‹åˆ°åŒä¸€ä¸ªå˜é‡çš„ä¿®æ”¹å€¼ã€‚ åç»­JDKé€šè¿‡CPUçš„cmpxchgæŒ‡ä»¤ï¼Œå»æ¯”è¾ƒå¯„å­˜å™¨ä¸­çš„ A å’Œ å†…å­˜ä¸­çš„å€¼ Vã€‚å¦‚æœç›¸ç­‰ï¼Œå°±æŠŠè¦å†™å…¥çš„æ–°å€¼ B å­˜å…¥å†…å­˜ä¸­ã€‚å¦‚æœä¸ç›¸ç­‰ï¼Œå°±å°†å†…å­˜å€¼ V èµ‹å€¼ç»™å¯„å­˜å™¨ä¸­çš„å€¼ Aã€‚ç„¶åé€šè¿‡Javaä»£ç ä¸­çš„whileå¾ªç¯å†æ¬¡è°ƒç”¨cmpxchgæŒ‡ä»¤è¿›è¡Œé‡è¯•ï¼Œç›´åˆ°è®¾ç½®æˆåŠŸä¸ºæ­¢ã€‚ CASè™½ç„¶å¾ˆé«˜æ•ˆï¼Œä½†æ˜¯å®ƒä¹Ÿå­˜åœ¨ä¸‰å¤§é—®é¢˜ï¼Œè¿™é‡Œä¹Ÿç®€å•è¯´ä¸€ä¸‹ï¼š ABAé—®é¢˜ã€‚CASéœ€è¦åœ¨æ“ä½œå€¼çš„æ—¶å€™æ£€æŸ¥å†…å­˜å€¼æ˜¯å¦å‘ç”Ÿå˜åŒ–ï¼Œæ²¡æœ‰å‘ç”Ÿå˜åŒ–æ‰ä¼šæ›´æ–°å†…å­˜å€¼ã€‚ä½†æ˜¯å¦‚æœå†…å­˜å€¼åŸæ¥æ˜¯Aï¼Œåæ¥å˜æˆäº†Bï¼Œç„¶ååˆå˜æˆäº†Aï¼Œé‚£ä¹ˆCASè¿›è¡Œæ£€æŸ¥æ—¶ä¼šå‘ç°å€¼æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯æœ‰å˜åŒ–çš„ã€‚ABAé—®é¢˜çš„è§£å†³æ€è·¯å°±æ˜¯åœ¨å˜é‡å‰é¢æ·»åŠ ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡å˜é‡æ›´æ–°çš„æ—¶å€™éƒ½æŠŠç‰ˆæœ¬å·åŠ ä¸€ï¼Œè¿™æ ·å˜åŒ–è¿‡ç¨‹å°±ä»â€œAï¼Bï¼Aâ€å˜æˆäº†â€œ1Aï¼2Bï¼3Aâ€ã€‚ JDKä»1.5å¼€å§‹æä¾›äº†AtomicStampedReferenceç±»æ¥è§£å†³ABAé—®é¢˜ï¼Œå…·ä½“æ“ä½œå°è£…åœ¨compareAndSet()ä¸­ã€‚compareAndSet()é¦–å…ˆæ£€æŸ¥å½“å‰å¼•ç”¨å’Œå½“å‰æ ‡å¿—ä¸é¢„æœŸå¼•ç”¨å’Œé¢„æœŸæ ‡å¿—æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœéƒ½ç›¸ç­‰ï¼Œåˆ™ä»¥åŸå­æ–¹å¼å°†å¼•ç”¨å€¼å’Œæ ‡å¿—çš„å€¼è®¾ç½®ä¸ºç»™å®šçš„æ›´æ–°å€¼ã€‚ å¾ªç¯æ—¶é—´é•¿å¼€é”€å¤§ã€‚CASæ“ä½œå¦‚æœé•¿æ—¶é—´ä¸æˆåŠŸï¼Œä¼šå¯¼è‡´å…¶ä¸€ç›´è‡ªæ—‹ï¼Œç»™CPUå¸¦æ¥éå¸¸å¤§çš„å¼€é”€ã€‚ åªèƒ½ä¿è¯ä¸€ä¸ªå…±äº«å˜é‡çš„åŸå­æ“ä½œã€‚å¯¹ä¸€ä¸ªå…±äº«å˜é‡æ‰§è¡Œæ“ä½œæ—¶ï¼ŒCASèƒ½å¤Ÿä¿è¯åŸå­æ“ä½œï¼Œä½†æ˜¯å¯¹å¤šä¸ªå…±äº«å˜é‡æ“ä½œæ—¶ï¼ŒCASæ˜¯æ— æ³•ä¿è¯æ“ä½œçš„åŸå­æ€§çš„ã€‚ Javaä»1.5å¼€å§‹JDKæä¾›äº†AtomicReferenceç±»æ¥ä¿è¯å¼•ç”¨å¯¹è±¡ä¹‹é—´çš„åŸå­æ€§ï¼Œå¯ä»¥æŠŠå¤šä¸ªå˜é‡æ”¾åœ¨ä¸€ä¸ªå¯¹è±¡é‡Œæ¥è¿›è¡ŒCASæ“ä½œã€‚ å…¬å¹³é”å’Œéå…¬å¹³é”å…¬å¹³é”æ˜¯æŒ‡å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºæ¥è·å–é”ï¼Œçº¿ç¨‹ç›´æ¥è¿›å…¥é˜Ÿåˆ—ä¸­æ’é˜Ÿï¼Œé˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹æ‰èƒ½è·å¾—é”ã€‚å…¬å¹³é”çš„ä¼˜ç‚¹æ˜¯ç­‰å¾…é”çš„çº¿ç¨‹ä¸ä¼šé¥¿æ­»ã€‚ç¼ºç‚¹æ˜¯æ•´ä½“ååæ•ˆç‡ç›¸å¯¹éå…¬å¹³é”è¦ä½ï¼Œç­‰å¾…é˜Ÿåˆ—ä¸­é™¤ç¬¬ä¸€ä¸ªçº¿ç¨‹ä»¥å¤–çš„æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šé˜»å¡ï¼ŒCPUå”¤é†’é˜»å¡çº¿ç¨‹çš„å¼€é”€æ¯”éå…¬å¹³é”å¤§ã€‚ éå…¬å¹³é”æ˜¯å¤šä¸ªçº¿ç¨‹åŠ é”æ—¶ç›´æ¥å°è¯•è·å–é”ï¼Œè·å–ä¸åˆ°æ‰ä¼šåˆ°ç­‰å¾…é˜Ÿåˆ—çš„é˜Ÿå°¾ç­‰å¾…ã€‚ä½†å¦‚æœæ­¤æ—¶é”åˆšå¥½å¯ç”¨ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å¯ä»¥æ— éœ€é˜»å¡ç›´æ¥è·å–åˆ°é”ï¼Œæ‰€ä»¥éå…¬å¹³é”æœ‰å¯èƒ½å‡ºç°åç”³è¯·é”çš„çº¿ç¨‹å…ˆè·å–é”çš„åœºæ™¯ã€‚éå…¬å¹³é”çš„ä¼˜ç‚¹æ˜¯å¯ä»¥å‡å°‘å”¤èµ·çº¿ç¨‹çš„å¼€é”€ï¼Œæ•´ä½“çš„ååæ•ˆç‡é«˜ï¼Œå› ä¸ºçº¿ç¨‹æœ‰å‡ ç‡ä¸é˜»å¡ç›´æ¥è·å¾—é”ï¼ŒCPUä¸å¿…å”¤é†’æ‰€æœ‰çº¿ç¨‹ã€‚ç¼ºç‚¹æ˜¯å¤„äºç­‰å¾…é˜Ÿåˆ—ä¸­çš„çº¿ç¨‹å¯èƒ½ä¼šé¥¿æ­»ï¼Œæˆ–è€…ç­‰å¾ˆä¹…æ‰ä¼šè·å¾—é”ã€‚ ç›´æ¥ç”¨è¯­è¨€æè¿°å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œè¿™é‡Œä½œè€…ç”¨ä»åˆ«å¤„çœ‹åˆ°çš„ä¸€ä¸ªä¾‹å­æ¥è®²è¿°ä¸€ä¸‹å…¬å¹³é”å’Œéå…¬å¹³é”ã€‚ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‡è®¾æœ‰ä¸€å£æ°´äº•ï¼Œæœ‰ç®¡ç†å‘˜çœ‹å®ˆï¼Œç®¡ç†å‘˜æœ‰ä¸€æŠŠé”ï¼Œåªæœ‰æ‹¿åˆ°é”çš„äººæ‰èƒ½å¤Ÿæ‰“æ°´ï¼Œæ‰“å®Œæ°´è¦æŠŠé”è¿˜ç»™ç®¡ç†å‘˜ã€‚æ¯ä¸ªè¿‡æ¥æ‰“æ°´çš„äººéƒ½è¦ç®¡ç†å‘˜çš„å…è®¸å¹¶æ‹¿åˆ°é”ä¹‹åæ‰èƒ½å»æ‰“æ°´ï¼Œå¦‚æœå‰é¢æœ‰äººæ­£åœ¨æ‰“æ°´ï¼Œé‚£ä¹ˆè¿™ä¸ªæƒ³è¦æ‰“æ°´çš„äººå°±å¿…é¡»æ’é˜Ÿã€‚ç®¡ç†å‘˜ä¼šæŸ¥çœ‹ä¸‹ä¸€ä¸ªè¦å»æ‰“æ°´çš„äººæ˜¯ä¸æ˜¯é˜Ÿä¼é‡Œæ’æœ€å‰é¢çš„äººï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œæ‰ä¼šç»™ä½ é”è®©ä½ å»æ‰“æ°´ï¼›å¦‚æœä½ ä¸æ˜¯æ’ç¬¬ä¸€çš„äººï¼Œå°±å¿…é¡»å»é˜Ÿå°¾æ’é˜Ÿï¼Œè¿™å°±æ˜¯å…¬å¹³é”ã€‚ ä½†æ˜¯å¯¹äºéå…¬å¹³é”ï¼Œç®¡ç†å‘˜å¯¹æ‰“æ°´çš„äººæ²¡æœ‰è¦æ±‚ã€‚å³ä½¿ç­‰å¾…é˜Ÿä¼é‡Œæœ‰æ’é˜Ÿç­‰å¾…çš„äººï¼Œä½†å¦‚æœåœ¨ä¸Šä¸€ä¸ªäººåˆšæ‰“å®Œæ°´æŠŠé”è¿˜ç»™ç®¡ç†å‘˜è€Œä¸”ç®¡ç†å‘˜è¿˜æ²¡æœ‰å…è®¸ç­‰å¾…é˜Ÿä¼é‡Œä¸‹ä¸€ä¸ªäººå»æ‰“æ°´æ—¶ï¼Œåˆšå¥½æ¥äº†ä¸€ä¸ªæ’é˜Ÿçš„äººï¼Œè¿™ä¸ªæ’é˜Ÿçš„äººæ˜¯å¯ä»¥ç›´æ¥ä»ç®¡ç†å‘˜é‚£é‡Œæ‹¿åˆ°é”å»æ‰“æ°´ï¼Œä¸éœ€è¦æ’é˜Ÿï¼ŒåŸæœ¬æ’é˜Ÿç­‰å¾…çš„äººåªèƒ½ç»§ç»­ç­‰å¾…ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ReentrantLockä¸­å…¬å¹³é”å’Œéå…¬å¹³é”çš„å®ç°å¦‚ä¸‹ï¼š 12345678910public final boolean hasQueuedPredecessors() &#123; // The correctness of this depends on head being initialized // before tail and on head.next being accurate if the current // thread is first in queue. Node t = tail; // Read fields in reverse initialization order Node h = head; Node s; return h != t &amp;&amp; ((s = h.next) == null || s.thread != Thread.currentThread());&#125; å†è¿›å…¥hasQueuedPredecessors()ï¼Œå¯ä»¥çœ‹åˆ°è¯¥æ–¹æ³•ä¸»è¦åšä¸€ä»¶äº‹æƒ…ï¼šä¸»è¦æ˜¯åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦ä½äºåŒæ­¥é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªã€‚å¦‚æœæ˜¯åˆ™è¿”å›trueï¼Œå¦åˆ™è¿”å›falseã€‚ ç»¼ä¸Šï¼Œå…¬å¹³é”å°±æ˜¯é€šè¿‡åŒæ­¥é˜Ÿåˆ—æ¥å®ç°å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºæ¥è·å–é”ï¼Œä»è€Œå®ç°å…¬å¹³çš„ç‰¹æ€§ã€‚éå…¬å¹³é”åŠ é”æ—¶ä¸è€ƒè™‘æ’é˜Ÿç­‰å¾…é—®é¢˜ï¼Œç›´æ¥å°è¯•è·å–é”ï¼Œæ‰€ä»¥å­˜åœ¨åç”³è¯·å´å…ˆè·å¾—é”çš„æƒ…å†µã€‚ å¯é‡å…¥é” VS éå¯é‡å…¥é”å¯é‡å…¥é”åˆåé€’å½’é”ï¼Œæ˜¯æŒ‡åœ¨åŒä¸€ä¸ªçº¿ç¨‹åœ¨å¤–å±‚æ–¹æ³•è·å–é”çš„æ—¶å€™ï¼Œå†è¿›å…¥è¯¥çº¿ç¨‹çš„å†…å±‚æ–¹æ³•ä¼šè‡ªåŠ¨è·å–é”ï¼ˆå‰æé”å¯¹è±¡å¾—æ˜¯åŒä¸€ä¸ªå¯¹è±¡æˆ–è€…classï¼‰ï¼Œä¸ä¼šå› ä¸ºä¹‹å‰å·²ç»è·å–è¿‡è¿˜æ²¡é‡Šæ”¾è€Œé˜»å¡ã€‚Javaä¸­ReentrantLockå’Œsynchronizedéƒ½æ˜¯å¯é‡å…¥é”ï¼Œå¯é‡å…¥é”çš„ä¸€ä¸ªä¼˜ç‚¹æ˜¯å¯ä¸€å®šç¨‹åº¦é¿å…æ­»é”ã€‚ä¸‹é¢ç”¨ç¤ºä¾‹ä»£ç æ¥è¿›è¡Œåˆ†æï¼š 12345678910public class Widget &#123; public synchronized void doSomething() &#123; System.out.println(&quot;æ–¹æ³•1æ‰§è¡Œ...&quot;); doOthers(); &#125; public synchronized void doOthers() &#123; System.out.println(&quot;æ–¹æ³•2æ‰§è¡Œ...&quot;); &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç±»ä¸­çš„ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯è¢«å†…ç½®é”synchronizedä¿®é¥°çš„ï¼ŒdoSomething()æ–¹æ³•ä¸­è°ƒç”¨doOthers()æ–¹æ³•ã€‚å› ä¸ºå†…ç½®é”æ˜¯å¯é‡å…¥çš„ï¼Œæ‰€ä»¥åŒä¸€ä¸ªçº¿ç¨‹åœ¨è°ƒç”¨doOthers()æ—¶å¯ä»¥ç›´æ¥è·å¾—å½“å‰å¯¹è±¡çš„é”ï¼Œè¿›å…¥doOthers()è¿›è¡Œæ“ä½œã€‚ å¦‚æœæ˜¯ä¸€ä¸ªä¸å¯é‡å…¥é”ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹åœ¨è°ƒç”¨doOthers()ä¹‹å‰éœ€è¦å°†æ‰§è¡ŒdoSomething()æ—¶è·å–å½“å‰å¯¹è±¡çš„é”é‡Šæ”¾æ‰ï¼Œå®é™…ä¸Šè¯¥å¯¹è±¡é”å·²è¢«å½“å‰çº¿ç¨‹æ‰€æŒæœ‰ï¼Œä¸”æ— æ³•é‡Šæ”¾ã€‚æ‰€ä»¥æ­¤æ—¶ä¼šå‡ºç°æ­»é”ã€‚ è€Œä¸ºä»€ä¹ˆå¯é‡å…¥é”å°±å¯ä»¥åœ¨åµŒå¥—è°ƒç”¨æ—¶å¯ä»¥è‡ªåŠ¨è·å¾—é”å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡å›¾ç¤ºå’Œæºç æ¥åˆ†åˆ«è§£æä¸€ä¸‹ã€‚ è¿˜æ˜¯æ‰“æ°´çš„ä¾‹å­ï¼Œæœ‰å¤šä¸ªäººåœ¨æ’é˜Ÿæ‰“æ°´ï¼Œæ­¤æ—¶ç®¡ç†å‘˜å…è®¸é”å’ŒåŒä¸€ä¸ªäººçš„å¤šä¸ªæ°´æ¡¶ç»‘å®šã€‚è¿™ä¸ªäººç”¨å¤šä¸ªæ°´æ¡¶æ‰“æ°´æ—¶ï¼Œç¬¬ä¸€ä¸ªæ°´æ¡¶å’Œé”ç»‘å®šå¹¶æ‰“å®Œæ°´ä¹‹åï¼Œç¬¬äºŒä¸ªæ°´æ¡¶ä¹Ÿå¯ä»¥ç›´æ¥å’Œé”ç»‘å®šå¹¶å¼€å§‹æ‰“æ°´ï¼Œæ‰€æœ‰çš„æ°´æ¡¶éƒ½æ‰“å®Œæ°´ä¹‹åæ‰“æ°´äººæ‰ä¼šå°†é”è¿˜ç»™ç®¡ç†å‘˜ã€‚è¿™ä¸ªäººçš„æ‰€æœ‰æ‰“æ°´æµç¨‹éƒ½èƒ½å¤ŸæˆåŠŸæ‰§è¡Œï¼Œåç»­ç­‰å¾…çš„äººä¹Ÿèƒ½å¤Ÿæ‰“åˆ°æ°´ã€‚è¿™å°±æ˜¯å¯é‡å…¥é”ã€‚ ä½†å¦‚æœæ˜¯éå¯é‡å…¥é”çš„è¯ï¼Œæ­¤æ—¶ç®¡ç†å‘˜åªå…è®¸é”å’ŒåŒä¸€ä¸ªäººçš„ä¸€ä¸ªæ°´æ¡¶ç»‘å®šã€‚ç¬¬ä¸€ä¸ªæ°´æ¡¶å’Œé”ç»‘å®šæ‰“å®Œæ°´ä¹‹åå¹¶ä¸ä¼šé‡Šæ”¾é”ï¼Œå¯¼è‡´ç¬¬äºŒä¸ªæ°´æ¡¶ä¸èƒ½å’Œé”ç»‘å®šä¹Ÿæ— æ³•æ‰“æ°´ã€‚å½“å‰çº¿ç¨‹å‡ºç°æ­»é”ï¼Œæ•´ä¸ªç­‰å¾…é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½æ— æ³•è¢«å”¤é†’ã€‚ ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ReentrantLockå’Œsynchronizedéƒ½æ˜¯é‡å…¥é”ï¼Œé‚£ä¹ˆæˆ‘ä»¬é€šè¿‡é‡å…¥é”ReentrantLockä»¥åŠéå¯é‡å…¥é”NonReentrantLockçš„æºç æ¥å¯¹æ¯”åˆ†æä¸€ä¸‹ä¸ºä»€ä¹ˆéå¯é‡å…¥é”åœ¨é‡å¤è°ƒç”¨åŒæ­¥èµ„æºæ—¶ä¼šå‡ºç°æ­»é”ã€‚ é¦–å…ˆReentrantLockå’ŒNonReentrantLockéƒ½ç»§æ‰¿çˆ¶ç±»AQSï¼Œå…¶çˆ¶ç±»AQSä¸­ç»´æŠ¤äº†ä¸€ä¸ªåŒæ­¥çŠ¶æ€statusæ¥è®¡æ•°é‡å…¥æ¬¡æ•°ï¼Œstatusåˆå§‹å€¼ä¸º0ã€‚ å½“çº¿ç¨‹å°è¯•è·å–é”æ—¶ï¼Œå¯é‡å…¥é”å…ˆå°è¯•è·å–å¹¶æ›´æ–°statuså€¼ï¼Œå¦‚æœstatus &#x3D;&#x3D; 0è¡¨ç¤ºæ²¡æœ‰å…¶ä»–çº¿ç¨‹åœ¨æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œåˆ™æŠŠstatusç½®ä¸º1ï¼Œå½“å‰çº¿ç¨‹å¼€å§‹æ‰§è¡Œã€‚å¦‚æœstatus !&#x3D; 0ï¼Œåˆ™åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦æ˜¯è·å–åˆ°è¿™ä¸ªé”çš„çº¿ç¨‹ï¼Œå¦‚æœæ˜¯çš„è¯æ‰§è¡Œstatus+1ï¼Œä¸”å½“å‰çº¿ç¨‹å¯ä»¥å†æ¬¡è·å–é”ã€‚è€Œéå¯é‡å…¥é”æ˜¯ç›´æ¥å»è·å–å¹¶å°è¯•æ›´æ–°å½“å‰statusçš„å€¼ï¼Œå¦‚æœstatus !&#x3D; 0çš„è¯ä¼šå¯¼è‡´å…¶è·å–é”å¤±è´¥ï¼Œå½“å‰çº¿ç¨‹é˜»å¡ã€‚ é‡Šæ”¾é”æ—¶ï¼Œå¯é‡å…¥é”åŒæ ·å…ˆè·å–å½“å‰statusçš„å€¼ï¼Œåœ¨å½“å‰çº¿ç¨‹æ˜¯æŒæœ‰é”çš„çº¿ç¨‹çš„å‰æä¸‹ã€‚å¦‚æœstatus-1 &#x3D;&#x3D; 0ï¼Œåˆ™è¡¨ç¤ºå½“å‰çº¿ç¨‹æ‰€æœ‰é‡å¤è·å–é”çš„æ“ä½œéƒ½å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œç„¶åè¯¥çº¿ç¨‹æ‰ä¼šçœŸæ­£é‡Šæ”¾é”ã€‚è€Œéå¯é‡å…¥é”åˆ™æ˜¯åœ¨ç¡®å®šå½“å‰çº¿ç¨‹æ˜¯æŒæœ‰é”çš„çº¿ç¨‹ä¹‹åï¼Œç›´æ¥å°†statusç½®ä¸º0ï¼Œå°†é”é‡Šæ”¾ã€‚ ç‹¬äº«é” VS å…±äº«é”ç‹¬äº«é”å’Œå…±äº«é”åŒæ ·æ˜¯ä¸€ç§æ¦‚å¿µã€‚æˆ‘ä»¬å…ˆä»‹ç»ä¸€ä¸‹å…·ä½“çš„æ¦‚å¿µï¼Œç„¶åé€šè¿‡ReentrantLockå’ŒReentrantReadWriteLockçš„æºç æ¥ä»‹ç»ç‹¬äº«é”å’Œå…±äº«é”ã€‚ ç‹¬äº«é”ä¹Ÿå«æ’ä»–é”ï¼Œæ˜¯æŒ‡è¯¥é”ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹æ‰€æŒæœ‰ã€‚å¦‚æœçº¿ç¨‹Tå¯¹æ•°æ®AåŠ ä¸Šæ’å®ƒé”åï¼Œåˆ™å…¶ä»–çº¿ç¨‹ä¸èƒ½å†å¯¹AåŠ ä»»ä½•ç±»å‹çš„é”ã€‚è·å¾—æ’å®ƒé”çš„çº¿ç¨‹å³èƒ½è¯»æ•°æ®åˆèƒ½ä¿®æ”¹æ•°æ®ã€‚JDKä¸­çš„synchronizedå’ŒJUCä¸­Lockçš„å®ç°ç±»å°±æ˜¯äº’æ–¥é”ã€‚ å…±äº«é”æ˜¯æŒ‡è¯¥é”å¯è¢«å¤šä¸ªçº¿ç¨‹æ‰€æŒæœ‰ã€‚å¦‚æœçº¿ç¨‹Tå¯¹æ•°æ®AåŠ ä¸Šå…±äº«é”åï¼Œåˆ™å…¶ä»–çº¿ç¨‹åªèƒ½å¯¹Aå†åŠ å…±äº«é”ï¼Œä¸èƒ½åŠ æ’å®ƒé”ã€‚è·å¾—å…±äº«é”çš„çº¿ç¨‹åªèƒ½è¯»æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹æ•°æ®ã€‚ ç‹¬äº«é”ä¸å…±äº«é”ä¹Ÿæ˜¯é€šè¿‡AQSæ¥å®ç°çš„ï¼Œé€šè¿‡å®ç°ä¸åŒçš„æ–¹æ³•ï¼Œæ¥å®ç°ç‹¬äº«æˆ–è€…å…±äº«ã€‚ æˆ‘ä»¬çœ‹åˆ°ReentrantReadWriteLockæœ‰ä¸¤æŠŠé”ï¼šReadLockå’ŒWriteLockï¼Œç”±è¯çŸ¥æ„ï¼Œä¸€ä¸ªè¯»é”ä¸€ä¸ªå†™é”ï¼Œåˆç§°â€œè¯»å†™é”â€ã€‚å†è¿›ä¸€æ­¥è§‚å¯Ÿå¯ä»¥å‘ç°ReadLockå’ŒWriteLockæ˜¯é å†…éƒ¨ç±»Syncå®ç°çš„é”ã€‚Syncæ˜¯AQSçš„ä¸€ä¸ªå­ç±»ï¼Œè¿™ç§ç»“æ„åœ¨CountDownLatchã€ReentrantLockã€Semaphoreé‡Œé¢ä¹Ÿéƒ½å­˜åœ¨ã€‚ åœ¨ReentrantReadWriteLocké‡Œé¢ï¼Œè¯»é”å’Œå†™é”çš„é”ä¸»ä½“éƒ½æ˜¯Syncï¼Œä½†è¯»é”å’Œå†™é”çš„åŠ é”æ–¹å¼ä¸ä¸€æ ·ã€‚è¯»é”æ˜¯å…±äº«é”ï¼Œå†™é”æ˜¯ç‹¬äº«é”ã€‚è¯»é”çš„å…±äº«é”å¯ä¿è¯å¹¶å‘è¯»éå¸¸é«˜æ•ˆï¼Œè€Œè¯»å†™ã€å†™è¯»ã€å†™å†™çš„è¿‡ç¨‹äº’æ–¥ï¼Œå› ä¸ºè¯»é”å’Œå†™é”æ˜¯åˆ†ç¦»çš„ã€‚æ‰€ä»¥ReentrantReadWriteLockçš„å¹¶å‘æ€§ç›¸æ¯”ä¸€èˆ¬çš„äº’æ–¥é”æœ‰äº†å¾ˆå¤§æå‡ã€‚ é‚£è¯»é”å’Œå†™é”çš„å…·ä½“åŠ é”æ–¹å¼æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿåœ¨äº†è§£æºç ä¹‹å‰æˆ‘ä»¬éœ€è¦å›é¡¾ä¸€ä¸‹å…¶ä»–çŸ¥è¯†ã€‚ åœ¨æœ€å¼€å§‹æåŠAQSçš„æ—¶å€™æˆ‘ä»¬ä¹Ÿæåˆ°äº†stateå­—æ®µï¼ˆintç±»å‹ï¼Œ32ä½ï¼‰ï¼Œè¯¥å­—æ®µç”¨æ¥æè¿°æœ‰å¤šå°‘çº¿ç¨‹è·æŒæœ‰é”ã€‚ åœ¨ç‹¬äº«é”ä¸­è¿™ä¸ªå€¼é€šå¸¸æ˜¯0æˆ–è€…1ï¼ˆå¦‚æœæ˜¯é‡å…¥é”çš„è¯stateå€¼å°±æ˜¯é‡å…¥çš„æ¬¡æ•°ï¼‰ï¼Œåœ¨å…±äº«é”ä¸­stateå°±æ˜¯æŒæœ‰é”çš„æ•°é‡ã€‚ä½†æ˜¯åœ¨ReentrantReadWriteLockä¸­æœ‰è¯»ã€å†™ä¸¤æŠŠé”ï¼Œæ‰€ä»¥éœ€è¦åœ¨ä¸€ä¸ªæ•´å‹å˜é‡stateä¸Šåˆ†åˆ«æè¿°è¯»é”å’Œå†™é”çš„æ•°é‡ï¼ˆæˆ–è€…ä¹Ÿå¯ä»¥å«çŠ¶æ€ï¼‰ã€‚äºæ˜¯å°†stateå˜é‡â€œæŒ‰ä½åˆ‡å‰²â€åˆ‡åˆ†æˆäº†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œé«˜16ä½è¡¨ç¤ºè¯»é”çŠ¶æ€ï¼ˆè¯»é”ä¸ªæ•°ï¼‰ï¼Œä½16ä½è¡¨ç¤ºå†™é”çŠ¶æ€ï¼ˆå†™é”ä¸ªæ•°ï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 1234567891011121314151617181920protected final boolean tryAcquire(int acquires) &#123; Thread current = Thread.currentThread(); int c = getState(); // å–åˆ°å½“å‰é”çš„ä¸ªæ•° int w = exclusiveCount(c); // å–å†™é”çš„ä¸ªæ•°w if (c != 0) &#123; // å¦‚æœå·²ç»æœ‰çº¿ç¨‹æŒæœ‰äº†é”(c!=0) // (Note: if c != 0 and w == 0 then shared count != 0) if (w == 0 || current != getExclusiveOwnerThread()) // å¦‚æœå†™çº¿ç¨‹æ•°ï¼ˆwï¼‰ä¸º0ï¼ˆæ¢è¨€ä¹‹å­˜åœ¨è¯»é”ï¼‰ æˆ–è€…æŒæœ‰é”çš„çº¿ç¨‹ä¸æ˜¯å½“å‰çº¿ç¨‹å°±è¿”å›å¤±è´¥ return false; if (w + exclusiveCount(acquires) &gt; MAX_COUNT) // å¦‚æœå†™å…¥é”çš„æ•°é‡å¤§äºæœ€å¤§æ•°ï¼ˆ65535ï¼Œ2çš„16æ¬¡æ–¹-1ï¼‰å°±æŠ›å‡ºä¸€ä¸ªErrorã€‚ throw new Error(&quot;Maximum lock count exceeded&quot;); // Reentrant acquire setState(c + acquires); return true; &#125; if (writerShouldBlock() || !compareAndSetState(c, c + acquires)) // å¦‚æœå½“ä¸”å†™çº¿ç¨‹æ•°ä¸º0ï¼Œå¹¶ä¸”å½“å‰çº¿ç¨‹éœ€è¦é˜»å¡é‚£ä¹ˆå°±è¿”å›å¤±è´¥ï¼›æˆ–è€…å¦‚æœé€šè¿‡CASå¢åŠ å†™çº¿ç¨‹æ•°å¤±è´¥ä¹Ÿè¿”å›å¤±è´¥ã€‚ return false; setExclusiveOwnerThread(current); // å¦‚æœc=0ï¼Œw=0æˆ–è€…c&gt;0ï¼Œw&gt;0ï¼ˆé‡å…¥ï¼‰ï¼Œåˆ™è®¾ç½®å½“å‰çº¿ç¨‹æˆ–é”çš„æ‹¥æœ‰è€… return true;&#125; è¿™æ®µä»£ç é¦–å…ˆå–åˆ°å½“å‰é”çš„ä¸ªæ•°cï¼Œç„¶åå†é€šè¿‡cæ¥è·å–å†™é”çš„ä¸ªæ•°wã€‚å› ä¸ºå†™é”æ˜¯ä½16ä½ï¼Œæ‰€ä»¥å–ä½16ä½çš„æœ€å¤§å€¼ä¸å½“å‰çš„cåšä¸è¿ç®—ï¼ˆ int w &#x3D; exclusiveCountÂ©; ï¼‰ï¼Œé«˜16ä½å’Œ0ä¸è¿ç®—åæ˜¯0ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä½ä½è¿ç®—çš„å€¼ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æŒæœ‰å†™é”çš„çº¿ç¨‹æ•°ç›®ã€‚ åœ¨å–åˆ°å†™é”çº¿ç¨‹çš„æ•°ç›®åï¼Œé¦–å…ˆåˆ¤æ–­æ˜¯å¦å·²ç»æœ‰çº¿ç¨‹æŒæœ‰äº†é”ã€‚å¦‚æœå·²ç»æœ‰çº¿ç¨‹æŒæœ‰äº†é”(c!&#x3D;0)ï¼Œåˆ™æŸ¥çœ‹å½“å‰å†™é”çº¿ç¨‹çš„æ•°ç›®ï¼Œå¦‚æœå†™çº¿ç¨‹æ•°ä¸º0ï¼ˆå³æ­¤æ—¶å­˜åœ¨è¯»é”ï¼‰æˆ–è€…æŒæœ‰é”çš„çº¿ç¨‹ä¸æ˜¯å½“å‰çº¿ç¨‹å°±è¿”å›å¤±è´¥ï¼ˆæ¶‰åŠåˆ°å…¬å¹³é”å’Œéå…¬å¹³é”çš„å®ç°ï¼‰ã€‚ å¦‚æœå†™å…¥é”çš„æ•°é‡å¤§äºæœ€å¤§æ•°ï¼ˆ65535ï¼Œ2çš„16æ¬¡æ–¹-1ï¼‰å°±æŠ›å‡ºä¸€ä¸ªErrorã€‚ å¦‚æœå½“ä¸”å†™çº¿ç¨‹æ•°ä¸º0ï¼ˆé‚£ä¹ˆè¯»çº¿ç¨‹ä¹Ÿåº”è¯¥ä¸º0ï¼Œå› ä¸ºä¸Šé¢å·²ç»å¤„ç†c!&#x3D;0çš„æƒ…å†µï¼‰ï¼Œå¹¶ä¸”å½“å‰çº¿ç¨‹éœ€è¦é˜»å¡é‚£ä¹ˆå°±è¿”å›å¤±è´¥ï¼›å¦‚æœé€šè¿‡CASå¢åŠ å†™çº¿ç¨‹æ•°å¤±è´¥ä¹Ÿè¿”å›å¤±è´¥ã€‚ å¦‚æœc&#x3D;0,w&#x3D;0æˆ–è€…c&gt;0,w&gt;0ï¼ˆé‡å…¥ï¼‰ï¼Œåˆ™è®¾ç½®å½“å‰çº¿ç¨‹æˆ–é”çš„æ‹¥æœ‰è€…ï¼Œè¿”å›æˆåŠŸï¼ tryAcquire()é™¤äº†é‡å…¥æ¡ä»¶ï¼ˆå½“å‰çº¿ç¨‹ä¸ºè·å–äº†å†™é”çš„çº¿ç¨‹ï¼‰ä¹‹å¤–ï¼Œå¢åŠ äº†ä¸€ä¸ªè¯»é”æ˜¯å¦å­˜åœ¨çš„åˆ¤æ–­ã€‚å¦‚æœå­˜åœ¨è¯»é”ï¼Œåˆ™å†™é”ä¸èƒ½è¢«è·å–ï¼ŒåŸå› åœ¨äºï¼šå¿…é¡»ç¡®ä¿å†™é”çš„æ“ä½œå¯¹è¯»é”å¯è§ï¼Œå¦‚æœå…è®¸è¯»é”åœ¨å·²è¢«è·å–çš„æƒ…å†µä¸‹å¯¹å†™é”çš„è·å–ï¼Œé‚£ä¹ˆæ­£åœ¨è¿è¡Œçš„å…¶ä»–è¯»çº¿ç¨‹å°±æ— æ³•æ„ŸçŸ¥åˆ°å½“å‰å†™çº¿ç¨‹çš„æ“ä½œã€‚ å› æ­¤ï¼Œåªæœ‰ç­‰å¾…å…¶ä»–è¯»çº¿ç¨‹éƒ½é‡Šæ”¾äº†è¯»é”ï¼Œå†™é”æ‰èƒ½è¢«å½“å‰çº¿ç¨‹è·å–ï¼Œè€Œå†™é”ä¸€æ—¦è¢«è·å–ï¼Œåˆ™å…¶ä»–è¯»å†™çº¿ç¨‹çš„åç»­è®¿é—®å‡è¢«é˜»å¡ã€‚å†™é”çš„é‡Šæ”¾ä¸ReentrantLockçš„é‡Šæ”¾è¿‡ç¨‹åŸºæœ¬ç±»ä¼¼ï¼Œæ¯æ¬¡é‡Šæ”¾å‡å‡å°‘å†™çŠ¶æ€ï¼Œå½“å†™çŠ¶æ€ä¸º0æ—¶è¡¨ç¤ºå†™é”å·²è¢«é‡Šæ”¾ï¼Œç„¶åç­‰å¾…çš„è¯»å†™çº¿ç¨‹æ‰èƒ½å¤Ÿç»§ç»­è®¿é—®è¯»å†™é”ï¼ŒåŒæ—¶å‰æ¬¡å†™çº¿ç¨‹çš„ä¿®æ”¹å¯¹åç»­çš„è¯»å†™çº¿ç¨‹å¯è§ã€‚ æ¥ç€æ˜¯è¯»é”çš„ä»£ç ï¼š 123456789101112131415161718192021222324252627protected final int tryAcquireShared(int unused) &#123; Thread current = Thread.currentThread(); int c = getState(); if (exclusiveCount(c) != 0 &amp;&amp; getExclusiveOwnerThread() != current) return -1; // å¦‚æœå…¶ä»–çº¿ç¨‹å·²ç»è·å–äº†å†™é”ï¼Œåˆ™å½“å‰çº¿ç¨‹è·å–è¯»é”å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ int r = sharedCount(c); if (!readerShouldBlock() &amp;&amp; r &lt; MAX_COUNT &amp;&amp; compareAndSetState(c, c + SHARED_UNIT)) &#123; if (r == 0) &#123; firstReader = current; firstReaderHoldCount = 1; &#125; else if (firstReader == current) &#123; firstReaderHoldCount++; &#125; else &#123; HoldCounter rh = cachedHoldCounter; if (rh == null || rh.tid != getThreadId(current)) cachedHoldCounter = rh = readHolds.get(); else if (rh.count == 0) readHolds.set(rh); rh.count++; &#125; return 1; &#125; return fullTryAcquireShared(current);&#125; å¯ä»¥çœ‹åˆ°åœ¨tryAcquireShared(int unused)æ–¹æ³•ä¸­ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹å·²ç»è·å–äº†å†™é”ï¼Œåˆ™å½“å‰çº¿ç¨‹è·å–è¯»é”å¤±è´¥ï¼Œè¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚å¦‚æœå½“å‰çº¿ç¨‹è·å–äº†å†™é”æˆ–è€…å†™é”æœªè¢«è·å–ï¼Œåˆ™å½“å‰çº¿ç¨‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œä¾é CASä¿è¯ï¼‰å¢åŠ è¯»çŠ¶æ€ï¼ŒæˆåŠŸè·å–è¯»é”ã€‚è¯»é”çš„æ¯æ¬¡é‡Šæ”¾ï¼ˆçº¿ç¨‹å®‰å…¨çš„ï¼Œå¯èƒ½æœ‰å¤šä¸ªè¯»çº¿ç¨‹åŒæ—¶é‡Šæ”¾è¯»é”ï¼‰å‡å‡å°‘è¯»çŠ¶æ€ï¼Œå‡å°‘çš„å€¼æ˜¯â€œ1&lt;&lt;16â€ã€‚æ‰€ä»¥è¯»å†™é”æ‰èƒ½å®ç°è¯»è¯»çš„è¿‡ç¨‹å…±äº«ï¼Œè€Œè¯»å†™ã€å†™è¯»ã€å†™å†™çš„è¿‡ç¨‹äº’æ–¥ã€‚ æ­¤æ—¶ï¼Œæˆ‘ä»¬å†å›å¤´çœ‹ä¸€ä¸‹äº’æ–¥é”ReentrantLockä¸­å…¬å¹³é”å’Œéå…¬å¹³é”çš„åŠ é”æºç ï¼š æˆ‘ä»¬å‘ç°åœ¨ReentrantLockè™½ç„¶æœ‰å…¬å¹³é”å’Œéå…¬å¹³é”ä¸¤ç§ï¼Œä½†æ˜¯å®ƒä»¬æ·»åŠ çš„éƒ½æ˜¯ç‹¬äº«é”ã€‚æ ¹æ®æºç æ‰€ç¤ºï¼Œå½“æŸä¸€ä¸ªçº¿ç¨‹è°ƒç”¨lockæ–¹æ³•è·å–é”æ—¶ï¼Œå¦‚æœåŒæ­¥èµ„æºæ²¡æœ‰è¢«å…¶ä»–çº¿ç¨‹é”ä½ï¼Œé‚£ä¹ˆå½“å‰çº¿ç¨‹åœ¨ä½¿ç”¨CASæ›´æ–°stateæˆåŠŸåå°±ä¼šæˆåŠŸæŠ¢å è¯¥èµ„æºã€‚è€Œå¦‚æœå…¬å…±èµ„æºè¢«å ç”¨ä¸”ä¸æ˜¯è¢«å½“å‰çº¿ç¨‹å ç”¨ï¼Œé‚£ä¹ˆå°±ä¼šåŠ é”å¤±è´¥ã€‚æ‰€ä»¥å¯ä»¥ç¡®å®šReentrantLockæ— è®ºè¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œï¼Œæ·»åŠ çš„é”éƒ½æ˜¯éƒ½æ˜¯ç‹¬äº«é”ã€‚ å‚è€ƒ volatileå’Œsynchronizedçš„åŒºåˆ« https://stackoverflow.com/questions/9851133/when-to-use-volatile-and-synchronized https://tech.meituan.com/2018/11/15/java-lock.html","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"æ··åˆå¼€å‘","date":"2022-03-08T02:25:29.666Z","path":"wiki/Flutter/æ··åˆå¼€å‘/","text":"å®˜æ–¹æ–¹æ¡ˆhttps://flutter.cn/docs/development/add-to-app/android/project-setup flutter_boosthttps://github.com/alibaba/flutter_boost","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"çŠ¶æ€ç®¡ç†","date":"2022-03-08T02:25:29.666Z","path":"wiki/Flutter/çŠ¶æ€ç®¡ç†/","text":"æ¦‚è¿°ä»€ä¹ˆæ˜¯çŠ¶æ€ç®¡ç†ï¼Ÿ è¿™é‡Œçš„çŠ¶æ€æŒ‡çš„æ˜¯UIçš„çŠ¶æ€ï¼Œä¸åŒçš„åœºæ™¯ä¸‹å±•ç¤ºä¸åŒçš„UIï¼Œæ‰€ä»¥éœ€è¦ä¸€ç§æ–¹å¼æ¥ç®¡ç†UIä¸åŒçš„çŠ¶æ€ã€‚flutterçš„å¾ˆå¤šè®¾è®¡éƒ½å€Ÿé‰´æ¥Reactï¼Œè€ŒReactä¸­å°±æœ‰ä¸“é—¨ç”¨æ¥è¿›è¡ŒçŠ¶æ€ç®¡ç†çš„æ–¹æ¡ˆã€‚æ¯”å¦‚reduxã€blocç­‰ï¼Œæ‰€ä»¥åˆ°äº†flutterè¿™é‡Œï¼Œå°±æœ‰äº†flutter_reduxã€flutter_blocã€‚ çŠ¶æ€ç®¡ç†è§£å†³çš„é—®é¢˜ï¼š çŠ¶æ€ä¿å­˜å“ªé‡Œ çŠ¶æ€å¦‚ä½•è·å– UIå¦‚ä½•æ›´æ–° å¦‚ä½•æ”¹å˜çŠ¶æ€ å¦‚ä½•é€‰æ‹©å¼€æºæ–¹æ¡ˆ ä¸Šæ‰‹ç¨‹åº¦ æ€§èƒ½æ¯”è¾ƒ é«˜æ‰©å±•æ€§ flutteræœ¬èº«æ”¯æŒçŠ¶æ€ç®¡ç†çš„æ–¹å¼ State ç¼ºç‚¹ï¼š æ— æ³•åšåˆ°è·¨ç»„ä»¶å…±äº«æ•°æ® å¤„ç†æ•°æ®é€»è¾‘å’Œè§†å›¾æ··åˆåœ¨ä¸€èµ·ï¼Œè¿åä»£ç è®¾è®¡åŸåˆ™ InheritedWidgetï¼šå‘ä¸‹å…±äº«æ•°æ® ç¼ºç‚¹ï¼š å®¹æ˜“é€ æˆä¸å¿…è¦çš„åˆ·æ–° ä¸æ”¯æŒè·¨é¡µé¢(route)çš„çŠ¶æ€ æ•°æ®æ˜¯ä¸å¯å˜çš„ï¼Œå¿…é¡»ç»“åˆStatefulWidgetã€ChangeNotifieræˆ–è€…Steamä½¿ç”¨ Notificationï¼šå‘ä¸Šå…±äº«æ•°æ® ç¼ºç‚¹ï¼š ä¸æ”¯æŒè·¨é¡µé¢(route)çš„çŠ¶æ€ï¼Œå‡†å¤‡çš„è¯´ä¸æ”¯æŒNotificationListeneråŒçº§æˆ–è€…çˆ¶çº§Widgetçš„çŠ¶æ€é€šçŸ¥ æœ¬èº«ä¸æ”¯æŒåˆ·æ–°UIï¼Œéœ€è¦ç»“åˆStateä½¿ç”¨ å¦‚æœç»“åˆStateï¼Œä¼šå¯¼è‡´æ•´ä¸ªUIçš„é‡ç»˜ Streamï¼šDartçš„å¼‚æ­¥APIï¼Œflutterä¸­æœ‰StreamBuilderçš„å°è£… ChangeNotifierï¼šå±æ€§ç»‘å®šåˆ·æ–° setStateä¼˜ç‚¹ï¼š ç®€å•åœºæ™¯ä¸‹ç‰¹åˆ«é€‚ç”¨ï¼Œé€»è¾‘ç®€å•ï¼Œæ˜“æ‡‚æ˜“å®ç° æ‰€è§å³æ‰€å¾—ï¼Œæ•ˆç‡æ¯”è¾ƒé«˜ ç¼ºç‚¹: é€»è¾‘ä¸è§†å›¾è€¦åˆä¸¥é‡ï¼Œå¤æ‚é€»è¾‘ä¸‹å¯ç»´æŠ¤æ€§å¾ˆå·® æ•°æ®ä¼ è¾“åŸºäºä¾èµ–ä¼ é€’ï¼Œå±‚çº§è¾ƒæ·±æƒ…å†µä¸‹ä¸æ˜“ç»´æŠ¤ï¼Œå¯è¯»æ€§å·® ä½¿ç”¨åœºæ™¯ï¼š Widgetå†…éƒ¨çš„çŠ¶æ€ç®¡ç† scoped_modelproviderflutteræä¾›çš„çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ è·å–ä¿¡æ¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263///ä½¿ç”¨Provider.ofWidget build(BuildContext context) &#123; return Container(child: MyText());&#125;class MyText extends StatelessWidget &#123; @override Widget build(BuildContext context) &#123; final text = Provider.of&lt;String&gt;(context); return Text(text); &#125;&#125;///ä½¿ç”¨ConsumerWidget getWidget2(BuildContext context) &#123;return Consumer&lt;BusinessPattern&gt;(builder: (context, businessModel, child) &#123; switch (businessModel.currentState) &#123; case PatternState.none: return Text(&quot;æ— æ¨¡å¼&quot;); break; case PatternState.normal: return Text(&quot;æ­£å¸¸æ¨¡å¼&quot;); break; case PatternState.small: return Text(&quot;å°å±æ¨¡å¼&quot;); break; case PatternState.overview: return Text(&quot;å…¨å±æ¨¡å¼&quot;); break; default: return Text(&quot;å…¶ä»–æ¨¡å¼&quot;); return SizedBox(); &#125;&#125;);&#125;///ä½¿ç”¨SelectorWidget getWidget4(BuildContext context) &#123;return Selector&lt;BusinessPattern, PatternState&gt;(selector: (context, businessPattern) =&gt;businessPattern.currentState,builder: (context, state, child) &#123; switch (state) &#123; case PatternState.none: return Text(&quot;æ— æ¨¡å¼&quot;); break; case PatternState.normal: return Text(&quot;æ­£å¸¸æ¨¡å¼&quot;); break; case PatternState.small: return Text(&quot;å°å±æ¨¡å¼&quot;); break; case PatternState.overview: return Text(&quot;å…¨å±æ¨¡å¼&quot;); break; default: return Text(&quot;å…¶ä»–æ¨¡å¼&quot;); return SizedBox(); &#125;&#125;); flutter_blocblocæ˜¯åŸºäºRxDartå¼€å‘çš„çº¯dartåº“ å‚è€ƒ å®˜æ–¹æ–‡æ¡£ Flutterä¸­çš„blocæ¨¡å¼è§£æ flutter_reduxä¸ºäº†è§£å†³ç»„ä»¶é—´çš„é€šä¿¡ï¼ŒFacebookæå‡ºäº†Fluxçš„æ¦‚å¿µï¼Œéšåå‡ºç°Reduxï¼Œå…¶åŸºäºå‡½æ•°å¼ç¼–ç¨‹å®ç°ã€‚ flutter_mobxhttps://mobx.netlify.com/getting-started flutter_hookså‚è€ƒ https://segmentfault.com/a/1190000040543449 flutterçŠ¶æ€ç®¡ç†è°ƒç ” Flutter State ManagementçŠ¶æ€ç®¡ç†å…¨é¢åˆ†æ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"ä¾èµ–å†²çªå¤„ç†","date":"2022-03-08T02:25:29.666Z","path":"wiki/Flutter/æœªåˆ†ç±»/ä¾èµ–å†²çªå¤„ç†/","text":"Flutter | å¦‚ä½•ä¼˜é›…çš„è§£å†³ä¾èµ–ç‰ˆæœ¬å†²çª","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"æ‰“åŒ…","date":"2022-03-08T02:25:29.666Z","path":"wiki/Flutter/æœªåˆ†ç±»/æ‰“åŒ…/","text":"ä¸‹è½½è¯ä¹¦ï¼Œæœ¬åœ°å®‰è£…åˆ°é’¥åŒ™é“¾ä¸­ é…ç½®Xcode æ‰“åŒ…å‘½ä»¤ä¿®æ”¹é¡¹ç›®çš„ç‰ˆæœ¬å·å’Œæ„å»ºæ¬¡æ•°è‹¥è¦ä½¿pubspec.yamlæ–‡ä»¶ä¸­çš„versionç”Ÿæ•ˆï¼Œéœ€è¦ä¿®æ”¹Androidã€iOSé¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚ Androidé¡¹ç›®é…ç½®æ–‡ä»¶ä¿®æ”¹ç¡®è®¤android&#x2F;app&#x2F;build.gradleæ–‡ä»¶ä¸­ä½¿ç”¨äº†Flutterçš„versionCodeå’ŒversionName 123456789101112131415161718192021222324252627282930313233343536373839def localProperties = new Properties()def localPropertiesFile = rootProject.file(&#x27;local.properties&#x27;)if (localPropertiesFile.exists()) &#123; localPropertiesFile.withReader(&#x27;UTF-8&#x27;) &#123; reader -&gt; localProperties.load(reader) &#125;&#125;def flutterRoot = localProperties.getProperty(&#x27;flutter.sdk&#x27;)if (flutterRoot == null) &#123; throw new FileNotFoundException(&quot;Flutter SDK not found. Define location with flutter.sdk in the local.properties file.&quot;)&#125;def flutterVersionCode = localProperties.getProperty(&#x27;flutter.versionCode&#x27;)if (flutterVersionCode == null) &#123; flutterVersionCode = &#x27;1&#x27;&#125;def flutterVersionName = localProperties.getProperty(&#x27;flutter.versionName&#x27;)if (flutterVersionName == null) &#123; flutterVersionName = &#x27;1.0&#x27;&#125;android &#123; compileSdkVersion 31 compileOptions &#123; sourceCompatibility JavaVersion.VERSION_1_8 targetCompatibility JavaVersion.VERSION_1_8 &#125; defaultConfig &#123; applicationId &quot;com.xiaopeng.scepter&quot; minSdkVersion 21 targetSdkVersion 31 versionCode flutterVersionCode.toInteger() versionName flutterVersionName &#125;&#125; iOSé¡¹ç›®ios&#x2F;Runner&#x2F;Info.plistæ–‡ä»¶ä¸­ä½¿ç”¨Flutterçš„å˜é‡ï¼Œä½¿ç”¨$(FLUTTER_BUILD_NAME)å’Œ$(FLUTTER_BUILD_NUMBER)ã€‚ 123456789101112&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;&lt;plist version=&quot;1.0&quot;&gt;&lt;dict&gt; ... &lt;key&gt;CFBundleShortVersionString&lt;/key&gt; &lt;string&gt;$(FLUTTER_BUILD_NAME)&lt;/string&gt; &lt;key&gt;CFBundleVersion&lt;/key&gt; &lt;string&gt;$(FLUTTER_BUILD_NUMBER)&lt;/string&gt; ...&lt;/dict&gt;&lt;/plist&gt; æ„å»ºè„šæœ¬è®¾ç½®ç‰ˆæœ¬123# è®¾ç½®ç‰ˆæœ¬å·ã€è®¾ç½®æ„å»ºæ¬¡æ•°flutter build apk --build-name=1.1.1 --build-number=3 åŒ…ä½“ç§¯ä¼˜åŒ–12345# --analyze-sizeå‚æ•°ç”¨äºç”Ÿæˆ*-code-size-analysis_*.jsonæ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å¯ä»¥å¯¼å…¥åˆ°devtoolsä¸­è¿›è¡Œåˆ†æåŒ…ç»„æˆflutter build xx --analyze-size# æ‰“å¼€devtoolsflutter pub global run devtools ä¼˜åŒ–æ–¹æ³•ä½¿ç”¨obfuscateå‚æ•°obfuscateå‚æ•°ä¼šå¯¹åº”ç”¨è¿›è¡Œæ··æ·†ï¼Œsplit-debug-infoå‚æ•°é…ç½®ç¬¦å·è¡¨è¾“å‡ºè·¯å¾„ï¼Œç”¨äºåç»­è§£æã€‚ 12flutter build apk --obfuscate --split-debug-info=/&lt;project-name&gt;/&lt;directory&gt; å‚è€ƒ https://flutter.cn/docs/perf/app-size https://flutter.cn/docs/deployment/obfuscate Flutter 2.0 iOSåŒ…å¤§å°ä¼˜åŒ– æ‰‹æŠŠæ‰‹æ•™ä½ åˆ†ç¦»flutter iosç¼–è¯‘äº§ç‰©-é™„å·¥å…·","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"æ»šåŠ¨æ¡","date":"2022-03-08T02:25:29.666Z","path":"wiki/Flutter/æœªåˆ†ç±»/æ»šåŠ¨æ¡/","text":"åˆ†ç±» CustomScrollView DraggableScrollableSheet GridView ListView NestedScrollView NotificationListener PageView RefreshIndicator ReorderableListView ScrollCongiurationï¼šä¸€ä¸ªInheritedWidgetï¼Œä½œç”¨æ˜¯ç»™Scrollableä¼ é€’ScrollBehavior Scrollableï¼š Scrollbarï¼š SingleChildScrollView æ»‘åŠ¨ä½“ç³» Viewportï¼šè§†å£ï¼Œä¸€ä¸ªå›ºå®šå¤§å°çš„çª—å£ï¼›å®ƒæ ¹æ®è‡ªå…ƒç´ çš„å¤§å°å’Œç»™å®šçš„[ViewportOffset offset]æ˜¾ç¤ºä¸åŒçš„å­å…ƒç´ ï¼ˆoffsetæŒ‡ScrollPositionï¼‰ ShrinkWrappingViewportï¼šåœ¨performLayouté˜¶æ®µæ‰èƒ½ç¡®å®šè‡ªå·±çš„å¤§å°ï¼Œå› ä¸ºå®ƒçš„å¤§å°ä¾èµ–äºè‡ªå·±çš„å­widgetï¼Œéœ€è¦å…ˆç»Ÿè®¡å­viewçš„å¤§å°ï¼Œæ‰èƒ½ç¡®å®šè‡ªèº«çš„å¤§å° Viewportï¼šåœ¨performSizeé˜¶æ®µå°±å¯ä»¥ç¡®å®šè‡ªå·±çš„å¤§å° ScrollPosition extend ViewportOffsetï¼šæ»‘åŠ¨ä½ç½®æ§åˆ¶å™¨ã€‚ ç¡®å®šåœ¨[Viewport]å“ªä¸€éƒ¨åˆ†æ˜¾ç¤º [pixels]å€¼å†³å®šäº†æ»šåŠ¨è§†å›¾ç”¨æ¥é€‰æ‹©æ˜¾ç¤ºå…¶å†…å®¹çš„å“ªä¸€éƒ¨åˆ†çš„æ»šåŠ¨åç§»é‡ã€‚å½“ç”¨æˆ·æ»šåŠ¨è§†å›¾æ—¶ï¼Œè¯¥å€¼ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä»è€Œæ”¹å˜æ˜¾ç¤ºå†…å®¹ [ScrollPosition]å°†[physics]åº”ç”¨äºæ»šåŠ¨ï¼Œå¹¶å­˜å‚¨[minScrollExtent]å’Œ[maxScrollExtent] æ¯ä¸ªScrollableå¯¹åº”å”¯ä¸€çš„ScrollPositionç®¡ç†æ»‘åŠ¨ä¿¡æ¯ keepScrollOffsetï¼šç”¨[PageStorage]ä¿å­˜å½“å‰æ»šåŠ¨åç§»é‡ ScrollControllerï¼šæ»‘åŠ¨æ§åˆ¶å™¨ ScrollPhysicsï¼šæ»‘åŠ¨ç‰©ç†æ¨¡æ‹Ÿ ScrollViewï¼šå¯æ»‘åŠ¨è§†å›¾çš„çˆ¶ç±»ï¼ŒListViewã€CustomScrollViewã€GridViewéƒ½æ˜¯å®ƒçš„å­ç±»ï¼Œå®ƒä»¬é€šè¿‡å®ç°buildSliverså‡½æ•°ä¸ºScroolViewæä¾›å­è§†å›¾ï¼ŒåŒæ—¶å°†ScrollControllerã€ScrollPhysicsã€ViewportBuilderã€childrenç­‰ä¼ é€’ç»™Scrollable ScrollActivityï¼šè¡¨ç¤ºæ»‘åŠ¨è¿‡ç¨‹ä¸­æŸä¸€é˜¶æ®µï¼Œè®°å½•äº†å½“å‰çš„çŠ¶æ€ï¼Œæ¯”å¦‚æ˜¯å¦æ»‘åŠ¨ä¸­ã€å½“å‰çš„æ»‘åŠ¨é€Ÿåº¦ç­‰ delegateï¼ŒScrollActivityDelegateï¼Œæœ‰äº›æ›´æ–°æ»‘åŠ¨ä½ç½®çš„å®ç°ï¼Œä¸€èˆ¬æ˜¯ScrollPositionå¯„å…¶å­ç±» shouldIgnorePotinterï¼Œæ˜¯å¦å¿½ç•¥è§¦æ‘¸äº‹ä»¶ï¼Œè¿™é‡Œçš„ä¸»ä½“ï¼Œæ˜¯ Scrollable çš„å­ widgetï¼Œä¹Ÿå°±æ˜¯ Viewportï¼Œè€Œåœ¨ Scrollable ä¸­ç”¨äºæ¥æ”¶æ‰‹åŠ¿æ»‘åŠ¨çš„ RawGestureDetector åœ¨å®ƒä¹‹ä¸Šï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªå‚æ•°å¹¶ä¸æ˜¯æ§åˆ¶æ˜¯å¦æ£€æµ‹æ»‘åŠ¨æ‰‹åŠ¿ï¼Œè€Œæ˜¯å¾…æ»‘åŠ¨çš„å†…å®¹æ˜¯å¦å¯ä»¥æ¥æ”¶äº‹ä»¶ï¼Œæ‰€ä»¥ï¼Œåœ¨ä¼—å¤š ScrollActivity ä¸­ï¼Œåªæœ‰ HoldScrollActivity å’Œ IdleScrollActivity ä¸­å®ƒçš„å€¼æ‰ä¸º true isScrollingï¼šæ˜¯å¦å¤„äºæ»‘åŠ¨çŠ¶æ€ velocityï¼šå¦‚æœæ˜¯æ»‘åŠ¨çŠ¶æ€ï¼Œå½“å‰çš„æ»‘åŠ¨é€Ÿåº¦ ScrollPhysicsï¼šæè¿°æ»šåŠ¨çš„ç‰©ç†å±æ€§ springï¼šSpringDescriptionï¼Œæè¿°äº†æ»‘åŠ¨çš„ä¸€äº›ç‰©ç†ç‰¹æ€§ï¼Œä¼šåœ¨åˆ›å»ºSimulationæ—¶ä¼ é€’è¿‡å» toleranceï¼ŒToleranceï¼Œå®šä¹‰äº†ä¸€äº›å¯å¿½ç•¥çš„è·ç¦»ã€é€Ÿåº¦ã€æ—¶é—´ç­‰ flingDistanceï¼Œå®šä¹‰äº†æœ€å°çš„å¯è¢«è®¤å®šä¸ºflingæ‰‹åŠ¿çš„è·ç¦» flingVelocityï¼Œå®šä¹‰äº†æœ€å°çš„å¯è¢«è®¤å®šä¸ºflingæ‰‹åŠ¿çš„é€Ÿåº¦ï¼Œå’Œæœ€å¤§çš„flingé€Ÿåº¦ dragStartDistanceMotionThresholdï¼Œå®šä¹‰äº†å¼€å§‹æ»‘åŠ¨æ—¶ï¼Œå¯è¢«è®¤å®šæ˜¯æ»‘åŠ¨æ‰‹åŠ¿çš„æœ€å°è·ç¦» allowImplicitScrolling: ScrollActivityåˆ†ç±»ä¸æ»‘åŠ¨ HoldScrollActivity IdleScrollActivity æ»‘åŠ¨ DragScrollActivityï¼ˆäº‹ä»¶é©±åŠ¨ï¼‰ï¼šæ»‘åŠ¨è¿‡ç¨‹æ˜¯æ ¹æ®å¤–éƒ¨ä¼ è¿›æ¥çš„æ»‘åŠ¨äº‹ä»¶ï¼Œæ¥å†³å®šæ˜¯å¦ä»¥åŠå¦‚ä½•æ›´æ–°è§†å›¾ BallisticScrollActivityï¼ˆé€Ÿåº¦é©±åŠ¨ï¼‰ï¼šå½“ drag ç³»åˆ—äº‹ä»¶ç»“æŸåï¼Œä¼šç•™ä¸‹ä¸€ä¸ªæ»‘åŠ¨é€Ÿåº¦ï¼Œæ­¤æ—¶æ»‘åŠ¨å¹¶ä¸ä¼šåœæ­¢ï¼Œè€Œæ˜¯åœ¨åŸºäºè¿™ä¸ªé€Ÿåº¦ä¸‹ï¼Œåšå‡é€Ÿæ»‘åŠ¨ï¼Œç›´åˆ°é€Ÿåº¦ä¸º 0ï¼Œæˆ–è€…æ»‘åŠ¨åˆ°è¾¹ç•Œï¼Œè¿™ä¸ªé˜¶æ®µï¼Œå¯¹åº”çš„å°±æ˜¯ BallisticScrollActivity DrivenScrollActivityï¼ˆåŠ¨ç”»é©±åŠ¨ï¼‰ï¼šå½“æˆ‘ä»¬ç›´æ¥é€šè¿‡ ScrollController æ§åˆ¶ Scrollable è¿›è¡Œæ»‘åŠ¨æ—¶ï¼Œä¸€èˆ¬å°±æ˜¯è°ƒç”¨ animateToï¼Œä¼šåˆ›å»ºä¸€ä¸ª DrivenScrollActivityï¼Œæ ¹æ®å½“å‰ç»™å‡ºçš„ durationã€curve ç­‰ï¼Œåˆ›å»ºä¸€ä¸ªåŠ¨ç”»å¹¶æ‰§è¡Œã€‚åœ¨ BallisticScrollActivity æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”¨äºå†³å®šæ»‘åŠ¨ä½ç½®çš„å°±æ˜¯ Simulation ScrollPhysicsåˆ†ç±» BouncingScrollPhysicsï¼šå…è®¸æ»šåŠ¨è¶…å‡ºè¾¹ç•Œï¼Œä½†ä¹‹åå†…å®¹ä¼šå›å¼¹ ClampingScrollPhysicsï¼šé˜²æ­¢æ»šåŠ¨è¶…å‡ºè¾¹ç•Œ AlwaysScrollableScrollPhysicsï¼šå§‹ç»ˆå“åº”ç”¨æˆ·çš„æ»šåŠ¨ NeverScrollableScrollPhysicsï¼šä¸å“åº”ç”¨æˆ·çš„æ»šåŠ¨ 1234567891011121314151617181920212223/// [position] å½“å‰çš„ä½ç½®, [offset] ç”¨æˆ·æ‹–æ‹½è·ç¦»/// å°†ç”¨æˆ·æ‹–æ‹½è·ç¦» offset è½¬ä¸ºéœ€è¦ç§»åŠ¨çš„ pixelsdouble applyPhysicsToUserOffset(ScrollMetrics position, double offset)/// è¿”å› overscroll ï¼Œå¦‚æœè¿”å› 0 ï¼Œoverscroll å°±ä¸€ç›´æ˜¯0/// è¿”å›è¾¹ç•Œæ¡ä»¶double applyBoundaryConditions(ScrollMetrics position, double value)///åˆ›å»ºä¸€ä¸ªæ»šåŠ¨çš„æ¨¡æ‹Ÿå™¨Simulation createBallisticSimulation(ScrollMetrics position, double velocity) ///æœ€å°æ»šåŠ¨æ•°æ® double get minFlingVelocity///ä¼ è¾“åŠ¨é‡ï¼Œè¿”å›é‡å¤æ»šåŠ¨æ—¶çš„é€Ÿåº¦double carriedMomentum(double existingVelocity)///æœ€å°çš„å¼€å§‹æ‹–æ‹½è·ç¦»double get dragStartDistanceMotionThreshold///æ»šåŠ¨æ¨¡æ‹Ÿçš„å…¬å·®///æŒ‡å®šè·ç¦»ã€æŒç»­æ—¶é—´å’Œé€Ÿåº¦å·®åº”è§†ä¸ºå¹³ç­‰çš„å·®å¼‚çš„ç»“æ„ã€‚Tolerance get tolerance SingleChildScrollViewç±»ä¼¼Androidä¸­çš„ScrollViewï¼Œå¤„ç†ç®€å•å¯æ»‘åŠ¨çš„é¡µé¢å¸ƒå±€è§†å›¾ï¼Œå½“å†…å®¹è¶³å¤Ÿå¤šæ—¶ï¼Œä¸€å±æ˜¾ç¤ºä¸ä¸‹æ—¶ï¼Œå°±éœ€è¦æ»‘åŠ¨å¤„ç†ã€‚ 12345678910const SingleChildScrollView(&#123; Key key, this.scrollDirection = Axis.vertical,//è®¾ç½®è§†å›¾çš„æ»šåŠ¨æ–¹å‘(é»˜è®¤å‚ç›´æ–¹å‘), éœ€è¦å¯¹åº”çš„è®¾ç½®å…¶å­ Widget æ˜¯ Column æˆ–è€… Row, å¦åˆ™ä¼šæŠ¥ Overflow é”™è¯¯ã€‚ this.reverse = false,//æ˜¯å¦æŒ‰ç…§é˜…è¯»æ–¹å‘ç›¸åçš„æ–¹å‘æ»‘åŠ¨ã€‚è‹¥ reverse: falseï¼Œåˆ™æ»šåŠ¨å†…å®¹å¤´éƒ¨å’Œå·¦ä¾§å¯¹å…¶, é‚£ä¹ˆæ»‘åŠ¨æ–¹å‘å°±æ˜¯ä»å·¦å‘å³ this.padding, bool primary,//æ˜¯å¦ä½¿ç”¨é»˜è®¤çš„ controller this.physics,//æ­¤å±æ€§æ¥å—ä¸€ä¸ª ScrollPhysics å¯¹è±¡ï¼Œå®ƒå†³å®šå¯æ»šåŠ¨ Widget å¦‚ä½•å“åº”ç”¨æˆ·æ“ä½œï¼Œæ¯”å¦‚ç”¨æˆ·æ»‘åŠ¨å®ŒæŠ¬èµ·æ‰‹æŒ‡åï¼Œç»§ç»­æ‰§è¡ŒåŠ¨ç”»ï¼›æˆ–è€…æ»‘åŠ¨åˆ°è¾¹ç•Œæ—¶ï¼Œå¦‚ä½•æ˜¾ç¤ºã€‚ClampingScrollPhysicsï¼šå®‰å“ä¸‹å¾®å…‰æ•ˆæœã€‚ClampingScrollPhysicsï¼šå®‰å“ä¸‹å¾®å…‰æ•ˆæœã€‚ this.controller, this.child,&#125;) CustomScrollViewï¼š 12345678910111213141516const CustomScrollView(&#123; Key key, Axis scrollDirection = Axis.vertical, bool reverse = false, ScrollController controller, bool primary, ScrollPhysics physics, bool shrinkWrap = false, Key center, double anchor = 0.0, double cacheExtent,// this.slivers = const &lt;Widget&gt;[], //Sliverå®¶æ—åˆ—è¡¨ int semanticChildCount, DragStartBehavior dragStartBehavior = DragStartBehavior.start,&#125;) NestedScrollViewï¼šæ»‘åŠ¨å¯æŠ˜å éƒ¨åˆ†å†…å®¹ï¼Œé…åˆSliverç›¸å…³ç»„ä»¶ä½¿ç”¨ã€‚å¸®æˆ‘ä»¬è§£å†³æ»‘åŠ¨å†²çªçš„æ§ä»¶ã€‚é€šè¿‡ä¸ºå¤–éƒ¨ ScrollView å’Œå†…éƒ¨ ScrollView æä¾›è‡ªå®šä¹‰ ScrollController æ¥è§£å†³æ­¤é—®é¢˜ï¼Œå°†å®ƒä»¬é“¾æ¥åœ¨ä¸€èµ·ï¼Œä»¥ä¾¿å®ƒä»¬ä½œä¸ºä¸€ä¸ªè¿è´¯çš„æ»šåŠ¨è§†å›¾æ˜¾ç¤ºç»™ç”¨æˆ·ã€‚ 1234567891011const NestedScrollView(&#123; Key key, this.controller, this.scrollDirection = Axis.vertical, this.reverse = false, this.physics, @required this.headerSliverBuilder, @required this.body, this.dragStartBehavior = DragStartBehavior.start,&#125;) ä»€ä¹ˆæ˜¯Sliverï¼Ÿé€šå¸¸æŒ‡å…·æœ‰ç‰¹å®šæ»šåŠ¨æ•ˆæœçš„å¯æ»šåŠ¨å—ï¼Œå¯æ»šåŠ¨ widgetï¼Œå¦‚ ListViewã€GridView ç­‰éƒ½æœ‰å¯¹åº”çš„ Sliver å®ç°å¦‚ SliverListã€SliverGrid ç­‰ã€‚ å¯¹äºå¤§å¤šæ•° Sliver æ¥è¯´ï¼Œå®ƒä»¬å’Œå¯æ»šåŠ¨ Widget æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ Sliver ä¸ä¼šåŒ…å« Scrollableï¼Œä¹Ÿå°±æ˜¯è¯´ Sliver æœ¬èº«ä¸åŒ…å«æ»šåŠ¨äº¤äº’æ¨¡å‹ã€‚ æ­£å› å¦‚æ­¤ï¼ŒCustomScrollView æ‰å¯ä»¥å°†å¤šä¸ª Sliver â€œç²˜â€åœ¨ä¸€èµ·ï¼Œè¿™äº› Sliver å…±ç”¨ CustomScrollView çš„ Scrollableï¼Œæœ€ç»ˆå®ç°ç»Ÿä¸€çš„æ»‘åŠ¨æ•ˆæœã€‚ CustomScrollViewï¼šæ‰€æœ‰Sliverçš„æ ¹æº SliverListï¼šå±•ç¤ºçº¿æ€§åˆ—è¡¨ SliverFixedExtentListï¼šå›ºå®šé«˜åº¦çš„çº¿æ€§åˆ—è¡¨ SliverPrototypeExtentlistï¼š SliverGrid SliverPadding SliverPersistentHeaderï¼šå¸é¡¶æ•ˆæœæ§ä»¶ SliverAppBarï¼š SliverToBoxAdapterï¼š SliverSafeAreaï¼š SliverFillRemainingï¼š SliverOverlapAbsorberï¼š é…åˆSliverOverlapInjectorä½¿ç”¨ï¼Œè§£å†³æ»‘åŠ¨è¶Šè¿‡pinnedçš„sliver SliverOverlapAbsorberHandleï¼š SliverAppBar12345678910111213141516171819202122232425const SliverAppBar(&#123; Key key, this.leading,//å¯¼èˆªæ å·¦ä¾§ widget this.automaticallyImplyLeading = true,//å¦‚æœ leading ä¸º nullï¼Œæ˜¯å¦è‡ªåŠ¨å®ç°é»˜è®¤çš„ leading æŒ‰é’® this.title,//å¯¼èˆªæ æ ‡é¢˜ this.actions,//å¦‚æœ leading ä¸º nullï¼Œæ˜¯å¦è‡ªåŠ¨å®ç°é»˜è®¤çš„ leading æŒ‰é’® this.flexibleSpace,//å¯ç¼©æ”¾åŒºåŸŸ this.bottom,//æ§ä»¶åº•éƒ¨å›ºå®šåŒºåŸŸï¼Œå¯ä»¥æ”¾tabbarç­‰ this.elevation,//æ§ä»¶çš„ z åæ ‡é¡ºåº? this.forceElevated = false, this.backgroundColor, this.brightness,//çŠ¶æ€æ çš„é¢œè‰², é»‘ç™½ä¸¤ç§, å–å€¼: Brightness.dark this.iconTheme,//è®¾ç½®å¯¼èˆªæ ä¸Šå›¾æ ‡çš„é¢œè‰²ã€é€æ˜åº¦ã€å’Œå°ºå¯¸ä¿¡æ¯ this.actionsIconTheme,//action æŒ‰é’®å›¾æ ‡çš„é¢œè‰²ã€é€æ˜åº¦ã€å’Œå°ºå¯¸ä¿¡æ¯ this.textTheme, this.primary = true,//å¯¼èˆªæ çš„å†…å®¹æ˜¯å¦æ˜¾ç¤ºåœ¨é¡¶éƒ¨, çŠ¶æ€æ çš„ä¸‹é¢ this.centerTitle,//æ ‡é¢˜æ˜¯å¦å±…ä¸­æ˜¾ç¤ºï¼Œé»˜è®¤å€¼æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæ˜¾ç¤ºæ–¹å¼ä¸ä¸€æ · this.titleSpacing = NavigationToolbar.kMiddleSpacing, this.expandedHeight,//å±•å¼€æœ€å¤§é«˜åº¦ this.floating = false, this.pinned = false,//æ˜¯å¦å›ºå®šåœ¨é¡¶éƒ¨ this.snap = false, this.shape,//é˜´å½±è®¾ç½®&#125;) SliverPersistentHeaderæ»‘åŠ¨åˆ°é¡¶éƒ¨å¯ä»¥å›ºå®šï¼Œå¯ä»¥æ ¹æ®æ»šåŠ¨è€Œå˜å¤§å˜å°çš„ç»„ä»¶ï¼ŒSliverAppBarå°±æ˜¯åŸºäºè¿™ä¸ªå®ç°çš„ã€‚ minHeight:å›ºå®šé«˜åº¦ maxHeight:æœ€å¤§æ˜¾ç¤ºé«˜åº¦ delegateï¼šSliverPersistentHeaderDelegate pinnedï¼šæ”¶ç¼©åˆ°æœ€å°é«˜åº¦çš„æ—¶å€™SliverPersistentHeaderæ˜¯å¦å¯è§ï¼Œ trueï¼šä¼šä»¥æŠ˜å é«˜åº¦å›ºå®šæ˜¾ç¤ºåœ¨å¤´éƒ¨ï¼Œ falseï¼šç¼©å°åˆ°æŠ˜å é«˜åº¦åæ»‘å‡ºé¡µé¢ floatingï¼štrue çš„æ—¶å€™ä¸‹æ»‘å…ˆå±•ç¤ºSliverPersistentHeaderä»‹ç»ï¼Œå±•ç¤ºå®Œæˆåæ‰å±•ç¤ºå…¶ä»–æ»‘åŠ¨ç»„ä»¶å†…å®¹ SliverPersistentHeaderDelegate1234567891011121314151617181920212223abstract class SliverPersistentHeaderDelegate &#123; // header æœ€å¤§é«˜åº¦ï¼›pinedä¸º true æ—¶ï¼Œå½“ header åˆšåˆšå›ºå®šåˆ°é¡¶éƒ¨æ—¶é«˜åº¦ä¸ºæœ€å¤§é«˜åº¦ã€‚ double get maxExtent; // header çš„æœ€å°é«˜åº¦ï¼›pinedä¸ºtrueæ—¶ï¼Œå½“headerå›ºå®šåˆ°é¡¶éƒ¨ï¼Œç”¨æˆ·ç»§ç»­å¾€ä¸Šæ»‘åŠ¨æ—¶ï¼Œheader // çš„é«˜åº¦ä¼šéšç€ç”¨æˆ·ç»§ç»­ä¸Šæ»‘ä» maxExtent é€æ¸å‡å°åˆ° minExtent double get minExtent; // æ„å»º headerã€‚ // shrinkOffsetå–å€¼èŒƒå›´[0,maxExtent],å½“headeråˆšåˆšåˆ°è¾¾é¡¶éƒ¨æ—¶ï¼ŒshrinkOffset å€¼ä¸º0ï¼Œ // å¦‚æœç”¨æˆ·ç»§ç»­å‘ä¸Šæ»‘åŠ¨åˆ—è¡¨ï¼ŒshrinkOffsetçš„å€¼ä¼šéšç€ç”¨æˆ·æ»‘åŠ¨çš„åç§»å‡å°ï¼Œç›´åˆ°å‡åˆ°0æ—¶ã€‚ // // overlapsContentï¼šä¸€èˆ¬ä¸å»ºè®®ä½¿ç”¨ï¼Œåœ¨ä½¿ç”¨æ—¶ä¸€å®šè¦å°å¿ƒï¼Œåé¢ä¼šè§£é‡Šã€‚ Widget build(BuildContext context, double shrinkOffset, bool overlapsContent); // header æ˜¯å¦éœ€è¦é‡æ–°æ„å»ºï¼›é€šå¸¸å½“çˆ¶çº§çš„ StatefulWidget æ›´æ–°çŠ¶æ€æ—¶ä¼šè§¦å‘ã€‚ // ä¸€èˆ¬æ¥è¯´åªæœ‰å½“ Delegate çš„é…ç½®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåº”è¯¥è¿”å›falseï¼Œæ¯”å¦‚æ–°æ—§çš„ minExtentã€maxExtent // ç­‰å…¶ä»–é…ç½®ä¸åŒæ—¶éœ€è¦è¿”å› trueï¼Œå…¶ä½™æƒ…å†µè¿”å› false å³å¯ã€‚ bool shouldRebuild(covariant SliverPersistentHeaderDelegate oldDelegate);&#125; SliverList12345678910111213141516const SliverList(&#123; Key key, @required SliverChildDelegate delegate,&#125;) SliverChildListDelegate( this.children, &#123; this.addAutomaticKeepAlives = true, this.addRepaintBoundaries = true, this.addSemanticIndexes = true, this.semanticIndexCallback = _kDefaultSemanticIndexCallback, this.semanticIndexOffset = 0,&#125;) SliverToBoxAdapterç”¨äºåŒ…è£…éSliverç±»å‹çš„Widget SliverFillRemainingå¡«å……å‰©ä½™éƒ¨åˆ† hasScrollBodyè¡¨ç¤ºå†…å®¹æ˜¯å¦å¯ä»¥æ»šåŠ¨ï¼Œå¦‚æœæ˜¯ä¸ºfalseï¼Œåˆ™åªæ˜¯å¡«è¡¥ç©ºç™½ã€‚ fillOverscrollè¡¨ç¤ºå­æ§ä»¶æ˜¯å¦åº”è¯¥åº”è¯¥ä¼¸å±•ä»¥å¡«å……è¶…å‡ºåŒºåŸŸï¼ˆæ¯”å¦‚iOSçš„ListViewé»˜è®¤å¯ä¼¸å±•å‡ºä¸€éƒ¨åˆ†åŒºåŸŸï¼‰ï¼Œå½“hasScrollBodyä¸ºfalseæ—¶æ‰èµ·ä½œç”¨ã€‚ å‚è€ƒ Flutterï¼ˆ81ï¼‰ï¼šScrollç»„ä»¶ä¹‹NestedScrollView Flutterå®Œæ•´å¼€å‘å®æˆ˜è¯¦è§£(åå…«ã€ ç¥å¥‡çš„ScrollPhysicsä¸Simulation)","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"ç‰ˆæœ¬ç®¡ç†å·¥å…·fvm","date":"2022-03-08T02:25:29.666Z","path":"wiki/Flutter/æœªåˆ†ç±»/ç‰ˆæœ¬ç®¡ç†å·¥å…·/","text":"Javaä¸­çš„ç‰ˆæœ¬ç®¡ç†å¯ä»¥ä½¿ç”¨jenvï¼ŒFlutterä¸­å¯ä»¥ä½¿ç”¨fvmã€‚ å®˜ç½‘ï¼šhttps://fvm.app å®˜æ–¹ä½¿ç”¨æ–‡æ¡£ï¼šhttps://fvm.app/docs/getting_started&#x2F;overview ä½¿ç”¨æµç¨‹ï¼š 1234567891011121314151617181920# Macä¸‹å®‰è£…brew tap leoafarias/fvmbrew install fvm# æ¿€æ´»ï¼Œä¸ç¡®å®šè¦ä¸è¦ä½¿ç”¨pub global activate fvm# å®‰è£…2.5.0çš„ç‰ˆæœ¬fvm install 2.5.0# ç§»é™¤ç‰ˆæœ¬fvm remove 2.5.0# æ˜¾ç¤ºæ‰€æœ‰å®‰è£…çš„ç‰ˆæœ¬fvm list# å…¨å±€ä½¿ç”¨æŸä¸ªç‰ˆæœ¬fvm global 2.5.0 å…¨å±€ä½¿ç”¨æŸä¸ªç‰ˆæœ¬# å±€éƒ¨ä½¿ç”¨æŸä¸ªç‰ˆæœ¬ï¼Œä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆ.fvmæ–‡ä»¶å¤¹fvm use beta --force ä¼šåœ¨å½“å‰ç›®å½•åˆ›å»º.fvmæ–‡ä»¶å¤¹","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"è·¯ç”±ç®¡ç†","date":"2022-03-08T02:25:29.666Z","path":"wiki/Flutter/æºç åˆ†æ/è·¯ç”±ç®¡ç†/","text":"ä¸€äº›é—®é¢˜ è·¯ç”±å­˜åœ¨çš„æ„ä¹‰ï¼Ÿ å¦‚æœæ˜¯ä½ ï¼Œä¼šå¦‚ä½•è®¾è®¡ï¼Ÿ dialogã€bottomsheetã€snackbarã€dropmenubuttonçš„åº•å±‚å®ç°æ˜¯æ€æ ·çš„ï¼Ÿ popçš„æ—¶å€™è·¯ç”±æ˜¯å¦‚ä½•ä¼ é€’æ•°æ®å›åˆ°ä¸Šä¸€ä¸ªç•Œé¢çš„ï¼Ÿ heroåŠ¨ç”»å¦‚ä½•å®ç°ï¼Ÿ åŸºæœ¬å®šä¹‰ ç›¸å…³ç±» Navigator:è´Ÿè´£æ•´ä¸ªè·¯ç”±æ ˆï¼Œåœ¨ç»“æ„ä¸Šå®é™…æ˜¯ä¸€ä¸ªOverlayï¼› NavigatorStateï¼šç®¡ç†æ•´ä¸ªæ ˆï¼Œé€šè¿‡_RouteEntryåˆ—è¡¨ç®¡ç†æ ˆã€‚æœ‰pushã€popç­‰æ“ä½œï¼› Overlayï¼šå®Œæˆé¡µé¢çš„åè°ƒã€å±•ç¤ºï¼›ç»´æŠ¤ä¸€ä¸ªOveralyEntryåˆ—è¡¨ï¼› _Theatreï¼š_Theatreç”¨æ¥ç®¡ç†æ‰€æœ‰é¡µé¢ï¼Œåœ¨_Theatreä¸­ï¼Œå¯è§&#x2F;ä¸å¯è§çš„å­ç»“ç‚¹éƒ½ä¼šè½¬æ¢æˆElementï¼Œä½†æ˜¯åœ¨ç»˜åˆ¶çš„æ—¶å€™ï¼Œ_Theatreå¯¹åº”çš„_RenderTheatreåªä¼šæŠŠå¯è§çš„å­ç»“ç‚¹ç»˜åˆ¶å‡ºæ¥ï¼›Overlayä¸­åˆ›å»ºï¼Œonstageè¡¨ç¤ºèˆå°ï¼Œoffstageè¡¨ç¤ºè§‚ä¼—å¸­ï¼› OverlayEntryï¼šç”¨æ¥åœ¨Overlayä¸Šå±•ç¤ºWidget; RouteSettingsï¼šç”¨æ¥ä¿å­˜è·¯ç”±çš„åå­—å’Œå‚æ•°ï¼› Routeï¼šå®šä¹‰è·¯ç”±æ¥å£ï¼Œä¿å­˜RouteSettingsï¼›å®ƒçš„å­ç±»ï¼š OverlayRouteï¼šé¡µé¢å…ƒç´ çš„åˆ›å»ºï¼Œå±•ç¤ºWidgetï¼ŒcreateOverlayEntriesåˆ›å»ºä¸¤ä¸ªOverlayEntryï¼Œç”¨äºæ„å»ºè§†å›¾; TransitionRouteï¼šå¤„ç†è½¬åœº; ModalRouteï¼šå¯ä»¥é˜»æ­¢ä¸ä¸åŒè·¯ç”±çš„äº¤äº’; PopupRouteï¼š RawDialogRouteï¼š CupertinoDialogRouteï¼šiOSé£æ ¼çš„è·¯ç”±ï¼› PageRoute:å®šä¹‰äº†è·¯ç”±æ„å»ºåŠåˆ‡æ¢æ—¶è½¬åœºåŠ¨ç”»çš„ç›¸å…³æ¥å£å’Œå±æ€§ï¼› MaterialPageRouteï¼šMaterialé£æ ¼çš„è·¯ç”±ï¼Œé€šè¿‡builderè®¾ç½®è·¯ç”±å…·ä½“é¡µé¢ï¼› CupertinoPageRouteï¼š PageRouteBuilderï¼šè‡ªå®šä¹‰è½¬åœºåŠ¨ç”»ï¼› _RouteEntryï¼šåŒ…å«Routeï¼ŒçŠ¶æ€æœºç®¡ç†ï¼Œå„ä¸ªç”Ÿå‘½å‘¨æœŸçš„å›è°ƒå¤„ç†ï¼Œæ ‡è®°è½¬åœºæ˜¯å¦æœ‰åŠ¨ç”»æ•ˆæœï¼Œé€šè¿‡transitionDelegateå±æ€§é…ç½®ï¼› RouteTransitionRecordï¼š_RouteEntryçš„çˆ¶ç±»ï¼› NavigatorObserverï¼šç›‘æ§pushã€popã€replaceã€removeè·¯ç”±çš„æƒ…å†µ Pageï¼šç»§æ‰¿äºRouteSettingsï¼Œè‡ªå·±åˆ›å»ºRouteï¼Œæœ‰ä¸€ä¸ªkeyç”¨æ¥ä½œä¸ºå”¯ä¸€æ€§åˆ¤æ–­ï¼Œç”¨äºè®¾ç½®Navigatorçš„å†å²å †æ ˆï¼› MaterialPage: CupertinoPage: Routerï¼šç²¾ç»†åŒ–ç®¡ç†é¡µé¢ï¼Œè·¯ç”±ä¿¡æ¯æä¾›å™¨ã€è§£æå™¨ï¼› RouteDelegateï¼šå®šä¹‰è·¯ç”±è¡Œä¸ºï¼Œç›‘å¬RouteInformationParserå’Œåº”ç”¨çŠ¶æ€ï¼Œå¹¶æ„å»ºPages RouteInformationï¼š RouteInformationParserï¼šè§£æRouteInformationï¼Œå®ƒä»RouteInformationProviderä¸­è·å–RouteInformationï¼Œå¹¶å°†å…¶è§£æä¸ºç”¨æˆ·å®šä¹‰çš„æ•°æ®ç±»å‹ï¼› RouteInformationProviderï¼šè´Ÿè´£é€šçŸ¥RouteInformationå˜åŒ–ï¼› RouterDelegateï¼šå®šä¹‰äº†Routerå¦‚ä½•å­¦ä¹ åº”ç”¨çŠ¶æ€å˜åŒ–ä»¥åŠå¦‚ä½•å“åº”è¿™äº›å˜åŒ–çš„åº”ç”¨ç‰¹å®šè¡Œä¸ºã€‚å®ƒçš„å·¥ä½œæ˜¯ç›‘å¬RouteInformationParserå’Œåº”ç”¨çŠ¶æ€ï¼Œå¹¶åˆ©ç”¨å½“å‰çš„Pagesåˆ—è¡¨æ„å»ºNavigatorï¼› BackButtonDispatcherï¼šå‘RouteræŠ¥å‘Šè¿”å›æŒ‰é’®æŒ‰ä¸‹çš„æƒ…å†µï¼› è·¯ç”±çŠ¶æ€123456789101112131415161718192021222324252627282930enum _RouteLifecycle &#123; staging, // we will wait for transition delegate to decide what to do with this route. // // routes that are present: // add, // we&#x27;ll want to run install, didAdd, etc; a route created by onGenerateInitialRoutes or by the initial widget.pages adding, // we&#x27;ll waiting for the future from didPush of top-most route to complete // routes that are ready for transition. push, // we&#x27;ll want to run install, didPush, etc; a route added via push() and friends pushReplace, // we&#x27;ll want to run install, didPush, etc; a route added via pushReplace() and friends pushing, // we&#x27;re waiting for the future from didPush to complete replace, // we&#x27;ll want to run install, didReplace, etc; a route added via replace() and friends idle, // route is being harmless // // routes that are not present: // // routes that should be included in route announcement and should still listen to transition changes. pop, // we&#x27;ll want to call didPop complete, // we&#x27;ll want to call didComplete, remove, // we&#x27;ll want to run didReplace/didRemove etc // routes should not be included in route announcement but should still listen to transition changes. popping, // we&#x27;re waiting for the route to call finalizeRoute to switch to dispose removing, // we are waiting for subsequent routes to be done animating, then will switch to dispose // routes that are completely removed from the navigator and overlay. dispose, // we will dispose the route momentarily disposed, // we have disposed the route&#125; çŠ¶æ€å˜åŒ–addâ€“&gt;addingâ€“&gt;idle NavigatorStateåˆå§‹åŒ–çš„æ—¶å€™ï¼Œé€šè¿‡æ··å…¥RestorationMixinï¼ŒdidChangeDependenciesçš„æ—¶å€™è°ƒç”¨restoreStateæ ¡éªŒæ˜¯å¦æœ‰initialRouteï¼Œæœ‰åˆ™è¿›è¡Œåˆå§‹è·¯ç”±åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–çŠ¶æ€ä¸ºaddï¼›è¯¥æ–¹æ³•æœ€åè°ƒç”¨_flushHistoryUpdatesï¼Œæ¥ç€è°ƒç”¨entry.handleAddï¼ŒçŠ¶æ€ä¿®æ”¹ä¸ºaddingï¼Œæ¥ç€continueä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œæ‰§è¡Œentry.didAddã€‚ pushâ€“&gt;pushingâ€“&gt;idle Navigator.pushï¼Œå°†Routeå°è£…æˆ_RouteEntryåŠ å…¥åˆ°_historyä¸­ï¼Œå¹¶è°ƒç”¨_flushHistoryUpdatesã€‚è¯¥æ–¹æ³•è¿”å›Futureå¯¹è±¡ï¼Œå¯ç”¨äºæ¥æ”¶è¿”å›ç»“æœã€‚åœ¨_flushHistoryUpdatesä¸­è°ƒç”¨entry.handlePushï¼ŒçŠ¶æ€åˆ‡æ¢ä¸ºpushingï¼›push&#x2F;pushReplaceæœ‰ä¸€ä¸ªè½¬åœºåŠ¨ç”»ï¼ŒåŠ¨ç”»ç»“æŸåçŠ¶æ€å˜ä¸ºidleã€‚ popâ€“&gt;popingâ€“&gt;disposeâ€“&gt;disposed Navigator.popï¼Œå¦‚æœentryçš„settingsæ˜¯Pageï¼Œå…ˆè®©å¤–éƒ¨æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦popï¼Œå¦åˆ™ç›´æ¥entry.popï¼Œè®¾ç½®çŠ¶æ€ä¸ºpopï¼Œæ‰§è¡Œ_flushHistoryUpdatesï¼Œæ¥ç€æ‰§è¡Œentry.handlePopï¼Œåˆ‡æ¢çŠ¶æ€åˆ°poppingï¼Œæ‰§è¡Œroute.didPopï¼Œå®Œæˆè¿”å›å€¼çš„ä¼ é€’ã€ç§»é™¤åŠ¨ç”»å¯åŠ¨ã€‚didPopä¸­è°ƒç”¨navigator.finalizeRouteæ–¹æ³•ï¼ŒçŠ¶æ€åˆ‡æ¢åˆ°disposeï¼Œåˆ·æ–°_flushHistoryUpdatesï¼ŒçŠ¶æ€åˆ°disposedã€‚ removeâ€“&gt;removingâ€“&gt;disposeâ€“&gt;disposed Navigator.removeRouteï¼Œè°ƒç”¨entry.removeï¼Œå°†å½“å‰çŠ¶æ€è®¾ç½®ä¸ºremoveï¼Œå¹¶è°ƒç”¨_flushHistoryUpdatesã€‚è°ƒç”¨entry.handleRemovalåˆ‡æ¢çŠ¶æ€åˆ°revomingï¼Œæ¥ç€åˆ‡æ¢çŠ¶æ€åˆ°disposeï¼Œå¹¶æ·»åŠ åˆ°toBeDisposedä¸­ï¼Œç„¶ååˆ‡æ¢çŠ¶æ€åˆ°disposedï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸æ¶‰åŠåŠ¨ç”»ã€‚ å‘½åè·¯ç”±é€šè¿‡åå­—è¿›è¡Œè·¯ç”±è·³è½¬ï¼ŒNavigator.pushNamed(context, â€˜&#x2F;xxx&#x2F;yyyâ€™);é€šè¿‡_WidgetsAppStateä¸­çš„_onGenerateRouteæ–¹æ³•æ¥æ ¹æ®åå­—è¿”å›ä¸åŒçš„Routeã€‚ åµŒå¥—è·¯ç”±showGeneralDialogåŸºæœ¬ç”¨æ³•12345678910111213141516171819202122Future&lt;T?&gt; showGeneralDialog&lt;T extends Object?&gt;(&#123; required BuildContext context, required RoutePageBuilder pageBuilder,//è‡ªå®šä¹‰UI bool barrierDismissible = false,//æ˜¯å¦æ¨¡æ€ String? barrierLabel, Color barrierColor = const Color(0x80000000), Duration transitionDuration = const Duration(milliseconds: 200), RouteTransitionsBuilder? transitionBuilder, bool useRootNavigator = true,//trueè¡¨ç¤ºä»æ ¹èŠ‚ç‚¹å¼¹çª— RouteSettings? routeSettings,&#125;) &#123; return Navigator.of(context, rootNavigator: useRootNavigator).push&lt;T&gt;(RawDialogRoute&lt;T&gt;( pageBuilder: pageBuilder, barrierDismissible: barrierDismissible, barrierLabel: barrierLabel, barrierColor: barrierColor, transitionDuration: transitionDuration, transitionBuilder: transitionBuilder, settings: routeSettings, ));&#125; fluroåˆ†æ å°è£…äº†åŸç”Ÿä»£ç ï¼Œå‡å°‘é‡å¤ä»£ç é‡ï¼› å°è£…äº†é»˜è®¤çš„è½¬åœºåŠ¨ç”»ï¼› æ‰€æœ‰è·¯ç”±ç»„è£…æˆä¸€ä¸ªtreeï¼Œç»Ÿä¸€ç®¡ç†æ‰€æœ‰è·¯ç”±ï¼Œé€šè¿‡å‘½åè·¯ç”±çš„æ–¹å¼è·³è½¬ï¼› getxè·¯ç”±æ¨¡å—åˆ†æ è®°å½•äº†Navigatorçš„keyï¼Œæ–¹ä¾¿å…¶ä»–åœ°æ–¹è·å–NavigatorStateï¼› å°è£…Pageï¼Œæ”¯æŒè·¯ç”±æ‹¦æˆªï¼Œå†…ç½®è½¬åœºåŠ¨ç”»ï¼› å‚è€ƒ Flutterè·¯ç”±æœºåˆ¶ å®˜æ–¹å¯¼èˆªDemo Learning Flutterâ€™s new navigation and routing system è·¯ç”±å®˜æ–¹è®¾è®¡è§„èŒƒ åº–ä¸è§£ç‰› Â· å¦‚ä½•ç†è§£ Flutter è·¯ç”±æºç è®¾è®¡","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"}]},{"title":"flutterboost","date":"2022-03-08T02:25:29.665Z","path":"wiki/Flutter/å¼€æºåº“/flutterboost/","text":"æ¦‚è¿°ä¸ºä»€ä¹ˆè¦ä½¿ç”¨flutterboostï¼Ÿ åœ¨åŸç”Ÿé¡µé¢å’ŒFlutteré¡µé¢å…±å­˜çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œç®¡ç†è·¯ç”±ã€‚ ä»¥ä¸‹é—®é¢˜å¦‚ä½•å¤„ç†ï¼Ÿ Nativeå¦‚ä½•ä¼ é€’å‚æ•°ç»™Flutteré¡µé¢ Flutteré¡µé¢å¦‚ä½•ä¼ é€’å‚æ•°ç»™Native åŸºæœ¬çš„ä½¿ç”¨123//nativeè·³è½¬flutter//flutterè·³è½¬native","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"pull_to_refresh","date":"2022-03-08T02:25:29.665Z","path":"wiki/Flutter/å¼€æºåº“/ä¸‹æ‹‰ä¸Šæ‹‰åˆ·æ–°ç»„ä»¶/","text":"flutter_easy_refreshé€šè¿‡è‡ªå®šä¹‰scroll_physicsï¼Œç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œä¸‹æ‹‰çš„è¿‡ç¨‹ä¸­è¿›è¡ŒçŠ¶æ€çš„åˆ‡æ¢ã€‚å½“å®Œæˆæ•°æ®è¯·æ±‚åéœ€è¦æ‰‹åŠ¨æ›´æ–°ç»„ä»¶çš„çŠ¶æ€ã€‚ åŸºæœ¬ä½¿ç”¨12345678910111213141516// å…¨å±€é…ç½®å­æ ‘ä¸‹çš„SmartRefresher,ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªç‰¹åˆ«é‡è¦çš„å±æ€§RefreshConfiguration( headerBuilder: () =&gt; WaterDropHeader(), // é…ç½®é»˜è®¤å¤´éƒ¨æŒ‡ç¤ºå™¨,å‡å¦‚ä½ æ¯ä¸ªé¡µé¢çš„å¤´éƒ¨æŒ‡ç¤ºå™¨éƒ½ä¸€æ ·çš„è¯,ä½ éœ€è¦è®¾ç½®è¿™ä¸ª footerBuilder: () =&gt; ClassicFooter(), // é…ç½®é»˜è®¤åº•éƒ¨æŒ‡ç¤ºå™¨ headerTriggerDistance: 80.0, // å¤´éƒ¨è§¦å‘åˆ·æ–°çš„è¶Šç•Œè·ç¦» springDescription:SpringDescription(stiffness: 170, damping: 16, mass: 1.9), // è‡ªå®šä¹‰å›å¼¹åŠ¨ç”»,ä¸‰ä¸ªå±æ€§å€¼æ„ä¹‰è¯·æŸ¥è¯¢flutter api maxOverScrollExtent :100, //å¤´éƒ¨æœ€å¤§å¯ä»¥æ‹–åŠ¨çš„èŒƒå›´,å¦‚æœå‘ç”Ÿå†²å‡ºè§†å›¾èŒƒå›´åŒºåŸŸ,è¯·è®¾ç½®è¿™ä¸ªå±æ€§ maxUnderScrollExtent:0, // åº•éƒ¨æœ€å¤§å¯ä»¥æ‹–åŠ¨çš„èŒƒå›´ enableScrollWhenRefreshCompleted: true, //è¿™ä¸ªå±æ€§ä¸å…¼å®¹PageViewå’ŒTabBarView,å¦‚æœä½ ç‰¹åˆ«éœ€è¦TabBarViewå·¦å³æ»‘åŠ¨,ä½ éœ€è¦æŠŠå®ƒè®¾ç½®ä¸ºtrue enableLoadingWhenFailed : true, //åœ¨åŠ è½½å¤±è´¥çš„çŠ¶æ€ä¸‹,ç”¨æˆ·ä»ç„¶å¯ä»¥é€šè¿‡æ‰‹åŠ¿ä¸Šæ‹‰æ¥è§¦å‘åŠ è½½æ›´å¤š hideFooterWhenNotFull: false, // Viewportä¸æ»¡ä¸€å±æ—¶,ç¦ç”¨ä¸Šæ‹‰åŠ è½½æ›´å¤šåŠŸèƒ½ enableBallisticLoad: true, // å¯ä»¥é€šè¿‡æƒ¯æ€§æ»‘åŠ¨è§¦å‘åŠ è½½æ›´å¤šchild: MaterialApp( ........)); å‚è€ƒ https://github.com/peng8350/flutter_pulltorefresh","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"GetX","date":"2022-03-08T02:25:29.664Z","path":"wiki/Flutter/å¼€æºåº“/GetX/","text":"æ¦‚è¿°é«˜æ€§èƒ½çš„çŠ¶æ€ç®¡ç†ã€æ™ºèƒ½çš„ä¾èµ–æ³¨å…¥å’Œä¾¿æ·çš„è·¯ç”±ç®¡ç†ã€‚ çŠ¶æ€ç®¡ç†Getæœ‰ä¸¤ä¸ªä¸åŒçš„çŠ¶æ€ç®¡ç†å™¨ï¼šç®€å•çš„çŠ¶æ€ç®¡ç†å™¨ï¼ˆGetBuilderï¼‰å’Œå“åº”å¼çŠ¶æ€ç®¡ç†å™¨ï¼ˆGetXï¼‰ã€‚ 12345//ä½¿å¾—å˜é‡å˜çš„å¯è§‚å¯Ÿvar name = &#x27;Jonatas Borges&#x27;.obs;//ç»‘å®šUIObx(() =&gt; Text(&quot;$&#123;controller.name&#125;&quot;)); GetBuilder1234567891011121314//è¿”å›ä¸€ä¸ªwidgetï¼Œé€šè¿‡æ³›å‹ç»‘å®šä¸€ä¸ªGetxControllerclass Controller extends GetxController &#123; // static Controller get to =&gt; Get.find(); // with no static get[...]&#125;// on stateful/stateless classGetBuilder&lt;Controller&gt;( init: Controller(), // æ¯ä¸ªæ§åˆ¶å™¨åªç”¨ä¸€æ¬¡ builder: (_) =&gt; Text( &#x27;$&#123;Get.find&lt;Controller&gt;().counter&#125;&#x27;, //é€šè¿‡findæ–¹æ³•ä½¿ç”¨ ),), å”¯ä¸€çš„ID123456789101112GetBuilder&lt;Controller&gt;( id: &#x27;text&#x27;, //è¿™é‡Œ init: Controller(), // æ¯ä¸ªæ§åˆ¶å™¨åªç”¨ä¸€æ¬¡ builder: (_) =&gt; Text( &#x27;$&#123;Get.find&lt;Controller&gt;().counter&#125;&#x27;, //here ),),update([&#x27;text&#x27;]);update([&#x27;text&#x27;], counter &lt; 10); å£°æ˜å“åº”å¼å˜é‡çš„æ–¹å¼123456789101112131415161718192021222324252627282930//ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ Rx&#123;Type&#125;ã€‚// å»ºè®®ä½¿ç”¨åˆå§‹å€¼ï¼Œä½†ä¸æ˜¯å¼ºåˆ¶æ€§çš„final name = RxString(&#x27;&#x27;);final isLogged = RxBool(false);final count = RxInt(0);final balance = RxDouble(0.0);final items = RxList&lt;String&gt;([]);final myMap = RxMap&lt;String, int&gt;(&#123;&#125;);//ç¬¬äºŒç§æ˜¯ä½¿ç”¨ Rxï¼Œè§„å®šæ³›å‹ Rx&lt;Type&gt;ã€‚final name = Rx&lt;String&gt;(&#x27;&#x27;);final isLogged = Rx&lt;Bool&gt;(false);final count = Rx&lt;Int&gt;(0);final balance = Rx&lt;Double&gt;(0.0);final number = Rx&lt;Num&gt;(0)final items = Rx&lt;List&lt;String&gt;&gt;([]);final myMap = Rx&lt;Map&lt;String, int&gt;&gt;(&#123;&#125;);//ç¬¬ä¸‰ç§æ›´å®ç”¨ã€æ›´ç®€å•ã€æ›´å¯å–çš„æ–¹æ³•ï¼Œåªéœ€æ·»åŠ  .obs ä½œä¸ºvalueçš„å±æ€§ã€‚final name = &#x27;&#x27;.obs;final isLogged = false.obs;final count = 0.obs;final balance = 0.0.obs;final number = 0.obs;final items = &lt;String&gt;[].obs;final myMap = &lt;String, int&gt;&#123;&#125;.obs;// è‡ªå®šä¹‰ç±» - å¯ä»¥æ˜¯ä»»ä½•ç±»final user = User().obs; è·¯ç”±ç®¡ç†123456789101112131415161718192021222324252627282930313233343536373839404142//åœ¨ä½ çš„MaterialAppå‰åŠ ä¸Š &quot;Get&quot;ï¼ŒæŠŠå®ƒå˜æˆGetMaterialAppã€‚GetMaterialApp( // Before: MaterialApp( home: MyHome(),)//å¯¼èˆªåˆ°æ–°é¡µé¢Get.to(NextScreen());//åˆ«åå¯¼èˆªGet.toNamed(&#x27;/details&#x27;);//æµè§ˆå¹¶åˆ é™¤å‰ä¸€ä¸ªé¡µé¢ã€‚Get.offNamed(&quot;/NextScreen&quot;);//æµè§ˆå¹¶åˆ é™¤æ‰€æœ‰ä»¥å‰çš„é¡µé¢ã€‚Get.offAllNamed(&quot;/NextScreen&quot;);//åªè¦å‘é€ä½ æƒ³è¦çš„å‚æ•°å³å¯ã€‚Getåœ¨è¿™é‡Œæ¥å—ä»»ä½•ä¸œè¥¿ï¼Œæ— è®ºæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸€ä¸ªMapï¼Œä¸€ä¸ªListï¼Œç”šè‡³ä¸€ä¸ªç±»çš„å®ä¾‹ã€‚Get.toNamed(&quot;/NextScreen&quot;, arguments: &#x27;Get is the best&#x27;);//Getæä¾›é«˜çº§åŠ¨æ€URLï¼Œå°±åƒåœ¨Webä¸Šä¸€æ ·ã€‚Webå¼€å‘è€…å¯èƒ½å·²ç»åœ¨Flutterä¸Šæƒ³è¦è¿™ä¸ªåŠŸèƒ½äº†ï¼ŒGetä¹Ÿè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚Get.offAllNamed(&quot;/NextScreen?device=phone&amp;id=354&amp;name=Enzo&quot;);print(Get.parameters[&#x27;id&#x27;]);// out: 354print(Get.parameters[&#x27;name&#x27;]);// out: Enzo//è¦å…³é—­snackbars, dialogs, bottomsheetsæˆ–ä»»ä½•ä½ é€šå¸¸ä¼šç”¨Navigator.pop(context)å…³é—­çš„ä¸œè¥¿ã€‚Get.back();//è¿›å…¥ä¸‹ä¸€ä¸ªé¡µé¢ï¼Œä½†æ²¡æœ‰è¿”å›ä¸Šä¸€ä¸ªé¡µé¢çš„é€‰é¡¹ï¼ˆç”¨äºé—ªå±é¡µï¼Œç™»å½•é¡µé¢ç­‰ï¼‰ã€‚Get.off(NextScreen());//è¿›å…¥ä¸‹ä¸€ä¸ªé¡µé¢å¹¶å–æ¶ˆä¹‹å‰çš„æ‰€æœ‰è·¯ç”±ï¼ˆåœ¨è´­ç‰©è½¦ã€æŠ•ç¥¨å’Œæµ‹è¯•ä¸­å¾ˆæœ‰ç”¨ï¼‰ã€‚Get.offAll(NextScreen());//è¦å¯¼èˆªåˆ°ä¸‹ä¸€æ¡è·¯ç”±ï¼Œå¹¶åœ¨è¿”å›åç«‹å³æ¥æ”¶æˆ–æ›´æ–°æ•°æ®ã€‚var data = await Get.to(Payment());//åœ¨å¦ä¸€ä¸ªé¡µé¢ä¸Šï¼Œå‘é€å‰ä¸€ä¸ªè·¯ç”±çš„æ•°æ®ã€‚Get.back(result: &#x27;success&#x27;); å®šä¹‰è·¯ç”±1234567891011121314151617void main() &#123; runApp( GetMaterialApp( unknownRoute: GetPage(name: &#x27;/notfound&#x27;, page: () =&gt; UnknownRoutePage()),//æœªå®šä¹‰è·¯çº¿çš„å¯¼èˆªï¼ˆ404é”™è¯¯ï¼‰ initialRoute: &#x27;/&#x27;, getPages: [ GetPage(name: &#x27;/&#x27;, page: () =&gt; MyHomePage()), GetPage(name: &#x27;/second&#x27;, page: () =&gt; Second()), GetPage( name: &#x27;/third&#x27;, page: () =&gt; Third(), transition: Transition.zoom ), ], ) );&#125; ä¸­é—´ä»¶åµŒå¥—å¯¼èˆª12345678910111213141516171819202122class AppPages &#123; static const INITIAL = Routes.HOME; static final routes = [ GetPage( name: Routes.HOME, page: () =&gt; HomeView(), binding: HomeBinding(), children: [ GetPage( name: Routes.COUNTRY, page: () =&gt; CountryView(), children: [ GetPage( name: Routes.DETAILS, page: () =&gt; DetailsView(), ), ], ), ]), ];&#125; è®¿é—®å¯¼èˆªçš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨&#x2F;home&#x2F;country&#x2F;detailsç­‰æ–¹å¼è·³è½¬ã€‚ ä¾èµ–ç®¡ç†æ·»åŠ ä¾èµ–Get.put1234567891011121314151617181920212223242526272829303132Get.put&lt;S&gt;( // å¿…å¤‡ï¼šä½ æƒ³å¾—åˆ°ä¿å­˜çš„ç±»ï¼Œæ¯”å¦‚æ§åˆ¶å™¨æˆ–å…¶ä»–ä¸œè¥¿ã€‚ // æ³¨ï¼š&quot;S &quot;æ„å‘³ç€å®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„ç±»ã€‚ S dependency // å¯é€‰ï¼šå½“ä½ æƒ³è¦å¤šä¸ªç›¸åŒç±»å‹çš„ç±»æ—¶ï¼Œå¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•ã€‚ // å› ä¸ºä½ é€šå¸¸ä½¿ç”¨Get.find&lt;Controller&gt;()æ¥è·å–ä¸€ä¸ªç±»ã€‚ // ä½ éœ€è¦ä½¿ç”¨æ ‡ç­¾æ¥å‘Šè¯‰ä½ éœ€è¦å“ªä¸ªå®ä¾‹ã€‚ // å¿…é¡»æ˜¯å”¯ä¸€çš„å­—ç¬¦ä¸² String tag, // å¯é€‰ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œgetä¼šåœ¨å®ä¾‹ä¸å†ä½¿ç”¨åè¿›è¡Œé”€æ¯ // ï¼ˆä¾‹å¦‚ï¼šä¸€ä¸ªå·²ç»é”€æ¯çš„è§†å›¾çš„Controller) // ä½†ä½ å¯èƒ½éœ€è¦è¿™ä¸ªå®ä¾‹åœ¨æ•´ä¸ªåº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­ä¿ç•™åœ¨é‚£é‡Œï¼Œå°±åƒä¸€ä¸ªsharedPreferencesçš„å®ä¾‹æˆ–å…¶ä»–ä¸œè¥¿ã€‚ //æ‰€ä»¥ä½ è®¾ç½®è¿™ä¸ªé€‰é¡¹ // é»˜è®¤å€¼ä¸ºfalse bool permanent = false, // å¯é€‰ï¼šå…è®¸ä½ åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ä¸€ä¸ªæŠ½è±¡ç±»åï¼Œç”¨å¦ä¸€ä¸ªæŠ½è±¡ç±»ä»£æ›¿å®ƒï¼Œç„¶åå†è¿›è¡Œæµ‹è¯•ã€‚ // é»˜è®¤ä¸ºfalse bool overrideAbstract = false, // å¯é€‰ï¼šå…è®¸ä½ ä½¿ç”¨å‡½æ•°è€Œä¸æ˜¯ä¾èµ–ï¼ˆdependencyï¼‰æœ¬èº«æ¥åˆ›å»ºä¾èµ–ã€‚ // è¿™ä¸ªä¸å¸¸ç”¨ InstanceBuilderCallback&lt;S&gt; builder,)Get.put&lt;SomeClass&gt;(SomeClass());Get.put&lt;LoginController&gt;(LoginController(), permanent: true);Get.put&lt;ListItemController&gt;(ListItemController, tag: &quot;some unique string&quot;); Get.lazyPutæ‡’åŠ è½½ä¸€ä¸ªä¾èµ–ï¼Œè¿™æ ·å®ƒåªæœ‰åœ¨ä½¿ç”¨æ—¶æ‰ä¼šè¢«å®ä¾‹åŒ–ã€‚ 123456789101112131415161718192021222324252627282930Get.lazyPut&lt;S&gt;( // å¼ºåˆ¶æ€§ï¼šå½“ä½ çš„ç±»ç¬¬ä¸€æ¬¡è¢«è°ƒç”¨æ—¶ï¼Œå°†è¢«æ‰§è¡Œçš„æ–¹æ³•ã€‚ InstanceBuilderCallback builder, // å¯é€‰ï¼šå’ŒGet.put()ä¸€æ ·ï¼Œå½“ä½ æƒ³è®©åŒä¸€ä¸ªç±»æœ‰å¤šä¸ªä¸åŒçš„å®ä¾‹æ—¶ï¼Œå°±ä¼šç”¨åˆ°å®ƒã€‚ // å¿…é¡»æ˜¯å”¯ä¸€çš„ String tag, // å¯é€‰ï¼šç±»ä¼¼äº &quot;æ°¸ä¹…&quot;ï¼Œ // ä¸åŒçš„æ˜¯ï¼Œå½“ä¸ä½¿ç”¨æ—¶ï¼Œå®ä¾‹ä¼šè¢«ä¸¢å¼ƒï¼Œä½†å½“å†æ¬¡éœ€è¦ä½¿ç”¨æ—¶ï¼ŒGetä¼šé‡æ–°åˆ›å»ºå®ä¾‹ï¼Œ // å°±åƒ bindings api ä¸­çš„ &quot;SmartManagement.keepFactory &quot;ä¸€æ ·ã€‚ // é»˜è®¤å€¼ä¸ºfalse bool fenix = false )///åªæœ‰å½“ç¬¬ä¸€æ¬¡ä½¿ç”¨Get.find&lt;ApiMock&gt;æ—¶ï¼ŒApiMockæ‰ä¼šè¢«è°ƒç”¨ã€‚Get.lazyPut&lt;ApiMock&gt;(() =&gt; ApiMock());Get.lazyPut&lt;FirebaseAuth&gt;( () &#123; // ... some logic if needed return FirebaseAuth(); &#125;, tag: Math.random().toString(), fenix: true)Get.lazyPut&lt;Controller&gt;( () =&gt; Controller() ) Get.putAsync12345678910111213141516171819202122Get.putAsync&lt;S&gt;( // å¿…å¤‡ï¼šä¸€ä¸ªå°†è¢«æ‰§è¡Œçš„å¼‚æ­¥æ–¹æ³•ï¼Œç”¨äºå®ä¾‹åŒ–ä½ çš„ç±»ã€‚ AsyncInstanceBuilderCallback&lt;S&gt; builder, // å¯é€‰ï¼šå’ŒGet.put()ä¸€æ ·ï¼Œå½“ä½ æƒ³è®©åŒä¸€ä¸ªç±»æœ‰å¤šä¸ªä¸åŒçš„å®ä¾‹æ—¶ï¼Œå°±ä¼šç”¨åˆ°å®ƒã€‚ // å¿…é¡»æ˜¯å”¯ä¸€çš„ String tag, // å¯é€‰ï¼šä¸Get.put()ç›¸åŒï¼Œå½“ä½ éœ€è¦åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä¿æŒè¯¥å®ä¾‹çš„ç”Ÿå‘½æ—¶ä½¿ç”¨ã€‚ // é»˜è®¤å€¼ä¸ºfalse bool permanent = false)Get.putAsync&lt;SharedPreferences&gt;(() async &#123; final prefs = await SharedPreferences.getInstance(); await prefs.setInt(&#x27;counter&#x27;, 12345); return prefs;&#125;);Get.putAsync&lt;YourAsyncClass&gt;( () async =&gt; await YourAsyncClass() ) Get.create1234567891011121314151617181920Get.create&lt;S&gt;( // éœ€è¦ï¼šä¸€ä¸ªè¿”å›æ¯æ¬¡è°ƒç”¨&quot;Get.find() &quot;éƒ½ä¼šè¢«æ–°å»ºçš„ç±»çš„å‡½æ•°ã€‚ // ç¤ºä¾‹: Get.create&lt;YourClass&gt;(()=&gt;YourClass()) FcBuilderFunc&lt;S&gt; builder, // å¯é€‰ï¼šå°±åƒGet.put()ä¸€æ ·ï¼Œä½†å½“ä½ éœ€è¦å¤šä¸ªåŒç±»çš„å®ä¾‹æ—¶ï¼Œä¼šç”¨åˆ°å®ƒã€‚ // å½“ä½ æœ‰ä¸€ä¸ªåˆ—è¡¨ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦è‡ªå·±çš„æ§åˆ¶å™¨æ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚ // éœ€è¦æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²ã€‚åªè¦æŠŠæ ‡ç­¾æ”¹æˆåå­— String name, // å¯é€‰ï¼šå°±åƒ Get.put() ä¸€æ ·ï¼Œ // å®ƒæ˜¯ä¸ºäº†å½“ä½ éœ€è¦åœ¨æ•´ä¸ªåº”ç”¨ä¸­ä¿æ´»å®ä¾‹çš„æ—¶å€™ // åŒºåˆ«åœ¨äº Get.create çš„ permanenté»˜è®¤ä¸ºtrue bool permanent = true)Get.Create&lt;SomeClass&gt;(() =&gt; SomeClass());Get.Create&lt;LoginController&gt;(() =&gt; LoginController()); ä½¿ç”¨12345678final controller = Get.find&lt;Controller&gt;();// æˆ–è€…Controller controller = Get.find();Get.delete&lt;Controller&gt;(); //é€šå¸¸ä½ ä¸éœ€è¦è¿™æ ·åšï¼Œå› ä¸ºGetXå·²ç»åˆ é™¤äº†æœªä½¿ç”¨çš„æ§åˆ¶å™¨ã€‚ BindingsBindingsä½¿å¾—Getå¯ä»¥çŸ¥é“å½“ä½¿ç”¨æŸä¸ªæ§åˆ¶å™¨æ—¶ï¼Œå“ªä¸ªé¡µé¢æ­£åœ¨æ˜¾ç¤ºï¼Œå¹¶çŸ¥é“åœ¨å“ªé‡Œä»¥åŠå¦‚ä½•é”€æ¯å®ƒã€‚ æ­¤å¤–ï¼ŒBindingç±»å°†å…è®¸ä½ æ‹¥æœ‰SmartManageré…ç½®æ§åˆ¶ã€‚ä½ å¯ä»¥é…ç½®ä¾èµ–å…³ç³»ï¼Œå½“ä»å †æ ˆä¸­åˆ é™¤ä¸€ä¸ªè·¯ç”±æ—¶ï¼Œæˆ–è€…å½“ä½¿ç”¨å®ƒçš„widgetè¢«å¸ƒç½®æ—¶ï¼Œæˆ–è€…ä¸¤è€…éƒ½ä¸å¸ƒç½®ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//ä½¿ç”¨BindingsBuilderåˆ›å»ºgetPages: [ GetPage( name: &#x27;/&#x27;, page: () =&gt; HomeView(), binding: BindingsBuilder(() &#123; Get.lazyPut&lt;ControllerX&gt;(() =&gt; ControllerX()); Get.put&lt;Service&gt;(()=&gt; Api()); &#125;), ), GetPage( name: &#x27;/details&#x27;, page: () =&gt; DetailsView(), binding: BindingsBuilder(() &#123; Get.lazyPut&lt;DetailsController&gt;(() =&gt; DetailsController()); &#125;), ),];//è‡ªå®šä¹‰Bindingsç±»class HomeBinding implements Bindings &#123; @override void dependencies() &#123; Get.lazyPut&lt;HomeController&gt;(() =&gt; HomeController()); Get.put&lt;Service&gt;(()=&gt; Api()); &#125;&#125;class DetailsBinding implements Bindings &#123; @override void dependencies() &#123; Get.lazyPut&lt;DetailsController&gt;(() =&gt; DetailsController()); &#125;&#125;getPages: [ GetPage( name: &#x27;/&#x27;, page: () =&gt; HomeView(), binding: HomeBinding(), ), GetPage( name: &#x27;/details&#x27;, page: () =&gt; DetailsView(), binding: DetailsBinding(), ),];Get.to(Home(), binding: HomeBinding());Get.to(DetailsView(), binding: DetailsBinding()) æ™ºèƒ½ç®¡ç†GetX é»˜è®¤æƒ…å†µä¸‹ä¼šå°†æœªä½¿ç”¨çš„æ§åˆ¶å™¨ä»å†…å­˜ä¸­ç§»é™¤ã€‚ ä½†æ˜¯å¦‚æœä½ æƒ³æ”¹å˜GetXæ§åˆ¶ç±»çš„é”€æ¯æ–¹å¼ï¼Œä½ å¯ä»¥ç”¨SmartManagementç±»è®¾ç½®ä¸åŒçš„è¡Œä¸ºã€‚ 12345678void main () &#123; runApp( GetMaterialApp( smartManagement: SmartManagement.onlyBuilders //è¿™é‡Œ home: Home(), ) )&#125; SmartManagement.full è¿™æ˜¯é»˜è®¤çš„ã€‚é”€æ¯é‚£äº›æ²¡æœ‰è¢«ä½¿ç”¨çš„ã€æ²¡æœ‰è¢«è®¾ç½®ä¸ºæ°¸ä¹…çš„ç±»ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¼šå¸Œæœ›ä¿æŒè¿™ä¸ªé…ç½®ä¸å—å½±å“ã€‚å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨GetXï¼Œé‚£ä¹ˆä¸è¦æ”¹å˜è¿™ä¸ªé…ç½®ã€‚ SmartManagement.onlyBuilders ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œåªæœ‰åœ¨init:ä¸­å¯åŠ¨çš„æ§åˆ¶å™¨æˆ–ç”¨Get.lazyPut()åŠ è½½åˆ°Bindingä¸­çš„æ§åˆ¶å™¨æ‰ä¼šè¢«é”€æ¯ã€‚ å¦‚æœä½ ä½¿ç”¨Get.put()æˆ–Get.putAsync()æˆ–ä»»ä½•å…¶ä»–æ–¹æ³•ï¼ŒSmartManagementå°†æ²¡æœ‰æƒé™ç§»é™¤è¿™ä¸ªä¾èµ–ã€‚ åœ¨é»˜è®¤è¡Œä¸ºä¸‹ï¼Œå³ä½¿æ˜¯ç”¨ â€œGet.put â€œå®ä¾‹åŒ–çš„widgetä¹Ÿä¼šè¢«ç§»é™¤ï¼Œè¿™ä¸SmartManagement.onlyBuildersä¸åŒã€‚ SmartManagement.keepFactory å°±åƒSmartManagement.fullä¸€æ ·ï¼Œå½“å®ƒä¸å†è¢«ä½¿ç”¨æ—¶ï¼Œå®ƒå°†åˆ é™¤å®ƒçš„ä¾èµ–å…³ç³»ï¼Œä½†å®ƒå°†ä¿ç•™å®ƒä»¬çš„å·¥å‚ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ å†æ¬¡éœ€è¦è¯¥å®ä¾‹ï¼Œå®ƒå°†é‡æ–°åˆ›å»ºè¯¥ä¾èµ–å…³ç³»ã€‚ å›½é™…åŒ–ç¿»è¯‘ç¿»è¯‘è¢«ä¿å­˜ä¸ºä¸€ä¸ªç®€å•çš„é”®å€¼å­—å…¸æ˜ å°„ã€‚ è¦æ·»åŠ è‡ªå®šä¹‰ç¿»è¯‘ï¼Œè¯·åˆ›å»ºä¸€ä¸ªç±»å¹¶æ‰©å±•ç¿»è¯‘ 12345678910111213141516import &#x27;package:get/get.dart&#x27;;class Messages extends Translations &#123; @override Map&lt;String, Map&lt;String, String&gt;&gt; get keys =&gt; &#123; &#x27;zh_CN&#x27;: &#123; &#x27;hello&#x27;: &#x27;ä½ å¥½ ä¸–ç•Œ&#x27;, &#125;, &#x27;de_DE&#x27;: &#123; &#x27;hello&#x27;: &#x27;Hallo Welt&#x27;, &#125; &#125;;&#125; ä½¿ç”¨ç¿»è¯‘123456789101112131415161718//ä¼ é€’å‚æ•°ç»™GetMaterialAppæ¥å®šä¹‰è¯­è¨€å’Œç¿»è¯‘ã€‚return GetMaterialApp( translations: Messages(), // ä½ çš„ç¿»è¯‘ locale: Locale(&#x27;zh&#x27;, &#x27;CN&#x27;), // å°†ä¼šæŒ‰ç…§æ­¤å¤„æŒ‡å®šçš„è¯­è¨€ç¿»è¯‘ï¼Œui.window.localeè¡¨ç¤ºç³»ç»Ÿè®¾ç½®çš„è¯­è¨€ fallbackLocale: Locale(&#x27;en&#x27;, &#x27;US&#x27;), // æ·»åŠ ä¸€ä¸ªå›è°ƒè¯­è¨€é€‰é¡¹ï¼Œä»¥å¤‡ä¸Šé¢æŒ‡å®šçš„è¯­è¨€ç¿»è¯‘ä¸å­˜åœ¨);//ä½¿ç”¨ç¿»è¯‘//åªè¦å°†.trè¿½åŠ åˆ°æŒ‡å®šçš„é”®ä¸Šï¼Œå°±ä¼šä½¿ç”¨Get.localeå’ŒGet.fallbackLocaleçš„å½“å‰å€¼è¿›è¡Œç¿»è¯‘ã€‚Text(&#x27;title&#x27;.tr);//è°ƒç”¨Get.updateLocale(locale)æ¥æ›´æ–°è¯­è¨€ç¯å¢ƒã€‚ç„¶åç¿»è¯‘ä¼šè‡ªåŠ¨ä½¿ç”¨æ–°çš„localeã€‚var locale = Locale(&#x27;en&#x27;, &#x27;US&#x27;);Get.updateLocale(locale); æ”¹å˜ä¸»é¢˜123Get.changeTheme(ThemeData.light()); å…¶ä»–API123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129// ç»™å‡ºå½“å‰é¡µé¢çš„argsã€‚Get.arguments//ç»™å‡ºä»¥å‰çš„è·¯ç”±åç§°Get.previousRoute// ç»™å‡ºè¦è®¿é—®çš„åŸå§‹è·¯ç”±ï¼Œä¾‹å¦‚ï¼ŒrawRoute.isFirst()Get.rawRoute// å…è®¸ä»GetObserverè®¿é—®Rounting APIã€‚Get.routing// æ£€æŸ¥ snackbar æ˜¯å¦æ‰“å¼€Get.isSnackbarOpen// æ£€æŸ¥ dialog æ˜¯å¦æ‰“å¼€Get.isDialogOpen// æ£€æŸ¥ bottomsheet æ˜¯å¦æ‰“å¼€Get.isBottomSheetOpen// åˆ é™¤ä¸€ä¸ªè·¯ç”±ã€‚Get.removeRoute()//åå¤è¿”å›ï¼Œç›´åˆ°è¡¨è¾¾å¼è¿”å›çœŸã€‚Get.until()// è½¬åˆ°ä¸‹ä¸€æ¡è·¯ç”±ï¼Œå¹¶åˆ é™¤æ‰€æœ‰ä¹‹å‰çš„è·¯ç”±ï¼Œç›´åˆ°è¡¨è¾¾å¼è¿”å›trueã€‚Get.offUntil()// è½¬åˆ°ä¸‹ä¸€ä¸ªå‘½åçš„è·¯ç”±ï¼Œå¹¶åˆ é™¤æ‰€æœ‰ä¹‹å‰çš„è·¯ç”±ï¼Œç›´åˆ°è¡¨è¾¾å¼è¿”å›trueã€‚Get.offNamedUntil()//æ£€æŸ¥åº”ç”¨ç¨‹åºåœ¨å“ªä¸ªå¹³å°ä¸Šè¿è¡Œã€‚GetPlatform.isAndroidGetPlatform.isIOSGetPlatform.isMacOSGetPlatform.isWindowsGetPlatform.isLinuxGetPlatform.isFuchsia//æ£€æŸ¥è®¾å¤‡ç±»å‹GetPlatform.isMobileGetPlatform.isDesktop//æ‰€æœ‰å¹³å°éƒ½æ˜¯ç‹¬ç«‹æ”¯æŒwebçš„!//ä½ å¯ä»¥çŸ¥é“ä½ æ˜¯å¦åœ¨æµè§ˆå™¨å†…è¿è¡Œã€‚//åœ¨Windowsã€iOSã€OSXã€Androidç­‰ç³»ç»Ÿä¸Šã€‚GetPlatform.isWeb// ç›¸å½“äº.MediaQuery.of(context).size.height,//ä½†ä¸å¯æ”¹å˜ã€‚Get.heightGet.width// æä¾›å½“å‰ä¸Šä¸‹æ–‡ã€‚Get.context// åœ¨ä½ çš„ä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹ï¼Œåœ¨å‰å°æä¾› snackbar/dialog/bottomsheet çš„ä¸Šä¸‹æ–‡ã€‚Get.contextOverlay// æ³¨æ„ï¼šä»¥ä¸‹æ–¹æ³•æ˜¯å¯¹ä¸Šä¸‹æ–‡çš„æ‰©å±•ã€‚// å› ä¸ºåœ¨ä½ çš„UIçš„ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®ä¸Šä¸‹æ–‡ï¼Œä½ å¯ä»¥åœ¨UIä»£ç çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒã€‚// å¦‚æœä½ éœ€è¦ä¸€ä¸ªå¯æ”¹å˜çš„é«˜åº¦/å®½åº¦ï¼ˆå¦‚æ¡Œé¢æˆ–æµè§ˆå™¨çª—å£å¯ä»¥ç¼©æ”¾ï¼‰ï¼Œä½ å°†éœ€è¦ä½¿ç”¨ä¸Šä¸‹æ–‡ã€‚context.widthcontext.height// è®©æ‚¨å¯ä»¥å®šä¹‰ä¸€åŠçš„é¡µé¢ã€ä¸‰åˆ†ä¹‹ä¸€çš„é¡µé¢ç­‰ã€‚// å¯¹å“åº”å¼åº”ç”¨å¾ˆæœ‰ç”¨ã€‚// å‚æ•°ï¼š dividedBy (double) å¯é€‰ - é»˜è®¤å€¼ï¼š1// å‚æ•°ï¼š reducedBy (double) å¯é€‰ - é»˜è®¤å€¼ï¼š0ã€‚context.heightTransformer()context.widthTransformer()/// ç±»ä¼¼äº MediaQuery.of(context).sizeã€‚context.mediaQuerySize()/// ç±»ä¼¼äº MediaQuery.of(context).paddingã€‚context.mediaQueryPadding()/// ç±»ä¼¼äº MediaQuery.of(context).viewPaddingã€‚context.mediaQueryViewPadding()/// ç±»ä¼¼äº MediaQuery.of(context).viewInsetsã€‚context.mediaQueryViewInsets()/// ç±»ä¼¼äº MediaQuery.of(context).orientation;context.orientation()///æ£€æŸ¥è®¾å¤‡æ˜¯å¦å¤„äºæ¨ªå‘æ¨¡å¼context.isLandscape()///æ£€æŸ¥è®¾å¤‡æ˜¯å¦å¤„äºçºµå‘æ¨¡å¼ã€‚context.isPortrait()///ç±»ä¼¼äºMediaQuery.of(context).devicePixelRatioã€‚context.devicePixelRatio()///ç±»ä¼¼äºMediaQuery.of(context).textScaleFactorã€‚context.textScaleFactor()///æŸ¥è¯¢è®¾å¤‡æœ€çŸ­è¾¹ã€‚context.mediaQueryShortestSide()///å¦‚æœå®½åº¦å¤§äº800ï¼Œåˆ™ä¸ºçœŸã€‚context.showNavbar()///å¦‚æœæœ€çŸ­è¾¹å°äº600pï¼Œåˆ™ä¸ºçœŸã€‚context.isPhone()///å¦‚æœæœ€çŸ­è¾¹å¤§äº600pï¼Œåˆ™ä¸ºçœŸã€‚context.isSmallTablet()///å¦‚æœæœ€çŸ­è¾¹å¤§äº720pï¼Œåˆ™ä¸ºçœŸã€‚context.isLargeTablet()///å¦‚æœå½“å‰è®¾å¤‡æ˜¯å¹³æ¿ç”µè„‘ï¼Œåˆ™ä¸ºçœŸcontext.isTablet()///æ ¹æ®é¡µé¢å¤§å°è¿”å›ä¸€ä¸ªå€¼&lt;T&gt;ã€‚///å¯ä»¥ç»™å€¼ä¸ºï¼š///watchï¼šå¦‚æœæœ€çŸ­è¾¹å°äº300///mobileï¼šå¦‚æœæœ€çŸ­è¾¹å°äº600///tabletï¼šå¦‚æœæœ€çŸ­è¾¹ï¼ˆshortestSideï¼‰å°äº1200///desktopï¼šå¦‚æœå®½åº¦å¤§äº1200context.responsiveValue&lt;T&gt;() å±€éƒ¨çŠ¶æ€ç»„ä»¶GetViewå®ƒæ˜¯ä¸€ä¸ªå¯¹å·²æ³¨å†Œçš„Controlleræœ‰ä¸€ä¸ªåä¸ºcontrollerçš„getterçš„const Statelessçš„Widget 1234567891011121314class AwesomeController extends GetxController &#123; final String title = &#x27;My Awesome View&#x27;; &#125; // ä¸€å®šè¦è®°ä½ä¼ é€’ä½ ç”¨æ¥æ³¨å†Œæ§åˆ¶å™¨çš„`Type`! class AwesomeView extends GetView&lt;AwesomeController&gt; &#123; @override Widget build(BuildContext context) &#123; return Container( padding: EdgeInsets.all(20), child: Text( controller.title ), // åªéœ€è°ƒç”¨ &quot;controller.something&quot;ã€‚ ); &#125; &#125; GetWidgetGetxServiceæ•´ä¸ªç”Ÿå‘½å‘¨æœŸéƒ½å­˜åœ¨ 12345678910111213141516171819202122232425262728293031323334Future&lt;void&gt; main() async &#123; await initServices(); /// ç­‰å¾…æœåŠ¡åˆå§‹åŒ–. runApp(SomeApp());&#125;/// åœ¨ä½ è¿è¡ŒFlutteråº”ç”¨ä¹‹å‰ï¼Œè®©ä½ çš„æœåŠ¡åˆå§‹åŒ–æ˜¯ä¸€ä¸ªæ˜æ™ºä¹‹ä¸¾ã€‚////å› ä¸ºä½ å¯ä»¥æ§åˆ¶æ‰§è¡Œæµç¨‹ï¼ˆä¹Ÿè®¸ä½ éœ€è¦åŠ è½½ä¸€äº›ä¸»é¢˜é…ç½®ï¼ŒapiKeyï¼Œç”±ç”¨æˆ·è‡ªå®šä¹‰çš„è¯­è¨€ç­‰ï¼Œæ‰€ä»¥åœ¨è¿è¡ŒApiServiceä¹‹å‰åŠ è½½SettingServiceã€‚///æ‰€ä»¥GetMaterialApp()ä¸éœ€è¦é‡å»ºï¼Œå¯ä»¥ç›´æ¥å–å€¼ã€‚void initServices() async &#123; print(&#x27;starting services ...&#x27;); ///è¿™é‡Œæ˜¯ä½ æ”¾get_storageã€hiveã€shared_prefåˆå§‹åŒ–çš„åœ°æ–¹ã€‚ ///æˆ–è€…moorè¿æ¥ï¼Œæˆ–è€…å…¶ä»–ä»€ä¹ˆå¼‚æ­¥çš„ä¸œè¥¿ã€‚ await Get.putAsync(() =&gt; DbService().init()); await Get.putAsync(SettingsService()).init(); print(&#x27;All services started...&#x27;);&#125;class DbService extends GetxService &#123; Future&lt;DbService&gt; init() async &#123; print(&#x27;$runtimeType delays 2 sec&#x27;); await 2.delay(); print(&#x27;$runtimeType ready!&#x27;); return this; &#125;&#125;class SettingsService extends GetxService &#123; void init() async &#123; print(&#x27;$runtimeType delays 1 sec&#x27;); await 1.delay(); print(&#x27;$runtimeType ready!&#x27;); &#125;&#125; å‚è€ƒ ä¸­æ–‡å®˜æ–¹æ–‡æ¡£","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"Widget","date":"2022-03-08T02:25:29.664Z","path":"wiki/Flutter/UI/Widget/","text":"WidgetFlutterä¸­çš„ä¸€åˆ‡éƒ½æ˜¯Widgetã€‚å…³äºFlutterçš„UIç»˜åˆ¶åŸç†å¯ä»¥å‚è€ƒçº·äº‰å†èµ·ï¼šFlutter-UIç»˜åˆ¶è§£æã€‚ ç®€è¦æ¦‚æ‹¬å°±æ˜¯ï¼Œæˆ‘ä»¬å†™å„ç§widgetï¼ŒFlutteræ¡†æ¶å¸®æˆ‘ä»¬è§£ææˆelementæ ‘ï¼Œæœ€ç»ˆè½¬æ¢æˆrenderobjectæ ‘ï¼Œå†é€šè¿‡åº•å±‚skiaç»˜åˆ¶ã€‚ Component Widgetï¼šç»„åˆç±»Widgetï¼Œè¿™ç±»Widgetéƒ½ç»§æ‰¿StatelessWidgetæˆ–StatefulWidgetï¼› Render Widgetï¼šæ¸²æŸ“ç±»Widgetï¼Œå‚ä¸layoutã€paintæµç¨‹ï¼Œæœ‰ä¸ä¹‹å¯¹åº”çš„Render Objectï¼› Proxy Widgetï¼šä»£ç†ç±»Widgetï¼Œæä¾›ä¸€äº›é™„åŠ çš„åŠŸèƒ½ï¼Œæ¯”å¦‚InheritedWidgetç”¨äºå…±äº«ä¿¡æ¯ï¼ŒParentDataWidgetç”¨äºä¸ºå…¶ä»–Widgetæä¾›ä¿¡æ¯ï¼› contextå¦‚æœ widget A æ‹¥æœ‰å­ widgetï¼Œé‚£ä¹ˆ widget A çš„ context å°†æˆä¸ºå…¶ç›´æ¥å…³è”å­ context çš„çˆ¶ contextã€‚ 1context.ancestorWidgetOfExactType(Scaffold) =&gt; é€šè¿‡ä» context å¾—åˆ°æ ‘ç»“æ„æ¥è¿”å›ç¬¬ä¸€ä¸ª Scaffold Widgetä¸»è¦æœ‰ä¸¤ç§ç±»å‹ï¼š StatelessWidgetï¼šåªæœ‰åœ¨åˆ›å»ºçš„æ—¶å€™ç»˜åˆ¶ä¸€æ¬¡ StatefulWidgetï¼šæ ¹æ®çŠ¶æ€ä¼šå‘ç”Ÿå˜åŒ– æ„Ÿè§‰è¿™æ ·è®¾è®¡è¿˜æ˜¯å¤„äºæ€§èƒ½è€ƒè™‘ï¼Œå½“æŸäº›æ§ä»¶ä¸éœ€è¦æ”¹å˜UIæ—¶ï¼Œä½¿ç”¨StatelessWidgetå°±ä¸ä¼šé‡ç»˜ã€‚ Widget12345678910111213abstract class Widget extends DiagnosticableTree &#123; final Key? key;//æ ‡è¯† https://medium.com/flutter/keys-what-are-they-good-for-13cb51742e7d Element createElement();//æ¯ä¸ªWidgetå¯¹åº”ä¸€ä¸ªElement /// æ˜¯å¦éœ€è¦æ›´æ–°ï¼Œæ ¹æ®runtimeTypeå’Œkeyæ¥åˆ¤æ–­ static bool canUpdate(Widget oldWidget, Widget newWidget) &#123; return oldWidget.runtimeType == newWidget.runtimeType &amp;&amp; oldWidget.key == newWidget.key; &#125;&#125; ä¸ºä»€ä¹ˆwidgetéƒ½æ˜¯immutable? @immutable ä»£è¡¨ Widget æ˜¯ä¸å¯å˜çš„ï¼Œè¿™ä¼šé™åˆ¶ Widget ä¸­å®šä¹‰çš„å±æ€§ï¼ˆå³é…ç½®ä¿¡æ¯ï¼‰å¿…é¡»æ˜¯ä¸å¯å˜çš„ï¼ˆfinalï¼‰ï¼Œä¸ºä»€ä¹ˆä¸å…è®¸ Widget ä¸­å®šä¹‰çš„å±æ€§å˜åŒ–å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼ŒFlutter ä¸­å¦‚æœå±æ€§å‘ç”Ÿå˜åŒ–åˆ™ä¼šé‡æ–°æ„å»ºWidgetæ ‘ï¼Œå³é‡æ–°åˆ›å»ºæ–°çš„ Widget å®ä¾‹æ¥æ›¿æ¢æ—§çš„ Widget å®ä¾‹ï¼Œæ‰€ä»¥å…è®¸ Widget çš„å±æ€§å˜åŒ–æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå› ä¸ºä¸€æ—¦ Widget è‡ªå·±çš„å±æ€§å˜äº†è‡ªå·±å°±ä¼šè¢«æ›¿æ¢ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Widget ä¸­å®šä¹‰çš„å±æ€§å¿…é¡»æ˜¯ final çš„åŸå› ã€‚ StatelessWidgetå¯¹äºStatelessWidgetï¼Œåªéœ€è¦é‡å†™buildæ–¹æ³•å³å¯ã€‚ StatefulWidgetStatefulWidgetæ˜¯é€šè¿‡Stateæ¥ç®¡ç†çŠ¶æ€ï¼ŒStateçš„ç”Ÿå‘½å‘¨æœŸä¹Ÿå°±æ˜¯Stateçš„ç”Ÿå‘½å‘¨æœŸã€‚å‚è€ƒï¼šState Keyåœ¨ Fultter ä¸­ï¼Œæ¯ä¸€ä¸ª Widget éƒ½æ˜¯è¢«å”¯ä¸€æ ‡è¯†çš„ã€‚è¿™ä¸ªå”¯ä¸€æ ‡è¯†åœ¨ build&#x2F;rendering é˜¶æ®µç”±æ¡†æ¶å®šä¹‰ã€‚è¯¥å”¯ä¸€æ ‡è¯†å¯¹åº”äºå¯é€‰çš„ Key å‚æ•°ã€‚å¦‚æœçœç•¥è¯¥å‚æ•°ï¼ŒFlutter å°†ä¼šä¸ºä½ ç”Ÿæˆä¸€ä¸ªã€‚ å‚è€ƒï¼škey è®¿é—®å­Widgeté€šè¿‡key 12345678910111213...GlobalKey&lt;MyStatefulWidgetState&gt; myWidgetStateKey = new GlobalKey&lt;MyStatefulWidgetState&gt;();...@overrideWidget build(BuildContext context)&#123; return new MyStatefulWidget( key: myWidgetStateKey, color: Colors.blue, );&#125;///è®¿é—®å­StatemyWidgetStateKey.currentState è®¿é—®çˆ¶Widget1234567891011121314151617181920class MyExposingWidgetState extends State&lt;MyExposingWidget&gt;&#123; Color _color; Color get color =&gt; _color; ...&#125;class MyChildWidget extends StatelessWidget &#123; @override Widget build(BuildContext context)&#123; // é€šè¿‡contextçš„æ–¹æ³• final MyExposingWidget widget = context.ancestorWidgetOfExactType(MyExposingWidget); final MyExposingWidgetState state = widget?.myState; return new Container( color: state == null ? Colors.blue : state.color, ); &#125;&#125; StatelessWidgetã€StatefulWidgeté€‰æ‹©ç­–ç•¥ï¼š ä¼˜å…ˆä½¿ç”¨ StatelessWidget å«æœ‰å¤§é‡å­ Widgetï¼ˆå¦‚æ ¹å¸ƒå±€ã€æ¬¡æ ¹å¸ƒå±€ï¼‰æ…ç”¨ StatefulWidget å°½é‡åœ¨å¶å­èŠ‚ç‚¹ä½¿ç”¨ StatefulWidget å°†ä¼šè°ƒç”¨åˆ°setState((){}) çš„ä»£ç å°½å¯èƒ½çš„å’Œè¦æ›´æ–°çš„è§†å›¾å°è£…åœ¨ä¸€ä¸ªå°½å¯èƒ½å°çš„æ¨¡å—é‡Œã€‚ å¦‚æœä¸€ä¸ªWidgetéœ€è¦reBuildï¼Œé‚£ä¹ˆå®ƒçš„å­èŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹ã€å…„å¼ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹åº”è¯¥å°½å¯èƒ½å°‘ InheritedWidgetå…è®¸æ ‘ä¸­è¾ƒä½å±‚æ¬¡çš„widgetå‘ä¸ŠæŸ¥æ‰¾ï¼Œè·å¾—ç¥–å…ˆwidgetçš„å¼•ç”¨ï¼Œä»¥åŠåœ¨ç¥–å…ˆæ”¹å˜çš„æ—¶å€™é‡å»ºè‡ªèº«ã€‚Theme.of()å’ŒNavigator.of()éƒ½æ˜¯InheritedWidgetçš„ä¾‹å­ã€‚ InheritedWidget ç»„ä»¶çš„æ‰€æœ‰å­ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥é€šè¿‡ BuildContext.dependOnInheritedWidgetOfExactType è·å–æ•°æ®ã€‚ updateShouldNotifyæ–¹æ³•æ¥å†³å®šæ˜¯å¦é€šçŸ¥å­æ ‘ä¸­ä¾èµ–dataçš„Widgetã€‚ å¦‚æœè¿”å›trueï¼Œåˆ™å­æ ‘ä¸­ä¾èµ–(buildå‡½æ•°ä¸­æœ‰è°ƒç”¨)æœ¬widgetçš„å­widgetçš„state.didChangeDependenciesä¼šè¢«è°ƒç”¨ å‚è€ƒ çº·äº‰å†èµ·ï¼šFlutter-UIç»˜åˆ¶è§£æ æ•°æ®å…±äº«ï¼ˆInheritedWidgetï¼‰ æºç åˆ†æç³»åˆ—ä¹‹InheritedWidget","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"}]},{"title":"è§¦æ‘¸æ»‘åŠ¨åŸç†","date":"2022-03-08T02:25:29.664Z","path":"wiki/Flutter/UI/è§¦æ‘¸æ»‘åŠ¨åŸç†/","text":"","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"}]},{"title":"SliverPersistentHeader","date":"2022-03-08T02:25:29.664Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/sliver_persistent_header/","text":"1234567SliverPersistentHeader(&#123; &#125;);","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"}]},{"title":"media_query","date":"2022-03-08T02:25:29.664Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/media_query/","text":"MediaQueryMediaQuery ç”¨äºæŸ¥è¯¢è§£æç»™å®šæ•°æ®çš„åª’ä½“ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œwindowå®½é«˜&#x2F;æ¨ªç«–å±&#x2F;åƒç´ å¯†åº¦æ¯”ç­‰ä¿¡æ¯ï¼‰å®˜æ–¹æä¾›è¿™ä¸ªç»„ä»¶è®©å¼€å‘è€…å¯ä»¥è·å–æƒ³è¦çš„æ•°æ®ã€‚å®ƒä¸»è¦ç”¨äºä¸åŒå°ºå¯¸å¤§å°è®¾å¤‡çš„é€‚é…ã€‚ Object &gt; DiagnosticableTree &gt; Widget &gt; ProxyWidget &gt; InheritedWidget &gt; MediaQuery å¸¸ç”¨å±æ€§data â†’ MediaQueryDataï¼šMediaQueryDataæ˜¯MediaQuery.ofè·å–æ•°æ®çš„ç±»å‹ã€‚ ä½¿ç”¨MediaQueryå¿…é¡»è¦MaterialApp æˆ–è€…WidgetsAppå»åŒ…è£¹æˆ‘ä»¬çš„Widgetï¼Œè¿™æ ·æ‰èƒ½å¤Ÿæä¾›æ­£å¸¸ä½¿ç”¨å®ƒï¼Œå¦åˆ™ä¼šå‡ºç°é”™è¯¯ã€‚ 1234var deviceData = MediaQuery.of(context); // è¿”å› MediaQueryDatavar width = deviceData.size.width; //è¿”å›contextæ‰€åœ¨çš„çª—å£å®½åº¦var height = deviceData.size.height;//è¿”å›contextæ‰€åœ¨çš„çª—å£é«˜åº¦ å¸¸ç”¨æ–¹æ³•MediaQueryData1234// è·å–MediaQueryDataçš„æ–¹å¼MediaQueryData.fromWindow(WidgetsBinding.instance!.window);MediaQuery.of(context); å¸¸ç”¨å±æ€§ å±æ€§ è¯´æ˜ size é€»è¾‘åƒç´ ï¼Œå¹¶ä¸æ˜¯ç‰©ç†åƒç´ ï¼Œç±»ä¼¼äºAndroidä¸­çš„dpï¼Œé€»è¾‘åƒç´ ä¼šåœ¨ä¸åŒå¤§å°çš„æ‰‹æœºä¸Šæ˜¾ç¤ºçš„å¤§å°åŸºæœ¬ä¸€æ ·ï¼Œç‰©ç†åƒç´  &#x3D; size*devicePixelRatioã€‚ devicePixelRatio å•ä½é€»è¾‘åƒç´ çš„ç‰©ç†åƒç´ æ•°é‡ï¼Œå³è®¾å¤‡åƒç´ æ¯”ã€‚ textScaleFactor å•ä½é€»è¾‘åƒç´ å­—ä½“åƒç´ æ•°ï¼Œå¦‚æœè®¾ç½®ä¸º1.5åˆ™æ¯”æŒ‡å®šçš„å­—ä½“å¤§50%ã€‚ platformBrightness å½“å‰è®¾å¤‡çš„äº®åº¦æ¨¡å¼ï¼Œæ¯”å¦‚åœ¨Android Pieæ‰‹æœºä¸Šè¿›å…¥çœç”µæ¨¡å¼ï¼Œæ‰€æœ‰çš„Appå°†ä¼šä½¿ç”¨æ·±è‰²ï¼ˆdarkï¼‰æ¨¡å¼ç»˜åˆ¶ã€‚ viewInsets è¢«ç³»ç»Ÿé®æŒ¡çš„éƒ¨åˆ†ï¼Œé€šå¸¸æŒ‡é”®ç›˜ï¼Œå¼¹å‡ºé”®ç›˜ï¼ŒviewInsets.bottomè¡¨ç¤ºé”®ç›˜çš„é«˜åº¦ã€‚ padding è¢«ç³»ç»Ÿé®æŒ¡çš„éƒ¨åˆ†ï¼Œé€šå¸¸æŒ‡â€œåˆ˜æµ·å±â€æˆ–è€…ç³»ç»ŸçŠ¶æ€æ ã€‚ viewPadding è¢«ç³»ç»Ÿé®æŒ¡çš„éƒ¨åˆ†ï¼Œé€šå¸¸æŒ‡â€œåˆ˜æµ·å±â€æˆ–è€…ç³»ç»ŸçŠ¶æ€æ ï¼Œæ­¤å€¼ç‹¬ç«‹äºpaddingå’ŒviewInsetsï¼Œå®ƒä»¬çš„å€¼ä»MediaQueryæ§ä»¶è¾¹ç•Œçš„è¾¹ç¼˜å¼€å§‹æµ‹é‡ã€‚åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œé€šå¸¸æ˜¯å…¨å±ã€‚ systemGestureInsets æ˜¾ç¤ºå±è¾¹ç¼˜ä¸Šç³»ç»Ÿâ€œæ¶ˆè€—â€çš„åŒºåŸŸè¾“å…¥äº‹ä»¶ï¼Œå¹¶é˜»æ­¢å°†è¿™äº›äº‹ä»¶ä¼ é€’ç»™åº”ç”¨ã€‚æ¯”å¦‚åœ¨Android Qæ‰‹åŠ¿æ»‘åŠ¨ç”¨äºé¡µé¢å¯¼èˆªï¼ˆiosä¹Ÿä¸€æ ·ï¼‰ï¼Œæ¯”å¦‚å·¦æ»‘é€€å‡ºå½“å‰é¡µé¢ã€‚ physicalDepth è®¾å¤‡çš„æœ€å¤§æ·±åº¦ï¼Œç±»ä¼¼äºä¸‰ç»´ç©ºé—´çš„Zè½´ã€‚ alwaysUse24HourFormat æ˜¯å¦æ˜¯24å°æ—¶åˆ¶ã€‚ accessibleNavigation ç”¨æˆ·æ˜¯å¦ä½¿ç”¨è¯¸å¦‚TalkBackæˆ–VoiceOverä¹‹ç±»çš„è¾…åŠ©åŠŸèƒ½ä¸åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ï¼Œç”¨äºå¸®åŠ©è§†åŠ›æœ‰éšœç¢çš„äººè¿›è¡Œä½¿ç”¨ã€‚ invertColors æ˜¯å¦æ”¯æŒé¢œè‰²åè½¬ã€‚ highContrast ç”¨æˆ·æ˜¯å¦è¦æ±‚å‰æ™¯ä¸èƒŒæ™¯ä¹‹é—´çš„å¯¹æ¯”åº¦é«˜ï¼Œ iOSä¸Šï¼Œæ–¹æ³•æ˜¯é€šè¿‡â€œè®¾ç½®â€-&gt;â€œè¾…åŠ©åŠŸèƒ½â€-&gt;â€œå¢åŠ å¯¹æ¯”åº¦â€ã€‚ æ­¤æ ‡å¿—ä»…åœ¨è¿è¡ŒiOS 13çš„iOSè®¾å¤‡ä¸Šæ›´æ–°æˆ–ä»¥ä¸Šã€‚ disableAnimations å¹³å°æ˜¯å¦è¦æ±‚å°½å¯èƒ½ç¦ç”¨æˆ–å‡å°‘åŠ¨ç”»ã€‚ boldText å¹³å°æ˜¯å¦è¦æ±‚ä½¿ç”¨ç²—ä½“ã€‚ orientation æ˜¯æ¨ªå±è¿˜æ˜¯ç«–å±ã€‚","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"}]},{"title":"text","date":"2022-03-08T02:25:29.664Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/text/","text":"TextPainter12","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"}]},{"title":"scroll_view","date":"2022-03-08T02:25:29.664Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/scroll_view/","text":"ListView123ListView&#123;itemExtent //å¼ºåˆ¶é™åˆ¶é«˜åº¦&#125; CustomScrollViewslivers å¦‚æœä¸æ˜¯Sliverå®¶æ—çš„Widgetï¼Œéœ€è¦ä½¿ç”¨SliverToBoxAdapteråšå±‚åŒ…è£¹ æ³¨æ„ç‚¹ å½“åˆ—è¡¨é¡¹é«˜åº¦å›ºå®šæ—¶ï¼Œä½¿ç”¨ SliverFixedExtendList æ¯” SliverList å…·æœ‰æ›´é«˜çš„æ€§èƒ½ GridView1234567891011121314GridView.builder( gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(//å¯ä»¥ç›´æ¥æŒ‡å®šæ¯è¡Œï¼ˆåˆ—ï¼‰æ˜¾ç¤ºå¤šå°‘ä¸ªItem crossAxisCount: 3,//ä¸€è¡Œçš„Widgetæ•°é‡ crossAxisSpacing: 5.0, //æ°´å¹³é—´è· mainAxisSpacing: 5.0, //å‚ç›´é—´è· childAspectRatio: 1.0,//å­Widgetå®½é«˜æ¯”ä¾‹ ), padding: EdgeInsets.all(10.0),//GridViewå†…è¾¹è· itemCount: _dataArr.length, // å…ƒç´ ä¸ªæ•° //å•å…ƒæ ¼æ ·å¼ itemBuilder: (context, index) &#123; return item(_dataArr,index,context); &#125;)","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"}]},{"title":"State","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/State/","text":"æ¦‚è¿°Stateè¡¨ç¤ºå¯¹åº”çš„StatefulElementéœ€è¦ä¿å­˜çš„ä¿¡æ¯ã€‚ ç”Ÿå‘½å‘¨æœŸ å¸¸ç”¨å±æ€§widgetå®ƒè¡¨ç¤ºä¸è¯¥Stateå®ä¾‹å…³è”çš„widgetå®ä¾‹ï¼Œç”±Flutter frameworkåŠ¨æ€è®¾ç½®ã€‚æ³¨æ„ï¼Œè¿™ç§å…³è”å¹¶éæ°¸ä¹…çš„ï¼Œå› ä¸ºåœ¨åº”ç”¨ç”Ÿå‘½å‘¨æœŸä¸­ï¼ŒUIæ ‘ä¸Šçš„æŸä¸€ä¸ªèŠ‚ç‚¹çš„widgetå®ä¾‹åœ¨é‡æ–°æ„å»ºæ—¶å¯èƒ½ä¼šå˜åŒ–ï¼Œä½†Stateå®ä¾‹åªä¼šåœ¨ç¬¬ä¸€æ¬¡æ’å…¥åˆ°æ ‘ä¸­æ—¶è¢«åˆ›å»ºï¼Œå½“åœ¨é‡æ–°æ„å»ºæ—¶ï¼Œå¦‚æœwidgetè¢«ä¿®æ”¹äº†ï¼ŒFlutter frameworkä¼šåŠ¨æ€è®¾ç½®State.widgetä¸ºæ–°çš„widgetå®ä¾‹ã€‚ contextStatefulWidgetå¯¹åº”çš„BuildContextï¼Œä½œç”¨åŒStatelessWidgetçš„BuildContextï¼Œè¡¨ç¤ºå½“å‰widgetåœ¨widgetæ ‘ä¸­çš„ä¸Šä¸‹æ–‡ï¼Œæ¯ä¸€ä¸ªwidgetéƒ½ä¼šå¯¹åº”ä¸€ä¸ªcontextå¯¹è±¡ï¼ˆå› ä¸ºæ¯ä¸€ä¸ªwidgetéƒ½æ˜¯widgetæ ‘ä¸Šçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼‰ã€‚ å¸¸ç”¨æ–¹æ³•initStateå½“Widgetç¬¬ä¸€æ¬¡æ’å…¥åˆ°Widgetæ ‘æ—¶ä¼šè¢«è°ƒç”¨ï¼Œå¯¹äºæ¯ä¸€ä¸ªStateå¯¹è±¡ï¼ŒFlutter frameworkåªä¼šè°ƒç”¨ä¸€æ¬¡è¯¥å›è°ƒï¼Œæ‰€ä»¥ï¼Œé€šå¸¸åœ¨è¯¥å›è°ƒä¸­åšä¸€äº›ä¸€æ¬¡æ€§çš„æ“ä½œï¼Œå¦‚çŠ¶æ€åˆå§‹åŒ–ã€è®¢é˜…å­æ ‘çš„äº‹ä»¶é€šçŸ¥ç­‰ã€‚ä¸èƒ½åœ¨è¯¥å›è°ƒä¸­è°ƒç”¨BuildContext.dependOnInheritedWidgetOfExactTypeï¼ˆè¯¥æ–¹æ³•ç”¨äºåœ¨Widgetæ ‘ä¸Šè·å–ç¦»å½“å‰widgetæœ€è¿‘çš„ä¸€ä¸ªçˆ¶çº§InheritFromWidgetï¼Œå…³äºInheritedWidgetæˆ‘ä»¬å°†åœ¨åé¢ç« èŠ‚ä»‹ç»ï¼‰ï¼ŒåŸå› æ˜¯åœ¨åˆå§‹åŒ–å®Œæˆåï¼ŒWidgetæ ‘ä¸­çš„InheritFromWidgetä¹Ÿå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œæ‰€ä»¥æ­£ç¡®çš„åšæ³•åº”è¯¥åœ¨build()æ–¹æ³•æˆ–didChangeDependencies()ä¸­è°ƒç”¨å®ƒã€‚ Element.mountâ€”&gt;Element._firstBuildâ€”&gt;Element.rebuildâ€”&gt;state.initState() didChangeDependencies()å½“Stateå¯¹è±¡çš„ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶ä¼šè¢«è°ƒç”¨ï¼›ä¾‹å¦‚ï¼šåœ¨ä¹‹å‰build() ä¸­åŒ…å«äº†ä¸€ä¸ªInheritedWidgetï¼Œç„¶ååœ¨ä¹‹åçš„build() ä¸­InheritedWidgetå‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆæ­¤æ—¶InheritedWidgetçš„å­widgetçš„didChangeDependencies()å›è°ƒéƒ½ä¼šè¢«è°ƒç”¨ã€‚å…¸å‹çš„åœºæ™¯æ˜¯å½“ç³»ç»Ÿè¯­è¨€Localeæˆ–åº”ç”¨ä¸»é¢˜æ”¹å˜æ—¶ï¼ŒFlutter frameworkä¼šé€šçŸ¥widgetè°ƒç”¨æ­¤å›è°ƒã€‚ build()ï¼šå®ƒä¸»è¦æ˜¯ç”¨äºæ„å»ºWidgetå­æ ‘çš„ï¼Œä¼šåœ¨å¦‚ä¸‹åœºæ™¯è¢«è°ƒç”¨ï¼š åœ¨è°ƒç”¨initState()ä¹‹åã€‚ åœ¨è°ƒç”¨didUpdateWidget()ä¹‹åã€‚ åœ¨è°ƒç”¨setState()ä¹‹åã€‚ åœ¨è°ƒç”¨didChangeDependencies()ä¹‹åã€‚ åœ¨Stateå¯¹è±¡ä»æ ‘ä¸­ä¸€ä¸ªä½ç½®ç§»é™¤åï¼ˆä¼šè°ƒç”¨deactivateï¼‰åˆé‡æ–°æ’å…¥åˆ°æ ‘çš„å…¶å®ƒä½ç½®ä¹‹åã€‚ reassemble()æ­¤å›è°ƒæ˜¯ä¸“é—¨ä¸ºäº†å¼€å‘è°ƒè¯•è€Œæä¾›çš„ï¼Œåœ¨çƒ­é‡è½½(hot reload)æ—¶ä¼šè¢«è°ƒç”¨ï¼Œæ­¤å›è°ƒåœ¨Releaseæ¨¡å¼ä¸‹æ°¸è¿œä¸ä¼šè¢«è°ƒç”¨ã€‚ didUpdateWidget()åœ¨widgeté‡æ–°æ„å»ºæ—¶ï¼ŒFlutter frameworkä¼šè°ƒç”¨Widget.canUpdateæ¥æ£€æµ‹Widgetæ ‘ä¸­åŒä¸€ä½ç½®çš„æ–°æ—§èŠ‚ç‚¹ï¼Œç„¶åå†³å®šæ˜¯å¦éœ€è¦æ›´æ–°ï¼Œå¦‚æœWidget.canUpdateè¿”å›trueåˆ™ä¼šè°ƒç”¨æ­¤å›è°ƒã€‚æ­£å¦‚ä¹‹å‰æ‰€è¿°ï¼ŒWidget.canUpdateä¼šåœ¨æ–°æ—§widgetçš„keyå’ŒruntimeTypeåŒæ—¶ç›¸ç­‰æ—¶ä¼šè¿”å›trueï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨åœ¨æ–°æ—§widgetçš„keyå’ŒruntimeTypeåŒæ—¶ç›¸ç­‰æ—¶didUpdateWidget()å°±ä¼šè¢«è°ƒç”¨ã€‚ deactivate()å½“Stateå¯¹è±¡ä»æ ‘ä¸­è¢«ç§»é™¤æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å›è°ƒã€‚åœ¨ä¸€äº›åœºæ™¯ä¸‹ï¼ŒFlutter frameworkä¼šå°†Stateå¯¹è±¡é‡æ–°æ’åˆ°æ ‘ä¸­ï¼Œå¦‚åŒ…å«æ­¤Stateå¯¹è±¡çš„å­æ ‘åœ¨æ ‘çš„ä¸€ä¸ªä½ç½®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªä½ç½®æ—¶ï¼ˆå¯ä»¥é€šè¿‡GlobalKeyæ¥å®ç°ï¼‰ã€‚å¦‚æœç§»é™¤åæ²¡æœ‰é‡æ–°æ’å…¥åˆ°æ ‘ä¸­åˆ™ç´§æ¥ç€ä¼šè°ƒç”¨dispose()æ–¹æ³•ã€‚ dispose()å½“Stateå¯¹è±¡ä»æ ‘ä¸­è¢«æ°¸ä¹…ç§»é™¤æ—¶è°ƒç”¨ï¼›é€šå¸¸åœ¨æ­¤å›è°ƒä¸­é‡Šæ”¾èµ„æºã€‚ APPç”Ÿå‘½å‘¨æœŸ1234567891011121314151617181920212223242526abstract class WidgetsBindingObserver &#123; // é¡µé¢ pop Future&lt;bool&gt; didPopRoute() =&gt; Future&lt;bool&gt;.value(false); // é¡µé¢ push Future&lt;bool&gt; didPushRoute(String route) =&gt; Future&lt;bool&gt;.value(false); // ç³»ç»Ÿçª—å£ç›¸å…³æ”¹å˜å›è°ƒï¼Œå¦‚æ—‹è½¬ void didChangeMetrics() &#123; &#125; // æ–‡æœ¬ç¼©æ”¾ç³»æ•°å˜åŒ– void didChangeTextScaleFactor() &#123; &#125; // ç³»ç»Ÿäº®åº¦å˜åŒ– void didChangePlatformBrightness() &#123; &#125; // æœ¬åœ°åŒ–è¯­è¨€å˜åŒ– void didChangeLocales(List&lt;Locale&gt; locale) &#123; &#125; //App ç”Ÿå‘½å‘¨æœŸå˜åŒ– AppLifecycleStateæšä¸¾å€¼ï¼š resumedï¼šå¯è§çš„ï¼Œå¹¶èƒ½å“åº”ç”¨æˆ·çš„è¾“å…¥ã€‚ inactiveï¼šå¤„åœ¨ä¸æ´»åŠ¨çŠ¶æ€ï¼Œæ— æ³•å¤„ç†ç”¨æˆ·å“åº”ã€‚ pausedï¼šä¸å¯è§å¹¶ä¸èƒ½å“åº”ç”¨æˆ·çš„è¾“å…¥ï¼Œä½†æ˜¯åœ¨åå°ç»§ç»­æ´»åŠ¨ä¸­ã€‚ void didChangeAppLifecycleState(AppLifecycleState state) &#123; &#125; // å†…å­˜è­¦å‘Šå›è°ƒ void didHaveMemoryPressure() &#123; &#125; //Accessibility ç›¸å…³ç‰¹æ€§å›è°ƒ void didChangeAccessibilityFeatures() &#123;&#125;&#125; å‚è€ƒ Flutter Widgetç”Ÿå‘½å‘¨æœŸè¯¦è§£","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"}]},{"title":"MaterialApp","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/material/MaterialApp/","text":"å¸¸ç”¨å±æ€§GlobalKey navigatorKeyç±»å‹ï¼Œå¯¼èˆªé”® final RouteFactory? onGenerateRouteç”Ÿæˆè·¯ç”±çš„å›è°ƒå‡½æ•°ï¼Œå½“å¯¼èˆªçš„å‘½åè·¯ç”±çš„æ—¶å€™ï¼Œä¼šä½¿ç”¨è¿™ä¸ªæ¥ç”Ÿæˆç•Œé¢ã€‚ final RouteFactory? onUnknownRoute;æœªçŸ¥è·¯ç”± final String? initialRoute;åˆå§‹è·¯ç”±ï¼Œé»˜è®¤å€¼ä¸º Window.defaultRouteNameã€‚ appè¿è¡Œåè¿›å…¥çš„åˆå§‹è·¯ç”±ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåˆ™è¿›å…¥homeã€‚ final TransitionBuilder? builder;å»ºé€ è€… final String title;åœ¨ä»»åŠ¡ç®¡ç†çª—å£ä¸­æ‰€æ˜¾ç¤ºçš„åº”ç”¨åå­— final GenerateAppTitle? onGenerateTitle;ç”Ÿæˆæ ‡é¢˜ final Color? color;åº”ç”¨çš„ä¸»è¦é¢œè‰²å€¼ï¼ˆprimary colorï¼‰ï¼Œä¹Ÿå°±æ˜¯å®‰å“ä»»åŠ¡ç®¡ç†çª—å£ä¸­æ‰€æ˜¾ç¤ºçš„åº”ç”¨é¢œè‰² final Locale? locale;æœ¬åœ°åŒ– final Iterable&lt;LocalizationsDelegate&gt;? localizationsDelegates;æœ¬åœ°åŒ–å§”æ‰˜ final Iterable supportedLocales;æ”¯æŒæœ¬åœ°åŒ–åˆ—è¡¨ final Widget? home;åº”ç”¨é»˜è®¤æ‰€æ˜¾ç¤ºçš„ç•Œé¢ Widgetã€‚ homeæ˜¯é»˜è®¤æ ¹è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯â€™&#x2F;â€˜ routesæ˜¯è·¯ç”±è¡¨. å¦‚æœæ²¡æœ‰homeï¼Œé‚£ä¹ˆroutesä¸­è¦æœ‰â€œ&#x2F;â€è·¯ç”±ï¼ˆNavigator.defaultRouteNameï¼‰ final Map&lt;String, WidgetBuilder&gt;? routes;åº”ç”¨çš„é¡¶çº§å¯¼èˆªè¡¨æ ¼ final bool debugShowMaterialGrid;æ˜¯å¦æ˜¾ç¤º çº¸å¢¨è®¾è®¡ åŸºç¡€å¸ƒå±€ç½‘æ ¼ï¼Œç”¨æ¥è°ƒè¯• UI çš„å·¥å…· theme:ThemeDataä¸»é¢˜è®¾ç½®","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"material","slug":"Flutter/UI/æ ‡å‡†åº“/material","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/material/"}]},{"title":"Scaffold","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/material/Scaffold/","text":"Scaffoldæ˜¯Material Designå¸ƒå±€ç»“æ„çš„åŸºæœ¬å®ç°ã€‚","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"material","slug":"Flutter/UI/æ ‡å‡†åº“/material","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/material/"}]},{"title":"app_bar","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/material/app_bar/","text":"12345678910111213141516171819202122232425262728293031323334353637383940414243AppBar(&#123;Key? key,this.leading, //widgetç±»å‹ï¼Œå³å¯ä»»æ„è®¾è®¡æ ·å¼ï¼Œè¡¨ç¤ºå·¦ä¾§leadingåŒºåŸŸï¼Œé€šå¸¸ä¸ºiconï¼Œå¦‚è¿”å›iconthis.automaticallyImplyLeading = true, // å¦‚æœleading!=nullï¼Œè¯¥å±æ€§ä¸ç”Ÿæ•ˆï¼›å¦‚æœleading==nullä¸”ä¸ºtrueï¼Œå·¦ä¾§leadingåŒºåŸŸç•™ç™½ï¼›å¦‚æœleading==nullä¸”ä¸ºfalseï¼Œå·¦ä¾§leadingåŒºåŸŸæ‰©å±•ç»™titleåŒºåŸŸä½¿ç”¨this.title,// å¦‚æœleading!=nullï¼Œè¯¥å±æ€§ä¸ç”Ÿæ•ˆï¼›å¦‚æœleading==nullä¸”ä¸ºtrueï¼Œå·¦ä¾§leadingåŒºåŸŸç•™ç™½ï¼›å¦‚æœleading==nullä¸”ä¸ºfalseï¼Œå·¦ä¾§leadingåŒºåŸŸæ‰©å±•ç»™titleåŒºåŸŸä½¿ç”¨this.actions,// List&lt;Widget&gt;ç±»å‹ï¼Œå³å¯ä»»æ„è®¾è®¡æ ·å¼ï¼Œè¡¨ç¤ºå³ä¾§actionsåŒºåŸŸï¼Œå¯æ”¾ç½®å¤šä¸ªwidgetï¼Œé€šå¸¸ä¸ºiconï¼Œå¦‚æœç´¢iconã€èœå•iconthis.flexibleSpace, //å¯ç¼©æ”¾åŒºåŸŸï¼Œå¸é¡¶åè¢«titleæŒ¡ä½this.bottom,//PreferredSizeWidgetç±»å‹ï¼Œappbaråº•éƒ¨åŒºåŸŸï¼Œé€šå¸¸ä¸ºTabæ§ä»¶this.elevation,//PreferredSizeWidgetç±»å‹ï¼Œappbaråº•éƒ¨åŒºåŸŸï¼Œé€šå¸¸ä¸ºTabæ§ä»¶this.shadowColor,this.shape, //æè¾¹this.backgroundColor,this.foregroundColor,@Deprecated( &#x27;This property is no longer used, please use systemOverlayStyle instead. &#x27; &#x27;This feature was deprecated after v2.4.0-0.0.pre.&#x27;,)this.brightness,//Brightnessç±»å‹ï¼Œè¡¨ç¤ºå½“å‰appbarä¸»é¢˜æ˜¯äº®æˆ–æš—è‰²è°ƒï¼Œæœ‰darkå’Œlightä¸¤ä¸ªå€¼ï¼Œå¯å½±å“ç³»ç»ŸçŠ¶æ€æ çš„å›¾æ ‡é¢œè‰²this.iconTheme, //IconThemeDataç±»å‹ï¼Œå¯å½±å“åŒ…æ‹¬leadingã€titleã€actionsä¸­iconçš„é¢œè‰²ã€é€æ˜åº¦ï¼ŒåŠleadingä¸­çš„iconå¤§å°ã€‚this.actionsIconTheme,@Deprecated( &#x27;This property is no longer used, please use toolbarTextStyle and titleTextStyle instead. &#x27; &#x27;This feature was deprecated after v2.4.0-0.0.pre.&#x27;,)this.textTheme,// TextThemeç±»å‹ï¼Œæ–‡æœ¬ä¸»é¢˜æ ·å¼ï¼Œå¯è®¾ç½®appbarä¸­æ–‡æœ¬çš„è®¸å¤šæ ·å¼ï¼Œå¦‚å­—ä½“å¤§å°ã€é¢œè‰²ã€å‰æ™¯è‰²ã€èƒŒæ™¯è‰²ç­‰...this.primary = true,//trueæ—¶ï¼ŒappBarä¼šä»¥ç³»ç»ŸçŠ¶æ€æ é«˜åº¦ä¸ºé—´è·æ˜¾ç¤ºåœ¨ä¸‹æ–¹ï¼›falseæ—¶ï¼Œä¼šå’ŒçŠ¶æ€æ é‡å ï¼Œç›¸å½“äºå…¨å±æ˜¾ç¤ºã€‚this.centerTitle,// boolean ç±»å‹ï¼Œè¡¨ç¤ºæ ‡é¢˜æ˜¯å¦å±…ä¸­æ˜¾ç¤ºthis.excludeHeaderSemantics = false,this.titleSpacing,this.toolbarOpacity = 1.0,//toolbaråŒºåŸŸé€æ˜åº¦this.bottomOpacity = 1.0,//bottomåŒºåŸŸé€æ˜åº¦this.toolbarHeight,this.leadingWidth,@Deprecated( &#x27;This property is obsolete and is false by default. &#x27; &#x27;This feature was deprecated after v2.4.0-0.0.pre.&#x27;,)this.backwardsCompatibility,this.toolbarTextStyle,this.titleTextStyle,this.systemOverlayStyle,&#125;) 1234567891011121314151617181920212223242526272829303132333435363738SliverAppBar(&#123; //åœ¨æ ‡é¢˜å·¦ä¾§æ˜¾ç¤ºçš„ä¸€ä¸ªæ§ä»¶ï¼Œåœ¨é¦–é¡µé€šå¸¸æ˜¾ç¤ºåº”ç”¨çš„ logoï¼›åœ¨å…¶ä»–ç•Œé¢é€šå¸¸æ˜¾ç¤ºä¸ºè¿”å›æŒ‰é’® this.leading, this.automaticallyImplyLeading = true, this.title, this.actions,//ä¸€ä¸ª Widget åˆ—è¡¨ï¼Œä»£è¡¨ Toolbar ä¸­æ‰€æ˜¾ç¤ºçš„èœå•ï¼Œå¯¹äºå¸¸ç”¨çš„èœå•ï¼Œé€šå¸¸ä½¿ç”¨ IconButton æ¥è¡¨ç¤ºï¼›å¯¹äºä¸å¸¸ç”¨çš„èœå•é€šå¸¸ä½¿ç”¨ PopupMenuButton æ¥æ˜¾ç¤ºä¸ºä¸‰ä¸ªç‚¹ï¼Œç‚¹å‡»åå¼¹å‡ºäºŒçº§èœå• this.flexibleSpace, this.bottom,//ä¸€ä¸ª AppBarBottomWidget å¯¹è±¡ï¼Œç”¨æ¥åœ¨ Toolbar æ ‡é¢˜ä¸‹é¢æ˜¾ç¤ºä¸€ä¸ªWidgetã€‚ this.elevation, this.shadowColor, this.forceElevated = false, this.backgroundColor, //APP bar çš„é¢œè‰² this.foregroundColor, this.brightness, //App bar çš„äº®åº¦ï¼Œæœ‰ç™½è‰²å’Œé»‘è‰²ä¸¤ç§ä¸»é¢˜ï¼Œé»˜è®¤å€¼ä¸º ThemeData.primaryColorBrightness this.iconTheme, this.actionsIconTheme, this.textTheme, this.primary = true,//æ­¤åº”ç”¨æ æ˜¯å¦æ˜¾ç¤ºåœ¨å±å¹•é¡¶éƒ¨ this.centerTitle,//æ ‡é¢˜æ˜¯å¦å±…ä¸­æ˜¾ç¤ºï¼Œé»˜è®¤å€¼æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæ˜¾ç¤ºæ–¹å¼ä¸ä¸€æ ·,trueå±…ä¸­ falseå±…å·¦ this.excludeHeaderSemantics = false, this.titleSpacing,//æ ‡é¢˜æ˜¯å¦å±…ä¸­æ˜¾ç¤ºï¼Œé»˜è®¤å€¼æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæ˜¾ç¤ºæ–¹å¼ä¸ä¸€æ ·,trueå±…ä¸­ falseå±…å·¦ this.collapsedHeight,//æ”¶ç¼©çš„æœ€å°é«˜åº¦ this.expandedHeight,//å±•å¼€é«˜åº¦ this.floating = false,//æ˜¯å¦éšç€æ»‘åŠ¨éšè—æ ‡é¢˜ this.pinned = false,//SliverAppBaræ”¶ç¼©åˆ°æœ€å°é«˜åº¦çš„æ—¶å€™SliverAppBaræ˜¯å¦å¯è§ this.snap = false,//SliverAppBaræ”¶ç¼©åˆ°æœ€å°é«˜åº¦çš„æ—¶å€™SliverAppBaræ˜¯å¦å¯è§ã€‚SliverAppBaræ”¶ç¼©åˆ°æœ€å°é«˜åº¦çš„æ—¶å€™SliverAppBaræ˜¯å¦å¯è§ this.stretch = false,//SliverAppBarå®Œå…¨å±•å¼€åæ˜¯å¦å¯ä»¥ç»§ç»­æ‹‰ä¼¸ï¼Œæ³¨æ„è¿™ä¸ªéœ€è¦å¤–éƒ¨æ»‘åŠ¨ç»„ä»¶physicsçš„æ”¯æŒï¼ˆè®¾ç½®BouncingScrollPhysics()ï¼Œæ»‘åŠ¨åˆ°æ ‡ç•Œå¯ä»¥ç»§ç»­æ»‘åŠ¨æ‹¥æœ‰å›å¼¹æ•ˆæœï¼‰ï¼Œå¦åˆ™æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ this.stretchTriggerOffset = 100.0, this.onStretchTrigger, this.shape, this.toolbarHeight = kToolbarHeight, this.leadingWidth, this.backwardsCompatibility, this.toolbarTextStyle, this.titleTextStyle, this.systemOverlayStyle,&#125;); å‚è€ƒ https://github.com/yechaoa/flutter_sliverappbar","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"material","slug":"Flutter/UI/æ ‡å‡†åº“/material","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/material/"}]},{"title":"tabs","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/material/tabs/","text":"æ¦‚è¿°TabBarï¼šTabé¡µçš„é€‰é¡¹ç»„ä»¶ï¼Œé»˜è®¤ä¸ºæ°´å¹³æ’åˆ—ã€‚ TabBarViewï¼šTabé¡µçš„å†…å®¹å®¹å™¨ï¼ŒTabé¡µå†…å®¹ä¸€èˆ¬å¤„ç†ä¸ºéšé€‰é¡¹å¡çš„æ”¹å˜è€Œæ”¹å˜ã€‚ TabControllerï¼šTabBarå’ŒTabBarViewçš„æ§åˆ¶å™¨ï¼Œå®ƒæ˜¯å…³è”è¿™ä¸¤ä¸ªç»„ä»¶çš„æ¡¥æ¢ã€‚ TabBarView1234567891011121314151617181920212223242526 const TabBar(&#123; Key? key, required this.tabs,//ä¸€ç³»åˆ—æ ‡ç­¾æ§ä»¶ this.controller,//ä¸€ç³»åˆ—æ ‡ç­¾æ§ä»¶ this.isScrollable = false,//æ˜¯å¦å¯æ»šåŠ¨ï¼Œé»˜è®¤false this.padding, this.indicatorColor,//æ˜¯å¦å¯æ»šåŠ¨ï¼Œé»˜è®¤false this.automaticIndicatorColorAdjustment = true, this.indicatorWeight = 2.0,//æ˜¯å¦å¯æ»šåŠ¨ï¼Œé»˜è®¤false this.indicatorPadding = EdgeInsets.zero, this.indicator,//æ˜¯å¦å¯æ»šåŠ¨ï¼Œé»˜è®¤false this.indicatorSize,//æŒ‡ç¤ºå™¨é•¿çŸ­ï¼Œtabï¼šå’Œtabä¸€æ ·é•¿ï¼Œlabelï¼šå’Œæ ‡ç­¾label ä¸€æ ·é•¿ this.labelColor,//æ ‡ç­¾é¢œè‰² this.labelStyle,//æ ‡ç­¾é¢œè‰² this.labelPadding,//æ ‡ç­¾é¢œè‰² this.unselectedLabelColor,//æ ‡ç­¾é¢œè‰² this.unselectedLabelStyle,//æ ‡ç­¾é¢œè‰² this.dragStartBehavior = DragStartBehavior.start, this.overlayColor, this.mouseCursor, this.enableFeedback, this.onTap, this.physics,indicator, //è‡ªå®šä¹‰æŒ‡ç¤ºå™¨ï¼Œæ¯”å¦‚ä½¿ç”¨UnderlineTabIndicator &#125;) å¦‚ä½•éšè—æŒ‡ç¤ºå™¨ 12//è®¾ç½®æŒ‡ç¤ºå™¨ä¸ºæ²¡æœ‰è§†å›¾çš„Widgetindicator: const BoxDecoration(),","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"material","slug":"Flutter/UI/æ ‡å‡†åº“/material","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/material/"}]},{"title":"toggle_buttons","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/material/toggle_buttons/","text":"12345678910111213141516171819202122232425const ToggleButtons(&#123; Key key, @required this.children, @required this.isSelected, this.onPressed, // ç‚¹å‡»çŠ¶æ€ this.mouseCursor, this.textStyle, // æ–‡æœ¬æ ·å¼ this.constraints, // å®½é«˜æœ€å¤§æœ€å°é™åˆ¶ this.color, // æœªé€‰ä¸­é¢œè‰² this.selectedColor, // é€‰ä¸­é¢œè‰² this.disabledColor, // ä¸å¯é€‰ä¸­é¢œè‰² this.fillColor, // å¡«å……é¢œè‰² this.focusColor, // æœ‰è¾“å…¥ç„¦ç‚¹æ—¶é¢œè‰² this.highlightColor, // é€‰ä¸­æ—¶é«˜äº®é¢œè‰² this.hoverColor, // åˆå§‹æ°´æ³¢çº¹é¢œè‰² this.splashColor, // é€‰ä¸­æ—¶æ°´æ³¢çº¹é¢œè‰² this.focusNodes, // æ¥å—å¯¹åº”äºæ¯ä¸ªåˆ‡æ¢æŒ‰é’®ç„¦ç‚¹åˆ—è¡¨ this.renderBorder = true, // æ˜¯å¦ç»˜åˆ¶è¾¹æ¡† this.borderColor, // æœªé€‰ä¸­è¾¹æ¡†é¢œè‰² this.selectedBorderColor, // é€‰ä¸­è¾¹æ¡†é¢œè‰² this.disabledBorderColor, // ä¸å¯é€‰ä¸­è¾¹æ¡†é¢œè‰² this.borderRadius, // è¾¹æ¡†åœ†è§’å¼§åº¦ this.borderWidth, // è¾¹æ¡†å®½åº¦&#125;)","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"material","slug":"Flutter/UI/æ ‡å‡†åº“/material","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/material/"}]},{"title":"Columnã€Row","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/Columnã€Row/","text":"å¸¸ç”¨å±æ€§MainAxisSizeä¸»è½´çš„å¯ç”¨ç©ºé—´å¤§å° min:ä¸»è½´ä¸Šå¯ä»¥åˆ†é…çš„æœ€å°ç©ºé—´ï¼Œç”±å­å…ƒç´ çš„å¸ƒå±€çº¦æŸå†³å®š max:ä¸»è½´ä¸Šå¯ä»¥åˆ†é…çš„æœ€å¤§ç©ºé—´ mainAxisAlignmentä¸»è½´ï¼Œå¯¹äºè¡Œï¼Œæ°´å¹³æ˜¯ä¸»è½´ï¼›å¯¹äºåˆ—ï¼Œç«–ç›´æ˜¯ä¸»è½´ã€‚ å‡è®¾TextDirectionæ˜¯ltrï¼ˆæ–‡å­—ä»å·¦å‘å³è¯»ï¼‰ start: å±…å·¦ endï¼šå±…å³ centerï¼šå±…ä¸­ spaceBetween:å°†ä¸»è½´æ–¹å‘ä¸Šçš„ç©ºç™½åŒºåŸŸå‡åˆ†ï¼Œä½¿å¾—childrenä¹‹é—´çš„ç©ºç™½åŒºåŸŸç›¸ç­‰ï¼Œé¦–å°¾childéƒ½é è¿‘é¦–å°¾ï¼Œæ²¡æœ‰é—´éš™ï¼› spaceAroundï¼šå°†ä¸»è½´æ–¹å‘ä¸Šçš„ç©ºç™½åŒºåŸŸå‡åˆ†ï¼Œä½¿å¾—å­å…ƒç´ ä¹‹é—´çš„ç©ºç™½åŒºåŸŸç›¸ç­‰ï¼Œä½†æ˜¯é¦–å°¾childçš„ç©ºç™½åŒºåŸŸä¸º1&#x2F;2 spaceEvenlyï¼šå°†ä¸»è½´æ–¹å‘ä¸Šçš„ç©ºç™½åŒºåŸŸå‡åˆ†ï¼Œä½¿å¾—childrenä¹‹é—´çš„ç©ºç™½åŒºåŸŸç›¸ç­‰ï¼ŒåŒ…æ‹¬é¦–å°¾childï¼› crossAxisAlignmentäº¤å‰è½´ï¼Œå¯¹äºè¡Œï¼Œç«–ç›´æ–¹å‘æ˜¯äº¤å‰è½´ï¼›å¯¹äºåˆ—ï¼Œæ°´å¹³æ–¹å‘æ˜¯äº¤å‰è½´ã€‚ å‡è®¾VerticalDirectionæ˜¯down start: å±…ä¸Š endï¼šå±…ä¸‹ centerï¼šå±…ä¸­ stretchï¼šè®©childrenå¡«æ»¡ç«–è½´æ–¹å‘ baselineï¼šä½¿å¾—childrençš„baselineå¯¹é½ï¼Œåœ¨å¯¹é½æ–‡å­—æ—¶å€™æ¯”è¾ƒæ¸¸æ³³ã€‚å°¤å…¶æ˜¯ä¸€è¡Œä¸­æœ‰ä¸åŒå¤§å°çš„æ–‡å­—ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨baselineå¯¹é½.","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"}]},{"title":"Overlay","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/Overlay/","text":"æ¦‚è¿°Overlayä½¿ç”¨Stackçš„æ–¹å¼æ·»åŠ æ‚¬æµ®å±‚ï¼Œå¯ä»¥å®ç°ç±»ä¼¼toastçš„æ•ˆæœã€‚ å‚è€ƒ Flutterï¼šä½¿ç”¨Overlayå±•ç¤ºæµ®åŠ¨çš„widget Flutter Overlay ç”¨æ³•ç®€ä»‹","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"}]},{"title":"async","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/async/","text":"FutureBuilder1234567891011FutureBuilder(&#123; this.future, //é€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥è€—æ—¶ä»»åŠ¡ this.initialData,//åˆå§‹æ•°æ® required this.builder,//Widgetæ„é€ å™¨ï¼Œè¯¥builderä¼šåœ¨Futureæ‰§è¡Œçš„ä¸åŒé˜¶æ®µè¢«è°ƒç”¨å¤šæ¬¡&#125;)final AsyncWidgetBuilder&lt;T&gt; builder;//snapshotåŒ…å«å½“å‰å¼‚æ­¥ä»»åŠ¡çš„çŠ¶æ€ä¿¡æ¯åŠç»“æœtypedef AsyncWidgetBuilder&lt;T&gt; = Widget Function(BuildContext context, AsyncSnapshot&lt;T&gt; snapshot); å®ä¾‹12345678910111213141516171819202122232425262728293031323334353637383940Widget build(BuildContext context) &#123; return Center( child: FutureBuilder&lt;String&gt;( future: mockNetworkData(), builder: (BuildContext context, AsyncSnapshot snapshot) &#123; // è¯·æ±‚å·²ç»“æŸ if (snapshot.connectionState == ConnectionState.done) &#123; if (snapshot.hasError) &#123; // è¯·æ±‚å¤±è´¥ï¼Œæ˜¾ç¤ºé”™è¯¯ return Text(&quot;Error: $&#123;snapshot.error&#125;&quot;); &#125; else &#123; // è¯·æ±‚æˆåŠŸï¼Œæ˜¾ç¤ºæ•°æ® return Text(&quot;Contents: $&#123;snapshot.data&#125;&quot;); &#125; &#125; else &#123; // è¯·æ±‚æœªç»“æŸï¼Œæ˜¾ç¤ºloading return CircularProgressIndicator(); &#125; &#125;, ), );&#125;enum ConnectionState &#123; /// å½“å‰æ²¡æœ‰å¼‚æ­¥ä»»åŠ¡ï¼Œæ¯”å¦‚[FutureBuilder]çš„[future]ä¸ºnullæ—¶ none, /// å¼‚æ­¥ä»»åŠ¡å¤„äºç­‰å¾…çŠ¶æ€ waiting, /// Streamå¤„äºæ¿€æ´»çŠ¶æ€ï¼ˆæµä¸Šå·²ç»æœ‰æ•°æ®ä¼ é€’äº†ï¼‰ï¼Œå¯¹äºFutureBuilderæ²¡æœ‰è¯¥çŠ¶æ€ã€‚ active, /// å¼‚æ­¥ä»»åŠ¡å·²ç»ç»ˆæ­¢. done,&#125; StreamBuilderDartä¸­ï¼ŒStreamä¹Ÿæ˜¯ç”¨äºå¼‚æ­¥äº‹ä»¶æ•°æ®ï¼Œå’ŒFutureä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ä»¥æ¥æ”¶å¤šä¸ªå¼‚æ­¥æ“ä½œçš„ç»“æœã€‚ StreamBuilderæ­£å¼ç”¨äºé…åˆStreamæ¥å±•ç¤ºæµä¸Šäº‹ä»¶ï¼ˆæ•°æ®ï¼‰å˜åŒ–çš„UIç»„ä»¶ã€‚ 12345StreamBuilder(&#123; this.initialData, Stream&lt;T&gt; stream, required this.builder,&#125;) å‚è€ƒ å¦‚ä½•ä½¿ç”¨ FutureBuilder and StreamBuilder ä¼˜é›…çš„æ„å»ºé«˜è´¨é‡é¡¹ç›® https://book.flutterchina.club/chapter7/futurebuilder_and_streambuilder.html","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"}]},{"title":"Keyã€ValueKeyã€ObjectKeyã€UniqueKeyã€PageStorageKeyã€GlobalKey","date":"2022-03-08T02:25:29.663Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/widgets/framework/Key/","text":"æ¦‚è¿°Keyçš„åˆ†ç±» ValueKey:ä»¥ä¸€ä¸ªå€¼ä¸ºkeyã€‚ ObjectKey:ä»¥ä¸€ä¸ªå¯¹è±¡ä¸ºkeyã€‚ UniqueKey:ç”Ÿæˆå”¯ä¸€çš„éšæœºæ•°ä½œä¸ºkeyã€‚ PageStorageKey:ä¸“ç”¨äºå­˜å‚¨é¡µé¢æ»šåŠ¨ä½ç½®çš„keyã€‚ GlobalKey:æ•´ä¸ªåº”ç”¨å†…å”¯ä¸€çš„keyã€‚ å‚è€ƒ","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"},{"name":"framework","slug":"Flutter/UI/æ ‡å‡†åº“/widgets/framework","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/framework/"}]},{"title":"Flutteræ’ä»¶","date":"2022-03-08T02:25:29.662Z","path":"wiki/Flutter/Flutteræ’ä»¶/","text":"Flutteråªæ˜¯ä¸€ä¸ªUIæ¡†æ¶ï¼Œè¿è¡Œåœ¨å®¿ä¸»å¹³å°ä¸Šï¼ŒFlutteræœ¬èº«æ— æ³•æä¾›ä¸€äº›ç³»ç»Ÿèƒ½åŠ›ï¼Œæ¯”å¦‚è“ç‰™ã€ç›¸æœºã€GPSç­‰ã€‚æ’ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šçš„åŒ…ï¼Œå’Œçº¯dartåŒ…çš„ä¸»è¦åŒºåˆ«æ˜¯æ’ä»¶ä¸­é™¤äº†dartä»£ç ï¼Œè¿˜åŒ…æ‹¬ç‰¹å®šå¹³å°çš„ä»£ç ã€‚ æ’ä»¶å®ç°åŸç†Flutteræä¾›äº†å¹³å°é€šé“ï¼ˆplatform channelï¼‰ç”¨äºFlutterå’ŒåŸç”Ÿå¹³å°çš„é€šä¿¡ï¼Œé€šä¿¡æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè¿œç¨‹è°ƒç”¨ï¼ˆRPCï¼‰ï¼Œé€šè¿‡æ¶ˆæ¯ä¼ é€’å®ç°ï¼š åº”ç”¨çš„Flutteréƒ¨åˆ†é€šè¿‡å¹³å°é€šé“å°†è°ƒç”¨æ¶ˆæ¯å‘é€åˆ°å®¿ä¸» å®¿ä¸»ç›‘å¬å¹³å°é€šé“ï¼Œå¹¶æ¥æ”¶æ”¹æ¶ˆæ¯ã€‚ç„¶åè°ƒç”¨å¹³å°APIï¼Œå¹¶å°†å“åº”å‘é€å›Flutter","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"Flutteré¡¹ç›®ç»“æ„","date":"2022-03-08T02:25:29.662Z","path":"wiki/Flutter/Flutteré¡¹ç›®ç»“æ„/","text":"æ–‡ä»¶å¤¹ç›®å½•æœ€åŸºç¡€çš„helloworldé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š .dart_toolï¼šè®°å½•äº†ä¸€äº›dartå·¥å…·åº“æ‰€åœ¨çš„ä½ç½®å’Œä¿¡æ¯ .ideaï¼šandroid studio æ˜¯åŸºäºideaå¼€å‘çš„ï¼Œ.idea è®°å½•äº†é¡¹ç›®çš„ä¸€äº›æ–‡ä»¶çš„å˜æ›´è®°å½• androidï¼šAndroidé¡¹ç›®æ–‡ä»¶å¤¹ iosï¼šiOSé¡¹ç›®æ–‡ä»¶å¤¹ libï¼šlibæ–‡ä»¶å¤¹å†…å­˜æ”¾æˆ‘ä»¬çš„dartä»£ç  testï¼šç”¨äºå­˜æ”¾æˆ‘ä»¬çš„æµ‹è¯•ä»£ç  webï¼šç½‘é¡µé¡¹ç›®æ–‡ä»¶å¤¹ fuchsiaï¼šfuchsiaé¡¹ç›®æ–‡ä»¶å¤¹ .gitignoreï¼šgitå¿½ç•¥é…ç½®æ–‡ä»¶ .metadataï¼šIDE ç”¨æ¥è®°å½•æŸä¸ª Flutter é¡¹ç›®å±æ€§çš„çš„éšè—æ–‡ä»¶ .packagesï¼špub å·¥å…·éœ€è¦ä½¿ç”¨çš„ï¼ŒåŒ…å« package ä¾èµ–çš„ yaml æ ¼å¼çš„æ–‡ä»¶ flutter_app.imlï¼š å·¥ç¨‹æ–‡ä»¶çš„æœ¬åœ°è·¯å¾„é…ç½® pubspec.lockï¼šå½“å‰é¡¹ç›®ä¾èµ–æ‰€ç”Ÿæˆçš„æ–‡ä»¶ pubspec.yamlï¼š å½“å‰é¡¹ç›®çš„ä¸€äº›é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“ã€å›¾ç‰‡èµ„æºæ–‡ä»¶ç­‰ README.mdï¼š READEMEæ–‡ä»¶ pubspec.yamlè¯¦è§£123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566name: flutter_app #åŒ…åï¼Œå¦‚æœå‘å¸ƒä¸€ä¸ªæ’ä»¶åˆ°pub.devï¼Œåˆ™è¯¥å±æ€§ä¼šä½œä¸ºæ ‡é¢˜å‡ºç°description: A new Flutter application. # é¡¹ç›®çš„ä»‹ç»publish_to: &#x27;none&#x27; # æ˜¯å¦å‘å¸ƒåˆ°dev.pubï¼Œå‘å¸ƒå‘½ä»¤flutter pub publish version: 1.0.0+1 # ç‰ˆæœ¬å·ï¼Œversion number + build numberï¼Œåœ¨ Android ä¸­ version number å¯¹åº” versionNameï¼Œbuild number å¯¹åº” versionCode# Flutter å’Œ Dart ç‰ˆæœ¬æ§åˆ¶environment: sdk: &quot;&gt;=2.7.0 &lt;3.0.0&quot;# ä¾èµ–çš„åº“é…ç½®ï¼Œæ‰€æœ‰çš„åº“ä¼šç¼–è¯‘åˆ°é¡¹ç›®ä¸­# ä¾èµ–åº“çš„å†™æ³•æœ‰ä»¥ä¸‹å‡ ç§ï¼š# # 1. ä¾èµ– pub.dev ä¸Šçš„ç¬¬ä¸‰æ–¹åº“: path_provider: ^1.6.22# 2. ä¾èµ–æœ¬åœ°åº“:# flutter_package:# path: ../flutter_package# 3. ä¾èµ– git repository:# bloc:# git:# url: https://github.com/felangel/bloc.git# ref: bloc_fixes_issue_110# path: packages/bloc //pub ä¼šé»˜è®¤å‡å®š package ä½äº Git ä»“åº“çš„æ ¹ç›®å½•ã€‚å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥ä½¿ç”¨ path å‚æ•°æŒ‡å®šä½ç½®# 4. ä¾èµ–æˆ‘ä»¬è‡ªå·±çš„ pubä»“åº“:# bloc: # hosted:# name: bloc# url: http://your-package-server.com# version: ^6.0.0#dependencies: flutter: sdk: flutter# ç‰ˆæœ¬çš„å†™æ³•# x.y.z æŒ‡å®šå…·ä½“ç‰ˆæœ¬å·# &lt;=x.y.z æˆ–è€…&lt;x.y.z å°äºæˆ–è€…å°äºç­‰äºæ­¤ç‰ˆæœ¬çš„åŒ…# &gt;=a.b.c &lt;x.y.z æŒ‡å®šç‰ˆæœ¬åŒºé—´ï¼Œ# ^x.y.z è¡¨ç¤ºå¤§ç‰ˆæœ¬ä¸å˜ï¼Œå°ç‰ˆæœ¬ä½¿ç”¨æœ€æ–°çš„ç‰ˆæœ¬ cupertino_icons: ^1.0.0# ä»…ä»…æ˜¯è¿è¡ŒæœŸé—´çš„ä¾èµ–åº“dev_dependencies: flutter_test: sdk: flutter# flutterç›¸å…³çš„é…ç½®é€‰é¡¹ã€‚flutter: uses-material-design: true # èµ„æºæ–‡ä»¶è®¾ç½® assets: - images/# å­—ä½“é…ç½® fonts: - family: Schyler fonts: - asset: fonts/Schyler-Regular.ttf - asset: fonts/Schyler-Italic.ttf style: italic - family: Trajan Pro fonts: - asset: fonts/TrajanPro.ttf - asset: fonts/TrajanPro_Bold.ttf weight: 700 åŒ…ä¾èµ–æ–¹å¼1234567891011// æœ¬åœ°ä¾èµ–dependencies: pkg1: path: ../../code/pkg1 // ä¾èµ–githubåœ°å€dependencies: pkg1: git: url: git://github.com/xxx/pkg1.git path: packages/package1 //pathå‚æ•°æŒ‡å®šç›¸å¯¹ä½ç½® èµ„æºç®¡ç†1234flutter: assets: - assets/my_icon.png - assets/background.png assetsæŒ‡å®šåº”åŒ…å«åœ¨åº”ç”¨ç¨‹åºä¸­çš„æ–‡ä»¶ï¼Œ æ¯ä¸ªassetéƒ½é€šè¿‡ç›¸å¯¹äºpubspec.yamlæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„æ¥æ ‡è¯†è‡ªèº«çš„è·¯å¾„ã€‚assetçš„å£°æ˜é¡ºåºæ˜¯æ— å…³ç´§è¦çš„ï¼Œassetçš„å®é™…ç›®å½•å¯ä»¥æ˜¯ä»»æ„æ–‡ä»¶å¤¹ï¼ˆåœ¨æœ¬ç¤ºä¾‹ä¸­æ˜¯assetsæ–‡ä»¶å¤¹ï¼‰ã€‚ Darté¡¹ç›®ç»“æ„å†™Dartä¹Ÿå¯æŒ‰ç…§Androidçš„MVVMæ€æƒ³æ¥åˆ’åˆ†æ–‡ä»¶å¤¹ç»“æ„ lib apiï¼šç½‘ç»œåº“ baseï¼šåŸºç¡€ç»„ä»¶ dataï¼šæ•°æ®model modelï¼šç½‘ç»œè¯·æ±‚æ•°æ®çš„å°è£…ï¼Œæ–¹ä¾¿è·Ÿåç«¯æ˜ å°„ utilsï¼šå·¥å…·ç±» viewï¼šè§†å›¾æ–‡ä»¶å¤¹ viewmodelï¼švmå±‚ å‚è€ƒ https://www.dartlang.org/tools/pub/dependencies The pubspec file","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"AppBar","date":"2022-03-08T02:25:29.662Z","path":"wiki/Flutter/UI/æ ‡å‡†åº“/material/AppBar/","text":"æ¦‚è¿°AppBarï¼ˆåº”ç”¨æ ï¼‰ç”±ä¸€ä¸ªå·¥å…·æ å’Œå…¶ä»–å°éƒ¨ä»¶ç»„æˆï¼Œåº”ç”¨æ é€šå¸¸ä½¿ç”¨IconButtonå…¬å¼€ä¸€ä¸ªæˆ–å¤šä¸ªæ“ä½œï¼Œä½¿ç”¨PopMenuButtonä½œä¸ºç‚¹å‡»åå±•å¼€çš„èœå•ã€‚ AppBaré€šå¸¸ç”¨äºScaffold.appBarå±æ€§ï¼Œå®ƒå°†åº”ç”¨æ å›ºå®šé«˜åº¦çš„å°éƒ¨ä»¶æ”¾ç½®åœ¨å±å¹•é¡¶éƒ¨ã€‚å¯¹äºå¯æ»šåŠ¨çš„åº”ç”¨æ ï¼Œåˆ™ä½¿ç”¨SliverAppBarï¼Œå®ƒå°†AppBaråµŒå…¥åˆ°sliverä¸­ã€‚ å¸¸ç”¨å±æ€§ leading â†’ Widget - åœ¨æ ‡é¢˜å‰é¢æ˜¾ç¤ºçš„ä¸€ä¸ªæ§ä»¶ï¼Œåœ¨é¦–é¡µé€šå¸¸æ˜¾ç¤ºåº”ç”¨çš„ logoï¼›åœ¨å…¶ä»–ç•Œé¢é€šå¸¸æ˜¾ç¤ºä¸ºè¿”å›æŒ‰é’®ã€‚ automaticallyImplyLeadingï¼š éšè—leading title â†’ Widget - Toolbar ä¸­ä¸»è¦å†…å®¹ï¼Œé€šå¸¸æ˜¾ç¤ºä¸ºå½“å‰ç•Œé¢çš„æ ‡é¢˜æ–‡å­—ã€‚ actions â†’ List - ä¸€ä¸ª Widget åˆ—è¡¨ï¼Œä»£è¡¨ Toolbar ä¸­æ‰€æ˜¾ç¤ºçš„èœå•ï¼Œå¯¹äºå¸¸ç”¨çš„èœå•ï¼Œé€šå¸¸ä½¿ç”¨ IconButton æ¥è¡¨ç¤ºï¼›å¯¹äºä¸å¸¸ç”¨çš„èœå•é€šå¸¸ä½¿ç”¨ PopupMenuButton æ¥æ˜¾ç¤ºä¸ºä¸‰ä¸ªç‚¹ï¼Œç‚¹å‡»åå¼¹å‡ºäºŒçº§èœå•ã€‚ bottom â†’ PreferredSizeWidget - ä¸€ä¸ª AppBarBottomWidget å¯¹è±¡ï¼Œé€šå¸¸æ˜¯ TabBarã€‚ç”¨æ¥åœ¨ Toolbar æ ‡é¢˜ä¸‹é¢æ˜¾ç¤ºä¸€ä¸ª Tab å¯¼èˆªæ ã€‚ elevation â†’ double - æ§ä»¶çš„ z åæ ‡é¡ºåºï¼Œé»˜è®¤å€¼ä¸º 4ï¼Œå¯¹äºå¯æ»šåŠ¨çš„ SliverAppBarï¼Œå½“ SliverAppBar å’Œå†…å®¹åŒçº§çš„æ—¶å€™ï¼Œè¯¥å€¼ä¸º 0ï¼Œ å½“å†…å®¹æ»šåŠ¨ SliverAppBar å˜ä¸º Toolbar çš„æ—¶å€™ï¼Œä¿®æ”¹ elevation çš„å€¼ã€‚ flexibleSpace â†’ Widget - ä¸€ä¸ªæ˜¾ç¤ºåœ¨ AppBar ä¸‹æ–¹çš„æ§ä»¶ï¼Œé«˜åº¦å’Œ AppBar é«˜åº¦ä¸€æ ·ï¼Œå¯ä»¥å®ç°ä¸€äº›ç‰¹æ®Šçš„æ•ˆæœï¼Œè¯¥å±æ€§é€šå¸¸åœ¨ SliverAppBar ä¸­ä½¿ç”¨ã€‚ backgroundColor â†’ Color - Appbar çš„é¢œè‰²ï¼Œé»˜è®¤å€¼ä¸º ThemeData.primaryColorã€‚æ”¹å€¼é€šå¸¸å’Œä¸‹é¢çš„ä¸‰ä¸ªå±æ€§ä¸€èµ·ä½¿ç”¨ã€‚ brightness â†’ Brightness - Appbar çš„äº®åº¦ï¼Œæœ‰ç™½è‰²å’Œé»‘è‰²ä¸¤ç§ä¸»é¢˜ï¼Œé»˜è®¤å€¼ä¸º ThemeData.primaryColorBrightnessã€‚ iconTheme â†’ IconThemeData - Appbar ä¸Šå›¾æ ‡çš„é¢œè‰²ã€é€æ˜åº¦ã€å’Œå°ºå¯¸ä¿¡æ¯ã€‚é»˜è®¤å€¼ä¸º ThemeData.primaryIconThemeã€‚ textTheme â†’ TextTheme - Appbar ä¸Šçš„æ–‡å­—æ ·å¼ã€‚ centerTitle â†’ bool - æ ‡é¢˜æ˜¯å¦å±…ä¸­æ˜¾ç¤ºï¼Œé»˜è®¤å€¼æ ¹æ®ä¸åŒçš„æ“ä½œç³»ç»Ÿï¼Œæ˜¾ç¤ºæ–¹å¼ä¸ä¸€æ ·ã€‚ toolbarOpacity â†’ double èŒƒä¾‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546// è¿”å›æ¯ä¸ªéšè—çš„èœå•é¡¹SelectView(IconData icon, String text, String id) &#123; return new PopupMenuItem&lt;String&gt;( value: id, child: new Row( mainAxisAlignment: MainAxisAlignment.spaceEvenly, children: &lt;Widget&gt;[ new Icon(icon, color: Colors.blue), new Text(text), ], ) );&#125;appBar: new AppBar( title: new Text(&#x27;é¦–é¡µ&#x27;), leading: new Icon(Icons.home), backgroundColor: Colors.blue, centerTitle: true, actions: &lt;Widget&gt;[ // ééšè—çš„èœå• new IconButton( icon: new Icon(Icons.add_alarm), tooltip: &#x27;Add Alarm&#x27;, onPressed: () &#123;&#125; ), // éšè—çš„èœå• new PopupMenuButton&lt;String&gt;( itemBuilder: (BuildContext context) =&gt; &lt;PopupMenuItem&lt;String&gt;&gt;[ this.SelectView(Icons.message, &#x27;å‘èµ·ç¾¤èŠ&#x27;, &#x27;A&#x27;), this.SelectView(Icons.group_add, &#x27;æ·»åŠ æœåŠ¡&#x27;, &#x27;B&#x27;), this.SelectView(Icons.cast_connected, &#x27;æ‰«ä¸€æ‰«ç &#x27;, &#x27;C&#x27;), ], onSelected: (String action) &#123; // ç‚¹å‡»é€‰é¡¹çš„æ—¶å€™ switch (action) &#123; case &#x27;A&#x27;: break; case &#x27;B&#x27;: break; case &#x27;C&#x27;: break; &#125; &#125;, ), ],), å‚è€ƒ Flutter AppBarï¼ˆé¡¶ç«¯æ ï¼‰ https://api.flutter.dev/flutter/material/AppBar-class.html","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"material","slug":"Flutter/UI/æ ‡å‡†åº“/material","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/material/"}]},{"title":"Flutterä½“ç³»","date":"2022-03-08T02:25:29.658Z","path":"wiki/Flutter/Flutterä½“ç³»/","text":"æ¦‚è¿° Flutteræ¶æ„æœ€æ ¸å¿ƒçš„ä¾¿æ˜¯Frameworkï¼ˆæ¡†æ¶ï¼‰å’ŒEngineï¼ˆå¼•æ“ï¼‰ï¼š Flutter Frameworkå±‚ï¼šç”¨Dartç¼–å†™ï¼Œå°è£…æ•´ä¸ªFlutteræ¶æ„çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬Widgetã€åŠ¨ç”»ã€ç»˜åˆ¶ã€æ‰‹åŠ¿ç­‰åŠŸèƒ½ï¼Œæœ‰Materialï¼ˆAndroidé£æ ¼UIï¼‰å’ŒCupertinoï¼ˆiOSé£æ ¼ï¼‰çš„UIç•Œé¢ï¼Œ å¯æ„å»ºWidgetæ§ä»¶ä»¥åŠå®ç°UIå¸ƒå±€ã€‚ Flutter Engineå±‚ï¼šç”¨C++ç¼–å†™ï¼Œç”¨äºé«˜è´¨é‡ç§»åŠ¨åº”ç”¨çš„è½»é‡çº§è¿è¡Œæ—¶ç¯å¢ƒï¼Œå®ç°äº†Flutterçš„æ ¸å¿ƒåº“ï¼ŒåŒ…æ‹¬Dartè™šæ‹Ÿæœºã€åŠ¨ç”»å’Œå›¾å½¢ã€æ–‡å­—æ¸²æŸ“ã€é€šä¿¡é€šé“ã€äº‹ä»¶é€šçŸ¥ã€æ’ä»¶æ¶æ„ç­‰ã€‚å¼•æ“æ¸²æŸ“é‡‡ç”¨çš„æ˜¯2Då›¾å½¢æ¸²æŸ“åº“Skiaï¼Œè™šæ‹Ÿæœºé‡‡ç”¨çš„æ˜¯é¢å‘å¯¹è±¡è¯­è¨€Dart VMï¼Œå¹¶å°†å®ƒä»¬æ‰˜ç®¡åˆ°Flutterçš„åµŒå…¥å±‚ã€‚shellå®ç°äº†å¹³å°ç›¸å…³çš„ä»£ç ï¼Œæ¯”å¦‚è·Ÿå±å¹•é”®ç›˜IMEå’Œç³»ç»Ÿåº”ç”¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„äº¤äº’ã€‚ä¸åŒå¹³å°æœ‰ä¸åŒçš„shellï¼Œæ¯”å¦‚Androidå’ŒiOSçš„shellã€‚ ç¼–è¯‘äº§ç‰© Flutteräº§ç‰©åˆ†ä¸ºDartä¸šåŠ¡ä»£ç å’ŒEngineä»£ç å„è‡ªç”Ÿæˆçš„äº§ç‰©ï¼Œå›¾ä¸­çš„Dart CodeåŒ…å«å¼€å‘è€…ç¼–å†™çš„ä¸šåŠ¡ä»£ç ï¼ŒEngine Codeæ˜¯å¼•æ“ä»£ç ï¼Œå¦‚æœå¹¶æ²¡æœ‰å®šåˆ¶åŒ–å¼•æ“ï¼Œåˆ™æ— éœ€é‡æ–°ç¼–è¯‘å¼•æ“ä»£ç ã€‚ ä¸€ä»½Dartä»£ç ï¼Œå¯ç¼–è¯‘ç”ŸæˆåŒç«¯äº§ç‰©ï¼Œå®ç°è·¨å¹³å°çš„èƒ½åŠ›ã€‚ç»è¿‡ç¼–è¯‘å·¥å…·å¤„ç†åå¯ç”ŸæˆåŒç«¯äº§ç‰©ï¼Œå›¾ä¸­ä¾¿æ˜¯releaseæ¨¡å¼çš„ç¼–è¯‘äº§ç‰©ï¼ŒAndroidäº§ç‰©æ˜¯ç”±vmã€isolateå„è‡ªçš„æŒ‡ä»¤æ®µå’Œæ•°æ®æ®µä»¥åŠflutter.jarç»„æˆçš„app.apkï¼ŒiOSäº§ç‰©æ˜¯ç”±App.frameworkå’ŒFlutter.frameworkç»„æˆçš„Runner.appã€‚ è¿™ä¸ªè¿‡ç¨‹æ¶‰åŠfrontend_serverã€gen_snapshotã€xcrunã€ninjaç¼–è¯‘å·¥å…·ã€‚frontend_serverå‰ç«¯ç¼–è¯‘å™¨ä¼šè¿›è¡Œè¯æ³•åˆ†æã€è¯­æ³•åˆ†æä»¥åŠç›¸å…³å…¨å±€è½¬æ¢ç­‰å·¥ä½œï¼Œå°†dartä»£ç è½¬æ¢ä¸ºAST(æŠ½è±¡è¯­æ³•æ ‘)ï¼Œå¹¶ç”Ÿæˆapp.dillæ ¼å¼çš„dart kernelã€‚gen_snapshotç»è¿‡CHAã€å†…è”ç­‰ä¸€ç³»åˆ—æ‰§è¡Œæµçš„ä¼˜åŒ–ï¼Œæ ¹æ®ä¸­é—´ä»£ç ç”Ÿæˆä¼˜åŒ–åçš„FlowGraphå¯¹è±¡ï¼Œå†è½¬æ¢ä¸ºå…·ä½“ç›¸åº”ç³»ç»Ÿæ¶æ„ï¼ˆarm&#x2F;arm64ç­‰ï¼‰çš„äºŒè¿›åˆ¶æŒ‡ä»¤ã€‚ å¯åŠ¨å¼•æ“ FlutterApplication.javaçš„onCreateè¿‡ç¨‹ä¸»è¦å®Œæˆåˆå§‹åŒ–é…ç½®ã€åŠ è½½å¼•æ“libflutter.soã€æ³¨å†ŒJNIæ–¹æ³•ï¼› FlutterActivity.javaçš„onCreateè¿‡ç¨‹ï¼Œé€šè¿‡FlutterJNIçš„AttachJNI()æ–¹æ³•æ¥åˆå§‹åŒ–å¼•æ“Engineã€Dartè™šæ‹Ÿæœºã€Isolateã€taskRunnerç­‰å¯¹è±¡ã€‚å†ç»è¿‡å±‚å±‚å¤„ç†æœ€ç»ˆè°ƒç”¨main.dartä¸­main()æ–¹æ³•ï¼Œæ‰§è¡ŒrunApp(Widget app)æ¥å¤„ç†æ•´ä¸ªDartä¸šåŠ¡ä»£ç ã€‚ Flutterå¼•æ“å¯åŠ¨ä¸­ä¼šåˆ›å»ºæœ‰4ä¸ªTaskRunnerä»¥åŠåˆ›å»ºè™šæ‹Ÿæœºï¼Œåˆ†åˆ«æ¥çœ‹çœ‹å®ƒä»¬çš„å·¥ä½œåŸç†ã€‚ TaskRunnerå·¥ä½œåŸç† Flutterå¼•æ“å¯åŠ¨è¿‡ç¨‹ï¼Œä¼šåˆ›å»ºUI&#x2F;GPU&#x2F;IOè¿™3ä¸ªçº¿ç¨‹ï¼Œä¼šä¸ºè¿™äº›çº¿ç¨‹ä¾æ¬¡åˆ›å»ºMessageLoopå¯¹è±¡ï¼Œå¯åŠ¨åå¤„äºepoll_waitç­‰å¾…çŠ¶æ€ã€‚å¯¹äºFlutterçš„æ¶ˆæ¯æœºåˆ¶è·ŸAndroidåŸç”Ÿçš„æ¶ˆæ¯æœºåˆ¶æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œéƒ½æœ‰æ¶ˆæ¯(æˆ–è€…ä»»åŠ¡)ã€æ¶ˆæ¯é˜Ÿåˆ—(æˆ–ä»»åŠ¡é˜Ÿåˆ—)ä»¥åŠLooperï¼›æœ‰ä¸€ç‚¹ä¸åŒçš„æ˜¯Androidæœ‰ä¸€ä¸ªHandlerç±»ï¼Œç”¨äºå‘é€æ¶ˆæ¯ä»¥åŠæ‰§è¡Œå›è°ƒæ–¹æ³•ï¼Œç›¸å¯¹åº”Flutterä¸­æœ‰ç€ç›¸è¿‘åŠŸèƒ½çš„ä¾¿æ˜¯TaskRunnerã€‚ ä¸Šå›¾æ˜¯ä»æºç ä¸­æç‚¼è€Œæ¥çš„ä»»åŠ¡å¤„ç†æµç¨‹ï¼Œæ¯”å®˜æ–¹æµç¨‹å›¾æ›´å®¹æ˜“ç†è§£ä¸€äº›å¤æ‚æµç¨‹çš„æ—¶åºé—®é¢˜ï¼Œåç»­ä¼šä¸“é—¨è®²è§£ä¸ªä¸­åŸç”±ã€‚Flutterçš„ä»»åŠ¡é˜Ÿåˆ—å¤„ç†æœºåˆ¶è·ŸAndroidçš„æ¶ˆæ¯é˜Ÿåˆ—å¤„ç†ç›¸é€šï¼Œåªä¸è¿‡Flutteråˆ†ä¸ºTaskå’ŒMicroTaskä¸¤ç§ç±»å‹ï¼Œå¼•æ“å’ŒDartè™šæ‹Ÿæœºçš„äº‹ä»¶ä»¥åŠFutureéƒ½å±äºTaskï¼ŒDartå±‚æ‰§è¡ŒscheduleMicrotask()æ‰€äº§ç”Ÿçš„å±äºMicrotaskã€‚ æ¯æ¬¡Flutterå¼•æ“åœ¨æ¶ˆè´¹ä»»åŠ¡æ—¶è°ƒç”¨FlushTasks()æ–¹æ³•ï¼Œéå†æ•´ä¸ªå»¶è¿Ÿä»»åŠ¡é˜Ÿåˆ—delayed_tasks_ï¼Œå°†å·²åˆ°æœŸçš„ä»»åŠ¡åŠ å…¥taské˜Ÿåˆ—ï¼Œç„¶åå¼€å§‹å¤„ç†ä»»åŠ¡ã€‚ æ£€æŸ¥taskï¼Œå½“taské˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œå…ˆæ‰§è¡Œä¸€ä¸ªtaskï¼› æ£€æŸ¥microTaskï¼Œå½“microTaskä¸ä¸ºç©ºï¼Œåˆ™æ‰§è¡ŒmicroTaskï¼›ä¸æ–­å¾ªç¯Step 2 ç›´åˆ°microTaské˜Ÿåˆ—ä¸ºç©ºï¼Œå†å›åˆ°æ‰§è¡ŒStep 1ï¼› å¯ç®€å•ç†è§£ä¸ºå…ˆå¤„ç†å®Œæ‰€æœ‰çš„Microtaskï¼Œç„¶åå†å¤„ç†Taskã€‚å› ä¸ºscheduleMicrotask()æ–¹æ³•çš„è°ƒç”¨è‡ªèº«å°±å¤„äºä¸€ä¸ªTaskï¼Œæ‰§è¡Œå®Œå½“å‰çš„taskï¼Œä¹Ÿå°±æ„å‘³ç€é©¬ä¸Šæ‰§è¡Œè¯¥Microtaskã€‚ äº†è§£äº†å…¶å·¥ä½œæœºåˆ¶ï¼Œå†æ¥çœ‹çœ‹è¿™4ä¸ªTask Runnerçš„å…·ä½“å·¥ä½œå†…å®¹ã€‚ Platform Task Runnerï¼šè¿è¡Œåœ¨Androidæˆ–è€…iOSçš„ä¸»çº¿ç¨‹ï¼Œå°½ç®¡é˜»å¡è¯¥çº¿ç¨‹å¹¶ä¸ä¼šå½±å“Flutteræ¸²æŸ“ç®¡é“ï¼Œå¹³å°çº¿ç¨‹å»ºè®®ä¸è¦æ‰§è¡Œè€—æ—¶æ“ä½œï¼›å¦åˆ™å¯èƒ½è§¦å‘watchdogæ¥ç»“æŸè¯¥åº”ç”¨ã€‚æ¯”å¦‚Androidã€iOSéƒ½æ˜¯ä½¿ç”¨å¹³å°çº¿ç¨‹æ¥ä¼ é€’ç”¨æˆ·è¾“å…¥äº‹ä»¶ï¼Œä¸€æ—¦å¹³å°çº¿ç¨‹è¢«é˜»å¡åˆ™ä¼šå¼•èµ·æ‰‹åŠ¿äº‹ä»¶ä¸¢å¤±ã€‚ UI Task Runner: è¿è¡Œåœ¨uiçº¿ç¨‹ï¼Œæ¯”å¦‚1.uiï¼Œç”¨äºå¼•æ“æ‰§è¡Œroot isolateä¸­çš„æ‰€æœ‰Dartä»£ç ï¼Œæ‰§è¡Œæ¸²æŸ“ä¸å¤„ç†Vsyncä¿¡å·ï¼Œå°†widgetè½¬æ¢ç”ŸæˆLayer Treeã€‚é™¤äº†æ¸²æŸ“ä¹‹å¤–ï¼Œè¿˜æœ‰å¤„ç†Native Pluginsæ¶ˆæ¯ã€Timersã€Microtasksç­‰å·¥ä½œï¼› GPU Task Runnerï¼šè¿è¡Œåœ¨gpuçº¿ç¨‹ï¼Œæ¯”å¦‚1.gpuï¼Œç”¨äºå°†Layer Treeè½¬æ¢ä¸ºå…·ä½“GPUæŒ‡ä»¤ï¼Œæ‰§è¡Œè®¾å¤‡GPUç›¸å…³çš„skiaè°ƒç”¨ï¼Œè½¬æ¢ç›¸åº”å¹³å°çš„ç»˜åˆ¶æ–¹å¼ï¼Œæ¯”å¦‚OpenGL, vulkan, metalç­‰ã€‚æ¯ä¸€å¸§çš„ç»˜åˆ¶éœ€è¦UI Runnerå’ŒGPU Runneré…åˆå®Œæˆï¼Œä»»ä½•ä¸€ä¸ªç¯èŠ‚å»¶è¿Ÿéƒ½å¯èƒ½å¯¼è‡´æ‰å¸§ï¼› IO Task Runnerï¼šè¿è¡Œåœ¨ioçº¿ç¨‹ï¼Œæ¯”å¦‚1.ioï¼Œå‰3ä¸ªTask Runneréƒ½ä¸å…è®¸æ‰§è¡Œè€—æ—¶æ“ä½œï¼Œè¯¥Runnerç”¨äºå°†å›¾ç‰‡ä»ç£ç›˜è¯»å–å‡ºæ¥ï¼Œè§£å‹è½¬æ¢ä¸ºGPUå¯è¯†åˆ«çš„æ ¼å¼åï¼Œå†ä¸Šä¼ ç»™GPUçº¿ç¨‹ã€‚ä¸ºäº†èƒ½è®¿é—®GPUï¼ŒIO Runnerè·ŸGPU Runnerçš„Contextåœ¨åŒä¸€ä¸ªShareGroupã€‚æ¯”å¦‚ui.imageé€šè¿‡å¼‚æ­¥è°ƒç”¨è®©IO Runneræ¥å¼‚æ­¥åŠ è½½å›¾ç‰‡ï¼Œè¯¥çº¿ç¨‹ä¸èƒ½æ‰§è¡Œå…¶ä»–è€—æ—¶æ“ä½œï¼Œå¦åˆ™å¯èƒ½ä¼šå½±å“å›¾ç‰‡åŠ è½½çš„æ€§èƒ½ã€‚ è™šæ‹Ÿæœºå·¥ä½œFlutterå¼•æ“å¯åŠ¨ä¼šåˆ›å»ºDartè™šæ‹Ÿæœºä»¥åŠRoot Isolateã€‚DartVMè‡ªèº«ä¹Ÿæ‹¥æœ‰è‡ªå·±çš„Isolateï¼Œå®Œå…¨ç”±è™šæ‹Ÿæœºè‡ªå·±ç®¡ç†çš„ï¼ŒFlutterå¼•æ“ä¹Ÿæ— æ³•ç›´æ¥è®¿é—®ã€‚Dartçš„UIç›¸å…³æ“ä½œï¼Œæ˜¯ç”±Root Isolateé€šè¿‡Dartçš„C++è°ƒç”¨ï¼Œæˆ–è€…æ˜¯å‘é€æ¶ˆæ¯é€šçŸ¥çš„æ–¹å¼ï¼Œå°†UIæ¸²æŸ“ç›¸å…³çš„ä»»åŠ¡æäº¤åˆ°UIRunneræ‰§è¡Œï¼Œè¿™æ ·å°±å¯ä»¥è·ŸFlutterå¼•æ“ç›¸å…³æ¨¡å—è¿›è¡Œäº¤äº’ã€‚ ä½•ä¸ºIsolateï¼Œä»å­—é¢ä¸Šç†è§£æ˜¯â€œéš”ç¦»â€ï¼Œisolateä¹‹é—´æ˜¯é€»è¾‘éš”ç¦»çš„ã€‚Isolateä¸­çš„ä»£ç ä¹Ÿæ˜¯æŒ‰é¡ºåºæ‰§è¡Œï¼Œå› ä¸ºDartæ²¡æœ‰å…±äº«å†…å­˜çš„å¹¶å‘ï¼Œæ²¡æœ‰ç«äº‰çš„å¯èƒ½æ€§ï¼Œæ•…ä¸éœ€è¦åŠ é”ï¼Œä¹Ÿæ²¡æœ‰æ­»é”é£é™©ã€‚å¯¹äºDartç¨‹åºçš„å¹¶å‘åˆ™éœ€è¦ä¾èµ–å¤šä¸ªisolateæ¥å®ç°ã€‚ isolateæ˜¯Dartå¯¹actorå¹¶å‘æ¨¡å¼çš„å®ç°ã€‚è¿è¡Œä¸­çš„Dartç¨‹åºç”±ä¸€ä¸ªæˆ–å¤šä¸ªactorç»„æˆï¼Œè¿™äº›actorä¹Ÿå°±æ˜¯Dartæ¦‚å¿µé‡Œé¢çš„isolateã€‚isolateæ˜¯æœ‰è‡ªå·±çš„å†…å­˜å’Œå•çº¿ç¨‹æ§åˆ¶çš„è¿è¡Œå®ä½“ã€‚isolateæœ¬èº«çš„æ„æ€æ˜¯â€œéš”ç¦»â€ï¼Œå› ä¸ºisolateä¹‹é—´çš„å†…å­˜åœ¨é€»è¾‘ä¸Šæ˜¯éš”ç¦»çš„ã€‚isolateä¸­çš„ä»£ç æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œä»»ä½•Dartç¨‹åºçš„å¹¶å‘éƒ½æ˜¯è¿è¡Œå¤šä¸ªisolateçš„ç»“æœã€‚ ç”±äºisolateä¹‹é—´æ²¡æœ‰å…±äº«å†…å­˜ï¼Œæ‰€ä»¥ä»–ä»¬ä¹‹é—´çš„é€šä¿¡å”¯ä¸€æ–¹å¼åªèƒ½æ˜¯é€šè¿‡Portè¿›è¡Œï¼Œè€Œä¸”Dartä¸­çš„æ¶ˆæ¯ä¼ é€’æ€»æ˜¯å¼‚æ­¥çš„ã€‚ isolateå †æ˜¯è¿è¯¥isolateä¸­ä»£ç åˆ†é…çš„æ‰€æœ‰å¯¹è±¡çš„GCç®¡ç†çš„å†…å­˜å­˜å‚¨ï¼› vm isolateæ˜¯ä¸€ä¸ªä¼ªisolateï¼Œé‡Œé¢åŒ…å«ä¸å¯å˜å¯¹è±¡ï¼Œæ¯”å¦‚nullï¼Œtrueï¼Œfalseï¼› isolateå †èƒ½å¼•ç”¨vm isolateå †ä¸­çš„å¯¹è±¡ï¼Œä½†vm isolateä¸èƒ½å¼•ç”¨isolateå †ï¼› isolateå½¼æ­¤ä¹‹é—´ä¸èƒ½ç›¸äº’å¼•ç”¨ï¼› æ¯ä¸ªisolateéƒ½æœ‰ä¸€ä¸ªæ‰§è¡Œdartä»£ç çš„Mutator threadï¼Œä¸€ä¸ªå¤„ç†è™šæ‹Ÿæœºå†…éƒ¨ä»»åŠ¡(æ¯”å¦‚GC, JITç­‰)çš„helper threadï¼› å¯è§ï¼Œisolateæ˜¯æ‹¥æœ‰å†…å­˜å †å’Œæ§åˆ¶çº¿ç¨‹ï¼Œè™šæ‹Ÿæœºä¸­å¯ä»¥æœ‰å¾ˆå¤šisolateï¼Œä½†å½¼æ­¤ä¹‹é—´å†…å­˜ä¸å…±äº«ï¼Œæ— æ³•ç›´æ¥è®¿é—®ï¼Œåªèƒ½é€šè¿‡dartç‰¹æœ‰çš„Portç«¯å£é€šä¿¡ï¼›isolateé™¤äº†æ‹¥æœ‰ä¸€ä¸ªmutatoræ§åˆ¶çº¿ç¨‹ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–è¾…åŠ©çº¿ç¨‹ï¼Œæ¯”å¦‚åå°JITç¼–è¯‘çº¿ç¨‹ã€GCæ¸…ç†&#x2F;å¹¶å‘æ ‡è®°çº¿ç¨‹ï¼› æ¶æ„æ¦‚è§ˆ Widgetæ˜¯æ‰€æœ‰Flutteråº”ç”¨ç¨‹åºçš„åŸºçŸ³ï¼ŒWidgetå¯ä»¥æ˜¯ä¸€ä¸ªæŒ‰é’®ï¼Œä¸€ç§å­—ä½“æˆ–è€…é¢œè‰²ï¼Œä¸€ä¸ªå¸ƒå±€å±æ€§ç­‰ï¼Œåœ¨Flutterçš„UIä¸–ç•Œå¯è°“æ˜¯â€œä¸‡ç‰©çš†Widgetâ€ã€‚å¸¸è§çš„Widgetå­ç±»ä¸ºStatelessWidget(æ— çŠ¶æ€)å’ŒStatefulWidget(æœ‰çŠ¶æ€)ï¼› StatelessWidgetï¼šå†…éƒ¨æ²¡æœ‰ä¿å­˜çŠ¶æ€ï¼ŒUIç•Œé¢åˆ›å»ºåä¸ä¼šå‘ç”Ÿæ”¹å˜ï¼› StatefulWidgetï¼šå†…éƒ¨æœ‰ä¿å­˜çŠ¶æ€ï¼Œå½“çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œè°ƒç”¨setState()æ–¹æ³•ä¼šè§¦å‘StatefulWidgetçš„UIå‘ç”Ÿæ›´æ–°ï¼Œå¯¹äºè‡ªå®šä¹‰ç»§æ‰¿è‡ªStatefulWidgetçš„å­ç±»ï¼Œå¿…é¡»è¦é‡å†™createState()æ–¹æ³•ã€‚ ä¸‰æ£µæ ‘ Widgetæ˜¯ä¸ºElementæè¿°éœ€è¦çš„é…ç½®ï¼Œ è´Ÿè´£åˆ›å»ºElementï¼Œå†³å®šElementæ˜¯å¦éœ€è¦æ›´æ–°ã€‚Flutter Frameworké€šè¿‡å·®åˆ†ç®—æ³•æ¯”å¯¹Widgetæ ‘å‰åçš„å˜åŒ–ï¼Œå†³å®šElementçš„Stateæ˜¯å¦æ”¹å˜ã€‚å½“é‡å»ºWidgetæ ‘åå¹¶æœªå‘ç”Ÿæ”¹å˜ï¼Œ åˆ™Elementä¸ä¼šè§¦å‘é‡ç»˜ï¼Œå¦åˆ™å°±æ˜¯Widgetæ ‘çš„é‡å»ºå¹¶ä¸ä¸€å®šä¼šè§¦å‘Elementæ ‘çš„é‡å»ºã€‚ Elementè¡¨ç¤ºWidgeté…ç½®æ ‘çš„ç‰¹å®šä½ç½®çš„ä¸€ä¸ªå®ä¾‹ï¼ŒåŒæ—¶æŒæœ‰Widgetå’ŒRenderObjectï¼Œè´Ÿè´£ç®¡ç†Widgeté…ç½®å’ŒRenderObjectæ¸²æŸ“ã€‚ElementçŠ¶æ€ç”±Flutter Frameworkç®¡ç†ï¼Œ å¼€å‘äººå‘˜åªéœ€æ›´æ”¹Widgetå³å¯ã€‚ RenderObjectè¡¨ç¤ºæ¸²æŸ“æ ‘çš„ä¸€ä¸ªå¯¹è±¡ï¼Œè´Ÿè´£çœŸæ­£çš„æ¸²æŸ“å·¥ä½œï¼Œæ¯”å¦‚æµ‹é‡å¤§å°ã€ä½ç½®ã€ç»˜åˆ¶ç­‰éƒ½ç”±RenderObjectå®Œæˆã€‚ æ¸²æŸ“åŸç† æ¸²æŸ“è¿‡ç¨‹ï¼ŒUIçº¿ç¨‹å®Œæˆå¸ƒå±€ã€ç»˜åˆ¶æ“ä½œï¼Œç”ŸæˆLayer Treeï¼›GPUçº¿ç¨‹æ‰§è¡Œåˆæˆå¹¶å…‰æ …åŒ–åäº¤ç»™GPUæ¥å¤„ç†ï¼Œå…¶ä¸­å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š Animate: éå†_transientCallbacksï¼Œæ‰§è¡ŒåŠ¨ç”»å›è°ƒæ–¹æ³•ï¼› Build: å¯¹äºdirtyçš„å…ƒç´ ä¼šæ‰§è¡Œbuildæ„é€ ï¼Œæ²¡æœ‰dirtyå…ƒç´ åˆ™ä¸ä¼šæ‰§è¡Œï¼Œå¯¹åº”äºbuildScope() Layout: è®¡ç®—æ¸²æŸ“å¯¹è±¡çš„å¤§å°å’Œä½ç½®ï¼Œå¯¹åº”äºflushLayout()ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šåµŒå¥—å†è°ƒç”¨buildæ“ä½œï¼› Compositing bits: æ›´æ–°å…·æœ‰è„åˆæˆä½çš„ä»»ä½•æ¸²æŸ“å¯¹è±¡ï¼Œ å¯¹åº”äºflushCompositingBits()ï¼› Paint: å°†ç»˜åˆ¶å‘½ä»¤è®°å½•åˆ°Layerï¼Œ å¯¹åº”äºflushPaint()ï¼› Compositing: å°†Compositing bitså‘é€ç»™GPUï¼Œ å¯¹åº”äºcompositeFrame()ï¼› GPUçº¿ç¨‹é€šè¿‡skiaå‘GPUç¡¬ä»¶ç»˜åˆ¶ä¸€å¸§çš„æ•°æ®ï¼ŒGPUå°†å¸§ä¿¡æ¯ä¿å­˜åˆ°FrameBufferé‡Œé¢ï¼Œç„¶åè§†é¢‘æ§åˆ¶å™¨ä¼šæ ¹æ®VSyncä¿¡å·ä»FrameBufferå–å¸§æ•°æ®ä¼ é€’ç»™æ˜¾ç¤ºå™¨ï¼Œä»è€Œæ˜¾ç¤ºå‡ºæœ€ç»ˆçš„ç”»é¢ã€‚ Platform Channels Flutteræ¡†æ¶æä¾›äº†UIçš„æ§ä»¶æ”¯æŒï¼Œå¯¹äºAPPé™¤äº†UIè¿˜æœ‰å…¶ä»–ä¾èµ–äºNativeå¹³å°çš„æ”¯æŒï¼Œæ¯”å¦‚è°ƒç”¨Cameraçš„åŠŸèƒ½ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿä¸ºæ­¤ï¼ŒFlutteré€šè¿‡æä¾›Platform Channelçš„åŠŸèƒ½ï¼Œä½¿å¾—Dartä»£ç å…·å¤‡ä¸Nativeäº¤äº’çš„èƒ½åŠ›ã€‚ Platform Channelç”¨äºFlutterä¸Nativeä¹‹é—´çš„æ¶ˆæ¯ä¼ é€’ï¼Œæ•´ä¸ªè¿‡ç¨‹çš„æ¶ˆæ¯ä¸å“åº”æ˜¯å¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ç”¨æˆ·ç•Œé¢ã€‚Flutterå¼•æ“æ¡†æ¶å·²å®Œæˆæ¡¥æ¥çš„é€šé“ï¼Œè¿™æ ·å¼€å‘è€…åªéœ€åœ¨Nativeå±‚ç¼–å†™å®šåˆ¶çš„Android&#x2F;iOSä»£ç ï¼Œå³å¯åœ¨Dartä»£ç ä¸­ç›´æ¥è°ƒç”¨ï¼Œè¿™ä¹Ÿå°±æ˜¯Flutter Pluginæ’ä»¶çš„ä¸€ç§å½¢å¼ã€‚ Engineç¯å¢ƒæ­å»º å®˜æ–¹æ–‡æ¡£ https://github.com/flutter/flutter/wiki/Compiling-the-engine https://github.com/flutter/flutter/wiki/The-flutter-tool æºç ç›®å½•ç»“æ„ flutter æ ¹ç›®å½• packagesï¼š flutterï¼š libï¼š srcï¼šæ ‡å‡†åº“çš„æºç æ–‡ä»¶å¤¹ animationï¼šåŠ¨ç”»åº“ cupertinoï¼šiOSé£æ ¼UIåº“ foundationï¼šåŸºç¡€ gesturesï¼šæ‰‹åŠ¿è¯†åˆ« materialï¼šAndroidé£æ ¼UIåº“ paintingï¼šè‡ªç»˜ physicsï¼šç§»åŠ¨çš„ç‰©ç†æ•ˆæœï¼ŒAndroidã€iOSä¸ä¸€æ · renderingï¼šæ¸²æŸ“ç›¸å…³ schedulerï¼šè°ƒåº¦ç›¸å…³ï¼Œåº•å±‚ä¼ å…¥æ•°æ®ç»™åˆ°Flutterè¿›è¡Œæ“ä½œ semanticsï¼šè¯­ä¹‰åŒ–çš„ä¸œè¥¿ï¼Ÿ services widgetsï¼šUIåº“ flutter_driver: flutter_goldens: flutter_goldens_client: flutter_localizations:å›½é™…åŒ–ç›¸å…³ flutter_test: flutter_tools: flutter_web_plugins: fuchsia_remote_debug_protocol: integration_test: bin: internal cache: artifacts: engine: android-arm: android-arm64: android-arm64-profile: android-arm64-release: android-arm-profile: android-arm-release: android-x64: android-x64-profile: android-x86: android-x86-jit-release: common: windows-x64: gradle_wrapper: ios-deploy: libimobiledevice: libplist: material_fonts: openssl: usbmuxd: dart-sdk: downloads: flutter_web_sdk: pkg: sky_engine: mingit: cmd etc mingw64 usr dartï¼šdartå‘½ä»¤ dart.bat flutter:linuxç›¸å…³å¹³å°çš„å‘½ä»¤ flutter.batï¼šwindowsä¸Šçš„å‘½ä»¤ dev:Flutterå›¢é˜Ÿå¼€å‘æ¡†æ¶æ—¶ç”¨åˆ°çš„å·¥å…· automated_tests: benchmarks: bots: ci: conductor: customer_testing: devicelab: docs: forbidden_from_release_tests: integration_tests: manual_tests: missing_dependency_tests: snippets: tools: tracing_tests: examples å‚è€ƒ Introduction to Dart VM Flutter è·¨å¹³å°æ¼”è¿›åŠæ¶æ„å¼€ç¯‡ Flutter System Architecture","tags":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"}],"categories":[{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"}]},{"title":"Androidé€†å‘è®°å½•","date":"2022-03-08T02:25:29.655Z","path":"wiki/Android/é€†å‘/Androidé€†å‘è®°å½•/","text":"12345678910111213#åç¼–è¯‘apkæ–‡ä»¶apktool d app-release.apkå¦‚æœå‡ºç°ç¼–è¯‘assetsæ–‡ä»¶å¤¹ä¸­çš„dexæ–‡ä»¶å¤±è´¥ï¼Œåˆ™ä½¿ç”¨--only-main-classeså‚æ•°ã€‚#ç¼–è¯‘ä¿®æ”¹åçš„åº”ç”¨apktool b app-release -o output.apk#å¯¹ç¼–è¯‘å¥½çš„apkè¿›è¡Œç­¾åapksigner sign --ks keystoreæ–‡ä»¶è·¯å¾„ output.apk~/Android/sdk/build-tools/29.0.3/apksigner sign --ks ~/Android/tools/keys/test_keystore lizhi_output.apk ç­¾åå‚è€ƒï¼šhttps://developer.android.com/studio/command-line/apksigner?hl=zh-cn META-INFæ–‡ä»¶å¤¹çš„å†…å®¹ MINFEST.MFï¼šå£°æ˜äº†èµ„æºï¼Œä¸CERT.SFæ–‡ä»¶ç›¸ä¼¼ã€‚CERT.RSAï¼šå…¬é’¥è¯ä¹¦ã€‚keytool -printcert -file CERT.RSA è¾“å‡ºè¯ä¹¦å†…å®¹ 1234567891011æ‰€æœ‰è€…: CN=Bbcallen, OU=danmaku.tv, O=danmaku.tv, L=Zhuhai, ST=Guangdong, C=CNå‘å¸ƒè€…: CN=Bbcallen, OU=danmaku.tv, O=danmaku.tv, L=Zhuhai, ST=Guangdong, C=CNåºåˆ—å·: 4f3bb0ecæœ‰æ•ˆæœŸä¸º Wed Feb 15 21:19:40 CST 2012 è‡³ Thu Nov 18 21:19:40 CST 2066è¯ä¹¦æŒ‡çº¹: MD5: 71:94:D5:31:CB:E7:96:0A:22:00:7B:9F:6B:DA:A3:8B SHA1: 96:DC:60:5B:95:19:BA:B9:4E:DD:BE:AA:A0:59:A6:69:FB:A2:C2:11 SHA256: 93:BA:27:0F:55:21:13:9E:CA:FE:4B:B6:38:AC:5B:11:98:BC:54:8F:62:D9:FD:8F:85:80:A0:79:FA:F5:91:0Eç­¾åç®—æ³•åç§°: SHA1withRSAä¸»ä½“å…¬å…±å¯†é’¥ç®—æ³•: 1024 ä½ RSA å¯†é’¥ç‰ˆæœ¬: 3 CERT.SFï¼šåŒ…å«äº†appçš„æ‰€æœ‰èµ„æºæ–‡ä»¶ï¼Œè´Ÿè´£å¯¹appè¿›è¡Œç­¾åï¼Œ Android StudioåŠ¨æ€è°ƒè¯•12345678910111213141516171819202122232425262728åç¼–è¯‘apkæ–‡ä»¶ï¼Œæ·»åŠ debugå±æ€§ï¼Œæ‰“åŒ…ã€ç­¾åæ–°çš„å¯debugçš„apkã€‚å®‰è£…ã€‚å®‰è£…Android Studioæ’ä»¶smalideahttps://bitbucket.org/JesusFreke/smali/downloads/ä½¿ç”¨baksmaliåç¼–è¯‘apkæ–‡ä»¶java -jar baksmali -o myapp/srcå…ˆå¯åŠ¨åº”ç”¨ï¼ŒæŸ¥çœ‹ä¸»activityadb shell &quot;dumpsys activity top | grep ACTIVITY&quot;ç„¶åä»¥debugæ¨¡å¼å¯åŠ¨appadb shell am start -D -n androiddemo.han.com.myapplication/.MainActivityæŸ¥çœ‹è¿›ç¨‹adb shell &quot;ps | grep åŒ…å&quot;ç«¯å£è½¬å‘adb forward tcp:8787 jdwp:app_pidadb shell am set-debug-app -w --persistent åŒ…å ä¸€ç›´ä½¿ç”¨debugæ¨¡å¼å¯åŠ¨åº”ç”¨adb shell am clear-debug-app å–æ¶ˆä½¿ç”¨debugå¯åŠ¨åº”ç”¨","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"é€†å‘","slug":"Android/é€†å‘","permalink":"http://airshu.github.io/categories/Android/%E9%80%86%E5%90%91/"}]},{"title":"JEBä½¿ç”¨ç¬”è®°","date":"2022-03-08T02:25:29.655Z","path":"wiki/Android/é€†å‘/JEBä½¿ç”¨ç¬”è®°/","text":"https://www.pnfsoftware.com/jeb/manual/ åœ¨ä½¿ç”¨Jebçš„æ—¶å€™ï¼Œå…³é—­Android Studioã€‚ å¦‚ä½•debug å¯¹äºä¸€ä¸ªreleaseåŒ…ï¼Œæ˜¯æ— æ³•è¿›è¡Œdebugçš„ï¼Œéœ€è¦apktoolè¿›è¡Œåç¼–è¯‘ï¼Œè‡ªè¡Œæ‰“åŒ…å¹¶ç­¾åã€‚ command+bï¼šæ‰“å¼€å…³é—­æ–­ç‚¹","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"é€†å‘","slug":"Android/é€†å‘","permalink":"http://airshu.github.io/categories/Android/%E9%80%86%E5%90%91/"}]},{"title":"å¦‚ä½•æå‡Androidåº”ç”¨çš„å®‰å…¨","date":"2022-03-08T02:25:29.655Z","path":"wiki/Android/é€†å‘/å¦‚ä½•æå‡Androidåº”ç”¨çš„å®‰å…¨/","text":"æƒé™è®¾ç½® å°½é‡ä½¿ç”¨æ›´å°‘çš„æƒé™ï¼ŒåŠ¨æ€è·å–æƒé™ã€‚ releaseç‰ˆæœ¬ä¸­è®¾ç½®æ—¥å¿—è¾“å‡ºç­‰çº§ å±é™©ä»£ç æ£€æµ‹ç¡®è®¤ä»£ç ä¸­æ˜¯å¦ä½¿ç”¨æ’ä»¶åŒ–æŠ€æœ¯ï¼ŒhookæŠ€æœ¯ æºæ–‡ä»¶å®‰å…¨ Javaä»£ç æ··æ·† åº•å±‚ä»£ç åŠ å›º å¯†é’¥ç­‰ä¿¡æ¯æ˜¯å¦å­˜åœ¨æš´éœ²é£é™© å¯åŠ¨æ—¶è¿›è¡Œç­¾åæ£€æŸ¥ï¼ˆé˜²æ­¢äºŒæ¬¡æ‰“åŒ…ï¼‰ æ•°æ®å­˜å‚¨å®‰å…¨ æ˜¯å¦æ˜æ–‡å­˜å‚¨é…ç½®ä¿¡æ¯ æ•°æ®åº“å­˜å‚¨çš„å®‰å…¨ æ˜¯å¦æš´éœ²ä¸å¿…è¦çš„ç»„ä»¶ï¼Œæ£€æŸ¥exportedå±æ€§ æ•°æ®ä¼ è¾“å®‰å…¨ æ˜¯å¦å­˜åœ¨ç½‘ç»œæ•°æ®è¢«æ‹¦æˆªçš„é£é™© æ˜¯å¦ä½¿ç”¨Https å‚è€ƒ https://blog.csdn.net/u013107656/category_6257625.html","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"é€†å‘","slug":"Android/é€†å‘","permalink":"http://airshu.github.io/categories/Android/%E9%80%86%E5%90%91/"}]},{"title":"Androidé€†å‘ä¹‹Xposed","date":"2022-03-08T02:25:29.654Z","path":"wiki/Android/é€†å‘/Androidé€†å‘ä¹‹Xposed/","text":"Xposedçš„ä½œç”¨éå¸¸å¼ºå¤§ï¼Œä»¥å‰è™½ç„¶ä¹Ÿå¤§è‡´äº†è§£ï¼Œä½†æ²¡æœ‰è‡ªå·±å®è·µè¿‡ã€‚æœ€è¿‘åœ¨åšå…¶ä»–Appåˆ†æçš„æ—¶å€™ï¼Œå‘ç°å…¶é™åˆ¶äº†æ¨¡æ‹Ÿå™¨çš„ä½¿ç”¨ï¼Œäºæ˜¯æƒ³ç€é€†å‘ç ´è§£ä¸€ä¸‹ï¼Œäºæ˜¯å¼€å¯äº†Xposedä¹‹æ—…ã€‚ é¦–å…ˆé˜…è¯»ä¸‹å®˜ç½‘ï¼Œå—¯ï¼Œç‰ˆæœ¬å¾ˆä¹…æ²¡æœ‰æ›´æ–°äº†ï¼Œåé¢åˆå‡ºç°äº†â€å¤ªæâ€ä¹‹ç±»çš„æ–°çš„å·¥å…·ã€‚å°±ä¸æŠ˜è…¾é‚£ä¹ˆå¤šäº†ï¼Œå…ˆä»¥å¿«é€Ÿè§£å†³é—®é¢˜ä¸ºç›®æ ‡ã€‚ä¸‹è½½é›·ç”µæ¨¡æ‹Ÿå™¨ï¼Œå…¶ç‰ˆæœ¬ä¸ºAndroid7.1.2ã€‚è¿›å…¥â€é›·ç”µæ¸¸æˆä¸­å¿ƒâ€æœç´¢xposedï¼Œä¸‹è½½å¯¹åº”çš„Appï¼Œæ‰“å¼€åç‚¹å‡»å®‰è£…ï¼Œé‡å¯ã€‚ Hello Worldä¸‹ä¸€æ­¥å®Œæˆä¸€ä¸ªæœ€ç®€å•çš„Hello Worldï¼Œç½‘ä¸Šæœæœ‰ä¸€å¤§æŠŠã€‚æ€»ç»“ä¸‹ï¼š æ·»åŠ ä¾èµ–ï¼Œç›®å‰æœ€æ–°çš„ç‰ˆæœ¬ä¸º82ï¼š 12compileOnly &#x27;de.robv.android.xposed:api:82&#x27;compileOnly &#x27;de.robv.android.xposed:api:82:sources&#x27; ä¿®æ”¹AndroidManifest.xmlæ–‡ä»¶ï¼Œæ·»åŠ ç›¸åº”æ ‡è¯†ï¼Œç”¨äºXposedè¯†åˆ«ã€‚ 1234567891011&lt;meta-data android:name=&quot;xposedmodule&quot; android:value=&quot;true&quot; /&gt;&lt;meta-data android:name=&quot;xposeddescription&quot; android:value=&quot;è¿™æ˜¯ä¸€ä¸ªXposedä¾‹ç¨‹&quot; /&gt;&lt;meta-data android:name=&quot;xposedminversion&quot; android:value=&quot;53&quot; /&gt; æ–°å»ºassetsæ–‡ä»¶å¤¹ï¼Œæ·»åŠ xposed_initæ–‡ä»¶ï¼Œæ·»åŠ hookå¯åŠ¨å…¥å£ï¼Œæ–‡ä»¶å†…å®¹ä¸ºä½ çš„hookç±»ã€‚ æ·»åŠ hookç±»ï¼Œå®ç°IXposedHookLoadPackageï¼Œå®ç°handleLoadPackageæ–¹æ³•ã€‚ ç†Ÿæ‚‰API https://api.xposed.info/reference/packages.html 12345/**å½“Appè£…è½½çš„æ—¶å€™ä¼šè¢«è°ƒç”¨ï¼Œè¢«è°ƒç”¨çš„éå¸¸æ—©ï¼Œæ¯”Application.onCreateè¿˜æ—©ã€‚*/public abstract void handleLoadPackage (XC_LoadPackage.LoadPackageParam lpparam) xposedå·¥å…·å¼€å‘è€…åŠ©æ‰‹:ä¸‹è½½åœ°å€ï¼šhttps://github.com/WrBug/DeveloperHelper å¯ä»¥ç›´æ¥åœ¨ç•Œé¢ä¸Šçœ‹åˆ°UIçš„åå­—ï¼Œå¯ä»¥æŸ¥çœ‹log Inspeckageï¼šä¸‹è½½åœ°å€ï¼šhttps://repo.xposed.info/module/mobi.acpm.inspeckage åœ¨ç½‘é¡µä¸Šçœ‹ç›¸å…³ä¿¡æ¯ï¼šåŒ…ä¿¡æ¯ï¼ŒShared Preferencesï¼Œä½¿ç”¨äº†Cryptoã€Hashçš„è®°å½•ï¼ŒæŠ“åŒ…ä¿¡æ¯ç­‰ JustTrustMeï¼šhttps://github.com/Fuzion24/JustTrustMe UCrackï¼šhttps://gitee.com/virjar/ucrack ä¸€ä¸ªåŸºäºXposedå†™çš„è¾…åŠ©å·¥å…·ï¼Œé›†æˆäº†è‡ªåŠ¨ç½‘ç»œæŠ“åŒ…ã€ç½‘ç»œå †æ ˆçˆ†ç ´ã€æ–‡ä»¶æ—¥å¿—ã€WebViewè°ƒè¯•ç¯å¢ƒã€è‡ªåŠ¨è„±å£³ã€Nativeå‡½æ•°æ³¨å†Œç›‘æ§ã€è®°å½•ç¨‹åºè‡ªæ€å †æ ˆç­‰åŠŸèƒ½ã€‚ ReflectMasterï¼ˆåå°„å¤§å¸ˆï¼‰ï¼šhttps://github.com/FormatFa/ReflectMaster å¯ä»¥ä»å½“å‰é¡µé¢æå–dexï¼Œå¯¹äºåŠ å£³çš„Appå¾ˆæœ‰ç”¨ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"é€†å‘","slug":"Android/é€†å‘","permalink":"http://airshu.github.io/categories/Android/%E9%80%86%E5%90%91/"}]},{"title":"Androidé€†å‘ä¹‹è„±å£³","date":"2022-03-08T02:25:29.654Z","path":"wiki/Android/é€†å‘/Androidé€†å‘ä¹‹è„±å£³/","text":"æœ‰äº›Appä¸ºäº†å®‰å…¨ï¼Œä¼šä½¿ç”¨ç›¸å…³åŠ å£³å·¥å…·æ¥æé«˜ç ´è§£éš¾åº¦ã€‚ä½†å…¶å®æ„ä¹‰ä¸å¤§ï¼Œé€šè¿‡hookï¼Œåº”è¯¥æ˜¯å¾ˆå®¹æ˜“è·å–å†…å­˜dumpå‡ºdexæ–‡ä»¶çš„ã€‚è¿˜è®°å¾—ä»¥å‰è¿›è¡Œflashæ¸¸æˆç ´è§£çš„æ—¶å€™ï¼Œå½“æ—¶ä½¿ç”¨ä¸€ä¸ªæŠ€å·§ï¼Œé€šè¿‡flashçš„è¿è¡Œæœºåˆ¶ï¼Œåœ¨swfå¯åŠ¨çš„æ—¶å€™å°†è‡ªå·±å†™çš„swfloadè¿›æ¥å¹¶è¿è¡Œï¼Œè¿è¡Œçš„ä»£ç å°±æ˜¯å°†å†…å­˜ä¸­çš„swfå¯¼å‡ºæ¥ã€‚ç ´è§£æˆåŠŸçš„æ¦‚ç‡éå¸¸é«˜ã€‚è€Œä¸ªäººè®¤ä¸ºï¼Œé€šè¿‡ä»£ç æ··æ·†æ¥å¢åŠ é˜…è¯»éš¾åº¦æ¯”åŠ å£³çš„ä½œç”¨æ›´æœ‰ç”¨ã€‚ æœ€è¿‘çœ‹åˆ°æŸæ¬¾ç«Ÿå“ï¼Œäºæ˜¯æƒ³å­¦ä¹ å­¦ä¹ ï¼Œç›´æ¥æ”¾åˆ°Jadxä¸­ï¼Œå—¯å“¼ï¼Œç«Ÿç„¶ä½¿ç”¨äº†è…¾è®¯ä¹å›ºã€‚äº†è§£äº†å¤§è‡´ç ´å£³çš„åŸç†ï¼Œå…¶å®å°±ç®—è‡ªå·±å®ç°ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚ä¸è¿‡è‡ªå·±èƒ½æƒ³åˆ°çš„äº‹æƒ…ï¼Œå¯èƒ½æœ‰äººæ—©å°±æƒ³åˆ°äº†ã€‚æœä¸€æœå§ï¼Œæœç„¶æœ‰å¾ˆå¤šç ´è§£å·¥å…·ã€‚æœ‰äº›æ–‡ç« å¯ä»¥å‚è€ƒå‚è€ƒã€å­¦ä¹ å­¦ä¹ ï¼š https://crifan.github.io/android_app_security_crack&#x2F;website&#x2F; æˆ‘ä»¬çš„ç›®çš„æ˜¯ä¸ºäº†å¿«é€Ÿè·å–dexï¼Œé˜…è¯»æºç ï¼Œæ‰€ä»¥å°±ä¸æŠ˜è…¾æ¯ä¸ªå·¥å…·æ˜¯æ€ä¹ˆå®ç°çš„äº†ã€‚æ‰¾åˆ°æ–‡ç« è¯´çš„å·¥å…·ï¼Œä¸€ä¸ªä¸€ä¸ªè¯•å§ã€‚æœ€ç»ˆå‘ç°ReflectMasterå¯ä»¥dumpå‡ºæ¥dexã€‚ä½¿ç”¨å¦‚ä¸‹ï¼š å®‰è£…ReflectMasterï¼Œä¸‹è½½åœ°å€ï¼šhttps://www.lanzous.com/i6x1kaf åœ¨xposedç¯å¢ƒä¸­ï¼Œå®‰è£…å¹¶æ¿€æ´»ã€‚ å¯åŠ¨å¯¹åº”å¸¦å£³çš„Appï¼Œç‚¹å‡»â€ä¸­é—´çš„å›¾æ ‡â€ï¼Œç‚¹å‡»â€å½“å‰Activityâ€ï¼Œç‚¹å‡»â€å¯¼å‡ºdexâ€ã€‚ ç¡®è®¤ä½¿ç”¨è…¾è®¯ä¹å›ºï¼š å¯¼å‡ºçš„dexå¦‚ä¸‹ï¼š å‚è€ƒ https://github.com/FormatFa/ReflectMaster https://www.kanxue.com/chm.htm?id=9948&pid=node1000000 https://blog.csdn.net/qq_41855420&#x2F;article&#x2F;details&#x2F;106276824 https://www.kanxue.com/chm.htm?id=9948&pid=node1000000","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"é€†å‘","slug":"Android/é€†å‘","permalink":"http://airshu.github.io/categories/Android/%E9%80%86%E5%90%91/"}]},{"title":"ä»£ç æ··æ·†","date":"2022-03-08T02:25:29.653Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/ä»£ç æ··æ·†/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"ä¿æ´»ç­–ç•¥","date":"2022-03-08T02:25:29.653Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/ä¿æ´»ç­–ç•¥/","text":"ä¸€ä¸ªåƒç´ çš„Activity å‰å°service è¿›ç¨‹é—´å”¤é†’ JobSheduler 1559","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"åŠ¨æ€æ¢è‚¤","date":"2022-03-08T02:25:29.653Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/åŠ¨æ€æ¢è‚¤/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"å¤šæ¸ é“æ‰“åŒ…","date":"2022-03-08T02:25:29.653Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/å¤šæ¸ é“æ‰“åŒ…/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"å¦‚ä½•æå‡ç¼–è¯‘é€Ÿåº¦","date":"2022-03-08T02:25:29.653Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/å¦‚ä½•æå‡ç¼–è¯‘é€Ÿåº¦/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"ç¡¬ä»¶åŠ é€Ÿ","date":"2022-03-08T02:25:29.653Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/ç¡¬ä»¶åŠ é€Ÿ/","text":"å‚è€ƒ https://www.mtyun.com/library/hardware-accelerate https://rengwuxian.com/ui-1-8/ ç†è§£Androidç¡¬ä»¶åŠ é€ŸåŸç†çš„å°ç™½æ–‡","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"å±å¹•é€‚é…","date":"2022-03-08T02:25:29.653Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/å±å¹•é€‚é…/","text":"åŸºæœ¬æ¦‚å¿µå±å¹•å°ºå¯¸å±å¹•å°ºå¯¸æŒ‡å±å¹•çš„å¯¹è§’çº¿çš„é•¿åº¦ï¼Œå•ä½æ˜¯è‹±å¯¸ï¼Œ1è‹±å¯¸&#x3D;2.54å˜ç±³ å±å¹•åˆ†è¾¨ç‡å±å¹•åˆ†è¾¨ç‡æ˜¯æŒ‡åœ¨æ¨ªçºµå‘ä¸Šçš„åƒç´ ç‚¹æ•°ï¼Œå•ä½æ˜¯pxï¼Œ1px&#x3D;1ä¸ªåƒç´ ç‚¹ å±å¹•åƒç´ å¯†åº¦å±å¹•åƒç´ å¯†åº¦æ˜¯æŒ‡æ¯è‹±å¯¸ä¸Šçš„åƒç´ ç‚¹æ•° dpã€dipã€dpiã€spã€px dpiï¼šå±å¹•åƒç´ å¯†åº¦ dp&#x2F;dipï¼šDensity Independent Pixelsçš„ç¼©å†™ï¼Œå³å¯†åº¦æ— å…³åƒç´  pxï¼šç‰©ç†åƒç´  spï¼šscale-independent pixelsï¼Œæ–‡å­—å¤§å°ä½¿ç”¨åƒç´  å…¬å¼è½¬æ¢ px &#x3D; density * dp; density &#x3D; dpi &#x2F; 160; px &#x3D; dp * (dpi &#x2F; 160); å±å¹•å°ºå¯¸ã€åˆ†è¾¨ç‡ã€åƒç´ å¯†åº¦ä¸‰è€…å…³ç³» DisplayMetricsä¸­å’Œé€‚é…ç›¸å…³çš„å‡ ä¸ªå˜é‡: DisplayMetrics#densityï¼šå°±æ˜¯ä¸Šè¿°çš„density DisplayMetrics#densityDpiï¼š å°±æ˜¯ä¸Šè¿°çš„dpi DisplayMetrics#scaledDensityï¼š å­—ä½“çš„ç¼©æ”¾å› å­ï¼Œæ­£å¸¸æƒ…å†µä¸‹å’Œdensityç›¸ç­‰ï¼Œä½†æ˜¯è°ƒèŠ‚ç³»ç»Ÿå­—ä½“å¤§å°åä¼šæ”¹å˜è¿™ä¸ªå€¼ mdpiã€hdpiã€xdpiã€xxdpiæ ¹æ®ä¸åŒåƒç´ èŒƒå›´æ¥å­˜å‚¨çš„èµ„æºæ–‡ä»¶å¤¹ åç§° åƒç´ å¯†åº¦èŒƒå›´ ä»£è¡¨çš„åˆ†è¾¨ç‡ å±å¹•å¯†åº¦ æ¢ç®— æ¯”ä¾‹ mdpi 120dpi~160dpi 320x480 160 hdpi 160dpi~240dpi 480x800 240 1dp&#x3D;1px 4 xhdpi 240dpi~320dpi 720x1280 320 1dp&#x3D;2px 8 xxhdpi 320dpi~480dpi 1080x1920 480 1dp&#x3D;3px 12 xxxhdpi 480dpi~640dpi é€‚é…åŸç†ä»Šæ—¥å¤´æ¡é€‚é…æ–¹æ¡ˆ12345678910111213141516171819202122232425262728293031DisplayMetrics appDisplayMetrics = application.getResources().getDisplayMetrics();if (sNoncompatDensity == 0) &#123; sNoncompatDensity = appDisplayMetrics.density; sNoncompatDensity = appDisplayMetrics.scaledDensity; application.registerComponentCallbacks(new ComponentCallbacks() &#123; public void onConfigurationChanged(Configuration newConfig) &#123; if (newConfig != null &amp;&amp; newConfig.fontScale &gt; 0) &#123; //ç³»ç»Ÿå­—ä½“å¤§å°å‘ç”Ÿå˜åŒ–ç›‘å¬ sNoncompatScaledDensity = application.getResources().getDisplayMetrics().scaledDensity; &#125; &#125; public void onLowMemory() &#123; &#125; &#125;);&#125;float targetDensity = appDisplayMetrics.widthPixels / 360;//360æŒ‡è®¾è®¡å›¾åŸå§‹dpå€¼float targetScaleDensity = targetDensity * (sNoncompatScaledDensity / sNoncompatDensity);int targetDensityDpi = (int) (160 * targetDensity);appDisplayMetrics.density = targetDensity;appDisplayMetrics.scaledDensity = targetScaleDensity;appDisplayMetrics.densityDpi = targetDensityDpi;final DisplayMetrics activityDisplayMetrics = activity.getResources().getDisplayMetrics();activityDisplayMetrics.density = targetDensity;activityDisplayMetrics.scaledDensity = targetScaleDensity;activityDisplayMetrics.densityDpi = targetDensityDpi; æ ¹æ®è®¾å¤‡çš„å®é™…å®½åº¦ä¸è®¾è®¡å›¾çš„dpå€¼ï¼Œç®—å‡ºè®¾å¤‡çš„å¯†åº¦å’Œå±å¹•åƒç´ å¯†åº¦ã€‚ smallestWidthæ ¹æ®å±å¹•çš„æœ€å°å®½åº¦å»å¯»æ‰¾å¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œè®¾ç½®é«˜å®½å€¼ã€‚å¯å‚è€ƒï¼šSmallestWidth é™å®šç¬¦é€‚é…æ–¹æ¡ˆ æ€»ç»“ç»¼åˆå„æ–¹é¢è€ƒè™‘ï¼Œç›®å‰è§‰å¾—AndroidAutoSizeè¿™ä¸ªåº“æ¯”è¾ƒé€‚åˆæ¥å…¥åˆ°é¡¹ç›®ä¸­ã€‚ å‚è€ƒ https://developer.android.com/guide/practices/screens_support?hl&#x3D;zh-cn https://mp.weixin.qq.com/s/d9QCoBP6kV9VSWvVldVVwA http://jessyan.me/autosize-introduce/ https://www.jianshu.com/p/5d4504fc599a?utm_campaign&#x3D;maleskine&amp;utm_content&#x3D;note&amp;utm_medium&#x3D;seo_notes&amp;utm_source&#x3D;recommendation","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"ç»„ä»¶åŒ–ä¹‹è·¯","date":"2022-03-08T02:25:29.653Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/ç»„ä»¶åŒ–ä¹‹è·¯/","text":"Androidé¡¹ç›®æ¶æ„å‘å±•å²åœ¨è¯´ç»„ä»¶åŒ–ä¹‹å‰ï¼Œæœ‰å¿…è¦è®²è®²Androidé¡¹ç›®çš„è®¾è®¡å‘å±•è¿‡ç¨‹ï¼Œä¹Ÿæœ‰å¿…è¦è®²è®²åœ¨ç§»åŠ¨ç«¯å…´èµ·ä¹‹å‰ï¼Œå…¶ä»–è¯­è¨€æ˜¯å¦‚ä½•åšé¡¹ç›®æ¶æ„è®¾è®¡çš„ã€‚ å†™ä»£ç æœ€åŸºç¡€çš„ä¸€ä¸ªå‡†åˆ™å°±æ˜¯åˆ†å±‚ï¼Œåˆ†å±‚æœ‰åˆ©äºæ‰©å±•ã€‚æ¯”å¦‚æˆ‘ä»¬çš„è®¡ç®—æœºå°±åˆ†ä¸ºç¡¬ä»¶ã€é©±åŠ¨ã€ç³»ç»Ÿå±‚ã€åº”ç”¨å±‚ï¼Œç½‘ç»œè¢«åˆ†ä¸ºç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€åº”ç”¨å±‚ã€‚è€Œå†™ä»£ç ä¸­æœ€è‘—åçš„åˆ†å±‚æ€æƒ³å°±æ˜¯MVCã€‚MVCæ¨¡å¼æœ€æ—©ç”±Trygve Reenskaugåœ¨1978å¹´æå‡ºï¼ŒMVCæ¨¡å¼çš„ç›®çš„æ˜¯å®ç°ä¸€ç§åŠ¨æ€çš„ç¨‹åºè®¾è®¡ï¼Œä½¿åç»­å¯¹ç¨‹åºçš„ä¿®æ”¹å’Œæ‰©å±•ç®€åŒ–ï¼Œå¹¶ä¸”ä½¿ç¨‹åºæŸä¸€éƒ¨åˆ†çš„é‡å¤åˆ©ç”¨æˆä¸ºå¯èƒ½ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ­¤æ¨¡å¼é€è¿‡å¯¹å¤æ‚åº¦çš„ç®€åŒ–ï¼Œä½¿ç¨‹åºç»“æ„æ›´åŠ ç›´è§‚ã€‚è½¯ä»¶ç³»ç»Ÿé€è¿‡å¯¹è‡ªèº«åŸºæœ¬éƒ¨åˆ†åˆ†ç¦»çš„åŒæ—¶ä¹Ÿèµ‹äºˆäº†å„ä¸ªåŸºæœ¬éƒ¨åˆ†åº”æœ‰çš„åŠŸèƒ½ã€‚ è¿ç”¨MVCï¼Œæˆ‘ä»¬ä¼šæŠŠä»£ç åˆ†ä¸ºè§†å›¾ï¼ˆViewï¼‰ã€æ¨¡å‹ï¼ˆModelï¼‰ã€æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼Œä¸åŒå±‚ä¹Ÿå¯ä»¥å‘ä¸ŠæŠ½è±¡ï¼Œæ¯”å¦‚æŠ½ç¦»å‡ºé€šç”¨çš„è§†å›¾ï¼Œè¾¾åˆ°å¤ç”¨çš„æ•ˆæœã€‚ Androidä¸­ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•è¿›è¡Œé‡æ„ä¼˜åŒ–çš„å‘¢ï¼Ÿ å°è£…ä»£ç  å°è£…Httpè¯·æ±‚ï¼Œä½¿ç”¨è‡ªå·±å†…éƒ¨çš„ä¸€å¥—æ¥å£ï¼Œå…·ä½“å®ç°å¯ä»¥æ˜¯OKHttpï¼Œå…¶ä»–åº“ä¹Ÿéƒ½åšç±»ä¼¼å°è£…ï¼› å°è£…BaseActivityã€BaseFragmentã€BaseViewï¼Œå°†ä¸€äº›æ¯”å¦‚uiHandlerã€æ¨¡ç‰ˆæ–¹æ³•æ”¾åˆ°åŸºç±»é‡Œï¼›å°è£…é€šç”¨çš„UIæ§ä»¶ï¼› å°è£…å¸¸ç”¨å·¥å…·æ–¹æ³•ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²å¤„ç†ã€æ–‡ä»¶å¤„ç†ã€æ—¶é—´å¤„ç†ã€çº¿ç¨‹æ± ç­‰ï¼› æ¨¡å—åŒ– å°†ä»¥ä¸Šå°è£…çš„ä»£ç æ”¾åˆ°å•ç‹¬çš„moduleï¼Œå¹¶å­˜å‚¨åˆ°å•ç‹¬ä»“åº“ï¼Œå•ç‹¬éƒ¨ç½²åˆ°ä»£ç ä¸­å¿ƒï¼› æ ¹æ®ä¸šåŠ¡çš„ä¸åŒï¼Œåˆ’åˆ†ä¸åŒçš„moduleï¼Œæ¯”å¦‚åˆ†äº«moduleã€åª’ä½“å¤„ç†moduleã€å›¾ç‰‡å¤„ç†moduleã€äº‹ä»¶æ€»çº¿moduleã€æ”¯ä»˜moduleã€IM moduleç­‰ç­‰ï¼› ä»£ç åˆ†å±‚ MVPï¼šæ·»åŠ ä¸€å±‚Presenterï¼Œå°†ä¸šåŠ¡é€»è¾‘çš„æ“ä½œæ”¾åˆ°è¿™ä¸€å±‚ï¼Œé‡Šæ”¾Activityã€Fragmentä¸­çš„å‹åŠ›ï¼› MVVMï¼šåˆ’åˆ†å±‚æ¬¡æ›´ç»†ï¼Œå¹¶åŸºäºæœ€æ–°çš„LiveDataç­‰æŠ€æœ¯ï¼Œé™ä½äº†OOMçš„å¯èƒ½æ€§ï¼› ä½¿ç”¨Daggerã€WMRouterã€Hiltç­‰æŠ€æœ¯å®ç°æ¨¡å—é—´é€šè®¯ï¼Œä¸»è¦è¿˜æ˜¯é™ä½æ¨¡å—ä¹‹é—´çš„è€¦åˆæ€§ï¼› æ’ä»¶åŒ– è¿›ä¸€æ­¥è§£è€¦ä¸åŒä¸šåŠ¡ï¼› é™ä½åŒ…ä½“ç§¯ï¼› åŠ¨æ€æ›´æ–°ï¼› è·¨ç«¯æŠ€æœ¯ Hybridï¼šç”±Nativeé€šè¿‡JSBridgeç­‰æ–¹æ³•æä¾›ç»Ÿä¸€çš„API,ç„¶åç”¨Html5+JSæ¥å†™å®é™…çš„é€»è¾‘ï¼› React Nativeï¼šFacebookå‘èµ·çš„å¼€æºçš„ä¸€å¥—æ–°çš„APPå¼€å‘æ–¹æ¡ˆ,ä½¿ç”¨JS+éƒ¨åˆ†åŸç”Ÿè¯­æ³•æ¥å®ç°åŠŸèƒ½ï¼› Flutterï¼šGoogleå‡ºå“ï¼Œé«˜æ€§èƒ½çš„è·¨ç«¯æ–¹æ¡ˆï¼› ç»„ä»¶åŒ–çš„å¥½å¤„ ä¸šåŠ¡è§£è€¦ æé«˜å¼€å‘æ•ˆç‡ æå‡ç¼–è¯‘é€Ÿåº¦ æé«˜ä»£ç å¤ç”¨æ€§ å¦‚ä½•å®ç°ç»„ä»¶åŒ–è·å–ä¸åŒç»„ä»¶å®ä¾‹å¯¹è±¡æˆ‘ä»¬å¯ä»¥æŠŠéœ€è¦æš´éœ²å‡ºçš„å¯¹è±¡é€šè¿‡æ¥å£çš„æ–¹å¼æš´éœ²ç»™å…¶ä»–ç»„ä»¶ä½¿ç”¨ï¼Œå†…éƒ¨é€šè¿‡æŸç§æ–¹å¼å»ºç«‹ä¸æ¥å£çš„è”ç³»ï¼Œå½“ä½¿ç”¨æ—¶ï¼Œå¯ä»¥åŠ¨æ€åˆ›å»ºè¯¥å¯¹è±¡ã€‚è¡Œè¯å«ä¾èµ–æ³¨å…¥ã€‚ Daggerã€ARouterã€WMRouterã€Hiltç­‰ä¸ºæˆ‘ä»¬æä¾›äº†ç›¸å…³åŠŸèƒ½ï¼Œå…¶å†…éƒ¨åŸç†ç±»ä¼¼ï¼ŒåŸºäºæ ‡æ³¨ï¼Œå»ºç«‹å…³è”å…³ç³»ã€‚å½“ç„¶ï¼Œé‡Œé¢è¿˜æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œæ¯”å¦‚æœ‰æ—¶å€™éœ€è¦çš„å•ä¾‹å¯¹è±¡ï¼Œæœ‰æ—¶å€™éœ€è¦è€ƒè™‘åˆ°ç”Ÿå‘½å‘¨æœŸã€‚å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©ä¸åŒçš„å®ç°æ–¹å¼ã€‚ ç»„ä»¶é—´é¡µé¢è·³è½¬æˆ‘ä»¬è¦è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œä¸€èˆ¬éƒ½æ˜¯é€šè¿‡startActivity(context, XXXActivity.class)è¿›è¡Œè·³è½¬çš„ã€‚ä¸åŒçš„ç»„ä»¶å…·ä½“å®ç°æ˜¯ä¸ä¼šå½¼æ­¤ä¾èµ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨Aç»„ä»¶ä¸­æ˜¯æ‹¿ä¸åˆ°Bç»„ä»¶çš„å¯¹åº”Activityçš„ã€‚æˆ‘ä»¬å¯ä»¥é‡‡ç”¨çš„æ–¹æ¡ˆæœ‰ï¼š éšå¼è·³è½¬ä½¿ç”¨è¿™ä¸ªæ–¹å¼ï¼Œéœ€è¦å¾ˆå¤šé…ç½®ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ æ¥å£å°è£…æ¯”å¦‚ï¼Œåœ¨Bç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬æä¾›çš„æ¥å£å±‚ï¼Œæ·»åŠ ä¸€ä¸ªstartHomePage(Params params)æ–¹æ³•ï¼ŒAç»„ä»¶ä¸­é€šè¿‡æ¥å£è·å–å¯¹åº”å®ä¾‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„å…·ä½“å®ç°åœ¨Bç»„ä»¶å†…éƒ¨ã€‚ è·¯ç”±æ–¹æ³•ARouterã€WMRouteréƒ½æä¾›äº†åŸºäºæ ‡æ³¨çš„æ–¹å¼ï¼Œå®ç°çš„é¡µé¢è·³è½¬ã€‚æˆ‘ä»¬åªéœ€è¦åœ¨å¯¹åº”Activityçš„å¤´éƒ¨è¿›è¡Œæ ‡æ³¨è®¾ç½®ï¼Œåœ¨ä½¿ç”¨æ¡†æ¶æä¾›çš„å·¥å…·æ–¹æ³•è¿›è¡Œè·³è½¬å³å¯ã€‚è¿™é‡Œå®ç°çš„åŸç†æ˜¯åŸºäºJavaçš„æ ‡æ³¨è§£æå™¨ï¼Œä¿å­˜ç›¸åº”å…³ç³»ã€‚ å‚è€ƒ Androidç»„ä»¶åŒ–æ–¹æ¡ˆåŠç»„ä»¶æ¶ˆæ¯æ€»çº¿modular-eventå®æˆ˜ ä½¿ç”¨ Hilt å®ç°ä¾èµ–é¡¹æ³¨å…¥ â€œç»ˆäºæ‡‚äº†â€ ç³»åˆ—ï¼šAndroidç»„ä»¶åŒ–ï¼Œå…¨é¢æŒæ¡ï¼","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"Dalvikã€ARTè™šæ‹Ÿæœº","date":"2022-03-08T02:25:29.652Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/Dalvikã€ARTè™šæ‹Ÿæœº/","text":"æ¦‚è¦Dalvik æ˜¯ Google å…¬å¸è‡ªå·±è®¾è®¡ç”¨äº Android å¹³å°çš„è™šæ‹Ÿæœºã€‚å®ƒå¯ä»¥æ”¯æŒå·²è½¬æ¢ä¸º** .dex æ ¼å¼**çš„ Java åº”ç”¨ç¨‹åºçš„è¿è¡Œï¼Œ.dex æ ¼å¼æ˜¯ä¸“ä¸ºDalvik è®¾è®¡çš„ä¸€ç§å‹ç¼©æ ¼å¼ï¼Œé€‚åˆå†…å­˜å’Œå¤„ç†å™¨é€Ÿåº¦æœ‰é™çš„ç³»ç»Ÿã€‚ Dalvik ç»è¿‡ä¼˜åŒ–ï¼Œå…è®¸åœ¨æœ‰é™çš„å†…å­˜ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªè™šæ‹Ÿæœºçš„å®ä¾‹ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªDalvikåº”ç”¨ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ Linux è¿›ç¨‹æ‰§è¡Œã€‚ç‹¬ç«‹çš„è¿›ç¨‹å¯ä»¥é˜²æ­¢åœ¨è™šæ‹Ÿæœº å´©æºƒçš„æ—¶å€™æ‰€æœ‰ç¨‹åºéƒ½è¢«å…³é—­ã€‚ 2014 å¹´ 6 æœˆ 25 æ—¥ï¼ŒAndroid L æ­£å¼äº®ç›¸äºå¬å¼€çš„è°·æ­Œ I&#x2F;O å¤§ä¼šï¼ŒAndroid L æ”¹ åŠ¨å¹…åº¦è¾ƒå¤§ï¼Œè°·æ­Œå°†ç›´æ¥åˆ é™¤ Dalvikï¼Œä»£æ›¿å®ƒçš„æ˜¯ä¼ é—»å·²ä¹…çš„ ARTã€‚ Dalvikä¸JVMçš„åŒºåˆ« Dalvik æ˜¯åŸºäºå¯„å­˜å™¨çš„ï¼Œè€Œ JVM æ˜¯åŸºäºæ ˆçš„ã€‚ Dalvik è¿è¡Œ dex æ–‡ä»¶ï¼Œè€Œ JVM è¿è¡Œ java å­—èŠ‚ç  è‡ª Android 2.2 å¼€å§‹ï¼ŒDalvik æ”¯æŒ JIT(just-in-timeï¼Œå³æ—¶ç¼–è¯‘æŠ€æœ¯)ã€‚ ARTï¼ˆAndroid Runtimeï¼‰ART çš„æœºåˆ¶ä¸ Dalvik ä¸åŒã€‚åœ¨ Dalvik ä¸‹ï¼Œåº”ç”¨æ¯æ¬¡è¿è¡Œçš„æ—¶å€™ï¼Œå­—èŠ‚ç éƒ½éœ€è¦é€šè¿‡å³æ—¶ç¼–è¯‘å™¨(just in time ï¼ŒJIT)è½¬æ¢ä¸ºæœºå™¨ç ï¼Œè¿™ä¼šæ‹–æ…¢åº”ç”¨çš„è¿è¡Œæ•ˆç‡ï¼Œè€Œåœ¨ ART ç¯å¢ƒä¸­ï¼Œåº”ç”¨åœ¨ç¬¬ä¸€æ¬¡å®‰è£…çš„æ—¶å€™ï¼Œå­—èŠ‚ç å°±ä¼šé¢„å…ˆç¼–è¯‘æˆæœºå™¨ç ï¼Œ ä½¿å…¶æˆä¸ºçœŸæ­£çš„æœ¬åœ°åº”ç”¨ã€‚è¿™ä¸ªè¿‡ç¨‹å«åšé¢„ç¼–è¯‘(AOT,Ahead-Of-Time)ã€‚è¿™æ · çš„è¯ï¼Œåº”ç”¨çš„å¯åŠ¨(é¦–æ¬¡)å’Œæ‰§è¡Œéƒ½ä¼šå˜å¾—æ›´åŠ å¿«é€Ÿã€‚ ä¼˜ç‚¹ ç³»ç»Ÿæ€§èƒ½çš„æ˜¾è‘—æå‡ã€‚ åº”ç”¨å¯åŠ¨æ›´å¿«ã€è¿è¡Œæ›´å¿«ã€ä½“éªŒæ›´æµç•…ã€è§¦æ„Ÿåé¦ˆæ›´åŠæ—¶ã€‚ æ›´é•¿çš„ç”µæ± ç»­èˆªèƒ½åŠ›ã€‚ æ”¯æŒæ›´ä½çš„ç¡¬ä»¶ã€‚ ç¼ºç‚¹ æœºå™¨ç å ç”¨çš„å­˜å‚¨ç©ºé—´æ›´å¤§ï¼Œå­—èŠ‚ç å˜ä¸ºæœºå™¨ç ä¹‹åï¼Œå¯èƒ½ä¼šå¢åŠ  10%-20% åº”ç”¨çš„å®‰è£…æ—¶é—´ä¼šå˜é•¿ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"Frameworkæ¦‚è¦","date":"2022-03-08T02:25:29.652Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/Frameworkæ¦‚è¦/","text":"æ¦‚è¿°å¯åŠ¨æ—¶initè¿›ç¨‹åŠ è½½init.rcæ–‡ä»¶ï¼Œå¯åŠ¨zegoteè¿›ç¨‹ï¼Œzegoteå°±æ˜¯app_processè¿›ç¨‹ï¼Œapp_processè¿›ç¨‹è£…åœ¨Androidçš„ç³»ç»ŸClassã€è£…è½½éœ€è¦çš„åº•å±‚soåº“ï¼Œè£…è½½ç›¸åº”èµ„æºï¼›app_processå¯åŠ¨system_serverè¿›ç¨‹ï¼Œsystem_serverè¿›ç¨‹ä¸­åˆ›å»ºäº†AMSã€PMSã€WMSã€‚app_processä¸system_serverè¿›ç¨‹é€šè¿‡socketé€šè®¯ã€‚ å¯åŠ¨ä¸€ä¸ªAppæ—¶ï¼Œæ‰§è¡ŒActivityThreadçš„mainæ–¹æ³•ï¼Œåˆå§‹åŒ–Contextã€Resourceã€AssetManagerç­‰åŸºç¡€è®¾æ–½ã€‚è¿è¡Œä¸»çº¿ç¨‹Looperã€‚ åœ¨system_serverä¸­ä¼šå¯åŠ¨ä»¥ä¸‹æœåŠ¡ SystemServiceManagerPowerManagerServiceWebViewUpdateServiceDisplayManagerServiceActivityManagerServiceç®¡ç†Activityï¼Œåœ¨Appè¿›ç¨‹å¯åŠ¨æ—¶ï¼Œé€šè¿‡Binderï¼Œåœ¨ActivityThreadä¸­è¿›è¡ŒActivityçš„ç®¡ç†ã€‚ ç»Ÿä¸€è°ƒåº¦æ‰€æœ‰åº”ç”¨ç¨‹åºçš„Activityçš„ç”Ÿå‘½å‘¨æœŸ å¯åŠ¨æˆ–æ€æ­»åº”ç”¨ç¨‹åºçš„è¿›ç¨‹ å¯åŠ¨å¹¶è°ƒåº¦Serviceçš„ç”Ÿå‘½å‘¨æœŸ æ³¨å†ŒBroadcastReceiverï¼Œå¹¶æ¥æ”¶å’Œåˆ†å‘Broadcast å¯åŠ¨å¹¶å‘å¸ƒContentProvider è°ƒåº¦task å¤„ç†åº”ç”¨ç¨‹åºçš„Crash æŸ¥è¯¢ç³»ç»Ÿå½“å‰è¿è¡ŒçŠ¶æ€ PackageManagerServiceåŒ…ç®¡ç†ï¼Œä¸ºäº†èƒ½åœ¨è¿è¡Œæ—¶å¿«é€Ÿçš„æ‰“å¼€å¯¹åº”Appï¼Œå¯åŠ¨æ—¶ä¼šéå†æ•´ä¸ªappæ–‡ä»¶å¤¹ï¼Œè§£æAndroid Manifest.xmlæ–‡ä»¶ï¼Œå°†ç›¸åº”ä¿¡æ¯å­˜å‚¨èµ·æ¥ã€‚ WindowManagerServiceæ§åˆ¶æ‰€æœ‰Windowçš„æ˜¾ç¤ºä¸éšè—ä»¥åŠè¦æ˜¾ç¤ºçš„ä½ç½®ï¼Œè®¾ç½®æˆAMSçš„æˆå‘˜å˜é‡ ä¸ºæ‰€æœ‰çª—å£åˆ†é…Surfaceã€‚å®¢æˆ·ç«¯å‘WMSæ·»åŠ ä¸€ä¸ªçª—å£çš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯WMSä¸ºå…¶åˆ†é…ä¸€å—Suifaceçš„è¿‡ç¨‹ï¼Œä¸€å—å—Surfaceåœ¨WMSçš„ç®¡ç†ä¸‹æœ‰åºçš„æ’å¸ƒåœ¨å±å¹•ä¸Šã€‚Windowçš„æœ¬è´¨å°±æ˜¯Surfaceã€‚ ç®¡ç†Surfaceçš„æ˜¾ç¤ºé¡ºåºã€å°ºå¯¸ã€ä½ç½® ç®¡ç†çª—å£åŠ¨ç”» è¾“å…¥ç³»ç»Ÿç›¸å…³ï¼šWMSæ˜¯æ´¾å‘ç³»ç»ŸæŒ‰é”®å’Œè§¦æ‘¸æ¶ˆæ¯çš„æœ€ä½³äººé€‰ï¼Œå½“æ¥æ”¶åˆ°ä¸€ä¸ªè§¦æ‘¸äº‹ä»¶ï¼Œå®ƒéœ€è¦å¯»æ‰¾ä¸€ä¸ªæœ€åˆé€‚çš„çª—å£æ¥å¤„ç†æ¶ˆæ¯ï¼Œè€ŒWMSæ˜¯çª—å£çš„ç®¡ç†è€…ï¼Œç³»ç»Ÿä¸­æ‰€æœ‰çš„çª—å£çŠ¶æ€å’Œä¿¡æ¯éƒ½åœ¨å…¶æŒæ¡ä¹‹ä¸­ï¼Œå®Œæˆè¿™ä¸€å·¥ä½œä¸åœ¨è¯ä¸‹ã€‚ Activityè´Ÿè´£ç”Ÿå‘½å‘¨æœŸå’Œäº‹ä»¶å¤„ç† Windowæ§åˆ¶è§†å›¾ æµç¨‹å›¾","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"PackageManagerServiceå·¥ä½œåŸç†","date":"2022-03-08T02:25:29.652Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/PackageManagerServiceå·¥ä½œåŸç†/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"Binder","date":"2022-03-08T02:25:29.649Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/Binder/","text":"ä¸€ä¸ªè¿›ç¨‹ç©ºé—´åˆ†ä¸º: ç”¨æˆ·ç©ºé—´ï¼šæ•°æ®ä¸å¯å…±äº«ï¼Œæ‰€ä»¥ç”¨æˆ·ç©ºé—´ &#x3D; ä¸å¯å…±äº«ç©ºé—´ å†…æ ¸ç©ºé—´ï¼šæ•°æ®å¯å…±äº«ï¼Œæ‰€ä»¥å†…æ ¸ç©ºé—´ &#x3D; å¯å…±äº«ç©ºé—´ Binder çš„ä½œç”¨åˆ™æ˜¯:è¿æ¥ä¸¤ä¸ªè¿›ç¨‹ï¼Œå®ç°äº†mmap()ç³»ç»Ÿè°ƒç”¨ï¼Œä¸»è¦è´Ÿè´£åˆ›å»ºæ•°æ®æ¥æ”¶çš„ç¼“å­˜ç©ºé—´ &amp; ç®¡ç†æ•°æ®æ¥æ”¶ç¼“å­˜ã€‚ä¼ ç»Ÿçš„è·¨è¿›ç¨‹é€šä¿¡éœ€æ‹·è´æ•°æ®2æ¬¡ï¼Œä½† Binder æœºåˆ¶åªéœ€1æ¬¡ï¼Œä¸»è¦æ˜¯ä½¿ç”¨åˆ°äº†å†…å­˜æ˜ å°„ Androidä¸­IPCçš„ä¸åŒæ–¹å¼æ¯”è¾ƒ åç§° ä¼˜ç‚¹ ç¼ºç‚¹ é€‚ç”¨åœºæ™¯ Bundle ç®€å•æ˜“ç”¨ åªèƒ½ä¼ è¾“Bundleæ”¯æŒçš„æ•°æ®ç±»å‹ å››å¤§ç»„ä»¶é—´çš„è¿›ç¨‹é—´é€šä¿¡ æ–‡ä»¶å…±äº« ç®€å•æ˜“ç”¨ ä¸é€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼Œå¹¶ä¸”æ— æ³•åšåˆ°è¿›ç¨‹é—´çš„å³æ—¶é€šä¿¡ æ— å¹¶å‘è®¿é—®åœºæ™¯ AIDL åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒä¸€å¯¹å¤šå¹¶å‘é€šä¿¡ï¼Œæ”¯æŒå®æ—¶é€šä¿¡ æ—  ä¸€å¯¹å¤šé€šä¿¡ä¸”æœ‰RPCéœ€æ±‚ Messager åŠŸèƒ½ä¸€èˆ¬ï¼Œæ”¯æŒä¸€å¯¹å¤šå¹¶å‘é€šä¿¡ï¼Œæ”¯æŒå®æ—¶é€šä¿¡ ä¸èƒ½å¾ˆå¥½å¤„ç†é«˜å¹¶å‘åœºæ™¯ï¼Œä¸æ”¯æŒRPC ä½å¹¶å‘çš„ä¸€å¯¹å¤šé€šä¿¡ï¼Œæ— RPCéœ€æ±‚ ContentProvider åœ¨æ•°æ®æºè®¿é—®æ–¹é¢åŠŸèƒ½å¼ºå¤§ Socket åŠŸèƒ½å¼ºå¤§ å‚è€ƒ https://www.jianshu.com/p/719fc4758813","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"Androidä¸­çš„ClassLoader","date":"2022-03-08T02:25:29.648Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/Androidä¸­çš„ClassLoader/","text":"æ¦‚è¿° BootClassLoader:ä¸»è¦ç”¨äºåŠ è½½ç³»ç»Ÿçš„ç±»ï¼ŒåŒ…æ‹¬ java å’Œ android ç³»ç»Ÿçš„ ç±»åº“ï¼Œå’Œ JVM ä¸­ä¸åŒï¼ŒBootClassLoader æ˜¯ ClassLoader å†…éƒ¨ç±»ï¼Œæ˜¯ç”± Java å®ç°çš„ï¼Œå®ƒä¹Ÿæ˜¯æ‰€æœ‰ç³»ç»Ÿ ClassLoader çš„çˆ¶ ClassLoader PathClassLoader:ç”¨äºåŠ è½½ Android ç³»ç»Ÿç±»å’Œå¼€å‘ç¼–å†™åº”ç”¨çš„ç±»ï¼Œåªèƒ½åŠ è½½å·²ç»å®‰è£…åº”ç”¨çš„ dex æˆ– apk æ–‡ä»¶ï¼Œä¹Ÿæ˜¯ getSystemClassLoader çš„è¿”å›å¯¹è±¡ DexClassLoader:å¯ä»¥ç”¨äºåŠ è½½ä»»æ„è·¯å¾„çš„ zip,jar æˆ–è€… apk æ–‡ä»¶ï¼Œä¹Ÿæ˜¯è¿›è¡Œå®‰å“åŠ¨æ€åŠ è½½çš„åŸºç¡€ ç»§æ‰¿å…³ç³»","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"Androidæµ‹è¯•å®è·µ","date":"2022-03-08T02:25:29.647Z","path":"wiki/Android/æœªåˆ†ç±»/Androidæµ‹è¯•å®è·µ/","text":"ä¸ºä»€ä¹ˆè¦åšæµ‹è¯•ï¼Ÿå¾ˆå¤šå…¬å¸ä¸ºäº†èŠ‚çœæˆæœ¬ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸ä¼šè¦æ±‚å¼€å‘å†™å•å…ƒæµ‹è¯•çš„ã€‚è‡ªå·±åšå®Œçš„åŠŸèƒ½ï¼ŒåŠ¨æ‰‹ç‚¹ç‚¹çœ‹çœ‹åŸºæœ¬æµç¨‹æ˜¯å¦é€šç•…å°±ä¸¢ç»™æµ‹è¯•äº†ã€‚é¡¹ç›®å°çš„æ—¶å€™è¿™æ ·ä¹Ÿä¸ä¼šæœ‰å•¥é—®é¢˜ã€‚éšç€é¡¹ç›®çš„å¤æ‚åº¦è¶Šæ¥è¶Šé«˜ï¼Œäººå‘˜è¶Šæ¥è¶Šå¤šï¼Œä¸åŒçš„äººå‘˜æ”¹åŠ¨åˆ°åŒä¸€å—ä»£ç ï¼Œä½†å½¼æ­¤å¯¹åŸæ¥çš„é€»è¾‘ä¸æ˜¯å¾ˆæ¸…æ¥šï¼ˆå› ä¸ºä»£ç é‡å®åœ¨å¤ªå¤šï¼Œæƒ³è¦ä¸€ä¸ªäººå¼„æ¸…æ¥šæ‰€æœ‰ç»†èŠ‚å·²ç»ä¸å¤ªå¯èƒ½ï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¤§å®¶å®è‚¯å†™æ–°çš„ä»£ç ä¹Ÿä¸æ„¿æ„æ”¹æ—§çš„ä»£ç çš„åŸå› ã€‚è€Œå¦‚æœæ¯ä¸ªåŠŸèƒ½åœ¨å¼€å‘çš„åŒæ—¶é…ç½®äº†å•å…ƒæµ‹è¯•ï¼Œé‚£ä¹ˆç†è®ºä¸Šæ–°çš„åŠŸèƒ½ å¼€å‘å®Œä¹‹åï¼Œæ‰€æœ‰çš„å•å…ƒæµ‹è¯•åº”è¯¥éƒ½æ˜¯å¯ä»¥è·‘é€šçš„ã€‚è¿™æ ·å°±èƒ½è‡ªåŠ¨å¸®æˆ‘ä»¬æ£€æŸ¥å‡ºæ¥ä¸€äº›éš¾ä»¥å‘ç°çš„bugã€‚ Androidå¦‚ä½•è¿›è¡Œå•å…ƒæµ‹è¯• androidTestç›®å½•ï¼šåº”åŒ…å«åœ¨å®é™…æˆ–è™šæ‹Ÿè®¾å¤‡ä¸Šè¿è¡Œçš„æµ‹è¯•ã€‚æ­¤ç±»æµ‹è¯•åŒ…æ‹¬é›†æˆæµ‹è¯•ï¼Œç«¯åˆ°ç«¯æµ‹è¯•ä»¥åŠä»…JVMæ— æ³•éªŒè¯åº”ç”¨ç¨‹åºåŠŸèƒ½çš„å…¶ä»–æµ‹è¯•ã€‚ testç›®å½•ï¼šåº”åŒ…å«åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šè¿è¡Œçš„æµ‹è¯•ï¼Œä¾‹å¦‚å•å…ƒæµ‹è¯• æµ‹è¯•å¸¸ç”¨åº“ JUnit Mockito PowerMock Espresso JUnitTestCase TestResult TestSuite æµ‹è¯•å¥—ä»¶ åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œéšç€é¡¹ç›®è¿›åº¦çš„å¼€å±•ï¼Œå•å…ƒæµ‹è¯•ç±»ä¼šè¶Šæ¥è¶Šå¤šï¼Œå¯æ˜¯ç›´åˆ°ç°åœ¨æˆ‘ä»¬è¿˜åªä¼šä¸€ä¸ªä¸€ä¸ªçš„å•ç‹¬è¿è¡Œæµ‹è¯•ç±»ï¼Œè¿™åœ¨å®é™…é¡¹ç›®å®è·µä¸­è‚¯å®šæ˜¯ä¸å¯è¡Œçš„ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJUnit æä¾›äº†ä¸€ç§æ‰¹é‡è¿è¡Œæµ‹è¯•ç±»çš„æ–¹æ³•ï¼Œå«åšæµ‹è¯•å¥—ä»¶ã€‚ æ–­è¨€ï¼š Assert æ ‡æ³¨ï¼š æ ‡æ³¨ æè¿° @Test è¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ @Before æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œä¹‹å‰æ‰§è¡Œ @After æ¯ä¸ªæµ‹è¯•æ–¹æ³•æ‰§è¡Œåæ‰§è¡Œ @BeforeClass ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶åªæ‰§è¡Œä¸€æ¬¡ @AfterClass ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶æœ€åæ‰§è¡Œä¸€æ¬¡ @Ignore è¿™ä¸ªæ³¨è§£æ˜¯ç”¨æ¥å¿½ç•¥æœ‰å…³ä¸éœ€è¦æ‰§è¡Œçš„æµ‹è¯•çš„ã€‚ Mockitoæ¨¡æ‹Ÿè¢«æµ‹å¯¹è±¡ä¾èµ–çš„å¯¹è±¡ å‚è€ƒ https://dunwu.github.io/javatech/test/mockito.html PowerMockæ¨¡æ‹Ÿè¢«æµ‹å¯¹è±¡ä¾èµ–çš„é™æ€æ–¹æ³• RobolectricAndroid SDKæµ‹è¯•æ¡†æ¶ Configé…ç½®å‚è€ƒ https://maxwell-nc.github.io/android/robolectricTest.html https://www.jianshu.com/p/6c23f2681105 Espresso","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æœªåˆ†ç±»","slug":"Android/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Android/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"Androidå¸¸è§é—®é¢˜æ•´ç†","date":"2022-03-08T02:25:29.647Z","path":"wiki/Android/æœªåˆ†ç±»/Androidå¸¸è§é—®é¢˜æ•´ç†/","text":"é—®é¢˜æè¿°12345678!SESSION 2017-08-29 15:27:40.107 ----------------------------------------------- eclipse.buildId=unknown java.version=1.8.0_112-release java.vendor=JetBrains s.r.o BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=zh_CN Command-line arguments: -os win32 -ws win32 -arch x86_64 -data @noDefault... !ENTRY org.eclipse.osgi 4 0 2017-08-29 15:27:41.441 !MESSAGE Application error !STACK 1 java.lang.NullPointerException at org.eclipse.core.runtime.URIUtil.toURI(URIUtil.java:280) at org.eclipse.e4.ui.internal.workbench.ResourceHandler.loadMostRecentModel(ResourceHandler.java:127)... è§£å†³åŠæ³• è¿›ç¨‹ç®¡ç†å™¨ä¸­æ€æ­»monitor.exeè¿›ç¨‹ï¼› åˆ é™¤$HOME&#x2F;.android&#x2F;monitor-workspaceç›®å½• å‚è€ƒ https://tutel.me/c/programming/questions/26052849/unexpected+error+while+parsing+input+invalid+uiautomator+hierarchy+file é—®é¢˜æè¿°12345* What went wrong:Execution failed for task &#x27;:app:transformDexArchiveWithExternalLibsDexMergerForDebug&#x27;.&gt; com.android.builder.dexing.DexArchiveMergerException: Error while merging dex archives: Program type already present: org.intellij.lang.annotations.Identifier Learn how to resolve the issue at https://developer.android.com/studio/build/dependencies#duplicate_classes. è§£å†³åŠæ³•android &#123; configurations &#123; cleanedAnnotations compile.exclude group: &#39;org.jetbrains&#39; , module:&#39;annotations&#39; &#125; &#125; å‚è€ƒ https://stackoverflow.com/questions/49811851/program-type-already-present-org-intellij-lang-annotations-flow é—®é¢˜æè¿°1Error:Execution failed for task &#x27;:app:javaPreCompilePreProductDebug&#x27;. &gt; Annotation processors must be explicitly declared now. The following dependencies on the compile classpath are found to contain annotation processor. Please add them to the annotationProcessor configuration. è§£å†³åŠæ³•android &#123; javaCompileOptions &#123; annotationProcessorOptions &#123; includeCompileClasspath true &#125; &#125; &#125; å‚è€ƒ é—®é¢˜æè¿°1234567FAILURE: Build failed with an exception.* What went wrong:A problem occurred configuring project &#x27;:myProject&#x27;.&gt; Could not resolve all files for configuration &#x27;:myProject:classpath&#x27;.&gt; Could not find org.jetbrains.trove4j:trove4j:20160824. Searched in the following locations: è§£å†³åŠæ³•æ‰¾ä¸åˆ°ä¾èµ–ï¼Œæ·»åŠ ä»“åº“åœ°å€ã€‚ buildscript &#123; repositories &#123; google() jcenter() maven &#123; url &quot;https://jitpack.io&quot; &#125; mavenCentral() &#125; dependencies &#123; classpath &#39;com.android.tools.build:gradle:3.3.2&#39; &#125; &#125; allprojects &#123; repositories &#123; google() jcenter() mavenCentral() maven &#123; url &quot;https://jitpack.io&quot; &#125; &#125; &#125; å‚è€ƒ https://blog.csdn.net/rooney8/article/details/86065188 é—®é¢˜æè¿°1Android-SDK/ndk-bundle/build/core/add-application.mk:178: ### * Android NDK: APP_STL gnustl_shared is no longer supported. Please switch to either c++_static or c++_shared. See https://developer.android.com/ndk/guides/cpp-support.html for more information. . Stop. è§£å†³åŠæ³•ä¿®æ”¹é¡¹ç›®ä¸­Application.mkæ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„APP_STL :&#x3D; gnustl_staticæ”¹æˆAPP_STL :&#x3D; c++_static å‚è€ƒ https://stackoverflow.com/questions/52475177/android-ndk-app-stl-gnustl-shared-is-no-longer-supported é—®é¢˜æè¿°1This Activity already has an action bar supplied by the window decor. Do not request Window.FEATURE_SUPPORT_ACTION_BAR and set windowActionBar to false in your theme to use a Toolbar instead. è§£å†³åŠæ³•ä¿®æ”¹ä¸»é¢˜å±æ€§ å‚è€ƒ https://my.oschina.net/ocean870227/blog/738442","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æœªåˆ†ç±»","slug":"Android/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Android/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"AIDL","date":"2022-03-08T02:25:29.647Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/AIDL/","text":"Binderæ˜¯ä¸€ä¸ªå·¥ä½œåœ¨Linuxå±‚é¢çš„é©±åŠ¨ï¼Œè¿™ ä¸€æ®µé©±åŠ¨è¿è¡Œåœ¨å†…æ ¸æ€ã€‚Binderæœ¬èº«åˆæ˜¯ä¸€ç§æ¶æ„ï¼Œè¿™ç§æ¶æ„æä¾›äº†æœåŠ¡ç«¯ã€Binderé©±åŠ¨å’Œå®¢æˆ·ç«¯ä¸‰ä¸ªæ¨¡å—ã€‚ æœåŠ¡ç«¯BinderæœåŠ¡ç«¯å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªBinderç±»çš„å¯¹è±¡ï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªBinderå¯¹è±¡çš„æ—¶å€™ï¼ŒBinderå†…éƒ¨å°± ä¼šå¯åŠ¨ä¸€ä¸ªéšè—çº¿ç¨‹ï¼Œè¯¥çº¿ç¨‹çš„ä¸»è¦ä½œç”¨å°±æ˜¯æ¥æ”¶Binderé©±åŠ¨å‘é€æ¥çš„æ¶ˆæ¯ï¼Œé‚£ä¹ˆBinderé©±åŠ¨ä¸º ä»€ä¹ˆä¼šç»™BinderæœåŠ¡ç«¯çš„çº¿ç¨‹å‘é€æ¶ˆæ¯å‘¢?åŸå› å¾ˆç®€å•ï¼Œæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯è°ƒç”¨æœåŠ¡ç«¯çš„æ—¶å€™å¹¶ä¸èƒ½ç›´æ¥è°ƒç”¨æœåŠ¡ç«¯ç›¸åº”çš„ç±»å’Œæ–¹æ³•ï¼Œåªèƒ½é€šè¿‡Binderé©±åŠ¨æ¥è°ƒç”¨ã€‚å½“æœåŠ¡ç«¯çš„éšè—çº¿ç¨‹æ”¶åˆ°Binder é©±åŠ¨å‘æ¥çš„æ¶ˆæ¯ä¹‹åï¼Œå°±ä¼šå›è°ƒæœåŠ¡ç«¯çš„onTransactæ–¹æ³•ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„æ–¹æ³•å¤´: 1234567891011121314151617181920212223242526272829303132333435363738/**@param code æŒ‡å®šå®¢æˆ·ç«¯è¦è°ƒ ç”¨æœåŠ¡ç«¯çš„å“ªä¸€ä¸ªæ–¹æ³•@param data å®¢æˆ·ç«¯ä¼ æ¥çš„å‚æ•°@param reply è¡¨ç¤ºæœåŠ¡ç«¯è¿”å›çš„å‚æ•°@param flags è¡¨ç¤ºå®¢æˆ·ç«¯çš„è°ƒç”¨æ˜¯å¦æœ‰è¿”å›å€¼ï¼Œ0è¡¨ç¤ºæœåŠ¡ç«¯æ‰§è¡Œå®Œæˆä¹‹åæœ‰è¿”å›å€¼ï¼Œ1è¡¨ç¤ºæœåŠ¡ ç«¯æ‰§è¡Œå®Œåæ²¡æœ‰è¿”å›å€¼ã€‚*/protected boolean onTransact(int code, Parcel data, Parcel reply, int flags) throws RemoteExceptionpublic class MyAddBinder extends Binder &#123; private final static int ADD = 1; @Override protected boolean onTransact(int code, Parcel data, Parcel reply, int flags) throws RemoteException &#123; switch (code) &#123; case ADD: data.enforceInterface(&quot;MyAddBinder&quot;); int a = data.readInt(); int b = data.readInt(); int add = add(a, b); reply.writeInt(add); return true; &#125; return super.onTransact(code, data, reply, flags); &#125; public int add(int a, int b) &#123; return a + b; &#125;&#125;public class MyService extends Service &#123; @Nullable @Override public IBinder onBind(Intent intent) &#123; return new MyAddBinder(); &#125;&#125; Binderé©±åŠ¨Binderé©±åŠ¨æ˜¯BinderæœåŠ¡ç«¯å’ŒBinderå®¢æˆ·ç«¯ä¹‹é—´è¿æ¥çš„ä¸€ä¸ªæ¡¥æ¢ï¼Œå½“ä¸€ä¸ªæœåŠ¡ç«¯Binderè¢«åˆ›å»ºå‡ºæ¥çš„æ—¶å€™ï¼Œç³»ç»ŸåŒæ—¶ä¼šåœ¨Binderé©±åŠ¨ä¸­åˆ›å»ºå¦å¤–ä¸€ä¸ªBinderå¯¹è±¡ï¼Œå½“å®¢æˆ·ç«¯æƒ³è¦è®¿é—®è¿œç¨‹çš„BinderæœåŠ¡ç«¯çš„æ—¶å€™ï¼Œéƒ½æ˜¯é€šè¿‡è¿™ä¸ªBinderå¯¹è±¡æ¥å®Œæˆçš„ã€‚é‚£ä¹ˆBinderé©±åŠ¨ä¸­çš„è¿™ä¸ªå¯¹è±¡è¦æ€ä¹ˆæ ·è·å–å‘¢?å…¶å®å¾ˆç®€å•ï¼Œè¿™ä¸ªBInderå¯¹è±¡å°±æ˜¯æˆ‘ä»¬ç”¨ç»‘å®šçš„æ–¹å¼å¯åŠ¨ä¸€ä¸ªServiceæœåŠ¡æ—¶ï¼Œåœ¨ç»‘å®šæˆåŠŸæ—¶æ‰€è·å–çš„é‚£ä¸ªIBinderå¯¹è±¡ã€‚ 1234567891011boolean b = bindService(intent, new ServiceConnection() &#123; @Override public void onServiceConnected(ComponentName name, IBinder service) &#123; //è¿™ä¸ªserviceå°±æ˜¯Binderé©±åŠ¨ä¸­åˆ›å»ºçš„Binderå¯¹è±¡ mRemote = service; &#125; @Override public void onServiceDisconnected(ComponentName name) &#123; &#125; &#125;, Service.BIND_AUTO_CREATE); å®¢æˆ·ç«¯åœ¨å®¢æˆ·ç«¯è·å–Binderé©±åŠ¨ä¸­çš„Binderå¯¹è±¡ï¼Œç„¶åè°ƒç”¨è¯¥å¯¹è±¡ä¸­çš„ transactæ–¹æ³•è¿›è¡Œæ•°æ®ä¼ é€’ã€‚å®¢æˆ·ç«¯åœ¨å‘æœåŠ¡ç«¯å‘é€æ¶ˆæ¯çš„æ—¶å€™æ˜¯ä»¥çº¿ç¨‹é—´é€šä¿¡çš„æ¨¡å¼æ¥è¿›è¡Œçš„ï¼Œè€Œä¸”è°ƒç”¨æœåŠ¡ç«¯ä»£ç æ˜¯åŒæ­¥è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´çº¿ç¨‹ä¼šé˜»å¡ã€‚ 1234567891011121314151617int code = 1;//å‘æœåŠ¡ç«¯å‘é€çš„æ•°æ®Parcel data = Parcel.obtain();//æ¥æ”¶æœåŠ¡ç«¯è¿”å›çš„æ•°æ®Parcel reply = Parcel.obtain();data.writeInterfaceToken(&quot;MyAddBinder&quot;);data.writeInt(10);data.writeInt(9);try &#123; mRemote.transact(code, data, reply, 0); int i = reply.readInt(); Log.d(&quot;google.sang&quot;, &quot;add: &quot; + i); reply.recycle(); data.recycle();&#125; catch (RemoteException e) &#123; e.printStackTrace();&#125;","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"APKæ‰“åŒ…æµç¨‹","date":"2022-03-08T02:25:29.647Z","path":"wiki/Android/è¿›é˜¶çŸ¥è¯†/APKæ–‡ä»¶æ‰“åŒ…æµç¨‹/","text":"APKæ–‡ä»¶çš„ç»“æ„ xxx.apk resï¼šæœªç¼–è¯‘çš„èµ„æºæ–‡ä»¶ anim color drawable layout menu lib assets META-INF CERT.RSAï¼šä¿å­˜äº†ç­¾åå’Œå…¬é’¥è¯ä¹¦ CERT.SFï¼šå¯¹æ¯ä¸ªæ–‡ä»¶çš„å¤´3è¡Œè¿›è¡ŒSHA1 hash MANIFEST.MFï¼šç‰ˆæœ¬å·ä»¥åŠæ¯ä¸€ä¸ªæ–‡ä»¶çš„å“ˆå¸Œå€¼ï¼ˆBase64ï¼‰ï¼ŒåŒ…æ‹¬èµ„æºæ–‡ä»¶ã€‚ com classes.dex resources.arsc AndroidManifest.xml ä¸€ã€èµ„æºæ‰“åŒ…ä½¿ç”¨aaptæ¥æ‰“åŒ…resèµ„æºæ–‡ä»¶ï¼Œç”ŸæˆR.javaã€resources.arscå’Œresæ–‡ä»¶ï¼ˆäºŒè¿›åˆ¶ &amp; éäºŒè¿›åˆ¶å¦‚res&#x2F;rawå’Œpicä¿æŒåŸæ ·ï¼‰ resç›®å½•æœ‰9ç§ç›®å½• animatorã€‚è¿™ç±»èµ„æºä»¥XMLæ–‡ä»¶ä¿å­˜åœ¨res&#x2F;animatorç›®å½•ä¸‹ï¼Œç”¨æ¥æè¿°å±æ€§åŠ¨ç”»ã€‚ animã€‚è¿™ç±»èµ„æºä»¥XMLæ–‡ä»¶ä¿å­˜åœ¨res&#x2F;animç›®å½•ä¸‹ï¼Œç”¨æ¥æè¿°è¡¥é—´åŠ¨ç”»ã€‚ colorã€‚è¿™ç±»èµ„æºä»¥XMLæ–‡ä»¶ä¿å­˜åœ¨res&#x2F;colorç›®å½•ä¸‹ï¼Œç”¨æè¿°å¯¹è±¡é¢œè‰²çŠ¶æ€é€‰æ‹©å­ã€‚ drawableã€‚è¿™ç±»èµ„æºä»¥XMLæˆ–è€…Bitmapæ–‡ä»¶ä¿å­˜åœ¨res&#x2F;drawableç›®å½•ä¸‹ï¼Œç”¨æ¥æè¿°å¯ç»˜åˆ¶å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢æ”¾ç½®ä¸€äº›å›¾ç‰‡ï¼ˆ.png, .9.png, .jpg, .gifï¼‰ï¼Œæ¥ä½œä¸ºç¨‹åºç•Œé¢è§†å›¾çš„èƒŒæ™¯å›¾ã€‚æ³¨æ„ï¼Œä¿å­˜åœ¨è¿™ä¸ªç›®å½•ä¸­çš„Bitmapæ–‡ä»¶åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šè¢«ä¼˜åŒ–çš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªä¸éœ€è¦å¤šäº256è‰²çš„çœŸå½©è‰²PNGæ–‡ä»¶å¯èƒ½ä¼šè¢«è½¬æ¢æˆä¸€ä¸ªåªæœ‰8ä½è°ƒè‰²æ¿çš„PNGé¢æ¿ï¼Œè¿™æ ·å°±å¯ä»¥æ— æŸåœ°å‹ç¼©å›¾ç‰‡ï¼Œä»¥å‡å°‘å›¾ç‰‡æ‰€å ç”¨çš„å†…å­˜èµ„æºã€‚ layoutã€‚è¿™ç±»èµ„æºä»¥XMLæ–‡ä»¶ä¿å­˜åœ¨res&#x2F;layoutç›®å½•ä¸‹ï¼Œç”¨æ¥æè¿°åº”ç”¨ç¨‹åºç•Œé¢å¸ƒå±€ã€‚ menuã€‚è¿™ç±»èµ„æºä»¥XMLæ–‡ä»¶ä¿å­˜åœ¨res&#x2F;menuç›®å½•ä¸‹ï¼Œç”¨æ¥æè¿°åº”ç”¨ç¨‹åºèœå•ã€‚ rawã€‚è¿™ç±»èµ„æºä»¥ä»»æ„æ ¼å¼çš„æ–‡ä»¶ä¿å­˜åœ¨res&#x2F;rawç›®å½•ä¸‹ï¼Œå®ƒä»¬å’Œassetsç±»èµ„æºä¸€æ ·ï¼Œéƒ½æ˜¯åŸè£…ä¸åŠ¨åœ°æ‰“åŒ…åœ¨apkæ–‡ä»¶ä¸­çš„ï¼Œä¸è¿‡å®ƒä»¬ä¼šè¢«èµ‹äºˆèµ„æºIDï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç¨‹åºä¸­é€šè¿‡IDæ¥è®¿é—®å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œå‡è®¾åœ¨res&#x2F;rawç›®å½•ä¸‹æœ‰ä¸€ä¸ªåç§°ä¸ºfilenameçš„æ–‡ä»¶ï¼Œå¹¶ä¸”å®ƒåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ï¼Œè¢«èµ‹äºˆçš„èµ„æºIDä¸ºR.raw.filenameï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥è®¿é—®å®ƒï¼š 12Resources res = getResources(); InputStream is = res.openRawResource(R.raw.filename); valuesã€‚è¿™ç±»èµ„æºä»¥XMLæ–‡ä»¶ä¿å­˜åœ¨res&#x2F;valuesç›®å½•ä¸‹ï¼Œç”¨æ¥æè¿°ä¸€äº›ç®€å•å€¼ï¼Œä¾‹å¦‚ï¼Œæ•°ç»„ã€é¢œè‰²ã€å°ºå¯¸ã€å­—ç¬¦ä¸²å’Œæ ·å¼å€¼ç­‰ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™å…­ç§ä¸åŒçš„å€¼åˆ†åˆ«ä¿å­˜åœ¨åç§°ä¸ºarrays.xmlã€colors.xmlã€dimens.xmlã€strings.xmlå’Œstyles.xmlæ–‡ä»¶ä¸­ã€‚ xmlã€‚è¿™ç±»èµ„æºä»¥XMLæ–‡ä»¶ä¿å­˜åœ¨res&#x2F;xmlç›®å½•ä¸‹ï¼Œä¸€èˆ¬å°±æ˜¯ç”¨æ¥æè¿°åº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ã€‚toc R.java public final class R { public static final class layout { public static int xxx &#x3D; 0xxxxxx; } â€¦ } resources.arscè®°å½•äº†æ‰€æœ‰çš„åº”ç”¨ç¨‹åºèµ„æºç›®å½•çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ¯ä¸€ä¸ªèµ„æºåç§°ã€ç±»å‹ã€å€¼ã€IDä»¥åŠæ‰€é…ç½®çš„ç»´åº¦ä¿¡æ¯ã€‚ ä½¿ç”¨èµ„æº ç¨‹åºä¸­é€šè¿‡R.resource_type.resource_nameæ¥å¼•ç”¨ç›¸å…³èµ„æº xmlæ–‡ä»¶ä¸­çš„ä½¿ç”¨æ ¼å¼ï¼š@[package:]type&#x2F;name aaptå‘½ä»¤ /e/Android/sdk/build-tools/28.0.2/aapt.exe package -f -M src/main/AndroidManifest.xml -I &quot;/e/Android/sdk/platforms/android-28/android.jar&quot; -S src/main/res -J gen -m -f å¦‚æœç¼–è¯‘å‡ºæ¥çš„æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œå¼ºåˆ¶è¦†ç›–ã€‚ -m ä½¿ç”Ÿæˆçš„åŒ…çš„ç›®å½•æ”¾åœ¨-Jå‚æ•°æŒ‡å®šçš„ç›®å½•ã€‚ -J æŒ‡å®šç”Ÿæˆçš„R.javaçš„è¾“å‡ºç›®å½• -S resæ–‡ä»¶å¤¹è·¯å¾„ -A assertæ–‡ä»¶å¤¹çš„è·¯å¾„ -M AndroidManifest.xmlçš„è·¯å¾„ -I æŸä¸ªç‰ˆæœ¬å¹³å°çš„android.jarçš„è·¯å¾„ -F å…·ä½“æŒ‡å®šapkæ–‡ä»¶çš„è¾“å‡º äºŒã€aidlé˜¶æ®µå¤„ç†.aidlæ–‡ä»¶ï¼Œç”Ÿæˆå¯¹åº”çš„Javaæ¥å£æ–‡ä»¶ aidlå‘½ä»¤ ä¸‰ã€Javaç¼–è¯‘é˜¶æ®µç¼–è¯‘R.javaã€Javaæ¥å£æ–‡ä»¶ã€Javaæºæ–‡ä»¶ï¼Œç”Ÿæˆ.classæ–‡ä»¶ javac javac -encoding UTF-8 -bootclasspath -d gen/out src/main/java/com/test/MainActivity.java -classpath å››ã€dexé˜¶æ®µé€šè¿‡dexå‘½ä»¤ï¼Œå°†.classæ–‡ä»¶å’Œç¬¬ä¸‰æ–¹åº“ä¸­çš„.classæ–‡ä»¶å¤„ç†ç”Ÿæˆclasses.dex dxå‘½ä»¤ dx --dex --output=gen/classes.dex gen/out/java/com/test/ äº”ã€apkbuilderé˜¶æ®µå°†classes.dexã€resources.arscã€resæ–‡ä»¶å¤¹(res&#x2F;rawèµ„æºè¢«åŸè£…ä¸åŠ¨åœ°æ‰“åŒ…è¿›APKä¹‹å¤–ï¼Œå…¶å®ƒçš„èµ„æºéƒ½ä¼šè¢«ç¼–è¯‘æˆ–è€…å¤„ç†)ã€Other Resources(assetsæ–‡ä»¶å¤¹)ã€AndroidManifest.xmlæ‰“åŒ…æˆapkæ–‡ä»¶ã€‚ æ³¨æ„ï¼š res&#x2F;rawå’Œassetsçš„ç›¸åŒç‚¹ï¼š ä¸¤è€…ç›®å½•ä¸‹çš„æ–‡ä»¶åœ¨æ‰“åŒ…åä¼šåŸå°ä¸åŠ¨çš„ä¿å­˜åœ¨apkåŒ…ä¸­ï¼Œä¸ä¼šè¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶ã€‚ res&#x2F;rawå’Œassetsçš„ä¸åŒç‚¹ï¼š res&#x2F;rawä¸­çš„æ–‡ä»¶ä¼šè¢«æ˜ å°„åˆ°R.javaæ–‡ä»¶ä¸­ï¼Œè®¿é—®çš„æ—¶å€™ç›´æ¥ä½¿ç”¨èµ„æºIDå³R.id.filenameï¼›assetsæ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ä¸ä¼šè¢«æ˜ å°„åˆ°R.javaä¸­ï¼Œè®¿é—®çš„æ—¶å€™éœ€è¦AssetManagerç±»ã€‚ res&#x2F;rawä¸å¯ä»¥æœ‰ç›®å½•ç»“æ„ï¼Œè€Œassetsåˆ™å¯ä»¥æœ‰ç›®å½•ç»“æ„ï¼Œä¹Ÿå°±æ˜¯assetsç›®å½•ä¸‹å¯ä»¥å†å»ºç«‹æ–‡ä»¶å¤¹ aapt aapt add package/res.apk classes.dex å…­ã€ç­¾åé˜¶æ®µå¯¹apkè¿›è¡Œç­¾å apksigner 12345678910111213141516171819202122åœ¨Android Studioä¸­ç‚¹å‡»èœå• Build-&gt;Generate signed apk... æ‰“åŒ…ç­¾åè¿‡ç¨‹ä¸­,å¯ä»¥çœ‹åˆ°ä¸¤ç§ç­¾åé€‰é¡¹ V1(Jar Signature) V2(Full APK Signature),åˆšå¼€å§‹å‡çº§ASçœ‹åˆ°è¿™ä¸ªæ‡µäº†,æ—¢ç„¶æ˜¯APK Signature,å°±æ”¾å¿ƒå·æ‡’é€‰äº†V2,ç»“æœå®‰è£…å¤±è´¥ï¼Ÿï¼Ÿï¼Ÿæ— å¥ˆ,åªèƒ½æŸ¥èµ„æ–™...ä»Android 7.0å¼€å§‹, è°·æ­Œå¢åŠ æ–°ç­¾åæ–¹æ¡ˆ V2 Scheme (APK Signature);ä½†Android 7.0ä»¥ä¸‹ç‰ˆæœ¬, åªèƒ½ç”¨æ—§ç­¾åæ–¹æ¡ˆ V1 scheme (JAR signing)V1ç­¾å: æ¥è‡ªJDK(jarsigner), å¯¹zipå‹ç¼©åŒ…çš„æ¯ä¸ªæ–‡ä»¶è¿›è¡ŒéªŒè¯, ç­¾ååè¿˜èƒ½å¯¹å‹ç¼©åŒ…ä¿®æ”¹(ç§»åŠ¨/é‡æ–°å‹ç¼©æ–‡ä»¶) å¯¹V1ç­¾åçš„apk/jarè§£å‹,åœ¨META-INFå­˜æ”¾ç­¾åæ–‡ä»¶(MANIFEST.MF, CERT.SF, CERT.RSA), å…¶ä¸­MANIFEST.MFæ–‡ä»¶ä¿å­˜æ‰€æœ‰æ–‡ä»¶çš„SHA1æŒ‡çº¹(é™¤äº†META-INFæ–‡ä»¶), ç”±æ­¤å¯çŸ¥: V1ç­¾åæ˜¯å¯¹å‹ç¼©åŒ…ä¸­å•ä¸ªæ–‡ä»¶ç­¾åéªŒè¯ V2ç­¾å: æ¥è‡ªGoogle(apksigner), å¯¹zipå‹ç¼©åŒ…çš„æ•´ä¸ªæ–‡ä»¶éªŒè¯, ç­¾ååä¸èƒ½ä¿®æ”¹å‹ç¼©åŒ…(åŒ…æ‹¬zipalign), å¯¹V2ç­¾åçš„apkè§£å‹,æ²¡æœ‰å‘ç°ç­¾åæ–‡ä»¶,é‡æ–°å‹ç¼©åV2ç­¾åå°±å¤±æ•ˆ, ç”±æ­¤å¯çŸ¥: V2ç­¾åæ˜¯å¯¹æ•´ä¸ªAPKç­¾åéªŒè¯ V2ç­¾åä¼˜ç‚¹å¾ˆæ˜æ˜¾: ç­¾åæ›´å®‰å…¨(ä¸èƒ½ä¿®æ”¹å‹ç¼©åŒ…) ç­¾åéªŒè¯æ—¶é—´æ›´çŸ­(ä¸éœ€è¦è§£å‹éªŒè¯),å› è€Œå®‰è£…é€Ÿåº¦åŠ å¿«æ³¨æ„: apksignerå·¥å…·é»˜è®¤åŒæ—¶ä½¿ç”¨V1å’ŒV2ç­¾å,ä»¥å…¼å®¹Android 7.0ä»¥ä¸‹ç‰ˆæœ¬ apksigner sign --ks key.jks --out package/app-release.apk package/app-unsigned-aligned.apk //æ£€æŸ¥ç­¾å apksigner verify app.apk ä¸ƒã€zipaligné˜¶æ®µå¯¹apkä¸­æœªå‹ç¼©çš„æ•°æ®è¿›è¡Œ4å­—èŠ‚å¯¹é½ï¼Œå¯¹é½åå°±å¯ä»¥ä½¿ç”¨mmapå‡½æ•°è¯»å–æ–‡ä»¶ï¼Œå¯ä»¥åƒè¯»å–å†…å­˜ä¸€æ ·å¯¹æ™®é€šæ–‡ä»¶è¿›è¡Œæ“ä½œã€‚å¦‚æœæ²¡æœ‰4å­—èŠ‚å¯¹é½ï¼Œå°±å¿…é¡»æ˜¾å¼çš„è¯»å–ï¼Œè¿™æ ·æ¯”è¾ƒç¼“æ…¢å¹¶ä¸”ä¼šè€—è´¹é¢å¤–çš„å†…å­˜ã€‚ zipalign zipalign 4 package/res.apk package/app-unsigned-aligned.apk","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"}]},{"title":"åŒ…ä½“ç§¯ä¼˜åŒ–","date":"2022-03-08T02:25:29.646Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/åŒ…ä½“ç§¯ä¼˜åŒ–/","text":"åˆ é™¤æ— ç”¨èµ„æºåº•å±‚åº“ä¼˜åŒ–æœ‰æ—¶å€™ï¼Œå¯èƒ½åªä½¿ç”¨äº†å¼€æºåº“ä¸­å¯¹æŸéƒ¨åˆ†åŠŸèƒ½ï¼Œå¯ä»¥å¯¹å…¶æºç è¿›è¡Œåˆ å‡é‡æ–°æ‰“åŒ…ã€‚ å›¾ç‰‡å‹ç¼©æ”¾å…¥é¡¹ç›®ä¹‹å‰ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼Œæ¯”å¦‚ä½¿ç”¨tinypng å›¾ç‰‡èµ„æºæ ¼å¼çš„é€‰æ‹©ä¼˜å…ˆé€‰æ‹©ä½¿ç”¨webpæ ¼å¼ Gradleé…ç½®minifyEnabled true //åˆ é™¤æ— ç”¨ä»£ç  shrinkResources true //åˆ é™¤æ— ç”¨èµ„æº åŠ¨æ€åŠ è½½èµ„æºå¯¹äºä¸€äº›ä¸æ˜¯å¯åŠ¨å°±è¦ä½¿ç”¨çš„èµ„æºï¼Œå¯ä»¥å°†å…¶æ”¾åˆ°æœåŠ¡å™¨ï¼ŒåšæˆåŠ¨æ€ä¸‹è½½ã€‚","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"Androidä¸­çš„é›†åˆ","date":"2022-03-08T02:25:29.646Z","path":"wiki/Android/æœªåˆ†ç±»/Androidä¸­çš„é›†åˆ/","text":"SparseArraySparseArrayç”±ä¸¤ä¸ªæ•°ç»„mKeyså’ŒmValueså­˜æ”¾æ•°æ®;å…¶ä¸­keyçš„ç±»å‹ä¸ºintå‹ï¼Œè¿™å°±æ˜¾å¾—SparseArrayæ¯”HashMapæ›´çœå†…å­˜ä¸€äº›ã€‚SparseArrayå­˜å‚¨çš„å…ƒç´ éƒ½æ˜¯æŒ‰å…ƒç´ çš„keyå€¼ä»å°åˆ°å¤§æ’åˆ—å¥½çš„ã€‚ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥åˆ¤æ–­å…ƒç´ çš„ä½ç½®ï¼Œæ•°æ®é‡è¾ƒå°æ—¶æ¯”HashMapæ›´å¿«ã€‚ SparseIntArrayï¼šå½“mapçš„ç»“æ„ä¸ºMap&lt;Integer,Integer&gt;çš„æ—¶å€™ä½¿ç”¨ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚ SparseBooleanArray: å½“mapçš„ç»“æ„ä¸ºMap&lt;Integer,Boolean&gt;çš„æ—¶å€™ä½¿ç”¨ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚ SparseLongArray: å½“mapçš„ç»“æ„ä¸ºMap&lt;Integer,Long&gt;çš„æ—¶å€™ä½¿ç”¨ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚ LongSparseArray: å½“mapçš„ç»“æ„ä¸ºMap&lt;Long,Value&gt;çš„æ—¶å€™ä½¿ç”¨ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚ 1234SparseArray&lt;String&gt; sparseArray = new SparseArray&lt;&gt;();sparseArray.put(1,&quot;A&quot;);sparseArray.put(2,&quot;B&quot;);Log.i(TAG, &quot;init: &quot;+sparseArray.toString()); ArrayMapArrayMapæ˜¯ä¸€ä¸ªé”®å€¼å¯¹æ˜ å°„çš„æ•°æ®ç»“æ„ï¼Œå®ƒè®¾è®¡ä¸Šæ›´å¤šçš„æ˜¯è€ƒè™‘å†…å­˜çš„ä¼˜åŒ–ï¼Œå†…éƒ¨æ˜¯ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„è¿›è¡Œæ•°æ®å­˜å‚¨ï¼Œä¸€ä¸ªæ•°ç»„è®°å½•keyçš„hashå€¼ï¼Œå¦å¤–ä¸€ä¸ªæ•°ç»„è®°å½•Valueå€¼ï¼Œå®ƒå’ŒSparseArrayä¸€æ ·ï¼Œä¹Ÿä¼šå¯¹keyä½¿ç”¨äºŒåˆ†æ³•è¿›è¡Œä»å°åˆ°å¤§æ’åºï¼ŒåŒºåˆ«æ˜¯ArrayMapçš„keyæ˜¯hashå€¼ã€‚ 1234ArrayMap&lt;String ,String&gt; arrayMap = new ArrayMap&lt;&gt;();arrayMap.put(&quot;a&quot;,&quot;A&quot;);arrayMap.put(&quot;b&quot;,&quot;B&quot;);Log.i(TAG, &quot;init: &quot;+arrayMap.toString()); å‚è€ƒ http://gityuan.com/2019/01/13/arraymap/","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æœªåˆ†ç±»","slug":"Android/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Android/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"Androidå®¢æˆ·ç«¯ç»éªŒè°ˆ","date":"2022-03-08T02:25:29.646Z","path":"wiki/Android/æœªåˆ†ç±»/Androidå®¢æˆ·ç«¯ç»éªŒè°ˆ/","text":"ä¸€äº›æŠ€å·§ å¼‚æ­¥çº¿ç¨‹åº”è¯¥åœ¨Activityã€Fragmentçš„ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶åœæ­¢æ‰ å‡å°‘ä¸å¿…è¦çš„çº¿ç¨‹åˆ‡æ¢ ä¸»çº¿ç¨‹ä¸­throwçš„å¼‚å¸¸è¦catch ä¸è¦åœ¨ä¸»çº¿ç¨‹åšè€—æ—¶çš„æ“ä½œ ä½¿ç”¨çº¿ç¨‹æ± ï¼Œä¸è¦æ¯æ¬¡æ“ä½œéƒ½new Threadã€‚é¢‘ç¹åˆ›å»ºçº¿ç¨‹æœ‰æ€§èƒ½æ¶ˆè€— å°½é‡å‡å°‘å¸ƒå±€å±‚çº§ï¼Œæµ‹é‡å¯èƒ½ä¼šè¿›è¡Œå¤šæ¬¡ å…³äºéšç§ç­–ç•¥ç”±äºæ”¿ç­–è¦æ±‚ï¼Œéšç§ç­–ç•¥éœ€è¦æ”¾åˆ°è¿è¡Œæ—¶å°±å¼¹å‡ºå¹¶ç”±ç”¨æˆ·ç¡®è®¤ã€‚è¿™é‡Œæœ‰ä¸ªç‚¹éœ€è¦æ³¨æ„ï¼Œåªæœ‰å½“ç”¨æˆ·ç¡®è®¤åæ‰å¯è¿›è¡Œåç»­çš„æ•°æ®è¯·æ±‚ã€‚ å‚è€ƒ https://developer.android.com/training/articles/perf-tips?hl=zh-cn","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æœªåˆ†ç±»","slug":"Android/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Android/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"WebViewç‹¬ç«‹è¿›ç¨‹","date":"2022-03-08T02:25:29.645Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/WebViewç‹¬ç«‹è¿›ç¨‹/","text":"å‚è€ƒ https://github.com/tianshaojie/android-library-web https://github.com/xudjx/webprogress æœ‰æ•ˆè§£å†³WebViewå¤šè¿›ç¨‹å´©æºƒ","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"native crash åˆ†æ","date":"2022-03-08T02:25:29.645Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/native crashåˆ†æ/","text":"Crashç±»å‹ï¼š Framework&#x2F;App Crashï¼šJavaå±‚å´©æºƒ Native Crashï¼šC&#x2F;C++å±‚å´©æºƒ Kernel Crashï¼šå†…æ ¸å´©æºƒ tombstoneæ–‡ä»¶çš„ç»„æˆéƒ¨åˆ†ï¼š Build fingerprint Crashed process and PIDS Terminated signal and fault address CPU registers Call stack Stack content of each call 12345678910111213--logversion:utraceaProcess Name: &#x27;com.feiteng.lieyou&#x27;Thread Name: &#x27;RenderThread&#x27;pid: 25031, tid: 25237 &gt;&gt;&gt; com.feiteng.lieyou &lt;&lt;&lt;killed by pid: 25031, comm: .feiteng.lieyou, uid: 10125.signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------r0 00000000 r1 00006295 r2 00000006 r3 00000008r4 c587c978 r5 00000006 r6 c587c920 r7 0000010cr8 bf249bc8 r9 00000000 10 bf249bbc fp bf249bb8ip 00000004 sp c587c3b0 lr eba21907 pc eba24188 cpsr 20070010d0 0000000000000000 d1 0000000000000000d2 0000000000000000 d3 0000000000000000 signalæŒ‡å®šå¼‚å¸¸ç±»å‹ã€‚å¦‚æœpidç­‰äºtidï¼Œåˆ™è¯´æ˜ç¨‹åºæ˜¯åœ¨ä¸»çº¿ç¨‹ä¸­å´©æºƒã€‚ ä¿¡å·ç±»å‹:è½¯ä¸­æ–­ä¿¡å·ï¼ˆsignalï¼Œåˆç®€ç§°ä¸ºä¿¡å·ï¼‰ç”¨æ¥é€šçŸ¥è¿›ç¨‹å‘ç”Ÿäº†äº‹ä»¶ã€‚è¿›ç¨‹ä¹‹é—´å¯ä»¥é€šè¿‡è°ƒç”¨killåº“å‡½æ•°å‘é€è½¯ä¸­æ–­ä¿¡å·ã€‚Linuxå†…æ ¸ä¹Ÿå¯èƒ½ç»™è¿›ç¨‹å‘é€ä¿¡å·ï¼Œé€šçŸ¥è¿›ç¨‹å‘ç”Ÿäº†æŸä¸ªäº‹ä»¶ï¼ˆä¾‹å¦‚å†…å­˜è¶Šç•Œï¼‰ã€‚ ä¿¡å·åªæ˜¯ç”¨æ¥é€šçŸ¥æŸè¿›ç¨‹å‘ç”Ÿäº†ä»€ä¹ˆäº‹ä»¶ï¼Œæ— æ³•ç»™è¿›ç¨‹ä¼ é€’ä»»ä½•æ•°æ®ï¼Œè¿›ç¨‹å¯¹ä¿¡å·çš„å¤„ç†æ–¹æ³•æœ‰ä¸‰ç§ï¼š ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ï¼Œå¿½ç•¥æŸä¸ªä¿¡å·ï¼Œå¯¹è¯¥ä¿¡å·ä¸åšä»»ä½•å¤„ç†ï¼Œå°±è±¡æœªå‘ç”Ÿè¿‡ä¸€æ ·ã€‚ ç¬¬äºŒç§æ˜¯è®¾ç½®ä¸­æ–­çš„å¤„ç†å‡½æ•°ï¼Œæ”¶åˆ°ä¿¡å·åï¼Œç”±è¯¥å‡½æ•°æ¥å¤„ç†ã€‚ ç¬¬ä¸‰ç§æ–¹æ³•æ˜¯ï¼Œå¯¹è¯¥ä¿¡å·çš„å¤„ç†é‡‡ç”¨ç³»ç»Ÿçš„é»˜è®¤æ“ä½œï¼Œå¤§éƒ¨åˆ†çš„ä¿¡å·çš„é»˜è®¤æ“ä½œæ˜¯ç»ˆæ­¢è¿›ç¨‹ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859//ä¿¡å·ç›‘å¬sighandler_t signal(int signum, sighandler_t handler);/*å‚æ•°signumè¡¨ç¤ºä¿¡å·çš„ç¼–å·ã€‚å‚æ•°handlerè¡¨ç¤ºä¿¡å·çš„å¤„ç†æ–¹å¼ï¼Œæœ‰ä¸‰ç§æƒ…å†µï¼š1ï¼‰SIG_IGNï¼šå¿½ç•¥å‚æ•°signumæ‰€æŒ‡çš„ä¿¡å·ã€‚2ï¼‰ä¸€ä¸ªè‡ªå®šä¹‰çš„å¤„ç†ä¿¡å·çš„å‡½æ•°ï¼Œä¿¡å·çš„ç¼–å·ä¸ºè¿™ä¸ªè‡ªå®šä¹‰å‡½æ•°çš„å‚æ•°ã€‚3ï¼‰SIG_DFLï¼šæ¢å¤å‚æ•°signumæ‰€æŒ‡ä¿¡å·çš„å¤„ç†æ–¹æ³•ä¸ºé»˜è®¤å€¼ã€‚*///å‘é€ä¿¡å·int kill(pid_t pid, int sig);/*killå‡½æ•°å°†å‚æ•°sigæŒ‡å®šçš„ä¿¡å·ç»™å‚æ•°pid æŒ‡å®šçš„è¿›ç¨‹ã€‚å‚æ•°pid æœ‰å‡ ç§æƒ…å†µï¼š1ï¼‰pid&gt;0 å°†ä¿¡å·ä¼ ç»™è¿›ç¨‹å·ä¸ºpid çš„è¿›ç¨‹ã€‚2ï¼‰pid=0 å°†ä¿¡å·ä¼ ç»™å’Œç›®å‰è¿›ç¨‹ç›¸åŒè¿›ç¨‹ç»„çš„æ‰€æœ‰è¿›ç¨‹ï¼Œå¸¸ç”¨äºçˆ¶è¿›ç¨‹ç»™å­è¿›ç¨‹å‘é€ä¿¡å·ï¼Œæ³¨æ„ï¼Œå‘é€ä¿¡å·è€…è¿›ç¨‹ä¹Ÿä¼šæ”¶åˆ°è‡ªå·±å‘å‡ºçš„ä¿¡å·ã€‚3ï¼‰pid=-1 å°†ä¿¡å·å¹¿æ’­ä¼ é€ç»™ç³»ç»Ÿå†…æ‰€æœ‰çš„è¿›ç¨‹ï¼Œä¾‹å¦‚ç³»ç»Ÿå…³æœºæ—¶ï¼Œä¼šå‘æ‰€æœ‰çš„ç™»å½•çª—å£å¹¿æ’­å…³æœºä¿¡æ¯ã€‚sigï¼šå‡†å¤‡å‘é€çš„ä¿¡å·ä»£ç ï¼Œå‡å¦‚å…¶å€¼ä¸ºé›¶åˆ™æ²¡æœ‰ä»»ä½•ä¿¡å·é€å‡ºï¼Œä½†æ˜¯ç³»ç»Ÿä¼šæ‰§è¡Œé”™è¯¯æ£€æŸ¥ï¼Œé€šå¸¸ä¼šåˆ©ç”¨sigå€¼ä¸ºé›¶æ¥æ£€éªŒæŸä¸ªè¿›ç¨‹æ˜¯å¦ä»åœ¨è¿è¡Œã€‚è¿”å›å€¼è¯´æ˜ï¼š æˆåŠŸæ‰§è¡Œæ—¶ï¼Œè¿”å›0ï¼›å¤±è´¥è¿”å›-1ï¼Œerrnoè¢«è®¾ä¸ºä»¥ä¸‹çš„æŸä¸ªå€¼ã€‚EINVALï¼šæŒ‡å®šçš„ä¿¡å·ç æ— æ•ˆï¼ˆå‚æ•° sig ä¸åˆæ³•ï¼‰ã€‚EPERMï¼šæƒé™ä¸å¤Ÿæ— æ³•ä¼ é€ä¿¡å·ç»™æŒ‡å®šè¿›ç¨‹ã€‚ESRCHï¼šå‚æ•° pid æ‰€æŒ‡å®šçš„è¿›ç¨‹æˆ–è¿›ç¨‹ç»„ä¸å­˜åœ¨ã€‚*/#define SIGHUP 1 // ç»ˆç«¯è¿æ¥ç»“æŸæ—¶å‘å‡º(ä¸ç®¡æ­£å¸¸æˆ–éæ­£å¸¸)#define SIGINT 2 // ç¨‹åºç»ˆæ­¢(ä¾‹å¦‚Ctrl-C)#define SIGQUIT 3 // ç¨‹åºé€€å‡º(Ctrl-\\)#define SIGILL 4 // æ‰§è¡Œäº†éæ³•æŒ‡ä»¤ï¼Œæˆ–è€…è¯•å›¾æ‰§è¡Œæ•°æ®æ®µï¼Œå †æ ˆæº¢å‡º#define SIGTRAP 5 // æ–­ç‚¹æ—¶äº§ç”Ÿï¼Œç”±debuggerä½¿ç”¨#define SIGABRT 6 // è°ƒç”¨abortå‡½æ•°ç”Ÿæˆçš„ä¿¡å·ï¼Œè¡¨ç¤ºç¨‹åºå¼‚å¸¸#define SIGIOT 6 // åŒä¸Šï¼Œæ›´å…¨ï¼ŒIOå¼‚å¸¸ä¹Ÿä¼šå‘å‡º#define SIGBUS 7 // éæ³•åœ°å€ï¼ŒåŒ…æ‹¬å†…å­˜åœ°å€å¯¹é½å‡ºé”™ï¼Œæ¯”å¦‚è®¿é—®ä¸€ä¸ª4å­—èŠ‚çš„æ•´æ•°, ä½†å…¶åœ°å€ä¸æ˜¯4çš„å€æ•°#define SIGFPE 8 // è®¡ç®—é”™è¯¯ï¼Œæ¯”å¦‚é™¤0ã€æº¢å‡º#define SIGKILL 9 // å¼ºåˆ¶ç»“æŸç¨‹åºï¼Œå…·æœ‰æœ€é«˜ä¼˜å…ˆçº§ï¼Œæœ¬ä¿¡å·ä¸èƒ½è¢«é˜»å¡ã€å¤„ç†å’Œå¿½ç•¥#define SIGUSR1 10 // æœªä½¿ç”¨ï¼Œä¿ç•™#define SIGSEGV 11 // éæ³•å†…å­˜æ“ä½œï¼Œä¸SIGBUSä¸åŒï¼Œä»–æ˜¯å¯¹åˆæ³•åœ°å€çš„éæ³•è®¿é—®ï¼Œæ¯”å¦‚è®¿é—®æ²¡æœ‰è¯»æƒé™çš„å†…å­˜ï¼Œå‘æ²¡æœ‰å†™æƒé™çš„åœ°å€å†™æ•°æ®#define SIGUSR2 12 // æœªä½¿ç”¨ï¼Œä¿ç•™#define SIGPIPE 13 // ç®¡é“ç ´è£‚ï¼Œé€šå¸¸åœ¨è¿›ç¨‹é—´é€šä¿¡äº§ç”Ÿ#define SIGALRM 14 // å®šæ—¶ä¿¡å·,#define SIGTERM 15 // ç»“æŸç¨‹åºï¼Œç±»ä¼¼æ¸©å’Œçš„SIGKILLï¼Œå¯è¢«é˜»å¡å’Œå¤„ç†ã€‚é€šå¸¸ç¨‹åºå¦‚æœç»ˆæ­¢ä¸äº†ï¼Œæ‰ä¼šå°è¯•SIGKILL#define SIGSTKFLT 16 // åå¤„ç†å™¨å †æ ˆé”™è¯¯#define SIGCHLD 17 // å­è¿›ç¨‹ç»“æŸæ—¶, çˆ¶è¿›ç¨‹ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å·ã€‚#define SIGCONT 18 // è®©ä¸€ä¸ªåœæ­¢çš„è¿›ç¨‹ç»§ç»­æ‰§è¡Œ#define SIGSTOP 19 // åœæ­¢è¿›ç¨‹,æœ¬ä¿¡å·ä¸èƒ½è¢«é˜»å¡,å¤„ç†æˆ–å¿½ç•¥#define SIGTSTP 20 // åœæ­¢è¿›ç¨‹,ä½†è¯¥ä¿¡å·å¯ä»¥è¢«å¤„ç†å’Œå¿½ç•¥#define SIGTTIN 21 // å½“åå°ä½œä¸šè¦ä»ç”¨æˆ·ç»ˆç«¯è¯»æ•°æ®æ—¶, è¯¥ä½œä¸šä¸­çš„æ‰€æœ‰è¿›ç¨‹ä¼šæ”¶åˆ°SIGTTINä¿¡å·#define SIGTTOU 22 // ç±»ä¼¼äºSIGTTIN, ä½†åœ¨å†™ç»ˆç«¯æ—¶æ”¶åˆ°#define SIGURG 23 // æœ‰ç´§æ€¥æ•°æ®æˆ–out-of-bandæ•°æ®åˆ°è¾¾socketæ—¶äº§ç”Ÿ#define SIGXCPU 24 // è¶…è¿‡CPUæ—¶é—´èµ„æºé™åˆ¶æ—¶å‘å‡º#define SIGXFSZ 25 // å½“è¿›ç¨‹ä¼å›¾æ‰©å¤§æ–‡ä»¶ä»¥è‡³äºè¶…è¿‡æ–‡ä»¶å¤§å°èµ„æºé™åˆ¶#define SIGVTALRM 26 // è™šæ‹Ÿæ—¶é’Ÿä¿¡å·. ç±»ä¼¼äºSIGALRM, ä½†æ˜¯è®¡ç®—çš„æ˜¯è¯¥è¿›ç¨‹å ç”¨çš„CPUæ—¶é—´.#define SIGPROF 27 // ç±»ä¼¼äºSIGALRM/SIGVTALRM, ä½†åŒ…æ‹¬è¯¥è¿›ç¨‹ç”¨çš„CPUæ—¶é—´ä»¥åŠç³»ç»Ÿè°ƒç”¨çš„æ—¶é—´#define SIGWINCH 28 // çª—å£å¤§å°æ”¹å˜æ—¶å‘å‡º#define SIGIO 29 // æ–‡ä»¶æè¿°ç¬¦å‡†å¤‡å°±ç»ª, å¯ä»¥å¼€å§‹è¿›è¡Œè¾“å…¥/è¾“å‡ºæ“ä½œ#define SIGPOLL SIGIO // åŒä¸Šï¼Œåˆ«ç§°#define SIGPWR 30 // ç”µæºå¼‚å¸¸#define SIGSYS 31 // éæ³•çš„ç³»ç»Ÿè°ƒç”¨ tombstone æ–‡ä»¶ä½äºè·¯å¾„ &#x2F;data&#x2F;tombstones&#x2F;ä¸‹ è°ƒç”¨æ ˆä¿¡æ¯è°ƒç”¨æ ˆä¿¡æ¯æ˜¯åˆ†æç¨‹åºå´©æºƒçš„éå¸¸é‡è¦çš„ä¸€ä¸ªä¿¡æ¯ï¼Œå®ƒä¸»è¦è®°å½•äº†ç¨‹åºåœ¨ Crash å‰çš„å‡½æ•°è°ƒç”¨å…³ç³»ä»¥åŠå½“å‰æ­£åœ¨æ‰§è¡Œå‡½æ•°çš„ä¿¡æ¯ï¼Œå®ƒå¯¹åº”çš„æ˜¯æˆ‘ä»¬tombstoneæ–‡ä»¶ä¸­ backtrace ç¬¦å·å¼€å§‹çš„ä¿¡æ¯ï¼Œä¸Šé¢ä¾‹å­ä¸­çš„ backtrace çš„ä¿¡æ¯å¦‚ä¸‹æ‰€ç¤º 12345678910backtrace: #00 pc 00006639 /system/lib/libui.so (android::Fence::waitForever(char const*)+41) #01 pc 00034b86 /system/lib/libsurfaceflinger.so #02 pc 0003229e /system/lib/libsurfaceflinger.so #03 pc 0002cb9c /system/lib/libgui.so (android::BufferQueue::ProxyConsumerListener::onFrameAvailable(android::BufferItem const&amp;)+652) #04 pc 000342f4 /system/lib/libgui.so (android::BufferQueueProducer::queueBuffer(int, android::IGraphicBufferProducer::QueueBufferInput const&amp;, android::IGraphicBufferProducer::QueueBufferOutput*)+2580) ##00 ç­‰è¡¨ç¤ºå‡½æ•°è°ƒç”¨æ ˆä¸­æ ˆå¸§çš„ç¼–å· pc åé¢çš„16è¿›åˆ¶æ•°è¡¨ç¤ºå½“å‰å‡½æ•°æ­£åœ¨æ‰§è¡Œè¯­å¥åœ¨å…±äº«é“¾æ¥åº“æˆ–å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½® æœ€åä¸€è¡Œè¡¨ç¤ºå½“å‰æŒ‡ä»¤åœ¨å“ªä¸ªæ–‡ä»¶ å¦‚ä½•å®šä½å´©æºƒä½ç½®å¸¸ç”¨å·¥å…·nm12æŸ¥çœ‹åŠ¨æ€åº“çš„ç¬¦å·è¡¨nm -D libName.so addr2line12345678910111213141516171819Usage: /Users/loneqd/Android/sdk/ndk-bundle/toolchains/aarch64-linux-android-4.9/prebuilt/darwin-x86_64/bin/aarch64-linux-android-addr2line [option(s)] [addr(s)] Convert addresses into line number/file name pairs. If no addresses are specified on the command line, they will be read from stdin The options are: @&lt;file&gt; Read options from &lt;file&gt; -a --addresses Show addresses -b --target=&lt;bfdname&gt; Set the binary file format -e --exe=&lt;executable&gt; Set the input file name (default is a.out) -i --inlines Unwind inlined functions -j --section=&lt;name&gt; Read section-relative offsets instead of addresses -p --pretty-print Make the output easier to read for humans -s --basenames Strip directory names -f --functions Show function names -C --demangle[=style] Demangle function names -h --help Display this information -v --version Display the program&#x27;s versionå®ä¾‹ï¼š(éœ€ä½¿ç”¨å¸¦symbolçš„åŠ¨æ€åº“)addr2line -f -e libui.so 00006639 _ZN7android5Fence11waitForeverE ndk-stackå°†å´©æºƒæ—¶çš„è°ƒç”¨å†…å­˜åœ°å€å’ŒC++ä»£ç å¯¹åº”èµ·æ¥ 123456789101112131415usage: ndk-stack.py [-h] -sym SYMBOL_DIR [-i INPUT]Symbolizes Android crashes.optional arguments: -h, --help show this help message and exit -sym SYMBOL_DIR, --sym SYMBOL_DIR directory containing unstripped .so files -i INPUT, -dump INPUT, --dump INPUT input filenameSee &lt;https://developer.android.com/ndk/guides/ndk-stack&gt;.symæŒ‡é¡¹ç›®ç¼–è¯‘æˆåŠŸä¹‹åï¼Œobjç›®å½•dumpæŒ‡å´©æºƒæ–‡ä»¶ xCrashçš„ä½¿ç”¨ https://github.com/iqiyi/xCrash nativeå¼‚å¸¸æ—¥å¿—æ–‡ä»¶çš„æ ¼å¼ 12345678910111213æ—¥å¿—åˆ†ä¸ºï¼š å¤´éƒ¨ä¿¡æ¯ï¼ˆä¸ºåº”ç”¨çš„åŸºæœ¬ä¿¡æ¯ï¼‰ å¼‚å¸¸ä¿¡å·éƒ¨åˆ†ã€‚ï¼ˆå“ªä¸ªå¼‚å¸¸ä¿¡å·å¯¼è‡´å¼‚å¸¸ï¼Œä¿¡å·å‚è§Linuxä¿¡å·ï¼‰ backtrace soåº“çš„ç¼–è¯‘ä¿¡æ¯ï¼Œbuild id å †æ ˆä¿¡æ¯ å†…å­˜ä¿¡æ¯ å†…å­˜æ˜ å°„ logcatæ—¥å¿—è¾“å‡ºéƒ¨åˆ†ï¼ŒåŒ…æ‹¬main,system,event appåº”ç”¨è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ å†…å­˜ä¿¡æ¯ appåº”ç”¨è¿›ç¨‹ä¿¡æ¯ å¼‚å¸¸å›è°ƒå¡«å……ä¿¡æ¯ ä¸€èˆ¬æ ¹æ®backtraceï¼Œå†ä½¿ç”¨addr2lineå‘½ä»¤å®šä½å…·ä½“çš„é”™è¯¯ä»£ç ä½ç½®ã€‚ å‚è€ƒ http://gityuan.com/2016/06/25/android-native-crash/ https://toutiao.io/posts/jflx6c/preview https://source.android.google.cn/devices/tech/debug/native-crash?hl=zh-cn http://www.droidsec.cn/%E5%B8%B8%E8%A7%81android-native%E5%B4%A9%E6%BA%83%E5%8F%8A%E9%94%99%E8%AF%AF%E5%8E%9F%E5%9B%A0/ https://github.com/iqiyi/xCrash https://source.android.com/devices/tech/debug xCrashæ—¥å¿—æ–‡ä»¶æ ¼å¼ ä»‹ç»addr2lineè°ƒè¯•å‘½ä»¤","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"å†…å­˜ç®¡ç†","date":"2022-03-08T02:25:29.645Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/å†…å­˜ç®¡ç†/","text":"æ¦‚è¿°æœ‰æ—¶å€™ï¼Œçº¿ä¸Šä¼šå‡ºç°ä¸€äº›â€è«åå…¶å¦™â€çš„bugï¼Œæ¯”å¦‚ç”¨æˆ·ç”¨çš„å¥½å¥½çš„ï¼Œçªç„¶å°±çˆ†å‡ºä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œè¿™ä¸ªå¼‚å¸¸çš„æç¤ºä¿¡æ¯å¦‚ä¸‹ï¼š 12java.lang.RuntimeException: Unable to start activityComponentInfo&#123;xxx.xxx.xxx/xxx.xxx.xxxActivity&#125;: java.lang.NullPointerException: Attempt to invoke interface method &#x27;xxx&#x27; on a null object reference çœ‹ä¸Šå»å¥½åƒå°±æ˜¯ä¸€èˆ¬çš„ç©ºæŒ‡é’ˆï¼Œä½†è¿™ä¸ªå¼‚å¸¸å‘ç”Ÿåœ¨å¯åŠ¨Activityçš„æ—¶å€™ã€‚ActivityThreadçš„performLaunchActivityæ–¹æ³•ç¡®å®æœ‰catch 123456789...&#125; catch (Exception e) &#123; if (!mInstrumentation.onException(activity, e)) &#123; throw new RuntimeException( &quot;Unable to start activity &quot; + component + &quot;: &quot; + e.toString(), e); &#125;&#125;... é‚£æ€ä¹ˆä¼šè£…æ ·å­å‘¢ï¼Ÿ åšäº†ä»¥ä¸‹åˆ†æï¼š çŒœæµ‹è¿™ä¸ªæ—¶å€™Appéƒ½è¢«å›æ”¶äº†ï¼Œåœ¨Applicationçš„onCreateæ–¹æ³•ä¸­æ·»åŠ æ—¥å¿—ï¼›åœ¨Activityçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ä¸­æ·»åŠ æ—¥å¿—ã€‚ ç­‰ç”¨æˆ·å†æ¬¡è§¦å‘æ—¶ï¼Œè·å–è¡Œä¸ºæ—¥å¿—ï¼ŒæŸ¥çœ‹ã€‚ æœç„¶ï¼Œè¿™ä¸ªæ—¶å€™Applicationè¢«é‡æ–°createäº†ï¼Œä¸”æ²¡æœ‰èµ°splashï¼Œç›´æ¥æ‰“å¼€äº†åŸæ¥çš„æŸä¸ªé¡µé¢ï¼Œè€Œè¿™ä¸ªé¡µé¢æ—¶éœ€è¦è·å–xxxæ•°æ®çš„ï¼Œä½†è¿™ä¸ªæ•°æ®éƒ½è¿˜æ²¡åˆå§‹åŒ–å‘¢ï¼ é—®é¢˜å®šä½äº†ï¼Œæ‰€ä»¥åªéœ€è¦åœ¨æ­¤ç§æƒ…å†µæ¢å¤éƒ½æ—¶å€™ï¼Œé‡æ–°åˆå§‹åŒ–ç›¸å…³æ•°æ®å³å¯ã€‚ é—®é¢˜è§£å†³åï¼Œå¾—æƒ³æƒ³ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§æƒ…å†µå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±è¯¥äº†è§£ä¸‹Androidæ˜¯å¦‚ä½•æ¥ç®¡ç†å†…å­˜çš„ã€‚ å…ˆçœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼šhttps://developer.android.com/topic/performance/memory-overview å†…å­˜ä¸è¶³ç®¡ç†Android æœ‰ä¸¤ç§å¤„ç†å†…å­˜ä¸è¶³æƒ…å†µçš„ä¸»è¦æœºåˆ¶ï¼šå†…æ ¸äº¤æ¢å®ˆæŠ¤è¿›ç¨‹å’Œä½å†…å­˜ç»ˆæ­¢å®ˆæŠ¤è¿›ç¨‹ã€‚ å†…æ ¸äº¤æ¢å®ˆæŠ¤è¿›ç¨‹kswapdæ˜¯ç”¨æ¥åšè™šæ‹Ÿç¼“å­˜çš„è¿›ç¨‹ï¼Œå½“è®¾å¤‡ä¸Šçš„å¯ç”¨å†…å­˜ä¸è¶³æ—¶ï¼Œè¯¥å®ˆæŠ¤è¿›ç¨‹å°†å˜ä¸ºæ´»åŠ¨çŠ¶æ€ã€‚Linux å†…æ ¸è®¾æœ‰å¯ç”¨å†…å­˜ä¸Šä¸‹é™é˜ˆå€¼ã€‚å½“å¯ç”¨å†…å­˜é™è‡³ä¸‹é™é˜ˆå€¼ä»¥ä¸‹æ—¶ï¼Œkswapd å¼€å§‹å›æ”¶å†…å­˜ã€‚å½“å¯ç”¨å†…å­˜è¾¾åˆ°ä¸Šé™é˜ˆå€¼æ—¶ï¼Œkswapd åœæ­¢å›æ”¶å†…å­˜ã€‚ ä½å†…å­˜ç»ˆæ­¢å®ˆæŠ¤è¿›ç¨‹å¾ˆå¤šæ—¶å€™ï¼Œkswapd ä¸èƒ½ä¸ºç³»ç»Ÿé‡Šæ”¾è¶³å¤Ÿçš„å†…å­˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šä½¿ç”¨ onTrimMemory() é€šçŸ¥åº”ç”¨å†…å­˜ä¸è¶³ï¼Œåº”è¯¥å‡å°‘å…¶åˆ†é…é‡ã€‚å¦‚æœè¿™è¿˜ä¸å¤Ÿï¼Œå†…æ ¸ä¼šå¼€å§‹ç»ˆæ­¢è¿›ç¨‹ä»¥é‡Šæ”¾å†…å­˜ã€‚å®ƒä¼šä½¿ç”¨ä½å†…å­˜ç»ˆæ­¢å®ˆæŠ¤è¿›ç¨‹ (LMK) æ¥æ‰§è¡Œæ­¤æ“ä½œã€‚ LMK ä½¿ç”¨ä¸€ä¸ªåä¸º oom_adj_score çš„â€œå†…å­˜ä¸è¶³â€åˆ†å€¼æ¥ç¡®å®šæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œä»¥æ­¤å†³å®šè¦ç»ˆæ­¢çš„è¿›ç¨‹ã€‚æœ€é«˜å¾—åˆ†çš„è¿›ç¨‹æœ€å…ˆè¢«ç»ˆæ­¢ã€‚åå°åº”ç”¨æœ€å…ˆè¢«ç»ˆæ­¢ï¼Œç³»ç»Ÿè¿›ç¨‹æœ€åè¢«ç»ˆæ­¢ã€‚ä¸‹è¡¨åˆ—å‡ºäº†ä»é«˜åˆ°ä½çš„ LMK è¯„åˆ†ç±»åˆ«ã€‚è¯„åˆ†æœ€é«˜çš„ç±»åˆ«ï¼Œå³ç¬¬ä¸€è¡Œä¸­çš„é¡¹ç›®å°†æœ€å…ˆè¢«ç»ˆæ­¢ï¼š åå°åº”ç”¨ï¼šä¹‹å‰è¿è¡Œè¿‡ä¸”å½“å‰ä¸å¤„äºæ´»åŠ¨çŠ¶æ€çš„åº”ç”¨ã€‚LMK å°†é¦–å…ˆä»å…·æœ‰æœ€é«˜ oom_adj_score çš„åº”ç”¨å¼€å§‹ç»ˆæ­¢åå°åº”ç”¨ã€‚ ä¸Šä¸€ä¸ªåº”ç”¨ï¼šæœ€è¿‘ç”¨è¿‡çš„åå°åº”ç”¨ã€‚ä¸Šä¸€ä¸ªåº”ç”¨æ¯”åå°åº”ç”¨å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼ˆå¾—åˆ†æ›´ä½ï¼‰ï¼Œå› ä¸ºç›¸æ¯”æŸä¸ªåå°åº”ç”¨ï¼Œç”¨æˆ·æ›´æœ‰å¯èƒ½åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåº”ç”¨ã€‚ ä¸»å±å¹•åº”ç”¨ï¼šè¿™æ˜¯å¯åŠ¨å™¨åº”ç”¨ã€‚ç»ˆæ­¢è¯¥åº”ç”¨ä¼šä½¿å£çº¸æ¶ˆå¤±ã€‚ æœåŠ¡ï¼šæœåŠ¡ç”±åº”ç”¨å¯åŠ¨ï¼Œå¯èƒ½åŒ…æ‹¬åŒæ­¥æˆ–ä¸Šä¼ åˆ°äº‘ç«¯ã€‚ å¯è§‰å¯Ÿçš„åº”ç”¨ï¼šç”¨æˆ·å¯é€šè¿‡æŸç§æ–¹å¼å¯Ÿè§‰åˆ°çš„éå‰å°åº”ç”¨ï¼Œä¾‹å¦‚è¿è¡Œä¸€ä¸ªæ˜¾ç¤ºå°ç•Œé¢çš„æœç´¢è¿›ç¨‹æˆ–å¬éŸ³ä¹ã€‚ å‰å°åº”ç”¨ï¼šå½“å‰æ­£åœ¨ä½¿ç”¨çš„åº”ç”¨ã€‚ç»ˆæ­¢å‰å°åº”ç”¨çœ‹èµ·æ¥å°±åƒæ˜¯åº”ç”¨å´©æºƒäº†ï¼Œå¯èƒ½ä¼šå‘ç”¨æˆ·æç¤ºè®¾å¤‡å‡ºäº†é—®é¢˜ã€‚ æŒä¹…æ€§ï¼ˆæœåŠ¡ï¼‰ï¼šè¿™äº›æ˜¯è®¾å¤‡çš„æ ¸å¿ƒæœåŠ¡ï¼Œä¾‹å¦‚ç”µè¯å’Œ WLANã€‚ ç³»ç»Ÿï¼šç³»ç»Ÿè¿›ç¨‹ã€‚è¿™äº›è¿›ç¨‹è¢«ç»ˆæ­¢åï¼Œæ‰‹æœºå¯èƒ½çœ‹èµ·æ¥å³å°†é‡æ–°å¯åŠ¨ã€‚ åŸç”Ÿï¼šç³»ç»Ÿä½¿ç”¨çš„æä½çº§åˆ«çš„è¿›ç¨‹ï¼ˆä¾‹å¦‚ï¼Œkswapdï¼‰ã€‚ ç»éªŒæ€»ç»“ä¸ºäº†èƒ½è®©Appå°½é‡å°‘å‡ºé”™ï¼Œé‡‡å–äº†ä»¥ä¸‹çš„ä¸€äº›åŠæ³•ï¼š æ·»åŠ Activityå›è°ƒï¼Œåˆ¤æ–­å½“å‰æ˜¯å¦æ˜¯â€å¼‚å¸¸â€å¯åŠ¨ï¼Œå¦‚æœæ˜¯ï¼Œè¿›è¡Œç›¸åº”å¤„ç†ï¼› ç›‘å¬lowmemoryï¼Œé‡Šæ”¾è°ƒå¯ä»¥é‡Šæ”¾çš„å†…å­˜ï¼Œæ¯”å¦‚Glideçš„èµ„æºå ç”¨ï¼› å¹³å¸¸å†™ä»£ç æ—¶æ³¨æ„ä¸€äº›å†™æ³•ï¼Œæ¯”å¦‚ï¼š ä¸è¦åœ¨forå¾ªç¯ã€onDrawä¸­é¢‘ç¹åˆ›å»ºå¯¹è±¡ å°½é‡ä½¿ç”¨Androidä¼˜åŒ–è¿‡çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚SparseArray å‚è€ƒ https://developer.android.com/topic/performance/memory-overview Android å¼€å‘ï¼Œè·³ä¸è¿‡çš„å†…å­˜ç®¡ç†","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"å†…å­˜æº¢å‡ºåˆ†æ","date":"2022-03-08T02:25:29.645Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜/å†…å­˜æº¢å‡ºåˆ†æ/","text":"æ¦‚è¿°OOM(Out of Memory)å³å†…å­˜æº¢å‡ºï¼Œæ˜¯å› ä¸ºåº”ç”¨æ‰€éœ€è¦åˆ†é…çš„å†…å­˜è¶…è¿‡ç³»ç»Ÿå¯¹åº”ç”¨å†…å­˜çš„é˜ˆå€¼ï¼Œè€ŒæŠ›å‡ºjava.lang.OutOfMemoryErroré”™è¯¯ã€‚ å…¶æ ¹æœ¬åŸå› æ˜¯å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸä¸ä¸€è‡´ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ å†…å­˜æŠ–åŠ¨å†…å­˜æŠ–åŠ¨æ˜¯æŒ‡åœ¨çŸ­æ—¶é—´å†…æœ‰å¤§é‡çš„å¯¹è±¡è¢«åˆ›å»ºæˆ–è€…è¢«å›æ”¶çš„ç°è±¡ï¼Œä¸»è¦æ˜¯å¾ªç¯ä¸­å¤§é‡åˆ›å»ºã€å›æ”¶å¯¹è±¡ã€‚ å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºçš„åŒºåˆ« å†…å­˜æº¢å‡º æ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜æ—¶ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ä¾›å…¶ä½¿ç”¨ï¼Œå‡ºç°out of memoryã€‚ å†…å­˜æ³„æ¼ æ˜¯æŒ‡ç¨‹åºåœ¨ç”³è¯·å†…å­˜åï¼Œæ— æ³•é‡Šæ”¾å·²ç”³è¯·çš„å†…å­˜ç©ºé—´ã€‚å†…å­˜æ³„æ¼æœ€ç»ˆä¼šå¯¼è‡´å†…å­˜æº¢å‡ºã€‚ æ ˆå†…å­˜æº¢å‡ºå’Œå †å†…å­˜æº¢å‡ºå †å…§å­˜æº¢å‡º newå‡ºæ¥çš„å¯¹è±¡æ‰€éœ€å†…å­˜ä¸å¤Ÿäº† æ ˆå…§å­˜æº¢å‡º æŠ›å‡ºâ€StackOverflowErrorâ€çš„åŸå› ï¼šçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºJVMæ‰€å…è®¸çš„æœ€å¤§æ·±åº¦ã€‚æ‰€ä»¥æ ¹æœ¬åŸå› æ˜¯ï¼ŒæŸä¸ªçº¿ç¨‹æ‰€éœ€çš„æ ˆå†…å­˜è¶…è¿‡äº†JVMçš„é™åˆ¶ï¼Œè€Œæ­¤æ—¶ç‰©ç†å†…å­˜ä»æœ‰è¶³å¤Ÿçš„å¯ç”¨ç©ºé—´ã€‚å‡ºç°çš„æƒ…å†µï¼šæ–¹æ³•ä¸­æ— é™é€’å½’è°ƒç”¨ã€‚ æŠ›å‡ºâ€OutOfMemoryErrorâ€çš„åŸå› ï¼šæ— æ³•ï¼ˆå‘æ“ä½œç³»ç»Ÿï¼‰ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ç”¨æ¥æ‹“å±•æ ˆã€‚æ ¹æœ¬åŸå› æ˜¯ï¼Œï¼ˆæ“ä½œç³»ç»Ÿç®¡ç†çš„ï¼‰ç‰©ç†å†…å­˜å·²æ²¡æœ‰è¶³å¤Ÿçš„å¯ç”¨å†…å­˜åˆ†é…ç»™JVMçš„æ ˆä½¿ç”¨ã€‚å‡ºç°çš„æƒ…å†µï¼šæ–¹æ³•ä¸­ä¸åœçš„åˆ›å»ºçº¿ç¨‹ã€‚ å¯èƒ½å‡ºç°OOMçš„åœºæ™¯é™æ€å˜é‡å¯¼è‡´çš„å†…å­˜æ³„æ¼æè¿°æ¯”å¦‚æŸä¸ªé™æ€å˜é‡æŒæœ‰Activityï¼Œåˆ™å½“Activityç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ä¸ä¼šè¢«é‡Šæ”¾ã€‚ 1234567Static Vector v = new Vector(10);//é™æ€å˜é‡çš„ç”Ÿå‘½å‘¨æœŸè·Ÿåº”ç”¨ä¸€è‡´for (int i = 1; i&lt;100; i++)&#123; Object o = new Object(); v.add(o); o = null;&#125; è§£å†³åŠæ³•ï¼šåŠæ—¶é‡Šæ”¾é™æ€å˜é‡ å•ä¾‹æ¨¡å¼å¯¼è‡´çš„å†…å­˜æ³„æ¼æè¿°å•ä¾‹æŒæœ‰Activity è§£å†³åŠæ³•å¦‚æœéœ€è¦æŒæœ‰Contextï¼Œåˆ™ä½¿ç”¨ApplicationContext å±æ€§åŠ¨ç”»å¯¼è‡´çš„å†…å­˜æ³„æ¼è§£å†³åŠæ³•è§†å›¾é”€æ¯æ—¶åœæ­¢åŠ¨ç”» forå¾ªç¯ä¸­ä¸åœçš„åˆ›å»ºå±€éƒ¨å˜é‡éé™æ€å†…éƒ¨ç±»ï¼ˆåŒ…æ‹¬åŒ¿åå†…éƒ¨ç±»ï¼‰é»˜è®¤ä¼šæŒæœ‰å¤–éƒ¨ç±»çš„å¼•ç”¨å½“éé™æ€å†…éƒ¨ç±»ä¼šæŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨ï¼Œå¦‚æœåœ¨å†…éƒ¨ç±»ä¸­ï¼Œå°†å¤–éƒ¨ç±»çš„å¼•ç”¨ä¼ å…¥åˆ°å¦å¤–çš„çº¿ç¨‹ä¸­ï¼Œåˆ™å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ã€‚ æœªå–æ¶ˆæ³¨å†Œæˆ–å›è°ƒå¯¼è‡´çš„å†…å­˜æ³„æ¼æ¯”å¦‚åœ¨Activityä¸­æ³¨å†Œå¹¿æ’­ï¼Œå¦‚æœActivityé”€æ¯åä¸å–æ¶ˆæ³¨å†Œï¼Œé‚£ä¹ˆè¿™ä¸ªå¹¿æ’­å°±ä¼šä¸€ç›´å­˜åœ¨ç³»ç»Ÿä¸­ ä¸€äº›ç»éªŒ åœ¨onDestroyä¸­æ‰‹åŠ¨é‡Šæ”¾Viewä¸Šçš„èµ„æº å°½é‡é¿å…ä½¿ç”¨é™æ€å˜é‡ å¼‚å¸¸çŠ¶æ€ï¼Œé™æ€å˜é‡ä¼šè¢«å›æ”¶ï¼Œç³»ç»Ÿå¯åŠ¨æ¢å¤åˆ°å½“å‰é¡µé¢æ—¶ç›¸åº”å€¼å¯èƒ½æ²¡ç©º å¯èƒ½ä¼šé€ æˆæŸäº›å¯¹è±¡æ²¡æœ‰é‡Šæ”¾ å…œåº•ç­–ç•¥ åœ¨Activityã€Fragmentçš„onDestroyæ—¶ï¼Œæ‰‹åŠ¨é‡Šæ”¾ä¸€ä¸‹èµ„æºï¼Œé™ä½å†…å­˜æ³„æ¼æ—¶å†…å­˜çš„å ç”¨ã€‚ 123456789101112131415private void traverse(ViewGroup root) &#123; final int childCount = root.getChildCount(); for (int i = 0; i &lt; childCount; ++i) &#123; final View child = root.getChildAt(i); if (child instanceof ViewGroup) &#123; child.setBackground(null); traverse((ViewGroup) child); &#125; else &#123; if (child != null) &#123; child.setBackground(null); &#125; if (child instanceof ImageView) &#123; ((ImageView) child).setImageDrawable(null); &#125; else if (child instanceof EditText) &#123; ((EditText) child).cleanWatchers(); &#125; &#125; &#125;&#125; ç›‘æ§å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œåˆ°è¾¾åˆ°æŸä¸ªé˜ˆå€¼æ—¶ï¼Œæ‰‹åŠ¨é‡Šæ”¾èµ„æºã€‚ 1234567891011121314151617181920212223242526272829303132private static Handler lowMemoryMonitorHandler;private static final int MEMORY_MONITOR_INTERVAL = 1000 * 60;/** * å¼€å¯ä½å†…å­˜ç›‘æµ‹ï¼Œå¦‚æœä½å†…å­˜äº†ï¼Œä½œå‡ºç›¸åº”çš„ååº” */public static void startMonitorLowMemory() &#123; HandlerThread thread = new HandlerThread(&quot;thread_monitor_low_memory&quot;); thread.start(); lowMemoryMonitorHandler = new Handler(thread.getLooper()); lowMemoryMonitorHandler.postDelayed(releaseMemoryCacheRunner, MEMORY_MONITOR_INTERVAL);&#125;/** * ä½å†…å­˜æ—¶é‡Šæ”¾å†…å­˜èµ„æº * å¦‚æœå·²ç”¨å†…å­˜è¾¾åˆ°äº†æ€»çš„ 80%æ—¶ï¼Œå°±æ¸…ç©ºç¼“å­˜ */private static Runnable releaseMemoryCacheRunner = new Runnable() &#123; @Override public void run() &#123; long alreadyUsedSize = Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory(); long maxSize = Runtime.getRuntime().maxMemory(); if (Double.compare(alreadyUsedSize, maxSize * 0.8) == 1) &#123; BitmapUtil.clearMemoryCaches(); &#125; lowMemoryMonitorHandler.postDelayed(releaseMemoryCacheRunner, MEMORY_MONITOR_INTERVAL); &#125;&#125;; å‚è€ƒ","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"OOMä¸“é¢˜","slug":"Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/OOM%E4%B8%93%E9%A2%98/"}]},{"title":"åŠ¨ç”»é€ æˆçš„OOMçš„å¤„ç†æ–¹å¼","date":"2022-03-08T02:25:29.645Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜/åŠ¨ç”»é€ æˆçš„OOMçš„å¤„ç†æ–¹å¼/","text":"è§£å†³åŠæ³•åœ¨è§†å›¾é”€æ¯çš„æ—¶å€™ï¼Œè¦cancelæ‰åŠ¨ç”» å‚è€ƒ","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"OOMä¸“é¢˜","slug":"Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/OOM%E4%B8%93%E9%A2%98/"}]},{"title":"Apkæ‰“åŒ…æµç¨‹","date":"2022-03-08T02:25:29.644Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/APKæ‰“åŒ…æµç¨‹/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"Bitmapé€ æˆçš„OOMçš„å¤„ç†æ–¹å¼","date":"2022-03-08T02:25:29.644Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜/Bitmapé€ æˆçš„OOMçš„å¤„ç†æ–¹å¼/","text":"Bitmapæ€»ç»“Androidä¸­çš„å›¾ç‰‡æ˜¯ä»¥Bitmapæ–¹å¼å­˜åœ¨çš„ï¼Œç»˜åˆ¶çš„æ—¶å€™ä¹Ÿæ˜¯Bitmapï¼Œå¯¹å†…å­˜çš„å½±å“è¿˜æ˜¯å¾ˆå¤§çš„ã€‚ Bitmapæ‰€å ç”¨å†…å­˜çš„è®¡ç®—å…¬å¼ï¼šå›¾ç‰‡é•¿åº¦ x å›¾ç‰‡å®½åº¦ x åƒç´ ç‚¹çš„å­—èŠ‚æ•° å›¾ç‰‡å¸¸ç”¨çš„å‹ç¼©æ ¼å¼ ALPHA_8ï¼šæ¯ä¸ªåƒç´ éƒ½å­˜å‚¨ä¸ºä¸€ä¸ªåŠé€æ˜é€šé“ ARGB_4444ï¼šAPI 13ä¸­å·²å¼ƒç”¨ ARGB_8888ï¼šæ¯ä¸ªåƒç´ å­˜å‚¨åœ¨4ä¸ªå­—èŠ‚ RGB_565ï¼šæ¯ä¸ªåƒç´ å­˜å‚¨åœ¨2ä¸ªå­—èŠ‚ä¸­ï¼Œåªæœ‰RGBé€šé“è¢«ç¼–ç ï¼›çº¢è‰²ä»¥5ä½ç²¾åº¦å­˜å‚¨ï¼Œç»¿è‰²ä»¥6ä½ç²¾åº¦å­˜å‚¨ï¼Œè“è‰²ä»¥5ä½ç²¾åº¦å­˜å‚¨ã€‚ å•ä¸ªåƒç´ ç‚¹çš„å­—èŠ‚æ•° ALPHA_8ï¼šè¡¨ç¤º8ä½Alphaä½å›¾ï¼Œå³é€æ˜åº¦å 8ä¸ªä½ï¼Œä¸€ä¸ªåƒç´ ç‚¹å ç”¨1ä¸ªå­—èŠ‚ï¼Œä»–æ²¡æœ‰é¢œè‰²ï¼Œåªæœ‰é€æ˜åº¦ã€‚ ARGB_4444ï¼šè¡¨ç¤º16ä½çš„ARGBä½å›¾ï¼Œå³A&#x3D;4ï¼ŒR&#x3D;4ï¼ŒG&#x3D;4ï¼ŒB&#x3D;4ï¼Œä¸€ä¸ªåƒç´ ç‚¹å 4+4+4+4&#x3D;16ä½ï¼Œ2ä¸ªå­—èŠ‚ã€‚ ARGB_8888ï¼šè¡¨ç¤º32ä½ARGBä½å›¾ï¼Œå³A&#x3D;8ï¼ŒR&#x3D;8ï¼ŒG&#x3D;8ï¼ŒB&#x3D;8ï¼Œä¸€ä¸ªåƒç´ ç‚¹å 8+8+8+8&#x3D;32ä½ï¼Œ4ä¸ªå­—èŠ‚ã€‚ RGB_565ï¼šè¡¨ç¤º16ä½RGBä½å›¾ï¼Œå³R&#x3D;5ï¼ŒG&#x3D;6ï¼ŒB&#x3D;5ï¼Œæ²¡æœ‰é€æ˜åº¦ï¼Œä¸€ä¸ªåƒç´ ç‚¹å ç”¨5+6+5&#x3D;16ä½ï¼Œ2ä¸ªå­—èŠ‚ã€‚ å¸¸ç”¨å‹ç¼©æ–¹æ³• è´¨é‡å‹ç¼© 12345private void compressQuality() &#123; Bitmap bm = BitmapFactory.decodeResource(getResources(),R.drawable.test); mSrcSize = bm.getByteCount() + &quot;byte&quot;; ByteArrayOutputStream bos = new ByteArrayOutputStream(); bm.compress(Bitmap.CompressFormat.JPEG, 100, bos); byte[] bytes = bos.toByteArray(); mSrcBitmap = BitmapFactory.decodeByteArray(bytes, 0,bytes.length);&#125; è´¨é‡å‹ç¼©ä¸ä¼šå‡å°‘å›¾ç‰‡çš„åƒç´ ï¼Œå®ƒæ˜¯åœ¨ä¿æŒåƒç´ çš„å‰æä¸‹æ”¹å˜å›¾ç‰‡çš„ä½æ·±å’Œé€æ˜åº¦æ¥è¾¾åˆ°å‹ç¼©çš„ç›®çš„ï¼›å›¾ç‰‡çš„é•¿ã€å®½ï¼Œåƒç´ ä¸æ”¹å˜ï¼Œå ç”¨çš„å†…å­˜æ˜¯ä¸ä¼šå˜çš„ã€‚ è´¨é‡å‹ç¼©å¯¹pngæ— æ•ˆï¼Œpngæ˜¯æ— æŸå‹ç¼©ã€‚ é‡‡æ ·ç‡å‹ç¼© 1234private void compressSampling() &#123; BitmapFactory.Options options = new BitmapFactory.Options(); options.inSampleSize = 2; mSrcBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.test, options);&#125; é‡‡æ ·ç‡å‹ç¼©å…¶åŸç†æ˜¯ç¼©æ”¾ bitamp çš„å°ºå¯¸ï¼Œé€šè¿‡è°ƒèŠ‚å…¶ inSampleSize å‚æ•°ï¼Œæ¯”å¦‚è°ƒèŠ‚ä¸º 2ï¼Œå®½é«˜ä¼šä¸ºåŸæ¥çš„ 1&#x2F;2ï¼Œå†…å­˜å˜å›åŸæ¥çš„ 1&#x2F;4. ç¼©æ”¾å‹ç¼© 1234567private void compressMatrix() &#123; Matrix matrix = new Matrix(); matrix.setScale(0.5f, 0.5f); Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.test); mSrcBitmap = Bitmap.createBitmap(bm, 0, 0, bm.getWidth(), bm.getHeight(), matrix, true); bm = null; &#125; æ”¾ç¼©æ³•å‹ç¼©ä½¿ç”¨çš„æ˜¯é€šè¿‡çŸ©é˜µå¯¹å›¾ç‰‡è¿›è¡Œè£å‰ªï¼Œä¹Ÿæ˜¯é€šè¿‡ç¼©æ”¾å›¾ç‰‡å°ºå¯¸ï¼Œæ¥è¾¾åˆ° å‹ç¼©å›¾ç‰‡çš„æ•ˆæœï¼Œå’Œé‡‡æ ·ç‡çš„åŸç†ä¸€æ ·ã€‚ RGB_565å‹ç¼© 12345private void compressRGB565() &#123; BitmapFactory.Options options = new BitmapFactory.Options(); options.inPreferredConfig = Bitmap.Config.RGB_565; mSrcBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.test, options);&#125; è¿™æ˜¯é€šè¿‡å‹ç¼©åƒç´ å ç”¨çš„å†…å­˜æ¥è¾¾åˆ°å‹ç¼©çš„æ•ˆæœï¼Œç›¸æ¯” ARGB_8888 å°†èŠ‚çœä¸€åŠçš„å†…å­˜å¼€é”€ã€‚ createScaledBitmap 12345private void compressScaleBitmap() &#123; Bitmap bm = BitmapFactory.decodeResource(getResources(), R.drawable.test); mSrcBitmap = Bitmap.createScaledBitmap(bm, 600, 900, true); bm = null; &#125; å°†å›¾ç‰‡çš„å¤§å°å‹ç¼©æˆç”¨æˆ·çš„æœŸæœ›å¤§å°ï¼Œæ¥å‡å°‘å ç”¨å†…å­˜ã€‚ å‚è€ƒ","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"OOMä¸“é¢˜","slug":"Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/OOM%E4%B8%93%E9%A2%98/"}]},{"title":"RePlugin","date":"2022-03-08T02:25:29.643Z","path":"wiki/Android/å¼€æºåº“/RePlugin/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"RxAndroid","date":"2022-03-08T02:25:29.643Z","path":"wiki/Android/å¼€æºåº“/RxAndroid/","text":"Schedulerså‚è€ƒ","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"Small","date":"2022-03-08T02:25:29.643Z","path":"wiki/Android/å¼€æºåº“/Small/","text":"æ’ä»¶åŒ–æ¡†æ¶ https://github.com/wequick/Small","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"WMRouter","date":"2022-03-08T02:25:29.643Z","path":"wiki/Android/å¼€æºåº“/WMRouter/","text":"æ¦‚è¿°WMRouterä¸»è¦æä¾›URIåˆ†å‘ã€ServiceLoaderä¸¤å¤§åŠŸèƒ½ã€‚åŸºäºæ³¨è§£çš„æ–¹å¼æ¥å®ç°è§£è€¦ã€‚ æä¾›äº†ä»¥ä¸‹æ ‡æ³¨ï¼š RouterPageï¼šæŒ‡å®šä¸€ä¸ªå†…éƒ¨é¡µé¢è·³è½¬ï¼Œæ­¤æ³¨è§£å¯ä»¥ç”¨åœ¨Activityå’ŒUriHandlerä¸Š RouterProviderï¼šæŒ‡å®šä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œç”¨äºæ„é€ Serviceã€‚æä¾›æ„é€ å¯¹è±¡çš„æ›¿ä»£æ–¹æ³•ï¼Œæ¯”å¦‚getInstanceã€‚ RouterRegexï¼šæŒ‡å®šä¸€ä¸ªæ­£åˆ™åŒ¹é…çš„è·³è½¬ï¼Œæ­¤æ³¨è§£å¯ä»¥ç”¨åœ¨Activityå’ŒUriHandlerä¸Š RouterServiceï¼šå£°æ˜ä¸€ä¸ªServiceï¼Œé€šè¿‡interfaceå’ŒkeyåŠ è½½å®ç°ç±» RouterUriï¼šæŒ‡å®šä¸€ä¸ªUriè·³è½¬ï¼Œæ­¤æ³¨è§£å¯ä»¥ç”¨åœ¨Activityå’ŒUriHandlerä¸Š æ³¨ï¼šWMRouterä¸­è¿ç”¨äº†åå°„ã€æ³¨è§£ã€è´£ä»»é“¾æ¨¡å¼ç­‰æŠ€æœ¯ï¼Œè¯·å…ˆäº†è§£ç›¸å…³æŠ€æœ¯ã€‚ URIåˆ†å‘ä½¿ç”¨RouterUriä½¿ç”¨è·¯ç”±åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ ‡æ³¨ 1234567891011121314151617// æŒ‡å®šè·¯å¾„ã€schemeã€host@RouterUri(path = &quot;/test/schemehost&quot;, scheme = &quot;test&quot;, host = &quot;test.demo.com&quot;)public static class TestSchemeHostHandler extends EmptyHandler &#123;&#125;// æŒ‡å®špathã€æ‹¦æˆªå™¨@RouterUri(path = &quot;/test/interceptor&quot;, interceptors = UriParamInterceptor.class)public static class TestInterceptorHandler extends EmptyHandler &#123;&#125;// æŒ‡å®šè·¯å¾„@RouterUri(path = DemoConstant.ADVANCED_DEMO)public class AdvancedDemoActivity extends BaseActivity &#123; &#125; è·³è½¬åˆ°å…·ä½“Uri1234567Router.startUri(context, &quot;/home&quot;);Router.startUri(context, &quot;demo_scheme://demo_host/path1&quot;);Router.startUri(new UriRequest(context, &quot;/account&quot;)) è§£æRouterUriUriAnnotationProcessorå¯¹RouterUriæ ‡æ³¨è¿›è¡Œè§£æå¤„ç†ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253public boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment env) &#123; if (annotations == null || annotations.isEmpty()) &#123; return false; &#125; CodeBlock.Builder builder = CodeBlock.builder(); String hash = null; for (Element element : env.getElementsAnnotatedWith(RouterUri.class)) &#123; if (!(element instanceof Symbol.ClassSymbol)) &#123; continue; &#125; // åˆ¤æ–­æ˜¯å¦æ˜¯Activity boolean isActivity = isActivity(element); // åˆ¤æ–­æ˜¯å¦UriHandlerçš„å­ç±» boolean isHandler = isHandler(element); if (!isActivity &amp;&amp; !isHandler) &#123; continue; &#125; Symbol.ClassSymbol cls = (Symbol.ClassSymbol) element; RouterUri uri = cls.getAnnotation(RouterUri.class); if (uri == null) &#123; continue; &#125; if (hash == null) &#123; hash = hash(cls.className()); &#125; CodeBlock handler = buildHandler(isActivity, cls); CodeBlock interceptors = buildInterceptors(getInterceptors(uri)); // scheme, host, path, handler, exported, interceptors String[] pathList = uri.path(); for (String path : pathList) &#123; builder.addStatement(&quot;handler.register($S, $S, $S, $L, $L$L)&quot;, uri.scheme(), uri.host(), path, handler, uri.exported(), interceptors); &#125; &#125; if (hash == null) &#123; hash = randomHash(); &#125; // ç”Ÿæˆå¯¹åº”çš„åˆå§‹åŒ–æ–‡ä»¶ï¼Œå°†å¯¹åº”çš„Classæ·»åŠ åˆ°ServiceLoaderä¸­çš„Mapä¸­ buildHandlerInitClass(builder.build(), &quot;UriAnnotationInit&quot; + Const.SPLITTER + hash, Const.URI_ANNOTATION_HANDLER_CLASS, Const.URI_ANNOTATION_INIT_CLASS); return true;&#125; UriHandlerè¿ç”¨è´£ä»»é“¾æ¨¡å¼ï¼Œç”¨äºæ‹¦æˆªç›¸å…³URIã€‚ RouterRegexç”¨äºè®¾ç½®è·¯ç”±åŒ¹é…çš„æ­£åˆ™ï¼Œå¯ä»¥è®¾ç½®çš„å±æ€§æœ‰ï¼š regexï¼šå®Œæ•´uriçš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… priorityï¼šä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼Œé»˜è®¤ä¸º0 exportedï¼šæ˜¯å¦å…è®¸å¤–éƒ¨è·³è½¬ interceptorsï¼šè¦æ·»åŠ çš„interceptorsï¼Œéœ€è¦å®ç°UriInterceptorï¼Œæ‹¦æˆªå™¨å¤„ç†åå†³å®šæ˜¯ç»§ç»­è¿˜æ˜¯ç»“æŸã€‚ 12345678910111213141516171819202122232425262728293031@RouterRegex(regex = &quot;http(s)?://.*&quot;)public class SystemBrowserHandler extends UriHandler &#123; // æ˜¯å¦è¦å¤„ç† @Override protected boolean shouldHandle(@NonNull UriRequest request) &#123; return true; &#125; // æ ¹æ®å®é™…ä¸šåŠ¡éœ€è¦è¿›è¡Œå¤„ç† @Override protected void handleInternal(@NonNull UriRequest request, @NonNull UriCallback callback) &#123; try &#123; Intent intent = new Intent(); intent.setAction(Intent.ACTION_VIEW); intent.setData(request.getUri()); request.getContext().startActivity(intent); callback.onComplete(UriResult.CODE_SUCCESS); &#125; catch (Exception e) &#123; callback.onComplete(UriResult.CODE_ERROR); &#125; &#125;&#125;@RouterRegex(regex = &quot;http(s)://test.demo.com/test/interceptor.*&quot;, interceptors = UriParamInterceptor.class)public static class TestInterceptorHandler extends EmptyHandler &#123;&#125; RouterPageRouterPageç”¨äºå†…éƒ¨é¡µé¢è·³è½¬ï¼Œæ­¤æ³¨è§£å¯ä»¥ç”¨åœ¨Activityã€Fragmentå’ŒUriHandlerä¸Šã€‚å¯ä»¥è®¾ç½®æ‹¦æˆªå™¨UriInterceptorã€‚ 123456789@RouterPage(path = &quot;/test/interceptor&quot;, interceptors = UriParamInterceptor.class)public static class TestInterceptorHandler extends EmptyHandler &#123;&#125;@RouterPage(path = DemoConstant.TEST_DEMO_FRAGMENT_2, interceptors = DemoFragmentInterceptor.class)public class Demo2Fragment extends Fragment &#123; &#125; ServiceLoaderServiceLoaderå¸®åŠ©æˆ‘ä»¬åˆ°é¡¹ç›®å®ç°è§£è€¦çš„æ•ˆæœï¼Œè·ŸDaggerç­‰æ¡†æ¶ç­‰åŠŸèƒ½ç±»ä¼¼ã€‚ä¸è¿‡WMRouterå†…éƒ¨æ˜¯æ²Ÿé€šåå°„æ¥æ„é€ å¯¹è±¡çš„ï¼Œæ„Ÿè§‰æ€§èƒ½ä¸Šæ²¡æœ‰googleå®˜æ–¹æä¾›çš„æ¡†æ¶å¥½ã€‚ ä½¿ç”¨RouterServiceRouterServiceå¯ä»¥è®¾ç½®ä»¥ä¸‹å±æ€§ï¼š interfacesï¼šå®ç°çš„æ¥å£ï¼ˆæˆ–ç»§æ‰¿çš„çˆ¶ç±»ï¼‰ keyï¼šåŒä¸€ä¸ªæ¥å£çš„å¤šä¸ªå®ç°ç±»ä¹‹é—´ï¼Œå¯ä»¥é€šè¿‡å”¯ä¸€çš„keyåŒºåˆ†ã€‚ singletonï¼šæ˜¯å¦ä¸ºå•ä¾‹ã€‚å¦‚æœæ˜¯å•ä¾‹ï¼Œåˆ™ä½¿ç”¨ServiceLoader.getServiceä¸ä¼šé‡å¤åˆ›å»ºå®ä¾‹ã€‚ defaultImplï¼šæ˜¯å¦è®¾ç½®ä¸ºé»˜è®¤å®ç°ç±»ã€‚å¦‚æœæ˜¯é»˜è®¤å®ç°ç±»ï¼Œåˆ™åœ¨è·å–è¯¥å®ç°ç±»å®ä¾‹æ—¶å¯ä»¥ä¸æŒ‡å®škey 12345678910111213141516171819//æ³¨å†Œ@RouterService(interfaces = Func2.class, key = &quot;/method/add&quot;, singleton = true)public class AddMethod implements Func2&lt;Integer, Integer, Integer&gt; &#123;//è·å–ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¥å£çš„classï¼Œç¬¬äºŒä¸ªä¸ºæ³¨å†Œæ—¶å¡«çš„keyRouter.getService(IAccountService.class, &quot;key_name&quot;);// å¯ä»¥é€šè¿‡æ¥å£æ‹¿åˆ°æ‰€æœ‰æ³¨å†Œçš„å¯¹è±¡Router.getAllServiceClasses(IService.class);// å¯ä»¥ä¼ å…¥ä¸€ä¸ªå·¥å‚ï¼Œå¦‚æœæ²¡æœ‰æ‹¿åˆ°å¯¹è±¡ï¼Œåˆ™å¯ä»¥é€šè¿‡å·¥å‚æ„é€ ä¸€ä¸ªIFactoryService service4 = Router.getService(IFactoryService.class, &quot;/factory&quot;, new IFactory() &#123; @NonNull @Override public &lt;T&gt; T create(@NonNull Class&lt;T&gt; clazz) throws Exception &#123; return clazz.getConstructor(String.class).newInstance(&quot;CreateByCustomFactory&quot;); &#125;&#125;); getServiceæµç¨‹æµç¨‹ï¼š ServiceLoaderçš„SERVICESå¦‚æœæœ‰å¯¹åº”çš„å¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›ï¼› æ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªServiceLoaderï¼Œå°†classä¼ è¿›å…¥ï¼› è°ƒç”¨ServiceLoaderçš„getæ–¹æ³•ï¼š å¦‚æœç”¨å•ä¾‹ä¿®é¥°ï¼Œåˆ™ä»SingletonPoolä¸­æ‹¿ ä¸æ˜¯åˆ™åˆ¤æ–­æ˜¯å¦æœ‰ç”¨RouterProviderä¿®é¥°æ¥è¿”å›å¯¹è±¡ ä¸æ˜¯åˆ™é€šè¿‡åå°„åˆ›å»ºå¯¹è±¡ ServiceAnnotationProcessorServiceAnnotationProcessorç”¨æ¥è§£æRouterServiceæ³¨è§£ 1234567891011121314@Overridepublic boolean process(Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment env) &#123; //æœ€åä¸€è½®çš„æ—¶å€™ï¼Œç”ŸæˆServiceInitæ–‡ä»¶ if (env.processingOver()) &#123; generateInitClass(); &#125; else &#123; // å¤„ç†ç›¸åº”æ³¨è§£ processAnnotations(env); &#125; return true;&#125; å‚è€ƒ WMrouteræºç æ‹†è§£ WMRouterï¼šç¾å›¢å¤–å–Androidå¼€æºè·¯ç”±æ¡†æ¶","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"multitype","date":"2022-03-08T02:25:29.643Z","path":"wiki/Android/å¼€æºåº“/multitype/","text":"æ¦‚è¿°æœ‰äº›ä¸šåŠ¡åœºæ™¯ï¼Œæ¯”å¦‚IMèŠå¤©ã€ç›´æ’­æˆ¿é—´çš„æ¶ˆæ¯é¢æ¿ã€‚å¯èƒ½ä¼šå‡ºç°æœ‰å¥½å‡ åä¸ªViewHolderçš„åœºæ™¯ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæŒ‰ç…§Adapterçš„æ ‡å‡†å†™æ³•ï¼Œæ‰€æœ‰çš„ç±»å‹éƒ½å †å åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ–‡ä»¶ä¼šå˜å¾—è‡ƒè‚¿ï¼Œåˆ°åæœŸç»´æŠ¤æˆæœ¬å˜åŒ–ã€‚ä¹Ÿè¿åäº†å¼€é—­åŸåˆ™ï¼Œæ–°å¢ä¸€ä¸ªç±»å‹çš„æ—¶å€™åˆè¦æ”¹è¿™ä¸ªAdapterã€‚MultiTypeAdapterå°±æ˜¯å¸®æˆ‘ä»¬å¤„ç†äº†å¤æ‚åœºæ™¯ä¸‹Adapterçš„å·¥ä½œã€‚ MultiTypeAdapteråœ¨æ¸²æŸ“å¤šç±»å‹å¸ƒå±€çš„æ—¶å€™ï¼Œæ ¹æ®Adapterçš„æ•°æ®é›†åˆæ‹¿åˆ°ç¬¬iä¸ªæ•°æ®çš„JavaBean Class,ç„¶åæ ¹æ®è¿™ä¸ªClasss, æ‹¿åˆ°ViewTypeã€‚ä¹‹åonCreateViewHolderæ–¹æ³•å’Œ onBindViewHolderæ–¹æ³•æ ¹æ®è¿™ä¸ªView Type æ‹¿åˆ°å¯¹åº”çš„Binderï¼Œç„¶åè®©ç›¸åº”çš„Binderæ¥è¿›è¡Œç»‘å®šå¸ƒå±€å’Œç»‘å®šæ•°æ®ã€‚ ç”¨æ³•æ”¯æŒä¸€å¯¹å¤šã€æ”¯æŒä¿®æ”¹itemä¸­å¤šå­viewã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869// è‡ªå·±å®ç°ItemViewBinderclass PostViewBinder : ItemViewBinder&lt;Post, PostViewBinder.ViewHolder&gt;() &#123; override fun onCreateViewHolder(inflater: LayoutInflater, parent: ViewGroup): ViewHolder &#123; return ViewHolder(inflater.inflate(R.layout.item_post, parent, false)) &#125; override fun onBindViewHolder(holder: ViewHolder, item: Post) &#123; holder.setData(item) &#125; class ViewHolder(itemView: View) : RecyclerView.ViewHolder(itemView) &#123; private val cover: ImageView = itemView.findViewById(R.id.cover) private val title: TextView = itemView.findViewById(R.id.title) fun setData(post: Post) &#123; cover.setImageResource(post.coverResId) title.text = post.title &#125; &#125;&#125;// ä¹Ÿå¯ä»¥å®ç°ViewDelegate// å…¶å†…éƒ¨è‡ªå·±å®ç°ViewHolderï¼Œé€šè¿‡å·¥å‚æ–¹æ³•æ¨¡å¼æš´éœ²onCreateViewã€onBindViewè®©å­ç±»å®ç°class RichViewDelegate : ViewDelegate&lt;RichItem, RichView&gt;() &#123; override fun onCreateView(context: Context): RichView &#123; return RichView(context).apply &#123; layoutParams = LayoutParams(MATCH_PARENT, WRAP_CONTENT) &#125; &#125; @SuppressLint(&quot;SetTextI18n&quot;) override fun onBindView(view: RichView, item: RichItem) &#123; view.imageView.setImageResource(item.imageResId) view.textView.text = &quot;&quot;&quot; |$&#123;item.text&#125; |layoutPosition: $&#123;view.layoutPosition&#125; |absoluteAdapterPosition: $&#123;view.absoluteAdapterPosition&#125; |bindingAdapterPosition: $&#123;view.bindingAdapterPosition&#125; &quot;&quot;&quot;.trimMargin() &#125;&#125;MultiTypeAdapter adapter = new MultiTypeAdapter()//æ³¨å†Œåï¼Œä¼šè‡ªåŠ¨åŒ¹é…Postç±»å‹çš„æ•°æ®è®¾ç½®æˆå¯¹åº”çš„è§†å›¾adapter.register(PostViewBinder())adapter.register(RichViewDelegate())//ä¸€å¯¹å¤šå…³ç³»adapter.register(Weibo::class).to( SimpleTextViewBinder(), SimpleImageViewBinder() ).withLinker &#123; _, weibo -&gt; // åˆ¤æ–­ä½¿ç”¨é‚£ç§ç±»å‹ when (weibo.content) &#123; is SimpleText -&gt; 0 is SimpleImage -&gt; 1 else -&gt; 0 &#125; &#125;//æœ‰contentå¯¹åº”çš„ç±»å‹SimpleTextViewBinderã€SimpleImageViewBinderval simpleText = SimpleText(&quot;A simple text Weibo: Hello World.&quot;)val simpleImage = SimpleImage(R.drawable.img_10)for (i in 0..19) &#123; items.add(Weibo(user, simpleText)) items.add(Weibo(user, simpleImage))&#125; æºç åˆ†æå‚è€ƒ https://github.com/drakeet/MultiType","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"tinker","date":"2022-03-08T02:25:29.643Z","path":"wiki/Android/å¼€æºåº“/tinker/","text":"æ¦‚è¿°æµ‹è¯•æ˜¯æ— æ³•æµ‹å‡ºæ‰€æœ‰bugçš„ï¼Œçº¿ä¸Šå‡ºé—®é¢˜åœ¨æ‰€éš¾å…ï¼Œå¦‚æœæ²¡æœ‰çƒ­æ›´æ–°æ–¹æ¡ˆã€‚é‚£ä¹ˆæ¯æ¬¡éƒ½éœ€è¦é‡æ–°æ›´æ–°ï¼tinkeræ˜¯ç»è¿‡è…¾è®¯å®è·µåå…¬å¸ƒçš„å¼€æºè§£å†³æ–¹æ¡ˆã€‚ç”±äºpatchåŒ…éœ€è¦åˆ†å‘ï¼Œå¦‚æœè‡ªå·±åšåå°ä¹Ÿæ˜¯å¼€æºï¼Œä½†buglyæä¾›äº†ç›¸å…³è§£å†³æ–¹æ¡ˆã€‚é‚£ä¹ˆæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å°±è¡Œäº†ã€‚è¿™é‡Œè®°å½•è‡ªå·±çš„æ•´ä¸ªæ¥å…¥æµç¨‹ï¼Œåç»­å†åˆ†æå…¶åŸç†ã€‚ æ¥å…¥æµç¨‹ å¤§è‡´æµç¨‹ï¼š ç¼–è¯‘åŸºå‡†åŒ…ï¼› åŸºäºåŸºå‡†åŒ…ï¼Œä¿®å¤bugï¼Œç¼–è¯‘patchæ–‡ä»¶ï¼› ä¸Šä¼ patchæ–‡ä»¶ã€‚ ç”±äºè‡ªå·±æ˜¯ç›´æ¥æ¥å…¥buglyçš„é›†æˆæ–¹æ¡ˆï¼Œå»ºè®®å¤§å®¶åœ¨æ¥å…¥å‰å¥½å¥½çœ‹çœ‹ä»–ä»¬çš„æ–‡æ¡£ã€‚ Bugly Androidçƒ­æ›´æ–°ä½¿ç”¨æŒ‡å— Bugly Androidçƒ­æ›´æ–°è¯¦è§£ Bugly Android çƒ­æ›´æ–°å¸¸è§é—®é¢˜ çƒ­æ›´æ–°APIæ¥å£ tinkerå®˜æ–¹wiki æ³¨æ„äº‹é¡¹ åŸæœ‰çš„Applicationé€»è¾‘ï¼Œåº”è¯¥å…¨éƒ¨ç§»åˆ°ApplicationLikeä¸­ï¼› ä¸Šä¼ çš„åŒ…æ”¹ä¸€ä¸‹åå­—ï¼Œapkä¸ºæ‰©å±•åå¯èƒ½ä¼šè¢«è¿è¥å•†æ‹¦æˆªï¼› æ³¨æ„æ‰“åŒ…å‘½ä»¤ï¼ŒbuildTinkerPatchArmeabiReleaseï¼Œæ ¹æ®gradleçš„é…ç½®ä¸åŒï¼Œæœ‰æ—¶å€™éœ€è¦æŒ‡å®šcpuæ¶æ„ï¼Œæœ‰æ—¶å€™ä¸éœ€è¦æŒ‡å®šã€‚ä¸»è¦çœ‹bakApkç›®å½•çš„å±‚æ¬¡ï¼› åŸºå‡†åŒ…éœ€è¦å…ˆå¯åŠ¨ï¼Œæ‰å¯ä»¥ä¸Šä¼ patchæ–‡ä»¶ï¼› å¯ä»¥ä¸ç”¨æŒ‡å®šåŸºæœ¬ç‰ˆæœ¬ï¼Œtinkerè‡ªåŠ¨è·å–versionCodeã€versionName åŸç†å‚è€ƒ https://github.com/Tencent/tinker Tinker - å¾®ä¿¡å¼€æºçš„ Android çƒ­ä¿®å¤æ¡†æ¶","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"GlideåŸç†åˆ†æ","date":"2022-03-08T02:25:29.640Z","path":"wiki/Android/å¼€æºåº“/GlideåŸç†åˆ†æ/","text":"æµç¨‹å›¾å‚è€ƒ","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"GreenDao","date":"2022-03-08T02:25:29.640Z","path":"wiki/Android/å¼€æºåº“/GreenDao/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"KOOM","date":"2022-03-08T02:25:29.640Z","path":"wiki/Android/å¼€æºåº“/KOOM/","text":"KOOM ï¼šOOMåˆ†æå·¥å…· æµç¨‹åˆå§‹åŒ–åï¼Œ10ç§’åå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯5ç§’è½®è¯¢æ£€æµ‹ã€‚å½“æ»¡è¶³æ¡ä»¶ï¼ˆæ¯”å¦‚å†…å­˜ä¸å¤Ÿç”¨ï¼‰ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œè¿›è¡Œå†…å­˜æ³„æ¼åˆ†æã€è£å‰ªã€ä¿å­˜åˆ†æä¿¡æ¯ã€‚å†…å­˜æ³„æ¼çš„åˆ¤æ–­æ˜¯é€šè¿‡è¯»å–sharkè·å–çš„heapGraphï¼Œåˆ¤æ–­Activityã€Fragmentã€Bitmapç­‰æ˜¯å¦å­˜åœ¨æ³„æ¼ã€‚ KOOMEnableCheckeræœ‰ä¸€äº›é™åˆ¶æ¡ä»¶ï¼Œä¸æ»¡è¶³æ¡ä»¶çš„åˆ™ä¸èƒ½è¿›è¡Œç›‘æ§ã€‚ sharkshark-graphï¼šsquareçš„å¼€æºåº“ã€‚æ–‡æ¡£åœ°å€ï¼šhttps://square.github.io/leakcanary/api/shark/shark/ xhookxhookï¼šçˆ±å¥‡è‰ºçš„å¼€æºåº“ï¼Œç”¨äºhookåŠ¨æ€åº“ã€‚æ–‡æ¡£åœ°å€ï¼šhttps://github.com/iqiyi/xHook/blob/master/docs/overview/android_plt_hook_overview.zh-CN.md Getåˆ°çš„çŸ¥è¯†ç‚¹Handlerçš„ç”¨æ³•Handleræ‰§è¡Œä¸€ä¸ªRunnableæ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä»¥ä¸‹çš„æ–¹å¼æ¥æ‰§è¡Œç±»æ–¹æ³• 1koomHandler.post(this::manualTriggerInternal); ResultReceiverä½¿ç”¨ResultReceiverè¿›è¡Œè¿›ç¨‹é—´é€šä¿¡ï¼Œè¿™ä¸ªç±»ä¹ŸæŒºç®€å•çš„ï¼Œå®ç°åºåˆ—åŒ–æ¥å£ã€‚æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªHandlerã€‚æ²¡æœ‰åºåˆ—åŒ–çš„æƒ…å†µä¸‹ä½¿ç”¨Handleré€šä¿¡ï¼Œåºåˆ—åŒ–åä½¿ç”¨Binderé€šä¿¡ã€‚sendå‘é€æ¶ˆæ¯ï¼ŒonReceiveResultæ¥æ”¶æ¶ˆæ¯ã€‚ å‚è€ƒ https://github.com/KwaiAppTeam/KOOM https://www.gushiciku.cn/pl/p3Rl https://square.github.io/leakcanary/api/shark/shark/ https://github.com/iqiyi/xHook","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"LeakCanary","date":"2022-03-08T02:25:29.640Z","path":"wiki/Android/å¼€æºåº“/LeakCanary/","text":"å‚è€ƒ https://square.github.io/leakcanary","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"MMKV","date":"2022-03-08T02:25:29.640Z","path":"wiki/Android/å¼€æºåº“/MMKV/","text":"æ¦‚è¿°MMKV æ˜¯åŸºäº mmap å†…å­˜æ˜ å°„çš„ key-value ç»„ä»¶ï¼Œåº•å±‚åºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–ä½¿ç”¨ protobuf å®ç°ï¼Œæ€§èƒ½é«˜ï¼Œç¨³å®šæ€§å¼ºã€‚ MMKV æœ¬è´¨ä¸Šæ˜¯å°†æ–‡ä»¶ mmap åˆ°å†…å­˜å—ä¸­ï¼Œå°†æ–°å¢çš„ key-value ç»Ÿç»Ÿ append åˆ°å†…å­˜ä¸­ï¼›åˆ°è¾¾è¾¹ç•Œåï¼Œè¿›è¡Œé‡æ•´å›å†™ä»¥è…¾å‡ºç©ºé—´ï¼Œç©ºé—´è¿˜æ˜¯ä¸å¤Ÿçš„è¯ï¼Œå°± double å†…å­˜ç©ºé—´ï¼›å¯¹äºå†…å­˜æ–‡ä»¶ä¸­å¯èƒ½å­˜åœ¨çš„é‡å¤é”®å€¼ï¼ŒMMKV åªé€‰ç”¨æœ€åå†™å…¥çš„ä½œä¸ºæœ‰æ•ˆé”®å€¼ã€‚ MMKVæ”¯æŒå¤šè¿›ç¨‹ã€‚å¦‚æœè¦è‡ªå·±å®ç°çš„è¯ï¼Œä¸€èˆ¬èƒ½æƒ³åˆ°çš„æ˜¯åŸºäºContentProviderã€‚ä½†è¿™ç§æ–¹å¼å¯åŠ¨æ…¢ã€è®¿é—®ä¹Ÿæ…¢ã€‚ ä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// åˆå§‹åŒ–String rootDir = MMKV.initialize(this);System.out.println(&quot;mmkv root: &quot; + rootDir);// æä¾›é»˜è®¤çš„å…¨å±€å®ä¾‹MMKV kv = MMKV.defaultMMKV();kv.encode(&quot;bool&quot;, true);System.out.println(&quot;bool: &quot; + kv.decodeBool(&quot;bool&quot;));kv.encode(&quot;int&quot;, Integer.MIN_VALUE);System.out.println(&quot;int: &quot; + kv.decodeInt(&quot;int&quot;));kv.encode(&quot;long&quot;, Long.MAX_VALUE);System.out.println(&quot;long: &quot; + kv.decodeLong(&quot;long&quot;));kv.encode(&quot;float&quot;, -3.14f);System.out.println(&quot;float: &quot; + kv.decodeFloat(&quot;float&quot;));kv.encode(&quot;double&quot;, Double.MIN_VALUE);System.out.println(&quot;double: &quot; + kv.decodeDouble(&quot;double&quot;));kv.encode(&quot;string&quot;, &quot;Hello from mmkv&quot;);System.out.println(&quot;string: &quot; + kv.decodeString(&quot;string&quot;));byte[] bytes = &#123;&#x27;m&#x27;, &#x27;m&#x27;, &#x27;k&#x27;, &#x27;v&#x27;&#125;;kv.encode(&quot;bytes&quot;, bytes);System.out.println(&quot;bytes: &quot; + new String(kv.decodeBytes(&quot;bytes&quot;)));// åˆ é™¤å’ŒæŸ¥è¯¢kv.removeValueForKey(&quot;bool&quot;);System.out.println(&quot;bool: &quot; + kv.decodeBool(&quot;bool&quot;)); kv.removeValuesForKeys(new String[]&#123;&quot;int&quot;, &quot;long&quot;&#125;);System.out.println(&quot;allKeys: &quot; + Arrays.toString(kv.allKeys()));boolean hasBool = kv.containsKey(&quot;bool&quot;);// å¦‚æœä¸åŒä¸šåŠ¡éœ€è¦åŒºåˆ«å­˜å‚¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬åˆ›å»ºè‡ªå·±çš„å®ä¾‹MMKV kv = MMKV.mmkvWithID(&quot;MyID&quot;);kv.encode(&quot;bool&quot;, true);// å¦‚æœä¸šåŠ¡éœ€è¦å¤šè¿›ç¨‹è®¿é—®ï¼Œé‚£ä¹ˆåœ¨åˆå§‹åŒ–çš„æ—¶å€™åŠ ä¸Šæ ‡å¿—ä½ MMKV.MULTI_PROCESS_MODEMMKV kv = MMKV.mmkvWithID(&quot;InterProcessKV&quot;, MMKV.MULTI_PROCESS_MODE);kv.encode(&quot;bool&quot;, true); å‚è€ƒ https://github.com/Tencent/MMKV","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"OkHttp","date":"2022-03-08T02:25:29.640Z","path":"wiki/Android/å¼€æºåº“/OkHttp/","text":"æµç¨‹å›¾ åŒæ­¥è¯·æ±‚ å¼‚æ­¥è¯·æ±‚ åˆ¤æ–­å½“å‰ call æ˜¯å¦åªæ‰§è¡Œäº†ä¸€æ¬¡ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ åˆ›å»ºä¸€ä¸ª AsyncCall å¯¹è±¡ï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ª Runable å¯¹è±¡ é€šè¿‡ client.dispatcher().enqueue() ä¼ å…¥ AsyncCall å¯¹è±¡æ‰§è¡Œå¼‚æ­¥è¯·æ±‚ï¼Œå¦‚æœå½“å‰è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—(runningAsyncCalls)å…ƒç´ ä¸ªæ•°å°äºmaxRequests å¹¶ä¸”å½“å‰è¯·æ±‚çš„ Host ä¸ªæ•°å°äº maxRequestsPerHost åˆ™ç›´æ¥æ”¾è¿›è¿è¡Œå¯¹è±¡å¹¶æ‰§è¡Œå½“å‰çš„ä»»åŠ¡ï¼Œå¦åˆ™æ”¾è¿›å‡†å¤‡é˜Ÿåˆ—ä¸­ (readyAsyncCalls) å¦‚æœç¬¬ 3 æ­¥å¯ä»¥æ‰§è¡Œï¼Œåˆ™ä¼šè°ƒç”¨ AsyncCall çš„ execute æ–¹æ³•ï¼Œä¹‹åè°ƒç”¨ getResponseWithInterceptorChain() è·å– Responseï¼Œæ‰§è¡ŒonResponse æˆ– onFailureã€‚è¿™ä¹Ÿ å°è¯äº†ä¸Šé¢æåˆ°çš„å¼‚æ­¥ä»»åŠ¡å›è°ƒæ˜¯åœ¨å­çº¿ç¨‹ä¸­ execute æ–¹æ³•æœ«å°¾ä¼šå¿…è°ƒ client.dispatcher().finished(this) æ–¹æ³• finished æ–¹æ³•ä¸­ä¼šåšä¸‰ä»¶äº‹: ä» runningAsyncCalls ä¸­æ¸…é™¤å½“å‰ä»»åŠ¡ é€šè¿‡ promoteCallsæ–¹æ³•è°ƒæ•´æ•´ä¸ªå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸»è¦å·¥ä½œæ˜¯åˆ¤æ–­å‡†å¤‡é˜Ÿåˆ— readyAsyncCalls ä¸­çš„ä»»åŠ¡æ˜¯å¦å¯ä»¥æ‰§è¡Œ é‡æ–°è®¡ç®—æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡æ•°é‡ï¼Œä¸º 0 åˆ™æ‰§è¡Œ idleCallback æ‹¦æˆªå™¨ æ‹¦æˆªå™¨å¯ä»¥æ·»åŠ ã€ç§»é™¤æˆ–è€…æ›¿æ¢è¯·æ±‚çš„å¤´ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥æ”¹å˜ä¼ è¾“çš„ä¸»ä½“éƒ¨åˆ†ã€‚ åº”ç”¨æ‹¦æˆªå™¨å‘é€å‰è¿›è¡Œæ‹¦æˆª ç½‘ç»œæ‹¦æˆªå™¨å¯¹å“åº”çš„æ•°æ®è¿›è¡Œæ‹¦æˆª å†…éƒ¨æ‹¦æˆªå™¨RetryAndFollowUpInterceptoré‡å®šå‘æ‹¦æˆªå™¨ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚ï¼Œè·å–å¯¹åº”çš„èµ„æºï¼ŒæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå‘ç°è¯·æ±‚çš„è¿™ä¸ªèµ„æºå®é™…æ”¾åœ¨å¦ä¸€ä¸ªä½ç½®ï¼Œäºæ˜¯æœåŠ¡å™¨åœ¨è¿”å›çš„å“åº”å¤´çš„Locationå­—æ®µä¸­å†™å…¥é‚£ä¸ªè¯·æ±‚èµ„æºçš„æ­£ç¡®çš„URLï¼Œå¹¶è®¾ç½®reponseçš„çŠ¶æ€ç ä¸º30x ã€‚ å·¥ä½œæµç¨‹ åˆ›å»ºä¸€ä¸ª StreamAllocationã€‚ è°ƒç”¨ä¸‹ä¸€ä¸ªchain ã€‚ åˆ¤æ–­æ˜¯å¦é‡å®šå‘ã€‚é‡å®šå‘ä¼šå¯¹ requeståšä¸€äº›ä¿®æ”¹ï¼Œè¿”å›æ–°çš„requestï¼Œå¦åˆ™ä¼šè¿”å›nullã€‚ followUp &#x3D;&#x3D; null æ— é‡å®šå‘ï¼Œé‡Šæ”¾èµ„æºï¼Œç›´æ¥è¿”å›responseã€‚ æ¯”è¾ƒé‡å®šå‘å‰åçš„ hostã€portã€schemeæ˜¯å¦ä¸€è‡´ï¼Œä¸€è‡´çš„è¯å¤ç”¨ï¼Œ å¦åˆ™é‡æ–°åˆ›å»º StreamAllocationã€‚ é€šè¿‡ while (true) ï¼Œé‡å¤æ­¥éª¤ BridgeInterceptoræ¡¥æ¥æ‹¦æˆªå™¨ï¼šè´Ÿè´£æŠŠç”¨æˆ·æ„é€ çš„è¯·æ±‚è½¬æ¢ä¸ºå‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚ã€æŠŠæœåŠ¡å™¨è¿”å›çš„å“åº”è½¬æ¢ä¸ºç”¨æˆ·å‹å¥½çš„å“åº”ã€‚ å·¥ä½œæµç¨‹ å‘èµ·è¯·æ±‚å‰ï¼š å¦‚æœè¿™ä¸ªè¯·æ±‚æœ‰è¯·æ±‚ä½“ï¼Œå°±æ·»åŠ  Content-Type, Content-Lengthç­‰ã€‚ å¦‚æœè¿™ä¸ªè¯·æ±‚æ²¡æœ‰ Hostï¼Œå°±é€šè¿‡ url æ¥è·å– Host å€¼æ·»åŠ åˆ° Headerä¸­ã€‚ å¦‚æœè¿™ä¸ªè¯·æ±‚æ²¡æœ‰æ¥æ”¶çš„æ•°æ®ç±»å‹ Accept-Encodingï¼Œä¸”æ²¡æŒ‡å®šæ¥æ”¶çš„æ•°æ®èŒƒå›´ï¼Œå°±æ·»åŠ é»˜è®¤æ¥å—æ ¼å¼ä¸º gzipã€‚ å» CookieJar ä¸­ æ ¹æ® url æŸ¥è¯¢ Cookie æ·»åŠ åˆ° Headerã€‚ å¦‚æœå½“å‰æ²¡æœ‰ï¼Œå°±æ·»åŠ  User-Agent ä¿¡æ¯ã€‚ å‘èµ·è¯·æ±‚å: è§£æå“åº” Header ä¸­çš„ Cookie å¦‚æœæƒ³è¦æ•°æ®çš„æ ¼å¼æ˜¯ gzipï¼Œå°±åˆ›å»º GzipSource è¿›è¡Œè§£å‹ï¼Œ åŒæ—¶ç§»é™¤ Content-Encoding å’Œ Content-Length CacheInterceptorç¼“å­˜æ‹¦æˆªå™¨ï¼šæœ€å¿«çš„è¯·æ±‚å°±æ˜¯ä¸è¯·æ±‚ï¼Œç›´æ¥ç”¨ç¼“å­˜ã€‚ æ ¹æ®Requestå’Œä¹‹å‰ç¼“å­˜çš„Responseå¾—åˆ°CacheStrategy æ ¹æ® CacheStrategyå†³å®šæ˜¯è¯·æ±‚ç½‘ç»œè¿˜æ˜¯ç›´æ¥è¿”å›ç¼“å­˜ å¦‚æœ step 2ä¸­å†³å®šè¯·æ±‚ç½‘ç»œï¼Œåˆ™åœ¨è¿™ä¸€æ­¥å°†è¿”å›çš„ç½‘ç»œå“åº”å’Œæœ¬åœ°ç¼“å­˜å¯¹æ¯”ï¼Œå¯¹æœ¬åœ°ç¼“å­˜è¿›è¡Œæ”¹å¢åˆ æ“ä½œ ConnectInterceptorè¿æ¥æ‹¦æˆªå™¨ï¼šéƒ¨ç»´æŠ¤äº†å¯ä»¥é‡å¤ä½¿ç”¨çš„ Socket è¿æ¥æ± ï¼Œå‡å°‘æ¡æ‰‹æ¬¡æ•°ï¼ŒåŠ å¿«è¯·æ±‚å“åº” è¿æ¥ RealConnection æ˜¯å¯¹ Socket çš„å°è£…ã€‚ OkHttp çš„è¿æ¥å¤ç”¨ä¸»è¦æ˜¯é€šè¿‡ StreamAllocation æ¥å®ç°çš„ï¼Œæ¯ä¸ªè¿æ¥ä¸ŠæŒæœ‰ä¸€ä¸ªã€‚ StreamAllocation å¼•ç”¨çš„åˆ—è¡¨ï¼Œä»¥æ­¤æ¥æ ‡è¯†å½“å‰è¿æ¥æ˜¯å¦ç©ºé—²ã€‚å®ƒé‡Œé¢ç»´æŠ¤äº†Listçš„å¼•ç”¨ã€‚Listä¸­StreamAllocationçš„æ•°é‡ä¹Ÿå°±æ˜¯socketè¢«å¼•ç”¨çš„è®¡æ•°ï¼Œå¦‚æœè®¡æ•°ä¸º0çš„è¯ï¼Œè¯´æ˜æ­¤è¿æ¥æ²¡æœ‰è¢«ä½¿ç”¨å°±æ˜¯ç©ºé—²çš„ï¼Œéœ€è¦é€šè¿‡ä¸‹æ–‡çš„ ç®—æ³•å®ç°å›æ”¶;å¦‚æœè®¡æ•°ä¸ä¸º0ï¼Œåˆ™è¡¨ç¤ºä¸Šå±‚ä»£ç ä»ç„¶å¼•ç”¨ï¼Œå°±ä¸éœ€è¦å…³é—­è¿æ¥ã€‚ åˆ¤æ–­è¿æ¥æ˜¯å¦å¯ä»¥é‡ç”¨ï¼Œé™¤äº†æ¯”è¾ƒè¿æ¥å½“å‰çš„ hostï¼Œä¹Ÿå¯ä»¥æ¯”è¾ƒè·¯ç”±ä¿¡æ¯ã€‚ è¿æ¥æ± åœ¨æ·»åŠ æ–°è¿æ¥æ—¶ä¼šè¿è¡Œæ¸…ç†ä»»åŠ¡ï¼Œé»˜è®¤æœ€å¤šç©ºé—²è¿æ¥ä¸º5ï¼Œæœ€é•¿ç©ºé—²æ—¶é—´ä¸º5åˆ†é’Ÿã€‚ CallServerInterceptorè¯»å†™æ‹¦æˆªå™¨ï¼šå®ƒè´Ÿè´£å®ç°ç½‘ç»œ IOï¼Œæ‰€æœ‰æ‹¦æˆªå™¨éƒ½è¦ä¾èµ–å®ƒæ‰èƒ½æ‹¿åˆ°å“åº”æ•°æ®ã€‚ CallServerInterceptor é¦–å…ˆä¼šå°†è¯·æ±‚ä¸­çš„ header å†™ç»™æœåŠ¡å™¨ã€‚ å¦‚æœæœ‰è¯·æ±‚ä½“çš„è¯ï¼Œä¼šå†å°† body å‘é€ç»™æœåŠ¡å™¨ã€‚ æœ€åé€šè¿‡httpCodec.finishRequest() ç»“æŸ http è¯·æ±‚çš„å‘é€ã€‚ ç„¶åä»è¿æ¥ä¸­è¯»å–æœåŠ¡å™¨çš„å“åº”ï¼Œå¹¶æ„é€  Responseã€‚ å¦‚æœè¯·æ±‚çš„ headeræˆ–æœåŠ¡å™¨ å“åº”çš„ header ä¸­ï¼ŒConnection çš„å€¼ä¸º closeï¼Œå°±å…³é—­è¿æ¥ã€‚ æœ€åè¿”å› Responseã€‚ Getåˆ°çš„çŸ¥è¯†ç‚¹ è´£ä»»é“¾æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼çš„è¿ç”¨ çº¿ç¨‹æ± çš„è¿ç”¨ å‚è€ƒ https://juejin.cn/post/6898145227765186567","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"æ ·å¼å’Œä¸»é¢˜","date":"2022-03-08T02:25:29.639Z","path":"wiki/Android/åŸºç¡€/æ ·å¼å’Œä¸»é¢˜/","text":"æ¦‚è¿°æ ·å¼æ˜¯ä¸€ä¸ªå±æ€§é›†åˆï¼Œç”¨äºæŒ‡å®šå•ä¸ª View çš„å¤–è§‚ã€‚æ ·å¼å¯ä»¥æŒ‡å®šå­—ä½“é¢œè‰²ã€å­—å·ã€èƒŒæ™¯é¢œè‰²ç­‰å±æ€§ã€‚ ä¸»é¢˜èƒŒæ™¯æ˜¯åº”ç”¨äºæ•´ä¸ªåº”ç”¨ã€Activity æˆ–è§†å›¾å±‚æ¬¡ç»“æ„ï¼Œè€Œéä»…ä»…åº”ç”¨äºå•ä¸ªè§†å›¾çš„å±æ€§é›†åˆã€‚å½“æ‚¨åº”ç”¨ä¸»é¢˜èƒŒæ™¯æ—¶ï¼Œåº”ç”¨æˆ– Activity ä¸­çš„æ¯ä¸ªè§†å›¾éƒ½ä¼šåº”ç”¨å…¶æ”¯æŒçš„æ¯ä¸ªä¸»é¢˜èƒŒæ™¯å±æ€§ã€‚ä¸»é¢˜è¿˜å¯ä»¥å°†æ ·å¼åº”ç”¨äºéè§†å›¾å…ƒç´ ï¼Œä¾‹å¦‚çŠ¶æ€æ å’Œçª—å£èƒŒæ™¯ã€‚ä¸»é¢˜å¯ä»¥ç†è§£æˆæ ·å¼çš„é›†åˆã€‚ æ ·å¼å®šä¹‰æ ·å¼1234567891011121314151617&lt;?xml version=&quot;1.0&quot; encodeing=&quot;utf-8&quot;?&gt;&lt;resource&gt; &lt;style name=&quot;BaseToolBarLine&quot;&gt; &lt;item name=&quot;android:layout_width&quot;&gt;match_parent&lt;/item&gt; &lt;item name=&quot;android:layout_height&quot;&gt;1px&lt;/item&gt; &lt;item name=&quot;android:background&quot;&gt;@color/base_toolbar_line_color&lt;/item&gt; &lt;/style&gt; &lt;style name=&quot;CodeFontRed&quot; parent=&quot;CodeFont&quot;&gt; &lt;item name=&quot;android:textColor&quot;&gt;#FF0000&lt;/item&gt; &lt;/style&gt; &lt;!-- æ ·å¼æ˜¯å¯ä»¥ç»§æ‰¿çš„ --&gt; &lt;style name=&quot;CodeFont.Red&quot;&gt; &lt;item name=&quot;android:textColor&quot;&gt;#FF0000&lt;/item&gt; &lt;/style&gt;&lt;/resource&gt; åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨æ ·å¼ 1&lt;View style=&quot;@style/BaseToolBarLine&quot; /&gt; å¦‚æœæœ‰å¤šä¸ªmoduleï¼Œéœ€è¦æ³¨æ„æ ·å¼çš„ç»§æ‰¿ï¼Œä»¥å…å‡ºç°ï¼Œå­moduleä¿®æ”¹äº†æŸä¸ªåŒåçš„styleï¼Œé€ æˆçˆ¶moduleä¸­çš„æ ·å¼è¢«ä¿®æ”¹ã€‚ ä¸»é¢˜Androidçš„ä¸»é¢˜å‘å±•å†å² åœ¨Android3.0ä¹‹å‰ï¼ŒAndroidçš„ç•Œé¢ä¸è®ºæ˜¯ä»ç³»ç»Ÿè¿˜æ˜¯ç©ºé—´çš„ä¸»é¢˜éƒ½æ˜¯æŒ‰é’®ä¸ºç™½è‰²ï¼Œç‚¹å‡»äº‹ä»¶ä¸ºé»„è‰²ã€‚ç°åœ¨çœ‹æ¥å¾ˆç®€é™‹ Holoä¸»é¢˜ï¼šAndroid3.0 ï¼ˆAPI11ï¼‰å¼€å§‹ï¼ŒGoogleæ¨å‡ºäº†Holoä¸»é¢˜ï¼ˆå°±æ˜¯æˆ‘ä»¬å°è±¡ä¸­çš„é»‘åº•ç™½å­—è“ä¸»è‰²çš„ä¸»é¢˜ï¼‰ã€‚åœ¨4.0googleåˆå‘å¸ƒäº†åº”ç”¨è®¾è®¡è§„èŒƒAndroid Designã€‚æœ‰äº†è®¾è®¡è§„èŒƒçš„æŒ‡å¯¼ï¼Œå°±æœ‰äº†æ›´å¤šçš„åº”ç”¨é‡‡ç”¨Holoä¸»é¢˜ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®€å•è®¤ä¸ºAndroid Designå°±æ˜¯Holoä¸»é¢˜ã€‚ä½†æ˜¯è¿™ç§ä¸»é¢˜æ˜¯é€‚åˆç§»åŠ¨è®¾å¤‡ï¼Œå…¶ä»–å¹³å°ç•¥æ˜¾çªå…€ã€‚ åœ¨4.0ä¹‹å‰Androidå¯ä»¥è¯´æ˜¯æ²¡æœ‰è®¾è®¡å¯è¨€çš„ï¼Œåœ¨4.0ä¹‹åæ¨å‡ºäº†Android Designï¼Œä»æ­¤Androidåœ¨è®¾è®¡ä¸Šæœ‰äº†å¾ˆå¤§çš„æ”¹å–„ï¼Œè€Œåœ¨ç¨‹åºå®ç°ä¸Šç›¸åº”çš„å°±æ˜¯Holoé£æ ¼ï¼Œæ‰€ä»¥ä½ çœ‹åˆ°æœ‰ç±»ä¼¼ Theme.Holo.Lightã€ Theme.Holo.Light.DarkActionBar å°±æ˜¯4.0çš„è®¾è®¡é£æ ¼ï¼Œä½†æ˜¯ä¸ºäº†è®©4.0ä¹‹å‰çš„ç‰ˆæœ¬ä¹Ÿèƒ½æœ‰è¿™ç§é£æ ¼æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™ä¸ªæ—¶å€™å°±ä¸å¾—ä¸å¼•ç”¨v7åŒ…äº†ï¼Œæ‰€ä»¥å¯¹åº”çš„å°±æœ‰ Theme.AppCompat.Lightã€Theme.AppCompat.Light.DarkActionBarï¼Œå¦‚æœä½ çš„ç¨‹åºæœ€å°æ”¯æŒçš„ç‰ˆæœ¬æ˜¯API14ï¼ˆå³Android 4.0ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ä¸ç”¨è€ƒè™‘v7çš„å…¼å®¹ Material ä¸»é¢˜ï¼šä»Android5.0ï¼ˆAPI21ï¼‰å¼€å§‹ï¼ŒGoogleåˆæ¨å‡ºäº†ææ–™è®¾è®¡è¯­è¨€Material Designï¼Œåˆå«Google Designã€‚MDå´‡å°šçš„å°±æ˜¯å›¾å±‚æ‰å¹³åŒ–ï¼Œæ‰€æœ‰å›¾å±‚åƒçº¸æˆ–è€…å¡ç‰‡ä¸€æ ·é‡å åœ¨ä¸€èµ·ï¼Œæ‰€ä»¥Android5.0å°±æœ‰äº†RecyclerViewå’ŒCardViewã€‚å›¾å±‚ä¹‹é—´æœ‰é—´éš”ï¼Œæ‰€ä»¥Android5.0ä¸­æœ‰äº†translationå’Œelevationä¸¤ä¸ªå±æ€§ã€‚åŒæ—¶ä¹Ÿè§„èŒƒäº†Androidçš„è¿åŠ¨å…ƒç´ ï¼Œç•Œé¢ä¸Šçš„æ¯ä¸ªå…ƒç´ ä¸æ˜¯æ— æ•…äº§ç”Ÿçš„ï¼ŒåŒæ—¶æ¯ä¸ªå›¾å±‚çš„äº§ç”Ÿå’Œæ¶ˆå¤±éƒ½æœ‰æ–¹å‘çš„çº¦å®šï¼Œä»å“ªé‡Œæ¥å°±å¾€å“ªé‡Œå»ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆAndroid 5.0ä¸­ä¼šæœ‰Rippleï¼ŒCircular Recealï¼ŒActivity Transition Androidåœ¨5.0ç‰ˆæœ¬æ¨å‡ºäº†Material Designçš„æ¦‚å¿µï¼Œè¿™æ˜¯Androidè®¾è®¡ä¸Šåˆä¸€å¤§çªç ´ã€‚å¯¹åº”çš„ç¨‹åºå®ç°ä¸Šå°±æœ‰Theme.Material.Lightã€Theme.Material.Light.DarkActionBarç­‰ï¼Œä½†æ˜¯è¿™ç§é£æ ¼åªèƒ½åº”ç”¨åœ¨åœ¨5.0ç‰ˆæœ¬çš„æ‰‹æœºï¼Œå¦‚æœåœ¨5.0ä¹‹å‰åº”ç”¨Material Designè¯¥æ€ä¹ˆåŠå‘¢ï¼ŸåŒæ ·çš„å¼•ç”¨appcompat-v7åŒ…ï¼Œè¿™ä¸ªæ—¶å€™çš„Theme.AppCompat.Lightã€Theme.AppCompat.Light.DarkActionBarå°±æ˜¯ç›¸å¯¹åº”å…¼å®¹çš„Material Designçš„Themeã€‚ ä¸»é¢˜ä¹Ÿè·Ÿæ ·å¼ä¸€æ ·æ˜¯å¯ä»¥ç»§æ‰¿çš„ï¼Œä¸»é¢˜çš„æ ¹åœ¨themes.xmlæ–‡ä»¶ä¸­ã€‚å®šä¹‰äº†&lt;style name=&quot;Theme&quot;&gt;&lt;/style&gt;ã€‚ 1234567891011121314151617181920&lt;style name=&quot;Theme&quot;&gt;&lt;/style&gt;&lt;!-- é»‘è‰²èƒŒæ™¯--&gt;&lt;style name=&quot;Theme.Black&quot;&gt; &lt;item name=&quot;windowBackground&quot;&gt;@color/black&lt;/item&gt; &lt;item name=&quot;colorBackground&quot;&gt;@color/black&lt;/item&gt;&lt;/style&gt;&lt;!-- æ²¡æœ‰æ ‡é¢˜ --&gt;&lt;style name=&quot;Theme.Black.NoTitleBar&quot;&gt; &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;&lt;/style&gt;&lt;!--å…¼å®¹ä¸»é¢˜çš„æ ¹ä¸»é¢˜ --&gt;&lt;style name=&quot;Theme.AppCompat&quot; parent=&quot;Base.Theme.AppCompat&quot;/&gt;&lt;style name=&quot;Theme.AppCompat.Dialog&quot; parent=&quot;Base.Theme.AppCompat.Dialog&quot;/&gt;&lt;!-- æ²¡æœ‰actionbar --&gt;&lt;style name=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt; &lt;!-- è¿™é‡Œæ˜¯AppCompatå®šä¹‰çš„å±æ€§ï¼Œå¦å¤–è¿˜æœ‰android:windowNoTitleå±æ€§ --&gt; &lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt; &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;&lt;/style&gt; å¸¸ç”¨å±æ€§12345678910111213&lt;item name=&quot;windowActionBar&quot;&gt;false&lt;/item&gt; &lt;item name=&quot;windowNoTitle&quot;&gt;true&lt;/item&gt;&lt;item name=&quot;android:windowFrame&quot;&gt;@null&lt;/item&gt; Dialogçš„windowFrameæ¡†ä¸ºæ— &lt;item name=&quot;android:windowIsFloating&quot;&gt;true&lt;/item&gt; æ˜¯å¦æµ®ç°åœ¨activityä¹‹ä¸Š&lt;item name=&quot;android:windowIsTranslucent&quot;&gt;false&lt;/item&gt; æ˜¯å¦åŠé€æ˜&lt;item name=&quot;android:windowNoTitle&quot;&gt;true&lt;/item&gt; æ˜¯å¦æ˜¾ç¤ºtitle&lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/dia_bg&lt;/item&gt; è®¾ç½®èƒŒæ™¯&lt;item name=&quot;android:backgroundDimEnabled&quot;&gt;false&lt;/item&gt; èƒŒæ™¯æ˜¯å¦å˜æš—&lt;item name=&quot;android:windowAnimationStyle&quot;&gt;@style/AnimBottom&lt;/item&gt; çª—å£çš„åŠ¨ç”»è®¾ç½®&lt;item name=&quot;android:windowContentOverlay&quot;&gt;@null&lt;/item&gt; è¿™ä¸ªdrawableä¼šè¦†ç›–åœ¨contentåŒºåŸŸçš„ä¸Šé¢&lt;item name=&quot;android:windowIsFloating&quot;&gt;true&lt;/item&gt; Dialogå¼¹çª—æ¼‚æµ® å‚è€ƒ æ ·å¼å’Œä¸»é¢˜èƒŒæ™¯ Androidä¸­ä¸»é¢˜çŸ¥è¯†","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"ARouter","date":"2022-03-08T02:25:29.639Z","path":"wiki/Android/å¼€æºåº“/ARouter/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"EventBus","date":"2022-03-08T02:25:29.639Z","path":"wiki/Android/å¼€æºåº“/EventBus/","text":"äº‹ä»¶æ€»çº¿åŒ¡æ•‘å•Šï¼Œé™ä½äº†ä»£ç çš„è€¦åˆæ€§ã€‚","tags":[],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"Dagger2å­¦ä¹ ç¬”è®°","date":"2022-03-08T02:25:29.639Z","path":"wiki/Android/å¼€æºåº“/Dagger2/","text":"","tags":[],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"Glide","date":"2022-03-08T02:25:29.639Z","path":"wiki/Android/å¼€æºåº“/Glide/","text":"æ­¤ç¯‡æ–‡ç« åªæ˜¯ç”¨äºè®°å½•ä½¿ç”¨Glideæ—¶è¦æ³¨æ„çš„ç‚¹å’Œä¸€äº›ä½¿ç”¨æŠ€å·§ï¼Œå¦‚éœ€æŸ¥çœ‹åŸºæœ¬ä½¿ç”¨ï¼Œè¯·æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚ä¹Ÿå¯ä»¥çœ‹çœ‹GlideåŸç†åˆ†æã€‚ æ³¨æ„ç‚¹å ä½ç¬¦1234567Glide.with(this) .load(url) .asBitmap() //æŒ‡å®šåŠ è½½çš„å›¾ç‰‡æ˜¯ä½å›¾ï¼Œè¿™æ ·åº•å±‚ä¸ä¼šè¿›è¡Œå›¾ç‰‡æ ¼å¼åˆ¤æ–­ï¼ŒGifå°±æ— æ³•æ’­æ”¾ï¼Œä¹Ÿå¯ä»¥è®¾ç½®asGif()æŒ‡æ˜æ˜¯Gifå›¾ç‰‡ .placeholder(R.drawable.loading)//ä¸‹è½½è¿‡ç¨‹ä¸­çš„å ä½ç¬¦ .error(R.drawable.error)//ä¸‹è½½å¤±è´¥åçš„æ˜¾ç¤º .diskCacheStrategy(DiskCacheStrategy.NONE)//ç£ç›˜ç­–ç•¥ï¼Œè¿™é‡Œä¸ä½¿ç”¨ç¼“å­˜ .into(imageView); ç¼“å­˜ç­‰çº§æ´»åŠ¨ç¼“å­˜ï¼šå†…å­˜ç¼“å­˜ï¼šé»˜è®¤å¼€å¯ï¼Œå¯ä»¥é€šè¿‡skipMemoryCache(true)å…³é—­å†…å­˜ç¼“å­˜ã€‚ ç£ç›˜ç¼“å­˜ï¼šInternalCacheDiskCacheFactoryï¼ˆé»˜è®¤ï¼‰ DiskCacheStrategy.NONE ä¸ç¼“å­˜æ–‡ä»¶ DiskCacheStrategy.DATA å¯¹åº” Glide 3 ä¸­çš„ DiskCacheStrategy.SOURCEï¼Œ åªç¼“å­˜åŸå›¾ DiskCacheStrategy.RESOURCE å¯¹åº” Glide 3 ä¸­çš„ DiskCacheStrategy.RESULTï¼Œ åªç¼“å­˜æœ€ç»ˆåŠ è½½çš„å›¾ DiskCacheStrategy.ALL åŒæ—¶ç¼“å­˜åŸå›¾å’Œç»“æœå›¾ DiskCacheStrategy.AUTOMATIC:è¡¨ç¤ºè®© Glide æ ¹æ®å›¾ç‰‡èµ„æºæ™ºèƒ½åœ°é€‰æ‹©ä½¿ç”¨å“ªä¸€ ç§ç¼“å­˜ç­–ç•¥(é»˜è®¤é€‰é¡¹)ã€‚ ç¼“å­˜é”®123//ç¼“å­˜çš„é”®åŒ…æ‹¬å›¾ç‰‡çš„å®½ã€é«˜ã€signatureç­‰å‚æ•°EngineKey key = keyFactory.buildKey(model, signature, width, height, transformations,resourceClass, transcodeClass, options) submitsubmit()æ–¹æ³•å…¶å®å°±æ˜¯å¯¹åº”çš„ Glide 3 ä¸­çš„ downloadOnly()æ–¹æ³•ï¼Œå’Œ preload()æ–¹æ³• ç±»ä¼¼ï¼Œsubmit()æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥æ›¿æ¢ into()æ–¹æ³•çš„ï¼Œä¸è¿‡ submit()æ–¹æ³•çš„ç”¨æ³•æ˜æ˜¾è¦ æ¯” preload()æ–¹æ³•å¤æ‚ä¸å°‘ã€‚è¿™ä¸ªæ–¹æ³•åªä¼šä¸‹è½½å›¾ç‰‡ï¼Œè€Œä¸ä¼šå¯¹å›¾ç‰‡è¿›è¡ŒåŠ è½½ã€‚å½“ å›¾ç‰‡ä¸‹è½½å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°å›¾ç‰‡çš„å­˜å‚¨è·¯å¾„ï¼Œä»¥ä¾¿åç»­è¿›è¡Œæ“ä½œã€‚ é‡è¦çŸ¥è¯†ç‚¹ é€šè¿‡attachä¸€ä¸ªFragmentæ¥ç›‘å¬Contextçš„ç”Ÿå‘½å‘¨æœŸï¼Œåˆç†çš„ç®¡ç†å›¾ç‰‡çš„åŠ è½½å’Œé‡Šæ”¾ã€‚ Glideé»˜è®¤é‡‡ç”¨çš„æ˜¯RGB-565ï¼Œç›¸æ¯”ARGB-8888å†…å­˜å ç”¨ä¼šå‡å°ä¸€åŠã€‚ ä¼šæ ¹æ®ImageViewçš„å°ºå¯¸æ¥ç¼“å­˜å›¾ç‰‡ã€‚ å¸¸ç”¨é…ç½®æ•´åˆOkHttp3ä¸ºäº†æå‡è¯·æ±‚æ•ˆç‡ï¼Œä½¿ç”¨æ›´é«˜æ•ˆçš„OkHttp3æ¥è¿›è¡Œèµ„æºçš„ä¸‹è½½ã€‚æ¥å…¥æ–¹å¼å¾ˆç®€å•ï¼Œç›´æ¥åœ¨gradleä¸­å¼•å…¥ compile â€œcom.github.bumptech.glide:okhttp3-integration:4.11.0â€ å®ƒä¼šè‡ªåŠ¨æ·»åŠ ä»¥ä¸‹é…ç½® 12345678@GlideModulepublic final class OkHttpLibraryGlideModule extends LibraryGlideModule &#123; @Override public void registerComponents(@NonNull Context context, @NonNull Glide glide, @NonNull Registry registry) &#123; registry.replace(GlideUrl.class, InputStream.class, new OkHttpUrlLoader.Factory()); &#125;&#125; æ³¨æ„ç‚¹ ä½¿ç”¨æ—¶å°½é‡ä¼ ç”Ÿå‘½å‘¨æœŸæ‰€å¯¹åº”çš„Contextï¼ˆæ¯”å¦‚Activityã€Fragmentï¼‰ å¦‚æœä½¿ç”¨ApplicationContextï¼Œåˆ™ä½¿ç”¨å¼±å¼•ç”¨ å‚è€ƒ https://github.com/bumptech/glide å®˜æ–¹æ–‡æ¡£","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"}]},{"title":"WindowManager","date":"2022-03-08T02:25:29.638Z","path":"wiki/Android/åŸºç¡€/WindowManager/","text":"æ¦‚è¿°Windowæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ¯ä¸€ä¸ªWindowéƒ½å¯¹åº”ç€ä¸€ä¸ªViewå’Œä¸€ä¸ªViewRootImplï¼ŒWindowå’ŒViewé€šè¿‡ViewRootImplæ¥å»ºç«‹è”ç³»ï¼Œå› æ­¤Windowå¹¶ä¸æ˜¯å®é™…å­˜åœ¨çš„ï¼Œå®ƒæ˜¯ä»¥Viewçš„å½¢å¼å­˜åœ¨ã€‚ Androidç³»ç»Ÿä¸­Windowæœ‰ä¸‰ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯åº”ç”¨Windowã€å­Windowå’Œç³»ç»ŸWindowã€‚åº”ç”¨ç±»Windowå¯¹åº”ç€ä¸€ä¸ªActivityã€‚å­Windowä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒéœ€è¦é™„å±åœ¨ç‰¹å®šçš„çˆ¶Windowä¹‹ä¸­ï¼Œæ¯”å¦‚å¸¸è§çš„ä¸€äº›Dialogå°±æ˜¯ä¸€ä¸ªå­Windowã€‚ç³»ç»ŸWindowæ˜¯éœ€è¦å£°æ˜æƒé™åœ¨èƒ½åˆ›å»ºçš„Windowï¼Œæ¯”å¦‚Toastå’Œç³»ç»ŸçŠ¶æ€æ è¿™äº›éƒ½æ˜¯ç³»ç»ŸWindowã€‚ Windowæ˜¯åˆ†å±‚çš„ï¼Œæ¯ä¸ªWindowéƒ½æœ‰å¯¹åº”çš„z-orderedï¼Œå±‚çº§å¤§çš„ä¼šè¦†ç›–åœ¨å±‚çº§å°çš„Windowçš„ä¸Šé¢ã€‚åœ¨ä¸‰ç±»Windowä¸­ï¼Œåº”ç”¨Windowçš„å±‚çº§èŒƒå›´æ˜¯199ï¼Œå­Windowçš„å±‚çº§èŒƒå›´æ˜¯10001999ï¼Œç³»ç»ŸWindowçš„å±‚çº§èŒƒå›´æ˜¯2000~2999ï¼Œè¿™äº›å±‚çº§èŒƒå›´å¯¹åº”ç€WindowManager.LayoutParamsçš„typeå‚æ•°ã€‚å¦‚æœæƒ³è¦Windowä½äºæ‰€æœ‰Windowçš„æœ€é¡¶å±‚ï¼Œé‚£ä¹ˆé‡‡ç”¨è¾ƒå¤§çš„å±‚çº§å³å¯ã€‚å¾ˆæ˜¾ç„¶ç³»ç»ŸWindowçš„å±‚çº§æ˜¯æœ€å¤§çš„ï¼Œè€Œä¸”ç³»ç»Ÿå±‚çº§æœ‰å¾ˆå¤šå€¼ï¼Œä¸€èˆ¬æˆ‘ä»¬å¯ä»¥é€‰ç”¨TYPE_SYSTEM_OVERLAYæˆ–è€…TYPE_SYSTEM_ERRORï¼Œå¦‚æœé‡‡ç”¨TYPE_SYSTEM_ERRORï¼Œåªéœ€è¦ä¸ºtypeå‚æ•°æŒ‡å®šè¿™ä¸ªå±‚çº§å³å¯:mLayoutParams.type &#x3D; LayoutParams.TYPE_SYSTEM_ERROR;åŒæ—¶å£°æ˜æƒé™:ã€‚å› ä¸ºç³»ç»Ÿç±»å‹çš„Windowæ˜¯éœ€è¦æ£€æŸ¥æƒé™çš„ï¼Œå¦‚æœä¸åœ¨AndroidManifestä¸­ä½¿ç”¨ç›¸åº”çš„æƒé™ï¼Œé‚£ä¹ˆåˆ›å»ºWindowçš„æ—¶å€™å°±ä¼šæŠ¥é”™ï¼Œ æµç¨‹åˆ†æWindowManagerå®ç°äº†ViewManageræ¥å£ï¼ŒViewManageræ¥å£æä¾›ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•ï¼š 123public void addView(View view, ViewGroup.LayoutParams params);public void updateViewLayout(View view, ViewGroup.LayoutParams params);public void removeView(View view); addViewè¿‡ç¨‹WindowManageråœ¨Androidä¸­çš„å®ç°ç±»ä¸ºWindowManagerImplï¼ŒWindowManagerImplå†…éƒ¨ä½¿ç”¨æ¡¥æ¥æ¨¡å¼å°è£…äº†WindowManagerGlobalã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889//WindowManagerGlobal.javapublic void addView(View view, ViewGroup.LayoutParams params, Display display, Window parentWindow) &#123; if (view == null) &#123; throw new IllegalArgumentException(&quot;view must not be null&quot;); &#125; if (display == null) &#123; throw new IllegalArgumentException(&quot;display must not be null&quot;); &#125; if (!(params instanceof WindowManager.LayoutParams)) &#123; throw new IllegalArgumentException(&quot;Params must be WindowManager.LayoutParams&quot;); &#125; final WindowManager.LayoutParams wparams = (WindowManager.LayoutParams) params; if (parentWindow != null) &#123; parentWindow.adjustLayoutParamsForSubWindow(wparams); &#125; else &#123; // If there&#x27;s no parent, then hardware acceleration for this view is // set from the application&#x27;s hardware acceleration setting. final Context context = view.getContext(); if (context != null &amp;&amp; (context.getApplicationInfo().flags &amp; ApplicationInfo.FLAG_HARDWARE_ACCELERATED) != 0) &#123; wparams.flags |= WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED; &#125; &#125; ViewRootImpl root; View panelParentView = null; synchronized (mLock) &#123; // Start watching for system property changes. if (mSystemPropertyUpdater == null) &#123; mSystemPropertyUpdater = new Runnable() &#123; @Override public void run() &#123; synchronized (mLock) &#123; for (int i = mRoots.size() - 1; i &gt;= 0; --i) &#123; mRoots.get(i).loadSystemProperties(); &#125; &#125; &#125; &#125;; SystemProperties.addChangeCallback(mSystemPropertyUpdater); &#125; int index = findViewLocked(view, false);//åˆ¤æ–­æ˜¯å¦å·²ç»æ·»åŠ  if (index &gt;= 0) &#123; if (mDyingViews.contains(view)) &#123; // Don&#x27;t wait for MSG_DIE to make it&#x27;s way through root&#x27;s queue. mRoots.get(index).doDie(); &#125; else &#123; throw new IllegalStateException(&quot;View &quot; + view + &quot; has already been added to the window manager.&quot;); &#125; // The previous removeView() had not completed executing. Now it has. &#125; // If this is a panel window, then find the window it is being // attached to for future reference. if (wparams.type &gt;= WindowManager.LayoutParams.FIRST_SUB_WINDOW &amp;&amp; wparams.type &lt;= WindowManager.LayoutParams.LAST_SUB_WINDOW) &#123; final int count = mViews.size(); for (int i = 0; i &lt; count; i++) &#123; if (mRoots.get(i).mWindow.asBinder() == wparams.token) &#123; panelParentView = mViews.get(i); &#125; &#125; &#125; root = new ViewRootImpl(view.getContext(), display); view.setLayoutParams(wparams); mViews.add(view); mRoots.add(root); mParams.add(wparams); // do this last because it fires off messages to start doing things try &#123; root.setView(view, wparams, panelParentView);//PhoneWindowè¦å¼€å§‹åˆ›å»º &#125; catch (RuntimeException e) &#123; // BadTokenException or InvalidDisplayException, clean up. if (index &gt;= 0) &#123; removeViewLocked(index, true); &#125; throw e; &#125; &#125;&#125; mViewså­˜å‚¨çš„æ˜¯æ‰€æœ‰Windowæ‰€å¯¹åº”çš„Viewï¼ŒmRootså­˜å‚¨çš„æ˜¯æ‰€æœ‰Windowæ‰€å¯¹åº”çš„ViewRootImplï¼ŒmParamså­˜å‚¨çš„æ˜¯æ‰€æœ‰Windowæ‰€å¯¹åº”çš„å¸ƒå±€å‚æ•°ï¼ŒmDyingViewsåˆ™å­˜å‚¨äº†é‚£äº›æ­£åœ¨è¢«åˆ é™¤çš„Viewå¯¹è±¡ï¼Œæˆ–è€…è¯´æ˜¯é‚£äº›å·²ç»è°ƒç”¨removeViewæ–¹æ³•ä½†æ˜¯åˆ é™¤æ“ä½œè¿˜æœªå®Œæˆçš„Windowå¯¹è±¡ã€‚ æ€»ç»“å¦‚ä¸‹ï¼š æ£€æŸ¥å‚æ•°æ˜¯å¦åˆæ³•ï¼Œå¦‚æœæ˜¯å­Windowé‚£ä¹ˆè¿˜éœ€è¦è°ƒæ•´ä¸€äº›å¸ƒå±€å‚æ•° åˆ›å»ºViewRootImplå¹¶å°†Viewæ·»åŠ åˆ°åˆ—è¡¨ä¸­ é€šè¿‡ViewRootImplæ¥æ›´æ–°ç•Œé¢å¹¶å®ŒæˆWindowçš„æ·»åŠ è¿‡ç¨‹ åœ¨setViewå†…éƒ¨ä¼šé€šè¿‡requestLayoutæ¥å®Œæˆå¼‚æ­¥åˆ·æ–°è¯·æ±‚ WindowSessionæœ€ç»ˆæ¥å®ŒæˆWindowçš„æ·»åŠ è¿‡ç¨‹ åœ¨Sessionå†…éƒ¨ä¼šé€šè¿‡WindowManagerServiceæ¥å®ç°Windowçš„æ·»åŠ  removeViewè¿‡ç¨‹updateViewè¿‡ç¨‹Windowçš„åˆ›å»ºè¿‡ç¨‹Activityçš„Windowåˆ›å»ºè¿‡ç¨‹ç”±Activityå·¥ä½œè¿‡ç¨‹å¯çŸ¥ï¼ŒActivityå¯åŠ¨æ—¶ä¼šè°ƒç”¨ActivityThreadçš„performLaunchActivityæ–¹æ³•æ¥å®Œæˆæ•´ä¸ªå¯åŠ¨æµç¨‹ã€‚ performLaunchActivityä¼šè°ƒç”¨Activityçš„attachæ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œä¼šåˆ›å»ºPhoneWindowå¯¹è±¡ã€‚ æ¥ä¸‹æ¥çœ‹çœ‹setContentViewåšäº†å“ªäº›äº‹æƒ… 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859//PhoneWindow.javapublic void setContentView(int layoutResID) &#123; // Note: FEATURE_CONTENT_TRANSITIONS may be set in the process of installing the window // decor, when theme attributes and the like are crystalized. Do not check the feature // before this happens. if (mContentParent == null) &#123; installDecor(); &#125; else if (!hasFeature(FEATURE_CONTENT_TRANSITIONS)) &#123; mContentParent.removeAllViews(); &#125; if (hasFeature(FEATURE_CONTENT_TRANSITIONS)) &#123; final Scene newScene = Scene.getSceneForLayout(mContentParent, layoutResID, getContext()); transitionTo(newScene); &#125; else &#123; mLayoutInflater.inflate(layoutResID, mContentParent); &#125; mContentParent.requestApplyInsets(); final Callback cb = getCallback(); if (cb != null &amp;&amp; !isDestroyed()) &#123; cb.onContentChanged(); &#125; mContentParentExplicitlySet = true;&#125;private void installDecor() &#123; mForceDecorInstall = false; if (mDecor == null) &#123; mDecor = generateDecor(-1); mDecor.setDescendantFocusability(ViewGroup.FOCUS_AFTER_DESCENDANTS); mDecor.setIsRootNamespace(true); ...&#125;protected DecorView generateDecor(int featureId) &#123; // System process doesn&#x27;t have application context and in that case we need to directly use // the context we have. Otherwise we want the application context, so we don&#x27;t cling to the // activity. Context context; if (mUseDecorContext) &#123; Context applicationContext = getContext().getApplicationContext(); if (applicationContext == null) &#123; context = getContext(); &#125; else &#123; context = new DecorContext(applicationContext, getContext()); if (mTheme != -1) &#123; context.setTheme(mTheme); &#125; &#125; &#125; else &#123; context = getContext(); &#125; return new DecorView(context, featureId, this, getAttributes());&#125; å¤§è‡´æ­¥éª¤å¦‚ä¸‹ï¼š å¦‚æœæ²¡æœ‰DecorViewï¼Œé‚£ä¹ˆå°±åˆ›å»ºå®ƒ å°†Viewæ·»åŠ åˆ°DecorViewçš„mContentParentä¸­ å›è°ƒActivityçš„onContentChangedæ–¹æ³•é€šçŸ¥Activityè§†å›¾å·²ç»å‘ç”Ÿæ”¹å˜ ActivityThreadä¸­çš„handleResumeActivityåªé€šè¿‡WindowManageræ·»åŠ è§†å›¾åˆ°DecorViewä¸­ å‚è€ƒ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ https://juejin.cn/post/6844904073586556935 https://blog.csdn.net/hzw19920329/article/details/52423771","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Viewçš„åŸºæœ¬æ¦‚å¿µ","date":"2022-03-08T02:25:29.637Z","path":"wiki/Android/åŸºç¡€/Viewçš„åŸºæœ¬æ¦‚å¿µ/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶","date":"2022-03-08T02:25:29.637Z","path":"wiki/Android/åŸºç¡€/Viewçš„äº‹ä»¶åˆ†å‘æœºåˆ¶/","text":"åˆ†å‘è¿‡ç¨‹äº‹ä»¶åˆ†å‘è¿‡ç¨‹ç”±ä¸‰ä¸ªæ–¹æ³•å…±åŒå®Œæˆï¼š dispatchTouchEventæ–¹æ³•è¿”å›å€¼ä¸ºtrueè¡¨ç¤ºäº‹ä»¶è¢«å½“å‰è§†å›¾æ¶ˆè´¹æ‰ï¼›è¿”å›ä¸ºsuper.dispatchTouchEventè¡¨ç¤ºç»§ç»­åˆ†å‘è¯¥äº‹ä»¶ï¼Œè¿”å›ä¸ºfalseè¡¨ç¤ºäº¤ç»™çˆ¶ç±»çš„onTouchEventå¤„ç†ã€‚ onInterceptTouchEventæ–¹æ³•è¿”å›å€¼ä¸ºtrueè¡¨ç¤ºæ‹¦æˆªè¿™ä¸ªäº‹ä»¶å¹¶äº¤ç”±è‡ªèº«çš„onTouchEventæ–¹æ³•è¿›è¡Œæ¶ˆè´¹ï¼›è¿”å›falseè¡¨ç¤ºä¸æ‹¦æˆªï¼Œéœ€è¦ç»§ç»­ä¼ é€’ç»™å­è§†å›¾ã€‚å¦‚æœreturn super.onInterceptTouchEvent(ev)ï¼Œ äº‹ä»¶æ‹¦æˆªåˆ†ä¸¤ç§æƒ…å†µ: å¦‚æœè¯¥Viewå­˜åœ¨å­Viewä¸”ç‚¹å‡»åˆ°äº†è¯¥å­View, åˆ™ä¸æ‹¦æˆª, ç»§ç»­åˆ†å‘ç»™å­Viewå¤„ç†, æ­¤æ—¶ç›¸å½“äºreturn falseã€‚ å¦‚æœè¯¥Viewæ²¡æœ‰å­Viewæˆ–è€…æœ‰å­Viewä½†æ˜¯æ²¡æœ‰ç‚¹å‡»ä¸­å­View(æ­¤æ—¶ViewGroup ç›¸å½“äºæ™®é€šView), åˆ™äº¤ç”±è¯¥Viewçš„onTouchEventå“åº”ï¼Œæ­¤æ—¶ç›¸å½“äºreturn trueã€‚ æ³¨æ„ï¼šä¸€èˆ¬çš„LinearLayoutã€ RelativeLayoutã€FrameLayoutç­‰ViewGroupé»˜è®¤ä¸æ‹¦æˆªï¼Œ è€ŒScrollViewã€ListViewç­‰ViewGroupåˆ™å¯èƒ½æ‹¦æˆªï¼Œå¾—çœ‹å…·ä½“æƒ…å†µã€‚ onTouchEventæ–¹æ³•è¿”å›å€¼ä¸ºtrueè¡¨ç¤ºå½“å‰è§†å›¾å¯ä»¥å¤„ç†å¯¹åº”çš„äº‹ä»¶ï¼›è¿”å›å€¼ä¸ºfalseè¡¨ç¤ºå½“å‰è§†å›¾ä¸å¤„ç†è¿™ä¸ªäº‹ä»¶ï¼Œå®ƒä¼šè¢«ä¼ é€’ç»™çˆ¶è§†å›¾çš„onTouchEventæ–¹æ³•è¿›è¡Œå¤„ç†ã€‚å¦‚æœreturn super.onTouchEvent(ev)ï¼Œäº‹ä»¶å¤„ç†åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š å¦‚æœè¯¥Viewæ˜¯clickableæˆ–è€…longclickableçš„,åˆ™ä¼šè¿”å›true, è¡¨ç¤ºæ¶ˆè´¹äº†è¯¥äº‹ä»¶, ä¸è¿”å›trueä¸€æ ·; å¦‚æœè¯¥Viewä¸æ˜¯clickableæˆ–è€…longclickableçš„,åˆ™ä¼šè¿”å›false, è¡¨ç¤ºä¸æ¶ˆè´¹è¯¥äº‹ä»¶,å°†ä¼šå‘ä¸Šä¼ é€’,ä¸è¿”å›falseä¸€æ ·ã€‚ æ³¨æ„ï¼šåœ¨Androidç³»ç»Ÿä¸­ï¼Œæ‹¥æœ‰äº‹ä»¶ä¼ é€’å¤„ç†èƒ½åŠ›çš„ç±»æœ‰ä»¥ä¸‹ä¸‰ç§ï¼š Activityï¼šæ‹¥æœ‰åˆ†å‘å’Œæ¶ˆè´¹ä¸¤ä¸ªæ–¹æ³•ã€‚ ViewGroupï¼šæ‹¥æœ‰åˆ†å‘ã€æ‹¦æˆªå’Œæ¶ˆè´¹ä¸‰ä¸ªæ–¹æ³•ã€‚ Viewï¼šæ‹¥æœ‰åˆ†å‘ã€æ¶ˆè´¹ä¸¤ä¸ªæ–¹æ³•ã€‚ ä¸‰ä¸ªæ–¹æ³•çš„å…³ç³»ç”¨ä¼ªä»£ç è¡¨ç¤ºå¦‚ä¸‹ï¼š 12345678910public boolean dispatchTouchEvent(MotionEvent ev) &#123; boolean consume = false; if (onInterceptTouchEvent(ev)) &#123; consume = onTouchEvent(ev); &#125; else &#123; coonsume = child.dispatchTouchEvent(ev); &#125; return consume;&#125; é€šè¿‡ä¸Šé¢çš„ä¼ªä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å¤§è‡´äº†è§£ç‚¹å‡»äº‹ä»¶çš„ä¼ é€’è§„åˆ™ï¼šå¯¹åº”ä¸€ä¸ªæ ¹ViewGroupæ¥è¯´ï¼Œç‚¹å‡»äº‹ä»¶äº§ç”Ÿåï¼Œé¦–å…ˆä¼šä¼ é€’ç»™å®ƒï¼Œè¿™æ˜¯å®ƒçš„dispatchTouchEventå°±ä¼šè¢«è°ƒç”¨ï¼Œå¦‚æœè¿™ä¸ªViewGroupçš„onInterceptTouchEventæ–¹æ³•è¿”å›trueå°±è¡¨ç¤ºå®ƒè¦æ‹¦æˆªå½“å‰äº‹ä»¶ï¼Œæ¥ç€äº‹ä»¶å°±ä¼šäº¤ç»™è¿™ä¸ªViewGroupå¤„ç†ï¼Œè¿™æ—¶å¦‚æœå®ƒçš„mOnTouchListenerè¢«è®¾ç½®ï¼Œåˆ™onTouchä¼šè¢«è°ƒç”¨ï¼Œå¦åˆ™onTouchEventä¼šè¢«è°ƒç”¨ã€‚åœ¨onTouchEventä¸­ï¼Œå¦‚æœè®¾ç½®äº†mOnCLickListenerï¼Œåˆ™onClickä¼šè¢«è°ƒç”¨ã€‚åªè¦Viewçš„CLICKABLEå’ŒLONG_CLICKABLEæœ‰ä¸€ä¸ªä¸ºtrueï¼ŒonTouchEvent()å°±ä¼šè¿”å›trueæ¶ˆè€—è¿™ä¸ªäº‹ä»¶ã€‚å¦‚æœè¿™ä¸ªViewGroupçš„onInterceptTouchEventæ–¹æ³•è¿”å›falseå°±è¡¨ç¤ºå®ƒä¸æ‹¦æˆªå½“å‰äº‹ä»¶ï¼Œè¿™æ—¶å½“å‰äº‹ä»¶å°±ä¼šç»§ç»­ä¼ é€’ç»™å®ƒçš„å­å…ƒç´ ï¼Œæ¥ç€å­å…ƒç´ çš„dispatchTouchEventæ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ï¼Œå¦‚æ­¤åå¤ç›´åˆ°äº‹ä»¶è¢«æœ€ç»ˆå¤„ç†ã€‚ ä¸€äº›é‡è¦çš„ç»“è®ºï¼š äº‹ä»¶ä¼ é€’ä¼˜å…ˆçº§ï¼šonTouchListener.onTouch &gt; onTouchEvent &gt; onClickListener.onClickã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæ—¶é—´åºåˆ—åªèƒ½è¢«ä¸€ä¸ªViewæ‹¦æˆªä¸”æ¶ˆè€—ã€‚å› ä¸ºä¸€æ—¦ä¸€ä¸ªå…ƒç´ æ‹¦æˆªäº†æ­¤äº‹ä»¶ï¼Œé‚£ä¹ˆåŒä¸€ä¸ªäº‹ä»¶åºåˆ—å†…çš„æ‰€æœ‰äº‹ä»¶éƒ½ä¼šç›´æ¥äº¤ç»™å®ƒå¤„ç†ï¼ˆå³ä¸ä¼šå†è°ƒç”¨è¿™ä¸ªViewçš„æ‹¦æˆªæ–¹æ³•å»è¯¢é—®å®ƒæ˜¯å¦è¦æ‹¦æˆªäº†ï¼Œè€Œæ˜¯æŠŠå‰©ä½™çš„ACTION_MOVEã€ACTION_DOWNç­‰äº‹ä»¶ç›´æ¥äº¤ç»™å®ƒæ¥å¤„ç†ï¼‰ã€‚ç‰¹ä¾‹ï¼šé€šè¿‡å°†é‡å†™Viewçš„onTouchEventè¿”å›falseå¯å¼ºè¡Œå°†äº‹ä»¶è½¬äº¤ç»™å…¶ä»–Viewå¤„ç†ã€‚ å¦‚æœViewä¸æ¶ˆè€—é™¤ACTION_DOWNä»¥å¤–çš„å…¶ä»–äº‹ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªç‚¹å‡»äº‹ä»¶ä¼šæ¶ˆå¤±ï¼Œæ­¤æ—¶çˆ¶å…ƒç´ çš„onTouchEventå¹¶ä¸ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”å½“å‰Viewå¯ä»¥æŒç»­æ”¶åˆ°åç»­çš„äº‹ä»¶ï¼Œæœ€ç»ˆè¿™äº›æ¶ˆå¤±çš„ç‚¹å‡»äº‹ä»¶ä¼šä¼ é€’ç»™Activityå¤„ç†ã€‚ ViewGroupé»˜è®¤ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ï¼ˆè¿”å›falseï¼‰ã€‚ Viewçš„onTouchEventé»˜è®¤éƒ½ä¼šæ¶ˆè€—äº‹ä»¶ï¼ˆè¿”å›trueï¼‰ï¼Œé™¤éå®ƒæ˜¯ä¸å¯ç‚¹å‡»çš„ï¼ˆclickableå’ŒlongClickableåŒæ—¶ä¸ºfalseï¼‰ã€‚Viewçš„longClickableå±æ€§é»˜è®¤éƒ½ä¸ºfalseï¼Œclickableå±æ€§è¦åˆ†æƒ…å†µï¼Œæ¯”å¦‚Buttonçš„clickableå±æ€§é»˜è®¤ä¸ºtrueï¼Œè€ŒTextViewçš„clickableé»˜è®¤ä¸ºfalseã€‚ Viewçš„enableå±æ€§ä¸å½±å“onTouchEventçš„é»˜è®¤è¿”å›å€¼ã€‚ é€šè¿‡requestDisallowInterceptTouchEventæ–¹æ³•å¯ä»¥åœ¨å­å…ƒç´ ä¸­å¹²é¢„çˆ¶å…ƒç´ çš„äº‹ä»¶åˆ†å‘è¿‡ç¨‹ï¼Œä½†æ˜¯ACTION_DOWNäº‹ä»¶é™¤å¤–ã€‚ ACTION_CANCELä»€ä¹ˆæ—¶å€™è§¦å‘ï¼Œè§¦æ‘¸buttonç„¶åæ»‘åŠ¨åˆ°å¤–éƒ¨æŠ¬èµ·ä¼šè§¦å‘ç‚¹å‡»äº‹ä»¶å—ï¼Œå†æ»‘åŠ¨å›å»æŠ¬èµ·ä¼šä¹ˆï¼Ÿ ä¸€èˆ¬ACTION_CANCELå’ŒACTION_UPéƒ½ä½œä¸ºViewä¸€æ®µäº‹ä»¶å¤„ç†çš„ç»“æŸã€‚å¦‚æœåœ¨çˆ¶Viewä¸­æ‹¦æˆªACTION_UPæˆ–ACTION_MOVEï¼Œåœ¨ç¬¬ä¸€æ¬¡çˆ¶è§†å›¾æ‹¦æˆªæ¶ˆæ¯çš„ç¬é—´ï¼Œçˆ¶è§†å›¾æŒ‡å®šå­è§†å›¾ä¸æ¥å—åç»­æ¶ˆæ¯äº†ï¼ŒåŒæ—¶å­è§†å›¾ä¼šæ”¶åˆ°ACTION_CANCELäº‹ä»¶ã€‚å¦‚æœè§¦æ‘¸æŸä¸ªæ§ä»¶ï¼Œä½†æ˜¯åˆä¸æ˜¯åœ¨è¿™ä¸ªæ§ä»¶çš„åŒºåŸŸä¸ŠæŠ¬èµ·ï¼ˆç§»åŠ¨åˆ°åˆ«çš„åœ°æ–¹äº†ï¼‰ï¼Œå°±ä¼šå‡ºç°action_cancelã€‚ ç‚¹å‡»äº‹ä»¶è¢«æ‹¦æˆªï¼Œä½†æ˜¯æƒ³ä¼ åˆ°ä¸‹é¢çš„Viewï¼Œå¦‚ä½•æ“ä½œï¼Ÿ é‡å†™å­ç±»çš„requestDisallowInterceptTouchEvent()æ–¹æ³•è¿”å›trueå°±ä¸ä¼šæ‰§è¡Œçˆ¶ç±»çš„onInterceptTouchEvent()ï¼Œå³å¯å°†ç‚¹å‡»äº‹ä»¶ä¼ åˆ°ä¸‹é¢çš„Viewã€‚ å¦‚ä½•è§£å†³Viewçš„äº‹ä»¶å†²çªï¼Ÿä¸¾ä¸ªå¼€å‘ä¸­é‡åˆ°çš„ä¾‹å­ï¼Ÿ å¸¸è§å¼€å‘ä¸­äº‹ä»¶å†²çªçš„æœ‰ScrollViewä¸RecyclerViewçš„æ»‘åŠ¨å†²çªã€RecyclerViewå†…åµŒåŒæ—¶æ»‘åŠ¨åŒä¸€æ–¹å‘ã€‚ æ»‘åŠ¨å†²çªçš„å¤„ç†è§„åˆ™ï¼š å¯¹äºç”±äºå¤–éƒ¨æ»‘åŠ¨å’Œå†…éƒ¨æ»‘åŠ¨æ–¹å‘ä¸ä¸€è‡´å¯¼è‡´çš„æ»‘åŠ¨å†²çªï¼Œå¯ä»¥æ ¹æ®æ»‘åŠ¨çš„æ–¹å‘åˆ¤æ–­è°æ¥æ‹¦æˆªäº‹ä»¶ã€‚ å¯¹äºç”±äºå¤–éƒ¨æ»‘åŠ¨æ–¹å‘å’Œå†…éƒ¨æ»‘åŠ¨æ–¹å‘ä¸€è‡´å¯¼è‡´çš„æ»‘åŠ¨å†²çªï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼Œè§„å®šä½•æ—¶è®©å¤–éƒ¨Viewæ‹¦æˆªäº‹ä»¶ï¼Œä½•æ—¶ç”±å†…éƒ¨Viewæ‹¦æˆªäº‹ä»¶ã€‚ å¯¹äºä¸Šé¢ä¸¤ç§æƒ…å†µçš„åµŒå¥—ï¼Œç›¸å¯¹å¤æ‚ï¼Œå¯åŒæ ·æ ¹æ®éœ€æ±‚åœ¨ä¸šåŠ¡ä¸Šæ‰¾åˆ°çªç ´ç‚¹ã€‚ æ»‘åŠ¨å†²çªçš„å®ç°æ–¹æ³•ï¼š å¤–éƒ¨æ‹¦æˆªæ³•ï¼šæŒ‡ç‚¹å‡»äº‹ä»¶éƒ½å…ˆç»è¿‡çˆ¶å®¹å™¨çš„æ‹¦æˆªå¤„ç†ï¼Œå¦‚æœçˆ¶å®¹å™¨éœ€è¦æ­¤äº‹ä»¶å°±æ‹¦æˆªï¼Œå¦åˆ™å°±ä¸æ‹¦æˆªã€‚å…·ä½“æ–¹æ³•ï¼šéœ€è¦é‡å†™çˆ¶å®¹å™¨çš„onInterceptTouchEventæ–¹æ³•ï¼Œåœ¨å†…éƒ¨åšå‡ºç›¸åº”çš„æ‹¦æˆªã€‚ å†…éƒ¨æ‹¦æˆªæ³•ï¼šæŒ‡çˆ¶å®¹å™¨ä¸æ‹¦æˆªä»»ä½•äº‹ä»¶ï¼Œè€Œå°†æ‰€æœ‰çš„äº‹ä»¶éƒ½ä¼ é€’ç»™å­å®¹å™¨ï¼Œå¦‚æœå­å®¹å™¨éœ€è¦æ­¤äº‹ä»¶å°±ç›´æ¥æ¶ˆè€—ï¼Œå¦åˆ™å°±äº¤ç”±çˆ¶å®¹å™¨è¿›è¡Œå¤„ç†ã€‚å…·ä½“æ–¹æ³•ï¼šéœ€è¦é…åˆrequestDisallowInterceptTouchEventæ–¹æ³•ã€‚ å‚è€ƒ","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Viewçš„å·¥ä½œæµç¨‹","date":"2022-03-08T02:25:29.637Z","path":"wiki/Android/åŸºç¡€/Viewçš„å·¥ä½œæµç¨‹/","text":"DecorViewæ˜¯è§†å›¾çš„é¡¶çº§Viewï¼Œæˆ‘ä»¬æ·»åŠ çš„å¸ƒå±€æ–‡ä»¶æ˜¯å®ƒçš„ä¸€ä¸ªå­å¸ƒå±€ï¼Œè€ŒViewRootImplåˆ™è´Ÿè´£æ¸²æŸ“è§†å›¾ï¼Œå®ƒè°ƒç”¨äº†ä¸€ä¸ªperformTravealsæ–¹æ³•ä½¿å¾—ViewTreeå¼€å§‹ä¸‰å¤§å·¥ä½œæµç¨‹ï¼Œç„¶åä½¿å¾—Viewå±•ç°åœ¨æˆ‘ä»¬é¢å‰ã€‚ ç»˜åˆ¶çš„æµç¨‹æ¦‚è¦ æ³¨æ„ï¼šè¿™é‡Œçš„ä¸‰ä¸ªæ­¥éª¤æ˜¯æ¯æ¬¡ä»æ ¹è§†å›¾åˆ°æœ€ä¸Šå±‚è§†å›¾ä¾æ¬¡æ‰§è¡Œå®Œï¼Œå†è¿›è¡Œä¸‹ä¸€æ­¥éª¤ã€‚ ä¸‰ä¸ªæ­¥éª¤ï¼š æµ‹é‡ï¼ˆmeasureï¼‰ï¼šæµ‹é‡è§†å›¾å¤§å°ã€‚ä»é¡¶å±‚çˆ¶Viewåˆ°å­Viewé€’å½’è°ƒç”¨measureæ–¹æ³•ï¼Œmeasureæ–¹æ³•åˆå›è°ƒOnMeasureã€‚ å¸ƒå±€ï¼ˆlayoutï¼‰ï¼šç¡®å®šViewä½ç½®ï¼Œè¿›è¡Œé¡µé¢å¸ƒå±€ã€‚ä»é¡¶å±‚çˆ¶Viewå‘å­Viewçš„é€’å½’è°ƒç”¨view.layoutæ–¹æ³•çš„è¿‡ç¨‹ï¼Œå³çˆ¶Viewæ ¹æ®ä¸Šä¸€æ­¥measureå­Viewæ‰€å¾—åˆ°çš„å¸ƒå±€å¤§å°å’Œå¸ƒå±€å‚æ•°ï¼Œå°†å­Viewæ”¾åœ¨åˆé€‚çš„ä½ç½®ä¸Šã€‚ ç»˜åˆ¶ï¼ˆdrawï¼‰ï¼šç»˜åˆ¶è§†å›¾ã€‚ViewRootåˆ›å»ºä¸€ä¸ªCanvaså¯¹è±¡ï¼Œç„¶åè°ƒç”¨OnDraw()ã€‚å…­ä¸ªæ­¥éª¤ï¼š ç»˜åˆ¶è§†å›¾çš„èƒŒæ™¯ï¼› ä¿å­˜ç”»å¸ƒçš„å›¾å±‚ï¼ˆLayerï¼‰ï¼› ç»˜åˆ¶Viewçš„å†…å®¹ï¼› ç»˜åˆ¶Viewå­è§†å›¾ï¼Œå¦‚æœæ²¡æœ‰å°±ä¸ç”¨ï¼› è¿˜åŸå›¾å±‚ï¼ˆLayerï¼‰ï¼› ç»˜åˆ¶æ»šåŠ¨æ¡ ç»˜åˆ¶ä»ViewRootImplçš„performTraversals()æ–¹æ³•å¼€å§‹ï¼Œä»ä¸Šåˆ°ä¸‹éå†æ•´ä¸ªè§†å›¾æ ‘ï¼Œæ¯ä¸ªViewæ§ä»¶è´Ÿè´£ç»˜åˆ¶è‡ªå·±ï¼Œè€ŒViewGroupè¿˜éœ€è¦è´Ÿè´£é€šçŸ¥è‡ªå·±çš„å­Viewè¿›è¡Œç»˜åˆ¶æ“ä½œã€‚ 12345678910111213141516private void performTraversals() &#123; ... int childWidthMeasureSpec = getRootMeasureSpec(mWidth, lp.width); int childHeightMeasureSpec = getRootMeasureSpec(mHeight, lp.height); ... //æ‰§è¡Œæµ‹é‡æµç¨‹ performMeasure(childWidthMeasureSpec, childHeightMeasureSpec); ... //æ‰§è¡Œå¸ƒå±€æµç¨‹ performLayout(lp, desiredWindowWidth, desiredWindowHeight); ... //æ‰§è¡Œç»˜åˆ¶æµç¨‹ performDraw();&#125; measureMeasureSpecMeasureSpecè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ª32ä½çš„æ•´å½¢å€¼ï¼Œå®ƒçš„é«˜2ä½è¡¨ç¤ºæµ‹é‡æ¨¡å¼SpecModeï¼Œä½30ä½è¡¨ç¤ºæŸç§æµ‹é‡æ¨¡å¼ä¸‹çš„è§„æ ¼å¤§å°SpecSizeã€‚ modeçš„æ¨¡å¼åˆ†ä¸ºï¼š EXACTLYï¼šå¯¹åº”LayoutParamsä¸­çš„match_parentå’Œå…·ä½“æ•°å€¼è¿™ä¸¤ç§æ¨¡å¼ã€‚æ£€æµ‹åˆ°Viewæ‰€éœ€è¦çš„ç²¾ç¡®å¤§å°ï¼Œè¿™æ—¶å€™Viewçš„æœ€ç»ˆå¤§å°å°±æ˜¯SpecSizeæ‰€æŒ‡å®šçš„å€¼ï¼Œ AT_MOST ï¼šå¯¹åº”LayoutParamsä¸­çš„wrap_contentã€‚Viewçš„å¤§å°ä¸èƒ½å¤§äºçˆ¶å®¹å™¨çš„å¤§å°ã€‚ UNSPECIFIED ï¼šä¸å¯¹Viewè¿›è¡Œä»»ä½•é™åˆ¶ï¼Œè¦å¤šå¤§ç»™å¤šå¤§ï¼Œä¸€èˆ¬ç”¨äºç³»ç»Ÿå†…éƒ¨ï¼Œå¦‚ListViewï¼ŒScrollView 12345678910111213141516171819202122232425262728293031323334353637383940414243444546public static class MeasureSpec &#123; private static final int MODE_SHIFT = 30; private static final int MODE_MASK = 0x3 &lt;&lt; MODE_SHIFT; /** * UNSPECIFIED æ¨¡å¼ï¼š * çˆ¶Viewä¸å¯¹å­Viewæœ‰ä»»ä½•é™åˆ¶ï¼Œå­Viewéœ€è¦å¤šå¤§å°±å¤šå¤§ */ public static final int UNSPECIFIED = 0 &lt;&lt; MODE_SHIFT; /** * EXACTYLY æ¨¡å¼ï¼š * çˆ¶Viewå·²ç»æµ‹é‡å‡ºå­Viweæ‰€éœ€è¦çš„ç²¾ç¡®å¤§å°ï¼Œè¿™æ—¶å€™Viewçš„æœ€ç»ˆå¤§å° * å°±æ˜¯SpecSizeæ‰€æŒ‡å®šçš„å€¼ã€‚å¯¹åº”äºmatch_parentå’Œç²¾ç¡®æ•°å€¼è¿™ä¸¤ç§æ¨¡å¼ */ public static final int EXACTLY = 1 &lt;&lt; MODE_SHIFT; /** * AT_MOST æ¨¡å¼ï¼š * å­Viewçš„æœ€ç»ˆå¤§å°æ˜¯çˆ¶ViewæŒ‡å®šçš„SpecSizeå€¼ï¼Œå¹¶ä¸”å­Viewçš„å¤§å°ä¸èƒ½å¤§äºè¿™ä¸ªå€¼ï¼Œ * å³å¯¹åº”wrap_contentè¿™ç§æ¨¡å¼ */ public static final int AT_MOST = 2 &lt;&lt; MODE_SHIFT; //å°†sizeå’Œmodeæ‰“åŒ…æˆä¸€ä¸ª32ä½çš„intå‹æ•°å€¼ //é«˜2ä½è¡¨ç¤ºSpecModeï¼Œæµ‹é‡æ¨¡å¼ï¼Œä½30ä½è¡¨ç¤ºSpecSizeï¼ŒæŸç§æµ‹é‡æ¨¡å¼ä¸‹çš„è§„æ ¼å¤§å° public static int makeMeasureSpec(int size, int mode) &#123; if (sUseBrokenMakeMeasureSpec) &#123; return size + mode; &#125; else &#123; return (size &amp; ~MODE_MASK) | (mode &amp; MODE_MASK); &#125; &#125; //å°†32ä½çš„MeasureSpecè§£åŒ…ï¼Œè¿”å›SpecMode,æµ‹é‡æ¨¡å¼ public static int getMode(int measureSpec) &#123; return (measureSpec &amp; MODE_MASK); &#125; //å°†32ä½çš„MeasureSpecè§£åŒ…ï¼Œè¿”å›SpecSizeï¼ŒæŸç§æµ‹é‡æ¨¡å¼ä¸‹çš„è§„æ ¼å¤§å° public static int getSize(int measureSpec) &#123; return (measureSpec &amp; ~MODE_MASK); &#125; //... &#125; ViewGroupçš„measureç”±äºDecorViewç»§æ‰¿è‡ªFrameLayoutï¼Œæ˜¯PhoneWindowçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œè€ŒFrameLayoutæ²¡æœ‰measureæ–¹æ³•ï¼Œå› æ­¤è°ƒç”¨çš„æ˜¯çˆ¶ç±»Viewçš„measureæ–¹æ³•ã€‚ Viewçš„measurelayoutViewçš„layoutæµç¨‹123456789101112131415161718192021222324// ViewRootImpl.javaprivate void performLayout(WindowManager.LayoutParams lp, int desiredWindowWidth, int desiredWindowHeight) &#123; ... host.layout(0, 0, host.getMeasuredWidth(), host.getMeasuredHeight()); ...&#125;// View.javapublic void layout(int l, int t, int r, int b) &#123; ... // é€šè¿‡setFrameæ–¹æ³•æ¥è®¾å®šViewçš„å››ä¸ªé¡¶ç‚¹çš„ä½ç½®ï¼Œå³Viewåœ¨çˆ¶å®¹å™¨ä¸­çš„ä½ç½® boolean changed = isLayoutModeOptical(mParent) ? set OpticalFrame(l, t, r, b) : setFrame(l, t, r, b); ... onLayout(changed, l, t, r, b); ...&#125;// ç©ºæ–¹æ³•ï¼Œå­ç±»å¦‚æœæ˜¯ViewGroupç±»å‹ï¼Œåˆ™é‡å†™è¿™ä¸ªæ–¹æ³•ï¼Œå®ç°ViewGroup// ä¸­æ‰€æœ‰Viewæ§ä»¶å¸ƒå±€æµç¨‹protected void onLayout(boolean changed, int left, int top, int right, int bottom) &#123;&#125; Layoutçš„onLayout12345678910111213141516171819202122232425262728293031323334353637383940414243protected void onlayout(boolean changed, int l, int t, int r, int b) &#123; if (mOrientation == VERTICAL) &#123; layoutVertical(l, t, r, b); &#125; else &#123; layoutHorizontal(l,) &#125;&#125;// layoutVerticalæ ¸å¿ƒæºç void layoutVertical(int left, int top, int right, int bottom) &#123; ... final int count = getVirtualChildCount(); for (int i = 0; i &lt; count; i++) &#123; final View child = getVirtualChildAt(i); if (child == null) &#123; childTop += measureNullChild(i); &#125; else if (child.getVisibility() != GONE) &#123; final int childWidth = child.getMeasureWidth(); final int childHeight = child.getMeasuredHeight(); final LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams) child.getLayoutParams(); ... if (hasDividerBeforeChildAt(i)) &#123; childTop += mDividerHeight; &#125; childTop += lp.topMargin; // ä¸ºå­å…ƒç´ ç¡®å®šå¯¹åº”çš„ä½ç½® setChildFrame(child, childLeft, childTop + getLocationOffset(child), childWidth, childHeight); // childTopä¼šé€æ¸å¢å¤§ï¼Œæ„å‘³ç€åé¢çš„å­å…ƒç´ ä¼šè¢« // æ”¾ç½®åœ¨é ä¸‹çš„ä½ç½® childTop += childHeight + lp.bottomMargin + getNextLocationOffset(child); i += getChildrenSkipCount(child,i) &#125; &#125;&#125;private void setChildFrame(View child, int left, int top, int width, int height) &#123; child.layout(left, top, left + width, top + height);&#125; draw12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152private void performDraw() &#123; ... draw(fullRefrawNeeded); ...&#125;private void draw(boolean fullRedrawNeeded) &#123; ... if (!drawSoftware(surface, mAttachInfo, xOffest, yOffset, scalingRequired, dirty)) &#123; return; &#125; ...&#125;private boolean drawSoftware(Surface surface, AttachInfo attachInfo, int xoff, int yoff, boolean scallingRequired, Rect dirty) &#123; ... mView.draw(canvas); ...&#125;// ç»˜åˆ¶åŸºæœ¬ä¸Šå¯ä»¥åˆ†ä¸ºå…­ä¸ªæ­¥éª¤public void draw(Canvas canvas) &#123; ... // æ­¥éª¤ä¸€ï¼šç»˜åˆ¶Viewçš„èƒŒæ™¯ drawBackground(canvas); ... // æ­¥éª¤äºŒï¼šå¦‚æœéœ€è¦çš„è¯ï¼Œä¿æŒcanvasçš„å›¾å±‚ï¼Œä¸ºfadingåšå‡†å¤‡ saveCount = canvas.getSaveCount(); ... canvas.saveLayer(left, top, right, top + length, null, flags); ... // æ­¥éª¤ä¸‰ï¼šç»˜åˆ¶Viewçš„å†…å®¹ onDraw(canvas); ... // æ­¥éª¤å››ï¼šç»˜åˆ¶Viewçš„å­View dispatchDraw(canvas); ... // æ­¥éª¤äº”ï¼šå¦‚æœéœ€è¦çš„è¯ï¼Œç»˜åˆ¶Viewçš„fadingè¾¹ç¼˜å¹¶æ¢å¤å›¾å±‚ canvas.drawRect(left, top, right, top + length, p); ... canvas.restoreToCount(saveCount); ... // æ­¥éª¤å…­ï¼šç»˜åˆ¶Viewçš„è£…é¥°(ä¾‹å¦‚æ»šåŠ¨æ¡ç­‰ç­‰) onDrawForeground(canvas)&#125; å¸¸è§é—®é¢˜å¦‚ä½•åœ¨onCreateä¸­è·å–Viewçš„é«˜å®½12345678910111213141516171819202122//æ–¹æ³•1ï¼šview.post(new Runnable() &#123; @Override public void run() &#123; int width = view.getWidth(); int measuredWidth = view.getMeasuredWidth(); Log.i(TAG, &quot;width: &quot; + width); Log.i(TAG, &quot;measuredWidth: &quot; + measuredWidth); &#125; &#125;);//æ–¹æ³•2ï¼šViewTreeObserver vto = view.getViewTreeObserver(); vto.addOnGlobalLayoutListener(new OnGlobalLayoutListener() &#123; @Override public void onGlobalLayout() &#123; view.getViewTreeObserver().removeGlobalOnLayoutListener(this); Log.i(TAG, &quot;width: &quot; + view.getWidth()); Log.i(TAG, &quot;height: &quot; + view.getHeight()); &#125; &#125;); å‚è€ƒ https://jsonchao.github.io/2018/10/28/Android%20View%E7%9A%84%E7%BB%98%E5%88%B6%E6%B5%81%E7%A8%8B/","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"HandleråŸºæœ¬ç”¨æ³•","date":"2022-03-08T02:25:29.636Z","path":"wiki/Android/åŸºç¡€/HandleråŸºæœ¬ç”¨æ³•/","text":"Hanlderç³»åˆ—ç›®å½•ï¼š HandleråŸºæœ¬ç”¨æ³• HandleråŸç† æ¦‚è¦A Handler allows you to send and process Message and Runnable objects associated with a threadâ€™s MessageQueue. Each Handler instanceis associated with a single thread and that threadâ€™s message queue. When you create a new Handler it is bound to a Looper.It will deliver messages and runnables to that Looperâ€™s message queue and execute them on that Looperâ€™s thread. There are two main uses for a Handler: (1) to schedule messages and runnables to be executed at some point in the future;and (2) to enqueue an action to be performed on a different thread than your own. Scheduling messages is accomplished with the post(Runnable), postAtTime(java.lang.Runnable, long),postDelayed(Runnable, Object, long), sendEmptyMessage(int), sendMessage(Message), sendMessageAtTime(Message, long), andsendMessageDelayed(Message, long) methods. The post versions allow you to enqueue Runnable objects to be called by themessage queue when they are received; the sendMessage versions allow you to enqueue a Message object containing a bundleof data that will be processed by the Handlerâ€™s handleMessage(Message) method (requiring that you implement a subclass of Handler). When posting or sending to a Handler, you can either allow the item to be processed as soon as the message queue is readyto do so, or specify a delay before it gets processed or absolute time for it to be processed. The latter two allow youto implement timeouts, ticks, and other timing-based behavior. When a process is created for your application, its main thread is dedicated to running a message queue that takes careof managing the top-level application objects (activities, broadcast receivers, etc) and any windows they create. Youcan create your own threads, and communicate back with the main application thread through a Handler. This is done bycalling the same post or sendMessage methods as before, but from your new thread. The given Runnable or Message will thenbe scheduled in the Handlerâ€™s message queue and processed when appropriate. Handlerç”¨äºAndroidä¸­çš„çº¿ç¨‹é€šä¿¡ã€‚ä¸»è¦çš„ç”¨äºåœ¨å¼‚æ­¥çº¿ç¨‹ä¸­å‘é€Messageæˆ–è€…ç›´æ¥è¿è¡Œä¸€ä¸ªRunnableï¼Œå³å¯å›åˆ°ä¸»çº¿ç¨‹æ‰§è¡ŒUIæ“ä½œã€‚Handleråœ¨å“ªä¸ªçº¿ç¨‹åˆå§‹åŒ–ï¼Œåˆ™å®ƒä¾é™„åœ¨å“ªä¸ªçº¿ç¨‹ã€‚Activityä¸­æœ‰ä¸€ä¸ªrunOnUiThreadæ–¹æ³•ï¼Œå°è£…äº†Handlerå¯ä»¥ç›´æ¥åœ¨å¼‚æ­¥çº¿ç¨‹ä¸­ä½¿ç”¨ã€‚Handlerä¹Ÿå¯ä»¥å»¶è¿Ÿæ‰§è¡Œã€‚ ä»£ç å®ä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114package com.lqd.androidpractice.handler;import android.app.Activity;import android.os.Bundle;import android.os.Handler;import android.os.Message;import android.util.Log;import android.widget.TextView;import androidx.annotation.NonNull;import androidx.annotation.Nullable;import com.lqd.androidpractice.R;import org.jetbrains.annotations.NotNull;import java.lang.ref.WeakReference;/** * handler ä½¿ç”¨å®ä¾‹ * * åœ¨å¼‚æ­¥çº¿ç¨‹å‘é€æ¶ˆæ¯åˆ°ä¸»çº¿ç¨‹åˆ·æ–°UI * * @author: a564 * @Date 2021/6/7 */public class HandlerActivity extends Activity &#123; private static String TAG = &quot;HandlerActivity&quot;; private TextView textView; private MyHandler myHandler; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_handler); textView = findViewById(R.id.ah_textview); findViewById(R.id.ah_btn1).setOnClickListener(v -&gt; &#123; new Thread() &#123; @Override public void run() &#123; super.run(); try &#123; Thread.sleep(500); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; Log.d(TAG, Thread.currentThread().getStackTrace()[2].getMethodName()); Message msg = Message.obtain(); msg.what = 1; // æ¶ˆæ¯æ ‡è¯† msg.obj = &quot;A&quot;; // æ¶ˆæ¯å†…å­˜å­˜æ”¾ myHandler.sendMessage(msg); // å¼‚æ­¥çº¿ç¨‹å‘é€æ¶ˆæ¯ //ä½¿ç”¨post myHandler.post(new Runnable() &#123; @Override public void run() &#123; //å›åˆ°UIçº¿ç¨‹ &#125; &#125;); &#125; &#125;.start(); &#125;); myHandler = new MyHandler(this); &#125; @Override protected void onDestroy() &#123; super.onDestroy(); myHandler.removeCallbacksAndMessages(null);//è·ŸéšActivityé”€æ¯ myHandler = null; &#125; //é™æ€å†…éƒ¨ç±» private static class MyHandler extends Handler &#123; //å¼±å¼•ç”¨ WeakReference&lt;HandlerActivity&gt; activityWeakReference; public MyHandler(HandlerActivity activity) &#123; activityWeakReference = new WeakReference&lt;HandlerActivity&gt;(activity); &#125; @Override public void handleMessage(@NonNull @NotNull Message msg) &#123; super.handleMessage(msg); Log.d(TAG, Thread.currentThread().getStackTrace()[2].getMethodName()); Log.d(TAG, msg.toString()); HandlerActivity activity = activityWeakReference.get(); if (activity == null) return; switch (msg.what) &#123; case 1: activity.textView.setText(&quot;æ‰§è¡Œäº†çº¿ç¨‹1çš„UIæ“ä½œ&quot;); break; case 2: activity.textView.setText(&quot;æ‰§è¡Œäº†çº¿ç¨‹2çš„UIæ“ä½œ&quot;); break; &#125; &#125; &#125;;&#125; HandlerThreadé¡¾åæ€ä¹‰ï¼ŒHandlerThreadä½¿å¾—Threadæ‹¥æœ‰çš„Handlerçš„ç‰¹æ€§ï¼Œå¯ä»¥åœ¨æ­¤çº¿ç¨‹ä¸­è¿›è¡Œæ¶ˆæ¯çš„åˆ†å‘å’Œå¤„ç†ã€‚ä½¿ç”¨åœºæ™¯ä¹Ÿæ˜¯åˆ›å»ºå¼‚æ­¥çº¿ç¨‹å¹¶æœ‰æ•°æ®äº¤äº’ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†å…¶å°è£…æˆä¸€ä¸ªå·¥å…·ç±»ï¼Œè¿™æ ·ä¸éœ€è¦æ¯æ¬¡éƒ½newä¸€ä¸ªçº¿ç¨‹å‡ºæ¥ï¼Œæ–¹ä¾¿ä½¿ç”¨ä¸”èŠ‚çœæ€§èƒ½ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839class BackgroundHandlerThread &#123; private static class Holder&#123; private static BackgroundHandlerThread _instance = new BackgroundHandlerThread(); static&#123; _instance.init(); &#125; &#125; public static BackgroundHandlerThread getInstance()&#123; return Holder._instance; &#125; private HandlerThread mHandlerThread; private Handler mHandler; private void init()&#123; //HandlerThreadçš„ç¬¬äºŒä¸ªå‚æ•°ä¸ºçº¿ç¨‹ä¼˜å…ˆçº§ mHandlerThread = new HandlerThread(BackgroundHandlerThread.class.getSimpleName()); mHandlerThread.start(); mHandler = new Handler(mHandlerThread.getLooper())&#123; @Override public void handleMessage(Message msg) &#123; &#125; &#125;; &#125; public Looper getLooper()&#123; return mHandlerThread.getLooper(); &#125; public Handler getHandler()&#123; return this.mHandler; &#125;&#125;// å½“éœ€è¦å¼‚æ­¥æ‰§è¡Œçš„åœ°æ–¹å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„ä»£ç BackgroundHandlerThread.getInstance().getHandler().post(Runnable) APIä»‹ç»sendMessage(Message message) å‘é€æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ— post(Runnable runable) æŠŠä¸€ä¸ªRunnableå¯¹è±¡æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåœ¨å¯¹åº”Looperçš„çº¿ç¨‹ä¸­è¿è¡Œã€‚ dispatchMessage(Message msg) å°†æ¶ˆæ¯åˆ†å‘ç»™å¯¹åº”çš„Handler handleMessage æ ¹æ®æŸä¸ªæ¶ˆæ¯ç±»å‹è¿›è¡Œå¤„ç† å‚è€ƒ https://developer.android.com/reference/android/os/Handler è¯¦è§£ Android ä¸­çš„ HandlerThread","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Intent","date":"2022-03-08T02:25:29.636Z","path":"wiki/Android/åŸºç¡€/Intent/","text":"ä»‹ç»Intentæ˜¯ä¸€ä¸ªæ¶ˆæ¯ä¼ é€’å¯¹è±¡ï¼Œä»–çš„ä½œç”¨ï¼š å¯åŠ¨Activityã€‚ä¸åŒçš„ä¸šåŠ¡åœºæ™¯å¯åŠ¨Activityåˆåˆ†ä¸ºæ˜¾ç¤ºè°ƒç”¨å’Œéšå¼è°ƒç”¨ã€‚ å¯åŠ¨Service ä¼ é€’å¹¿æ’­ Intentçš„å±æ€§æœ‰:component(ç»„ä»¶)ã€actionã€categoryã€dataã€typeã€extrasã€flags;æ‰€æœ‰çš„å±æ€§ä¹Ÿæ˜¯å„æ˜¾ç¥é€šï¼Œæ»¡è¶³å¼€å‘è€…çš„å„ç§éœ€è¦æ»¡è¶³ä¸åŒåœºæ™¯; component: æ˜¾ç„¶å°±æ˜¯è®¾ç½®å››å¤§ç»„ä»¶çš„ï¼Œ å°†ç›´æ¥ä½¿ç”¨å®ƒæŒ‡å®šçš„ç»„ä»¶ï¼Œå€ŸåŠ©è¿™ä¸€å±æ€§å¯ä»¥å®ç°ä¸åŒåº”ç”¨ç»„ä»¶ä¹‹é—´é€šè®¯; action: æ˜¯ä¸€ä¸ªå¯ä»¥ æŒ‡å®šç›®æ ‡ç»„ä»¶è¡Œä¸ºçš„å­—ç¬¦ä¸²ï¼Œå¼€å‘äººå‘˜å¯ä»¥è‡ªå®šä¹‰actioné€šè¿‡åŒ¹é…actionå®ç°ç»„ä»¶ä¹‹é—´çš„éšå¼è·³è½¬ï¼Œå½“ç„¶Androidç³»ç»Ÿä¹Ÿå·²ç»é¢„å®šéƒ¨åˆ†Stringä½œä¸ºç³»ç»Ÿåº”ç”¨Actionï¼Œä¾‹å¦‚æ‰“å¼€ç³»ç»Ÿè®¾ç½®é¡µé¢ç­‰ç­‰; data: é€šå¸¸æ˜¯URIç±»å‹æˆ–è€…MIMEç±»å‹æ ¼å¼å®šä¹‰çš„æ“ä½œæ•°æ®;è¡¨ç¤ºä¸åŠ¨ä½œè¦æ“çºµçš„æ•°æ® Category: å±æ€§ç”¨äºæŒ‡å®šå½“å‰åŠ¨ä½œ(Action)è¢«æ‰§è¡Œçš„ç¯å¢ƒ; type: å¯¹äºdataèŒƒä¾‹çš„æå†™; Intent.setFlags(int flags)è®¾ç½®å¯åŠ¨æ¨¡å¼ FLAG_ACTIVITY_CLEAR_TOP : ç­‰åŒäºmainfestä¸­é…ç½®çš„singleTask FLAG_ACTIVITY_SINGLE_TOP: åŒæ ·ç­‰åŒäºmainfestä¸­é…ç½®çš„singleTop; FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS: å…¶å¯¹åº”åœ¨AndroidManifestä¸­çš„å±æ€§ä¸ºandroid:excludeFromRecents&#x3D;â€œtrueâ€,å½“ç”¨æˆ·æŒ‰äº†â€œæœ€è¿‘ä»»åŠ¡åˆ—è¡¨â€æ—¶å€™,è¯¥Taskä¸ä¼šå‡ºç°åœ¨æœ€è¿‘ä»»åŠ¡åˆ—è¡¨ä¸­ï¼Œå¯è¾¾åˆ°éšè—åº”ç”¨çš„ç›®çš„ã€‚ FLAG_ACTIVITY_NO_HISTORY: å¯¹åº”åœ¨AndroidManifestä¸­çš„å±æ€§ä¸º:android:noHistory&#x3D;â€œtrueâ€ï¼Œè¿™ä¸ªFLAGå¯åŠ¨çš„Activityï¼Œä¸€æ—¦é€€å‡ºï¼Œå®ƒä¸ä¼šå­˜åœ¨äºæ ˆä¸­ã€‚ FLAG_ACTIVITY_NEW_TASK : è¿™ä¸ªå±æ€§éœ€è¦åœ¨è¢«startçš„ç›®æ ‡Activityåœ¨AndroidManifest.xmlæ–‡ä»¶ é…ç½®taskAffinityçš„å€¼ã€å¿…é¡»å’ŒstartActivityå‘å…¶è€…Activityçš„åŒ…åä¸ä¸€æ ·ï¼Œå¦‚æœæ˜¯è·³è½¬å¦ä¸€ä¸ª Appçš„è¯å¯ä»¥taskAffinityå¯ä»¥çœç•¥ã€‘ï¼Œåˆ™ä¼šåœ¨æ–°æ ‡è®°çš„Affinityæ‰€å­˜åœ¨çš„taskAffinityä¸­å‹å…¥è¿™ä¸ªActivityã€‚ å‚è€ƒ Intentå’ŒIntentè¿‡æ»¤å™¨","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Serviceå·¥ä½œè¿‡ç¨‹","date":"2022-03-08T02:25:29.636Z","path":"wiki/Android/åŸºç¡€/Serviceå·¥ä½œè¿‡ç¨‹/","text":"æ¦‚è¿°Serviceæ˜¯ä¸€ç§è®¡ç®—å‹ç»„ä»¶ï¼Œå…¶ç”Ÿå‘½æ˜¯åµŒå¥—åœ¨ä¸»çº¿ç¨‹ä¸­çš„ã€‚Serviceæœ‰ä¸¤ç§çŠ¶æ€ï¼šå¯åŠ¨çŠ¶æ€å’Œç»‘å®šçŠ¶æ€ï¼Œå¹¶ä¸”åªèƒ½æ˜¾ç¤ºå¯åŠ¨ï¼Œå› æ­¤åœ¨AndroidManifest.xmlä¸­æ³¨å†ŒServiceæ—¶ï¼Œåªéœ€è¦æ³¨å†ŒæœåŠ¡çš„ç±»åå³å¯ã€‚å¯åŠ¨çŠ¶æ€å’Œç»‘å®šçŠ¶æ€çš„åŒºåˆ«åœ¨äºï¼šå¯åŠ¨ä¹‹åï¼ŒServiceçš„åŠ¨ä½œä¸å—Activityçš„æ§åˆ¶ï¼›è€Œç»‘å®šä¹‹åï¼ŒServiceçš„åŠ¨ä½œæ˜¯ç”±Activityæ§åˆ¶çš„ã€‚åœ¨å®ç°Serviceæ—¶ï¼Œéœ€è¦ç»§æ‰¿ServiceæŠ½è±¡ç±»ï¼Œå¹¶ä¸”é‡å†™onCreat()æ–¹æ³•ï¼Œå› æ­¤ï¼ŒServiceä¹Ÿå…·æœ‰å¯åŠ¨å’Œåœæ­¢çš„æ¦‚å¿µã€‚ Serviceæ˜¯Androidå››å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œç”¨äºæ‰§è¡Œé•¿æ—¶é—´è¿è¡Œä¸”ä¸éœ€è¦ç”¨æˆ·äº¤äº’çš„ä»»åŠ¡ã€‚å³ä½¿åº”ç”¨è¢«é”€æ¯ä¹Ÿä¾ç„¶å¯ä»¥å·¥ä½œã€‚ç»„ä»¶å¯é€šè¿‡ç»‘å®šåˆ°æœåŠ¡ä¸ä¹‹è¿›è¡Œäº¤äº’ï¼Œç”šè‡³æ˜¯æ‰§è¡Œè¿›ç¨‹é—´é€šä¿¡ (IPC)ã€‚ä¾‹å¦‚ï¼ŒæœåŠ¡å¯åœ¨åå°å¤„ç†ç½‘ç»œäº‹åŠ¡ã€æ’­æ”¾éŸ³ä¹ï¼Œæ‰§è¡Œæ–‡ä»¶ I&#x2F;O æˆ–ä¸å†…å®¹æä¾›ç¨‹åºè¿›è¡Œäº¤äº’ã€‚ Serviceåˆ†ä¸ºä»¥ä¸‹å‡ ç§ä¸åŒçš„ç±»å‹ï¼š å‰å°ï¼šå‰å°æœåŠ¡å¿…é¡»æ˜¾ç¤ºé€šçŸ¥ï¼ˆNotificationï¼‰ï¼Œå¯ä»¥è·Ÿç”¨æˆ·äº¤äº’ï¼Œæ¯”å¦‚æ’­æ”¾éŸ³ä¹ã€‚ åå°ï¼šç”¨æˆ·æ— æ„ŸçŸ¥ï¼Œå¯ä»¥åšä¸€äº›æ•°æ®å­˜å‚¨ä¹‹ç±»çš„äº‹æƒ…ã€‚ ç»‘å®šï¼šä½¿ç”¨bindServiceè¿›è¡Œç»‘å®šã€‚æ­¤ç§ç±»å‹æ–¹ä¾¿ä¸å…¶ä»–ç»„ä»¶è¿›è¡Œäº¤äº’ã€‚ä»…å½“ä¸å¦ä¸€ä¸ªåº”ç”¨ç»„ä»¶ç»‘å®šæ—¶ï¼Œç»‘å®šæœåŠ¡æ‰ä¼šè¿è¡Œã€‚å¤šä¸ªç»„ä»¶å¯åŒæ—¶ç»‘å®šåˆ°è¯¥æœåŠ¡ï¼Œä½†å…¨éƒ¨å–æ¶ˆç»‘å®šåï¼Œè¯¥æœåŠ¡å³ä¼šè¢«é”€æ¯ã€‚ æœåŠ¡æ—¢å¯ä»¥æ˜¯å¯åŠ¨æœåŠ¡ï¼ˆä»¥æ— é™æœŸè¿è¡Œï¼‰ï¼Œä¹Ÿæ”¯æŒç»‘å®šã€‚å”¯ä¸€çš„é—®é¢˜åœ¨äºæ˜¯å¦å®ç°ä¸€ç»„å›è°ƒæ–¹æ³•ï¼šonStartCommand()ï¼ˆè®©ç»„ä»¶å¯åŠ¨æœåŠ¡ï¼‰å’Œ onBind()ï¼ˆå®ç°æœåŠ¡ç»‘å®šï¼‰ã€‚ åŸºæœ¬ä½¿ç”¨Serviceçš„ä½¿ç”¨è·ŸActivityç±»ä¼¼ï¼Œéœ€è¦å…ˆåœ¨æ¸…å•æ–‡ä»¶ä¸­å£°æ˜ï¼Œç„¶åä½¿ç”¨Contextå¯åŠ¨ï¼ˆstartService(Intent)ï¼‰æˆ–ç»‘å®šæœåŠ¡ã€‚æœåŠ¡åœ¨å…¶æ‰˜ç®¡è¿›ç¨‹çš„ä¸»çº¿ç¨‹ä¸­è¿è¡Œï¼Œå®ƒæ—¢ä¸åˆ›å»ºè‡ªå·±çš„çº¿ç¨‹ï¼Œä¹Ÿä¸åœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­è¿è¡Œï¼ˆé™¤éåœ¨æ¸…å•æ–‡ä»¶ä¸­é…ç½®ï¼‰ã€‚å¦‚æœæœ‰è€—æ—¶æ“ä½œï¼Œåˆ™å¯ä»¥åœ¨æœåŠ¡å†…åˆ›å»ºçº¿ç¨‹æ¥å¤„ç†ã€‚ API æ–¹æ³• æè¿° onStartCommand() å…¶ä»–ç»„ä»¶(å¦‚æ´»åŠ¨)é€šè¿‡è°ƒç”¨startService()æ¥è¯·æ±‚å¯åŠ¨æœåŠ¡æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚å¦‚æœä½ å®ç°è¯¥æ–¹æ³•ï¼Œä½ æœ‰è´£ä»»åœ¨å·¥ä½œå®Œæˆæ—¶é€šè¿‡stopSelf()æˆ–è€…stopService()æ–¹æ³•æ¥åœæ­¢æœåŠ¡ã€‚ onBind å½“å…¶ä»–ç»„ä»¶æƒ³è¦é€šè¿‡bindService()æ¥ç»‘å®šæœåŠ¡æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚å¦‚æœä½ å®ç°è¯¥æ–¹æ³•ï¼Œä½ éœ€è¦è¿”å›IBinderå¯¹è±¡æ¥æä¾›ä¸€ä¸ªæ¥å£ï¼Œä»¥ä¾¿å®¢æˆ·æ¥ä¸æœåŠ¡é€šä¿¡ã€‚ä½ å¿…é¡»å®ç°è¯¥æ–¹æ³•ï¼Œå¦‚æœä½ ä¸å…è®¸ç»‘å®šï¼Œåˆ™ç›´æ¥è¿”å›nullã€‚ onUnbind() å½“å®¢æˆ·ä¸­æ–­æ‰€æœ‰æœåŠ¡å‘å¸ƒçš„ç‰¹æ®Šæ¥å£æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚ onRebind() å½“æ–°çš„å®¢æˆ·ç«¯ä¸æœåŠ¡è¿æ¥ï¼Œä¸”æ­¤å‰å®ƒå·²ç»é€šè¿‡onUnbind(Intent)é€šçŸ¥æ–­å¼€è¿æ¥æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚ onCreate() å½“æœåŠ¡é€šè¿‡onStartCommand()å’ŒonBind()è¢«ç¬¬ä¸€æ¬¡åˆ›å»ºçš„æ—¶å€™ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚è¯¥è°ƒç”¨è¦æ±‚æ‰§è¡Œä¸€æ¬¡æ€§å®‰è£…ã€‚ onDestroy() å½“æœåŠ¡ä¸å†æœ‰ç”¨æˆ–è€…è¢«é”€æ¯æ—¶ï¼Œç³»ç»Ÿè°ƒç”¨è¯¥æ–¹æ³•ã€‚ä½ çš„æœåŠ¡éœ€è¦å®ç°è¯¥æ–¹æ³•æ¥æ¸…ç†ä»»ä½•èµ„æºï¼Œå¦‚çº¿ç¨‹ï¼Œå·²æ³¨å†Œçš„ç›‘å¬å™¨ï¼Œæ¥æ”¶å™¨ç­‰ã€‚ å¦‚æœç»„ä»¶é€šè¿‡è°ƒç”¨ startService() å¯åŠ¨æœåŠ¡ï¼ˆè¿™ä¼šå¼•èµ·å¯¹ onStartCommand() çš„è°ƒç”¨ï¼‰ï¼Œåˆ™æœåŠ¡ä¼šä¸€ç›´è¿è¡Œï¼Œç›´åˆ°å…¶ä½¿ç”¨ stopSelf() è‡ªè¡Œåœæ­¢è¿è¡Œï¼Œæˆ–ç”±å…¶ä»–ç»„ä»¶é€šè¿‡è°ƒç”¨ stopService() å°†å…¶åœæ­¢ä¸ºæ­¢ã€‚ å¦‚æœç»„ä»¶é€šè¿‡è°ƒç”¨ bindService() æ¥åˆ›å»ºæœåŠ¡ï¼Œä¸”æœªè°ƒç”¨ onStartCommand()ï¼Œåˆ™æœåŠ¡åªä¼šåœ¨è¯¥ç»„ä»¶ä¸å…¶ç»‘å®šæ—¶è¿è¡Œã€‚å½“è¯¥æœåŠ¡ä¸å…¶æ‰€æœ‰ç»„ä»¶å–æ¶ˆç»‘å®šåï¼Œç³»ç»Ÿä¾¿ä¼šå°†å…¶é”€æ¯ã€‚ onStartCommandçš„æ³¨æ„äº‹é¡¹1public @StartResult int onStartCommand(Intent intent, @StartArgFlags int flags, int startId)&#123;&#125; å‚æ•° intent å¯åŠ¨æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œå½“Serviceé‡å¯æ—¶å¯èƒ½ä¸ºç©º flags 0ï¼šæ­£å¸¸åˆ›å»º START_FLAG_REDELIVERYï¼šonStartCommandè¿”å›çš„æ˜¯START_REDELIVER_INTENTï¼Œå¹¶ä¸”Serviceè¢«ç³»ç»Ÿæ¸…ç†æ‰äº†ï¼Œé‚£ä¹ˆé‡æ–°åˆ›å»ºServiceï¼Œè°ƒç”¨onStartCommandçš„æ—¶å€™ï¼Œä¼ å…¥çš„intentä¸ä¸ºnullï¼Œè€Œä¼ å…¥çš„flagså°±æ˜¯START_FLAG_REDELIVERY START_FLAG_RETRYï¼šå¦‚æœServiceåˆ›å»ºè¿‡ç¨‹ä¸­ï¼ŒonStartCommandæ–¹æ³•æœªè¢«è°ƒç”¨æˆ–è€…æ²¡æœ‰æ­£å¸¸è¿”å›çš„å¼‚å¸¸æƒ…å†µä¸‹ï¼Œ å†æ¬¡å°è¯•åˆ›å»ºï¼Œä¼ å…¥çš„flagså°±ä¸ºSTART_FLAG_RETRY ã€‚ startId ç”¨æ¥ä»£è¡¨è¿™ä¸ªå”¯ä¸€çš„å¯åŠ¨è¯·æ±‚ã€‚æˆ‘ä»¬å¯ä»¥åœ¨stopSelfResult(int startId)ä¸­ä¼ å…¥è¿™ä¸ªstartIdï¼Œç”¨æ¥ç»ˆæ­¢Serviceã€‚ è¿”å›å€¼ START_STICKYï¼šå¦‚æœServiceæ‰€åœ¨çš„è¿›ç¨‹ï¼Œåœ¨æ‰§è¡Œäº†onStartCommandæ–¹æ³•åï¼Œè¢«æ¸…ç†äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªServiceä¼šè¢«ä¿ç•™åœ¨å·²å¼€å§‹çš„çŠ¶æ€ï¼Œä½†æ˜¯ä¸ä¿ç•™ä¼ å…¥çš„Intentï¼Œéšåç³»ç»Ÿä¼šå°è¯•é‡æ–°åˆ›å»ºæ­¤Serviceï¼Œç”±äºæœåŠ¡çŠ¶æ€ä¿ç•™åœ¨å·²å¼€å§‹çŠ¶æ€ï¼Œæ‰€ä»¥åˆ›å»ºæœåŠ¡åä¸€å®šä¼šè°ƒç”¨onStartCommandæ–¹æ³•ã€‚å¦‚æœåœ¨æ­¤æœŸé—´æ²¡æœ‰ä»»ä½•å¯åŠ¨å‘½ä»¤è¢«ä¼ é€’åˆ°serviceï¼Œé‚£ä¹ˆå‚æ•°Intentå°†ä¸ºnullï¼Œéœ€è¦æˆ‘ä»¬å°å¿ƒå¤„ç†ã€‚ START_NOT_STICKYï¼šå¦‚æœServiceæ‰€åœ¨çš„è¿›ç¨‹ï¼Œåœ¨æ‰§è¡Œäº†onStartCommandæ–¹æ³•åï¼Œè¢«æ¸…ç†äº†ï¼Œåˆ™ç³»ç»Ÿä¸ä¼šé‡æ–°å¯åŠ¨æ­¤Serviceã€‚ START_REDELIVER_INTENTï¼šå¦‚æœServiceæ‰€åœ¨çš„è¿›ç¨‹ï¼Œåœ¨æ‰§è¡Œäº†onStartCommandæ–¹æ³•åï¼Œè¢«æ¸…ç†äº†ï¼Œåˆ™ç»“æœå’ŒSTART_STICKYä¸€æ ·ï¼Œä¹Ÿä¼šé‡æ–°åˆ›å»ºæ­¤Serviceå¹¶è°ƒç”¨onStartCommandæ–¹æ³•ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œå¦‚æœæ˜¯è¿”å›çš„æ˜¯START_REDELIVER_INTENT ï¼Œåˆ™é‡æ–°åˆ›å»ºServiceæ—¶onStartCommandæ–¹æ³•ä¼šä¼ å…¥ä¹‹å‰çš„intentã€‚ START_STICKY_COMPATIBILITYï¼šSTART_STICKYçš„å…¼å®¹ç‰ˆæœ¬ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯è¢«æ¸…ç†åonStartCommandæ–¹æ³•ä¸€å®šä¼šè¢«é‡æ–°è°ƒç”¨ã€‚ ç”Ÿå‘½å‘¨æœŸ æºç åˆ†æServiceçš„å¯åŠ¨æ–¹å¼æ˜¯Context.startService(Intent service)ã€‚è€ŒContextçš„å®ç°ç±»ä¸ºContextImpl 12345678910111213141516171819202122232425262728293031323334@Overridepublic ComponentName startService(Intent service) &#123; warnIfCallingFromSystemProcess(); return startServiceCommon(service, false, mUser);&#125;private ComponentName startServiceCommon(Intent service, boolean requireForeground, UserHandle user) &#123; try &#123; validateServiceIntent(service); service.prepareToLeaveProcess(this); ComponentName cn = ActivityManager.getService().startService( mMainThread.getApplicationThread(), service, service.resolveTypeIfNeeded( getContentResolver()), requireForeground, getOpPackageName(), user.getIdentifier()); if (cn != null) &#123; if (cn.getPackageName().equals(&quot;!&quot;)) &#123; throw new SecurityException( &quot;Not allowed to start service &quot; + service + &quot; without permission &quot; + cn.getClassName()); &#125; else if (cn.getPackageName().equals(&quot;!!&quot;)) &#123; throw new SecurityException( &quot;Unable to start service &quot; + service + &quot;: &quot; + cn.getClassName()); &#125; else if (cn.getPackageName().equals(&quot;?&quot;)) &#123; throw new IllegalStateException( &quot;Not allowed to start service &quot; + service + &quot;: &quot; + cn.getClassName()); &#125; &#125; return cn; &#125; catch (RemoteException e) &#123; throw e.rethrowFromSystemServer(); &#125;&#125; ç”±ä»¥ä¸Šä»£ç å¯çŸ¥ï¼Œè°ƒç”¨äº†AMSä¸­çš„startServiceæ–¹æ³• 1234567891011121314151617181920212223242526272829303132@Overridepublic ComponentName startService(IApplicationThread caller, Intent service, String resolvedType, boolean requireForeground, String callingPackage, int userId) throws TransactionTooLargeException &#123; enforceNotIsolatedCaller(&quot;startService&quot;); // Refuse possible leaked file descriptors if (service != null &amp;&amp; service.hasFileDescriptors() == true) &#123; throw new IllegalArgumentException(&quot;File descriptors passed in Intent&quot;); &#125; if (callingPackage == null) &#123; throw new IllegalArgumentException(&quot;callingPackage cannot be null&quot;); &#125; if (DEBUG_SERVICE) Slog.v(TAG_SERVICE, &quot;*** startService: &quot; + service + &quot; type=&quot; + resolvedType + &quot; fg=&quot; + requireForeground); synchronized(this) &#123; final int callingPid = Binder.getCallingPid(); final int callingUid = Binder.getCallingUid(); final long origId = Binder.clearCallingIdentity(); ComponentName res; try &#123; res = mServices.startServiceLocked(caller, service, resolvedType, callingPid, callingUid, requireForeground, callingPackage, userId); &#125; finally &#123; Binder.restoreCallingIdentity(origId); &#125; return res; &#125;&#125; è¿™é‡Œçš„mServicesä¸ºActiveServicesï¼Œå®ƒæ˜¯ç”¨æ¥å¯¹Serviceè¿›è¡Œç®¡ç†çš„ã€‚æˆ‘ä»¬è¿›å»çœ‹çœ‹startServiceLocked 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136ComponentName startServiceLocked(IApplicationThread caller, Intent service, String resolvedType, int callingPid, int callingUid, boolean fgRequired, String callingPackage, final int userId) throws TransactionTooLargeException &#123; return startServiceLocked(caller, service, resolvedType, callingPid, callingUid, fgRequired, callingPackage, userId, false);&#125;ComponentName startServiceLocked(IApplicationThread caller, Intent service, String resolvedType, int callingPid, int callingUid, boolean fgRequired, String callingPackage, final int userId, boolean allowBackgroundActivityStarts) throws TransactionTooLargeException &#123; if (DEBUG_DELAYED_STARTS) Slog.v(TAG_SERVICE, &quot;startService: &quot; + service + &quot; type=&quot; + resolvedType + &quot; args=&quot; + service.getExtras()); ... if (allowBackgroundActivityStarts) &#123; r.whitelistBgActivityStartsOnServiceStart(); &#125; ComponentName cmp = startServiceInnerLocked(smap, service, r, callerFg, addToStarting); return cmp;&#125;ComponentName startServiceInnerLocked(ServiceMap smap, Intent service, ServiceRecord r, boolean callerFg, boolean addToStarting) throws TransactionTooLargeException &#123; ServiceState stracker = r.getTracker(); ... String error = bringUpServiceLocked(r, service.getFlags(), callerFg, false, false); if (error != null) &#123; return new ComponentName(&quot;!!&quot;, error); &#125; ... return r.name;&#125;private String bringUpServiceLocked(ServiceRecord r, int intentFlags, boolean execInFg, boolean whileRestarting, boolean permissionsReviewRequired) throws TransactionTooLargeException &#123; ... if (!isolated) &#123; app = mAm.getProcessRecordLocked(procName, r.appInfo.uid, false); if (DEBUG_MU) Slog.v(TAG_MU, &quot;bringUpServiceLocked: appInfo.uid=&quot; + r.appInfo.uid + &quot; app=&quot; + app); if (app != null &amp;&amp; app.thread != null) &#123; try &#123; app.addPackage(r.appInfo.packageName, r.appInfo.longVersionCode, mAm.mProcessStats); realStartServiceLocked(r, app, execInFg); return null; &#125; catch (TransactionTooLargeException e) &#123; throw e; &#125; catch (RemoteException e) &#123; Slog.w(TAG, &quot;Exception when starting service &quot; + r.shortInstanceName, e); &#125; &#125; &#125; else &#123; app = r.isolatedProc; if (WebViewZygote.isMultiprocessEnabled() &amp;&amp; r.serviceInfo.packageName.equals(WebViewZygote.getPackageName())) &#123; hostingRecord = HostingRecord.byWebviewZygote(r.instanceName); &#125; if ((r.serviceInfo.flags &amp; ServiceInfo.FLAG_USE_APP_ZYGOTE) != 0) &#123; hostingRecord = HostingRecord.byAppZygote(r.instanceName, r.definingPackageName, r.definingUid); &#125; &#125; ... return null;&#125; private final void realStartServiceLocked(ServiceRecord r, ProcessRecord app, boolean execInFg) throws RemoteException &#123; r.setProcess(app);//ç»‘å®šè¿›ç¨‹...try &#123; if (LOG_SERVICE_START_STOP) &#123; String nameTerm; int lastPeriod = r.shortInstanceName.lastIndexOf(&#x27;.&#x27;); nameTerm = lastPeriod &gt;= 0 ? r.shortInstanceName.substring(lastPeriod) : r.shortInstanceName; EventLogTags.writeAmCreateService( r.userId, System.identityHashCode(r), nameTerm, r.app.uid, r.app.pid); &#125; StatsLog.write(StatsLog.SERVICE_LAUNCH_REPORTED, r.appInfo.uid, r.name.getPackageName(), r.name.getClassName()); synchronized (r.stats.getBatteryStats()) &#123; r.stats.startLaunchedLocked(); &#125; mAm.notifyPackageUse(r.serviceInfo.packageName, PackageManager.NOTIFY_PACKAGE_USE_SERVICE); app.forceProcessStateUpTo(ActivityManager.PROCESS_STATE_SERVICE); app.thread.scheduleCreateService(r, r.serviceInfo, mAm.compatibilityInfoForPackage(r.serviceInfo.applicationInfo), app.getReportedProcState()); r.postNotification(); created = true;&#125; catch (DeadObjectException e) &#123; Slog.w(TAG, &quot;Application dead when creating service &quot; + r); mAm.appDiedLocked(app); throw e;&#125; finally &#123; &#125;... sendServiceArgsLocked(r, execInFg, true);//æ‰§è¡ŒonStartCommandè¿‡ç¨‹&#125;private final void sendServiceArgsLocked(ServiceRecord r, boolean execInFg, boolean oomAdjusted) throws TransactionTooLargeException &#123; ... Exception caughtException = null; try &#123; r.app.thread.scheduleServiceArgs(r, slice); //è°ƒç”¨ActivityThread &#125; catch (TransactionTooLargeException e) &#123; if (DEBUG_SERVICE) Slog.v(TAG_SERVICE, &quot;Transaction too large for &quot; + args.size() + &quot; args, first: &quot; + args.get(0).args); Slog.w(TAG, &quot;Failed delivering service starts&quot;, e); caughtException = e; &#125; catch (RemoteException e) &#123; if (DEBUG_SERVICE) Slog.v(TAG_SERVICE, &quot;Crashed while sending args: &quot; + r); Slog.w(TAG, &quot;Failed delivering service starts&quot;, e); caughtException = e; &#125; catch (Exception e) &#123; Slog.w(TAG, &quot;Unexpected exception&quot;, e); caughtException = e; &#125; ...&#125; ç”±ä»¥ä¸Šä»£ç å¯çŸ¥ï¼ŒstartServiceLockedè°ƒç”¨äº†startServiceInnerLockedï¼ŒstartServiceInnerLockedè°ƒç”¨äº†bringUpServiceLockedï¼ŒbringUpServiceLockedè°ƒç”¨äº†realStartServiceLockedï¼ŒrealStartServiceLockedè°ƒç”¨äº†ActivityThreadçš„scheduleCreateServiceã€‚ä¸”realStartServiceLockedè¿˜ä¼šè°ƒç”¨sendServiceArgsLockedï¼ŒsendServiceArgsLockedè°ƒç”¨ActivityThreadçš„scheduleServiceArgsï¼Œè¿™é‡Œä¼šå¯åŠ¨onStartCommand 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108public final void scheduleCreateService(IBinder token, ServiceInfo info, CompatibilityInfo compatInfo, int processState) &#123; updateProcessState(processState, false); CreateServiceData s = new CreateServiceData(); s.token = token; s.info = info; s.compatInfo = compatInfo; sendMessage(H.CREATE_SERVICE, s);&#125;public void handleMessage(Message msg) &#123; if (DEBUG_MESSAGES) Slog.v(TAG, &quot;&gt;&gt;&gt; handling: &quot; + codeToString(msg.what)); switch (msg.what) &#123; ... case CREATE_SERVICE: Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, (&quot;serviceCreate: &quot; + String.valueOf(msg.obj))); handleCreateService((CreateServiceData)msg.obj); Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); break; case SERVICE_ARGS: Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, (&quot;serviceStart: &quot; + String.valueOf(msg.obj))); handleServiceArgs((ServiceArgsData)msg.obj); Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); break; ...&#125;private void handleCreateService(CreateServiceData data) &#123; //åˆ›å»ºå¯¹è±¡ LoadedApk packageInfo = getPackageInfoNoCheck( data.info.applicationInfo, data.compatInfo); Service service = null; try &#123; ClassLoader cl = packageInfo.getClassLoader(); //åˆ›å»ºserviceå¯¹è±¡ service = packageInfo.getAppFactory() .instantiateService(cl, data.info.name, data.intent); &#125; catch (Exception e) &#123;&#125; try &#123; //åˆ›å»ºä¸Šä¸‹æ–‡ ContextImpl context = ContextImpl.createAppContext(this, packageInfo); //å…³è”serviceå¯¹è±¡ context.setOuterContext(service); //è·å–Applicationå¯¹è±¡ Application app = packageInfo.makeApplication(false, mInstrumentation); //å…³è”ä¸Šä¸‹æ–‡å’ŒApplicationå¯¹è±¡ service.attach(context, this, data.info.name, data.token, app, ActivityManager.getService()); service.onCreate(); //data.tokenéƒ½æ˜¯ServiceRecordï¼Œå®ƒæ˜¯binderå¯¹è±¡ï¼Œtokenä¸serviceå»ºç«‹æ˜ å°„å…³ç³»å­˜å‚¨åœ¨mServicesçš„mapä¸­ mServices.put(data.token, service); &#125; catch (Exception e) &#123;&#125;&#125; //onStartCommandæµç¨‹ public final void scheduleServiceArgs(IBinder token, ParceledListSlice args) &#123; List&lt;ServiceStartArgs&gt; list = args.getList(); for (int i = 0; i &lt; list.size(); i++) &#123; ServiceStartArgs ssa = list.get(i); ServiceArgsData s = new ServiceArgsData(); s.token = token; s.taskRemoved = ssa.taskRemoved; s.startId = ssa.startId; s.flags = ssa.flags; s.args = ssa.args; sendMessage(H.SERVICE_ARGS, s); &#125;&#125; private void handleServiceArgs(ServiceArgsData data) &#123; Service s = mServices.get(data.token); if (s != null) &#123; try &#123; if (data.args != null) &#123; data.args.setExtrasClassLoader(s.getClassLoader()); data.args.prepareToEnterProcess(); &#125; int res; if (!data.taskRemoved) &#123; res = s.onStartCommand(data.args, data.flags, data.startId);//è¿è¡Œäº†onStartCommandæ–¹æ³• &#125; else &#123; s.onTaskRemoved(data.args); res = Service.START_TASK_REMOVED_COMPLETE; &#125; QueuedWork.waitToFinish(); try &#123; ActivityManager.getService().serviceDoneExecuting( data.token, SERVICE_DONE_EXECUTING_START, data.startId, res); &#125; catch (RemoteException e) &#123; throw e.rethrowFromSystemServer(); &#125; &#125; catch (Exception e) &#123; if (!mInstrumentation.onException(s, e)) &#123; throw new RuntimeException( &quot;Unable to start service &quot; + s + &quot; with &quot; + data.args + &quot;: &quot; + e.toString(), e); &#125; &#125; &#125;&#125; ç”±ä»¥ä¸Šä»£ç å¯çŸ¥ scheduleCreateServiceå‘é€äº†CREATE_SERVICEæ¶ˆæ¯ã€‚ActivityThreadçš„å†…éƒ¨ç±»Hå¤„ç†æ­¤æ¶ˆæ¯ï¼Œåœ¨handleCreateServiceæ–¹æ³•ä¸­ï¼Œè¿è¡Œäº†Serviceçš„onCreateæ–¹æ³•ã€‚ scheduleServiceArgså‘é€äº†SERVICE_ARGSçš„æ¶ˆæ¯ã€‚åœ¨handleServiceArgsä¸­å¤„ç†ï¼Œè°ƒç”¨äº†onStartCommandæ–¹æ³• æµç¨‹å›¾ å…³äºServiceä¿æ´»åº”è¯¥æ˜¯åˆ©ç”¨serviceçš„æœºåˆ¶ï¼Œå½“serviceä¸‹ä¸€æ¬¡é‡æ–°åˆ›å»ºæ—¶åˆ¤æ–­åº”ç”¨ä¸­çš„æŸäº›åœºæ™¯æ˜¯å¦ä¹Ÿå¯ä»¥è·Ÿç€ä¸€èµ·æ¢å¤ã€‚æ¯”å¦‚ç›´æ’­æˆ¿é—´ã€‚ å‚è€ƒ Android 10 Service å·¥ä½œè¿‡ç¨‹ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ https://developer.android.com/guide/components/services?hl=zh-cn","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Fragmentå·¥ä½œè¿‡ç¨‹","date":"2022-03-08T02:25:29.634Z","path":"wiki/Android/åŸºç¡€/Fragmentå·¥ä½œè¿‡ç¨‹/","text":"å¸¸è§ç±»çš„ä»‹ç» ActivityThread : å…¥å£ç±» Instrumentation : ActivityThread çš„å¾—åŠ›åŠ©æ‰‹ï¼Œå¸®åŠ© ActivityThread è§¦å‘ Activity çš„ç”Ÿå‘½å‘¨æœŸ MainActivity : å°±æ˜¯ä¸Šæ–‡æåˆ°ä¾‹å­ä¸­çš„ MainActivity ç±»ï¼Œç»§æ‰¿è‡ª Activity HostCallbacks : Activity çš„å†…éƒ¨ç±»ï¼Œç»§æ‰¿è‡ª FragmentHostCallback FragmentHostCallback : æŒæœ‰ Handlerã€FragmentManagerImpl ç­‰å¯¹è±¡çš„å¼•ç”¨ï¼Œåˆ«çš„å¯¹è±¡å¯ä»¥é€šè¿‡æŒæœ‰å®ƒçš„å¼•ç”¨é—´æ¥æ§åˆ¶ FragmentManagerImpl ç­‰å¯¹è±¡ FragmentController : Activity é€šè¿‡æ§åˆ¶å®ƒé—´æ¥å‘ FragmentManagerImpl å‘å‡ºå‘½ä»¤ FragmentManagerImpl : ç»§æ‰¿è‡ª FragmentManagerï¼Œç”¨æ¥å¯¹ Fragment è¿›è¡Œç®¡ç†ï¼Œåœ¨ FragmentHostCallback ä¸­è¢«åˆå§‹åŒ– BackStackRecord : ç»§æ‰¿è‡ª FragmentTransation å¹¶å®ç°äº† Runnableï¼Œæ¯æ¬¡è°ƒç”¨ FragmentManager å¯¹è±¡çš„ beginTransaction() æ–¹æ³•éƒ½ä¼šäº§ç”Ÿä¸€ä¸ª BackStackRecord å¯¹è±¡ï¼Œå¯ä»¥å°†å…¶ç†è§£ä¸ºå¯¹ Fragment çš„ä¸€ç³»åˆ—æ“ä½œï¼ˆå³äº‹åŠ¡ï¼‰ Op : æ¯æ¬¡å¯¹ Fragment çš„æ“ä½œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ª Op å¯¹è±¡ï¼Œå…¶è¡¨ç¤ºåŒå‘é“¾è¡¨çš„ä¸€ä¸ªç»“ç‚¹ å¯åŠ¨æµç¨‹æ ¹æ®Activityå·¥ä½œè¿‡ç¨‹å¯çŸ¥ï¼Œå¯åŠ¨ä¸€ä¸ªActivityä¼šæ¥åˆ°ActivityThreadpçš„erformLaunchActivityæ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ 12345678910111213141516171819202122232425262728293031323334353637//ActivityThreadprivate Activity performLaunchActivity(ActivityClientRecord r, Intent customIntent) &#123; activity.attach(appContext, this, getInstrumentation(), r.token, r.ident, app, r.intent, r.activityInfo, title, r.parent, r.embeddedID, r.lastNonConfigurationInstances, config, r.referrer, r.voiceInteractor, window, r.configCallback, r.assistToken); .... if (r.isPersistable()) &#123; mInstrumentation.callActivityOnCreate(activity, r.state, r.persistentState); &#125; else &#123; mInstrumentation.callActivityOnCreate(activity, r.state); &#125; &#125;//ActivitymFragments.attachHost(null /*parent*/);//FragmentControllerpublic void attachHost(Fragment parent) &#123; mHost.mFragmentManager.attachController( mHost, mHost /*container*/, parent);&#125;/FragmentManagerImplpublic void attachController(FragmentHostCallback&lt;?&gt; host, FragmentContainer container, Fragment parent) &#123; if (mHost != null) throw new IllegalStateException(&quot;Already attached&quot;); mHost = host;//FragmentManagerImpl å¯¹è±¡æŒæœ‰äº† HostCallbacks å¯¹è±¡çš„å¼•ç”¨ mContainer = container; mParent = parent;&#125; attachçš„æµç¨‹ï¼š attach---&gt;attachHost---&gt;attachController ç„¶åæ˜¯callActivityOnCreateï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657//ActivityThreadprivate Activity performLaunchActivity(ActivityClientRecord r, Intent customIntent) &#123; if (r.isPersistable()) &#123; mInstrumentation.callActivityOnCreate(activity, r.state, r.persistentState); &#125; else &#123; mInstrumentation.callActivityOnCreate(activity, r.state); &#125;&#125;//Instrumentationpublic void callActivityOnCreate(Activity activity, Bundle icicle, PersistableBundle persistentState) &#123; prePerformCreate(activity); activity.performCreate(icicle, persistentState); postPerformCreate(activity);&#125;//Activityfinal void performCreate(Bundle icicle, PersistableBundle persistentState) &#123; dispatchActivityPreCreated(icicle); mCanEnterPictureInPicture = true; restoreHasCurrentPermissionRequest(icicle); if (persistentState != null) &#123; onCreate(icicle, persistentState); &#125; else &#123; onCreate(icicle); &#125; writeEventLog(LOG_AM_ON_CREATE_CALLED, &quot;performCreate&quot;); mActivityTransitionState.readState(icicle); mVisibleFromClient = !mWindow.getWindowStyle().getBoolean( com.android.internal.R.styleable.Window_windowNoDisplay, false); mFragments.dispatchActivityCreated(); mActivityTransitionState.setEnterActivityOptions(this, getActivityOptions()); dispatchActivityPostCreated(icicle);&#125;//FragmentControllerpublic void dispatchActivityCreated() &#123; mHost.mFragmentManager.dispatchActivityCreated();&#125;/FragmentManagerImplpublic void dispatchActivityCreated() &#123; this.mStateSaved = false; this.mStopped = false; this.dispatchStateChange(2);&#125;/FragmentManagerImplvoid moveToState(int newState, boolean always) &#123;...&#125; callActivityOnCreateçš„æµç¨‹ï¼š callActivityOnCreate---&gt;callActivityOnCreate---&gt;performCreate---&gt;dispatchActivityCreated---&gt;moveToState Fragmentçš„æ“ä½œåŸç†Fragmentçš„ä¸€èˆ¬æ“ä½œå¦‚ä¸‹ï¼š 12345fragmentManager = getSupportFragmentManager();transaction = fragmentManager.beginTransaction();transaction.replace(R.id.testFragment, fragment);transaction.addToBackStack(null);transaction.commit(); getSupportFragmentManageræ–¹æ³•ç›´æ¥è¿”å›FragmentManagerImplã€‚ beginTransactionæ–¹æ³•è¿”å›ä¸€ä¸ªBackStackRecordå¯¹è±¡ï¼ŒBackStackRecordå¯¹è±¡ä»£è¡¨ä¸€ç³»åˆ—å¯¹Fragmentçš„æ“ä½œï¼Œå³äº‹åŠ¡ã€‚ replacereplaceæ–¹æ³•å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556//BackStackRecordpublic FragmentTransaction replace(int containerViewId, Fragment fragment, @Nullable String tag) &#123; //åˆ¤æ–­å®¹å™¨idæ˜¯å¦æœ‰æ•ˆ if (containerViewId == 0) &#123; throw new IllegalArgumentException(&quot;Must use non-zero containerViewId&quot;); &#125; doAddOp(containerViewId, fragment, tag, OP_REPLACE); return this;&#125;private void doAddOp(int containerViewId, Fragment fragment, @Nullable String tag, int opcmd) &#123; final Class fragmentClass = fragment.getClass(); final int modifiers = fragmentClass.getModifiers(); if (fragmentClass.isAnonymousClass() || !Modifier.isPublic(modifiers) || (fragmentClass.isMemberClass() &amp;&amp; !Modifier.isStatic(modifiers))) &#123; throw new IllegalStateException(&quot;Fragment &quot; + fragmentClass.getCanonicalName() + &quot; must be a public static class to be properly recreated from&quot; + &quot; instance state.&quot;); &#125; fragment.mFragmentManager = mManager; if (tag != null) &#123; if (fragment.mTag != null &amp;&amp; !tag.equals(fragment.mTag)) &#123; throw new IllegalStateException(&quot;Can&#x27;t change tag of fragment &quot; + fragment + &quot;: was &quot; + fragment.mTag + &quot; now &quot; + tag); &#125; fragment.mTag = tag; &#125; if (containerViewId != 0) &#123; if (containerViewId == View.NO_ID) &#123; throw new IllegalArgumentException(&quot;Can&#x27;t add fragment &quot; + fragment + &quot; with tag &quot; + tag + &quot; to container view with no id&quot;); &#125; if (fragment.mFragmentId != 0 &amp;&amp; fragment.mFragmentId != containerViewId) &#123; throw new IllegalStateException(&quot;Can&#x27;t change container ID of fragment &quot; + fragment + &quot;: was &quot; + fragment.mFragmentId + &quot; now &quot; + containerViewId); &#125; fragment.mContainerId = fragment.mFragmentId = containerViewId; &#125; //ç”Ÿæˆä¸€ä¸ªèŠ‚ç‚¹ addOp(new Op(opcmd, fragment));&#125;void addOp(Op op) &#123; mOps.add(op); op.enterAnim = mEnterAnim; op.exitAnim = mExitAnim; op.popEnterAnim = mPopEnterAnim; op.popExitAnim = mPopExitAnim;&#125; replaceä¸»è¦æ˜¯ç”Ÿæˆä¸€ä¸ªåŒå‘é“¾è¡¨çš„èŠ‚ç‚¹ã€‚ commitæœ€åå°±æ˜¯commit 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280//BackStackStateint commitInternal(boolean allowStateLoss) &#123; if (mCommitted) throw new IllegalStateException(&quot;commit already called&quot;); if (FragmentManagerImpl.DEBUG) &#123; Log.v(TAG, &quot;Commit: &quot; + this); LogWriter logw = new LogWriter(TAG); PrintWriter pw = new PrintWriter(logw); dump(&quot; &quot;, null, pw, null); pw.close(); &#125; mCommitted = true; if (mAddToBackStack) &#123; mIndex = mManager.allocBackStackIndex(this); &#125; else &#123; mIndex = -1; &#125; mManager.enqueueAction(this, allowStateLoss); return mIndex;&#125;//FragmentManagerpublic void enqueueAction(OpGenerator action, boolean allowStateLoss) &#123; if (!allowStateLoss) &#123; checkStateLoss(); &#125; synchronized (this) &#123; if (mDestroyed || mHost == null) &#123; if (allowStateLoss) &#123; // This FragmentManager isn&#x27;t attached, so drop the entire transaction. return; &#125; throw new IllegalStateException(&quot;Activity has been destroyed&quot;); &#125; if (mPendingActions == null) &#123; mPendingActions = new ArrayList&lt;&gt;(); &#125; mPendingActions.add(action);//ä¿å­˜BackStackState scheduleCommit(); &#125;&#125;void scheduleCommit() &#123; synchronized (this) &#123; boolean postponeReady = mPostponedTransactions != null &amp;&amp; !mPostponedTransactions.isEmpty(); boolean pendingReady = mPendingActions != null &amp;&amp; mPendingActions.size() == 1; if (postponeReady || pendingReady) &#123; mHost.getHandler().removeCallbacks(mExecCommit); mHost.getHandler().post(mExecCommit); &#125; &#125;&#125;Runnable mExecCommit = new Runnable() &#123; @Override public void run() &#123; execPendingActions(); &#125;&#125;;public boolean execPendingActions() &#123; ensureExecReady(true); boolean didSomething = false; while (generateOpsForPendingActions(mTmpRecords, mTmpIsPop)) &#123; mExecutingActions = true; try &#123; removeRedundantOperationsAndExecute(mTmpRecords, mTmpIsPop); &#125; finally &#123; cleanupExec(); &#125; didSomething = true; &#125; doPendingDeferredStart(); burpActive(); return didSomething;&#125;private boolean generateOpsForPendingActions(ArrayList&lt;BackStackRecord&gt; records, ArrayList&lt;Boolean&gt; isPop) &#123; boolean didSomething = false; synchronized (this) &#123; if (mPendingActions == null || mPendingActions.size() == 0) &#123; return false; &#125; final int numActions = mPendingActions.size(); for (int i = 0; i &lt; numActions; i++) &#123; didSomething |= mPendingActions.get(i).generateOps(records, isPop);//æ·»åŠ åˆ°å›é€€æ ˆä¸­ &#125; mPendingActions.clear(); mHost.getHandler().removeCallbacks(mExecCommit); &#125; return didSomething;&#125;private void removeRedundantOperationsAndExecute(ArrayList&lt;BackStackRecord&gt; records, ArrayList&lt;Boolean&gt; isRecordPop) &#123; ... executePostponedTransaction(records, isRecordPop); ... executeOpsTogether(records, isRecordPop, recordNum, reorderingEnd); ... &#125;private void executeOpsTogether(ArrayList&lt;BackStackRecord&gt; records, ArrayList&lt;Boolean&gt; isRecordPop, int startIndex, int endIndex) &#123; ... oldPrimaryNav = record.expandOps(mTmpAddedFragments, oldPrimaryNav);//OP_REPLACEä¼šä»è¿™é‡Œè§¦å‘ ... executeOps(records, isRecordPop, startIndex, endIndex);//Run the operations in the BackStackRecords, either to push or pop. ... record.runOnCommitRunnables();//æ‰§è¡Œå›BackStackRecordï¼Œè°ƒç”¨runOnCommitæ³¨å†Œçš„æ–¹æ³• ...&#125;//BackStackRecordFragment expandOps(ArrayList&lt;Fragment&gt; added, Fragment oldPrimaryNav) &#123; for (int opNum = 0; opNum &lt; mOps.size(); opNum++) &#123; final Op op = mOps.get(opNum); switch (op.cmd) &#123; case OP_ADD: case OP_ATTACH: added.add(op.fragment); break; case OP_REMOVE: case OP_DETACH: &#123; added.remove(op.fragment); if (op.fragment == oldPrimaryNav) &#123; mOps.add(opNum, new Op(OP_UNSET_PRIMARY_NAV, op.fragment)); opNum++; oldPrimaryNav = null; &#125; &#125; break; case OP_REPLACE: &#123;//æ¥åˆ°è¿™é‡Œ final Fragment f = op.fragment; final int containerId = f.mContainerId; boolean alreadyAdded = false; for (int i = added.size() - 1; i &gt;= 0; i--) &#123; final Fragment old = added.get(i); if (old.mContainerId == containerId) &#123; if (old == f) &#123; alreadyAdded = true; &#125; else &#123; // This is duplicated from above since we only make // a single pass for expanding ops. Unset any outgoing primary nav. if (old == oldPrimaryNav) &#123; mOps.add(opNum, new Op(OP_UNSET_PRIMARY_NAV, old)); opNum++; oldPrimaryNav = null; &#125; final Op removeOp = new Op(OP_REMOVE, old); removeOp.enterAnim = op.enterAnim; removeOp.popEnterAnim = op.popEnterAnim; removeOp.exitAnim = op.exitAnim; removeOp.popExitAnim = op.popExitAnim; mOps.add(opNum, removeOp); added.remove(old); opNum++; &#125; &#125; &#125; if (alreadyAdded) &#123; mOps.remove(opNum); opNum--; &#125; else &#123; op.cmd = OP_ADD; added.add(f); &#125; &#125; break; case OP_SET_PRIMARY_NAV: &#123; // It&#x27;s ok if this is null, that means we will restore to no active // primary navigation fragment on a pop. mOps.add(opNum, new Op(OP_UNSET_PRIMARY_NAV, oldPrimaryNav)); opNum++; // Will be set by the OP_SET_PRIMARY_NAV we inserted before when run oldPrimaryNav = op.fragment; &#125; break; &#125; &#125; return oldPrimaryNav;&#125;void executeOps() &#123; final int numOps = mOps.size(); for (int opNum = 0; opNum &lt; numOps; opNum++) &#123; final Op op = mOps.get(opNum); final Fragment f = op.fragment; if (f != null) &#123; f.setNextTransition(mTransition, mTransitionStyle); &#125; switch (op.cmd) &#123; case OP_ADD: f.setNextAnim(op.enterAnim); mManager.addFragment(f, false); break; case OP_REMOVE: f.setNextAnim(op.exitAnim); mManager.removeFragment(f); break; case OP_HIDE: f.setNextAnim(op.exitAnim); mManager.hideFragment(f); break; case OP_SHOW: f.setNextAnim(op.enterAnim); mManager.showFragment(f); break; case OP_DETACH: f.setNextAnim(op.exitAnim); mManager.detachFragment(f); break; case OP_ATTACH: f.setNextAnim(op.enterAnim); mManager.attachFragment(f); break; case OP_SET_PRIMARY_NAV: mManager.setPrimaryNavigationFragment(f); break; case OP_UNSET_PRIMARY_NAV: mManager.setPrimaryNavigationFragment(null); break; default: throw new IllegalArgumentException(&quot;Unknown cmd: &quot; + op.cmd); &#125; if (!mReorderingAllowed &amp;&amp; op.cmd != OP_ADD &amp;&amp; f != null) &#123; mManager.moveFragmentToExpectedState(f); &#125; &#125; if (!mReorderingAllowed) &#123; // Added fragments are added at the end to comply with prior behavior. mManager.moveToState(mManager.mCurState, true); &#125;&#125;////FragmentManagerpublic void addFragment(Fragment fragment, boolean moveToStateNow) &#123; if (moveToStateNow) &#123; moveToState(fragment); &#125;&#125; void moveToState(Fragment f, int newState, int transit, int transitionStyle, boolean keepActive) &#123; if (f.mState &lt;= newState) &#123; switch (f.mState) &#123; case Fragment.INITIALIZING: ... case Fragment.CREATED: ... case Fragment.ACTIVITY_CREATED: ... case Fragment.STARTED: ... &#125; &#125; else if (f.mState &gt; newState) &#123; switch (f.mState) &#123; case Fragment.RESUMED: ... case Fragment.STARTED: ... case Fragment.ACTIVITY_CREATED: ... case Fragment.CREATED: ... &#125; &#125; &#125; è¿™é‡Œçš„æµç¨‹æœ‰ç‚¹å¤æ‚ï¼Œå¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š commit---&gt;commitInternal---&gt;FragmentManagerä¸­åˆ°enqueueAction---&gt;scheduleCommit---&gt;execPendingActions---&gt;removeRedundantOperationsAndExecute---&gt;executeOpsTogether---&gt;expandOps æœ€ç»ˆä¼šæ‰§è¡ŒmManager.addFragmentï¼Œç„¶åè°ƒç”¨moveToStateæ¥æ‰§è¡ŒçœŸæ­£çš„æ“ä½œã€‚åœ¨è¿™é‡Œé¢ä¼šè°ƒç”¨Fragmentçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ å‚è€ƒ https://www.jianshu.com/p/f2fcc670afd6","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"HandleråŸç†","date":"2022-03-08T02:25:29.634Z","path":"wiki/Android/åŸºç¡€/HandleråŸç†/","text":"Hanlderç³»åˆ—ç›®å½•ï¼š HandleråŸºæœ¬ç”¨æ³• HandleråŸç† æ¦‚è¦Handleræ˜¯Androidå­çº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¹‹é—´é€šä¿¡çš„ä¸€ç§æœºåˆ¶ã€‚åƒQtç­‰æŠ€æœ¯ä½¿ç”¨çš„ä¹Ÿæ˜¯ç±»ä¼¼çš„æ¶ˆæ¯æœºåˆ¶ã€‚ æˆ‘ä»¬ç«™åœ¨è®¾è®¡è€…çš„è§’åº¦æ€è€ƒï¼Œå¦‚æœè¦è‡ªå·±æ­å»ºä¸€å¥—çº¿ç¨‹é—´é€šä¿¡ä¼šæ€ä¹ˆåšï¼Ÿ é¦–å…ˆåº”è¯¥æœ‰ä¸ªæ¶ˆæ¯é˜Ÿåˆ—queueï¼Œç„¶ååœ¨çº¿ç¨‹ä¸­æ— çº¿è½®è¯¢ï¼Œå‘ç°é˜Ÿåˆ—é‡Œé¢æœ‰æ•°æ®äº†ï¼Œå°±æ‹¿å‡ºæ¥ï¼Œè°ƒç”¨å…¶targetçš„å›è°ƒã€‚Androidå°±æ˜¯è¿™æ ·æ¥è®¾è®¡çš„ï¼Œè€ŒHandlerç±»åªæ˜¯ä¸€ä¸ªè¾…åŠ©ï¼Œå®ƒæœ‰æ¶ˆæ¯å’Œå¯¹è±¡çš„å¼•ç”¨ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚HandlerThreadå‘¢ï¼Œåˆå¸®æˆ‘ä»¬å°è£…äº†ä¸€ä¸ªç”¨äºä¸¤ä¸ªå­çº¿ç¨‹çš„é€šä¿¡ã€‚å®ƒå¸®æˆ‘ä»¬è€ƒè™‘åˆ°äº†å¼‚æ­¥è°ƒç”¨çš„æ—¶é—´å…ˆåé—®é¢˜ã€‚ åœ¨nativeå±‚ï¼Œè¿˜æ˜¯åŸºäºpthreadç›¸å…³APIçš„å°è£…ã€‚ ä½¿ç”¨Handlerçš„åŸå› æ˜¯å¤šä¸ªçº¿ç¨‹å¹¶å‘æ›´æ–°UIçš„åŒæ—¶ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ æ¦‚å¿µ å®šä¹‰ ä½œç”¨ ä¸»çº¿ç¨‹ å½“åº”ç”¨ç¨‹åºç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶ï¼Œä¼šåŒæ—¶è‡ªåŠ¨å¼€å¯ä¸€æ¡ä¸»çº¿ç¨‹ å¤„ç†UIç›¸å…³ å­çº¿ç¨‹ äººä¸ºæ‰‹åŠ¨åˆ›å»ºçš„çº¿ç¨‹ æ‰§è¡Œè€—æ—¶æ“ä½œ æ¶ˆæ¯ï¼ˆMessageï¼‰ çº¿ç¨‹é—´é€šè®¯çš„æ•°æ®å•å…ƒ å­˜å‚¨éœ€è¦æ“ä½œçš„ä¿¡æ¯ æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰ ä¸€ç§æ•°æ®ç»“æ„ å­˜å‚¨Handlerå‘é€è¿‡æ¥çš„ä¿¡æ¯ï¼ˆMessageï¼‰ å¤„ç†è€…ï¼ˆHandlerï¼‰ ä¸»çº¿ç¨‹ä¸å­çº¿ç¨‹çš„é€šä¿¡åª’ä»‹ï¼Œçº¿ç¨‹æ¶ˆæ¯çš„ä¸»è¦å¤„ç†è€… æ·»åŠ æ¶ˆæ¯åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå¤„ç†Looperåˆ†æ´¾è¿‡æ¥çš„æ¶ˆæ¯ å¾ªç¯å™¨ï¼ˆLooperï¼‰ æ¶ˆæ¯é˜Ÿåˆ—ä¸å¤„ç†å™¨çš„é€šä¿¡åª’ä»‹ æ¶ˆæ¯è·å–ï¼šå¾ªç¯å–å‡ºæ¶ˆæ¯é˜Ÿåˆ—çš„æ¶ˆæ¯ï¼Œæ¶ˆæ¯åˆ†å‘ï¼šå°†å–å‡ºçš„æ¶ˆæ¯å‘é€ç»™å¯¹åº”çš„å¤„ç†è€… ThreadLocal ç”¨äºä¸åŒçº¿ç¨‹ä¿å­˜è‡ªå·±çš„ä¿¡æ¯ å·¥ä½œæµç¨‹ å¼‚æ­¥é€šä¿¡å‡†å¤‡ åœ¨ä¸»çº¿ç¨‹ä¸­åˆ›å»º å¤„ç†å™¨å¯¹è±¡Looper æ¶ˆæ¯é˜Ÿåˆ—å¯¹è±¡MessageQueueï¼ŒLooperè‡ªåŠ¨è¿›å…¥æ¶ˆæ¯å¾ªç¯ Handlerå¯¹è±¡ï¼Œè‡ªåŠ¨ç»‘å®šä¸»çº¿ç¨‹çš„Looperã€MessageQueue æ¶ˆæ¯å‘é€ æ¶ˆæ¯å¾ªç¯ æ¶ˆæ¯å¤„ç† æ³¨æ„ æ¯ä¸ªçº¿ç¨‹åªæœ‰ä¸€ä¸ªLooper ä¸€ä¸ªLooperå¯ä»¥ç»‘å®šå¤šä¸ªçº¿ç¨‹çš„Handlerï¼ˆå®ç°çº¿ç¨‹é—´é€šä¿¡ï¼‰ åœ¨Looperä¸­æœ‰ä¸€ä¸ªsetMessageLoggingæ–¹æ³•ï¼Œå¯ä»¥æ·»åŠ æ—¥å¿—çš„ç›‘å¬ï¼Œç”¨äºåˆ†ææ‰€æœ‰çš„æ¶ˆæ¯ æºç åˆ†ææŒ‰ç…§æˆ‘ä»¬çš„ä½¿ç”¨é¡ºåºï¼Œå…ˆçœ‹çœ‹Handlerçš„æ„é€ å‡½æ•° 123456789101112131415161718192021222324252627//æ¥å—Looperå‚æ•°ï¼Œç»‘å®šçº¿ç¨‹public Handler(@NonNull Looper looper) &#123; this(looper, null, false);&#125; public Handler(@Nullable Callback callback, boolean async) &#123; if (FIND_POTENTIAL_LEAKS) &#123; final Class&lt;? extends Handler&gt; klass = getClass(); if ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp; (klass.getModifiers() &amp; Modifier.STATIC) == 0) &#123; Log.w(TAG, &quot;The following Handler class should be static or leaks might occur: &quot; + klass.getCanonicalName()); &#125; &#125;//ç»‘å®šçº¿ç¨‹ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¦‚æœä¸è®¾ç½®Looperï¼Œåˆ™ä½¿ç”¨å½“å‰çº¿ç¨‹çš„Looperã€‚//Looper.myLooper()ä½œç”¨ï¼šè·å–å½“å‰çº¿ç¨‹çš„Looperå¯¹è±¡ï¼›è‹¥çº¿ç¨‹æ— Looperå¯¹è±¡åˆ™æŠ›å‡ºå¼‚å¸¸ mLooper = Looper.myLooper(); if (mLooper == null) &#123; throw new RuntimeException( &quot;Can&#x27;t create handler inside thread &quot; + Thread.currentThread() + &quot; that has not called Looper.prepare()&quot;); &#125; mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async;&#125; é‚£ä¹ˆLooperæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™æ„é€ çš„å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹ä¸»çº¿ç¨‹çš„åˆå§‹åŒ–æ˜¯å¦‚ä½•åšçš„ï¼Œä»¥ä¸‹æ˜¯ActivityThreadçš„å…¥å£å‡½æ•°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051public static void main(String[] args) &#123; Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, &quot;ActivityThreadMain&quot;); // CloseGuard defaults to true and can be quite spammy. We // disable it here, but selectively enable it later (via // StrictMode) on debug builds, but using DropBox, not logs. CloseGuard.setEnabled(false); Environment.initForCurrentUser(); // Set the reporter for event logging in libcore EventLogger.setReporter(new EventLoggingReporter()); // Make sure TrustedCertificateStore looks in the right place for CA certificates final File configDir = Environment.getUserConfigDirectory(UserHandle.myUserId()); TrustedCertificateStore.setDefaultUserDirectory(configDir); Process.setArgV0(&quot;&lt;pre-initialized&gt;&quot;); Looper.prepareMainLooper();//æ„é€ äº†Looper // Find the value for &#123;@link #PROC_START_SEQ_IDENT&#125; if provided on the command line. // It will be in the format &quot;seq=114&quot; long startSeq = 0; if (args != null) &#123; for (int i = args.length - 1; i &gt;= 0; --i) &#123; if (args[i] != null &amp;&amp; args[i].startsWith(PROC_START_SEQ_IDENT)) &#123; startSeq = Long.parseLong( args[i].substring(PROC_START_SEQ_IDENT.length())); &#125; &#125; &#125; ActivityThread thread = new ActivityThread(); thread.attach(false, startSeq); if (sMainThreadHandler == null) &#123; sMainThreadHandler = thread.getHandler(); &#125; if (false) &#123; Looper.myLooper().setMessageLogging(new LogPrinter(Log.DEBUG, &quot;ActivityThread&quot;)); &#125; // End of event ActivityThreadMain. Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); Looper.loop();//looperè¿›å…¥å¾ªç¯ï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸‹é¢çš„ä»£ç æ˜¯ä¸ä¼šæ‰§è¡Œçš„ throw new RuntimeException(&quot;Main thread loop unexpectedly exited&quot;);&#125; é‚£ä¹ˆLooperå†…éƒ¨åˆåšäº†ä»€ä¹ˆå‘¢ï¼Ÿ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970public static void prepareMainLooper() &#123; prepare(false); synchronized (Looper.class) &#123; if (sMainLooper != null) &#123; throw new IllegalStateException(&quot;The main Looper has already been prepared.&quot;); &#125; sMainLooper = myLooper(); &#125; &#125;private static void prepare(boolean quitAllowed) &#123;//åˆ¤æ–­looperæ˜¯å¦æ˜¯nullå¦‚æœæ˜¯ï¼Œå°±åˆ›å»ºï¼Œå¹¶å°†å…¶å­˜åˆ°ThreadLocalä¸­ï¼Œä¸Šé¢è¯´çš„handlerä¸­çš„looperå°±æ˜¯ä»ThreadLocalä¸­å–å‡ºæ¥çš„ï¼›//è¿™é‡Œå¯çŸ¥ï¼Œæ¯ä¸ªçº¿ç¨‹åªæœ‰ä¸€ä¸ªLooper if (sThreadLocal.get() != null) &#123; throw new RuntimeException(&quot;Only one Looper may be created per thread&quot;); &#125; sThreadLocal.set(new Looper(quitAllowed));&#125;public static void loop() &#123; final Looper me = myLooper(); if (me == null) &#123; throw new RuntimeException(&quot;No Looper; Looper.prepare() wasn&#x27;t called on this thread.&quot;); &#125; final MessageQueue queue = me.mQueue; Binder.clearCallingIdentity(); final long ident = Binder.clearCallingIdentity(); for (;;) &#123; Message msg = queue.next(); // might block if (msg == null) &#123; // No message indicates that the message queue is quitting. return; &#125; final Printer logging = me.mLogging; if (logging != null) &#123; logging.println(&quot;&gt;&gt;&gt;&gt;&gt; Dispatching to &quot; + msg.target + &quot; &quot; + msg.callback + &quot;: &quot; + msg.what); &#125; final long traceTag = me.mTraceTag; if (traceTag != 0 &amp;&amp; Trace.isTagEnabled(traceTag)) &#123; Trace.traceBegin(traceTag, msg.target.getTraceName(msg)); &#125; try &#123; msg.target.dispatchMessage(msg); //åˆ†å‘æ¶ˆæ¯ï¼Œè¿™é‡Œçš„targetå°±æ˜¯handler &#125; finally &#123; if (traceTag != 0) &#123; Trace.traceEnd(traceTag); &#125; &#125; if (logging != null) &#123; logging.println(&quot;&lt;&lt;&lt;&lt;&lt; Finished to &quot; + msg.target + &quot; &quot; + msg.callback); &#125; final long newIdent = Binder.clearCallingIdentity(); if (ident != newIdent) &#123; Log.wtf(TAG, &quot;Thread identity changed from 0x&quot; + Long.toHexString(ident) + &quot; to 0x&quot; + Long.toHexString(newIdent) + &quot; while dispatching to &quot; + msg.target.getClass().getName() + &quot; &quot; + msg.callback + &quot; what=&quot; + msg.what); &#125; msg.recycleUnchecked(); //æ¶ˆæ¯çš„å›æ”¶ &#125;&#125; è‡³æ­¤ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ªçº¿ç¨‹ä¸­åªæœ‰ä¸€ä¸ªLooperï¼ŒLooperè¿›è¡Œå¾ªç¯åï¼Œä¼šä¸åœçš„ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ‹¿åˆ°æ¶ˆæ¯è¿›è¡Œå¤„ç†ã€‚ ç„¶åå°±æ˜¯æ¶ˆæ¯çš„å‘é€å’Œæ¥æ”¶ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹æ¶ˆæ¯æ˜¯å¦‚ä½•å‘é€çš„ 123456789101112131415161718192021222324252627282930313233343536Handler.java//å‘é€æ¶ˆæ¯public final boolean sendMessage(@NonNull Message msg) &#123; return sendMessageDelayed(msg, 0);&#125;public final boolean sendMessageDelayed(@NonNull Message msg, long delayMillis) &#123; if (delayMillis &lt; 0) &#123; delayMillis = 0; &#125; return sendMessageAtTime(msg, SystemClock.uptimeMillis() + delayMillis);&#125;public boolean sendMessageAtTime(@NonNull Message msg, long uptimeMillis) &#123; MessageQueue queue = mQueue; if (queue == null) &#123; RuntimeException e = new RuntimeException( this + &quot; sendMessageAtTime() called with no mQueue&quot;); Log.w(&quot;Looper&quot;, e.getMessage(), e); return false; &#125; return enqueueMessage(queue, msg, uptimeMillis);&#125;private boolean enqueueMessage(@NonNull MessageQueue queue, @NonNull Message msg, long uptimeMillis) &#123; msg.target = this; msg.workSourceUid = ThreadLocalWorkSource.getUid(); if (mAsynchronous) &#123; msg.setAsynchronous(true); &#125; //æ¶ˆæ¯è¢«æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œloopä¸­å¤„ç† return queue.enqueueMessage(msg, uptimeMillis);&#125; ä»loopæ–¹æ³•ä¸­å¯çŸ¥ï¼ŒdispatchMessageä¼šæœ€ç»ˆå¤„ç†æ¶ˆæ¯ 123456789101112131415Handler.javapublic void dispatchMessage(@NonNull Message msg) &#123; if (msg.callback != null) &#123; handleCallback(msg); &#125; else &#123; if (mCallback != null) &#123; if (mCallback.handleMessage(msg)) &#123; return; &#125; &#125; handleMessage(msg); &#125;&#125; åˆ¤æ–­msg.callbackæ˜¯ä¸æ˜¯nullï¼Œå¦‚æœä¸æ˜¯ï¼Œé‚£ä¹ˆå°±ç»™è¿™ä¸ªcallbackå¤„ç†ï¼Œè¿™ä¸ªcallbackæ˜¯messageä¸­çš„ä¸€ä¸ªRunnableï¼›Message.obtain()å…¶å®æ˜¯æœ‰å…¶ä»–å‚æ•°çš„æ–¹æ³•çš„ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯obtain(Handler h, Runnable callback)ï¼›å¦‚æœä½ ç”¨äº†è¿™ä¸ªï¼Œé‚£ä¹ˆæ¶ˆæ¯å°±ä¼šåœ¨ä½ å®ç°çš„Runnableä¸­æ¥æ”¶åˆ°å¤„ç†çš„å›è°ƒï¼› ç¬¬äºŒä¸ªæ˜¯åˆ¤æ–­handlerå†…éƒ¨çš„callbackæ˜¯ä¸æ˜¯nullï¼Œå¦‚æœä¸æ˜¯nullï¼Œå°±è®©ä»–å»å¤„ç†ï¼Œè¿™é‡Œçš„Callbackå¯ä¸æ˜¯Runnableäº†ï¼Œä»–æ˜¯ä¸€ä¸ªinterfaceï¼Œé‡Œé¢å®šä¹‰äº†ä¸€ä¸ªhandleMessage(Message msg);æ–¹æ³•ï¼Œè¿™ä¸ªæ€ä¹ˆå®ç°å‘¢ï¼Ÿhandlerç±»é‡ŒåŒæ ·æœ‰Handler(Callback callback)æ„é€ æ–¹æ³• æœ€åæ‰è½®åˆ°handlerç±»é‡Œçš„æ–¹æ³•handleMessageæ¥å¤„ç†æ¶ˆæ¯ã€‚ åº•å±‚åŸç† Handlerå¼•èµ·çš„å†…å­˜æ³„éœ²åŸå› ä»¥åŠæœ€ä½³è§£å†³æ–¹æ¡ˆHandlerå…è®¸æˆ‘ä»¬å‘é€å»¶æ—¶æ¶ˆæ¯ï¼Œå¦‚æœåœ¨å»¶æ—¶æœŸé—´ç”¨æˆ·å…³é—­äº†Activityï¼Œé‚£ä¹ˆè¯¥ Activity ä¼šæ³„éœ²ã€‚ è¿™ä¸ªæ³„éœ²æ˜¯å› ä¸º Message ä¼šæŒæœ‰ Handlerï¼Œè€Œåˆå› ä¸º Java çš„ç‰¹æ€§ï¼Œå†…éƒ¨ç±»ä¼šæŒæœ‰å¤–éƒ¨ç±»ï¼Œä½¿å¾— Activity ä¼šè¢« Handler æŒæœ‰ï¼Œè¿™æ ·æœ€ç»ˆå°±å¯¼è‡´ Activity æ³„éœ²ã€‚ å°† Handler å®šä¹‰æˆé™æ€çš„å†…éƒ¨ç±»ï¼Œåœ¨å†…éƒ¨æŒæœ‰ Activity çš„å¼±å¼•ç”¨ï¼Œå¹¶åœ¨Acitivityçš„onDestroy()ä¸­è°ƒç”¨handler.removeCallbacksAndMessages(null)åŠæ—¶ç§»é™¤æ‰€æœ‰æ¶ˆæ¯ã€‚å…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒHandleråŸºæœ¬ç”¨æ³• å‚è€ƒ https://www.jianshu.com/p/03d29cfe85cc https://www.jianshu.com/p/b4d745c7ff7a","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"ContentProvider","date":"2022-03-08T02:25:29.626Z","path":"wiki/Android/åŸºç¡€/ContentProvider/","text":"æ¦‚è¿°ContentProvideræ˜¯ä¸€ç§æ•°æ®å…±äº«å‹ç»„ä»¶ï¼Œå¯ä»¥åœ¨åº”ç”¨ä¹‹é—´å…±äº«æ•°æ®ã€‚æ‰€ä»¥ä¸BroadcastReceiverä¸€æ ·ï¼Œå…¶å¯ä»¥è„±ç¦»Activityå®ç°ã€‚åœ¨å®ç°ContentProvideræ—¶ï¼Œéœ€è¦ç»§æ‰¿ContentProvideræŠ½è±¡ç±»ï¼Œç„¶ååœ¨AndroidManifest.xmlä¸­æ³¨å†Œç±»åå’ŒContentProviderçš„åŸŸåã€‚åŒæ ·çš„ï¼Œä¸éœ€è¦é‡å†™onCreat()æ–¹æ³•ï¼Œè€Œæ˜¯å®ç°CRUDæ“ä½œï¼Œæ‰€ä»¥ContentProvideræ²¡æœ‰å¯åŠ¨å’Œåœæ­¢çš„æ¦‚å¿µï¼Œæ›´åƒæ˜¯ä¸€ä¸ªç³»ç»Ÿçº§çš„ç›‘å¬å™¨ã€‚ä¸å‰ä¸‰ä¸ªç»„ä»¶ä¸åŒçš„æ˜¯ï¼ŒContentProviderå¹¶æ²¡æœ‰ä½¿ç”¨intentï¼Œè€Œæ˜¯ä½¿ç”¨URIæ¥åˆ¤å®šèƒ½å¦ä¸ºContentResolveræä¾›æ•°æ®å…±äº«ã€‚ å…³äºContentProviderï¼Œç”¨æ¥æä¾›å…¶ä»–åœ°æ–¹ï¼ˆåŒ…æ‹¬å…¶ä»–Appï¼‰è°ƒç”¨çš„ä¸€ç§å…¨å±€ï¼ˆç³»ç»Ÿçº§ï¼‰æ–¹å¼ã€‚æœ‰äº†ContentProviderï¼Œæˆ‘ä»¬å°±èƒ½æ–¹ä¾¿çš„è°ƒç”¨ç›¸å†Œçš„ä¸œè¥¿ã€è¿›è¡Œæ–‡ä»¶é€‰æ‹©ï¼Œåœ¨æˆ‘ä»¬è‡ªå·±çš„Appä¸­ï¼Œä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ªæ•°æ®ä¸­å¿ƒã€‚ å½“æ•°æ®é‡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œç»§ç»­ç”¨Parcelåšå®¹å™¨æ•ˆç‡ä¼šæ¯”è¾ƒä½ï¼Œå› æ­¤å®ƒè¿˜ä½¿ç”¨äº†åŒ¿åå…±äº«å†…å­˜çš„æ–¹å¼ã€‚ ä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜æ˜¯ï¼ŒContentProviderçš„æä¾›è€…è¿›ç¨‹ä¸å†å­˜æ´»æ—¶ï¼Œå…¶ä»–è¿›ç¨‹é€šè¿‡Providerè¯»ä¸€ä¸ªé å¸¸ç®€å•çš„æ•°æ®æ—¶ï¼Œéƒ½éœ€è¦å…ˆæŠŠæä¾›è€…è¿›ç¨‹å¯åŠ¨èµ·æ¥(é™¤éæŒ‡å®šmultiprocess&#x3D;true)ï¼Œè¿™å¯¹ç”¨æˆ·æ˜¯ ç›¸å½“ä¸å‹å¥½çš„ã€‚åˆå› ä¸ºå…¶æ˜¯é—´æ¥é€šè¿‡dbè¿›è¡Œæ•°æ®æ“ä½œï¼Œæ‰€ä»¥æ•ˆç‡ä¹Ÿè¿œä¸å¦‚ç›´æ¥æ“ä½œdbã€‚å› æ­¤åœ¨ç”¨æˆ·appä¸­ï¼Œä¸æ˜¯å¾ˆå»ºè®®ç»å¸¸ä½¿ç”¨ContentProviderã€‚ä¸è¿‡å¯¹äºç³»ç»Ÿçº§çš„appï¼Œå®ƒç»Ÿä¸€äº†æ•°æ®æ“ä½œçš„è§„èŒƒï¼Œåˆ©æ˜¯è¿œå¤§äºå¼Šçš„ã€‚ åœ¨å¾ˆå¤šå¼€æºåº“ä¸­ï¼Œä¹Ÿè¿ç”¨äº†ContentProviderçš„ç‰¹æ€§æ¥è¿›è¡Œåˆå§‹åŒ–ã€‚ ä¸€äº›æ³¨æ„ç‚¹ å¯¹äºé¢å‘ Android 7.0 çš„åº”ç”¨ï¼ŒAndroid æ¡†æ¶æ‰§è¡Œçš„ StrictMode API æ”¿ç­–ç¦æ­¢åœ¨æ‚¨çš„åº”ç”¨å¤–éƒ¨å…¬å¼€ file:&#x2F;&#x2F; URIã€‚å¦‚æœä¸€é¡¹åŒ…å«æ–‡ä»¶ URI çš„ intent ç¦»å¼€æ‚¨çš„åº”ç”¨ï¼Œåˆ™åº”ç”¨å‡ºç°æ•…éšœï¼Œå¹¶å‡ºç° FileUriExposedException å¼‚å¸¸ã€‚ å› ä¸ºAndroid7çš„å˜åŒ–ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨FileProvideræ—¶éœ€è¦åšä¸€äº›å¤„ç†ï¼Œå…³äºå¦‚ä½•å¤„ç†ï¼Œç½‘ä¸Šä¸€å¤§æŠŠèµ„æ–™ï¼Œæ€»ç»“å‡ºæ¥éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š é…ç½®Manifestæ–‡ä»¶ï¼Œæ·»åŠ provider å¯¹äºAndroid7ä»¥ä¸Šï¼Œåœ¨FileProvider.getUriForFileæ—¶ä½¿ç”¨é…ç½®çš„authority å‚è€ƒ å®˜æ–¹ä½¿ç”¨æ‰‹å†Œ https://blog.csdn.net/lmj623565791/article/details/72859156 https://developer.android.com/topic/libraries/app-startup","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"ContentProviderå·¥ä½œè¿‡ç¨‹","date":"2022-03-08T02:25:29.626Z","path":"wiki/Android/åŸºç¡€/ContentProviderå·¥ä½œè¿‡ç¨‹/","text":"æ¦‚è¦ContentProviderä¸»è¦ç”¨æ¥ç»™ä¸åŒåº”ç”¨æä¾›æ•°æ®ï¼Œå½“å…¶æ‰€åœ¨è¿›ç¨‹å¯åŠ¨æ—¶ï¼ŒContentProviderä¼šåŒæ—¶å¯åŠ¨å¹¶å‘å¸ƒåˆ°AMSä¸­ã€‚ å½“android:multiprocessä¸ºtrueæ—¶ï¼ŒContentProviderä¸ºå¤šå®ä¾‹ã€‚ å…¶æä¾›äº†queryã€updateã€deleteã€insertç­‰æ¥å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæ•°æ®æ“ä½œã€‚ å¯åŠ¨æµç¨‹æˆ‘ä»¬è¦ä½¿ç”¨ContentProviderï¼Œéœ€è¦é€šè¿‡getContentResolver()ï¼Œå®é™…æ˜¯ApplicationContentResolverå¯¹è±¡ã€‚ æˆ‘ä»¬ä»queryæ–¹æ³•å…¥æ‰‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586//å¼€å§‹æŸ¥è¯¢Cursor cursor = getContentResolver().query(Uri.parse(&quot;content://com.lqd.androidpractice.provider.UsersProvider/users&quot;), null, null, null, null);//ContentResolver.javapublic final @Nullable Cursor query(final @RequiresPermission.Read @NonNull Uri uri, @Nullable String[] projection, @Nullable Bundle queryArgs, @Nullable CancellationSignal cancellationSignal) &#123; Preconditions.checkNotNull(uri, &quot;uri&quot;); try &#123; if (mWrapped != null) &#123; return mWrapped.query(uri, projection, queryArgs, cancellationSignal); &#125; &#125; catch (RemoteException e) &#123; return null; &#125; IContentProvider unstableProvider = acquireUnstableProvider(uri);//è°ƒç”¨å­ç±»ApplicationContentResolver if (unstableProvider == null) &#123; return null; &#125;.... &#125;//ContextImplçš„é™æ€å†…éƒ¨ç±»ApplicationContentResolver@Overrideprotected IContentProvider acquireUnstableProvider(Context c, String auth) &#123; //ActivityThread return mMainThread.acquireProvider(c, ContentProvider.getAuthorityWithoutUserId(auth), resolveUserIdFromAuthority(auth), false);&#125;//ActivityThread.java//å­˜å‚¨Providerå¯¹è±¡final ArrayMap&lt;IBinder, ProviderRefCount&gt; mProviderRefCountMap = new ArrayMap&lt;IBinder, ProviderRefCount&gt;(); public final IContentProvider acquireProvider( Context c, String auth, int userId, boolean stable) &#123; final IContentProvider provider = acquireExistingProvider(c, auth, userId, stable); if (provider != null) &#123; return provider; &#125; // There is a possible race here. Another thread may try to acquire // the same provider at the same time. When this happens, we want to ensure // that the first one wins. // Note that we cannot hold the lock while acquiring and installing the // provider since it might take a long time to run and it could also potentially // be re-entrant in the case where the provider is in the same process. ContentProviderHolder holder = null; try &#123; synchronized (getGetProviderLock(auth, userId)) &#123; holder = ActivityManager.getService().getContentProvider( getApplicationThread(), c.getOpPackageName(), auth, userId, stable); &#125; &#125; catch (RemoteException ex) &#123; throw ex.rethrowFromSystemServer(); &#125; if (holder == null) &#123; Slog.e(TAG, &quot;Failed to find provider info for &quot; + auth); return null; &#125; // Install provider will increment the reference count for us, and break // any ties in the race. holder = installProvider(c, holder, holder.info, true /*noisy*/, holder.noReleaseNeeded, stable); return holder.provider;&#125;private ContentProviderHolder installProvider(Context context, ContentProviderHolder holder, ProviderInfo info, boolean noisy, boolean noReleaseNeeded, boolean stable) &#123; ContentProvider localProvider = null; .. mProviderRefCountMap.put(jBinder, prc);//æ·»åŠ åˆ°Mapä¸­ ...&#125; ç”±ä»¥ä¸Šä»£ç å¯çŸ¥ï¼Œæ²¡æœ‰å°±åˆ›å»ºProviderï¼Œåˆ›å»ºå®Œåä¼šæ·»åŠ åˆ°mProviderRefCountMapä¸­ã€‚å¦‚æœProviderå¯¹åº”åˆ°è¿›ç¨‹æœ‰å¯åŠ¨ï¼Œåˆ™åœ¨Applicationå¯åŠ¨æ—¶åŒæ—¶åˆå§‹åŒ–äº†Providerã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980ActivityThread.javapublic static void main(String[] args) &#123;...ActivityThread thread = new ActivityThread();thread.attach(false, startSeq);...&#125;private void attach(boolean system, long startSeq) &#123; sCurrentActivityThread = this; mSystemThread = system; if (!system) &#123; android.ddm.DdmHandleAppName.setAppName(&quot;&lt;pre-initialized&gt;&quot;, UserHandle.myUserId()); RuntimeInit.setApplicationObject(mAppThread.asBinder()); final IActivityManager mgr = ActivityManager.getService(); try &#123; mgr.attachApplication(mAppThread, startSeq);//ActivityManagerService &#125; catch (RemoteException ex) &#123; throw ex.rethrowFromSystemServer(); &#125; .... &#125;&#125;//ActivityManagerService.java@Overridepublic final void attachApplication(IApplicationThread thread, long startSeq) &#123; synchronized (this) &#123; int callingPid = Binder.getCallingPid(); final int callingUid = Binder.getCallingUid(); final long origId = Binder.clearCallingIdentity(); attachApplicationLocked(thread, callingPid, callingUid, startSeq); Binder.restoreCallingIdentity(origId); &#125;&#125;private final boolean attachApplicationLocked(IApplicationThread thread, int pid, int callingUid, long startSeq) &#123; .... if (app.isolatedEntryPoint != null) &#123; // This is an isolated process which should just call an entry point instead of // being bound to an application. thread.runIsolatedEntryPoint(app.isolatedEntryPoint, app.isolatedEntryPointArgs); &#125; else if (instr2 != null) &#123; //ApplicationThread thread.bindApplication(processName, appInfo, providers, instr2.mClass, profilerInfo, instr2.mArguments, instr2.mWatcher, instr2.mUiAutomationConnection, testMode, mBinderTransactionTrackingEnabled, enableTrackAllocation, isRestrictedBackupMode || !normalMode, app.isPersistent(), new Configuration(app.getWindowProcessController().getConfiguration()), app.compat, getCommonServicesLocked(app.isolated), mCoreSettingsObserver.getCoreSettingsLocked(), buildSerial, autofillOptions, contentCaptureOptions); &#125; else &#123; thread.bindApplication(processName, appInfo, providers, null, profilerInfo, null, null, null, testMode, mBinderTransactionTrackingEnabled, enableTrackAllocation, isRestrictedBackupMode || !normalMode, app.isPersistent(), new Configuration(app.getWindowProcessController().getConfiguration()), app.compat, getCommonServicesLocked(app.isolated), mCoreSettingsObserver.getCoreSettingsLocked(), buildSerial, autofillOptions, contentCaptureOptions); &#125; ... &#125; &#125; AMSçš„attachApplicationæ–¹æ³•è°ƒç”¨äº†attachApplicationLockedæ–¹æ³•ï¼ŒattachApplicationLockedä¸­åˆè°ƒç”¨äº†ApplicationThreadçš„bindApplicationï¼Œæ³¨æ„è¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯è¿›ç¨‹é—´è°ƒç”¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184ActivityThreadçš„å†…éƒ¨ç±»ApplicationThreadpublic final void bindApplication(String processName, ApplicationInfo appInfo, List&lt;ProviderInfo&gt; providers, ComponentName instrumentationName, ProfilerInfo profilerInfo, Bundle instrumentationArgs, IInstrumentationWatcher instrumentationWatcher, IUiAutomationConnection instrumentationUiConnection, int debugMode, boolean enableBinderTracking, boolean trackAllocation, boolean isRestrictedBackupMode, boolean persistent, Configuration config, CompatibilityInfo compatInfo, Map services, Bundle coreSettings, String buildSerial, AutofillOptions autofillOptions, ContentCaptureOptions contentCaptureOptions) &#123; if (services != null) &#123; if (false) &#123; // Test code to make sure the app could see the passed-in services. for (Object oname : services.keySet()) &#123; if (services.get(oname) == null) &#123; continue; // AM just passed in a null service. &#125; String name = (String) oname; // See b/79378449 about the following exemption. switch (name) &#123; case &quot;package&quot;: case Context.WINDOW_SERVICE: continue; &#125; if (ServiceManager.getService(name) == null) &#123; Log.wtf(TAG, &quot;Service &quot; + name + &quot; should be accessible by this app&quot;); &#125; &#125; &#125; // Setup the service cache in the ServiceManager ServiceManager.initServiceCache(services); &#125; setCoreSettings(coreSettings); AppBindData data = new AppBindData(); data.processName = processName; data.appInfo = appInfo; data.providers = providers; data.instrumentationName = instrumentationName; data.instrumentationArgs = instrumentationArgs; data.instrumentationWatcher = instrumentationWatcher; data.instrumentationUiAutomationConnection = instrumentationUiConnection; data.debugMode = debugMode; data.enableBinderTracking = enableBinderTracking; data.trackAllocation = trackAllocation; data.restrictedBackupMode = isRestrictedBackupMode; data.persistent = persistent; data.config = config; data.compatInfo = compatInfo; data.initProfilerInfo = profilerInfo; data.buildSerial = buildSerial; data.autofillOptions = autofillOptions; data.contentCaptureOptions = contentCaptureOptions; sendMessage(H.BIND_APPLICATION, data);&#125;private void handleBindApplication(AppBindData data) &#123;...//Contextåˆå§‹åŒ–final ContextImpl appContext = ContextImpl.createAppContext(this, data.info); updateLocaleListFromAppContext(appContext, mResourcesManager.getConfiguration().getLocales()); ...//Instrumentationåˆå§‹åŒ– try &#123; final ClassLoader cl = instrContext.getClassLoader(); mInstrumentation = (Instrumentation) cl.loadClass(data.instrumentationName.getClassName()).newInstance(); &#125; catch (Exception e) &#123; throw new RuntimeException( &quot;Unable to instantiate instrumentation &quot; + data.instrumentationName + &quot;: &quot; + e.toString(), e); &#125; final ComponentName component = new ComponentName(ii.packageName, ii.name); mInstrumentation.init(this, instrContext, appContext, component, data.instrumentationWatcher, data.instrumentationUiAutomationConnection);....//Applicationåˆå§‹åŒ– try &#123; // If the app is being launched for full backup or restore, bring it up in // a restricted environment with the base application class. app = data.info.makeApplication(data.restrictedBackupMode, null); // Propagate autofill compat state app.setAutofillOptions(data.autofillOptions); // Propagate Content Capture options app.setContentCaptureOptions(data.contentCaptureOptions); mInitialApplication = app; if (!data.restrictedBackupMode) &#123; if (!ArrayUtils.isEmpty(data.providers)) &#123; installContentProviders(app, data.providers);//åˆå§‹åŒ–Providerï¼Œæ·»åŠ åˆ°Mapä¸­ &#125; &#125; ... try &#123; mInstrumentation.callApplicationOnCreate(app);//è°ƒç”¨Applicationçš„onCreateï¼Œç”±æ­¤å¯çŸ¥ï¼ŒContentProviderçš„onCreateè¦å…ˆè°ƒç”¨ &#125; catch (Exception e) &#123; if (!mInstrumentation.onException(app, e)) &#123; throw new RuntimeException( &quot;Unable to create application &quot; + app.getClass().getName() + &quot;: &quot; + e.toString(), e); &#125; &#125; ...&#125;private ContentProviderHolder installProvider(Context context, ContentProviderHolder holder, ProviderInfo info, boolean noisy, boolean noReleaseNeeded, boolean stable) &#123; ContentProvider localProvider = null; ... try &#123; final java.lang.ClassLoader cl = c.getClassLoader(); LoadedApk packageInfo = peekPackageInfo(ai.packageName, true); if (packageInfo == null) &#123; // System startup case. packageInfo = getSystemContext().mPackageInfo; &#125; localProvider = packageInfo.getAppFactory() .instantiateProvider(cl, info.name); provider = localProvider.getIContentProvider(); if (provider == null) &#123; Slog.e(TAG, &quot;Failed to instantiate class &quot; + info.name + &quot; from sourceDir &quot; + info.applicationInfo.sourceDir); return null; &#125; if (DEBUG_PROVIDER) Slog.v( TAG, &quot;Instantiating local provider &quot; + info.name); // XXX Need to create the correct context for this provider. localProvider.attachInfo(c, info);//è¿›å…¥ContentProvider&#125; catch (java.lang.Exception e) &#123; if (!mInstrumentation.onException(null, e)) &#123; throw new RuntimeException( &quot;Unable to get provider &quot; + info.name + &quot;: &quot; + e.toString(), e); &#125; return null; ...&#125; //ContentProvider.javaprivate void attachInfo(Context context, ProviderInfo info, boolean testing) &#123; mNoPerms = testing; mCallingPackage = new ThreadLocal&lt;&gt;(); /* * Only allow it to be set once, so after the content service gives * this to us clients can&#x27;t change it. */ if (mContext == null) &#123; mContext = context; if (context != null &amp;&amp; mTransport != null) &#123; mTransport.mAppOpsManager = (AppOpsManager) context.getSystemService( Context.APP_OPS_SERVICE); &#125; mMyUid = Process.myUid(); if (info != null) &#123; setReadPermission(info.readPermission); setWritePermission(info.writePermission); setPathPermissions(info.pathPermissions); mExported = info.exported; mSingleUser = (info.flags &amp; ProviderInfo.FLAG_SINGLE_USER) != 0; setAuthorities(info.authority); &#125; ContentProvider.this.onCreate();//è°ƒç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•° &#125;&#125; ç”±ä»¥ä¸Šä»£ç å¯çŸ¥ï¼ŒProviderçš„åˆ›å»ºæ­¥éª¤å¦‚ä¸‹ï¼š åˆ›å»ºContextImplå’ŒInstrumentation åˆ›å»ºApplicationå¯¹è±¡ å¯åŠ¨å½“å‰è¿›ç¨‹çš„ContentProviderå¹¶è°ƒç”¨å…¶onCreate è°ƒç”¨Applicationçš„onCreateæ–¹æ³• æµç¨‹å›¾ å‚è€ƒ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"AndroidManifestæè¿°æ–‡ä»¶","date":"2022-03-08T02:25:29.625Z","path":"wiki/Android/åŸºç¡€/AndroidManifest/","text":"123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139&lt;?xml version=&quot;1.0&quot; encoding=&quot;uft-8&quot; ?&gt;&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/red/android&quot; package=&quot;com.example.android&quot; android:versionCode=&quot;1&quot; android:versionName=&quot;1.0&quot;&gt; &lt;uses-permission /&gt; &lt;permission /&gt; &lt;permission-tree /&gt; æƒé™é…ç½® &lt;permission-group /&gt; &lt;instrumentation android:functionalTest=[&quot;true&quot; | &quot;false&quot;] android:handleProfiling=[&quot;true&quot; | &quot;false&quot;] android:icon=&quot;drawable resource&quot; android:label=&quot;string resource&quot; android:name=&quot;string&quot; android:targetPackage=&quot;string&quot; /&gt; &lt;uses-sdk /&gt; &lt;uses-configuration /&gt; &lt;uses-feature /&gt; ç¯å¢ƒé…ç½® &lt;supports-screens /&gt; &lt;compatible-screens /&gt; &lt;supports-gl-texture /&gt; åº”ç”¨åŸºæœ¬é…ç½® &lt;application android:allowTaskReparenting=[&quot;true&quot; | &quot;false&quot;] android:allowBackup=[&quot;true&quot; | &quot;false&quot;] android:backupAgent=&quot;string&quot; android:debuggable=[&quot;true&quot; | &quot;false&quot;] android:description=&quot;string resource&quot; android:enabled=[&quot;true&quot; | &quot;false&quot;] android:hasCode=[&quot;true&quot; | &quot;false&quot;] android:hardwareAccelerated=[&quot;true&quot; | &quot;false&quot;] android:icon=&quot;drawable resource&quot; android:killAfterRestore=[&quot;true&quot; | &quot;false&quot;] android:largeHeap=[&quot;true&quot; | &quot;false&quot;] android:label=&quot;string resource&quot; android:logo=&quot;drawable resource&quot; android:manageSpaceActivity=&quot;string&quot; android:name=&quot;string&quot; android:permission=&quot;string&quot; android:persistent=[&quot;true&quot; | &quot;false&quot;] android:process=&quot;string&quot; android:restoreAnyVersion=[&quot;true&quot; | &quot;false&quot;] android:requiredAccountType=&quot;string&quot; android:restrictedAccountType=&quot;string&quot; android:supportsRtl=[&quot;true&quot; | &quot;false&quot;] android:taskAffinity=&quot;string&quot; android:testOnly=[&quot;true&quot; | &quot;false&quot;] android:theme=&quot;resource or theme&quot; android:uiOptions=[&quot;none&quot; | &quot;splitActionBarWhenNarrow&quot;] android:vmSafeMode=[&quot;true&quot; | &quot;false&quot;] &gt; //ç•Œé¢ç»„ä»¶é…ç½® &lt;activity android:allowTaskReparenting=[&quot;true&quot; | &quot;false&quot;] android:alwaysRetainTaskState=[&quot;true&quot; | &quot;false&quot;] android:clearTaskOnLaunch=[&quot;true&quot; | &quot;false&quot;] android:configChanges=[&quot;mcc&quot;, &quot;mnc&quot;, &quot;locale&quot;, &quot;touchscreen&quot;, &quot;keyboard&quot;, &quot;keyboardHidden&quot;, &quot;navigation&quot;, &quot;screenLayout&quot;, &quot;fontScale&quot;, &quot;uiMode&quot;, &quot;orientation&quot;, &quot;screenSize&quot;, &quot;smallestScreenSize&quot;] android:enabled=[&quot;true&quot; | &quot;false&quot;] android:excludeFromRecents=[&quot;true&quot; | &quot;false&quot;] android:exported=[&quot;true&quot; | &quot;false&quot;] android:finishOnTaskLaunch=[&quot;true&quot; | &quot;false&quot;] android:hardwareAccelerated=[&quot;true&quot; | &quot;false&quot;] android:icon=&quot;drawable resource&quot; android:label=&quot;string resource&quot; android:launchMode=[&quot;multiple&quot; | &quot;singleTop&quot; | &quot;singleTask&quot; | &quot;singleInstance&quot;] android:multiprocess=[&quot;true&quot; | &quot;false&quot;] android:name=&quot;string&quot; android:noHistory=[&quot;true&quot; | &quot;false&quot;] android:parentActivityName=&quot;string&quot; android:permission=&quot;string&quot; android:process=&quot;string&quot; android:screenOrientation=[&quot;unspecified&quot; | &quot;behind&quot; | &quot;landscape&quot; | &quot;portrait&quot; | &quot;reverseLandscape&quot; | &quot;reversePortrait&quot; | &quot;sensorLandscape&quot; | &quot;sensorPortrait&quot; | &quot;userLandscape&quot; | &quot;userPortrait&quot; | &quot;sensor&quot; | &quot;fullSensor&quot; | &quot;nosensor&quot; | &quot;user&quot; | &quot;fullUser&quot; | &quot;locked&quot;] android:stateNotNeeded=[&quot;true&quot; | &quot;false&quot;] android:taskAffinity=&quot;string&quot; android:theme=&quot;resource or theme&quot; android:uiOptions=[&quot;none&quot; | &quot;splitActionBarWhenNarrow&quot;] android:windowSoftInputMode=[&quot;stateUnspecified&quot;, &quot;stateUnchanged&quot;, &quot;stateHidden&quot;, &quot;stateAlwaysHidden&quot;, &quot;stateVisible&quot;, &quot;stateAlwaysVisible&quot;, &quot;adjustUnspecified&quot;, &quot;adjustResize&quot;, &quot;adjustPan&quot;] &gt; . . . &lt;/activity&gt; &lt;activity&gt; &lt;intent-filter&gt; &lt;action /&gt; &lt;category /&gt; &lt;data /&gt; &lt;/intent-filter&gt; &lt;meta-data /&gt; &lt;/activity&gt; &lt;activity-alias&gt; &lt;intent-filter&gt; . . . &lt;/intent-filter&gt; &lt;meta-data /&gt; &lt;/activity-alias&gt; &lt;service&gt; &lt;intent-filter&gt; . . . &lt;/intent-filter&gt; &lt;meta-data/&gt; æœåŠ¡ç»„ä»¶é…ç½® &lt;/service&gt; &lt;receiver&gt; &lt;intent-filter&gt; . . . &lt;/intent-filter&gt; è§¦å‘å™¨ç»„ä»¶é…ç½® &lt;meta-data /&gt; &lt;/receiver&gt; æ•°æ®æºç»„ä»¶é…ç½® &lt;provider android:authorities=&quot;list&quot; android:enabled=[&quot;true&quot; | &quot;false&quot;] android:exported=[&quot;true&quot; | &quot;false&quot;] android:grantUriPermissions=[&quot;true&quot; | &quot;false&quot;] android:icon=&quot;drawable resource&quot; android:initOrder=&quot;integer&quot; android:label=&quot;string resource&quot; android:multiprocess=[&quot;true&quot; | &quot;false&quot;] android:name=&quot;string&quot; android:permission=&quot;string&quot; android:process=&quot;string&quot; android:readPermission=&quot;string&quot; android:syncable=[&quot;true&quot; | &quot;false&quot;] android:writePermission=&quot;string&quot; &gt; . . . &lt;/provider&gt;------------------------------------------------------------------------------------------------------------------------------------------- &lt;uses-library /&gt; ä¾èµ–åº“é…ç½®------------------------------------------------------------------------------------------------------------------------------------------- &lt;/application&gt;&lt;/manifest&gt; manifestæ ‡ç­¾ å±æ€§ æè¿° android:installLocation è®¾ç½®åº”ç”¨çš„å®‰è£…ç¯å¢ƒï¼Œå¦‚preferExternalè¡¨ç¤ºå®‰è£…åˆ°å¤–éƒ¨å­˜å‚¨è®¾å¤‡ä¸­ï¼›ä½†è¿è¡Œæ—¶äº§ç”Ÿçš„æ•°æ®è¿˜æ˜¯ä¼šåœ¨&#x2F;data&#x2F;dataç›®å½•ä¸‹ uses-permissionæ ‡ç­¾è¯·æ±‚åº”ç”¨ä½¿ç”¨åˆ°çš„æƒé™ å±æ€§ æè¿° android:name ä½¿ç”¨çš„æƒé™åå­— permissionæ ‡ç­¾é™å®šæƒé™æ¥é™åˆ¶ç¬¬ä¸‰æ–¹åº”ç”¨çš„è®¿é—® å±æ€§ æè¿° android:name android:permissionGroup æƒé™çš„åˆ†ç»„ï¼Œå¦‚android.permission-group.COST_MONEYæç¤ºç”¨æˆ·è¯¥åº”ç”¨å¯èƒ½ä¼šæ¶ˆè€—é€šä¿¡è´¹ç”¨ï¼Œå¦‚æœæ²¡æœ‰é¢„å®šä¹‰è¯¥æƒé™çš„åˆ†ç»„ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é…ç½®é¡¹å®šä¹‰ android:label æ ‡ç­¾ android:description æè¿° instrumentationæ ‡ç­¾è¿™ä¸ªå…ƒç´ å£°æ˜äº†ä¸€ä¸ªInstrumentationç±»ï¼Œè¿™ä¸ªç±»èƒ½å¤Ÿç›‘è§†åº”ç”¨ç¨‹åºè·Ÿç³»ç»Ÿçš„äº¤äº’ã€‚Instrumentationå¯¹è±¡ä¼šåœ¨åº”ç”¨çš„å…¶ä»–æ‰€æœ‰ç»„ä»¶è¢«å®ä¾‹åŒ–ä¹‹å‰å®ä¾‹åŒ–ã€‚ å±æ€§ æè¿° android:functionalTest è¿™ä¸ªå±æ€§ç”¨äºæŒ‡å®šInstrumentationç±»æ˜¯å¦åº”è¯¥ä½œä¸ºä¸€ä¸ªåŠŸèƒ½æ€§çš„æµ‹è¯•æ¥è¿è¡Œï¼Œå¦‚æœè®¾ç½®ä¸ºtrueï¼Œè¿™è¦è¿è¡Œï¼Œå¦åˆ™ä¸åº”è¯¥è¿è¡Œã€‚é»˜è®¤å€¼æ˜¯falseã€‚ android:handleProfiling è¿™ä¸ªå±æ€§ç”¨äºæŒ‡å®šInstrumentationå¯¹è±¡æ˜¯å¦ä¼šå¼€å¯å’Œå…³é—­åˆ†æåŠŸèƒ½ã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œé‚£ä¹ˆç”±Instrumentationå¯¹è±¡æ¥å†³å®šåˆ†æåŠŸèƒ½çš„å¯åŠ¨å’Œç»ˆæ­¢æ—¶æœºï¼Œå¦‚æœè®¾ç½®ä¸ºfalseï¼Œåˆ™åˆ†æåŠŸèƒ½ä¼šæŒç»­åˆ°Instrumentationå¯¹è±¡æ•´ä¸ªè¿è¡Œå‘¨æœŸã€‚å¦‚æœè®¾ç½®ä¸ºtrueï¼Œä¼šä½¿Instrumentationå¯¹è±¡é’ˆå¯¹ä¸€ç»„ç‰¹å®šçš„æ“ä½œæ¥è¿›è¡Œåˆ†æã€‚é»˜è®¤å€¼æ˜¯falseã€‚ android:targetPackage åˆ¶å®šIntrumentationå¯¹è±¡æ‰€ç›‘è§†çš„åº”ç”¨ç¨‹åºã€‚ uses-featureæ ‡ç­¾å£°æ˜åº”ç”¨æ‰€ä¾èµ–çš„å¤–è®¾æˆ–Androidçš„ç‰¹è‰²åŠŸèƒ½ã€‚æ¯”å¦‚ï¼Œä¸€æ¬¾ä¸»æ‰“æ‹ç…§åŠŸèƒ½çš„åº”ç”¨éœ€è¦å£°æ˜æ‰€å®‰è£…çš„è®¾å¤‡éœ€è¦æœ‰ç›¸æœº supports-screensæ ‡ç­¾ å±æ€§ æè¿° android:resizeable æŒ‡æ˜åº”ç”¨ç¨‹åºæ˜¯å¦æ ¹æ®ä¸åŒçš„å±å¹•å°ºå¯¸è¿›è¡Œç¼©æ”¾ã€‚å¦‚æœè®¾ä¸ºå¦ï¼Œåˆ™åœ¨è¾ƒå¤§å±å¹•ä¸Šç³»ç»Ÿå°†ä»¥å±å¹•å…¼å®¹æ¨¡å¼è¿è¡Œåº”ç”¨ç¨‹åºã€‚æœ¬å±æ€§å·²è¿‡æ—¶ã€‚ä¸ºäº†å¸®åŠ©ç¨‹åºä»Android 1.5å‡çº§ä¸º1.6æ‰å¼•å…¥æœ¬å±æ€§ï¼Œå½“æ—¶ç¬¬ä¸€æ¬¡å¼•å…¥äº†å¯¹å¤šç§å±å¹•çš„æ”¯æŒã€‚ä¸åº”å†ä½¿ç”¨æœ¬å±æ€§ã€‚ android:smallScreens æŒ‡æ˜åº”ç”¨ç¨‹åºæ˜¯å¦æ”¯æŒè¾ƒå°å±å¹•ã€‚è¾ƒå°çš„å±å¹•æ˜¯æŒ‡å°äºâ€œnormalâ€ï¼ˆä¼ ç»Ÿçš„HVGAï¼‰å¤§å°çš„å±å¹•ã€‚ä¸æ”¯æŒå°å±å¹•çš„åº”ç”¨ç¨‹åºå°†åœ¨å¤–éƒ¨æœåŠ¡ï¼ˆæ¯”å¦‚Android Marketï¼‰ä¸­ç¦æ­¢ç”¨äºå°å±å¹•è®¾å¤‡ï¼Œå› ä¸ºåªæœ‰å¾ˆå°‘ä¸€éƒ¨åˆ†å¹³å°èƒ½è®©ç¨‹åºè¿è¡Œåœ¨å°å±å¹•ä¸Šã€‚ç¼ºçœå€¼æ˜¯â€œtrueâ€ã€‚ android:normalScreens æŒ‡æ˜åº”ç”¨ç¨‹åºæ˜¯å¦æ”¯æŒâ€œnormalâ€å±å¹•å°ºå¯¸ã€‚ä¼ ç»Ÿæ„ä¹‰ä¸ŠæŒ‡çš„æ˜¯ä¸­ç­‰å¯†åº¦çš„HVGA å±å¹•ï¼Œä½†ä½å¯†åº¦çš„WQVGAå’Œé«˜å¯†åº¦çš„WVGAä¸€èˆ¬ä¹Ÿè¢«è§†ä¸ºæ˜¯æ­£å¸¸å°ºå¯¸ã€‚ç¼ºçœå±æ€§æ˜¯â€œtrueâ€ã€‚ android:largeScreens æŒ‡æ˜åº”ç”¨ç¨‹åºæ˜¯å¦æ”¯æŒå¤§å±å¹•å°ºå¯¸ã€‚å¤§å±å¹•æ˜¯æŒ‡æ˜æ˜¾æ¯”â€œnormalâ€æ‰‹æŒè®¾å¤‡å±å¹•æ›´å¤§çš„å°ºå¯¸ã€‚è™½ç„¶ä¾èµ–äºç³»ç»Ÿçš„ç¼©æ”¾ä¹Ÿèƒ½å…¨å±æ˜¾ç¤ºï¼Œä½†ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå¯èƒ½éœ€è¦å¯¹ç¨‹åºç»„ä»¶è¿›è¡Œç‰¹å®šçš„å¤„ç†ã€‚æœ¬å±æ€§çš„ç¼ºçœå€¼ä¾ç‰ˆæœ¬è€Œå„ä¸ç›¸åŒï¼Œå› æ­¤æœ€å¥½æ˜¯ä¸€ç›´éƒ½æ˜ç¡®å£°æ˜è¿™ä¸ªå±æ€§ã€‚æ³¨æ„è®¾ä¸ºâ€œfalseâ€å°†æ€»æ˜¯å¯ç”¨å±å¹•å…¼å®¹æ¨¡å¼ã€‚ android:xlargeScreens æŒ‡æ˜åº”ç”¨ç¨‹åºæ˜¯å¦æ”¯æŒè¶…å¤§å±å¹•å°ºå¯¸ã€‚è¶…å¤§å±å¹•æ˜¯æŒ‡æ˜æ˜¾æ¯”â€œlargeâ€å±å¹•æ›´å¤§çš„å°ºå¯¸ï¼Œæ¯”å¦‚å¹³æ¿è®¾å¤‡ï¼ˆæˆ–æ›´å¤§ï¼‰ï¼Œè™½ç„¶ä¾èµ–äºç³»ç»Ÿçš„ç¼©æ”¾ä¹Ÿèƒ½å…¨å±æ˜¾ç¤ºï¼Œä½†ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒå¯èƒ½éœ€è¦å¯¹ç¨‹åºç»„ä»¶è¿›è¡Œç‰¹å®šçš„å¤„ç†ã€‚æœ¬å±æ€§çš„ç¼ºçœå€¼ä¾ç‰ˆæœ¬è€Œå„ä¸ç›¸åŒï¼Œå› æ­¤æœ€å¥½æ˜¯ä¸€ç›´éƒ½æ˜ç¡®å£°æ˜è¿™ä¸ªå±æ€§ã€‚æ³¨æ„è®¾ä¸ºâ€œfalseâ€å°†æ€»æ˜¯å¯ç”¨å±å¹•å…¼å®¹æ¨¡å¼ã€‚æœ¬å±æ€§è‡ªAPI level 9å¼•å…¥ã€‚ android:anyDensity æŒ‡æ˜åº”ç”¨ç¨‹åºæ˜¯å¦åŒ…å«é€‚ç”¨äºä»»ä½•å±å¹•å¯†åº¦çš„èµ„æºã€‚å¯¹äºæ”¯æŒAndroid 1.6 (API level 4)ä»¥ä¸Šç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºè€Œè¨€ï¼Œæœ¬å±æ€§ç¼ºçœå€¼æ˜¯â€œtrueâ€ã€‚é™¤éç»å¯¹ç¡®è®¤ç¨‹åºå¿…é¡»è¦èƒ½è¿è¡Œï¼Œä¸åº”è®¾ä¸ºâ€œfalseâ€ã€‚åªæœ‰åº”ç”¨ç¨‹åºè¦ç›´æ¥æ“ä½œä½å›¾æ—¶ï¼ˆè¯¦æƒ…å‚é˜…æ”¯æŒå¤šç§å±å¹•æ–‡æ¡£ï¼‰ï¼Œæ‰å¯èƒ½éœ€è¦ç¦ç”¨æ­¤é€‰é¡¹ã€‚ android:requiresSmallestWidthDp æŒ‡å®šç¨‹åºæ‰€éœ€çš„smallestWidthæœ€å°å€¼ã€‚smallestWidthæ˜¯æŒ‡å¯è¢«ç¨‹åºç”¨æˆ·ç•Œé¢ä½¿ç”¨çš„å±å¹•å¯ç”¨ç©ºé—´çš„æœ€å°å€¼ï¼ˆå•ä½ä¸ºdpï¼‰â€”â€”æŒ‡å¯ç”¨å±å¹•ä¸¤è¾¹ä¸­æœ€çŸ­çš„é‚£æ¡è¾¹é•¿ã€‚ä¸ºäº†ä¿è¯ä¸åº”ç”¨ç¨‹åºå…¼å®¹ï¼Œè®¾å¤‡çš„smallestWidthå¿…é¡»å¤§äºç­‰äºæœ¬å±æ€§å€¼ã€‚ï¼ˆé€šå¸¸æ­¤å€¼å¯¹åº”äºå¸ƒå±€layoutæ‰€æ”¯æŒçš„â€œæœ€å°å®½åº¦â€ï¼Œè€Œä¸å±å¹•å½“å‰çš„æ–¹å‘æ— å…³ã€‚ï¼‰ä¾‹å¦‚ï¼Œå…¸å‹çš„æ‰‹æŒè®¾å¤‡çš„æœ€å°å®½åº¦æ˜¯320dpï¼Œ7è‹±å¯¸çš„å¹³æ¿è®¾å¤‡çš„æœ€å°å®½åº¦æ˜¯600dpï¼Œ10è‹±å¯¸çš„å¹³æ¿è®¾å¤‡çš„æœ€å°å®½åº¦æ˜¯720dpã€‚å› ä¸ºè¿™äº›å€¼å³ä¸ºå±å¹•å¯ç”¨ç©ºé—´çš„æœ€å°å€¼ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¹Ÿå³æ˜¯smallestWidthçš„å€¼ã€‚åœ¨è®¡ç®—å±å¹•ä¸Šçš„ç»„ä»¶æ’åˆ—å’Œç³»ç»Ÿç”¨æˆ·ç•Œé¢å¤§å°æ—¶ä¼šä¸æœ¬å±æ€§å€¼è¿›è¡Œæ¯”è¾ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœè®¾å¤‡å±å¹•ä¸Šéœ€è¦æ˜¾ç¤ºä¸€äº›æ°¸ä¹…æ€§çš„ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼Œè¿™äº›å…ƒç´ å ç”¨çš„å±å¹•ä½ç½®å¯¹äºå…¶å®ƒç”¨æˆ·ç•Œé¢å…ƒç´ æ˜¯ä¸å¯ç”¨çš„ï¼Œé€šè¿‡å¯¹è¿™äº›å…ƒç´ å°ºå¯¸è¿›è¡Œè®¡ç®—ï¼Œç³»ç»Ÿå£°æ˜çš„è®¾å¤‡smallestWidthä¼šæ¯”å®é™…å±å¹•å°ºå¯¸è¦å°äº›ã€‚å› æ­¤ï¼Œåº”è¯¥ç”¨layoutæ‰€éœ€çš„æœ€å°å®½åº¦æ¥è®¾ç½®æ­¤å€¼ï¼Œè€Œä¸å±å¹•çš„æ–¹å‘æ— å…³ã€‚å¦‚æœåº”ç”¨ç¨‹åºèƒ½åœ¨å°å±å¹•ä¸Šæ­£ç¡®ç¼©æ”¾ï¼ˆæœ€ä½æ˜¯smallå°ºå¯¸æˆ–æœ€å°å®½åº¦320dpï¼‰ï¼Œé‚£å°±ä¸éœ€è¦ç”¨åˆ°æœ¬å±æ€§ã€‚å¦åˆ™ï¼Œå°±åº”è¯¥ä¸ºæœ€å°å±å¹•å®½åº¦æ ‡è¯†ç¬¦è®¾ç½®æœ¬å±æ€§æ¥åŒ¹é…åº”ç”¨ç¨‹åºæ‰€éœ€çš„æœ€å°å°ºå¯¸ã€‚è­¦å‘Šï¼šAndroidç³»ç»Ÿå¹¶ä¸å…³å¿ƒæœ¬å±æ€§ï¼Œå› æ­¤å®ƒä¸ä¼šå½±å“ç¨‹åºè¿è¡Œæ—¶çš„è¡¨ç°ã€‚å®ƒæ˜¯ç”¨äºä¸ºè¯¸å¦‚Android Marketä¹‹ç±»çš„æœåŠ¡å¯ç”¨è¿‡æ»¤åŠŸèƒ½ã€‚ä¸è¿‡ï¼ŒAndroid Market å½“å‰è¿˜ä¸æ”¯æŒå¯¹è¿™ä¸ªå±æ€§çš„è¿‡æ»¤ï¼ˆAndroid 3.2ï¼‰ï¼Œå› æ­¤å¦‚ç¨‹åºä¸æ”¯æŒå°å±å¹•çš„è¯è¿˜åº”ç»§ç»­ä½¿ç”¨å…¶å®ƒå±å¹•å°ºå¯¸çš„å±æ€§æ¥è¿›è¡Œé™åˆ¶ã€‚æœ¬å±æ€§è‡ªAPI level 13å¼•å…¥ã€‚ android:compatibleWidthLimitDp é€šè¿‡æŒ‡å®šç¨‹åºæ”¯æŒçš„â€œæœ€å°å±å¹•å®½åº¦â€çš„æœ€å¤§å€¼ï¼Œæœ¬å±æ€§å¯å¯ç”¨å±å¹•å…¼å®¹æ¨¡å¼ä½œä¸ºç”¨æˆ·å¯é€‰é¡¹ã€‚å¦‚æœè®¾å¤‡å¯ç”¨å±å¹•çš„æœ€å°è¾¹é•¿å¤§äºåœ¨æ­¤è®¾ç½®çš„å€¼ï¼Œç”¨æˆ·å°†ä»å¯ä»¥å®‰è£…ç¨‹åºï¼Œä½†ä¼šè¿è¡Œåœ¨å±å¹•å…¼å®¹æ¨¡å¼ã€‚ç¼ºçœæƒ…å†µä¸‹ï¼Œå±å¹•å…¼å®¹æ¨¡å¼å°†è¢«å…³é—­ï¼Œlayoutå°†å¦‚å¸¸ç¼©æ”¾è‡³å…¨å±æ˜¾ç¤ºï¼Œä½†ç³»ç»ŸçŠ¶æ€æ ä¸­ä¼šå‡ºç°ä¸€ä¸ªæŒ‰é’®ï¼Œç”¨æˆ·å¯ä»¥ç”¨æ­¤æŒ‰é’®æ¥å¼€å…³å±å¹•å…¼å®¹æ¨¡å¼ã€‚å¦‚æœåº”ç”¨ç¨‹åºèƒ½å…¼å®¹æ‰€æœ‰çš„å±å¹•å°ºå¯¸ï¼Œlayoutä¹Ÿèƒ½æ­£ç¡®ç¼©æ”¾ï¼Œé‚£å°±ä¸éœ€è¦ç”¨åˆ°æœ¬å±æ€§ã€‚æ³¨æ„ï¼šç›®å‰å±å¹•å…¼å®¹æ¨¡å¼åªèƒ½åœ¨æ‰‹æŒè®¾å¤‡ä¸Šä»¿çœŸ320dpå®½åº¦çš„å±å¹•ï¼Œå› æ­¤ndroid:compatibleWidthLimitDpå¤§äº320æ—¶å±å¹•å…¼å®¹æ¨¡å¼å°†ä¸ä¼šç”Ÿæ•ˆã€‚æœ¬å±æ€§è‡ªAPI level 13å¼•å…¥ã€‚ android:largestWidthLimitDp é€šè¿‡æŒ‡å®šç¨‹åºæ”¯æŒçš„â€œæœ€å°å±å¹•å®½åº¦â€çš„æœ€å¤§å€¼ï¼Œæœ¬å±æ€§å¯å¼ºåˆ¶å¼€å¯å±å¹•å…¼å®¹æ¨¡å¼ã€‚å¦‚æœè®¾å¤‡å±å¹•çš„æœ€å°è¾¹é•¿å¤§äºæœ¬å±æ€§å€¼ï¼Œåº”ç”¨ç¨‹åºå°†è¿è¡Œåœ¨å±å¹•å…¼å®¹æ¨¡å¼ï¼Œä¸”ç”¨æˆ·æ— æ³•å°†å…¶å…³é—­ã€‚å¦‚æœåº”ç”¨ç¨‹åºèƒ½å…¼å®¹æ‰€æœ‰çš„å±å¹•å°ºå¯¸ï¼Œlayoutä¹Ÿèƒ½æ­£ç¡®ç¼©æ”¾ï¼Œé‚£å°±ä¸éœ€è¦ç”¨åˆ°æœ¬å±æ€§ã€‚ä¸ç„¶ä¹Ÿåº”ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨android:compatibleWidthLimitDpå±æ€§ã€‚ä»…å½“åº”ç”¨ç¨‹åºç¼©æ”¾åˆ°å¤§å±å¹•æ—¶ä¼šå´©æºƒï¼Œå±å¹•å…¼å®¹æ¨¡å¼æ˜¯ç”¨æˆ·ä½¿ç”¨çš„å”¯ä¸€æ–¹å¼ï¼Œæ‰ä¼šç”¨åˆ°android:largestWidthLimitDpå±æ€§ã€‚æ³¨æ„ï¼šç›®å‰å±å¹•å…¼å®¹æ¨¡å¼åªèƒ½åœ¨æ‰‹æŒè®¾å¤‡ä¸Šä»¿çœŸ320dpå®½åº¦çš„å±å¹•ï¼Œå› æ­¤android:largestWidthLimitDpå¤§äº320æ—¶å±å¹•å…¼å®¹æ¨¡å¼å°†ä¸ä¼šç”Ÿæ•ˆã€‚æœ¬å±æ€§è‡ªAPI level 13å¼•å…¥ã€‚ uses-sdkæ ‡ç­¾ å±æ€§ æè¿° targetSdkVersion minSdkVersion application å±æ€§ æè¿° android:uiOptions â€œnoneâ€ é»˜è®¤å€¼â€splitActionBarWhenNarrowâ€ï¼Œåˆ†è£‚ActionBarç”¨æ¥åˆ†å¼€action itemï¼Œåœ¨å±å¹•åº•éƒ¨å‡ºç°ä¸€ä¸ªactionbaræ¥æ˜¾ç¤ºé¡¶éƒ¨æ˜¾ç¤ºä¸å®Œçš„items android:backupAgent äº‘ç«¯å­˜å‚¨ç»„ä»¶å£°æ˜ï¼Œè¯¥ç»„ä»¶ä¸€ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªã€‚å…¶å€¼ä¸ºBackupAgentçš„å­ç±» android:allowbackup æ˜¯å¦å…è®¸å¤‡ä»½ android:allowClearUserData ç”¨æˆ·æ˜¯å¦èƒ½é€‰æ‹©è‡ªè¡Œæ¸…é™¤æ•°æ®ï¼Œé»˜è®¤ä¸ºtrueï¼Œç¨‹åºç®¡ç†å™¨åŒ…å«ä¸€ä¸ªé€‰æ‹©å…è®¸ç”¨æˆ·æ¸…é™¤æ•°æ®ã€‚å½“ä¸ºtrueæ—¶ï¼Œç”¨æˆ·å¯è‡ªå·±æ¸…ç†ç”¨æˆ·æ•°æ®ï¼Œåä¹‹äº¦ç„¶ android:testOnly ç”¨äºåˆ¤æ–­è¯¥åº”ç”¨æ˜¯å¦ç”¨äºæµ‹è¯• android:largeHeap å¯ä»¥ç»™ç¨‹åºåˆ†é…å¤§å†…å­˜ã€‚ getMemoryClass() æˆ–getLargeMemoryClass()æŸ¥è¯¢å¯ç”¨å†…å­˜ activity å±æ€§ æè¿° android:launchMode è¿è¡Œæ¨¡å¼ android:configChanges å½“é…ç½®å˜åŒ–æ—¶ï¼Œactivityå°†ä¼šé‡å¯ï¼Œä½†å£°æ˜äº†è¿™ä¸ªå±æ€§ä¼šé˜»æ­¢activityé‡æ–°å¯åŠ¨ï¼Œè€Œè°ƒç”¨onConfigurationChanged() android:screenOrientation activityåœ¨è®¾åˆ«ä¸­çš„æ˜¾ç¤ºæ–¹å‘ android:parentActivityName æŒ‡å®šçˆ¶çº§çš„activityã€‚ç³»ç»Ÿæ ¹æ®è¿™ä¸ªå±æ€§æ¥å†³å®šå½“ä½¿ç”¨actionbarçš„å‘ä¸ŠæŒ‰é’®æ—¶é‚£ä¸ªactivityå“åº” android:taskAffinity è¡¨ç¤ºå½“å‰activityè¿›å…¥çš„task adnroid:finishOnTaskLanuch ç¦»å¼€è¿™ä¸ªTaskæ ˆ, åˆ™ç³»ç»Ÿä¼šé©¬ä¸Šæ¸…é™¤è¿™ä¸ªActivity,ä¸ç®¡è¿™ä¸ªActivityåœ¨å †æ ˆçš„ä»»ä½•ä½ç½®. android:allowTaskReparenting å…è®¸å½“å‰Activityå¯ä»¥åœ¨ä»»åŠ¡æ ˆä¸­ç§»åŠ¨ android:alwaysRetaainTaskState android:excludeFromRecents android:stateNotNeeded android:exported æ˜¯å¦å¯ä»¥å¯¼å‡ºï¼Œæ˜¯å¦å¯ä»¥è¢«å¤–éƒ¨è®¿é—® android:clearTaskOnLaunch å½“å€¼ä¸ºtrue, åªè¦ä½ ä¸€ç¦»å¼€è¿™ä¸ªTaskæ ˆ, åˆ™ç³»ç»Ÿä¼šé©¬ä¸Šæ¸…ç†é™¤äº†Root Activityçš„å…¨éƒ¨Activity. android:windowSoftInputMode android:permission android:alwaysRetainTaskState intent-filtermeta-dataactivity-aliastargetActivityå±æ€§æ‰€æŒ‡activityçš„åˆ«åã€‚åˆ«åä¼šä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å®ä½“æ¥ä»£è¡¨ç›®æ ‡Activityã€‚å®ƒèƒ½å¤Ÿæœ‰è‡ªå·±çš„Intentè¿‡æ»¤å™¨ã€‚è¯¥æ ‡ç­¾çš„å…¶ä»–å±æ€§æ˜¯å±æ€§çš„ä¸€ä¸ªå­é›†ï¼Œå¯¹äºå­é›†ä¸­çš„å±æ€§ï¼Œä¸ä¼šæŠŠç›®æ ‡Activityä¸­æ‰€è®¾ç½®çš„ä»»ä½•å€¼è½¬äº¤ç»™åˆ«åActivityï¼Œä½†å¯¹äºå­é›†ä¸­æ‰€æ²¡æœ‰çš„å±æ€§ï¼Œåˆ™ç›®æ ‡Activityæ‰€è®¾ç½®çš„å€¼æœ‰ä¼šåº”ç”¨åˆ°åˆ«åActivityã€‚ å±æ€§ æè¿° android:enabled android:exported servicereceiverproviderå£°æ˜å†…å®¹å­˜å‚¨ç»„ä»¶ å±æ€§ æè¿° android:authorities android:enabled æ˜¯å¦å¯ä»¥è¢«å®ä¾‹åŒ–ã€‚åªæœ‰å½“applicationå’Œproviderä¸­çš„enabledéƒ½ä¸ºtrueæ—¶ï¼Œprovideræ‰å¯ä»¥ android:name uses-libraryå¼•ç”¨ç±»åº“ å±æ€§ æè¿° android:name æŒ‡å®šç±»åº“çš„åç§° android:required æ˜¯å¦ä¸€å®šè¦æ‰¾ä¸ªåº“ï¼Œtrueçš„æ—¶å€™ï¼Œå¦‚æœæœºå™¨ä¸Šæ²¡æœ‰è¿™ä¸ªåº“åˆ™ä¸èƒ½å®‰è£…","tags":[],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Androidçš„æ¶ˆæ¯æœºåˆ¶","date":"2022-03-08T02:25:29.625Z","path":"wiki/Android/åŸºç¡€/Androidçš„æ¶ˆæ¯æœºåˆ¶/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"BroadcastReceiverå·¥ä½œè¿‡ç¨‹","date":"2022-03-08T02:25:29.625Z","path":"wiki/Android/åŸºç¡€/BroadcastReceiverå·¥ä½œè¿‡ç¨‹/","text":"æ¦‚è¿°BroadcastReceiveræ˜¯ä¸€ç§æ¶ˆæ¯å‹ç»„ä»¶ã€‚ç”±äºBroadcastReceiverå¯ä»¥åœ¨ä¸åŒçš„ç»„ä»¶ç”šè‡³ä¸åŒçš„åº”ç”¨ä¹‹é—´ä¼ é€’æ¶ˆæ¯ï¼Œæ‰€ä»¥å…¶å¯ä»¥è„±ç¦»Activityå®ç°ï¼Œé™¤äº†è¦åœ¨AndroidManifest.xmlä¸­æ³¨å†Œå¹¿æ’­ç±»åå¤–ï¼Œè¿˜éœ€è¦æ·»åŠ intentfilterï¼Œè¿™æ ·å°±å¯ä»¥è®©receiveré€‰æ‹©æ€§çš„æ¥æ”¶å¹¿æ’­ã€‚å½“æ³¨å†Œå®Œæˆä¹‹åï¼Œå³ä½¿æ²¡æœ‰Activityå¯åŠ¨ï¼Œä¹Ÿå¯ä»¥æ¥æ”¶å¹¿æ’­ã€‚åœ¨å®ç° BroadcastReceiveræ—¶ï¼Œéœ€è¦ç»§æ‰¿ BroadcastReceiveræŠ½è±¡ç±»ï¼Œä½†æ˜¯ä¸éœ€è¦é‡å†™onCreat()æ–¹æ³•ï¼Œåªéœ€é‡å†™onReceive()æ–¹æ³•ï¼Œå› æ­¤ï¼ŒServiceæ²¡æœ‰å¯åŠ¨å’Œåœæ­¢çš„æ¦‚å¿µï¼Œæ›´åƒæ˜¯ä¸€ä¸ªç³»ç»Ÿçº§çš„ç›‘å¬å™¨ã€‚ æµç¨‹åˆ†æå¹¿æ’­çš„æ³¨å†Œåˆ†ä¸ºé™æ€æ³¨å†Œå’ŒåŠ¨æ€æ³¨å†Œï¼Œå…¶ä¸­é™æ€æ³¨å†Œçš„å¹¿æ’­åœ¨åº”ç”¨å®‰è£…æ—¶ç”±ç³»ç»Ÿè‡ªåŠ¨å®Œæˆæ³¨å†Œï¼Œå…·ä½“æ¥è¯´æ˜¯ç”±PMS(PackageManagerService)æ¥å®Œæˆæ•´ä¸ªæ³¨å†Œè¿‡ç¨‹çš„ã€‚ æ³¨å†Œè¿‡ç¨‹åŠ¨æ€æ³¨å†Œçš„è¿‡ç¨‹æ˜¯ä»ContextWrapperçš„registerReceiveræ–¹æ³•å¼€å§‹çš„ã€‚ æˆ‘ä»¬ä»è¯¥æ–¹æ³•å¼€å§‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546//ContextWrapper.javapublic Intent registerReceiver( BroadcastReceiver receiver, IntentFilter filter) &#123; return mBase.registerReceiver(receiver, filter);&#125;//ContextImpl.javaprivate Intent registerReceiverInternal(BroadcastReceiver receiver, int userId, IntentFilter filter, String broadcastPermission, Handler scheduler, Context context, int flags) &#123; IIntentReceiver rd = null; if (receiver != null) &#123; if (mPackageInfo != null &amp;&amp; context != null) &#123; if (scheduler == null) &#123; scheduler = mMainThread.getHandler(); &#125; //è¿”å›ReceiverDispatcher rd = mPackageInfo.getReceiverDispatcher( receiver, context, scheduler, mMainThread.getInstrumentation(), true); &#125; else &#123; if (scheduler == null) &#123; scheduler = mMainThread.getHandler(); &#125; rd = new LoadedApk.ReceiverDispatcher( receiver, context, scheduler, null, true).getIIntentReceiver(); &#125; &#125; try &#123; //ActivityManagerServiceæ³¨å†Œ final Intent intent = ActivityManager.getService().registerReceiver( mMainThread.getApplicationThread(), mBasePackageName, rd, filter, broadcastPermission, userId, flags); if (intent != null) &#123; intent.setExtrasClassLoader(getClassLoader()); intent.prepareToEnterProcess(); &#125; return intent; &#125; catch (RemoteException e) &#123; throw e.rethrowFromSystemServer(); &#125;&#125; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œç³»ç»Ÿé¦–å…ˆä»mPackageInfoè·å–IIntentReceiverå¯¹è±¡ï¼Œç„¶åå†é‡‡ç”¨è·¨è¿›ç¨‹çš„æ–¹å¼å‘AMSå‘é€å¹¿æ’­æ³¨å†Œçš„è¯·æ±‚ã€‚ä¹‹æ‰€ä»¥é‡‡ç”¨IIntentReceiverè€Œä¸æ˜¯ç›´æ¥é‡‡ç”¨BroadcastReceiverï¼Œè¿™æ˜¯å› ä¸ºä¸Šè¿°æ³¨å†Œè¿‡ç¨‹æ˜¯ä¸€ä¸ªè¿›ç¨‹é—´é€šä¿¡çš„è¿‡ç¨‹ï¼Œè€ŒBroadcastReceiverä½œä¸ºAndroidçš„ä¸€ä¸ªç»„ä»¶æ˜¯ä¸èƒ½ç›´æ¥è·¨è¿›ç¨‹ä¼ é€’çš„ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡IIntentReceiveræ¥ä¸­è½¬ä¸€ä¸‹ã€‚æ¯«æ— ç–‘é—®ï¼ŒIIntentReceiverå¿…é¡»æ˜¯ä¸€ä¸ªBinderæ¥å£ï¼Œå®ƒçš„å…·ä½“å®ç°æ˜¯LoadedApk.ReceiverDispatcher.InnerReceiverï¼ŒReceiverDispatcherçš„å†…éƒ¨åŒæ—¶ä¿å­˜äº†BroadcastReceiverå’ŒInnerReceiverï¼Œè¿™æ ·å½“æ¥æ”¶åˆ°å¹¿æ’­æ—¶ï¼ŒReceiverDispatcherå¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒç”¨BroadcastReceiverçš„onReceiveæ–¹æ³•ã€‚ 12345678ActivityManagerService.javapublic Intent registerReceiver(IApplicationThread caller, String callerPackage, IIntentReceiver receiver, IntentFilter filter, String permission, int userId, int flags) &#123; &#125; å‘é€å’Œæ¥æ”¶è¿‡ç¨‹å¹¿æ’­ç±»å‹ï¼š æ™®é€šå¹¿æ’­(Normal Broadcast) ç³»ç»Ÿå¹¿æ’­(System Broadcast) æœ‰åºå¹¿æ’­(Ordered Broadcast) ç²˜æ€§å¹¿æ’­(Sticky Broadcast) Appåº”ç”¨å†…å¹¿æ’­(Local Broadcast) å‘é€å¹¿æ’­ä»sendBroadcastå¼€å§‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253//ContextImpl.javapublic void sendBroadcast(Intent intent) &#123; warnIfCallingFromSystemProcess(); String resolvedType = intent.resolveTypeIfNeeded(getContentResolver()); try &#123; intent.prepareToLeaveProcess(this); ActivityManager.getService().broadcastIntent( mMainThread.getApplicationThread(), intent, resolvedType, null, Activity.RESULT_OK, null, null, null, AppOpsManager.OP_NONE, null, false, false, getUserId()); &#125; catch (RemoteException e) &#123; throw e.rethrowFromSystemServer(); &#125;&#125;//ActivityManagerServicepublic final int broadcastIntent(IApplicationThread caller, Intent intent, String resolvedType, IIntentReceiver resultTo, int resultCode, String resultData, Bundle resultExtras, String[] requiredPermissions, int appOp, Bundle bOptions, boolean serialized, boolean sticky, int userId) &#123; enforceNotIsolatedCaller(&quot;broadcastIntent&quot;); synchronized(this) &#123; intent = verifyBroadcastLocked(intent); final ProcessRecord callerApp = getRecordForAppLocked(caller); final int callingPid = Binder.getCallingPid(); final int callingUid = Binder.getCallingUid(); final long origId = Binder.clearCallingIdentity(); try &#123; return broadcastIntentLocked(callerApp, callerApp != null ? callerApp.info.packageName : null, intent, resolvedType, resultTo, resultCode, resultData, resultExtras, requiredPermissions, appOp, bOptions, serialized, sticky, callingPid, callingUid, callingUid, callingPid, userId); &#125; finally &#123; Binder.restoreCallingIdentity(origId); &#125; &#125;&#125;final int broadcastIntentLocked(ProcessRecord callerApp, String callerPackage, Intent intent, String resolvedType, IIntentReceiver resultTo, int resultCode, String resultData, Bundle resultExtras, String[] requiredPermissions, int appOp, Bundle bOptions, boolean ordered, boolean sticky, int callingPid, int callingUid, int realCallingUid, int realCallingPid, int userId, boolean allowBackgroundActivityStarts) &#123; intent = new Intent(intent); final boolean callerInstantApp = isInstantApp(callerApp, callerPackage, callingUid); // Instant Apps cannot use FLAG_RECEIVER_VISIBLE_TO_INSTANT_APPS if (callerInstantApp) &#123; intent.setFlags(intent.getFlags() &amp; ~Intent.FLAG_RECEIVER_VISIBLE_TO_INSTANT_APPS); &#125; // By default broadcasts do not go to stopped apps. intent.addFlags(Intent.FLAG_EXCLUDE_STOPPED_PACKAGES); // If we have not finished booting, don&#x27;t allow this to launch new processes. if (!mProcessesReady &amp;&amp; (intent.getFlags()&amp;Intent.FLAG_RECEIVER_BOOT_UPGRADE) == 0) &#123; intent.addFlags(Intent.FLAG_RECEIVER_REGISTERED_ONLY); &#125;... final BroadcastRecord oldRecord = replacePending ? queue.replaceOrderedBroadcastLocked(r) : null; if (oldRecord != null) &#123; // Replaced, fire the result-to receiver. if (oldRecord.resultTo != null) &#123; final BroadcastQueue oldQueue = broadcastQueueForIntent(oldRecord.intent); try &#123; oldQueue.performReceiveLocked(oldRecord.callerApp, oldRecord.resultTo, oldRecord.intent, Activity.RESULT_CANCELED, null, null, false, false, oldRecord.userId); &#125; catch (RemoteException e) &#123; Slog.w(TAG, &quot;Failure [&quot; + queue.mQueueName + &quot;] sending broadcast result of &quot; + intent, e); &#125; &#125; &#125; else &#123; queue.enqueueOrderedBroadcastLocked(r); queue.scheduleBroadcastsLocked(); &#125; ... &#125;//BroadcastQueue.javapublic void scheduleBroadcastsLocked() &#123; if (DEBUG_BROADCAST) Slog.v(TAG_BROADCAST, &quot;Schedule broadcasts [&quot; + mQueueName + &quot;]: current=&quot; + mBroadcastsScheduled); if (mBroadcastsScheduled) &#123; return; &#125; mHandler.sendMessage(mHandler.obtainMessage(BROADCAST_INTENT_MSG, this)); mBroadcastsScheduled = true;&#125;//å¤„ç†BROADCAST_INTENT_MSGfinal void processNextBroadcast(boolean fromMsg) &#123; synchronized (mService) &#123; processNextBroadcastLocked(fromMsg, false); &#125;&#125;final void processNextBroadcastLocked(boolean fromMsg, boolean skipOomAdj) &#123;...performReceiveLocked(r.callerApp, r.resultTo, new Intent(r.intent), r.resultCode, r.resultData, r.resultExtras, false, false, r.userId);...&#125;void performReceiveLocked(ProcessRecord app, IIntentReceiver receiver, Intent intent, int resultCode, String data, Bundle extras, boolean ordered, boolean sticky, int sendingUser) throws RemoteException &#123; // Send the intent to the receiver asynchronously using one-way binder calls. if (app != null) &#123; if (app.thread != null) &#123; // If we have an app thread, do the call through that so it is // correctly ordered with other one-way calls. try &#123; //ActivityThread.ApplicationThread app.thread.scheduleRegisteredReceiver(receiver, intent, resultCode, data, extras, ordered, sticky, sendingUser, app.getReportedProcState()); // TODO: Uncomment this when (b/28322359) is fixed and we aren&#x27;t getting // DeadObjectException when the process isn&#x27;t actually dead. //&#125; catch (DeadObjectException ex) &#123; // Failed to call into the process. It&#x27;s dying so just let it die and move on. // throw ex; &#125; catch (RemoteException ex) &#123; // Failed to call into the process. It&#x27;s either dying or wedged. Kill it gently. synchronized (mService) &#123; Slog.w(TAG, &quot;Can&#x27;t deliver broadcast to &quot; + app.processName + &quot; (pid &quot; + app.pid + &quot;). Crashing it.&quot;); app.scheduleCrash(&quot;can&#x27;t deliver broadcast&quot;); &#125; throw ex; &#125; &#125; else &#123; // Application has died. Receiver doesn&#x27;t exist. throw new RemoteException(&quot;app.thread must not be null&quot;); &#125; &#125; else &#123; receiver.performReceive(intent, resultCode, data, extras, ordered, sticky, sendingUser); &#125;&#125;//ActivityThread.ApplicationThreadpublic void scheduleRegisteredReceiver(IIntentReceiver receiver, Intent intent, int resultCode, String dataStr, Bundle extras, boolean ordered, boolean sticky, int sendingUser, int processState) throws RemoteException &#123; updateProcessState(processState, false); //å®é™…è°ƒç”¨LoadedApk.ReceiverDispatcher.InnerReceiver receiver.performReceive(intent, resultCode, dataStr, extras, ordered, sticky, sendingUser);&#125;//LoadedApk.ReceiverDispatcher.InnerReceiverpublic void performReceive(Intent intent, int resultCode, String data, Bundle extras, boolean ordered, boolean sticky, int sendingUser) &#123; final LoadedApk.ReceiverDispatcher rd; if (intent == null) &#123; Log.wtf(TAG, &quot;Null intent received&quot;); rd = null; &#125; else &#123; rd = mDispatcher.get(); &#125; if (ActivityThread.DEBUG_BROADCAST) &#123; int seq = intent.getIntExtra(&quot;seq&quot;, -1); Slog.i(ActivityThread.TAG, &quot;Receiving broadcast &quot; + intent.getAction() + &quot; seq=&quot; + seq + &quot; to &quot; + (rd != null ? rd.mReceiver : null)); &#125; if (rd != null) &#123; rd.performReceive(intent, resultCode, data, extras, ordered, sticky, sendingUser); &#125; else &#123; // The activity manager dispatched a broadcast to a registered // receiver in this process, but before it could be delivered the // receiver was unregistered. Acknowledge the broadcast on its // behalf so that the system&#x27;s broadcast sequence can continue. if (ActivityThread.DEBUG_BROADCAST) Slog.i(ActivityThread.TAG, &quot;Finishing broadcast to unregistered receiver&quot;); IActivityManager mgr = ActivityManager.getService(); try &#123; if (extras != null) &#123; extras.setAllowFds(false); &#125; mgr.finishReceiver(this, resultCode, data, extras, false, intent.getFlags()); &#125; catch (RemoteException e) &#123; throw e.rethrowFromSystemServer(); &#125; &#125;&#125;public void performReceive(Intent intent, int resultCode, String data, Bundle extras, boolean ordered, boolean sticky, int sendingUser) &#123; final Args args = new Args(intent, resultCode, data, extras, ordered, sticky, sendingUser); if (intent == null) &#123; Log.wtf(TAG, &quot;Null intent received&quot;); &#125; else &#123; if (ActivityThread.DEBUG_BROADCAST) &#123; int seq = intent.getIntExtra(&quot;seq&quot;, -1); Slog.i(ActivityThread.TAG, &quot;Enqueueing broadcast &quot; + intent.getAction() + &quot; seq=&quot; + seq + &quot; to &quot; + mReceiver); &#125; &#125; //ä¼šåˆ›å»ºä¸€ä¸ªArgså¯¹è±¡å¹¶é€šè¿‡mActivityThreadçš„postæ–¹æ³•æ¥æ‰§è¡ŒArgsä¸­çš„é€»è¾‘ï¼Œè€ŒArgså®ç°äº†Runnableæ¥å£ã€‚mActivityThreadæ˜¯ä¸€ä¸ªHandlerï¼Œ //å®ƒå…¶å®å°±æ˜¯ActivityThreadä¸­çš„mHï¼ŒmHçš„ç±»å‹æ˜¯ ActivityThreadçš„å†…éƒ¨ç±»H if (intent == null || !mActivityThread.post(args.getRunnable())) &#123; if (mRegistered &amp;&amp; ordered) &#123; IActivityManager mgr = ActivityManager.getService(); if (ActivityThread.DEBUG_BROADCAST) Slog.i(ActivityThread.TAG, &quot;Finishing sync broadcast to &quot; + mReceiver); args.sendFinished(mgr); &#125; &#125;&#125;//LoaderApk.ReceiverDispatcher.Argsfinal class Args extends BroadcastReceiver.PendingResult &#123; public final Runnable getRunnable() &#123; return () -&gt; &#123; ... ClassLoader cl = mReceiver.getClass().getClassLoader(); intent.setExtrasClassLoader(cl); intent.prepareToEnterProcess(); setExtrasClassLoader(cl); receiver.setPendingResult(this); receiver.onReceive(mContext, intent);//æ¥æ”¶åˆ°æ¶ˆæ¯äº† ... &#125; &#125;&#125; åœ¨broadcastIntentLockedçš„å†…éƒ¨ï¼Œä¼šæ ¹æ®intent-filteræŸ¥æ‰¾å‡ºåŒ¹é…çš„å¹¿æ’­æ¥æ”¶è€…å¹¶ç»è¿‡ä¸€ç³»åˆ—çš„æ¡ä»¶è¿‡æ»¤ï¼Œæœ€ç»ˆä¼šå°†æ»¡è¶³æ¡ä»¶çš„å¹¿æ’­æ¥æ”¶è€…æ·»åŠ åˆ°BroadcastQueueä¸­ï¼Œæ¥ç€BroadcastQueueå°±ä¼šå°†å¹¿æ’­å‘é€ç»™ç›¸åº”çš„å¹¿æ’­æ¥æ”¶è€…ã€‚ æµç¨‹å›¾ å‚è€ƒ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Android sdkç›®å½•ç»“æ„","date":"2022-03-08T02:25:29.624Z","path":"wiki/Android/åŸºç¡€/Android sdkç›®å½•ç»“æ„/","text":"sdk add-onsï¼šç¬¬ä¸‰æ–¹å…¬å¸ä¸ºAndroidå¹³å°å¼€å‘çš„é™„åŠ åŠŸèƒ½ç³»ç»Ÿ build-toolsï¼šæ„å»ºå·¥å…· 28.0.3ï¼š aapt.exeï¼šæ‰“åŒ…resèµ„æºæ–‡ä»¶ï¼Œç”ŸæˆR.javaã€resources.arscå’Œres aapt2.exe aidl.exe apksigner.bat bcc_compat.exe d8.bat dexdump.exe dx.bat llvm-rs-cc.exe mainDexClasses.bat split-select.exe zipalign.exe cmake docsï¼šAPIæ–‡æ¡£ emulator extrasï¼šå­˜æ”¾Android support v4ã€v7ã€v13ã€v17åŒ… fonts licenses lldbï¼šC&#x2F;C++è°ƒè¯•å™¨ï¼Œå®ƒä¸LLVMç¼–è¯‘å™¨ä¸€èµ·ä½¿ç”¨ï¼Œæä¾›äº†ä¸°å¯Œçš„æµç¨‹æ§åˆ¶å’Œæ•°æ®æ£€æµ‹ ndk-bundle ndk-build.cmd ndk-depends.cmd ndk-gdb.cmd ndk-stack.cmd ndk-which.cmd patcher platformsï¼šæ ¹æ®API levelå­˜æ”¾ä¸åŒç‰ˆæœ¬çš„Androidç³»ç»Ÿ android-28ï¼š28è¡¨ç¤ºç‰ˆæœ¬ dataï¼šç³»ç»Ÿèµ„æº optional skinï¼šAndroidæ¨¡æ‹Ÿå™¨çš„çš®è‚¤ android.jar uiautomator.jar platform-toolsï¼šAndroidå¹³å°é€šç”¨å·¥å…· adb.exe dmtracedump.exe etc1tool.exeï¼šPNGå›¾åƒå‹ç¼©ä¸ºetc1æ ‡å‡† fastboot.exeï¼šåˆ·æœºå·¥å…· hprof-conv.exeï¼šhprofæ–‡ä»¶è½¬æ¢å‘½ä»¤ï¼Œå°†Android Studioå·¥å…·ç”Ÿæˆçš„hprofæ–‡ä»¶è½¬æ¢æˆä¸€ä¸ªæ ‡å‡†æ ¼å¼ make_f2fs.exe mke2fs.exeï¼šå»ºç«‹ext2æ–‡ä»¶ç³»ç»Ÿ sqlite3.exeï¼šæ•°æ®åº“å·¥å…· sources system-imagesï¼šæ¨¡æ‹Ÿå™¨æ˜ åƒæ–‡ä»¶ toolsï¼šAndroidå¼€å‘å’Œè°ƒè¯•å·¥å…· bin archquery.bat avdmanager.bat jobb.batï¼šå¤„ç†APKæ‰©å±•æ–‡ä»¶çš„å·¥å…· lint.batï¼šä»£ç æ£€æµ‹ monkeyrunner.batï¼šæµ‹è¯•å·¥å…· sdkmanager.bat:SDKç®¡ç†å™¨ uiautomatorviewer.batï¼šæµ‹è¯•å·¥å…· android.bat emulator.exe emulator-check.exe mksdcard.exeï¼šä½¿ç”¨æ¨¡æ‹Ÿå™¨æ—¶ï¼Œç”¨æ¥åˆ›å»ºsdå¡ monitor.bat compileSdkVersionï¼šå‘Šè¯‰Gradleç”¨å“ªä¸ªAndroid SDKç‰ˆæœ¬ç¼–è¯‘ä½ çš„åº”ç”¨ï¼Œä½¿ç”¨ä»»ä½•æ–°æ·»åŠ çš„APIéƒ½éœ€è¦å¯¹åº”ç­‰çº§çš„Android SDKã€‚ä¿®æ”¹compileSdkVersionä¸ä¼šæ”¹å˜è¿è¡Œæ—¶çš„è¡Œä¸ºã€‚å¦‚æœä½¿ç”¨Support Libraryï¼Œé‚£ä¹ˆä½¿ç”¨æœ€æ–°å‘å¸ƒçš„ Support Library å°±éœ€è¦ä½¿ç”¨æœ€æ–°çš„ SDK ç¼–è¯‘ã€‚ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨ 23.1.1 ç‰ˆæœ¬çš„ Support Library ï¼ŒcompileSdkVersion å°±å¿…éœ€è‡³å°‘æ˜¯ 23 ï¼ˆå¤§ç‰ˆæœ¬å·è¦ä¸€è‡´ï¼ï¼‰ã€‚ minSdkVersionï¼šè®¾ç½®åº”ç”¨å¯ä»¥è¿è¡Œçš„æœ€ä½ç‰ˆæœ¬è¦æ±‚ targetSdkVersionï¼šç³»ç»Ÿä¼šæ ¹æ®è¿™ä¸ªå€¼æ¥åº”ç”¨æœ€æ–°çš„è¡Œä¸ºå˜åŒ–ã€‚æ¯”å¦‚API 23ä¼šæŠŠä½ çš„åº”ç”¨è½¬æ¢åˆ°è¿è¡Œæ—¶æƒé™æ¨¡å‹ã€‚å½“è®¾ç½®targetSdkVersionå°äº23æ—¶ï¼Œåœ¨6.0çš„æœºå™¨ä¸Šä¸ä¼šåŠ¨æ€ç”³è¯·æƒé™ã€‚ buildToolsVersionï¼šæ„å»ºå·¥å…·çš„ç‰ˆæœ¬ï¼Œå…¶ä¸­åŒ…æ‹¬aaptã€dxç­‰ï¼Œè¿™ä¸ªå·¥å…·çš„ç›®å½•åœ¨Android sdk&#x2F;build-tools&#x2F; å‚è€ƒ https://medium.com/androiddevelopers/picking-your-compilesdkversion-minsdkversion-targetsdkversion-a098a0341ebd#.tz5zzucma","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Androidä¸­supportçš„ä½¿ç”¨","date":"2022-03-08T02:25:29.624Z","path":"wiki/Android/åŸºç¡€/Android supportåŒ…/","text":"ä½¿ç”¨support-vXåŒ…çš„åŸå›  å‘åå…¼å®¹ æä¾›ä¸é€‚åˆæ‰“åŒ…è¿›frameworkçš„åŠŸèƒ½ æ”¯æŒä¸åŒå½¢æ€çš„è®¾å¤‡ support-v4implemention: &quot;com.android.support:support-v4:27.1.1&quot; v4åç§°æ˜¯æœ€å¼€å§‹æ”¯æŒapi level4çš„åº“ï¼Œå®˜æ–¹åœ¨Support Library 24.2.0ç‰ˆæœ¬çš„æ—¶å€™ç§»é™¤äº†å¯¹Android 2.2(API Level 8)åŠä»¥ä¸‹ç‰ˆæœ¬çš„æ”¯æŒï¼Œæ‰€ä»¥ä»Android Support Library 24.2.0å¼€å§‹ï¼ŒV4åŒ…æ”¯æŒçš„æœ€ä½ç‰ˆæœ¬æ˜¯Android 2.3å³API Level 9)ï¼Œå¹¶ä¸”æŠŠv4åº“æ‹†åˆ†æˆ5ä¸ªéƒ¨åˆ†ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­æŒ‰éœ€è¦å¼•ç”¨ï¼Œä½†æ˜¯å¿…è¦æ€§ä¸æ˜¯å¾ˆå¤§ï¼Œä¸€æ˜¯å› ä¸ºè¿™5ä¸ªéƒ¨åˆ†æœ‰ä¾èµ–å…³ç³»ï¼ŒäºŒæ˜¯compatåº“å äº†v4åº“çš„ä¸€åŠå¤§å°ï¼Œv4åº“çš„ä¾èµ–å…³ç³»å›¾ï¼š Fragment:ä¸€ä¸ªä¸“ä¸ºè§£å†³Androidç¢ç‰‡åŒ–çš„ç±»ï¼Œé€šè¿‡å®ƒå¯ä»¥è®©åŒä¸€ä¸ªç¨‹åºé€‚é…ä¸åŒçš„å±å¹•ã€‚NotificationCompat:æ”¯æŒæ›´ä¸°å¯Œçš„é€šçŸ¥å½¢å¼ï¼›LocalBroadcastManager:é€‚åˆäºåº”ç”¨å†…çš„æ¶ˆæ¯ä¼ é€’ã€‚ViewPager:ä¸€ä¸ªå¯ä»¥ç®¡ç†å­viewçš„viewgroupï¼Œç”¨æˆ·å¯ä»¥åœ¨å„ä¸ªviewä¹‹é—´è‡ªç”±åˆ‡æ¢ï¼Œè¿™ä¸ªåœ¨å¾ˆå¤šåº”ç”¨ä¸­éƒ½æœ‰ä½¿ç”¨åˆ°ï¼› support-v7V7å’ŒV4ä¸€æ ·ï¼ŒåŒæ ·åŒ…å«å¤šä¸ªä¾èµ–åŒ…ï¼Œä½†å’ŒV4ä¸åŒçš„æ˜¯ï¼ŒV7ä¸‹çš„å¤šä¸ªå­åŒ…å¹¶ä¸æ˜¯åé¢æ‹†åˆ†å¼€æ¥çš„ï¼Œè€Œæ˜¯æœ€åˆå‘å¸ƒæ—¶å°±ä»¥å„ä¸ªç‹¬ç«‹åº“çš„å½¢å¼å‘å¸ƒçš„ã€‚å®ƒæ˜¯é’ˆå¯¹Android 2.3(API Level 9)åŠä»¥ä¸Šçš„ç‰ˆæœ¬è°·æ­Œæä¾›äº†ä¸€ç³»åˆ—çš„supportåŒ…ï¼ˆå’ŒV4åŒ…çš„å‘½åä¸€æ ·ï¼ŒV7æœ€åˆæ”¯æŒçš„æœ€ä½ç‰ˆæœ¬æ˜¯Android 2.1å³API Level 7ï¼Œæ‰€ä»¥ç§°å…¶ä¸ºV7ï¼ŒåŒæ ·åœ¨Android Support Library 24.2.0å°†V7æ”¯æŒçš„æœ€ä½ç‰ˆæœ¬æ”¹ä¸ºAndroid 2.3å³API Level 9äº†ï¼‰ï¼Œè¿™äº›supportåŒ…å„è‡ªå¯¹åº”ç€ç‰¹å®šçš„åŠŸèƒ½ï¼Œæ¯ä¸€ä¸ªéƒ½å¯ä»¥å•ç‹¬åœ°è¢«å¼•ç”¨ã€‚ implemention: &quot;com.android.support:appcompat-v7:27.1.1&quot;, implemention: &quot;com.android.support:design:27.1.1&quot;, implemention: &quot;com.android.support:recyclerview-v7:27.1.1&quot;, implemention: &quot;com.android.support:cardview-v7:27.1.1&quot;, implemention: &quot;com.android.support:support-annotations:27.1.1&quot;, implemention: &quot;com.android.support:support-vector-drawable:27.1.1&quot;, implemention: &quot;com.android.support:mediarouter-v7:27.1.1&quot;, implemention: &quot;com.android.support:gridlayout-v7:27.1.1&quot;, implemention: &quot;com.android.support:preference-v7:27.1.1&quot;, implemention: &quot;com.android.support:palette-v7:27.1.1&quot;, appcompat-v7ï¼šè¿™ä¸ªåŒ…æ”¯æŒå¯¹Action Baræ¥å£çš„è®¾è®¡æ¨¡å¼ã€Material Designæ¥å£çš„å®ç°ç­‰ï¼Œæ ¸å¿ƒç±»æœ‰ActionBarã€AppCompatActivityã€AppCompatDialogã€ShareActionProviderç­‰ã€‚å½“ä½¿ç”¨ä¾èµ–è¿™ä¸ªåŒ…åï¼Œä¼šè‡ªåŠ¨å¼•å…¥v4åŒ… designï¼š recyclerview-v7ï¼šæ ¸å¿ƒç±»æ˜¯RecyclerViewï¼Œç”¨äºæ›¿æ¢ListViewã€GridView cardview-v7ï¼šæ”¯æŒcardviewæ§ä»¶ï¼Œä½¿ç”¨Material Designè¯­è¨€è®¾è®¡ï¼Œå¡ç‰‡å¼çš„ä¿¡æ¯å±•ç¤ºï¼Œåœ¨ç”µè§†Appä¸­æœ‰å¹¿æ³›çš„ä½¿ç”¨ support-annotationsï¼šæ”¯æŒæ ‡æ³¨ support-vector-drawableï¼š mediarouter-v7ï¼šç”¨äºè®¾å¤‡é—´éŸ³é¢‘ã€è§†é¢‘äº¤æ¢æ˜¾ç¤ºçš„supportåŒ… gridlayout-v7ï¼šæ”¯æŒGrid Layoutå¸ƒå±€çš„åŒ… preference-v7ï¼šæ”¯æŒå­˜å‚¨é…ç½®æ•°æ®çš„åŒ…ï¼Œæ¯”å¦‚CheckBoxPreferenceå’ŒListPreference palette-v7ï¼šé¡µé¢çš„é¢œè‰²åŠ¨æ€å˜æ¢ support-v13è¿™ä¸ªåŒ…çš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºAndroid3.2ï¼ˆAPI Level 13ï¼‰åŠä»¥ä¸Šçš„ç³»ç»Ÿæä¾›æ›´å¤šåœ°Framgnetç‰¹æ€§æ”¯æŒï¼Œä½¿ç”¨å®ƒçš„åŸå› åœ¨äºï¼Œandroid-support-v4.jarä¸­è™½ç„¶ä¹Ÿå¯¹Fragmentåšäº†æ”¯æŒï¼Œç”±äºè¦å…¼å®¹ä½ç‰ˆæœ¬ï¼Œå¯¼è‡´ä»–æ˜¯è‡ªè¡Œå®ç°çš„ Fragment æ•ˆæœï¼Œåœ¨é«˜ç‰ˆæœ¬çš„Fragmentçš„ä¸€äº›ç‰¹æ€§ä¸¢å¤±äº†ï¼Œè€Œå¯¹äºv13ä»¥ä¸Šçš„sdkç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´åŠ æœ‰æ•ˆï¼Œç‰¹æ€§æ›´å¤šçš„ä»£ç ã€‚ implemention: &quot;com.android.support:support-v13:27.1.1&quot;, support-v14support-v17æ”¯æŒç”µè§†è®¾å¤‡ implemention &quot;com.android.support:leanback-v17:27.1.1&quot; AndroidXé…ç½® properties.gradleä¸­é…ç½® //å¯ç”¨AndroidX android.useAndroidX=true //å°†ä¾èµ–åŒ…ä¹Ÿè¿ç§»åˆ°AndroidX android.enableJetifier=true Android Studioä¸­è®¾ç½® Refactor -&gt; Migrate to AndroidX è§£å†³ä¾èµ–å†²çªçš„ä¸€äº›æ–¹æ³•ä¿æŒç‰ˆæœ¬ç»Ÿä¸€ å¼ºåˆ¶è®¾ç½®ä½¿ç”¨æŸä¸€ä¸ªç‰ˆæœ¬ android &#123; configurations.all &#123; resolutionStrategy.force &quot;com.squareup.okhttp3:okhttp:3.12.1&quot; &#125; &#125; ä¾èµ–çš„æ—¶å€™ä½¿ç”¨exclude implementation(&#39;me.drakeet.multitype:multitype:3.4.4&#39;, &#123; exclude group: &#39;com.android.support&#39; &#125;) å‚è€ƒ https://developer.android.com/jetpack/androidx https://developer.android.com/jetpack/androidx/migrate","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Activity","date":"2022-03-08T02:25:29.621Z","path":"wiki/Android/åŸºç¡€/ActivityåŸºç¡€/","text":"ç”±æ¥æˆ‘ä»¬åœ¨åšå¸¦UIçš„è½¯ä»¶æ—¶ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯å…ˆåˆ›å»ºä¸€ä¸ªçª—å£ï¼Œç„¶ååœ¨çª—å£ä¸Šæ·»åŠ å„ç§Buttonã€Textã€Listç­‰å…¶ä»–UIæ§ä»¶ã€‚Androidã€iOSä¹Ÿæ˜¯ç±»ä¼¼ï¼Œä½†ä»£ç çš„è®¾è®¡ä¸Šè·ŸPCç«¯æœ‰äº›å·®åˆ«ï¼ŒAndroidä½¿ç”¨Activityæ¥ç®¡ç†UIã€iOSä½¿ç”¨ViewControllerã€‚ä¸€èˆ¬è½¯ä»¶çš„å…¥å£éƒ½æ˜¯mainå‡½æ•°å¼€å§‹ï¼ŒAndroidä¸­åˆ™é€šè¿‡æè¿°æ–‡ä»¶AndroidManifest.xmlé…ç½®ä¸€ä¸ªActivityçš„å±æ€§ä½œä¸ºå…¥å£ã€‚ç”¨æˆ·æ“ä½œæ‰‹æœºçš„æ—¶å€™ä½¿å¾—ä¸€ä¸ªç•Œé¢å¯èƒ½å¤„äºå¯è§†çŠ¶æ€ï¼Œä¹Ÿå¯èƒ½å¤„ç†éšè—çŠ¶æ€ï¼Œå¯¹åº”ç€Activityä¼šæœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸã€‚ä¸åŒUIçš„åµŒå¥—ä¹Ÿæ˜¯éœ€è¦ç»´æŠ¤çš„ï¼Œæ‰€ä»¥å°±æœ‰äº†Activityä»»åŠ¡æ ˆï¼Œå¯¹åº”ç€ä¸åŒActivityæœ‰ä¸åŒçš„å¯åŠ¨æ¨¡å¼ã€‚ä¸åŒçš„Activityä¹‹é—´åˆå¯èƒ½éœ€è¦æ•°æ®ä¼ é€’ï¼Œå› è€Œæœ‰äº†Intentã€‚ ç”Ÿå‘½å‘¨æœŸ å›è°ƒå‡½æ•°onCreateç”Ÿå‘½å‘¨æœŸä¸­çš„ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œæ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­åªä¼šè°ƒç”¨ä¸€æ¬¡ã€‚savedInstanceStateå‚æ•°å¦‚æœä¸ä¸ºç©ºï¼Œè¡¨ç¤ºActivityæš‚æ—¶é”€æ¯æ—¶æœ‰å­˜å‚¨ä¸€äº›æ•°æ®ï¼Œæ­¤æ—¶å¯ä»¥æ¢å¤ã€‚ onRestartå½“å‰Activityä»ä¸å¯è§é‡æ–°å˜ä¸ºå¯è§çŠ¶æ€æ—¶ï¼Œä¼šè°ƒç”¨ã€‚ onStartæ­¤æ—¶å‡†å¤‡è¿›å…¥å‰å°äº† onResumeå¯è§äº† onPauseè¡¨ç¤ºActivityæ­£åœ¨åœæ­¢ onStopè¡¨ç¤ºActivityå³å°†åœæ­¢ onDestroyè¡¨ç¤ºActivityå³å°†è¢«é”€æ¯ï¼Œä¸€èˆ¬åœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿›è¡Œèµ„æºé‡Šæ”¾ã€‚ savedInstanceStateç•Œé¢é”€æ¯æ—¶å¯ä¿å­˜æ•°æ® onRestoreInstanceStateæ¢å¤æ•°æ® ä¸åŒåœºæ™¯çš„ç”Ÿå‘½å‘¨æœŸæµç¨‹æ­£å¸¸çš„å¼€å¯å’Œç»“æŸä»Activity1ä¸­æ‰“å¼€Activity2 12345672021-06-02 21:03:06.820 30945-30945/com.lqd.androidpractice D/LaunchActivity1: onCreate2021-06-02 21:03:06.831 30945-30945/com.lqd.androidpractice D/LaunchActivity1: onStart2021-06-02 21:03:06.835 30945-30945/com.lqd.androidpractice D/LaunchActivity1: onResume2021-06-02 21:03:26.542 30945-30945/com.lqd.androidpractice D/LaunchActivity1: onPause2021-06-02 21:03:26.649 30945-30945/com.lqd.androidpractice D/LaunchActivity2: onCreate2021-06-02 21:03:26.659 30945-30945/com.lqd.androidpractice D/LaunchActivity2: onStart2021-06-02 21:03:26.663 30945-30945/com.lqd.androidpractice D/LaunchActivity2: onResume åœ¨Activity2ä¸­ç‚¹å‡»è¿”å›é”®ï¼Œå½“ä¸€ä¸ªåå°Activityä¼šåˆ°å‰å°æ—¶ï¼Œä¼šæ‰§è¡ŒonRestart-&gt;onResume-&gt;onDestroyã€‚å½“å›åˆ°æ¡Œé¢ï¼Œå†æ¬¡è¿›å…¥çš„åº”ç”¨çš„æ—¶å€™ä¹Ÿæ˜¯æ­¤æµç¨‹ 1234562021-06-02 21:06:54.500 30945-30945/com.lqd.androidpractice D/LaunchActivity2: onPause2021-06-02 21:06:54.521 30945-30945/com.lqd.androidpractice D/LaunchActivity1: onRestart2021-06-02 21:06:54.523 30945-30945/com.lqd.androidpractice D/LaunchActivity1: onStart2021-06-02 21:06:54.526 30945-30945/com.lqd.androidpractice D/LaunchActivity1: onResume2021-06-02 21:06:54.762 30945-30945/com.lqd.androidpractice D/LaunchActivity2: onDestroy å±å¹•æ—‹è½¬æ—¶12345672021-06-02 21:14:02.755 1351-1351/com.lqd.androidpractice D/LaunchActivity1: onPause2021-06-02 21:14:02.763 1351-1351/com.lqd.androidpractice D/LaunchActivity1: onSaveInstanceState2021-06-02 21:14:02.768 1351-1351/com.lqd.androidpractice D/LaunchActivity1: onDestroy2021-06-02 21:14:02.997 1351-1351/com.lqd.androidpractice D/LaunchActivity1: onCreate2021-06-02 21:14:03.011 1351-1351/com.lqd.androidpractice D/LaunchActivity1: onStart2021-06-02 21:14:03.014 1351-1351/com.lqd.androidpractice D/LaunchActivity1: onRestoreInstanceState2021-06-02 21:14:03.018 1351-1351/com.lqd.androidpractice D/LaunchActivity1: onResume å¼‚å¸¸æƒ…å†µä¸‹çš„æ•°æ®ä¿å­˜å’Œæ¢å¤æŸäº›æƒ…å†µä¸‹ï¼ŒActivityä¼šè¢«é”€æ¯ï¼Œæ­¤æ—¶ç³»ç»Ÿä¼šè°ƒç”¨savedInstanceState(Bundle bundle)æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å­˜å‚¨ä¸€äº›æ•°æ®ï¼Œç­‰åˆ°Activityæ¢å¤æ—¶ï¼Œbundleå¯¹è±¡ä¼šè¢«ä¼ é€’ç»™onCreateå’ŒonRestoreInstanceStateæ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¢å¤åˆ°åŸæ¥çš„çŠ¶æ€äº†ã€‚ å¯åŠ¨æ¨¡å¼å’Œä»»åŠ¡æ ˆä»»åŠ¡æ ˆTaskï¼Œæ˜¯ä¸€ç§ç”¨æ¥æ”¾ç½®Activityå®ä¾‹çš„å®¹å™¨ï¼Œä»–æ˜¯ä»¥æ ˆçš„å½¢å¼è¿›è¡Œç››æ”¾ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„å…ˆè¿›åå‡ºï¼Œä¸»è¦æœ‰2ä¸ªåŸºæœ¬æ“ä½œï¼šå‹æ ˆå’Œå‡ºæ ˆï¼Œå…¶æ‰€å­˜æ”¾çš„Activityæ˜¯ä¸æ”¯æŒé‡æ–°æ’åºçš„ï¼Œåªèƒ½æ ¹æ®å‹æ ˆå’Œå‡ºæ ˆæ“ä½œæ›´æ”¹Activityçš„é¡ºåºã€‚ å¯åŠ¨ä¸€ä¸ªApplicationçš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šä¸ºå®ƒé»˜è®¤åˆ›å»ºä¸€ä¸ªå¯¹åº”çš„Taskï¼Œç”¨æ¥æ”¾ç½®æ ¹Activityã€‚é»˜è®¤å¯åŠ¨Activityä¼šæ”¾åœ¨åŒä¸€ä¸ªTaskä¸­ï¼Œæ–°å¯åŠ¨çš„Activityä¼šè¢«å‹å…¥å¯åŠ¨å®ƒçš„é‚£ä¸ªActivityçš„æ ˆä¸­ï¼Œå¹¶ä¸”æ˜¾ç¤ºå®ƒã€‚å½“ç”¨æˆ·æŒ‰ä¸‹å›é€€é”®æ—¶ï¼Œè¿™ä¸ªActivityå°±ä¼šè¢«å¼¹å‡ºæ ˆï¼ŒæŒ‰ä¸‹Homeé”®å›åˆ°æ¡Œé¢ï¼Œå†å¯åŠ¨å¦ä¸€ä¸ªåº”ç”¨ï¼Œè¿™æ—¶å€™ä¹‹å‰é‚£ä¸ªTaskå°±è¢«ç§»åˆ°åå°ï¼Œæˆä¸ºåå°ä»»åŠ¡æ ˆï¼Œè€Œåˆšå¯åŠ¨çš„é‚£ä¸ªTaskå°±è¢«è°ƒåˆ°å‰å°ï¼Œæˆä¸ºå‰å°ä»»åŠ¡æ ˆï¼Œæ‰‹æœºé¡µé¢æ˜¾ç¤ºçš„å°±æ˜¯å‰å°ä»»åŠ¡æ ˆä¸­çš„æ ˆé¡¶å…ƒç´ ã€‚ å¯åŠ¨æ¨¡å¼åˆ™æ˜¯ç”¨æ¥ç®¡ç†Activityå¦‚ä½•æ·»åŠ åˆ°ä»»åŠ¡æ ˆé‡Œçš„ã€‚å¯ä»¥åœ¨æè¿°æ–‡ä»¶ä¸­é…ç½®ï¼Œä¹Ÿå¯ä»¥ä»£ç ä¸­è®¾ç½®ã€‚ å¯åŠ¨æ¨¡å¼launchModestandardé»˜è®¤æ¨¡å¼ï¼Œæ¯æ¬¡å¯åŠ¨éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Activityå®ä¾‹ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œè°å¯åŠ¨äº†è¿™ä¸ªActivityï¼Œé‚£ä¹ˆæ–°çš„Activityä¼šæ·»åŠ åˆ°å¯åŠ¨çš„Activityæ‰€åœ¨çš„ä»»åŠ¡æ ˆä¸­ã€‚å½“ä½¿ç”¨éActivityçš„Contextæ‰“å¼€ä¸€ä¸ªActivityæ—¶ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡æ ˆï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æŒ‡å®šFLAG_ACTIVITY_NEW_TASKæ ‡è¯†ã€‚ singleTopæ ˆé¡¶å¤ç”¨æ¨¡å¼ã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ–°Activityå·²ç»ä½äºä»»åŠ¡æ ˆçš„æ ˆé¡¶ï¼Œé‚£ä¹ˆæ­¤Activityä¸ä¼šè¢«é‡æ–°åˆ›å»ºï¼ŒåŒæ—¶å®ƒçš„onNewIntentæ–¹æ³•ä¼šè¢«å›è°ƒï¼Œé€šè¿‡æ­¤æ–¹æ³•çš„å‚æ•°æˆ‘ä»¬å¯ä»¥å–å‡ºå½“å‰è¯·æ±‚çš„ä¿¡æ¯ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªActivityçš„onCreateã€onStartä¸ä¼šè¢«ç³»ç»Ÿè°ƒç”¨ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚å¦‚æœæ–°Activityçš„å®ä¾‹å·²å­˜åœ¨ä½†ä¸æ˜¯ä½äºæ ˆé¡¶ï¼Œé‚£ä¹ˆæ–°Activityä»ç„¶ä¼šé‡æ–°é‡å»ºã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç›®å‰æ ˆå†…çš„æƒ…å†µä¸ºABCDï¼Œå…¶ä¸­ABCDä¸ºå››ä¸ªActivityï¼ŒAä½äºæ ˆåº•ï¼ŒDä½äºæ ˆé¡¶ï¼Œè¿™ä¸ªæ—¶å€™å‡è®¾è¦å†æ¬¡å¯åŠ¨Dï¼Œå¦‚æœDçš„å¯åŠ¨æ¨¡å¼ä¸ºsingleTopï¼Œé‚£ä¹ˆæ ˆå†…çš„æƒ…å†µä»ç„¶ä¸ºABCD;å¦‚æœDçš„å¯åŠ¨æ¨¡å¼ä¸ºstandardï¼Œé‚£ä¹ˆç”±äºD è¢«é‡æ–°åˆ›å»ºï¼Œå¯¼è‡´æ ˆå†…çš„æƒ…å†µå°±å˜ä¸ºABCDDã€‚ singleTaskæ ˆå†…å¤ç”¨æ¨¡å¼ã€‚ è¿™æ˜¯ä¸€ç§å•å®ä¾‹æ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œåªè¦Activityåœ¨ä¸€ä¸ªæ ˆä¸­å­˜åœ¨ï¼Œé‚£ä¹ˆå¤šæ¬¡å¯åŠ¨æ­¤Activityéƒ½ä¸ä¼šé‡æ–°åˆ›å»ºå®ä¾‹ï¼Œå’ŒsingleTopä¸€æ ·ï¼Œç³»ç»Ÿä¹Ÿä¼šå›è°ƒå…¶onNewIntentã€‚å¦‚æœå½“å‰æ ˆä¸­å¯åŠ¨ï¼Œå½“å‰æ ˆå¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™ä¼šå°†å…¶ä¸Šé¢çš„Activityå…¨éƒ¨å‡ºæ ˆï¼Œè‡ªå·±æ’åˆ°æ ˆé¡¶ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ–°ä»»åŠ¡æ ˆã€‚ æ¯”å¦‚ï¼š æ¯”å¦‚ç›®å‰ä»»åŠ¡æ ˆS1ä¸­çš„æƒ…å†µä¸ºABCï¼Œè¿™ä¸ªæ—¶å€™Activity Dä»¥singleTaskæ¨¡å¼è¯·æ±‚å¯åŠ¨ï¼Œå…¶æ‰€éœ€è¦çš„ä»»åŠ¡æ ˆä¸ºS2ï¼Œç”±äºS2å’ŒDçš„å®ä¾‹å‡ä¸å­˜åœ¨ï¼Œæ‰€ä»¥ç³»ç»Ÿä¼šå…ˆåˆ›å»ºä»»åŠ¡æ ˆS2ï¼Œç„¶åå†åˆ›å»ºDçš„å®ä¾‹å¹¶å°†å…¶å…¥ æ ˆåˆ°S2ã€‚ å¦å¤–ä¸€ç§æƒ…å†µï¼Œå‡è®¾Dæ‰€éœ€çš„ä»»åŠ¡æ ˆä¸ºS1ï¼Œå…¶ä»–æƒ…å†µå¦‚ä¸Šé¢ä¾‹å­1æ‰€ç¤ºï¼Œé‚£ä¹ˆç”±äºS1å·²ç»å­˜åœ¨ï¼Œæ‰€ä»¥ç³»ç»Ÿä¼šç›´æ¥åˆ›å»ºDçš„å®ä¾‹å¹¶å°†å…¶å…¥æ ˆåˆ°S1ã€‚ å¦‚æœDæ‰€éœ€çš„ä»»åŠ¡æ ˆä¸ºS1ï¼Œå¹¶ä¸”å½“å‰ä»»åŠ¡æ ˆS1çš„æƒ…å†µä¸ºADBCï¼Œæ ¹æ®æ ˆå†…å¤ç”¨çš„åŸåˆ™ï¼Œæ­¤æ—¶Dä¸ä¼šé‡æ–°åˆ›å»ºï¼Œç³»ç»Ÿä¼šæŠŠDåˆ‡æ¢åˆ°æ ˆé¡¶å¹¶è°ƒç”¨å…¶onNewIntentæ–¹æ³•ï¼ŒåŒæ—¶ç”±äºsingleTaské»˜è®¤å…·æœ‰clearTopçš„æ•ˆæœï¼Œä¼šå¯¼è‡´æ ˆå†…æ‰€æœ‰åœ¨Dä¸Šé¢çš„Activityå…¨éƒ¨å‡ºæ ˆï¼Œäºæ˜¯æœ€ç»ˆS1ä¸­çš„æƒ…å†µä¸ºADã€‚ singleInstanceå•å®ä¾‹æ¨¡å¼ã€‚è¿™æ˜¯ä¸€ç§åŠ å¼ºçš„singleTaskæ¨¡å¼ï¼Œå®ƒé™¤äº†å…·æœ‰singleTaskæ¨¡å¼çš„æ‰€æœ‰ç‰¹æ€§å¤–ï¼Œè¿˜åŠ å¼ºäº†ä¸€ç‚¹ï¼Œé‚£å°±æ˜¯å…·æœ‰æ­¤ç§æ¨¡å¼çš„Activityåªèƒ½å•ç‹¬åœ°ä½äºä¸€ä¸ªä»»åŠ¡æ ˆä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œæ¯” å¦‚Activity Aæ˜¯singleInstanceæ¨¡å¼ï¼Œå½“Aå¯åŠ¨åï¼Œç³»ç»Ÿä¼šä¸ºå®ƒåˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡æ ˆï¼Œç„¶åAç‹¬è‡ªåœ¨è¿™ä¸ªæ–°çš„ä»»åŠ¡æ ˆä¸­ï¼Œç”±äºæ ˆå†…å¤ç”¨çš„ç‰¹æ€§ï¼Œåç»­çš„è¯·æ±‚å‡ä¸ä¼šåˆ›å»ºæ–°çš„Activityï¼Œé™¤éè¿™ä¸ªç‹¬ç‰¹çš„ä»»åŠ¡æ ˆè¢«ç³»ç»Ÿé”€æ¯äº†ã€‚â€æ¥ç”µæ˜¾ç¤ºâ€ç•Œé¢å°±å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚ Activityä¸­çš„Flagsæ ‡è®°ä½çš„ä½œç”¨å¾ˆå¤šï¼Œæœ‰çš„æ ‡è®°ä½å¯ä»¥è®¾å®šActivityçš„å¯åŠ¨æ¨¡å¼ï¼Œæ¯”å¦‚FLAG_ACTIVITY_NEW_TASKå’ŒFLAG_ACTIVITY_SINGLE_TOPç­‰;è¿˜æœ‰çš„æ ‡è®°ä½å¯ä»¥å½±å“Activityçš„è¿è¡ŒçŠ¶æ€ï¼Œæ¯”å¦‚FLAG_ACTIVITY_CLEAR_TOPå’ŒFLAG_ACTIVITY_EXCLUDE_FROM_RECENTSç­‰ã€‚ä¸‹é¢ä¸»è¦ä»‹ç»å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„æ ‡è®°ä½ï¼Œå‰©ä¸‹çš„æ ‡è®°ä½è¯»è€…å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å»äº†è§£ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸ºActivityæŒ‡å®šæ ‡è®°ä½ï¼Œå› æ­¤ï¼Œå¯¹äºæ ‡è®°ä½ç†è§£å³å¯ã€‚åœ¨ä½¿ç”¨æ ‡è®°ä½çš„æ—¶å€™ï¼Œè¦æ³¨æ„æœ‰äº›æ ‡è®°ä½æ˜¯ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨çš„ï¼Œåº”ç”¨ç¨‹åºä¸éœ€è¦å»æ‰‹åŠ¨è®¾ç½®è¿™äº›æ ‡è®°ä½ä»¥é˜²å‡ºç°é—®é¢˜ã€‚ FLAG_ACTIVITY_NEW_TASK è¿™ä¸ªæ ‡è®°ä½çš„ä½œç”¨æ˜¯ä¸ºActivityæŒ‡å®šâ€œsingleTaskâ€å¯åŠ¨æ¨¡å¼ï¼Œå…¶æ•ˆæœå’Œåœ¨XMLä¸­æŒ‡å®šè¯¥å¯åŠ¨æ¨¡å¼ç›¸åŒã€‚ FLAG_ACTIVITY_SINGLE_TOP è¿™ä¸ªæ ‡è®°ä½çš„ä½œç”¨æ˜¯ä¸ºActivityæŒ‡å®šâ€œsingleTopâ€å¯åŠ¨æ¨¡å¼ï¼Œå…¶æ•ˆæœå’Œåœ¨XMLä¸­æŒ‡å®šè¯¥å¯åŠ¨æ¨¡å¼ç›¸åŒã€‚ FLAG_ACTIVITY_CLEAR_TOP å…·æœ‰æ­¤æ ‡è®°ä½çš„Activityï¼Œå½“å®ƒå¯åŠ¨æ—¶ï¼Œåœ¨åŒä¸€ä¸ªä»»åŠ¡æ ˆä¸­æ‰€æœ‰ä½äºå®ƒä¸Šé¢çš„Activityéƒ½è¦å‡ºæ ˆã€‚è¿™ä¸ªæ¨¡å¼ä¸€èˆ¬éœ€è¦å’ŒFLAG_ACTIVITY_NEW_TASKé…åˆä½¿ç”¨ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¢«å¯åŠ¨Activityçš„å®ä¾‹å¦‚æœå·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šè°ƒç”¨å®ƒçš„onNewIntentã€‚å¦‚æœè¢«å¯åŠ¨çš„Activityé‡‡ç”¨standardæ¨¡å¼å¯åŠ¨ï¼Œé‚£ä¹ˆå®ƒè¿åŒå®ƒä¹‹ä¸Šçš„Activityéƒ½è¦å‡ºæ ˆï¼Œç³»ç»Ÿä¼šåˆ›å»ºæ–°çš„Activityå®ä¾‹å¹¶æ”¾å…¥æ ˆé¡¶ã€‚ FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS å…·æœ‰è¿™ä¸ªæ ‡è®°çš„Activityä¸ä¼šå‡ºç°åœ¨å†å²Activityçš„åˆ—è¡¨ä¸­ï¼Œå½“æŸäº›æƒ…å†µä¸‹æˆ‘ä»¬ä¸å¸Œæœ›ç”¨æˆ·é€šè¿‡å†å²åˆ—è¡¨å›åˆ°æˆ‘ä»¬çš„Activityçš„æ—¶å€™è¿™ä¸ªæ ‡è®°æ¯”è¾ƒæœ‰ç”¨ã€‚å®ƒç­‰åŒäºåœ¨XMLä¸­æŒ‡å®šActivityçš„å±æ€§ android:excludeFromRecents&#x3D;â€trueâ€ã€‚ Activityä¹‹é—´å¦‚ä½•é€šä¿¡å‚è€ƒ https://developer.android.com/guide/components/activities/intro-activities?hl=zh-cn ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"Activityå·¥ä½œè¿‡ç¨‹","date":"2022-03-08T02:25:29.621Z","path":"wiki/Android/åŸºç¡€/Activityå·¥ä½œè¿‡ç¨‹/","text":"æ¦‚è¿°Activityæ˜¯ä¸€ç§å±•ç¤ºå‹ç»„ä»¶ï¼Œå…·æœ‰ä¸¤ç§å¯åŠ¨æ–¹å¼ï¼Œä¸€ç§æ˜¯æ˜¾ç¤ºçš„ï¼Œé€šè¿‡intentå®ç°ï¼›å¦ä¸€ç§æ˜¯éšå¼çš„ï¼Œä¹Ÿéœ€è¦intentï¼Œä½†è¿˜éœ€è¦åœ¨AndroidManifest.xmlä¸­æ·»åŠ intentfilterã€‚åœ¨å®ç°Activityæ—¶ï¼Œéœ€è¦ç»§æ‰¿ActivityæŠ½è±¡ç±»ï¼Œå¹¶ä¸”é‡å†™onCreat()æ–¹æ³•ï¼Œå› æ­¤ï¼ŒActivityå…·æœ‰å¯åŠ¨å’Œåœæ­¢çš„æ¦‚å¿µã€‚ æµç¨‹åˆ†ææµç¨‹å›¾ Activityçš„å¯åŠ¨ä»startActivityå¼€å§‹ï¼Œä»£ç ä¼šè¿è¡Œåˆ°Activityçš„startActivityForResultæ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839Activity.javapublic void startActivityForResult(@RequiresPermission Intent intent, int requestCode, @Nullable Bundle options) &#123; if (mParent == null) &#123; options = transferSpringboardActivityOptions(options); Instrumentation.ActivityResult ar = mInstrumentation.execStartActivity( this, mMainThread.getApplicationThread(), mToken, this, intent, requestCode, options); if (ar != null) &#123; mMainThread.sendActivityResult( mToken, mEmbeddedID, requestCode, ar.getResultCode(), ar.getResultData()); &#125; if (requestCode &gt;= 0) &#123; // If this start is requesting a result, we can avoid making // the activity visible until the result is received. Setting // this code during onCreate(Bundle savedInstanceState) or onResume() will keep the // activity hidden during this time, to avoid flickering. // This can only be done when a result is requested because // that guarantees we will get information back when the // activity is finished, no matter what happens to it. mStartedActivity = true; &#125; cancelInputsAndStartExitTransition(options); // TODO Consider clearing/flushing other event sources and events for child windows. &#125; else &#123; if (options != null) &#123; mParent.startActivityFromChild(this, intent, requestCode, options); &#125; else &#123; // Note we want to go through this method for compatibility with // existing applications that may have overridden it. mParent.startActivityFromChild(this, intent, requestCode); &#125; &#125;&#125; mParentä»£è¡¨çš„æ˜¯ActivityGroupï¼ŒActivityGroupæœ€å¼€å§‹è¢«ç”¨æ¥åœ¨ä¸€ä¸ªç•Œé¢ä¸­åµŒå…¥å¤šä¸ªå­Activityï¼Œä½†æ˜¯å…¶åœ¨API 13ä¸­å·²ç»è¢«åºŸå¼ƒäº†ï¼Œç³»ç»Ÿæ¨èé‡‡ç”¨Fragmentæ¥ä»£æ›¿ActivityGroupã€‚ mMainThread.getApplicationThread()è¿™ä¸ªå‚æ•°ï¼Œå®ƒçš„ç±»å‹æ˜¯ApplicationThreadï¼ŒApplicationThreadæ˜¯ActivityThreadçš„å†…éƒ¨ç±»ï¼Œç»§æ‰¿IApplicationThread.Stubï¼Œä¹Ÿæ˜¯ä¸ªBinderå¯¹è±¡ã€‚ æ¥ä¸‹æ¥çœ‹çœ‹execStartActivityæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899Instrumentation.java@UnsupportedAppUsagepublic ActivityResult execStartActivity( Context who, IBinder contextThread, IBinder token, Activity target, Intent intent, int requestCode, Bundle options) &#123; IApplicationThread whoThread = (IApplicationThread) contextThread; Uri referrer = target != null ? target.onProvideReferrer() : null; if (referrer != null) &#123; intent.putExtra(Intent.EXTRA_REFERRER, referrer); &#125; if (mActivityMonitors != null) &#123; synchronized (mSync) &#123; final int N = mActivityMonitors.size(); for (int i=0; i&lt;N; i++) &#123; final ActivityMonitor am = mActivityMonitors.get(i); ActivityResult result = null; if (am.ignoreMatchingSpecificIntents()) &#123; result = am.onStartActivity(intent); &#125; if (result != null) &#123; am.mHits++; return result; &#125; else if (am.match(who, null, intent)) &#123; am.mHits++; if (am.isBlocking()) &#123; return requestCode &gt;= 0 ? am.getResult() : null; &#125; break; &#125; &#125; &#125; &#125; try &#123; intent.migrateExtraStreamToClipData(); intent.prepareToLeaveProcess(who); int result = ActivityTaskManager.getService() .startActivity(whoThread, who.getBasePackageName(), intent, intent.resolveTypeIfNeeded(who.getContentResolver()), token, target != null ? target.mEmbeddedID : null, requestCode, 0, null, options); //æ£€æŸ¥Activityå¯åŠ¨çš„ç»“æœ //æ¯”å¦‚å¦‚æœæ²¡æœ‰æ³¨å†Œï¼Œåˆ™ä¼šæŠ›å‡ºActivityNotFoundException checkStartActivityResult(result, intent); &#125; catch (RemoteException e) &#123; throw new RuntimeException(&quot;Failure from system&quot;, e); &#125; return null;&#125;public static void checkStartActivityResult(int res, Object intent) &#123; if (!ActivityManager.isStartResultFatalError(res)) &#123; return; &#125; switch (res) &#123; case ActivityManager.START_INTENT_NOT_RESOLVED: case ActivityManager.START_CLASS_NOT_FOUND: if (intent instanceof Intent &amp;&amp; ((Intent)intent).getComponent() != null) throw new ActivityNotFoundException( &quot;Unable to find explicit activity class &quot; + ((Intent)intent).getComponent().toShortString() + &quot;; have you declared this activity in your AndroidManifest.xml?&quot;); throw new ActivityNotFoundException( &quot;No Activity found to handle &quot; + intent); case ActivityManager.START_PERMISSION_DENIED: throw new SecurityException(&quot;Not allowed to start activity &quot; + intent); case ActivityManager.START_FORWARD_AND_REQUEST_CONFLICT: throw new AndroidRuntimeException( &quot;FORWARD_RESULT_FLAG used while also requesting a result&quot;); case ActivityManager.START_NOT_ACTIVITY: throw new IllegalArgumentException( &quot;PendingIntent is not an activity&quot;); case ActivityManager.START_NOT_VOICE_COMPATIBLE: throw new SecurityException( &quot;Starting under voice control not allowed for: &quot; + intent); case ActivityManager.START_VOICE_NOT_ACTIVE_SESSION: throw new IllegalStateException( &quot;Session calling startVoiceActivity does not match active session&quot;); case ActivityManager.START_VOICE_HIDDEN_SESSION: throw new IllegalStateException( &quot;Cannot start voice activity on a hidden session&quot;); case ActivityManager.START_ASSISTANT_NOT_ACTIVE_SESSION: throw new IllegalStateException( &quot;Session calling startAssistantActivity does not match active session&quot;); case ActivityManager.START_ASSISTANT_HIDDEN_SESSION: throw new IllegalStateException( &quot;Cannot start assistant activity on a hidden session&quot;); case ActivityManager.START_CANCELED: throw new AndroidRuntimeException(&quot;Activity could not be started for &quot; + intent); default: throw new AndroidRuntimeException(&quot;Unknown error code &quot; + res + &quot; when starting &quot; + intent); &#125;&#125; è¿™é‡Œä½¿ç”¨äº†ActivityTaskManageræ¥å¯åŠ¨Activityã€‚ActivityTaskManageræ˜¯ä¸€ä¸ªBinderã€‚ActivityTaskManager.getService()ä¼šè¿”å›ActivityæœåŠ¡ç®¡ç†å™¨ActivityManagerService(Android10è¿”å›ActivityTaskManagerService)ã€‚ ATMSæ˜¯åœ¨Android10ä¸­æ–°å¢çš„ï¼Œåˆ†æ‹…äº†ä¹‹å‰ActivityManagerServiceï¼ˆAMSï¼‰çš„ä¸€éƒ¨åˆ†åŠŸèƒ½ï¼ˆactivity taskç›¸å…³ï¼‰ã€‚åœ¨Android10 ä¹‹å‰ ï¼Œè¿™ä¸ªåœ°æ–¹è·å–çš„æ˜¯æœåŠ¡æ˜¯AMSã€‚æŸ¥çœ‹Android10çš„AMSï¼Œä½ ä¼šå‘ç°startActivityæ–¹æ³•å†…ä¹Ÿæ˜¯è°ƒç”¨äº†ATMSçš„startActivityæ–¹æ³•ã€‚æ‰€ä»¥åœ¨ç†è§£ä¸Šï¼ŒATMSå°±éš¶å±äºAMSã€‚ æ¥ä¸‹æ¥è¦å»ActivityTaskManagerServiceçœ‹çœ‹äº† Activityçš„ç®¡ç†12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849ActivityTaskManagerService.java@Overridepublic final int startActivities(IApplicationThread caller, String callingPackage, Intent[] intents, String[] resolvedTypes, IBinder resultTo, Bundle bOptions, int userId) &#123; final String reason = &quot;startActivities&quot;; enforceNotIsolatedCaller(reason); userId = handleIncomingUser(Binder.getCallingPid(), Binder.getCallingUid(), userId, reason); // TODO: Switch to user app stacks here. return getActivityStartController().startActivities(caller, -1, 0, -1, callingPackage, intents, resolvedTypes, resultTo, SafeActivityOptions.fromBundle(bOptions), userId, reason, null /* originatingPendingIntent */, false /* allowBackgroundActivityStart */);&#125;@Overridepublic int startActivityAsUser(IApplicationThread caller, String callingPackage, Intent intent, String resolvedType, IBinder resultTo, String resultWho, int requestCode, int startFlags, ProfilerInfo profilerInfo, Bundle bOptions, int userId) &#123; return startActivityAsUser(caller, callingPackage, intent, resolvedType, resultTo, resultWho, requestCode, startFlags, profilerInfo, bOptions, userId, true /*validateIncomingUser*/);&#125;int startActivityAsUser(IApplicationThread caller, String callingPackage, Intent intent, String resolvedType, IBinder resultTo, String resultWho, int requestCode, int startFlags, ProfilerInfo profilerInfo, Bundle bOptions, int userId, boolean validateIncomingUser) &#123; enforceNotIsolatedCaller(&quot;startActivityAsUser&quot;); userId = getActivityStartController().checkTargetUser(userId, validateIncomingUser, Binder.getCallingPid(), Binder.getCallingUid(), &quot;startActivityAsUser&quot;); // TODO: Switch to user app stacks here. return getActivityStartController().obtainStarter(intent, &quot;startActivityAsUser&quot;) .setCaller(caller) .setCallingPackage(callingPackage) .setResolvedType(resolvedType) .setResultTo(resultTo) .setResultWho(resultWho) .setRequestCode(requestCode) .setStartFlags(startFlags) .setProfilerInfo(profilerInfo) .setActivityOptions(bOptions) .setMayWait(userId) .execute();&#125; getActivityStartController().obtainStarteræ–¹æ³•è·å–ActivityStarterå®ä¾‹ï¼Œè¿›å»çœ‹çœ‹executeã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596ActivityStarter.java/** * Starts an activity based on the request parameters provided earlier. * @return The starter result. */int execute() &#123; try &#123; // TODO(b/64750076): Look into passing request directly to these methods to allow // for transactional diffs and preprocessing. if (mRequest.mayWait) &#123; //ä¹Ÿä¼šæ‰§è¡Œåˆ°startActivityæ–¹æ³• return startActivityMayWait(mRequest.caller, mRequest.callingUid, mRequest.callingPackage, mRequest.realCallingPid, mRequest.realCallingUid, mRequest.intent, mRequest.resolvedType, mRequest.voiceSession, mRequest.voiceInteractor, mRequest.resultTo, mRequest.resultWho, mRequest.requestCode, mRequest.startFlags, mRequest.profilerInfo, mRequest.waitResult, mRequest.globalConfig, mRequest.activityOptions, mRequest.ignoreTargetSecurity, mRequest.userId, mRequest.inTask, mRequest.reason, mRequest.allowPendingRemoteAnimationRegistryLookup, mRequest.originatingPendingIntent, mRequest.allowBackgroundActivityStart); &#125; else &#123; return startActivity(mRequest.caller, mRequest.intent, mRequest.ephemeralIntent, mRequest.resolvedType, mRequest.activityInfo, mRequest.resolveInfo, mRequest.voiceSession, mRequest.voiceInteractor, mRequest.resultTo, mRequest.resultWho, mRequest.requestCode, mRequest.callingPid, mRequest.callingUid, mRequest.callingPackage, mRequest.realCallingPid, mRequest.realCallingUid, mRequest.startFlags, mRequest.activityOptions, mRequest.ignoreTargetSecurity, mRequest.componentSpecified, mRequest.outActivity, mRequest.inTask, mRequest.reason, mRequest.allowPendingRemoteAnimationRegistryLookup, mRequest.originatingPendingIntent, mRequest.allowBackgroundActivityStart); &#125; &#125; finally &#123; onExecutionComplete(); &#125;&#125;private int startActivity(final ActivityRecord r, ActivityRecord sourceRecord, IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor, int startFlags, boolean doResume, ActivityOptions options, TaskRecord inTask, ActivityRecord[] outActivity, boolean restrictedBgActivity) &#123; int result = START_CANCELED; final ActivityStack startedActivityStack; try &#123; mService.mWindowManager.deferSurfaceLayout(); result = startActivityUnchecked(r, sourceRecord, voiceSession, voiceInteractor, startFlags, doResume, options, inTask, outActivity, restrictedBgActivity); ... &#125; private int startActivityUnchecked(final ActivityRecord r, ActivityRecord sourceRecord, IVoiceInteractionSession voiceSession, IVoiceInteractor voiceInteractor, int startFlags, boolean doResume, ActivityOptions options, TaskRecord inTask, ActivityRecord[] outActivity, boolean restrictedBgActivity) &#123;...if (mDoResume) &#123; final ActivityRecord topTaskActivity = mStartActivity.getTaskRecord().topRunningActivityLocked(); if (!mTargetStack.isFocusable() || (topTaskActivity != null &amp;&amp; topTaskActivity.mTaskOverlay &amp;&amp; mStartActivity != topTaskActivity)) &#123; // If the activity is not focusable, we can&#x27;t resume it, but still would like to // make sure it becomes visible as it starts (this will also trigger entry // animation). An example of this are PIP activities. // Also, we don&#x27;t want to resume activities in a task that currently has an overlay // as the starting activity just needs to be in the visible paused state until the // over is removed. mTargetStack.ensureActivitiesVisibleLocked(mStartActivity, 0, !PRESERVE_WINDOWS); // Go ahead and tell window manager to execute app transition for this activity // since the app transition will not be triggered through the resume channel. mTargetStack.getDisplay().mDisplayContent.executeAppTransition(); &#125; else &#123; // If the target stack was not previously focusable (previous top running activity // on that stack was not visible) then any prior calls to move the stack to the // will not update the focused stack. If starting the new activity now allows the // task stack to be focusable, then ensure that we now update the focused stack // accordingly. if (mTargetStack.isFocusable() &amp;&amp; !mRootActivityContainer.isTopDisplayFocusedStack(mTargetStack)) &#123; mTargetStack.moveToFront(&quot;startActivityUnchecked&quot;); &#125; mRootActivityContainer.resumeFocusedStacksTopActivities( mTargetStack, mStartActivity, mOptions); &#125;&#125; else if (mStartActivity != null) &#123; mSupervisor.mRecentTasks.add(mStartActivity.getTaskRecord());&#125;mRootActivityContainer.updateUserStack(mStartActivity.mUserId, mTargetStack);...&#125; startActivityMayWaitæœ€ç»ˆä¹Ÿæ˜¯ä¼šè¿›å…¥startActivityï¼ŒstartActivityè°ƒç”¨äº†startActivityUncheckedï¼ŒstartActivityUncheckedè°ƒç”¨äº†mRootActivityContainer.resumeFocusedStacksTopActivities(mTargetStack, mStartActivity, mOptions);ã€‚mRootActivityContaineræ˜¯RootActivityContainerï¼ŒAndroid10æ–°å¢åˆ°APIï¼Œåˆ†æ‹…äº†ActivityStackSupervisoréƒ¨åˆ†åŠŸèƒ½ã€‚æ¥ç€çœ‹çœ‹RootActivityContainer 12345678910111213141516RootActivityContainer.javaboolean resumeFocusedStacksTopActivities( ActivityStack targetStack, ActivityRecord target, ActivityOptions targetOptions) &#123; if (!mStackSupervisor.readyToResume()) &#123; return false; &#125; boolean result = false; if (targetStack != null &amp;&amp; (targetStack.isTopStackOnDisplay() || getTopDisplayFocusedStack() == targetStack)) &#123; result = targetStack.resumeTopActivityUncheckedLocked(target, targetOptions); &#125; ... &#125; æ¥ç€è·³è½¬åˆ°äº†ActivityStackçš„resumeTopActivityUncheckedLockedæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778ActivityStack.java@GuardedBy(&quot;mService&quot;)boolean resumeTopActivityUncheckedLocked(ActivityRecord prev, ActivityOptions options) &#123; if (mInResumeTopActivity) &#123; // Don&#x27;t even start recursing. return false; &#125; boolean result = false; try &#123; // Protect against recursion. mInResumeTopActivity = true; result = resumeTopActivityInnerLocked(prev, options); // When resuming the top activity, it may be necessary to pause the top activity (for // example, returning to the lock screen. We suppress the normal pause logic in // &#123;@link #resumeTopActivityUncheckedLocked&#125;, since the top activity is resumed at the // end. We call the &#123;@link ActivityStackSupervisor#checkReadyForSleepLocked&#125; again here // to ensure any necessary pause logic occurs. In the case where the Activity will be // shown regardless of the lock screen, the call to // &#123;@link ActivityStackSupervisor#checkReadyForSleepLocked&#125; is skipped. final ActivityRecord next = topRunningActivityLocked(true /* focusableOnly */); if (next == null || !next.canTurnScreenOn()) &#123; checkReadyForSleep(); &#125; &#125; finally &#123; mInResumeTopActivity = false; &#125; return result;&#125;@GuardedBy(&quot;mService&quot;)private boolean resumeTopActivityInnerLocked(ActivityRecord prev, ActivityOptions options) &#123;... boolean pausing = getDisplay().pauseBackStacks(userLeaving, next, false); if (mResumedActivity != null) &#123; if (DEBUG_STATES) Slog.d(TAG_STATES, &quot;resumeTopActivityLocked: Pausing &quot; + mResumedActivity); // æš‚åœä¸Šä¸€ä¸ªActivity pausing |= startPausingLocked(userLeaving, false, next, false); &#125; ... //è¿™é‡Œnext.attachedToProcess()ï¼Œåªæœ‰å¯åŠ¨äº†çš„Activityæ‰ä¼šè¿”å›true if (next.attachedToProcess()) &#123; ... try &#123; final ClientTransaction transaction = ClientTransaction.obtain(next.app.getThread(), next.appToken); ... //å¯åŠ¨äº†çš„Activityå°±å‘é€ResumeActivityItemäº‹åŠ¡ç»™å®¢æˆ·ç«¯äº†ï¼Œåé¢ä¼šè®²åˆ° transaction.setLifecycleStateRequest( ResumeActivityItem.obtain(next.app.getReportedProcState(), getDisplay().mDisplayContent.isNextTransitionForward())); mService.getLifecycleManager().scheduleTransaction(transaction); .... &#125; catch (Exception e) &#123; .... mStackSupervisor.startSpecificActivityLocked(next, true, false); return true; &#125; .... &#125; else &#123; .... if (SHOW_APP_STARTING_PREVIEW) &#123; //è¿™é‡Œå°±æ˜¯ å†·å¯åŠ¨æ—¶ å‡ºç°ç™½å± çš„åŸå› äº†ï¼šå–æ ¹Activityçš„ä¸»é¢˜èƒŒæ™¯ å±•ç¤ºStartingWindow next.showStartingWindow(null , false ,false); &#125; // ç»§ç»­å½“å‰Activityï¼Œæ™®é€šActivityçš„æ­£å¸¸å¯åŠ¨ å…³æ³¨è¿™é‡Œå³å¯ //ActivityStackSupervisor.java mStackSupervisor.startSpecificActivityLocked(next, true, true); &#125; return true;&#125; æ¥ä¸‹æ¥åˆ°äº†ActivityStackSupervisorçš„startSpecificActivityLockedæ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677ActivityStackSupervisor.javavoid startSpecificActivityLocked(ActivityRecord r, boolean andResume, boolean checkConfig) &#123; // Is this activity&#x27;s application already running? final WindowProcessController wpc = mService.getProcessController(r.processName, r.info.applicationInfo.uid); boolean knownToBeDead = false; if (wpc != null &amp;&amp; wpc.hasThread()) &#123; try &#123; realStartActivityLocked(r, wpc, andResume, checkConfig); return; &#125; catch (RemoteException e) &#123; Slog.w(TAG, &quot;Exception when starting activity &quot; + r.intent.getComponent().flattenToShortString(), e); &#125; knownToBeDead = true; &#125; ... try &#123; if (Trace.isTagEnabled(TRACE_TAG_ACTIVITY_MANAGER)) &#123; Trace.traceBegin(TRACE_TAG_ACTIVITY_MANAGER, &quot;dispatchingStartProcess:&quot; + r.processName); &#125; // ä¸Šé¢çš„wpc != null &amp;&amp; wpc.hasThread()ä¸æ»¡è¶³çš„è¯ï¼Œè¯´æ˜æ²¡æœ‰è¿›ç¨‹ï¼Œå°±ä¼šå»åˆ›å»ºè¿›ç¨‹ final Message msg = PooledLambda.obtainMessage( ActivityManagerInternal::startProcess, mService.mAmInternal, r.processName, r.info.applicationInfo, knownToBeDead, &quot;activity&quot;, r.intent.getComponent()); mService.mH.sendMessage(msg); &#125; finally &#123; Trace.traceEnd(TRACE_TAG_ACTIVITY_MANAGER); &#125;&#125;boolean realStartActivityLocked(ActivityRecord r, WindowProcessController proc, boolean andResume, boolean checkConfig) throws RemoteException &#123; ... // Create activity launch transaction. final ClientTransaction clientTransaction = ClientTransaction.obtain( proc.getThread(), r.appToken); final DisplayContent dc = r.getDisplay().mDisplayContent; //æ·»åŠ äº†å¯åŠ¨Activityçš„Item clientTransaction.addCallback(LaunchActivityItem.obtain(new Intent(r.intent), System.identityHashCode(r), r.info, // TODO: Have this take the merged configuration instead of separate global // and override configs. mergedConfiguration.getGlobalConfiguration(), mergedConfiguration.getOverrideConfiguration(), r.compat, r.launchedFromPackage, task.voiceInteractor, proc.getReportedProcState(), r.icicle, r.persistentState, results, newIntents, dc.isNextTransitionForward(), proc.createProfilerInfoIfNeeded(), r.assistToken)); // Set desired final state. final ActivityLifecycleItem lifecycleItem; if (andResume) &#123; lifecycleItem = ResumeActivityItem.obtain(dc.isNextTransitionForward()); &#125; else &#123; lifecycleItem = PauseActivityItem.obtain(); &#125; clientTransaction.setLifecycleStateRequest(lifecycleItem); // Schedule transaction. //ActivityTaskManagerServiceè·å–ClientLifecycleManager mService.getLifecycleManager().scheduleTransaction(clientTransaction); ... return true;&#125; ç”±ä»¥ä¸Šä»£ç å¯çŸ¥ï¼ŒClientTransactionåŒ…å«ä¸€ç³»åˆ—çš„å¾…å®¢æˆ·ç«¯å¤„ç†çš„äº‹åŠ¡çš„å®¹å™¨ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åå–å‡ºäº‹åŠ¡å¹¶æ‰§è¡Œã€‚å…¶æ·»åŠ äº†LaunchActivityItemã€ResumeActivityItemç­‰ã€‚ç„¶åè¿è¡ŒClientLifecycleManagerçš„scheduleTransaction 123456789101112131415161718192021ClientLifecycleManager.java/** * Schedule a transaction, which may consist of multiple callbacks and a lifecycle request. * @param transaction A sequence of client transaction items. * @throws RemoteException * * @see ClientTransaction */void scheduleTransaction(ClientTransaction transaction) throws RemoteException &#123; final IApplicationThread client = transaction.getClient(); //ClientTransaction transaction.schedule(); if (!(client instanceof Binder)) &#123; // If client is not an instance of Binder - it&#x27;s a remote call and at this point it is // safe to recycle the object. All objects used for local calls will be recycled after // the transaction is executed on client in ActivityThread. transaction.recycle(); &#125;&#125; 123456ClientTransaction.javapublic void schedule() throws RemoteException &#123;//ApplicationThread mClient.scheduleTransaction(this);&#125; IApplicationThreadæ˜¯ApplicationThreadåœ¨ç³»ç»Ÿè¿›ç¨‹çš„ä»£ç†ï¼Œæ‰€ä»¥çœŸæ­£æ‰§è¡Œçš„åœ°æ–¹æ˜¯å®¢æˆ·ç«¯çš„ApplicationThreadã€‚ ç°æœ‰æµç¨‹å¦‚ä¸‹ï¼šå¯åŠ¨Activityçš„æ“ä½œä»å®¢æˆ·ç«¯è·¨è¿›ç¨‹è½¬ç§»åˆ°ATMSï¼ŒATMSé€šè¿‡ActivityStarterã€ActivityStackã€ActivityStackSupervisorå¯¹Activityä»»åŠ¡ã€Activityæ ˆã€Activityè®°å½•ç®¡ç†åï¼Œåˆç”¨è¿‡è·¨è¿›ç¨‹æŠŠæ­£åœ¨å¯åŠ¨è¿‡ç¨‹åˆè½¬ç§»åˆ°äº†å®¢æˆ·ç«¯ã€‚ æµç¨‹å›¾å¦‚ä¸‹ï¼š çº¿ç¨‹åˆ‡æ¢åŠæ¶ˆæ¯å¤„ç†æ¥ä¸‹æ¥çœ‹çœ‹ApplicationThreadçš„scheduleTransaction scheduleTransactionä¼šå‘é€Messageï¼ŒActivityThreadå†…éƒ¨ç±»Hå¤„ç†æ­¤æ¶ˆæ¯ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465//ApplicationThread.java@Overridepublic void scheduleTransaction(ClientTransaction transaction) throws RemoteException &#123; ActivityThread.this.scheduleTransaction(transaction);&#125;//ActivityThread.java@Overridepublic void scheduleTransaction(ClientTransaction transaction) throws RemoteException &#123;//ä¼šè°ƒç”¨sendMessage ActivityThread.this.scheduleTransaction(transaction);&#125;private void sendMessage(int what, Object obj, int arg1, int arg2, boolean async) &#123; if (DEBUG_MESSAGES) Slog.v( TAG, &quot;SCHEDULE &quot; + what + &quot; &quot; + mH.codeToString(what) + &quot;: &quot; + arg1 + &quot; / &quot; + obj); Message msg = Message.obtain(); msg.what = what; msg.obj = obj; msg.arg1 = arg1; msg.arg2 = arg2; if (async) &#123; msg.setAsynchronous(true); &#125; mH.sendMessage(msg);//å¯¹åº”mHä¼šå¤„ç†æ¶ˆæ¯ï¼ŒHæ˜¯ActivityThreadçš„å†…éƒ¨ç±»&#125;//ClientTransactionHandler.java æ˜¯ActivityThreadçš„çˆ¶ç±»void scheduleTransaction(ClientTransaction transaction) &#123; transaction.preExecute(this); sendMessage(ActivityThread.H.EXECUTE_TRANSACTION, transaction);&#125;//class H extends Handler &#123; public void handleMessage(Message msg) &#123; if (DEBUG_MESSAGES) Slog.v(TAG, &quot;&gt;&gt;&gt; handling: &quot; + codeToString(msg.what)); switch (msg.what) &#123; ... case EXECUTE_TRANSACTION: final ClientTransaction transaction = (ClientTransaction) msg.obj; //è¿™é‡Œå¤„ç†æ¶ˆæ¯ //TransactionExecutor mTransactionExecutor.execute(transaction); if (isSystem()) &#123; // Client transactions inside system process are recycled on the client side // instead of ClientLifecycleManager to avoid being cleared before this // message is handled. transaction.recycle(); &#125; // TODO(lifecycler): Recycle locally scheduled transactions. break; case RELAUNCH_ACTIVITY: handleRelaunchActivityLocally((IBinder) msg.obj); break; &#125; &#125;&#125; æœ€ç»ˆåˆ°äº†TransactionExecutorçš„executeæ–¹æ³• 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667//TransactionExecutor.javapublic void execute(ClientTransaction transaction) &#123; if (DEBUG_RESOLVER) Slog.d(TAG, tId(transaction) + &quot;Start resolving transaction&quot;); final IBinder token = transaction.getActivityToken(); if (token != null) &#123; final Map&lt;IBinder, ClientTransactionItem&gt; activitiesToBeDestroyed = mTransactionHandler.getActivitiesToBeDestroyed(); final ClientTransactionItem destroyItem = activitiesToBeDestroyed.get(token); if (destroyItem != null) &#123; if (transaction.getLifecycleStateRequest() == destroyItem) &#123; // It is going to execute the transaction that will destroy activity with the // token, so the corresponding to-be-destroyed record can be removed. activitiesToBeDestroyed.remove(token); &#125; if (mTransactionHandler.getActivityClient(token) == null) &#123; // The activity has not been created but has been requested to destroy, so all // transactions for the token are just like being cancelled. Slog.w(TAG, tId(transaction) + &quot;Skip pre-destroyed transaction:\\n&quot; + transactionToString(transaction, mTransactionHandler)); return; &#125; &#125; &#125; if (DEBUG_RESOLVER) Slog.d(TAG, transactionToString(transaction, mTransactionHandler)); executeCallbacks(transaction); executeLifecycleState(transaction); mPendingActions.clear(); if (DEBUG_RESOLVER) Slog.d(TAG, tId(transaction) + &quot;End resolving transaction&quot;);&#125;public void executeCallbacks(ClientTransaction transaction) &#123; final List&lt;ClientTransactionItem&gt; callbacks = transaction.getCallbacks(); if (callbacks == null || callbacks.isEmpty()) &#123; // No callbacks to execute, return early. return; &#125; if (DEBUG_RESOLVER) Slog.d(TAG, tId(transaction) + &quot;Resolving callbacks in transaction&quot;); final IBinder token = transaction.getActivityToken(); ActivityClientRecord r = mTransactionHandler.getActivityClient(token); // In case when post-execution state of the last callback matches the final state requested // for the activity in this transaction, we won&#x27;t do the last transition here and do it when // moving to final state instead (because it may contain additional parameters from server). final ActivityLifecycleItem finalStateRequest = transaction.getLifecycleStateRequest(); final int finalState = finalStateRequest != null ? finalStateRequest.getTargetState() : UNDEFINED; // Index of the last callback that requests some post-execution state. final int lastCallbackRequestingState = lastCallbackRequestingState(transaction);//éå†callbacksï¼Œè°ƒç”¨ClientTransactionItemçš„executeæ–¹æ³•//LaunchActivityItemä¼šåœ¨è¿™é‡Œè°ƒç”¨execute final int size = callbacks.size(); for (int i = 0; i &lt; size; ++i) &#123; final ClientTransactionItem item = callbacks.get(i); ... item.execute(mTransactionHandler, token, mPendingActions); item.postExecute(mTransactionHandler, token, mPendingActions); ... &#125;&#125; ç»§ç»­æŸ¥çœ‹LaunchActivityItemçš„execute 1234567891011121314LaunchActivityItem.java@Overridepublic void execute(ClientTransactionHandler client, IBinder token, PendingTransactionActions pendingActions) &#123; Trace.traceBegin(TRACE_TAG_ACTIVITY_MANAGER, &quot;activityStart&quot;); ActivityClientRecord r = new ActivityClientRecord(token, mIntent, mIdent, mInfo, mOverrideConfig, mCompatInfo, mReferrer, mVoiceInteractor, mState, mPersistentState, mPendingResults, mPendingNewIntents, mIsForward, mProfilerInfo, client, mAssistToken); client.handleLaunchActivity(r, pendingActions, null /* customIntent */); Trace.traceEnd(TRACE_TAG_ACTIVITY_MANAGER);&#125; é‡Œé¢è°ƒç”¨äº†client.handleLaunchActivityæ–¹æ³•ï¼Œclientæ˜¯ClientTransactionHandlerçš„å®ä¾‹ï¼Œæ˜¯åœ¨TransactionExecutoræ„é€ æ–¹æ³•ä¼ å…¥çš„ï¼ŒTransactionExecutoråˆ›å»ºæ˜¯åœ¨ActivityThreadä¸­,æ‰€ä»¥ï¼Œclient.handleLaunchActivityæ–¹æ³•å°±æ˜¯ActivityThreadçš„handleLaunchActivityæ–¹æ³•ã€‚ æµç¨‹å›¾å¦‚ä¸‹ï¼š Activityåˆå§‹åŒ–åŠç”Ÿå‘½å‘¨æœŸå‡½æ•°å›è°ƒ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111ActivityThread.javapublic Activity handleLaunchActivity(ActivityClientRecord r, PendingTransactionActions pendingActions, Intent customIntent) &#123; ... final Activity a = performLaunchActivity(r, customIntent); ... return a;&#125;/** activity å¯åŠ¨çš„æ ¸å¿ƒå®ç°. */private Activity performLaunchActivity(ActivityClientRecord r, Intent customIntent) &#123; //1ã€ä»ActivityClientRecordè·å–å¾…å¯åŠ¨çš„Activityçš„ç»„ä»¶ä¿¡æ¯ ActivityInfo aInfo = r.activityInfo; if (r.packageInfo == null) &#123; r.packageInfo = getPackageInfo(aInfo.applicationInfo, r.compatInfo, Context.CONTEXT_INCLUDE_CODE); &#125; ComponentName component = r.intent.getComponent(); if (component == null) &#123; component = r.intent.resolveActivity( mInitialApplication.getPackageManager()); r.intent.setComponent(component); &#125; if (r.activityInfo.targetActivity != null) &#123; component = new ComponentName(r.activityInfo.packageName, r.activityInfo.targetActivity); &#125; //åˆ›å»ºContextImplå¯¹è±¡ ContextImpl appContext = createBaseContextForActivity(r); Activity activity = null; try &#123; //2ã€åˆ›å»ºactivityå®ä¾‹ java.lang.ClassLoader cl = appContext.getClassLoader(); activity = mInstrumentation.newActivity( cl, component.getClassName(), r.intent); StrictMode.incrementExpectedActivityCount(activity.getClass()); r.intent.setExtrasClassLoader(cl); r.intent.prepareToEnterProcess(); if (r.state != null) &#123; r.state.setClassLoader(cl); &#125; &#125; catch (Exception e) &#123; .. &#125; try &#123; //3ã€åˆ›å»ºApplicationå¯¹è±¡ï¼ˆå¦‚æœæ²¡æœ‰çš„è¯ï¼‰ Application app = r.packageInfo.makeApplication(false, mInstrumentation); ... if (activity != null) &#123; CharSequence title = r.activityInfo.loadLabel(appContext.getPackageManager()); Configuration config = new Configuration(mCompatConfiguration); if (r.overrideConfig != null) &#123; config.updateFrom(r.overrideConfig); &#125; Window window = null; if (r.mPendingRemoveWindow != null &amp;&amp; r.mPreserveWindow) &#123; window = r.mPendingRemoveWindow; r.mPendingRemoveWindow = null; r.mPendingRemoveWindowManager = null; &#125; appContext.setOuterContext(activity); //4ã€attachæ–¹æ³•ä¸ºactivityå…³è”ä¸Šä¸‹æ–‡ç¯å¢ƒ activity.attach(appContext, this, getInstrumentation(), r.token, r.ident, app, r.intent, r.activityInfo, title, r.parent, r.embeddedID, r.lastNonConfigurationInstances, config, r.referrer, r.voiceInteractor, window, r.configCallback, r.assistToken); if (customIntent != null) &#123; activity.mIntent = customIntent; &#125; r.lastNonConfigurationInstances = null; checkAndBlockForNetworkAccess(); activity.mStartedActivity = false; int theme = r.activityInfo.getThemeResource(); if (theme != 0) &#123; activity.setTheme(theme); &#125; activity.mCalled = false; //5ã€è°ƒç”¨ç”Ÿå‘½å‘¨æœŸonCreate if (r.isPersistable()) &#123; mInstrumentation.callActivityOnCreate(activity, r.state, r.persistentState); &#125; else &#123; mInstrumentation.callActivityOnCreate(activity, r.state); &#125; if (!activity.mCalled) &#123; throw new SuperNotCalledException( &quot;Activity &quot; + r.intent.getComponent().toShortString() + &quot; did not call through to super.onCreate()&quot;); &#125; r.activity = activity; &#125; r.setState(ON_CREATE); synchronized (mResourcesManager) &#123; mActivities.put(r.token, r); &#125; &#125; ... return activity;&#125; ç”±ä»¥ä¸Šä»£ç å¯çŸ¥ï¼ŒperformLaunchActivityä¸»è¦å®Œæˆä»¥ä¸‹äº‹æƒ…ï¼š ä»ActivityClientRecordè·å–å¾…å¯åŠ¨çš„Activityçš„ç»„ä»¶ä¿¡æ¯ é€šè¿‡mInstrumentation.newActivityæ–¹æ³•ä½¿ç”¨ç±»åŠ è½½å™¨åˆ›å»ºactivityå®ä¾‹ é€šè¿‡LoadedApkçš„makeApplicationæ–¹æ³•åˆ›å»ºApplicationå¯¹è±¡ï¼Œå†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡mInstrumentationä½¿ç”¨ç±»åŠ è½½å™¨ï¼Œåˆ›å»ºåå°±è°ƒç”¨äº†instrumentation.callApplicationOnCreateæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯Applicationçš„onCreateæ–¹æ³•ã€‚ åˆ›å»ºContextImplå¯¹è±¡å¹¶é€šè¿‡activity.attachæ–¹æ³•å¯¹é‡è¦æ•°æ®åˆå§‹åŒ–ï¼Œå…³è”äº†Contextçš„å…·ä½“å®ç°ContextImplï¼Œattachæ–¹æ³•å†…éƒ¨è¿˜å®Œæˆäº†windowåˆ›å»ºï¼Œè¿™æ ·Windowæ¥æ”¶åˆ°å¤–éƒ¨äº‹ä»¶åå°±èƒ½ä¼ é€’ç»™Activityäº†ã€‚ è°ƒç”¨Activityçš„onCreateæ–¹æ³•ï¼Œæ˜¯é€šè¿‡ mInstrumentation.callActivityOnCreateæ–¹æ³•å®Œæˆã€‚ å…¶ä»–ç”Ÿå‘½å‘¨æœŸå¤„ç†ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œå…ˆåœ¨ActivityStackSupervisorä¸­æ·»åŠ å¯¹åº”çš„XXXActivityItemï¼Œç„¶ååœ¨ActivityThreadä¸­çš„handleXXXActivityå¤„ç†ã€‚ æ€»ç»“å½’çº³æ•´ä½“æµç¨‹å›¾å¦‚ä¸‹ï¼š ä¸€äº›ç±»çš„ä»‹ç»ï¼š ç±»å ä½œç”¨ ActivityThread åº”ç”¨çš„å…¥å£ç±»ï¼Œç³»ç»Ÿé€šè¿‡è°ƒç”¨mainå‡½æ•°ï¼Œå¼€å¯æ¶ˆæ¯å¾ªç¯é˜Ÿåˆ—ã€‚ActivityThreadæ‰€åœ¨çº¿ç¨‹è¢«ç§°ä¸ºåº”ç”¨çš„ä¸»çº¿ç¨‹ï¼ˆUIçº¿ç¨‹ï¼‰ ApplicationThread æ˜¯ActivityThreadçš„å†…éƒ¨ç±»ï¼Œç»§æ‰¿IApplicationThread.Stubï¼Œæ˜¯ä¸€ä¸ªIBinderï¼Œæ˜¯ActiivtyThreadå’ŒAMSé€šä¿¡çš„æ¡¥æ¢ï¼ŒAMSåˆ™é€šè¿‡ä»£ç†è°ƒç”¨æ­¤Appè¿›ç¨‹çš„æœ¬åœ°æ–¹æ³•ï¼Œè¿è¡Œåœ¨Binderçº¿ç¨‹æ±  H ç»§æ‰¿Handlerï¼Œåœ¨ActivityThreadä¸­åˆå§‹åŒ–ï¼Œå³ä¸»çº¿ç¨‹Handlerï¼Œç”¨äºä¸»çº¿ç¨‹æ‰€æœ‰æ¶ˆæ¯çš„å¤„ç†ã€‚æœ¬ç‰‡ä¸­ä¸»è¦ç”¨äºæŠŠæ¶ˆæ¯ä»Binderçº¿ç¨‹æ± åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ Intrumentation å…·æœ‰è·Ÿè¸ªapplicationåŠactivityç”Ÿå‘½å‘¨æœŸçš„åŠŸèƒ½ï¼Œç”¨äºç›‘æ§appå’Œç³»ç»Ÿçš„äº¤äº’ ActivityManagerService Androidä¸­æœ€æ ¸å¿ƒçš„æœåŠ¡ä¹‹ä¸€ï¼Œè´Ÿè´£ç³»ç»Ÿä¸­å››å¤§ç»„ä»¶çš„å¯åŠ¨ã€åˆ‡æ¢ã€è°ƒåº¦åŠåº”ç”¨è¿›ç¨‹çš„ç®¡ç†å’Œè°ƒåº¦ç­‰å·¥ä½œï¼Œå…¶èŒè´£ä¸æ“ä½œç³»ç»Ÿä¸­çš„è¿›ç¨‹ç®¡ç†å’Œè°ƒåº¦æ¨¡å—ç›¸ç±»ä¼¼ï¼Œå› æ­¤å®ƒåœ¨Androidä¸­éå¸¸é‡è¦ï¼Œå®ƒæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªBinderçš„å®ç°ç±»ã€‚ ActivityTaskManagerService ç®¡ç†activityåŠå…¶å®¹å™¨ï¼ˆtask, stacks, displaysï¼‰çš„ç³»ç»ŸæœåŠ¡ï¼ˆAndroid10ä¸­æ–°å¢ï¼Œåˆ†æ‹…äº†AMSçš„éƒ¨åˆ†èŒè´£ï¼‰ ActivityStarter ç”¨äºè§£é‡Šå¦‚ä½•å¯åŠ¨æ´»åŠ¨ã€‚è¯¥ç±»æ”¶é›†æ‰€æœ‰é€»è¾‘ï¼Œç”¨äºç¡®å®šIntentå’Œflagåº”å¦‚ä½•è½¬æ¢ä¸ºæ´»åŠ¨ä»¥åŠç›¸å…³çš„ä»»åŠ¡å’Œå †æ ˆ ActivityStack ç”¨æ¥ç®¡ç†ç³»ç»Ÿæ‰€æœ‰çš„Activityï¼Œå†…éƒ¨ç»´æŠ¤äº†Activityçš„æ‰€æœ‰çŠ¶æ€å’ŒActivityç›¸å…³çš„åˆ—è¡¨ç­‰æ•°æ® ActivityStackSupervisor è´Ÿè´£æ‰€æœ‰Activityæ ˆçš„ç®¡ç†ã€‚AMSçš„stackç®¡ç†ä¸»è¦æœ‰ä¸‰ä¸ªç±»ï¼ŒActivityStackSupervisorï¼ŒActivityStackå’ŒTaskRecord ClientLifecycleManager å®¢æˆ·ç«¯ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œè¯·æ±‚ç®¡ç† ClientTransaction æ˜¯åŒ…å«ä¸€ç³»åˆ—çš„ å¾…å®¢æˆ·ç«¯å¤„ç†çš„äº‹åŠ¡ çš„å®¹å™¨ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åå–å‡ºäº‹åŠ¡å¹¶æ‰§è¡Œ LaunchActivityItemã€ResumeActivityItem ç»§æ‰¿ClientTransactionItemï¼Œå®¢æˆ·ç«¯è¦æ‰§è¡Œçš„äº‹åŠ¡ä¿¡æ¯ï¼Œå¯åŠ¨activity å‚è€ƒ https://juejin.cn/post/6847902222294990862 ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"è‡ªå®šä¹‰View","date":"2022-03-08T02:25:29.620Z","path":"wiki/Android/UI/è‡ªå®šä¹‰View/","text":"ç›®å½•è‡ªå®šä¹‰Viewè‡ªå®šä¹‰Viewä¹‹Canvasè‡ªå®šä¹‰Viewä¹‹Paint æ¦‚è¿°è‡ªå®šä¹‰å±æ€§å£°æ˜å±æ€§ä½¿ç”¨declare-styleableå£°æ˜å±æ€§ 1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;resources&gt; &lt;attr name=&quot;enableOnPad&quot; format=&quot;boolean&quot; /&gt; &lt;attr name=&quot;supportDeviceType&quot; format=&quot;reference&quot;/&gt; &lt;!-- å¦‚æœæœ‰é€šç”¨çš„å±æ€§ï¼Œå¯ä»¥æŠ½ç¦»å‡ºæ¥ --&gt; &lt;declare-styleable name=&quot;ExTextView&quot;&gt; &lt;attr name=&quot;enableOnPad&quot;/&gt; &lt;attr name=&quot;supportDeviceType&quot;/&gt; &lt;/declare-styleable&gt; &lt;declare-styleable name=&quot;ExEditText&quot;&gt; &lt;attr name=&quot;enableOnPad&quot;/&gt; &lt;attr name=&quot;supportDeviceType&quot;/&gt; &lt;attr name=&quot;line_color&quot; format=&quot;color&quot; /&gt; &lt;attr name=&quot;line_stroke_height&quot; format=&quot;dimension&quot;/&gt; &lt;/declare-styleable&gt;&lt;/resources&gt; ä½¿ç”¨å±æ€§12345678910111213141516171819202122232425262728xmlä¸­ä½¿ç”¨å±æ€§&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; //è‡ªåŠ¨æŸ¥æ‰¾ xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:orientation=&quot;vertical&quot;&gt; &lt;CustomView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;60dp&quot; app:line_color=&quot;&quot; /&gt;&lt;/RelativeLayout&gt;public class CustomView extends View &#123; public DottedLineView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); // æ ¹æ®Styleæ‹¿åˆ°TypedArray TypedArray array = getContext().obtainStyledAttributes(attrs, R.styleable.ExEditText); mLineColor = array.getColor(R.styleable.ExEditText_line_color, getResources().getColor(R.color.Red)); mLineStrokeHeight = array.getDimension(R.styleable.ExEditText_line_stroke_height, dp2px(getContext(), 1)); array.recycle(); &#125;&#125; éœ€è¦æ³¨æ„çš„ç‚¹è®©Viewæ”¯æŒwrap_contentè¿™æ˜¯å› ä¸ºç›´æ¥ç»§æ‰¿Viewæˆ–è€…ViewGroupçš„æ§ä»¶ï¼Œå¦‚æœä¸åœ¨onMeasureä¸­å¯¹wrap_contentåšç‰¹æ®Šå¤„ç†ï¼Œé‚£ä¹ˆå½“å¤–ç•Œåœ¨å¸ƒå±€ä¸­ä½¿ç”¨wrap_contentæ—¶å°±æ— æ³•è¾¾åˆ°é¢„æœŸçš„æ•ˆæœ å¦‚æœæœ‰å¿…è¦ï¼Œè®©ä½ çš„Viewæ”¯æŒpaddingè¿™æ˜¯å› ä¸ºç›´æ¥ç»§æ‰¿Viewçš„æ§ä»¶ï¼Œå¦‚æœä¸åœ¨drawæ–¹æ³•ä¸­å¤„ç†paddingï¼Œé‚£ä¹ˆpaddingå±æ€§æ˜¯æ— æ³•èµ·ä½œç”¨çš„ã€‚å¦å¤–ï¼Œç›´æ¥ç»§æ‰¿è‡ªViewGroupçš„æ§ä»¶éœ€è¦åœ¨onMeasureå’ŒonLayoutä¸­è€ƒè™‘paddingå’Œå­å…ƒç´ çš„marginå¯¹å…¶é€ æˆçš„å½±å“ï¼Œä¸ç„¶å°†å¯¼è‡´paddingå’Œå­å…ƒç´ çš„marginå¤±æ•ˆã€‚ å°½é‡ä¸è¦åœ¨Viewä¸­ä½¿ç”¨Handlerï¼Œæ²¡å¿…è¦è¿™æ˜¯å› ä¸ºViewå†…éƒ¨æœ¬èº«å°±æä¾›äº†postç³»åˆ—çš„æ–¹æ³•ï¼Œå®Œå…¨å¯ä»¥æ›¿ä»£Handlerçš„ä½œç”¨ï¼Œå½“ç„¶é™¤éä½ å¾ˆæ˜ç¡®åœ°è¦ä½¿ç”¨Handleræ¥å‘é€æ¶ˆæ¯ã€‚ Viewä¸­å¦‚æœæœ‰çº¿ç¨‹æˆ–è€…åŠ¨ç”»ï¼Œéœ€è¦åŠæ—¶åœæ­¢ï¼Œå‚è€ƒView#onDetachedFromWindowå¦‚æœæœ‰çº¿ç¨‹æˆ–è€…åŠ¨ç”»éœ€è¦åœæ­¢æ—¶ï¼Œé‚£ä¹ˆonDetachedFromWindowæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ—¶æœºã€‚å½“åŒ…å«æ­¤Viewçš„Activityé€€å‡ºæˆ–è€…å½“å‰Viewè¢«removeæ—¶ï¼ŒViewçš„ onDetachedFromWindowæ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå’Œæ­¤æ–¹æ³•å¯¹åº”çš„æ˜¯onAttachedToWindowï¼Œå½“åŒ…å«æ­¤Viewçš„Activityå¯åŠ¨æ—¶ï¼ŒViewçš„onAttachedToWindowæ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚åŒæ—¶ï¼Œå½“Viewå˜å¾—ä¸å¯è§æ—¶æˆ‘ä»¬ä¹Ÿéœ€è¦åœæ­¢çº¿ç¨‹å’ŒåŠ¨ç”»ï¼Œå¦‚æœä¸åŠæ—¶å¤„ç†è¿™ç§é—®é¢˜ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚ Viewå¸¦æœ‰æ»‘åŠ¨åµŒå¥—æƒ…å½¢æ—¶ï¼Œéœ€è¦å¤„ç†å¥½æ»‘åŠ¨å†²çªå‚è€ƒ ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹ è‡ªå®šä¹‰æ§ä»¶è¿›é˜¶:declare-styleableé‡ç”¨attr","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"è‡ªå®šä¹‰Viewä¹‹Canvas","date":"2022-03-08T02:25:29.620Z","path":"wiki/Android/UI/è‡ªå®šä¹‰Viewä¹‹Canvas/","text":"ç›®å½•è‡ªå®šä¹‰Viewè‡ªå®šä¹‰Viewä¹‹Canvasè‡ªå®šä¹‰Viewä¹‹Paint APIé¢œè‰²å¡«å……1234canvas.drawColor(Color.BLACK);canvas.drawColor(Color.parse(&quot;#88880000&quot;); // åŠé€æ˜çº¢è‰²canvas.drawRGB(100, 200, 100);canvas.drawARGB(100, 100, 200, 100); ç”»åœ†12345678/**å‰ä¸¤ä¸ªå‚æ•° centerX centerY æ˜¯åœ†å¿ƒçš„åæ ‡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•° radius æ˜¯åœ†çš„åŠå¾„ï¼Œå•ä½éƒ½æ˜¯åƒç´ */drawCircle(float centerX, float centerY, float radius, Paint paint) canvas.drawCircle(300, 300, 200, paint); ç”»çŸ©å½¢12345paint.setStyle(Style.FILL);canvas.drawRect(100, 100, 500, 500, paint);paint.setStyle(Style.STROKE);canvas.drawRect(700, 100, 1100, 500, paint); ç”»ç‚¹12345678910111213141516171819202122/**x å’Œ y æ˜¯ç‚¹çš„åæ ‡*/drawPoint(float x, float y, Paint paint)paint.setStrokeWidth(20);paint.setStrokeCap(Paint.Cap.ROUND);canvas.drawPoint(50, 50, paint);/**pts è¿™ä¸ªæ•°ç»„æ˜¯ç‚¹çš„åæ ‡ï¼Œæ¯ä¸¤ä¸ªæˆä¸€å¯¹offset è¡¨ç¤ºè·³è¿‡æ•°ç»„çš„å‰å‡ ä¸ªæ•°å†å¼€å§‹è®°åæ ‡ï¼›count è¡¨ç¤ºä¸€å…±è¦ç»˜åˆ¶å‡ ä¸ªç‚¹*/drawPoints(float[] pts, int offset, int count, Paint paint)drawPoints(float[] pts, Paint paint) float points = &#123;0, 0, 50, 50, 50, 100, 100, 50, 100, 100, 150, 50, 150, 100&#125;;// ç»˜åˆ¶å››ä¸ªç‚¹ï¼š(50, 50) (50, 100) (100, 50) (100, 100)canvas.drawPoints(points, 2 /* è·³è¿‡ä¸¤ä¸ªæ•°ï¼Œå³å‰ä¸¤ä¸ª 0 */, 8 /* ä¸€å…±ç»˜åˆ¶ 8 ä¸ªæ•°ï¼ˆ4 ä¸ªç‚¹ï¼‰*/, paint); ç”»æ¤­åœ†12345/**left, top, right, bottom æ˜¯è¿™ä¸ªæ¤­åœ†çš„å·¦ã€ä¸Šã€å³ã€ä¸‹å››ä¸ªè¾¹ç•Œç‚¹çš„åæ ‡ã€‚*/drawOval(float left, float top, float right, float bottom, Paint paint) ç”»çº¿1234567891011121314151617/**startX, startY, stopX, stopY åˆ†åˆ«æ˜¯çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹åæ ‡ã€‚*/drawLine(float startX, float startY, float stopX, float stopY, Paint paint) canvas.drawLine(200, 200, 800, 500, paint);/**æ‰¹é‡ç”»çº¿*/drawLines(float[] pts, int offset, int count, Paint paint) drawLines(float[] pts, Paint paint)float points = &#123;20, 20, 120, 20, 70, 20, 70, 120, 20, 120, 120, 120, 150, 20, 250, 20, 150, 20, 150, 120, 250, 20, 250, 120, 150, 120, 250, 120&#125;;canvas.drawLines(points, paint); ç”»åœ†è§’çŸ©å½¢12345678/**left, top, right, bottom æ˜¯å››æ¡è¾¹çš„åæ ‡ï¼Œrx å’Œ ry æ˜¯åœ†è§’çš„æ¨ªå‘åŠå¾„å’Œçºµå‘åŠå¾„ã€‚*/drawRoundRect(float left, float top, float right, float bottom, float rx, float ry, Paint paint)canvas.drawRoundRect(100, 100, 500, 300, 50, 50, paint); å¼§å½¢æˆ–æ‰‡å½¢12345678910111213141516/**drawArc() æ˜¯ä½¿ç”¨ä¸€ä¸ªæ¤­åœ†æ¥æè¿°å¼§å½¢çš„ã€‚left, top, right, bottom æè¿°çš„æ˜¯è¿™ä¸ªå¼§å½¢æ‰€åœ¨çš„æ¤­åœ†ï¼›startAngle æ˜¯å¼§å½¢çš„èµ·å§‹è§’åº¦ï¼ˆx è½´çš„æ­£å‘ï¼Œå³æ­£å³çš„æ–¹å‘ï¼Œæ˜¯ 0 åº¦çš„ä½ç½®ï¼›é¡ºæ—¶é’ˆä¸ºæ­£è§’åº¦ï¼Œé€†æ—¶é’ˆä¸ºè´Ÿè§’åº¦ï¼‰ï¼ŒsweepAngle æ˜¯å¼§å½¢åˆ’è¿‡çš„è§’åº¦ï¼›useCenter è¡¨ç¤ºæ˜¯å¦è¿æ¥åˆ°åœ†å¿ƒï¼Œå¦‚æœä¸è¿æ¥åˆ°åœ†å¿ƒï¼Œå°±æ˜¯å¼§å½¢ï¼Œå¦‚æœè¿æ¥åˆ°åœ†å¿ƒï¼Œå°±æ˜¯æ‰‡å½¢ã€‚*/drawArc(float left, float top, float right, float bottom, float startAngle, float sweepAngle, boolean useCenter, Paint paint) paint.setStyle(Paint.Style.FILL); // å¡«å……æ¨¡å¼canvas.drawArc(200, 100, 800, 500, -110, 100, true, paint); // ç»˜åˆ¶æ‰‡å½¢canvas.drawArc(200, 100, 800, 500, 20, 140, false, paint); // ç»˜åˆ¶å¼§å½¢paint.setStyle(Paint.Style.STROKE); // ç”»çº¿æ¨¡å¼canvas.drawArc(200, 100, 800, 500, 180, 60, false, paint); // ç»˜åˆ¶ä¸å°å£çš„å¼§å½¢ ç”»è‡ªå®šä¹‰å›¾å½¢123456drawPath(Path path, Paint paint) ç”» Bitmap123drawBitmap(Bitmap bitmap, float left, float top, Paint paint) ç»˜åˆ¶æ–‡å­— drawText() drawTextRun() drawTextOnPath() 1234drawText(String text, float x, float y, Paint paint)canvas.drawText(text, 200, 100, paint); èŒƒå›´è£åˆ‡clipRect1234canvas.save();canvas.clipRect(left, top, right, bottom);canvas.drawBitmap(bitmap, x, y, paint);canvas.restore(); clipPath12345canvas.save();canvas.clipPath(path1);canvas.drawBitmap(bitmap, point1.x, point1.y, paint);canvas.restore(); å‡ ä½•å˜æ¢ ä½¿ç”¨ Canvas æ¥åšå¸¸è§çš„äºŒç»´å˜æ¢ï¼› ä½¿ç”¨ Matrix æ¥åšå¸¸è§å’Œä¸å¸¸è§çš„äºŒç»´å˜æ¢ï¼› ä½¿ç”¨ Camera æ¥åšä¸‰ç»´å˜æ¢ã€‚ CanvasäºŒç»´å˜æ¢12345678910111213141516171819202122232425//translateå¹³ç§»canvas.save();canvas.translate(200, 0);canvas.drawBitmap(bitmap, x, y, paint);canvas.restore();//æ—‹è½¬canvas.save();canvas.rotate(45, centerX, centerY);canvas.drawBitmap(bitmap, x, y, paint);canvas.restore();//ç¼©æ”¾canvas.save();canvas.scale(1.3f, 1.3f, x + bitmapWidth / 2, y + bitmapHeight / 2);canvas.drawBitmap(bitmap, x, y, paint);canvas.restore();//é”™åˆ‡canvas.save();canvas.skew(0, 0.5f);canvas.drawBitmap(bitmap, x, y, paint);canvas.restore(); MatrixäºŒç»´å˜æ¢Matrix åšå¸¸è§å˜æ¢çš„æ–¹å¼ï¼š åˆ›å»º Matrix å¯¹è±¡ï¼› è°ƒç”¨ Matrix çš„ pre&#x2F;postTranslate&#x2F;Rotate&#x2F;Scale&#x2F;Skew() æ–¹æ³•æ¥è®¾ç½®å‡ ä½•å˜æ¢ï¼› ä½¿ç”¨ Canvas.setMatrix(matrix) æˆ– Canvas.concat(matrix) æ¥æŠŠå‡ ä½•å˜æ¢åº”ç”¨åˆ° Canvasã€‚ 1234567891011121314Matrix matrix = new Matrix();...matrix.reset();matrix.postTranslate();matrix.postRotate();canvas.save();canvas.concat(matrix);canvas.drawBitmap(bitmap, x, y, paint);canvas.restore(); Cameraä¸‰ç»´å˜æ¢123456789canvas.save();camera.save(); // ä¿å­˜ Camera çš„çŠ¶æ€camera.rotateX(30); // æ—‹è½¬ Camera çš„ä¸‰ç»´ç©ºé—´camera.applyToCanvas(canvas); // æŠŠæ—‹è½¬æŠ•å½±åˆ° Canvascamera.restore(); // æ¢å¤ Camera çš„çŠ¶æ€canvas.drawBitmap(bitmap, point1.x, point1.y, paint);canvas.restore(); å‚è€ƒ https://rengwuxian.com/ui-1-1/ https://rengwuxian.com/ui-1-4/","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"è‡ªå®šä¹‰Viewä¹‹Paint","date":"2022-03-08T02:25:29.620Z","path":"wiki/Android/UI/è‡ªå®šä¹‰Viewä¹‹Paint/","text":"ç›®å½•è‡ªå®šä¹‰Viewè‡ªå®šä¹‰Viewä¹‹Canvasè‡ªå®šä¹‰Viewä¹‹Paint APIé¢œè‰²è®¾ç½®123456789101112setColor(int color)paint.setColor(Color.parseColor(&quot;#009688&quot;));canvas.drawRect(30, 30, 230, 180, paint);setARGB(int a, int r, int g, int b)paint.setARGB(100, 255, 0, 0);canvas.drawRect(0, 0, 200, 200, paint); Shaderè®¾ç½®åœ¨ Android çš„ç»˜åˆ¶é‡Œä½¿ç”¨ Shader ï¼Œå¹¶ä¸ç›´æ¥ç”¨ Shader è¿™ä¸ªç±»ï¼Œè€Œæ˜¯ç”¨å®ƒçš„å‡ ä¸ªå­ç±»ã€‚å…·ä½“æ¥è®²æœ‰ï¼š LinearGradientï¼šçº¿æ€§æ¸å˜ RadialGradientï¼šè¾å°„æ¸å˜ SweepGradientï¼šæ‰«ææ¸å˜ BitmapShader ComposeShaderï¼šæ··åˆç€è‰²å™¨ åœ¨è®¾ç½®äº† Shader çš„æƒ…å†µä¸‹ï¼Œ Paint.setColor&#x2F;ARGB() æ‰€è®¾ç½®çš„é¢œè‰²å°±ä¸å†èµ·ä½œç”¨ã€‚ 1234567891011121314151617181920212223242526272829Shader shader = new LinearGradient(100, 100, 500, 500, Color.parseColor(&quot;#E91E63&quot;), Color.parseColor(&quot;#2196F3&quot;), Shader.TileMode.CLAMP);paint.setShader(shader);...canvas.drawCircle(300, 300, 200, paint);Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.batman);Shader shader = new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);paint.setShader(shader);...canvas.drawCircle(300, 300, 200, paint);// ç¬¬ä¸€ä¸ª Shaderï¼šå¤´åƒçš„ BitmapBitmap bitmap1 = BitmapFactory.decodeResource(getResources(), R.drawable.batman);Shader shader1 = new BitmapShader(bitmap1, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);// ç¬¬äºŒä¸ª Shaderï¼šä»ä¸Šåˆ°ä¸‹çš„çº¿æ€§æ¸å˜ï¼ˆç”±é€æ˜åˆ°é»‘è‰²ï¼‰Bitmap bitmap2 = BitmapFactory.decodeResource(getResources(), R.drawable.batman_logo);Shader shader2 = new BitmapShader(bitmap2, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);// ComposeShaderï¼šç»“åˆä¸¤ä¸ª ShaderShader shader = new ComposeShader(shader1, shader2, PorterDuff.Mode.SRC_OVER);paint.setShader(shader);...canvas.drawCircle(300, 300, 300, paint); PorterDuff.Mode æ˜¯ç”¨æ¥æŒ‡å®šä¸¤ä¸ªå›¾åƒå…±åŒç»˜åˆ¶æ—¶çš„é¢œè‰²ç­–ç•¥çš„ã€‚å®ƒæ˜¯ä¸€ä¸ª enumï¼Œä¸åŒçš„ Mode å¯ä»¥æŒ‡å®šä¸åŒçš„ç­–ç•¥ã€‚å‚è€ƒï¼š https://developer.android.com/reference/android/graphics/PorterDuff.Mode.html é¢œè‰²æ»¤é•œ ColorFilter LightingColorFilter PorterDuffColorFilter ColorMatrixColorFilter 12345678setColorFilter(ColorFilter colorFilter)ColorFilter lightingColorFilter = new LightingColorFilter(0x00ffff, 0x000000);paint.setColorFilter(lightingColorFilter); setXfermode1 è®¾ç½®æŠ—é”¯é½¿æŠ—é”¯é½¿é»˜è®¤æ˜¯å…³é—­çš„ï¼Œå¦‚æœéœ€è¦æŠ—é”¯é½¿ï¼Œéœ€è¦æ˜¾å¼åœ°æ‰“å¼€ã€‚å¦å¤–ï¼Œé™¤äº† setAntiAlias(aa) æ–¹æ³•ï¼Œæ‰“å¼€æŠ—é”¯é½¿è¿˜æœ‰ä¸€ä¸ªæ›´æ–¹ä¾¿çš„æ–¹å¼ï¼šæ„é€ æ–¹æ³•ã€‚åˆ›å»º Paint å¯¹è±¡çš„æ—¶å€™ï¼Œæ„é€ æ–¹æ³•çš„å‚æ•°é‡ŒåŠ ä¸€ä¸ª ANTI_ALIAS_FLAG çš„ flagï¼Œå°±å¯ä»¥åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±å¼€å¯æŠ—é”¯é½¿ã€‚ 12345setAntiAlias (boolean aa)Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG); setStyle1234567paint.setStyle(Paint.Style.FILL); // FILL æ¨¡å¼ï¼Œå¡«å……canvas.drawCircle(300, 300, 200, paint);paint.setStyle(Paint.Style.STROKE); // STROKE æ¨¡å¼ï¼Œç”»çº¿canvas.drawCircle(300, 300, 200, paint); çº¿æ¡å½¢çŠ¶ setStrokeWidth(float width) setStrokeCap(Paint.Cap cap) setStrokeJoin(Paint.Join join) setStrokeMiter(float miter) 1234567paint.setStyle(Paint.Style.STROKE);paint.setStrokeWidth(1);canvas.drawCircle(150, 125, 100, paint);paint.setStrokeWidth(5);canvas.drawCircle(400, 125, 100, paint);paint.setStrokeWidth(40);canvas.drawCircle(650, 125, 100, paint); setStrokeCapçº¿å¤´å½¢çŠ¶æœ‰ä¸‰ç§ï¼š BUTT å¹³å¤´ï¼ˆé»˜è®¤ï¼‰ ROUND åœ†å¤´ SQUARE æ–¹å¤´ã€‚ 1 setStrokeJoin MITER å°–è§’ BEVEL å¹³è§’ ROUND åœ†è§’ã€‚ setStrokeMiterè¿™ä¸ªæ–¹æ³•æ˜¯å¯¹äº setStrokeJoin() çš„ä¸€ä¸ªè¡¥å……ï¼Œå®ƒç”¨äºè®¾ç½® MITER å‹æ‹è§’çš„å»¶é•¿çº¿çš„æœ€å¤§å€¼ã€‚ è‰²å½©ä¼˜åŒ–123456789//è®¾ç½®å›¾åƒçš„æŠ–åŠ¨setDither(boolean dither)//è®¾ç½®æ˜¯å¦ä½¿ç”¨åŒçº¿æ€§è¿‡æ»¤æ¥ç»˜åˆ¶ Bitmap setFilterBitmap(boolean filter) setPathEffectä½¿ç”¨ PathEffect æ¥ç»™å›¾å½¢çš„è½®å»“è®¾ç½®æ•ˆæœã€‚å¯¹ Canvas æ‰€æœ‰çš„å›¾å½¢ç»˜åˆ¶æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯ drawLine() drawCircle() drawPath() è¿™äº›æ–¹æ³•ã€‚ CornerPathEffectæŠŠæ‰€æœ‰æ‹è§’å˜æˆåœ†è§’ 1234PathEffect pathEffect = new CornerPathEffect(20);paint.setPathEffect(pathEffect);...canvas.drawPath(path, paint); DiscretePathEffectæŠŠçº¿æ¡è¿›è¡Œéšæœºçš„åç¦»ï¼Œè®©è½®å»“å˜å¾—ä¹±ä¸ƒå…«ç³Ÿã€‚ä¹±ä¸ƒå…«ç³Ÿçš„æ–¹å¼å’Œç¨‹åº¦ç”±å‚æ•°å†³å®šã€‚ 12345PathEffect pathEffect = new DiscretePathEffect(20, 5);paint.setPathEffect(pathEffect);...canvas.drawPath(path, paint); ç»˜åˆ¶è™šçº¿123456789101112131415//ä½¿ç”¨è™šçº¿æ¥ç»˜åˆ¶çº¿æ¡ã€‚PathEffect pathEffect = new DashPathEffect(new float[]&#123;20, 10, 5, 10&#125;, 0);paint.setPathEffect(pathEffect);...canvas.drawPath(path, paint);Path dashPath = ...; // ä½¿ç”¨ä¸€ä¸ªä¸‰è§’å½¢æ¥åš dashPathEffect pathEffect = new PathDashPathEffect(dashPath, 40, 0, PathDashPathEffectStyle.TRANSLATE);paint.setPathEffect(pathEffect);...canvas.drawPath(path, paint); SumPathEffect123456PathEffect dashEffect = new DashPathEffect(new float[]&#123;20, 10&#125;, 0);PathEffect discreteEffect = new DiscretePathEffect(20, 5); pathEffect = new SumPathEffect(dashEffect, discreteEffect);...canvas.drawPath(path, paint); ComposePathEffectsetShadowLayeråœ¨ä¹‹åçš„ç»˜åˆ¶å†…å®¹ä¸‹é¢åŠ ä¸€å±‚é˜´å½± 123paint.setShadowLayer(10, 0, 0, Color.RED);...canvas.drawText(text, 80, 300, paint); setMaskFilterä¸ºä¹‹åçš„ç»˜åˆ¶è®¾ç½® MaskFilterã€‚ä¸Šä¸€ä¸ªæ–¹æ³• setShadowLayer() æ˜¯è®¾ç½®çš„åœ¨ç»˜åˆ¶å±‚ä¸‹æ–¹çš„é™„åŠ æ•ˆæœï¼›è€Œè¿™ä¸ª MaskFilter å’Œå®ƒç›¸åï¼Œè®¾ç½®çš„æ˜¯åœ¨ç»˜åˆ¶å±‚ä¸Šæ–¹çš„é™„åŠ æ•ˆæœã€‚ MaskFilter æœ‰ä¸¤ç§ï¼š BlurMaskFilter å’Œ EmbossMaskFilter 123paint.setMaskFilter(new BlurMaskFilter(50, BlurMaskFilter.Blur.NORMAL));...canvas.drawBitmap(bitmap, 100, 100, paint); æ–‡å­—ç›¸å…³setTextSizeè®¾ç½®å­—ä½“å¤§å° setTypefaceè®¾ç½®å­—ä½“ setFakeBoldTextæ˜¯å¦ä½¿ç”¨ä¼ªç²—ä½“ setStrikeThruTextæ˜¯å¦åŠ åˆ é™¤çº¿ setUnderlineTextæ˜¯å¦åŠ ä¸‹åˆ’çº¿ setTextSkewXè®¾ç½®æ–‡å­—æ¨ªå‘é”™åˆ‡è§’åº¦ setTextScaleXè®¾ç½®æ–‡å­—æ¨ªå‘æ”¾ç¼© setLetterSpacingè®¾ç½®å­—ç¬¦é—´è· setFontFeatureSettingsç”¨ CSS çš„ font-feature-settings çš„æ–¹å¼æ¥è®¾ç½®æ–‡å­— 1234paint.setFontFeatureSettings(&quot;smcp&quot;); // è®¾ç½® &quot;small caps&quot;canvas.drawText(&quot;Hello HenCoder&quot;, 100, 150, paint); setTextAlignè®¾ç½®æ–‡å­—çš„å¯¹é½æ–¹å¼ã€‚ä¸€å…±æœ‰ä¸‰ä¸ªå€¼ï¼šLEFT CETNER å’Œ RIGHTã€‚é»˜è®¤å€¼ä¸º LEFTã€‚ setTextLocaleè®¾ç½®ç»˜åˆ¶æ‰€ä½¿ç”¨çš„ Locale setHintingè®¾ç½®æ˜¯å¦å¯ç”¨å­—ä½“çš„ hinting ï¼ˆå­—ä½“å¾®è°ƒï¼‰ getFontSpacingè·å–æ¨èçš„è¡Œè· getTextBoundsè·å–æ–‡å­—çš„æ˜¾ç¤ºèŒƒå›´ measureTextæµ‹é‡æ–‡å­—çš„å®½åº¦å¹¶è¿”å› getTextWidthsgetTextWidths(String text, float[] widths) è·å–å­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦çš„å®½åº¦ï¼Œå¹¶æŠŠç»“æœå¡«å…¥å‚æ•° widths breakTextä¹Ÿæ˜¯ç”¨æ¥æµ‹é‡æ–‡å­—å®½åº¦çš„ã€‚ä½†å’Œ measureText() çš„åŒºåˆ«æ˜¯ï¼Œ breakText() æ˜¯åœ¨ç»™å‡ºå®½åº¦ä¸Šé™çš„å‰æä¸‹æµ‹é‡æ–‡å­—çš„å®½åº¦ã€‚å¦‚æœæ–‡å­—çš„å®½åº¦è¶…å‡ºäº†ä¸Šé™ï¼Œé‚£ä¹ˆåœ¨ä¸´è¿‘è¶…é™çš„ä½ç½®æˆªæ–­æ–‡å­—ã€‚ å…‰æ ‡ç›¸å…³getRunAdvance1234/**start end æ˜¯æ–‡å­—çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼›contextStart contextEnd æ˜¯ä¸Šä¸‹æ–‡çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼›isRtl æ˜¯æ–‡å­—çš„æ–¹å‘ï¼›offset æ˜¯å­—æ•°çš„åç§»ï¼Œå³è®¡ç®—ç¬¬å‡ ä¸ªå­—ç¬¦å¤„çš„å…‰æ ‡ã€‚*/getRunAdvance(CharSequence text, int start, int end, int contextStart, int contextEnd, boolean isRtl, int offset) getOffsetForAdvanceç»™å‡ºä¸€ä¸ªä½ç½®çš„åƒç´ å€¼ï¼Œè®¡ç®—å‡ºæ–‡å­—ä¸­æœ€æ¥è¿‘è¿™ä¸ªä½ç½®çš„å­—ç¬¦åç§»é‡ï¼ˆå³ç¬¬å‡ ä¸ªå­—ç¬¦æœ€æ¥è¿‘è¿™ä¸ªåæ ‡ï¼‰ã€‚ 123456789/**text æ˜¯è¦æµ‹é‡çš„æ–‡å­—ï¼›start end æ˜¯æ–‡å­—çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼›contextStart contextEnd æ˜¯ä¸Šä¸‹æ–‡çš„èµ·å§‹å’Œç»“æŸåæ ‡ï¼›isRtl æ˜¯æ–‡å­—æ–¹å‘ï¼›advance æ˜¯ç»™å‡ºçš„ä½ç½®çš„åƒç´ å€¼ã€‚å¡«å…¥å‚æ•°ï¼Œå¯¹åº”çš„å­—ç¬¦åç§»é‡å°†ä½œä¸ºè¿”å›å€¼è¿”å›ã€‚*/getOffsetForAdvance(CharSequence text, int start, int end, int contextStart, int contextEnd, boolean isRtl, float advance) å‚è€ƒ https://rengwuxian.com/ui-1-2/ https://rengwuxian.com/ui-1-3/","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥","date":"2022-03-08T02:25:29.619Z","path":"wiki/Android/UI/RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥/","text":"ç›®å½• RecyclerViewä¹‹æ¦‚è¿° RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹ RecyclerViewä¹‹Adapter RecyclerViewä¹‹ItemDecoration RecyclerViewä¹‹ItemAnimator RecyclerViewä¹‹DiffUtil RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥ æ¦‚è¿°Recycler12345678910111213141516171819202122232425262728293031323334353637383940public final class Recycler &#123; // æœªä¸RecyclerViewåˆ†ç¦»çš„ViewHolderåˆ—è¡¨ // å¦‚æœä»ä¾èµ–äº RecyclerView ï¼ˆæ¯”å¦‚å·²ç»æ»‘åŠ¨å‡ºå¯è§†èŒƒå›´ï¼Œä½†è¿˜æ²¡æœ‰è¢«ç§»é™¤æ‰ï¼‰ï¼Œä½†å·²ç»è¢«æ ‡è®°ç§»é™¤çš„ ItemView é›†åˆä¼šè¢«æ·»åŠ åˆ° mAttachedScrap ä¸­ final ArrayList&lt;ViewHolder&gt; mAttachedScrap = new ArrayList&lt;&gt;(); ArrayList&lt;ViewHolder&gt; mChangedScrap = null; final ArrayList&lt;ViewHolder&gt; mCachedViews = new ArrayList&lt;ViewHolder&gt;(); private final List&lt;ViewHolder&gt; mUnmodifiableAttachedScrap = Collections.unmodifiableList(mAttachedScrap); private int mRequestedCacheMax = DEFAULT_CACHE_SIZE; int mViewCacheMax = DEFAULT_CACHE_SIZE; // ç¼“å­˜æ± ï¼Œä¸šåŠ¡åœºæ™¯ä¸­å¯å¤ç”¨çš„ViewHolderå¯ä»¥å­˜å‚¨è¿›æ¥ RecycledViewPool mRecyclerPool; private ViewCacheExtension mViewCacheExtension; static final int DEFAULT_CACHE_SIZE = 2; // å°†viewå¯¹åº”çš„ViewHolderç§»åŠ¨åˆ°mCachedViewsä¸­ï¼›å¦‚æœViewæ˜¯scrappedçŠ¶æ€ï¼Œä¼šå…ˆunscrap public void recycleView(@NonNull View view) &#123;&#125; // ä»mChangedScrapã€mAttachedScrapã€mCachedViewsã€ViewCacheExtensionã€RecycledViewPoolä¸­è¿›è¡ŒåŒ¹é…ï¼›è‹¥åŒ¹é…ä¸äº†ï¼Œ // æœ€åä¼šç›´æ¥è°ƒç”¨Adapter.createViewHolderæ–¹æ³•è¿›è¡Œåˆ›å»º ViewHolder tryGetViewHolderForPositionByDeadline(int position, boolean dryRun, long deadlineNs) &#123; &#125; //ä» attach scrapã€hidden children ã€ cacheä¸­ï¼Œæ ¹æ® position è¿”å› ViewHolder ViewHolder getScrapOrHiddenOrCachedHolderForPosition(int position, boolean dryRun) &#123; &#125;&#125; ç¼“å­˜ç±»å‹ mAttachedScrapã€mChangedScrap mAttachedScrapä¿å­˜ä¾é™„äº RecyclerView çš„ ViewHolderã€‚åŒ…å«ç§»å‡ºå±å¹•ä½†æœªä» RecyclerView ç§»é™¤çš„ ViewHolderã€‚ mChangedScrap ä¿å­˜æ•°æ®å‘ç”Ÿæ”¹å˜çš„ ViewHolderï¼Œå³è°ƒç”¨ notifyDataSetChanged() ç­‰ç³»åˆ—æ–¹æ³•åéœ€è¦æ›´æ–°çš„ ViewHolderã€‚ mCachedViews mCachedViews ç”¨äºè§£å†³æ»‘åŠ¨æŠ–åŠ¨çš„é—®é¢˜ï¼Œé»˜è®¤å®¹é‡ä¸º2ã€‚ ViewCacheExtension å¼€å‘è€…è‡ªå®šä¹‰çš„ç¼“å­˜ RecyclerViewPool ç¼“å­˜æ± ï¼Œå¯ä»¥åœ¨å¤šä¸ªRecyclerViewä¸­å…±äº«ViewHolderã€‚é€šè¿‡setMaxRecycledViewsè®¾ç½®å¯¹åº”typeçš„ViewHolderçš„ç¼“å­˜æ± å¤§å° è·å–VHæµç¨‹ RecyclerViewPoolç¼“å­˜æ± çš„ç”¨æ³•ï¼š 1234567var linearLayoutManager = LinearLayoutManager(activity)linearLayoutManager.recycleChildrenOnDetach = truerecyclerView.layoutManager = linearLayoutManager//è®¾ç½®ç¼“å­˜å¤§å°recycledViewPool.setMaxRecycledViews(0, 10)//å…±ç”¨ç¼“å­˜æ± recyclerView.setRecycledViewPool(recycledViewPool) å‚è€ƒ https://phantomvk.github.io/2019/02/13/RecyclerView_cache&#x2F;","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹","date":"2022-03-08T02:25:29.618Z","path":"wiki/Android/UI/RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹/","text":"ç›®å½• RecyclerViewä¹‹æ¦‚è¿° RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹ RecyclerViewä¹‹Adapter RecyclerViewä¹‹ItemDecoration RecyclerViewä¹‹ItemAnimator RecyclerViewä¹‹DiffUtil RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥ ç»˜åˆ¶æµç¨‹onMeasureå…ˆæ¦‚æ‹¬ä¸‹onMeasureçš„å¤§è‡´æµç¨‹ï¼š LayoutManagerå¯¹è±¡ä¸ºç©º,RecyclerViewä¸èƒ½æ˜¾ç¤ºä»»ä½•çš„æ•°æ®ã€‚ LayoutManagerå¼€å¯äº†è‡ªåŠ¨æµ‹é‡æ—¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ‰å¯èƒ½ä¼šæµ‹é‡ä¸¤æ¬¡ã€‚ LayoutManageræ²¡æœ‰å¼€å¯è‡ªåŠ¨æµ‹é‡çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µæ¯”è¾ƒå°‘ï¼Œå› ä¸ºä¸ºäº†RecyclerViewæ”¯æŒwarp_contentå±æ€§ï¼Œç³»ç»Ÿæä¾›çš„LayoutManageréƒ½å¼€å¯è‡ªåŠ¨æµ‹é‡çš„ æµ‹é‡çš„çŠ¶æ€ä¿å­˜åœ¨Stateä¸­ï¼Œæœ‰ä»¥ä¸‹å‡ ç§çŠ¶æ€ï¼š å€¼ æè¿° State.STEP_START mState.mLayoutStep çš„é»˜è®¤å€¼ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¡¨ç¤º RecyclerView è¿˜æœªç»å† dispatchLayoutStep1ï¼Œå› ä¸º dispatchLayoutStep1 è°ƒç”¨ä¹‹åmState.mLayoutStep ä¼šå˜ä¸º State.STEP_LAYOUTã€‚ State.STEP_LAYOUT å½“ mState.mLayoutStep ä¸º State.STEP_LAYOUT æ—¶ï¼Œè¡¨ç¤ºæ­¤æ—¶å¤„äº layout é˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µä¼šè°ƒç”¨ dispatchLayoutStep2 æ–¹æ³• layout RecyclerView çš„childrenã€‚è°ƒç”¨ dispatchLayoutStep2 æ–¹æ³•ä¹‹åï¼Œæ­¤æ—¶ mState.mLayoutStep å˜ä¸ºäº† State.STEP_ANIMATIONSã€‚ State.STEP_ANIMATIONS å½“ mState.mLayoutStepä¸º State.STEP_ANIMATIONS æ—¶ï¼Œè¡¨ç¤º RecyclerView å¤„äºç¬¬ä¸‰ä¸ªé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯æ‰§è¡ŒåŠ¨ç”»çš„é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ dispatchLayoutStep3æ–¹æ³•ã€‚å½“ dispatchLayoutStep3 æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åï¼ŒmState.mLayoutStep åˆå˜ä¸ºäº† State.STEP_STARTã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179@Overrideprotected void onMeasure(int widthSpec, int heightSpec) &#123; //å½“å¸ƒå±€ç®¡ç†å™¨ä¸ºç©ºæ—¶ï¼Œè¿›è¡Œé»˜è®¤çš„æµ‹é‡ã€‚RecyclerViewä¸èƒ½æ˜¾ç¤ºä»»ä½•çš„æ•°æ® if (mLayout == null) &#123; defaultOnMeasure(widthSpec, heightSpec); return; &#125; //è‡ªåŠ¨æµ‹é‡ if (mLayout.isAutoMeasureEnabled()) &#123; mLayout.onMeasure(mRecycler, mState, widthSpec, heightSpec); // å¼€å§‹æµ‹é‡ if (mState.mLayoutStep == State.STEP_START) &#123; dispatchLayoutStep1(); &#125; mLayout.setMeasureSpecs(widthSpec, heightSpec); mState.mIsMeasuring = true; //æµ‹é‡çš„ç¬¬äºŒæ­¥ï¼Œæ›´æ–°å­å¸ƒå±€ dispatchLayoutStep2(); //å¦‚æœrclerviewæ²¡æœ‰ç²¾ç¡®çš„å®½åº¦å’Œé«˜åº¦ï¼Œå¹¶ä¸”è‡³å°‘æœ‰ä¸€ä¸ªå­View //å­Viewä¹Ÿæ²¡æœ‰ç²¾ç¡®çš„å®½åº¦å’Œé«˜åº¦ï¼Œæˆ‘ä»¬å¿…é¡»é‡æ–°æµ‹é‡ã€‚ if (mLayout.shouldMeasureTwice()) &#123; mLayout.setMeasureSpecs( MeasureSpec.makeMeasureSpec(getMeasuredWidth(), MeasureSpec.EXACTLY), MeasureSpec.makeMeasureSpec(getMeasuredHeight(), MeasureSpec.EXACTLY)); mState.mIsMeasuring = true; dispatchLayoutStep2(); // now we can get the width and height from the children. mLayout.setMeasuredDimensionFromChildren(widthSpec, heightSpec); &#125; &#125; else &#123; //æ˜¯å¦ä½¿ç”¨å›ºå®šå°ºå¯¸ if (mHasFixedSize) &#123; mLayout.onMeasure(mRecycler, mState, widthSpec, heightSpec); return; &#125; // if (mAdapterUpdateDuringMeasure) &#123; processAdapterUpdatesAndSetAnimationFlags(); &#125; else if (mState.mRunPredictiveAnimations) &#123; setMeasuredDimension(getMeasuredWidth(), getMeasuredHeight()); return; &#125; mLayout.onMeasure(mRecycler, mState, widthSpec, heightSpec); &#125; &#125;/** * - å¤„ç† Adapter æ›´æ–° * - å†³å®šæ‰§è¡Œå“ªä¸€ç§åŠ¨ç”» * - ä¿å­˜æ¯ä¸ª ItemView çš„ä¿¡æ¯ * - æœ‰å¿…è¦çš„è¯ï¼Œä¼šè¿›è¡Œé¢„å¸ƒå±€ï¼Œå¹¶æŠŠç›¸å…³ä¿¡æ¯ä¿å­˜ä¸‹æ¥ */private void dispatchLayoutStep1() &#123; mState.assertLayoutStep(State.STEP_START); fillRemainingScrollValues(mState); mState.mIsMeasuring = false; startInterceptRequestLayout(); mViewInfoStore.clear(); onEnterLayoutOrScroll(); processAdapterUpdatesAndSetAnimationFlags(); saveFocusInfo(); mState.mTrackOldChangeHolders = mState.mRunSimpleAnimations &amp;&amp; mItemsChanged; mItemsAddedOrRemoved = mItemsChanged = false; // æ˜¯å¦é¢„å¸ƒå±€ mState.mInPreLayout = mState.mRunPredictiveAnimations; mState.mItemCount = mAdapter.getItemCount(); findMinMaxChildLayoutPositions(mMinMaxLayoutPositions); if (mState.mRunSimpleAnimations) &#123; // Step 0: Find out where all non-removed items are, pre-layout int count = mChildHelper.getChildCount(); for (int i = 0; i &lt; count; ++i) &#123; //æ ¹æ®å½“å‰çš„æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šçš„ViewHolderçš„å¸ƒå±€ä¿¡æ¯åˆ›å»ºä¸€ä¸ªItemHolderInfo final ViewHolder holder = getChildViewHolderInt(mChildHelper.getChildAt(i)); if (holder.shouldIgnore() || (holder.isInvalid() &amp;&amp; !mAdapter.hasStableIds())) &#123; continue; &#125; // è®°å½•å½“å‰çš„ä½ç½®ä¿¡æ¯ Leftã€Rightã€Topã€Bottomç­‰ final ItemHolderInfo animationInfo = mItemAnimator .recordPreLayoutInformation(mState, holder, ItemAnimator.buildAdapterChangeFlagsForAnimations(holder), holder.getUnmodifiedPayloads()); //æŠŠ holderå¯¹åº”çš„animationInfoä¿å­˜åˆ° mViewInfoStoreä¸­ mViewInfoStore.addToPreLayout(holder, animationInfo); if (mState.mTrackOldChangeHolders &amp;&amp; holder.isUpdated() &amp;&amp; !holder.isRemoved() &amp;&amp; !holder.shouldIgnore() &amp;&amp; !holder.isInvalid()) &#123; long key = getChangedHolderKey(holder); mViewInfoStore.addToOldChangeHolders(key, holder); &#125; &#125; &#125; if (mState.mRunPredictiveAnimations) &#123; saveOldPositions(); final boolean didStructureChange = mState.mStructureChanged; mState.mStructureChanged = false; // temporarily disable flag because we are asking for previous layout //åœ¨layoutmanagerä¸­è¿›è¡Œæµ‹é‡ mLayout.onLayoutChildren(mRecycler, mState); mState.mStructureChanged = didStructureChange; for (int i = 0; i &lt; mChildHelper.getChildCount(); ++i) &#123; final View child = mChildHelper.getChildAt(i); final ViewHolder viewHolder = getChildViewHolderInt(child); if (viewHolder.shouldIgnore()) &#123; continue; &#125; if (!mViewInfoStore.isInPreLayout(viewHolder)) &#123; int flags = ItemAnimator.buildAdapterChangeFlagsForAnimations(viewHolder); boolean wasHidden = viewHolder .hasAnyOfTheFlags(ViewHolder.FLAG_BOUNCED_FROM_HIDDEN_LIST); if (!wasHidden) &#123; flags |= ItemAnimator.FLAG_APPEARED_IN_PRE_LAYOUT; &#125; final ItemHolderInfo animationInfo = mItemAnimator.recordPreLayoutInformation( mState, viewHolder, flags, viewHolder.getUnmodifiedPayloads()); if (wasHidden) &#123; recordAnimationInfoIfBouncedHiddenView(viewHolder, animationInfo); &#125; else &#123; mViewInfoStore.addToAppearedInPreLayoutHolders(viewHolder, animationInfo); &#125; &#125; &#125; // we don&#x27;t process disappearing list because they may re-appear in post layout pass. clearOldPositions(); &#125; else &#123; clearOldPositions(); &#125; onExitLayoutOrScroll(); stopInterceptRequestLayout(false); //è®¾ç½®çŠ¶æ€ mState.mLayoutStep = State.STEP_LAYOUT;&#125; /** * ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬ä¼šçœŸæ­£çš„æµ‹é‡è§†å›¾ã€‚ * è¿™ä¸€æ­¥å¯èƒ½æ‰§è¡Œå¤šæ¬¡ */private void dispatchLayoutStep2() &#123; startInterceptRequestLayout(); onEnterLayoutOrScroll(); mState.assertLayoutStep(State.STEP_LAYOUT | State.STEP_ANIMATIONS); mAdapterHelper.consumeUpdatesInOnePass(); mState.mItemCount = mAdapter.getItemCount();//è¿”å›å…ƒç´ ä¸ªæ•° mState.mDeletedInvisibleItemCountSincePreviousLayout = 0; if (mPendingSavedState != null &amp;&amp; mAdapter.canRestoreState()) &#123; if (mPendingSavedState.mLayoutState != null) &#123; mLayout.onRestoreInstanceState(mPendingSavedState.mLayoutState); &#125; mPendingSavedState = null; &#125; // Step 2: Run layout // æ›´æ”¹æ­¤çŠ¶æ€ï¼Œç¡®ä¿ä¸æ˜¯ä¼šæ‰§è¡Œä¸Šä¸€å¸ƒå±€æ“ä½œ mState.mInPreLayout = false; //LayoutManagerä¸­è¿›è¡Œå­è§†å›¾æµ‹é‡ //å­è§†å›¾çš„æµ‹é‡é€šç”¨å…·ä½“çš„å¸ƒå±€ç®¡ç†å™¨å®ç° mLayout.onLayoutChildren(mRecycler, mState); mState.mStructureChanged = false; // onLayoutChildren may have caused client code to disable item animations; re-check mState.mRunSimpleAnimations = mState.mRunSimpleAnimations &amp;&amp; mItemAnimator != null; //è®¾ç½®çŠ¶æ€ mState.mLayoutStep = State.STEP_ANIMATIONS; onExitLayoutOrScroll(); stopInterceptRequestLayout(false);&#125; æˆ‘ä»¬çœ‹çœ‹LinearLayoutManageræ˜¯å¦‚ä½•æµ‹é‡çš„ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) &#123; //å¸ƒå±€ç®—æ³• // 1)é€šè¿‡æ£€æŸ¥å­å˜é‡å’Œå…¶ä»–å˜é‡ï¼Œæ‰¾åˆ°ä¸€ä¸ªé”šåæ ‡å’Œä¸€ä¸ªé”šç‰©å“çš„ä½ç½®ã€‚ // 2)å¼€å§‹å¡«å……ï¼Œä»åº•éƒ¨å¼€å§‹å †å  // 3)å‘åº•å¡«å……ï¼Œä»ä¸Šå¾€ä¸‹å †å  // 4)ä»åº•éƒ¨æ»šåŠ¨ä»¥æ»¡è¶³å †æ ˆç­‰éœ€æ±‚ã€‚åˆ›å»ºå¸ƒå±€çŠ¶æ€ // è§£å†³å¸ƒå±€æ–¹å‘ resolveShouldLayoutReverse(); final View focused = getFocusedChild(); if (!mAnchorInfo.mValid || mPendingScrollPosition != RecyclerView.NO_POSITION || mPendingSavedState != null) &#123; mAnchorInfo.reset(); mAnchorInfo.mLayoutFromEnd = mShouldReverseLayout ^ mStackFromEnd; // calculate anchor position and coordinate // è®¡ç®—é”šç‚¹ä½ç½®å’Œåæ ‡ updateAnchorInfoForLayout(recycler, state, mAnchorInfo); mAnchorInfo.mValid = true; &#125; else if (focused != null &amp;&amp; (mOrientationHelper.getDecoratedStart(focused) &gt;= mOrientationHelper.getEndAfterPadding() || mOrientationHelper.getDecoratedEnd(focused) &lt;= mOrientationHelper.getStartAfterPadding())) &#123; // This case relates to when the anchor child is the focused view and due to layout // shrinking the focused view fell outside the viewport, e.g. when soft keyboard shows // up after tapping an EditText which shrinks RV causing the focused view (The tapped // EditText which is the anchor child) to get kicked out of the screen. Will update the // anchor coordinate in order to make sure that the focused view is laid out. Otherwise, // the available space in layoutState will be calculated as negative preventing the // focused view from being laid out in fill. // Note that we won&#x27;t update the anchor position between layout passes (refer to // TestResizingRelayoutWithAutoMeasure), which happens if we were to call // updateAnchorInfoForLayout for an anchor that&#x27;s not the focused view (e.g. a reference // child which can change between layout passes). mAnchorInfo.assignFromViewAndKeepVisibleRect(focused, getPosition(focused)); &#125; if (mAnchorInfo.mLayoutFromEnd) &#123; updateLayoutStateToFillStart(mAnchorInfo); mLayoutState.mExtraFillSpace = extraForStart; fill(recycler, mLayoutState, state, false); &#125; else &#123; fill(recycler, mLayoutState, state, false); &#125; &#125;int fill(RecyclerView.Recycler recycler, LayoutState layoutState, RecyclerView.State state, boolean stopOnFocusable) &#123; while ((layoutState.mInfinite || remainingSpace &gt; 0) &amp;&amp; layoutState.hasMore(state)) &#123; layoutChunkResult.resetInternal(); if (RecyclerView.VERBOSE_TRACING) &#123; TraceCompat.beginSection(&quot;LLM LayoutChunk&quot;); &#125; //å¡«å……item layoutChunk(recycler, state, layoutState, layoutChunkResult); &#125; &#125;/**1. è°ƒç”¨layoutState.next(recycler)è·å–View2. addView3. measureChildWithMarginsè¿›è¡Œå­Viewæµ‹é‡*/void layoutChunk(RecyclerView.Recycler recycler, RecyclerView.State state, LayoutState layoutState, LayoutChunkResult result) &#123; View view = layoutState.next(recycler); LayoutParams params = (LayoutParams) view.getLayoutParams(); if (layoutState.mScrapList == null) &#123; if (mShouldReverseLayout == (layoutState.mLayoutDirection == LayoutState.LAYOUT_START)) &#123; //æ·»åŠ itemçš„è§†å›¾ addView(view); &#125; else &#123; addView(view, 0); &#125; &#125; else &#123; if (mShouldReverseLayout == (layoutState.mLayoutDirection == LayoutState.LAYOUT_START)) &#123; addDisappearingView(view); &#125; else &#123; addDisappearingView(view, 0); &#125; &#125; // æµ‹é‡view measureChildWithMargins(view, 0, 0); ...&#125; æµç¨‹å›¾å¦‚ä¸‹ï¼š onLayout123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155@Overrideprotected void onLayout(boolean changed, int l, int t, int r, int b) &#123; TraceCompat.beginSection(TRACE_ON_LAYOUT_TAG); dispatchLayout(); TraceCompat.endSection(); mFirstLayoutComplete = true;&#125;void dispatchLayout() &#123; //è¿™ä¸ªæ—¶å€™æµ‹é‡å·²ç»ç»“æŸ mState.mIsMeasuring = false; if (mState.mLayoutStep == State.STEP_START) &#123; //å½“è¿˜æ˜¯æµ‹é‡åˆå§‹çŠ¶æ€æ—¶ï¼Œèµ°ä¸Šé¢çš„æµ‹é‡æµç¨‹ dispatchLayoutStep1(); mLayout.setExactMeasureSpecsFrom(this); dispatchLayoutStep2(); &#125; else if (mAdapterHelper.hasUpdates() || needsRemeasureDueToExactSkip || mLayout.getWidth() != getWidth() || mLayout.getHeight() != getHeight()) &#123; // First 2 steps are done in onMeasure but looks like we have to run again due to // changed size. // æ•°æ®æ›´æ–°ã€æ”¹å˜å°ºå¯¸åéœ€è¦é‡æ–°æµ‹é‡ mLayout.setExactMeasureSpecsFrom(this); dispatchLayoutStep2(); &#125; else &#123; // always make sure we sync them (to ensure mode is exact) // ç¡®ä¿è·Ÿå¸ƒå±€ç®¡ç†å™¨åŒæ­¥ mLayout.setExactMeasureSpecsFrom(this); &#125; dispatchLayoutStep3(); &#125;/**å¸ƒå±€çš„æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬ä¿å­˜å…³äºè§†å›¾çš„åŠ¨ç”»ä¿¡æ¯ï¼Œè§¦å‘åŠ¨ç”»å¹¶è¿›è¡Œå¿…è¦çš„æ¸…ç†*/private void dispatchLayoutStep3() &#123; //æ¢å¤é»˜è®¤å€¼ mState.mLayoutStep = State.STEP_START; //å¦‚æœæœ‰åŠ¨ç”» if (mState.mRunSimpleAnimations) &#123; // Step 3: Find out where things are now, and process change animations. // traverse list in reverse because we may call animateChange in the loop which may // remove the target view holder. // éå†å­å…ƒç´  for (int i = mChildHelper.getChildCount() - 1; i &gt;= 0; i--) &#123; // æ‹¿åˆ°VH ViewHolder holder = getChildViewHolderInt(mChildHelper.getChildAt(i)); if (holder.shouldIgnore()) &#123; continue; &#125; long key = getChangedHolderKey(holder); final ItemHolderInfo animationInfo = mItemAnimator .recordPostLayoutInformation(mState, holder); ViewHolder oldChangeViewHolder = mViewInfoStore.getFromOldChangeHolders(key); if (oldChangeViewHolder != null &amp;&amp; !oldChangeViewHolder.shouldIgnore()) &#123; // run a change animation // If an Item is CHANGED but the updated version is disappearing, it creates // a conflicting case. // Since a view that is marked as disappearing is likely to be going out of // bounds, we run a change animation. Both views will be cleaned automatically // once their animations finish. // On the other hand, if it is the same view holder instance, we run a // disappearing animation instead because we are not going to rebind the updated // VH unless it is enforced by the layout manager. final boolean oldDisappearing = mViewInfoStore.isDisappearing( oldChangeViewHolder); final boolean newDisappearing = mViewInfoStore.isDisappearing(holder); if (oldDisappearing &amp;&amp; oldChangeViewHolder == holder) &#123; // run disappear animation instead of change mViewInfoStore.addToPostLayout(holder, animationInfo); &#125; else &#123; final ItemHolderInfo preInfo = mViewInfoStore.popFromPreLayout( oldChangeViewHolder); // we add and remove so that any post info is merged. mViewInfoStore.addToPostLayout(holder, animationInfo); ItemHolderInfo postInfo = mViewInfoStore.popFromPostLayout(holder); if (preInfo == null) &#123; handleMissingPreInfoForChangeError(key, holder, oldChangeViewHolder); &#125; else &#123; // æ·»åŠ æ–°çš„è§†å›¾ // æ·»åŠ åˆ°ChildHelperä¸Š animateChange(oldChangeViewHolder, holder, preInfo, postInfo, oldDisappearing, newDisappearing); &#125; &#125; &#125; else &#123; mViewInfoStore.addToPostLayout(holder, animationInfo); &#125; &#125; // Step 4: Process view info lists and trigger animations // å¤„ç†åˆ—è¡¨çš„è§†å›¾ä¿¡æ¯å’Œè§¦å‘åŠ¨ç”» mViewInfoStore.process(mViewInfoProcessCallback); &#125; mLayout.removeAndRecycleScrapInt(mRecycler); mState.mPreviousLayoutItemCount = mState.mItemCount; mDataSetHasChangedAfterLayout = false; mDispatchItemsChangedEvent = false; mState.mRunSimpleAnimations = false; mState.mRunPredictiveAnimations = false; mLayout.mRequestedSimpleAnimations = false; if (mRecycler.mChangedScrap != null) &#123; mRecycler.mChangedScrap.clear(); &#125; if (mLayout.mPrefetchMaxObservedInInitialPrefetch) &#123; // Initial prefetch has expanded cache, so reset until next prefetch. // This prevents initial prefetches from expanding the cache permanently. mLayout.mPrefetchMaxCountObserved = 0; mLayout.mPrefetchMaxObservedInInitialPrefetch = false; mRecycler.updateViewCacheSize(); &#125; //å›åˆ°å¸ƒå±€ç®¡ç†å™¨ï¼ŒåŒæ­¥çŠ¶æ€ mLayout.onLayoutCompleted(mState); onExitLayoutOrScroll(); stopInterceptRequestLayout(false); mViewInfoStore.clear(); if (didChildRangeChange(mMinMaxLayoutPositions[0], mMinMaxLayoutPositions[1])) &#123; dispatchOnScrolled(0, 0); &#125; recoverFocusFromState(); resetFocusInfo();&#125;private void animateChange(@NonNull ViewHolder oldHolder, @NonNull ViewHolder newHolder, @NonNull ItemHolderInfo preInfo, @NonNull ItemHolderInfo postInfo, boolean oldHolderDisappearing, boolean newHolderDisappearing) &#123; if (oldHolder != newHolder) &#123; if (newHolderDisappearing) &#123; addAnimatingView(newHolder); &#125; oldHolder.mShadowedHolder = newHolder; // old holder should disappear after animation ends //æ·»åŠ è§†å›¾åˆ°ç®¡ç†å™¨ addAnimatingView(oldHolder); mRecycler.unscrapView(oldHolder); newHolder.setIsRecyclable(false); newHolder.mShadowingHolder = oldHolder; &#125; //å¯åŠ¨åŠ¨ç”» if (mItemAnimator.animateChange(oldHolder, newHolder, preInfo, postInfo)) &#123; postAnimationRunner(); &#125; &#125; ä¸»è¦çš„å·¥ä½œå†…å®¹å¦‚ä¸‹ï¼š æ£€æŸ¥çŠ¶æ€ï¼Œå¦‚æœæ˜¯STEP_STARTï¼Œåˆ™å…ˆæµ‹é‡ï¼› æ•°æ®ã€å°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼Œåˆ™èµ°dispatchLayoutStep2ï¼› å¤„ç†éœ€è¦æ’­æ”¾åŠ¨ç”»çš„æ•°æ® çŠ¶æ€åŒæ­¥ç»™å¸ƒå±€ç®¡ç†å™¨ onDraw1234567891011public void onDraw(Canvas c) &#123; super.onDraw(c); final int count = mItemDecorations.size(); // éå†éš”é—´è£…é¥°åˆ—è¡¨ï¼Œè¿›è¡Œç»˜åˆ¶ã€‚ // å­è§†å›¾åœ¨è‡ªå·±çš„onDrawä¸­ç»˜åˆ¶ for (int i = 0; i &lt; count; i++) &#123; mItemDecorations.get(i).onDraw(c, this, mState); &#125;&#125; å‚è€ƒ","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"RecyclerViewä¹‹ItemDecoration","date":"2022-03-08T02:25:29.617Z","path":"wiki/Android/UI/RecyclerViewä¹‹ItemDecoration/","text":"ç›®å½• RecyclerViewä¹‹æ¦‚è¿° RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹ RecyclerViewä¹‹Adapter RecyclerViewä¹‹ItemDecoration RecyclerViewä¹‹ItemAnimator RecyclerViewä¹‹DiffUtil RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥ æ¦‚è¿°ItemDecorationç”¨äºåœ¨æ¯ä¸ªå…ƒç´ ä¹‹é—´è®¾ç½®è§†å›¾ï¼Œæ¯”å¦‚åˆ†å‰²çº¿ã€‚å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦å®ç°ç›¸åº”çš„æ–¹æ³•ï¼Œå°±èƒ½è¿›è¡Œè§†å›¾çš„å¤§å°è®¾ç½®ï¼Œå†…å®¹ç»˜åˆ¶ã€‚ æ–¹æ³•ä»‹ç»12345678910111213141516171819//é‡å†™ç»˜åˆ¶æ–¹æ³•ï¼Œç”»è‡ªå·±æƒ³è¦çš„å†…å®¹public void onDraw(@NonNull Canvas c, @NonNull RecyclerView parent) &#123;&#125;//è¿™ä¸ªæ–¹æ³•ä¼šåœ¨onDrawåé¢æ‰§è¡Œpublic void onDrawOver(@NonNull Canvas c, @NonNull RecyclerView parent, @NonNull State state) &#123; onDrawOver(c, parent);&#125;//æŒ‡å®šå°ºå¯¸public void getItemOffsets(@NonNull Rect outRect, @NonNull View view, @NonNull RecyclerView parent, @NonNull State state) &#123; getItemOffsets(outRect, ((LayoutParams) view.getLayoutParams()).getViewLayoutPosition(), parent);&#125; å‚è€ƒ https://www.jianshu.com/p/6a093bcc6b83","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"RecyclerViewä¹‹SnapHelper","date":"2022-03-08T02:25:29.617Z","path":"wiki/Android/UI/RecyclerViewä¹‹SnapHelper/","text":"ç›®å½• RecyclerViewä¹‹æ¦‚è¿° RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹ RecyclerViewä¹‹Adapter RecyclerViewä¹‹ItemDecoration RecyclerViewä¹‹ItemAnimator RecyclerViewä¹‹DiffUtil RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥ æ¦‚è¦SnapHelperç”¨äºè¾…åŠ©RecyclerViewåœ¨æ»šåŠ¨ç»“æŸæ—¶å°†Itemå¯¹é½åˆ°æŸä¸ªä½ç½®ã€‚èƒ½è®©RecyclerViewå®ç°ç±»ä¼¼ViewPagerç­‰åŠŸèƒ½ã€‚ RecyclerViewæè¿°æ»šåŠ¨çŠ¶æ€çš„å‡ ä¸ªå±æ€§ï¼š SCROLL_STATE_IDLEï¼šæ»šåŠ¨é—²ç½®çŠ¶æ€ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰æ‰‹æŒ‡æ»‘åŠ¨æˆ–è€…åŠ¨ç”»æ‰§è¡Œ SCROLL_STATE_DRAGGINGï¼šæ»šåŠ¨æ‹–æ‹½çŠ¶æ€ï¼Œç”±äºç”¨æˆ·è§¦æ‘¸å±å¹•äº§ç”Ÿ SCROLL_STATE_SETTLINGï¼šè‡ªåŠ¨æ»šåŠ¨çŠ¶æ€ï¼Œæ­¤æ—¶æ²¡æœ‰æ‰‹æŒ‡è§¦æ‘¸ï¼Œä¸€èˆ¬æ˜¯ç”±åŠ¨ç”»æ‰§è¡Œæ»šåŠ¨åˆ°æœ€ç»ˆä½ç½®ï¼ŒåŒ…æ‹¬smoothScrollToç­‰æ–¹æ³•çš„è°ƒç”¨ å½“æ‰‹æŒ‡åœ¨å±å¹•ä¸Šæ»‘åŠ¨RecyclerViewç„¶åæ¾æ‰‹ï¼ŒRecyclerViewä¸­çš„å†…å®¹ä¼šé¡ºç€æƒ¯æ€§ç»§ç»­å¾€æ‰‹æŒ‡æ»‘åŠ¨çš„æ–¹å‘ç»§ç»­æ»šåŠ¨ç›´åˆ°åœæ­¢ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšFlingã€‚ Flingå½“è§¦å‘MotionEvent.ACTION_UPæ—¶ï¼ŒRecyclerViewä¼šè¿›è¡Œflingåˆ¤æ–­ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061public boolean fling(int velocityX, int velocityY) &#123; if (mLayout == null) &#123; Log.e(TAG, &quot;Cannot fling without a LayoutManager set. &quot; + &quot;Call setLayoutManager with a non-null argument.&quot;); return false; &#125; if (mLayoutFrozen) &#123; return false; &#125; final boolean canScrollHorizontal = mLayout.canScrollHorizontally(); final boolean canScrollVertical = mLayout.canScrollVertically(); if (!canScrollHorizontal || Math.abs(velocityX) &lt; mMinFlingVelocity) &#123; velocityX = 0; &#125; if (!canScrollVertical || Math.abs(velocityY) &lt; mMinFlingVelocity) &#123; velocityY = 0; &#125; if (velocityX == 0 &amp;&amp; velocityY == 0) &#123; // If we don&#x27;t have any velocity, return false return false; &#125; //å¤„ç†åµŒå¥—æ»šåŠ¨PreFling if (!dispatchNestedPreFling(velocityX, velocityY)) &#123; final View firstChild = mLayout.getChildAt(0); final View lastChild = mLayout.getChildAt(mLayout.getChildCount() - 1); boolean consumed = false; if (velocityY &lt; 0) &#123; consumed = getChildAdapterPosition(firstChild) &gt; 0 || firstChild.getTop() &lt; getPaddingTop(); &#125; if (velocityY &gt; 0) &#123; consumed = getChildAdapterPosition(lastChild) &lt; mAdapter.getItemCount() - 1 || lastChild.getBottom() &gt; getHeight() - getPaddingBottom(); &#125; dispatchNestedFling(velocityX, velocityY, consumed); //é€šè¿‡setOnFlingListenerè®¾ç½®mOnFlingListenerï¼Œç”±ç”¨æˆ·æ¥åˆ¤æ–­æ˜¯å¦å±æ€§è‡ªå·±å®šä¹‰flingè¡Œä¸º //é»˜è®¤çš„å®ç°æœ‰LinearSnapHelperã€PagerSnapHelper if (mOnFlingListener != null &amp;&amp; mOnFlingListener.onFling(velocityX, velocityY)) &#123; return true; &#125; final boolean canScroll = canScrollHorizontal || canScrollVertical; if (canScroll) &#123; velocityX = Math.max(-mMaxFlingVelocity, Math.min(velocityX, mMaxFlingVelocity)); velocityY = Math.max(-mMaxFlingVelocity, Math.min(velocityY, mMaxFlingVelocity)); /é»˜è®¤çš„Flingæ“ä½œï¼Œæœ€ç»ˆåˆ°OverScrollerè®¡ç®—æ»šåŠ¨ç›¸å…³çš„å€¼ mViewFlinger.fling(velocityX, velocityY); return true; &#125; &#125; return false;&#125; ç”±æºç å¯çŸ¥ï¼Œä¼šæ¥åˆ°SnapHelperè¿›è¡Œåˆ¤æ–­ã€‚ SnapHelperSnapHelperæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…·ä½“å®ç°æœ‰LinearSnapHelperã€PagerSnapHelperã€‚ 123456789101112131415161718192021222324/**ä¼šè®¡ç®—ç¬¬äºŒä¸ªå‚æ•°å¯¹åº”çš„ItemViewå½“å‰çš„åæ ‡ä¸éœ€è¦å¯¹é½çš„åæ ‡ä¹‹é—´çš„è·ç¦»ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªå¤§å°ä¸º2çš„intæ•°ç»„ï¼Œåˆ†åˆ«å¯¹åº”xè½´å’Œyè½´æ–¹å‘ä¸Šçš„è·ç¦»ã€‚*/public abstract int[] calculateDistanceToFinalSnap(@NonNull RecyclerView.LayoutManager layoutManager, @NonNull View targetView);/**ä¼šæ‰¾åˆ°å½“å‰layoutManagerä¸Šæœ€æ¥è¿‘å¯¹é½ä½ç½®çš„é‚£ä¸ªviewï¼Œè¯¥viewç§°ä¸ºSanpViewï¼Œå¯¹åº”çš„positionç§°ä¸ºSnapPositionã€‚å¦‚æœè¿”å›nullï¼Œå°±è¡¨ç¤ºæ²¡æœ‰éœ€è¦å¯¹é½çš„Viewï¼Œä¹Ÿå°±ä¸ä¼šåšæ»šåŠ¨å¯¹é½è°ƒæ•´ã€‚*/public abstract View findSnapView(RecyclerView.LayoutManager layoutManager);/**ä¼šæ ¹æ®è§¦å‘Flingæ“ä½œçš„é€Ÿç‡ï¼ˆå‚æ•°velocityXå’Œå‚æ•°velocityYï¼‰æ¥æ‰¾åˆ°RecyclerViewéœ€è¦æ»šåŠ¨åˆ°å“ªä¸ªä½ç½®ï¼Œè¯¥ä½ç½®å¯¹åº”çš„ItemViewå°±æ˜¯é‚£ä¸ªéœ€è¦è¿›è¡Œå¯¹é½çš„åˆ—è¡¨é¡¹ã€‚æˆ‘ä»¬æŠŠè¿™ä¸ªä½ç½®ç§°ä¸ºtargetSnapPositionï¼Œå¯¹åº”çš„Viewç§°ä¸ºtargetSnapViewã€‚å¦‚æœæ‰¾ä¸åˆ°targetSnapPositionï¼Œå°±è¿”å›RecyclerView.NO_POSITION*/public abstract int findTargetSnapPosition(RecyclerView.LayoutManager layoutManager, int velocityX, int velocityY); é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œæ³¨å†Œåˆ°RecyclerViewä¸­ï¼Œå¯ä»¥å®ç°ç›¸åº”çš„æ•ˆæœã€‚ 12345//æ»šåŠ¨åœæ­¢æ—¶ç›¸åº”çš„Itemåœç•™ä¸­é—´ä½ç½®new LinearSnapHelper().attachToRecyclerView(mRecyclerView);//ç±»ä¼¼ViewPageæ•ˆæœnew PagerSnapHelper().attachToRecyclerView(mRecyclerView); æ¥çœ‹çœ‹LinearSnapHelperçš„æºç  ä¾é™„RecyclerViewæµç¨‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778public void attachToRecyclerView(@Nullable RecyclerView recyclerView) throws IllegalStateException &#123; //å¦‚æœSnapHelperä¹‹å‰å·²ç»é™„ç€åˆ°æ­¤RecyclerViewä¸Šï¼Œä¸ç”¨è¿›è¡Œä»»ä½•æ“ä½œ if (mRecyclerView == recyclerView) &#123; return; // nothing to do &#125; //å¦‚æœSnapHelperä¹‹å‰é™„ç€çš„RecyclerViewå’Œç°åœ¨çš„ä¸ä¸€è‡´ï¼Œæ¸…ç†æ‰ä¹‹å‰RecyclerViewçš„å›è°ƒ if (mRecyclerView != null) &#123; destroyCallbacks(); &#125; mRecyclerView = recyclerView; if (mRecyclerView != null) &#123; //è®¾ç½®å½“å‰RecyclerViewå¯¹è±¡çš„å›è°ƒ setupCallbacks(); //åˆ›å»ºä¸€ä¸ªScrollerå¯¹è±¡ï¼Œç”¨äºè¾…åŠ©è®¡ç®—flingçš„æ€»è·ç¦» mGravityScroller = new Scroller(mRecyclerView.getContext(), new DecelerateInterpolator()); //è°ƒç”¨snapToTargetExistingView()æ–¹æ³•ä»¥å®ç°å¯¹SnapViewçš„å¯¹é½æ»šåŠ¨å¤„ç† snapToTargetExistingView(); &#125;&#125;private void setupCallbacks() throws IllegalStateException &#123; if (mRecyclerView.getOnFlingListener() != null) &#123; throw new IllegalStateException(&quot;An instance of OnFlingListener already set.&quot;); &#125; //æ³¨å†Œæ»šåŠ¨ç›‘å¬å™¨ mRecyclerView.addOnScrollListener(mScrollListener); //æ³¨å†Œè‡ªå·± mRecyclerView.setOnFlingListener(this);&#125;// Handles the snap on scroll case.private final RecyclerView.OnScrollListener mScrollListener = new RecyclerView.OnScrollListener() &#123; boolean mScrolled = false; @Override public void onScrollStateChanged(RecyclerView recyclerView, int newState) &#123; super.onScrollStateChanged(recyclerView, newState); if (newState == RecyclerView.SCROLL_STATE_IDLE &amp;&amp; mScrolled) &#123; mScrolled = false; //å¯¹targetViewè¿›è¡Œæ»šåŠ¨è°ƒæ•´ï¼Œä»¥ç¡®ä¿åœæ­¢çš„ä½ç½®æ˜¯åœ¨å¯¹åº”çš„åæ ‡ä¸Šï¼Œè¿™å°±æ˜¯RecyclerViewæ·»åŠ è¯¥OnScrollListenerçš„ç›®çš„ snapToTargetExistingView(); &#125; &#125; @Override public void onScrolled(RecyclerView recyclerView, int dx, int dy) &#123; if (dx != 0 || dy != 0) &#123; mScrolled = true; &#125; &#125; &#125;;void snapToTargetExistingView() &#123; if (mRecyclerView == null) &#123; return; &#125; RecyclerView.LayoutManager layoutManager = mRecyclerView.getLayoutManager(); if (layoutManager == null) &#123; return; &#125; //æ‰¾å‡ºSnapView View snapView = findSnapView(layoutManager); if (snapView == null) &#123; return; &#125; //è®¡ç®—å‡ºSnapViewéœ€è¦æ»šåŠ¨çš„è·ç¦» int[] snapDistance = calculateDistanceToFinalSnap(layoutManager, snapView); //å¦‚æœéœ€è¦æ»šåŠ¨çš„è·ç¦»ä¸æ˜¯ä¸º0ï¼Œå°±è°ƒç”¨smoothScrollByï¼ˆï¼‰ä½¿RecyclerViewæ»šåŠ¨ç›¸åº”çš„è·ç¦» if (snapDistance[0] != 0 || snapDistance[1] != 0) &#123; mRecyclerView.smoothScrollBy(snapDistance[0], snapDistance[1]); &#125;&#125; onFlingåœ¨RecyclerViewä¸­çš„flingæ–¹æ³•ä¸­ï¼Œå¦‚æœä¾é™„æ¥LinearSnapHelperï¼Œä¼šè°ƒç”¨LinearSnapHelperçš„onFlingæ–¹æ³•è¿›è¡Œåˆ¤æ–­ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public boolean onFling(int velocityX, int velocityY) &#123; RecyclerView.LayoutManager layoutManager = mRecyclerView.getLayoutManager(); if (layoutManager == null) &#123; return false; &#125; RecyclerView.Adapter adapter = mRecyclerView.getAdapter(); if (adapter == null) &#123; return false; &#125; //è·å–RecyclerViewè¦è¿›è¡Œflingæ“ä½œéœ€è¦çš„æœ€å°é€Ÿç‡ï¼Œ //åªæœ‰è¶…è¿‡è¯¥é€Ÿç‡ï¼ŒItemViewæ‰ä¼šæœ‰è¶³å¤Ÿçš„åŠ¨åŠ›åœ¨æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶ç»§ç»­æ»šåŠ¨ä¸‹å» int minFlingVelocity = mRecyclerView.getMinFlingVelocity(); //snapFromFling()è¿™ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯é€šè¿‡è¯¥æ–¹æ³•å®ç°å¹³æ»‘æ»šåŠ¨å¹¶ä½¿å¾—åœ¨æ»šåŠ¨åœæ­¢æ—¶itemViewå¯¹é½åˆ°ç›®çš„åæ ‡ä½ç½® return (Math.abs(velocityY) &gt; minFlingVelocity || Math.abs(velocityX) &gt; minFlingVelocity) &amp;&amp; snapFromFling(layoutManager, velocityX, velocityY); &#125;private boolean snapFromFling(@NonNull RecyclerView.LayoutManager layoutManager, int velocityX, int velocityY) &#123; //layoutManagerå¿…é¡»å®ç°ScrollVectorProvideræ¥å£æ‰èƒ½ç»§ç»­å¾€ä¸‹æ“ä½œ if (!(layoutManager instanceof RecyclerView.SmoothScroller.ScrollVectorProvider)) &#123; return false; &#125; //åˆ›å»ºSmoothScrollerå¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªå¹³æ»‘æ»šåŠ¨å™¨ï¼Œç”¨äºå¯¹ItemViewè¿›è¡Œå¹³æ»‘æ»šåŠ¨æ“ä½œ //æ ¹æ®é€Ÿç‡è®¡ç®—æ»‘åŠ¨è·ç¦» RecyclerView.SmoothScroller smoothScroller = createScroller(layoutManager); if (smoothScroller == null) &#123; return false; &#125; //é€šè¿‡findTargetSnapPosition()æ–¹æ³•ï¼Œä»¥layoutManagerå’Œé€Ÿç‡ä½œä¸ºå‚æ•°ï¼Œæ‰¾åˆ°targetSnapPosition int targetPosition = findTargetSnapPosition(layoutManager, velocityX, velocityY); if (targetPosition == RecyclerView.NO_POSITION) &#123; return false; &#125; //é€šè¿‡setTargetPosition()æ–¹æ³•è®¾ç½®æ»šåŠ¨å™¨çš„æ»šåŠ¨ç›®æ ‡ä½ç½® smoothScroller.setTargetPosition(targetPosition); //åˆ©ç”¨layoutManagerå¯åŠ¨å¹³æ»‘æ»šåŠ¨å™¨ï¼Œå¼€å§‹æ»šåŠ¨åˆ°ç›®æ ‡ä½ç½® layoutManager.startSmoothScroll(smoothScroller); return true;&#125; æ€»ç»“ ä½¿ç”¨æ—¶ä½¿ç”¨attachToRecyclerViewæ·»åŠ ä¾é™„ onFlingæ“ä½œè§¦å‘çš„æ—¶å€™é¦–å…ˆé€šè¿‡findTargetSnapPositionæ‰¾åˆ°æœ€ç»ˆéœ€è¦æ»šåŠ¨åˆ°çš„ä½ç½®ï¼Œç„¶åå¯åŠ¨å¹³æ»‘æ»šåŠ¨å™¨æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œ åœ¨æŒ‡å®šä½ç½®æ‰¾å‡ºæ¥åï¼Œç³»ç»Ÿä¼šå›è°ƒonTargetFound,ç„¶åè°ƒç”¨calculateDistanceToFinalSnapæ–¹æ³•è®¡ç®—targetViewéœ€è¦å‡é€Ÿæ»šåŠ¨çš„è·ç¦»ï¼Œç„¶åé€šè¿‡Actionæ›´æ–°ç»™æ»šåŠ¨å™¨ã€‚ åœ¨æ»šåŠ¨åœæ­¢çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯stateå˜æˆSCROLL_STATE_IDLEæ—¶ä¼šè°ƒç”¨snapToTargetExistingViewï¼Œé€šè¿‡findSnapViewæ‰¾åˆ°SnapViewï¼Œç„¶åé€šè¿‡calculateDistanceToFinalSnapè®¡ç®—å¾—åˆ°æ»šåŠ¨çš„è·ç¦»ï¼Œåšæœ€åçš„å¯¹é½è°ƒæ•´ã€‚ å‚è€ƒ https://www.jianshu.com/p/e54db232df62 https://github.com/rubensousa/GravitySnapHelper","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"RecyclerViewä¹‹æ¦‚è¿°","date":"2022-03-08T02:25:29.617Z","path":"wiki/Android/UI/RecyclerViewä¹‹æ¦‚è¿°/","text":"ç›®å½• RecyclerViewä¹‹æ¦‚è¿° RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹ RecyclerViewä¹‹Adapter RecyclerViewä¹‹ItemDecoration RecyclerViewä¹‹ItemAnimator RecyclerViewä¹‹DiffUtil RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥ ç›¸å…³ç±» RecyclerView SmoothScroller(RecyclerViewå†…éƒ¨ç±»)ï¼šå¹³æ»‘çš„é€Ÿåº¦å¤„ç† LinearSmoothScrollerï¼šæ°´å¹³æ–¹å‘çš„å¤„ç†ï¼Œç”¨äºLinearSnapHelperä¸­ ItemAnimator(RecyclerViewå†…éƒ¨ç±»)ï¼šå…ƒç´ åŠ¨ç”»ç±» DefaultItemAnimatorï¼šé»˜è®¤åŠ¨ç”»ç±» SimpleItemAnimatorï¼šæŠ½è±¡ç±» Recycler(RecyclerViewå†…éƒ¨ç±»)ï¼šä¿å­˜ç¼“å­˜çš„ç±» RecyclerView.Stateï¼šæµ‹é‡çŠ¶æ€ RecyclerListenerï¼šå½“ViewHolderå›æ”¶æ—¶çš„ç›‘å¬å™¨ LayoutManagerï¼šå¸ƒå±€ç®¡ç†å™¨åŸºç±» LinearLayoutManagerï¼šæ°´å¹³å¸ƒå±€ç®¡ç†å™¨ GridLayoutManagerï¼šæ–¹æ ¼å¸ƒå±€ç®¡ç†å™¨ StaggeredGridLayoutManagerï¼šä¸è§„åˆ™é«˜åº¦çš„æ–¹æ ¼ç®¡ç†å™¨ Adapterï¼šè§†å›¾å’Œæ•°æ®ç»‘å®šçš„é€‚é…å™¨ï¼Œè§†å›¾å¤ç”¨ ConcatAdapter ViewHolderï¼šè§†å›¾å®¹å™¨ AdapterHelperï¼š ç®¡ç†å’Œæ‰§è¡Œæ›´æ–°æ“ä½œçš„å¸®åŠ©ç±»ï¼ŒRecyclerViewå°†æ¯ä¸€æ¬¡æ›´æ–°æ“ä½œå°è£…æˆäº†ä¸€ä¸ªUpdateOpæ“ä½œï¼Œç„¶åé€šè¿‡AdapterHelperè¿›è¡Œç®¡ç†å’Œæ‰§è¡Œã€‚ OpReordererï¼šè®°å½•æ“ä½œæŒ‡ä»¤ ChildHelperï¼šå¸ƒå±€ç®¡ç†å™¨å’ŒRecyclerViewçš„childçš„å¤„ç†å™¨ï¼Œæœ‰Callbackæ¥å£å¯ä»¥å¯¹ç›¸åº”äº‹ä»¶è¿›è¡Œå›è°ƒ RecyclerViewPoolï¼šç¼“å­˜æ±  ItemDecorationï¼šå…ƒç´ éš”é—´ï¼Œæ¯”å¦‚ç»˜åˆ¶åˆ†éš”ç¬¦ DividerItemDecoration FastScroller ItemTouchHelper DiffUtilï¼šç”¨äºæ¯”è¾ƒå‰åæ•°æ®çš„å·¥å…·ç±»ï¼Œæå‡å¤šä¸ªitemæ›´æ–°çš„æ•ˆç‡ AsyncListDiffer AsyncListUtil ScrollbarHelper SnapHelperï¼šç”¨äºè¾…åŠ©RecyclerViewåœ¨æ»šåŠ¨ç»“æŸæ—¶å°†Itemå¯¹é½åˆ°æŸä¸ªä½ç½® LinearSnapHelperï¼šæ°´å¹³é€Ÿç‡è®¡ç®—çš„å¸®åŠ©ç±» PagerSnapHelperï¼šç±»ä¼¼ViewPageæ»‘åŠ¨é€Ÿç‡å¸®åŠ©ç±» StableIdStorage ItemTouchHelper AdapterListUpdateCallback OrientationHelperï¼šLayoutManagerç”¨äºæµ‹é‡childçš„ä¸€ä¸ªè¾…åŠ©ç±»ï¼Œå¯ä»¥æ ¹æ®Layoutmanagerçš„å¸ƒå±€æ–¹å¼å’Œå¸ƒå±€æ–¹å‘æ¥è®¡ç®—å¾—åˆ°ItemViewçš„å¤§å°ä½ç½®ç­‰ä¿¡æ¯ã€‚ ViewBoundsCheck ViewInfoStoreï¼šå­˜æ”¾å½“å‰VHå’Œç›¸å…³çš„InfoRecord InfoRecordï¼ˆViewInfoStoreå†…éƒ¨ç±»ï¼‰ï¼šVHçš„çŠ¶æ€ï¼šå‡ºç°ã€æ¶ˆå¤±ã€é¢„å¸ƒå±€ã€å®é™…å¸ƒå±€ æ¦‚è¿°RecyclerView ä¼šå›æ”¶è¿™äº›å•ä¸ªçš„å…ƒç´ ã€‚å½“åˆ—è¡¨é¡¹æ»šåŠ¨å‡ºå±å¹•æ—¶ï¼ŒRecyclerView ä¸ä¼šé”€æ¯å…¶è§†å›¾ã€‚ç›¸åï¼ŒRecyclerView ä¼šå¯¹å±å¹•ä¸Šæ»šåŠ¨çš„æ–°åˆ—è¡¨é¡¹é‡ç”¨è¯¥è§†å›¾ã€‚è¿™ç§é‡ç”¨å¯ä»¥æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œæ”¹å–„åº”ç”¨å“åº”èƒ½åŠ›å¹¶é™ä½åŠŸè€—ã€‚ å¸ƒå±€ç®¡ç† LinearLayoutManagerï¼šå°†å„ä¸ªé¡¹æ’åˆ—åœ¨ä¸€ç»´åˆ—è¡¨ä¸­ GridLayoutManagerï¼šå°†å„ä¸ªé¡¹æ’åˆ—åœ¨äºŒç»´ç½‘æ ¼ä¸­ï¼Œå°±åƒæ£‹ç›˜ä¸Šçš„æ–¹æ ¼ä¸€æ ·ã€‚ StaggeredGridLayoutManagerï¼šå°†å„ä¸ªé¡¹æ’åˆ—åœ¨äºŒç»´ç½‘æ ¼ä¸­ï¼Œæ¯ä¸€åˆ—éƒ½åœ¨å‰ä¸€åˆ—åŸºç¡€ä¸Šç¨å¾®åç§»ï¼Œå°±åƒç¾å›½å›½æ——ä¸­çš„æ˜Ÿæ˜Ÿä¸€æ ·ã€‚ Adapteré€šè¿‡Adapteræ¥å®Œæˆæ•°æ®å’Œè§†å›¾çš„ç»‘å®šï¼Œè¿™é‡Œä½¿ç”¨äº†æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼ï¼Œæˆ‘ä»¬åªéœ€è¦å®Œæˆå…·ä½“çš„å®ç°å³å¯ã€‚ onCreateViewHolder()ï¼šæ¯å½“ RecyclerView éœ€è¦åˆ›å»ºæ–°çš„ ViewHolder æ—¶ï¼Œå®ƒéƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•ã€‚æ­¤æ–¹æ³•ä¼šåˆ›å»ºå¹¶åˆå§‹åŒ– ViewHolder åŠå…¶å…³è”çš„ Viewï¼Œä½†ä¸ä¼šå¡«å……è§†å›¾çš„å†…å®¹ï¼Œå› ä¸º ViewHolder æ­¤æ—¶å°šæœªç»‘å®šåˆ°å…·ä½“æ•°æ®ã€‚ onBindViewHolder()ï¼šRecyclerView è°ƒç”¨æ­¤æ–¹æ³•å°† ViewHolder ä¸æ•°æ®ç›¸å…³è”ã€‚æ­¤æ–¹æ³•ä¼šæå–é€‚å½“çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨è¯¥æ•°æ®å¡«å…… ViewHolder çš„å¸ƒå±€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ RecyclerView æ˜¾ç¤ºçš„æ˜¯ä¸€ä¸ªåç§°åˆ—è¡¨ï¼Œè¯¥æ–¹æ³•å¯èƒ½ä¼šåœ¨åˆ—è¡¨ä¸­æŸ¥æ‰¾é€‚å½“çš„åç§°ï¼Œå¹¶å¡«å…… ViewHolder çš„ TextView å¾®ä»¶ã€‚ getItemCount()ï¼šRecyclerView è°ƒç”¨æ­¤æ–¹æ³•æ¥è·å–æ•°æ®é›†çš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œåœ¨é€šè®¯ç°¿åº”ç”¨ä¸­ï¼Œè¿™å¯èƒ½æ˜¯åœ°å€æ€»æ•°ã€‚RecyclerView ä½¿ç”¨æ­¤æ–¹æ³•æ¥ç¡®å®šä»€ä¹ˆæ—¶å€™æ²¡æœ‰æ›´å¤šçš„åˆ—è¡¨é¡¹å¯ä»¥æ˜¾ç¤ºã€‚ å¸¸ç”¨APIItemDecorationè®¾ç½®å•å…ƒæ ¼é—´çš„å¸ƒå±€ ItemAnimatorRecycledViewPoolç”¨äºå¤šä¸ªRecyclerViewä¹‹é—´å…±äº«View ViewCacheExtensionsetNestedScrollingEnabledç¦æ­¢æ»‘åŠ¨ setHasFixedSizeæ•°æ®å˜åŒ–ä¸ä¼šå¯¼è‡´Itemé«˜åº¦å˜åŒ–æ—¶ï¼Œå¯è®¾ç½®æ­¤å€¼ã€‚ Header&#x2F;Footeræ•°æ®æ“ä½œAPI notifyItemChanged(int position) æ›´æ–°åˆ—è¡¨positionä½ç½®ä¸Šçš„æ•°æ®å¯ä»¥è°ƒç”¨ notifyItemInserted(int position) åˆ—è¡¨positionä½ç½®æ·»åŠ ä¸€æ¡æ•°æ®æ—¶å¯ä»¥è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyItemRemoved(int position) åˆ—è¡¨positionä½ç½®ç§»é™¤ä¸€æ¡æ•°æ®æ—¶è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyItemMoved(int fromPosition, int toPosition) åˆ—è¡¨fromPositionä½ç½®çš„æ•°æ®ç§»åˆ°toPositionä½ç½®æ—¶è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyItemRangeChanged(int positionStart, int itemCount) åˆ—è¡¨ä»positionStartä½ç½®åˆ°itemCountæ•°é‡çš„åˆ—è¡¨é¡¹è¿›è¡Œæ•°æ®åˆ·æ–° notifyItemRangeInserted(int positionStart, int itemCount) åˆ—è¡¨ä»positionStartä½ç½®åˆ°itemCountæ•°é‡çš„åˆ—è¡¨é¡¹æ‰¹é‡æ·»åŠ æ•°æ®æ—¶è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyItemRangeRemoved(int positionStart, int itemCount) åˆ—è¡¨ä»positionStartä½ç½®åˆ°itemCountæ•°é‡çš„åˆ—è¡¨é¡¹æ‰¹é‡åˆ é™¤æ•°æ®æ—¶è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyDataSetChanged DiffUtilsæ¯”è¾ƒä¸¤ä¸ªæ•°æ®é›†ï¼Œæ‰¾å‡ºå·®å¼‚ï¼Œå†è°ƒç”¨notifyItemXXXæ–¹æ³•è¿›è¡Œæ›´æ–°ã€‚ ç¼“å­˜æœºåˆ¶ Scrapï¼šå±å¹•å†…éƒ¨çš„ItemViewï¼Œé€šè¿‡æ•°æ®é›†çš„positionæ¥æ‰¾åˆ°å¯¹åº”çš„Itemï¼Œå¯ä»¥ç›´æ¥å–è¿‡æ¥ç”¨ï¼› Cacheï¼šåˆšç§»å‡ºå±å¹•çš„ItemViewï¼Œæ”¾åˆ°Cacheé‡Œï¼Œå½“Cacheé‡Œçš„ItemViewé‡æ–°è¿›å…¥å±å¹•æ—¶ï¼Œä¹Ÿæ˜¯é€šè¿‡positionæ¥æ‰¾åˆ°å¯¹åº”çš„Itemï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨ï¼Œä¸éœ€è¦èµ°bindViewHolder()ã€‚Cacheå’Œ Scrap ä¸€æ ·ï¼Œéƒ½æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡positionæ¥æ‰¾åˆ°å¯¹åº”çš„Itemï¼Œä¸éœ€è¦é‡æ–°ç»‘å®šï¼› ViewCacheExtensionï¼šè‡ªå®šä¹‰ç¼“å­˜ï¼Œå¦‚æœæœ‰è‡ªå®šä¹‰ï¼Œéœ€è¦åœ¨è¿™é‡Œé¢æ‰¾ï¼Œæ²¡æœ‰çš„è¯ç›´æ¥è·³è¿‡ï¼› RecycledViewPoolï¼šæ‰€æœ‰è¢«åºŸå¼ƒçš„ItemViewçš„Poolï¼Œè¯¥poolé‡Œé¢çš„Iteméƒ½æ˜¯dirtyçš„ï¼Œéœ€è¦é€šè¿‡ViewTypeæ¥æ‰¾åˆ°æ•°æ®ï¼Œæ‰¾åˆ°æ•°æ®çš„è¯ï¼Œéœ€è¦é‡æ–°ç»‘å®šï¼Œä¸èµ°createViewHodler()ï¼Œèµ°bindViewHolder()ã€‚ RecycledViewPoolçš„ç”¨æ³• ä¸åŒçš„RecyclerViewå…±ç”¨ä¸€ä¸ªRecycledViewPool RecyclerViewçš„å¸ƒå±€ç®¡ç†å™¨éœ€è¦è®¾ç½®recycleChildrenOnDetach setMaxRecycledViewsçš„è®¾ç½®ï¼Œè®¾ç½®ä¸åŒç±»å‹çš„ViewHolderçš„ç¼“å­˜ä¸ªæ•° Adapterä¸­getItemViewTypeçš„æ–¹æ³•è®¾ç½®ViewHolderçš„ç±»å‹ ä¼˜åŒ–è®¾ç½® onBindViewHolderå†…ä¸è¦è®¾ç½®ç›‘å¬å™¨ å¦‚æœåœ¨è¿™é‡Œè®¾ç½®ï¼Œä¼šé¢‘ç¹çš„é‡å¤åˆ›å»ºç›‘å¬å™¨ã€‚ é«˜åº¦å›ºå®šæ—¶è®¾ç½®onBindViewHolder å…±ç”¨RecycleViewPool å‚è€ƒ https://developer.android.com/guide/topics/ui/layout/recyclerview?hl=zh-cn RecycledViewPoolä½¿ç”¨ ä¸€ç‚¹ç‚¹æœ‰åŠ©äºå·§ç”¨RecyclerViewçš„å°æŠ€å·§ RecyclerViewçš„å¥½ä¼´ä¾£ï¼šè¯¦è§£DiffUtil Speed up Your Android RecyclerView Using DiffUtil","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"WorkManager","date":"2022-03-08T02:25:29.616Z","path":"wiki/Android/Jetpack/WorkManager/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"Jetpack","slug":"Android/Jetpack","permalink":"http://airshu.github.io/categories/Android/Jetpack/"}]},{"title":"JNIç¬”è®°","date":"2022-03-08T02:25:29.616Z","path":"wiki/Android/NDK/JNIç¬”è®°/","text":"JNIå¼€å‘æµç¨‹ ç¼–å†™å£°æ˜äº†nativeæ–¹æ³•çš„Javaç±» å°†Javaæºä»£ç ç¼–è¯‘æˆclasså­—èŠ‚ç æ–‡ä»¶ ç”¨javah -jni å‘½ä»¤ç”Ÿæˆ.hå¤´æ–‡ä»¶ï¼ˆjavah æ˜¯ jdk è‡ªå¸¦çš„ä¸€ä¸ªå‘½ä»¤ï¼Œ-jni å‚æ•°è¡¨ç¤ºå°† class ä¸­ç”¨native å£°æ˜çš„å‡½æ•°ç”Ÿæˆ JNI è§„åˆ™çš„å‡½æ•°ï¼‰ ç”¨æœ¬åœ°ä»£ç å®ç°.hå¤´æ–‡ä»¶ä¸­çš„å‡½æ•° å°†æœ¬åœ°ä»£ç ç¼–è¯‘æˆåŠ¨æ€åº“ï¼ˆWindowsï¼š*.dllï¼Œlinux&#x2F;unixï¼š*.soï¼Œmac os xï¼š*.jnilibï¼‰ æ‹·è´åŠ¨æ€åº“è‡³ java.library.path æœ¬åœ°åº“æœç´¢ç›®å½•ä¸‹ï¼Œå¹¶è¿è¡Œ Java ç¨‹åº JVMæŸ¥æ‰¾nativeæ–¹æ³•çš„è§„åˆ™JNIæ•°æ®ç±»å‹ä¸Javaæ•°æ®ç±»å‹çš„æ˜ å°„å…³ç³»å­—ç¬¦ä¸²å¤„ç†è®¿é—®æ•°ç»„C&#x2F;C++è®¿é—®Javaå®ä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³•C&#x2F;C++è®¿é—®Javaå®ä¾‹å˜é‡å’Œé™æ€å˜é‡JNIè°ƒç”¨æ„é€ æ–¹æ³•å’Œçˆ¶ç±»å®ä¾‹æ–¹æ³•å‚è€ƒ https://developer.android.com/training/articles/perf-jni wiki.jikexueyuan.com&#x2F;project&#x2F;jni-ndk-developer-guide&#x2F;","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"NDK","slug":"Android/NDK","permalink":"http://airshu.github.io/categories/Android/NDK/"}]},{"title":"ConstraintLayout","date":"2022-03-08T02:25:29.616Z","path":"wiki/Android/UI/ConstraintLayout/","text":"æ¦‚è¿°çº¦æŸå¸ƒå±€ï¼Œå¯ä»¥é™ä½å¸ƒå±€çš„å±‚æ¬¡ï¼Œå¯¹æ€§èƒ½æå‡æœ‰å¸®åŠ©ã€‚ å¯ä»¥æŠŠçº¦æŸç†è§£æˆä¸€æ ¹ç»³å­ï¼Œæ¯”å¦‚ï¼Œå¦‚æœè®¾ç½®äº†å·¦ä¾§ä¸çˆ¶çº§ä¾èµ–ï¼Œåˆ™ç›¸å½“äºå·¦è¾¹æœ‰ä¸€æ ¹ç»³å­æ‹‰ç€è‡ªå·±ï¼Œå°±ä¼šè´´ç€å·¦è¾¹ã€‚å½“å³è¾¹ä¹Ÿæœ‰ä¸€æ ¹ç»³å­æ‹‰ç€è‡ªå·±ï¼Œåˆ™ä¼šå±…ä¸­ã€‚è¿™è·Ÿç»³å­è¿˜å¯ä»¥æŒ‡å‘åŒä¸€ä¸ªç‚¹ï¼Œæ¯”å¦‚è®¾ç½®åœ¨æŸä¸ªæ§ä»¶çš„ä¸­é—´ä½ç½®ã€‚ä¹Ÿå¯ä»¥è®¾ç½®åç§»é‡biasã€‚ ä½¿ç”¨çº¦æŸå¸ƒå±€ï¼Œä¸»è¦è¦ç†è§£ä¸åŒæ§ä»¶çš„çº¦æŸã€‚æ¯”å¦‚Aæ§ä»¶åœ¨Bæ§ä»¶ä¸Šæ–¹ï¼Œåˆ™å¯ä»¥ä½¿ç”¨layout_constraintBottom_toTopOf&#x3D;â€Bâ€ï¼ŒåŒç†å¯è®¾ç½®ä¸åŒæ–¹ä½ã€‚å¦‚æœæ˜¯æŒ¨ç€è¾¹ï¼Œåˆ™å¯ä»¥è®¾ç½®æ§ä»¶ä¸çˆ¶çº§çº¦æŸã€‚layout_constraintLeft_toLeftOf&#x3D;â€parentâ€è¡¨ç¤ºæŒ¨ç€çˆ¶çº§çš„å·¦è¾¹ã€‚ layout_constraintLeft_toRightOfconstraintXXXè¡¨ç¤ºçº¦æŸViewè‡ªå·±ï¼ŒXXXåˆ†åˆ«è¡¨ç¤ºä¸Šä¸‹å·¦å³ç­‰ä½ç½®ï¼ŒtoXXXOfè¡¨ç¤ºçº¦æŸä¾èµ–ç­‰å¯¹è±¡ï¼Œå¯ä»¥æ˜¯åŒçº§çš„Viewï¼Œä¹Ÿå¯ä»¥æ˜¯parentã€‚ layout_constraintBaseline_toBaselineOfå¯¹äºTextViewï¼Œå¯ä»¥ä½¿ç”¨åŸºçº¿å¯¹é½ï¼Œè¿™æ ·æ–‡å­—å°±èƒ½å¯¹é½äº†ã€‚ marginä¸¤ä¸ªitemä¹‹é—´çš„é—´è· ä¸åŒæ–¹ä½çš„è¾¹è· android:layout_marginStart android:layout_marginEnd android:layout_marginLeft android:layout_marginTop android:layout_marginRight android:layout_marginBottom goneMargin goneMargin è¦å’Œ margin ä¸€èµ·ä½¿ç”¨æ‰æœ‰æ•ˆ åœ¨çº¦æŸçš„å¸ƒå±€ Gone æ—¶ï¼ŒView è‡ªèº«çš„ margin å±æ€§ä¼šè¢« goneMargin æ›¿æ¢ Gone éšè—çš„æ§ä»¶ï¼Œä¼šè¢«è§£æä¸ºä¸€ä¸ªç‚¹ï¼Œå…¶ Margin ä¼šè¢«å¿½ç•¥ï¼Œå®ƒå¯¹å…¶ä»–æ§ä»¶çš„çº¦æŸä»ä¼šä¿ç•™ å¸¸ç”¨å±æ€§ layout_goneMarginStart layout_goneMarginEnd layout_goneMarginLeft layout_goneMarginTop layout_goneMarginRight layout_goneMarginBottom bias layout_constraintHorizontal_bias æ°´å¹³åç§» layout_constraintVertical_bias å‚ç›´åç§» ä¸¤ä¸ªå±æ€§çš„å–å€¼èŒƒå›´åœ¨0-1ã€‚åœ¨æ°´å¹³åç§»ä¸­ï¼Œ0è¡¨ç¤ºæœ€å·¦ï¼Œ1è¡¨ç¤ºæœ€å³ï¼›åœ¨å‚ç›´åç§»ï¼Œ0è¡¨ç¤ºæœ€ä¸Šï¼Œ1è¡¨ç¤ºæœ€ä¸‹ï¼›0.5è¡¨ç¤ºä¸­é—´ã€‚ Groupå‚è€ƒ https://add7.cc/android-base/android-constraintlayout","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"CoordinatorLayout","date":"2022-03-08T02:25:29.616Z","path":"wiki/Android/UI/CoordinatorLayout/","text":"æ¦‚è¿°","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"RecyclerViewä¹‹Adapter","date":"2022-03-08T02:25:29.616Z","path":"wiki/Android/UI/RecyclerViewä¹‹Adapter/","text":"ç›®å½• RecyclerViewä¹‹æ¦‚è¿° RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹ RecyclerViewä¹‹Adapter RecyclerViewä¹‹ItemDecoration RecyclerViewä¹‹ItemAnimator RecyclerViewä¹‹DiffUtil RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥ æ¦‚è¿°Adapteræ˜¯RecyclerViewçš„ç¬¬ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå°†RecyclerViewå’Œè§†å›¾å…³è”èµ·æ¥ã€‚ä½¿ç”¨çš„æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œåªè¦ç»§æ‰¿å®ƒï¼Œé‡å†™å‡ ä¸ªæ–¹æ³•å³å¯ã€‚ 123456789101112131415//åˆ›å»ºè§†å›¾public RecyclerView.ViewHolder onCreateViewHolder(ViewGroup parent, int viewType)//å°†è§†å›¾è·Ÿå½“å‰ä½ç½®çš„æ•°æ®ç»‘å®špublic void onBindViewHolder(RecyclerView.ViewHolder holder, int position)//è¿”å›å…ƒç´ çš„ä¸ªæ•°public int getItemCount()//è®¾ç½®ç±»å‹ï¼Œç”¨äºç¼“å­˜ç­–ç•¥ä¸­public int getItemViewType(int position) &#123; return 0;&#125; Adapterè§†å›¾æ¨¡å‹ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦æ”¹å˜æ•°æ®ï¼Œå¹¶å‘é€é€šçŸ¥ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ›´æ–°UIã€‚ Adapterå†…éƒ¨æœ‰ä¸€ä¸ªAdapterDataObservableï¼Œç»§æ‰¿è‡ªJavaçš„Observableï¼Œä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ã€‚RecyclerViewä¸­RecyclerViewDataObserverè¿›è¡Œç›‘å¬ï¼Œæœ€ç»ˆä½¿ç”¨AdapterHelperè¿›è¡Œæ“ä½œã€‚ notifyItemChanged(int position) æ›´æ–°åˆ—è¡¨positionä½ç½®ä¸Šçš„æ•°æ®å¯ä»¥è°ƒç”¨ notifyItemInserted(int position) åˆ—è¡¨positionä½ç½®æ·»åŠ ä¸€æ¡æ•°æ®æ—¶å¯ä»¥è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyItemRemoved(int position) åˆ—è¡¨positionä½ç½®ç§»é™¤ä¸€æ¡æ•°æ®æ—¶è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyItemMoved(int fromPosition, int toPosition) åˆ—è¡¨fromPositionä½ç½®çš„æ•°æ®ç§»åˆ°toPositionä½ç½®æ—¶è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyItemRangeChanged(int positionStart, int itemCount) åˆ—è¡¨ä»positionStartä½ç½®åˆ°itemCountæ•°é‡çš„åˆ—è¡¨é¡¹è¿›è¡Œæ•°æ®åˆ·æ–° notifyItemRangeInserted(int positionStart, int itemCount) åˆ—è¡¨ä»positionStartä½ç½®åˆ°itemCountæ•°é‡çš„åˆ—è¡¨é¡¹æ‰¹é‡æ·»åŠ æ•°æ®æ—¶è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyItemRangeRemoved(int positionStart, int itemCount) åˆ—è¡¨ä»positionStartä½ç½®åˆ°itemCountæ•°é‡çš„åˆ—è¡¨é¡¹æ‰¹é‡åˆ é™¤æ•°æ®æ—¶è°ƒç”¨ï¼Œä¼´æœ‰åŠ¨ç”»æ•ˆæœ notifyDataSetChanged ApaterHelperç®¡ç†å’Œæ‰§è¡Œæ›´æ–°æ“ä½œçš„å¸®åŠ©ç±»ï¼ŒRecyclerViewå°†æ¯ä¸€æ¬¡æ›´æ–°æ“ä½œå°è£…æˆäº†ä¸€ä¸ªUpdateOpæ“ä½œï¼Œç„¶åé€šè¿‡AdapterHelperè¿›è¡Œç®¡ç†å’Œæ‰§è¡Œã€‚ å½“RecyclerViewåˆå§‹åŒ–æ—¶ï¼Œä¼šåˆ›å»ºAdapterHelperï¼Œç„¶åé€šè¿‡å®ç°çš„dispatchUpdateæ–¹æ³•ï¼Œæœ€ç»ˆè°ƒç”¨å¸ƒå±€ç®¡ç†å™¨è¿›è¡Œå…ƒç´ çš„æ“ä½œã€‚ å®ƒå†…éƒ¨æœ‰ä¸€ä¸ªé™æ€å†…éƒ¨ç±»UpdateOpï¼Œå®šä¹‰äº†ç›¸åº”çš„æ“ä½œæŒ‡ä»¤ï¼š 12345678910111213141516171819202122232425262728293031final class AdapterHelper implements OpReorderer.Callback &#123;//UpdateOpå¯¹è±¡çš„å›æ”¶å’Œå¤ç”¨private Pools.Pool&lt;UpdateOp&gt; mUpdateOpPool = new Pools.SimplePool&lt;UpdateOp&gt;(UpdateOp.POOL_SIZE);//å°†è¦æ‰§è¡Œçš„æ“ä½œåˆ—è¡¨final ArrayList&lt;UpdateOp&gt; mPendingUpdates = new ArrayList&lt;UpdateOp&gt;();//éœ€è¦å»¶è¿Ÿæ‰§è¡Œçš„æ“ä½œåˆ—è¡¨final ArrayList&lt;UpdateOp&gt; mPostponedList = new ArrayList&lt;UpdateOp&gt;();//æŒ‡ä»¤æ“ä½œçš„è®°å½•å™¨// since move operations breaks continuity, their effects on ADD/RM are hard to handle.// we push them to the end of the list so that they can be handled easily.final OpReorderer mOpReorderer; static final class UpdateOp &#123; static final int ADD = 1; static final int REMOVE = 1 &lt;&lt; 1; static final int UPDATE = 1 &lt;&lt; 2; static final int MOVE = 1 &lt;&lt; 3; static final int POOL_SIZE = 30; ... &#125;&#125; preProcesså½“æ»‘åŠ¨RecyclerViewç­‰åŸå› é€ æˆæ•°æ®æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘åˆ°preProcessæ–¹æ³• 12345678910111213141516171819202122232425262728293031void preProcess() &#123; //æ·»åŠ åˆ°è®°å½•å™¨ä¸­ mOpReorderer.reorderOps(mPendingUpdates); final int count = mPendingUpdates.size(); //å°†å¾…å¤„ç†é˜Ÿåˆ—ä¸­çš„æŒ‡ä»¤è¿›è¡Œå¤„ç† for (int i = 0; i &lt; count; i++) &#123; UpdateOp op = mPendingUpdates.get(i); switch (op.cmd) &#123; case UpdateOp.ADD: //é€šè¿‡å›è°ƒåˆ°RecyclerViewä¸­ï¼Œæ‰¾åˆ°å¯¹åº”ViewHolderï¼Œä¿®æ”¹ç›¸åº”æ•°å€¼ï¼Œæ¯”å¦‚mPosition applyAdd(op); break; case UpdateOp.REMOVE: applyRemove(op); break; case UpdateOp.UPDATE: applyUpdate(op); break; case UpdateOp.MOVE: applyMove(op); break; &#125; if (mOnItemProcessedCallback != null) &#123; mOnItemProcessedCallback.run(); &#125; &#125; //æ¸…ç©ºåˆ—è¡¨ mPendingUpdates.clear();&#125; å‚è€ƒ https://fsilence.github.io/2020/05/15/RecyclerView-AdapterHelper","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"RecyclerViewä¹‹DiffUtil","date":"2022-03-08T02:25:29.616Z","path":"wiki/Android/UI/RecyclerViewä¹‹DiffUtil/","text":"ç›®å½• RecyclerViewä¹‹æ¦‚è¿° RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹ RecyclerViewä¹‹Adapter RecyclerViewä¹‹ItemDecoration RecyclerViewä¹‹ItemAnimator RecyclerViewä¹‹DiffUtil RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥ æ¦‚è¿°ä½¿ç”¨DiffUtilçš„åŸå› æ˜¯æ›¿ä»£notifyDataSetChangedï¼Œæå‡æ€§èƒ½ã€‚ DiffUtilä½¿ç”¨çš„æ˜¯Eugene Myersçš„å·®åˆ«ç®—æ³•ï¼Œè¿™ä¸ªç®—æ³•æœ¬èº«ä¸èƒ½æ£€æŸ¥åˆ°å…ƒç´ çš„ç§»åŠ¨ï¼Œä¹Ÿå°±æ˜¯ç§»åŠ¨åªèƒ½è¢«ç®—ä½œå…ˆåˆ é™¤ã€å†å¢åŠ ï¼Œè€ŒDiffUtilæ˜¯åœ¨ç®—æ³•çš„ç»“æœåå†è¿›è¡Œä¸€æ¬¡ç§»åŠ¨æ£€æŸ¥ã€‚å‡è®¾åœ¨ä¸æ£€æµ‹å…ƒç´ ç§»åŠ¨çš„æƒ…å†µä¸‹ï¼Œç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N + D2)ï¼Œè€Œæ£€æµ‹å…ƒç´ ç§»åŠ¨åˆ™å¤æ‚åº¦ä¸ºO(N2)ã€‚æ‰€ä»¥ï¼Œå¦‚æœé›†åˆæœ¬èº«å°±å·²ç»æ’å¥½åºï¼Œå¯ä»¥ä¸è¿›è¡Œç§»åŠ¨çš„æ£€æµ‹æå‡æ•ˆç‡ã€‚ ListAdapterå’ŒAsyncListDifferä¸­æœ‰ä½¿ç”¨ã€‚ ä½¿ç”¨123456789101112public void swap(List newList) &#123; MyDiffCallback callback = new MyDiffCallback(oldList, newList); DiffUtil.DiffResult result = DiffUtil.calculateDiff(callback); oldList.clear(); oldList.addAll(newList); result.dispatchUpdatesTo(this);&#125; ä½¿ç”¨çš„æ­¥éª¤ï¼š å®ç°DiffUtil.Callback è°ƒç”¨calculateDiffè®¡ç®—ä¸åŒç‚¹ dispatchUpdatesToåˆ·æ–°æ•°æ® æºç åˆ†æ1234567891011121314151617181920212223242526272829303132333435363738public class DiffUtil &#123; // public static DiffResult calculateDiff(@NonNull Callback cb) &#123; return calculateDiff(cb, true); &#125; public abstract static class Callback &#123; // æ—§æ•°æ®é›†çš„é•¿åº¦ public abstract int getOldListSize(); // æ–°æ•°æ®é›†çš„é•¿åº¦ public abstract int getNewListSize(); // åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªitem public abstract boolean areItemsTheSame(int oldItemPosition, int newItemPosition); // å¦‚æœitemç›¸åŒï¼Œæ­¤æ–¹æ³•ç”¨äºåˆ¤æ–­æ˜¯å¦åŒä¸€ä¸ªItemçš„å†…å®¹ä¹Ÿç›¸åŒ public abstract boolean areContentsTheSame(int oldItemPosition, int newItemPosition); // å¦‚æœitemç›¸åŒï¼Œå†…å®¹ä¸åŒï¼Œç”¨ payLoad è®°å½•è¿™ä¸ªViewHolderä¸­å…·ä½“éœ€è¦æ›´æ–°é‚£ä¸ªView public Object getChangePayload(int oldItemPosition, int newItemPosition) &#123; return null; &#125; &#125; public static class DiffResult &#123; // æ ¹æ®diff æ•°æ®ç»“æœï¼Œé€‰æ‹©åˆ·æ–°æ–¹å¼ public void dispatchUpdatesTo(@NonNull ListUpdateCallback updateCallback) &#123;&#125; &#125;&#125; è¿‡ç¨‹å¦‚ä¸‹ï¼š å®ç°DiffUtil.Callbackæ¥å£ æ–°è€æ•°æ®é›†é€šè¿‡DiffUtil.calculateDiffè®¡ç®—å¾—åˆ°DiffUtil.DiffResult DiffUtil.DiffResult::dispatchUpdatesToåˆ·æ–°æ•°æ® å‚è€ƒ RecyclerViewä¸­DiffUtilçš„ä¸€äº›æ³¨æ„äº‹é¡¹ https://developer.android.com/reference/androidx/recyclerview/widget/DiffUtil https://github.com/mrmike/DiffUtil-sample","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"RecyclerViewä¹‹ItemAnimator","date":"2022-03-08T02:25:29.616Z","path":"wiki/Android/UI/RecyclerViewä¹‹ItemAnimator/","text":"ç›®å½• RecyclerViewä¹‹æ¦‚è¿° RecyclerViewä¹‹ç»˜åˆ¶æµç¨‹ RecyclerViewä¹‹Adapter RecyclerViewä¹‹ItemDecoration RecyclerViewä¹‹ItemAnimator RecyclerViewä¹‹DiffUtil RecyclerViewä¹‹ç¼“å­˜ç­–ç•¥ åŸºæœ¬ç”¨æ³•ItemAnimatorç”¨äºå¯¹æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡ŒåŠ¨ç”»æ§åˆ¶ï¼ŒAndroidä¸­é»˜è®¤çš„å®ç°ä¸ºDefaultItemAnimatorã€‚åœ¨DefaultItemAnimatorçš„åˆ é™¤åŠ¨ç”»ä¸­ï¼Œä¼šå¯¹è¢«åˆ é™¤çš„å­è§†å›¾æ‰§è¡Œé€æ˜åº¦1-0çš„åŠ¨ç”»ï¼ŒåŠ¨ç”»ç»“æŸåï¼Œä¼šåˆ é™¤å­è§†å›¾å’Œå›æ”¶ViewHolderã€‚ 123recyclerView.setItemAnimator(new DefaultItemAnimator());//é»˜è®¤å®ç° 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980public abstract static class ItemAnimator &#123; //è¡¨ç¤ºViewHolderå·²ç»æ›´æ–° public static final int FLAG_CHANGED = ViewHolder.FLAG_UPDATE; //è¡¨ç¤ºViewHolderå·²ç»è¢«ç§»é™¤ public static final int FLAG_REMOVED = ViewHolder.FLAG_REMOVED; //notifyDataSetChangedå·²ç»è¢«è°ƒç”¨ï¼ŒViewHolderå·²ç»å¤±æ•ˆ public static final int FLAG_INVALIDATED = ViewHolder.FLAG_INVALID; //ViewHolderå·²ç»ç§»åŠ¨ public static final int FLAG_MOVED = ViewHolder.FLAG_MOVED; private ItemAnimatorListener mListener = null;//å›è°ƒç›‘å¬å™¨ //ç›‘å¬å™¨åˆ—è¡¨ private ArrayList&lt;ItemAnimatorFinishedListener&gt; mFinishedListeners = new ArrayList&lt;ItemAnimatorFinishedListener&gt;(); //Itemç§»é™¤å›è°ƒ public boolean animateRemove(RecyclerView.ViewHolder holder) &#123; return false; &#125; //Itemæ·»åŠ å›è°ƒ public boolean animateAdd(RecyclerView.ViewHolder holder) &#123; return false; &#125; //ç”¨äºæ§åˆ¶æ·»åŠ ï¼Œç§»åŠ¨æ›´æ–°æ—¶ï¼Œå…¶å®ƒItemçš„åŠ¨ç”»æ‰§è¡Œ public boolean animateMove(RecyclerView.ViewHolder holder, int fromX, int fromY, int toX, int toY) &#123; return false; &#125; //Itemæ›´æ–°å›è°ƒï¼Œåœ¨æ˜¾å¼è°ƒç”¨notifyItemChanged()æˆ–notifyDataSetChanged()æ—¶è¢«è°ƒç”¨ public boolean animateChange(RecyclerView.ViewHolder oldHolder, RecyclerView.ViewHolder newHolder, int fromLeft, int fromTop, int toLeft, int toTop) &#123; return false; &#125; // çœŸæ­£æ§åˆ¶æ‰§è¡ŒåŠ¨ç”»çš„åœ°æ–¹ // RecyclerViewåŠ¨ç”»çš„æ‰§è¡Œæ–¹å¼å¹¶ä¸æ˜¯ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æ¯å¸§æ‰§è¡Œä¸€æ¬¡ï¼Œæ¯”å¦‚ä¸¤å¸§ä¹‹é—´æ·»åŠ äº†å¤šä¸ªItemï¼Œåˆ™ä¼šå°†è¿™äº›å°†è¦æ‰§è¡Œçš„åŠ¨ç”»Pendingä½ï¼Œ // ä¿å­˜åœ¨æˆå‘˜å˜é‡ä¸­ï¼Œç­‰åˆ°ä¸‹ä¸€å¸§ä¸€èµ·æ‰§è¡Œã€‚è¯¥æ–¹æ³•æ‰§è¡Œçš„å‰ææ˜¯å‰é¢animateXxx()è¿”å›trueã€‚ public void runPendingAnimations() &#123; &#125; //åœæ­¢æŸä¸ªItemçš„åŠ¨ç”» public void endAnimation(RecyclerView.ViewHolder item) &#123; &#125; //åœæ­¢æ‰€æœ‰åŠ¨ç”» public void endAnimations() &#123; &#125; //æ˜¯å¦æœ‰Itemåœ¨è¿è¡Œ public boolean isRunning() &#123; return false; &#125; //å½“ViewHolderå‡ºç°åœ¨å±å¹•ä¸Šæ—¶è¢«è°ƒç”¨ public abstract boolean animateAppearance(@NonNull ViewHolder viewHolder, @Nullable ItemHolderInfo preLayoutInfo, @NonNull ItemHolderInfo postLayoutInfo); //å½“ViewHolderæ¶ˆå¤±åœ¨å±å¹•ä¸Šæ—¶è¢«è°ƒç”¨ public abstract boolean animateDisappearance(@NonNull ViewHolder viewHolder, @NonNull ItemHolderInfo preLayoutInfo, @Nullable ItemHolderInfo postLayoutInfo); //åœ¨æ²¡è°ƒç”¨notifyItemChanged()å’ŒnotifyDataSetChanged()çš„æƒ…å†µä¸‹å¸ƒå±€å‘ç”Ÿæ”¹å˜æ—¶è¢«è°ƒç”¨ public abstract boolean animatePersistence(@NonNull ViewHolder viewHolder, @NonNull ItemHolderInfo preLayoutInfo, @NonNull ItemHolderInfo postLayoutInfo); &#125; DefaultItemAnimatorè¿™æ˜¯RecyclerViewçš„é»˜è®¤å®ç°ï¼Œåˆ é™¤åŠ¨ç”»ä¸­ï¼Œä¼šå¯¹è¢«åˆ é™¤çš„å­è§†å›¾æ‰§è¡Œé€æ˜åº¦1-0çš„åŠ¨ç”»ï¼ŒåŠ¨ç”»ç»“æŸåï¼Œä¼šåˆ é™¤å­è§†å›¾å’Œå›æ”¶ViewHolderã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164public class DefaultItemAnimator extends SimpleItemAnimator &#123; private ArrayList&lt;RecyclerView.ViewHolder&gt; mPendingRemovals = new ArrayList&lt;&gt;();//å­˜æ”¾ä¸‹ä¸€å¸§è¦æ‰§è¡Œçš„ä¸€ç³»åˆ—addåŠ¨ç”» private ArrayList&lt;RecyclerView.ViewHolder&gt; mPendingAdditions = new ArrayList&lt;&gt;();//å­˜æ”¾æ­£åœ¨æ‰§è¡Œçš„ä¸€æ‰¹addåŠ¨ç”» private ArrayList&lt;MoveInfo&gt; mPendingMoves = new ArrayList&lt;&gt;(); private ArrayList&lt;ChangeInfo&gt; mPendingChanges = new ArrayList&lt;&gt;(); ArrayList&lt;ArrayList&lt;RecyclerView.ViewHolder&gt;&gt; mAdditionsList = new ArrayList&lt;&gt;();//å­˜æ”¾å½“å‰æ­£åœ¨æ‰§è¡Œçš„addåŠ¨ç”» ArrayList&lt;ArrayList&lt;MoveInfo&gt;&gt; mMovesList = new ArrayList&lt;&gt;(); ArrayList&lt;ArrayList&lt;ChangeInfo&gt;&gt; mChangesList = new ArrayList&lt;&gt;(); ArrayList&lt;RecyclerView.ViewHolder&gt; mAddAnimations = new ArrayList&lt;&gt;(); ArrayList&lt;RecyclerView.ViewHolder&gt; mMoveAnimations = new ArrayList&lt;&gt;(); ArrayList&lt;RecyclerView.ViewHolder&gt; mRemoveAnimations = new ArrayList&lt;&gt;(); ArrayList&lt;RecyclerView.ViewHolder&gt; mChangeAnimations = new ArrayList&lt;&gt;(); // æ·»åŠ åŠ¨ç”» @Override public boolean animateAdd(final RecyclerView.ViewHolder holder) &#123; //é‡ç½®åŠ¨ç”»ï¼Œè®¾ç½®é»˜è®¤å·®å€¼å™¨ resetAnimation(holder); //è®¾ç½®é»˜è®¤çŠ¶æ€ï¼Œé€æ˜åº¦ä¸º0 holder.itemView.setAlpha(0); //æ·»åŠ åˆ°å¾…æ‰§è¡Œåˆ—è¡¨ä¸­ mPendingAdditions.add(holder); return true; &#125; //fromXã€fromYè¡¨ç¤ºèµ·å§‹å€¼ //toXã€toYè¡¨ç¤ºç›®æ ‡å€¼ @Override public boolean animateMove(final RecyclerView.ViewHolder holder, int fromX, int fromY, int toX, int toY) &#123; final View view = holder.itemView; //è®¡ç®—å‡ºæœªæ‰§è¡Œçš„å€¼ fromX += (int) holder.itemView.getTranslationX(); fromY += (int) holder.itemView.getTranslationY(); resetAnimation(holder); int deltaX = toX - fromX; int deltaY = toY - fromY; if (deltaX == 0 &amp;&amp; deltaY == 0) &#123; dispatchMoveFinished(holder); return false; &#125; //æŠŠItemä½ç§»åˆ°æœªæ“ä½œå‰çš„ç°ä½ç½® if (deltaX != 0) &#123; view.setTranslationX(-deltaX); &#125; if (deltaY != 0) &#123; view.setTranslationY(-deltaY); &#125; mPendingMoves.add(new MoveInfo(holder, fromX, fromY, toX, toY)); return true; &#125; @Override public void runPendingAnimations() &#123; boolean removalsPending = !mPendingRemovals.isEmpty();//åˆ¤æ–­ç§»é™¤é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º boolean movesPending = !mPendingMoves.isEmpty(); boolean changesPending = !mPendingChanges.isEmpty(); boolean additionsPending = !mPendingAdditions.isEmpty(); //å¦‚æœéƒ½ä¸ºç©ºï¼Œåˆ™æ‰§è¡Œè¿”å› if (!removalsPending &amp;&amp; !movesPending &amp;&amp; !additionsPending &amp;&amp; !changesPending) &#123; // nothing to animate return; &#125; // First, remove stuff // å…ˆæ‰§è¡Œç§»é™¤é˜Ÿåˆ— for (RecyclerView.ViewHolder holder : mPendingRemovals) &#123; animateRemoveImpl(holder); &#125; mPendingRemovals.clear(); // Next, move stuff // æ‰§è¡Œç§»åŠ¨é˜Ÿåˆ— if (movesPending) &#123; final ArrayList&lt;MoveInfo&gt; moves = new ArrayList&lt;&gt;(); moves.addAll(mPendingMoves); mMovesList.add(moves); mPendingMoves.clear(); Runnable mover = new Runnable() &#123; @Override public void run() &#123; for (MoveInfo moveInfo : moves) &#123; animateMoveImpl(moveInfo.holder, moveInfo.fromX, moveInfo.fromY, moveInfo.toX, moveInfo.toY); &#125; moves.clear(); mMovesList.remove(moves); &#125; &#125;; //æ˜¯å¦éœ€è¦åˆ é™¤åŠ¨ç”» if (removalsPending) &#123; View view = moves.get(0).holder.itemView; ViewCompat.postOnAnimationDelayed(view, mover, getRemoveDuration());//ç­‰å¾…åˆ é™¤åŠ¨ç”»ç»“æŸ &#125; else &#123; mover.run(); &#125; &#125; // Next, change stuff, to run in parallel with move animations // if (changesPending) &#123; final ArrayList&lt;ChangeInfo&gt; changes = new ArrayList&lt;&gt;(); changes.addAll(mPendingChanges); mChangesList.add(changes); mPendingChanges.clear(); Runnable changer = new Runnable() &#123; @Override public void run() &#123; for (ChangeInfo change : changes) &#123; animateChangeImpl(change); &#125; changes.clear(); mChangesList.remove(changes); &#125; &#125;; if (removalsPending) &#123; RecyclerView.ViewHolder holder = changes.get(0).oldHolder; ViewCompat.postOnAnimationDelayed(holder.itemView, changer, getRemoveDuration()); &#125; else &#123; changer.run(); &#125; &#125; // Next, add stuff // æ·»åŠ åŠ¨ç”» if (additionsPending) &#123; final ArrayList&lt;RecyclerView.ViewHolder&gt; additions = new ArrayList&lt;&gt;(); additions.addAll(mPendingAdditions); mAdditionsList.add(additions); mPendingAdditions.clear(); Runnable adder = new Runnable() &#123; @Override public void run() &#123; for (RecyclerView.ViewHolder holder : additions) &#123; animateAddImpl(holder); &#125; additions.clear(); mAdditionsList.remove(additions); &#125; &#125;; if (removalsPending || movesPending || changesPending) &#123; long removeDuration = removalsPending ? getRemoveDuration() : 0; long moveDuration = movesPending ? getMoveDuration() : 0; long changeDuration = changesPending ? getChangeDuration() : 0; long totalDelay = removeDuration + Math.max(moveDuration, changeDuration); View view = additions.get(0).itemView; ViewCompat.postOnAnimationDelayed(view, adder, totalDelay); &#125; else &#123; adder.run(); &#125; &#125; &#125; @Override public boolean animateRemove(final RecyclerView.ViewHolder holder) &#123; //æ¸…é™¤ã€ç§»é™¤Item resetAnimation(holder); //å°†ViewHolderæ·»åŠ åˆ°å¾…ç§»é™¤é˜Ÿåˆ— mPendingRemovals.add(holder); return true; &#125;&#125; æºç æµç¨‹ è‡ªå®šä¹‰ItemAnimatorå‚è€ƒ https://www.jianshu.com/p/7171ea362513","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"LiveDataåŸç†","date":"2022-03-08T02:25:29.615Z","path":"wiki/Android/Jetpack/LiveDataåŸç†/","text":"","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"Jetpack","slug":"Android/Jetpack","permalink":"http://airshu.github.io/categories/Android/Jetpack/"}]},{"title":"Androidç³»ç»Ÿæ¶æ„","date":"2022-03-08T02:25:29.614Z","path":"wiki/Android/Androidç³»ç»Ÿæ¶æ„/","text":"ç³»ç»Ÿæ¶æ„Linuxå†…æ ¸å±‚Linux Kernelï¼šAndroid çš„æ ¸å¿ƒç³»ç»ŸæœåŠ¡åŸºäºLinux å†…æ ¸ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ·»åŠ äº†éƒ¨åˆ†Androidä¸“ç”¨çš„é©±åŠ¨ã€‚ç³»ç»Ÿçš„å®‰å…¨æ€§ã€å†…å­˜ç®¡ç†ã€è¿›ç¨‹ç®¡ç†ã€ç½‘ç»œåè®®æ ˆå’Œé©±åŠ¨æ¨¡å‹ç­‰éƒ½ä¾èµ–äºè¯¥å†…æ ¸ã€‚ ç¡¬ä»¶æŠ½è±¡å±‚Hardware Abstraction Layerï¼šå¯¹Linuxå†…æ ¸é©±åŠ¨ç¨‹åºçš„å°è£…ï¼Œå‘ä¸Šæä¾›æ¥å£ï¼Œå‘ä¸‹å±è”½äº†å…·ä½“çš„å®ç°ç»†èŠ‚ã€‚ç¡¬ä»¶æŠ½è±¡å±‚æ˜¯ä½äºæ“ä½œç³»ç»Ÿå†…æ ¸ä¸ç¡¬ä»¶ç”µè·¯ä¹‹é—´çš„æ¥å£å±‚ï¼Œå…¶ç›®çš„åœ¨äºå°†ç¡¬ä»¶æŠ½è±¡åŒ–ï¼Œä¸ºäº†ä¿æŠ¤ç¡¬ä»¶å‚å•†çš„çŸ¥è¯†äº§æƒï¼Œå®ƒéšè—äº†ç‰¹å®šå¹³å°çš„ç¡¬ä»¶æ¥å£ç»†èŠ‚ï¼Œä¸ºæ“ä½œç³»ç»Ÿæä¾›è™šæ‹Ÿç¡¬ä»¶å¹³å°ï¼Œä½¿å…¶å…·æœ‰ç¡¬ä»¶æ— å…³æ€§ï¼Œå¯åœ¨å¤šç§å¹³å°ä¸Šè¿›è¡Œç§»æ¤ã€‚ä»è½¯ç¡¬ä»¶æµ‹è¯•çš„è§’åº¦æ¥çœ‹ï¼Œè½¯ç¡¬ä»¶çš„æµ‹è¯•å·¥ä½œéƒ½å¯åˆ†åˆ«åŸºäºç¡¬ä»¶æŠ½è±¡å±‚æ¥å®Œæˆï¼Œä½¿å¾—è½¯ç¡¬ä»¶æµ‹è¯•å·¥ä½œçš„å¹¶è¡Œè¿›è¡Œæˆä¸ºå¯èƒ½ã€‚é€šä¿—æ¥è®²ï¼Œå°±æ˜¯å°†æ§åˆ¶ç¡¬ä»¶çš„åŠ¨ä½œæ”¾åœ¨ç¡¬ä»¶æŠ½è±¡å±‚ä¸­ã€‚ ç³»ç»Ÿè¿è¡Œå±‚Native C&#x2F;C++ Librariesï¼šç³»ç»Ÿè¿è¡Œå±‚åˆ†ä¸ºC&#x2F;C++è¿è¡Œæ—¶åº“å’ŒAndroidè¿è¡Œæ—¶ç¯å¢ƒã€‚ Androidè¿è¡Œæ—¶ç¯å¢ƒåœ¨4.4ä»¥å‰ä½¿ç”¨çš„æ˜¯Dalvikï¼Œä¹‹åä½¿ç”¨ARTã€‚ä»5.0å¼€å§‹ï¼Œæ­£å¼åºŸå¼ƒäº†Dalvikã€‚ Dalvikä»€ä¹ˆæ˜¯Dalvikï¼Ÿ Dalvikæ˜¯ç”¨äºAndroidå¹³å°çš„Javaè™šæ‹Ÿæœº Dalvikè™šæ‹Ÿæœºæ˜¯Googleç­‰å‚å•†åˆä½œå¼€å‘çš„Androidç§»åŠ¨è®¾å¤‡å¹³å°çš„æ ¸å¿ƒç»„æˆéƒ¨åˆ†ä¹‹ä¸€ å®ƒå¯ä»¥æ”¯æŒå·²è½¬æ¢ä¸º.dex(å³Dalvik Executable)æ ¼å¼çš„Javaåº”ç”¨ç¨‹åºçš„è¿è¡Œ dexæ ¼å¼æ˜¯ä¸“ä¸ºDalvikåº”ç”¨è®¾è®¡çš„ä¸€ç§å‹ç¼©æ ¼å¼ï¼Œé€‚åˆå†…å­˜å’Œå¤„ç†å™¨é€Ÿåº¦æœ‰é™çš„ç³»ç»Ÿ Dalvikç»è¿‡ä¼˜åŒ–ï¼Œå…è®¸åœ¨æœ‰é™çš„å†…å­˜ä¸­åŒæ—¶è¿è¡Œå¤šä¸ªè™šæ‹Ÿæœºçš„å®ä¾‹ï¼Œå¹¶ä¸”æ¯ä¸€ä¸ªDalvikåº”ç”¨ä½œä¸ºç‹¬ç«‹çš„Linuxè¿›ç¨‹æ‰§è¡Œ ç‹¬ç«‹çš„è¿›ç¨‹å¯ä»¥é˜²æ­¢åœ¨è™šæ‹Ÿæœºå´©æºƒçš„æ—¶å€™æ‰€æœ‰ç¨‹åºéƒ½è¢«å…³é—­ ç‰¹ç‚¹ Dalvikæ˜¯ä¾é ä¸€ä¸ªJust-In-Time(JITç¼–è¯‘)ç¼–è¯‘å™¨å»è§£é‡Šå­—èŠ‚ç  Dalvikè™šæ‹Ÿæœºä¸‹è¿è¡ŒJavaæ—¶ï¼Œè¦å°†å­—èŠ‚ç é€šè¿‡å³æ—¶ç¼–è¯‘å™¨ï¼ˆjust in time ï¼ŒJITï¼‰è½¬æ¢ä¸ºæœºå™¨ç ï¼ˆæœºå™¨ç æ‰æ˜¯èƒ½çœŸæ­£è¿è¡Œçš„ï¼‰ï¼Œè¿™ä¼šæ‹–æ…¢åº”ç”¨çš„è¿è¡Œæ•ˆç‡ åº”ç”¨å®‰è£…æ—¶ï¼Œæ‰§è¡ŒdexoptæŒ‡ä»¤ï¼Œå°†dexæ–‡ä»¶ä¼˜åŒ–ä¸ºodexæ–‡ä»¶ åº”ç”¨è¿è¡Œæ—¶ï¼Œä¼šå°†äºŒè¿›åˆ¶ç¿»è¯‘æˆæœºå™¨ç æµç¨‹ Android RuntimeAndroid Runtimeç‰¹ç‚¹ åº”ç”¨åœ¨ç¬¬ä¸€æ¬¡å®‰è£…çš„æ—¶å€™ï¼Œå­—èŠ‚ç å°±ä¼šé¢„å…ˆç¼–è¯‘æˆæœºå™¨ç ï¼Œä½¿å…¶æˆä¸ºçœŸæ­£çš„æœ¬åœ°åº”ç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšé¢„ç¼–è¯‘ï¼ˆAOT,Ahead-Of-Timeï¼‰ åœ¨ç§»é™¤è§£é‡Šä»£ç è¿™ä¸€è¿‡ç¨‹åï¼Œåº”ç”¨ç¨‹åºæ‰§è¡Œå°†æ›´æœ‰æ•ˆç‡ï¼Œå¯åŠ¨æ›´å¿« ç³»ç»Ÿæ€§èƒ½çš„æ˜¾è‘—æå‡ åƒåœ¾å›æ”¶æ–¹é¢çš„ä¼˜åŒ– åº”ç”¨æ¡†æ¶å±‚Application Frameworkï¼šåº”ç”¨æ¡†æ¶å±‚ï¼Œæä¾›äº†åº”ç”¨å¼€å‘çš„æ ¸å¿ƒåŠŸèƒ½ã€‚åœ¨å®é™…å¼€å‘ä¸­ä¼šä½¿ç”¨é‡Œé¢çš„APIã€‚ åç§° æè¿° Activity Manager(æ´»åŠ¨ç®¡ç†å™¨) ç®¡ç†å„ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸä»¥åŠé€šå¸¸çš„å¯¼èˆªå›é€€åŠŸèƒ½ Location Manager(ä½ç½®ç®¡ç†å™¨) æä¾›åœ°ç†ä½ç½®ä»¥åŠå®šä½åŠŸèƒ½æœåŠ¡ Package Manager(åŒ…ç®¡ç†å™¨) ç®¡ç†æ‰€æœ‰å®‰è£…åœ¨Androidç³»ç»Ÿä¸­çš„åº”ç”¨ç¨‹åº Notification Manager(é€šçŸ¥ç®¡ç†å™¨) ä½¿å¾—åº”ç”¨ç¨‹åºå¯ä»¥åœ¨çŠ¶æ€æ ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰çš„æç¤ºä¿¡æ¯ Resource Managerï¼ˆèµ„æºç®¡ç†å™¨ï¼‰ æä¾›åº”ç”¨ç¨‹åºä½¿ç”¨çš„å„ç§éä»£ç èµ„æºï¼Œå¦‚æœ¬åœ°åŒ–å­—ç¬¦ä¸²ã€å›¾ç‰‡ã€å¸ƒå±€æ–‡ä»¶ã€é¢œè‰²æ–‡ä»¶ç­‰ Telephony Manager(ç”µè¯ç®¡ç†å™¨) ç®¡ç†æ‰€æœ‰çš„ç§»åŠ¨è®¾å¤‡åŠŸèƒ½ Window Managerï¼ˆçª—å£ç®¡ç†å™¨ï¼‰ ç®¡ç†æ‰€æœ‰å¼€å¯çš„çª—å£ç¨‹åº Content Providersï¼ˆå†…å®¹æä¾›å™¨ï¼‰ ä½¿å¾—ä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´å¯ä»¥å…±äº«æ•°æ® View Systemï¼ˆè§†å›¾ç³»ç»Ÿï¼‰ æ„å»ºåº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„ä»¶ åº”ç”¨å±‚System Appsï¼šè¿™é‡Œå­˜æ”¾çš„æ˜¯Androidè‡ªå¸¦çš„ä¸€äº›Appï¼Œæ¯”å¦‚ï¼šç”µè¯ã€çŸ­ä¿¡ã€å›¾åº“ã€æ‹æ‘„ç­‰ã€‚ æºç ç›®å½•å¯ä»¥ä» è¿™é‡Œ åœ¨çº¿é˜…è¯»æºç ï¼Œä¹Ÿå¯ä»¥ä» https://mirrors.tuna.tsinghua.edu.cn/help/AOSP/ ä¸‹è½½æºç ã€‚ ä»¥ä¸‹æ˜¯Android9çš„æºç ç›®å½•ç»“æ„ï¼š artï¼šå…¨æ–°çš„ARTè¿è¡Œç¯å¢ƒ dalvlkvmï¼šdalvik è¿è¡Œæ—¶ä»£ç  dex2oatï¼š dexdumpï¼š dexlayoutï¼š disassemblerï¼š openjdk|vmï¼š openjdk|jvmtiï¼š runtimeï¼š simulatorï¼šæ¨¡æ‹Ÿå™¨ toolsï¼š ahatï¼šAndroidå †æ ˆåˆ†æå·¥å…· ammï¼šActionable Memory Metric bionicï¼šgoogleè‡ªå·±å¼€å‘çš„å†…æ ¸åº“ï¼Œæ¯”GNUçš„å†…æ ¸æ›´é€‚åˆç§»åŠ¨è®¾å¤‡ apexï¼š libcï¼šå¯¹ç³»ç»Ÿè°ƒç”¨çš„å°è£… arch-armï¼š arch-arm64ï¼š arch-commonï¼š arch-x86ï¼š arch-x86_64ï¼š stdioï¼šæ ‡å‡†IO toolsï¼šä¸€äº›pythonå·¥å…·è„šæœ¬ libdlï¼š ç”¨äºåŠ¨æ€åº“çš„è£…è½½ libmï¼šæ•°å­¦åº“ upstream-freebsdï¼šå¾ˆå¤šæ¥è‡ªFreeBSDçš„å‡½æ•°åº“ libstdc++ï¼šæ ‡å‡†çš„C++çš„åŠŸèƒ½åº“ linkerï¼šé“¾æ¥æ¨¡å— toolsï¼š bootableï¼šå¯åŠ¨å¼•å¯¼ç›¸å…³ä»£ç  recoveryï¼šè¿™ä¸ªç›®å½•ç”¨äºåˆ›å»ºæ¢å¤ç¨‹åº buildï¼šå­˜æ”¾ç³»ç»Ÿç¼–è¯‘è§„åˆ™åŠgenericç­‰åŸºç¡€å¼€å‘åŒ…é…ç½® bazelï¼š blueprintï¼š makeï¼š commonï¼š coreï¼šæ„å»ºç³»ç»Ÿçš„æ ¸å¿ƒç›®å½• clangï¼š comboï¼šç¼–è¯‘ã€ç¼–è¯‘è®¾ç½® tasksï¼š envsetup.sh targetï¼š boardï¼šæ„å»ºç›®æ ‡è®¾å¤‡çš„é…ç½® productï¼š å“ªäº›appséœ€è¦ç¼–è¯‘ toolsï¼šç¼–è¯‘è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„å·¥å…· acpï¼š aplcheckï¼š atreeï¼š check_prereqï¼š drolddocï¼š rbb2565ï¼š zipalignï¼š pestoï¼š soongï¼š compatibility ctsï¼šAndroidå…¼å®¹æ€§æµ‹è¯•å¥—ä»¶æ ‡å‡† dalvikï¼šdalvikè™šæ‹Ÿæœº dexdumpï¼š dexgenï¼š dexlistï¼š dxï¼š opcode-genï¼š developersï¼šå¼€å‘è€…ç›®å½• buildï¼š demosï¼š docsï¼š samplesï¼š developmentï¼šåº”ç”¨ç¨‹åºå¼€å‘ç›¸å…³ appsï¼šåŒ…å«æ²¡æœ‰éƒ¨ç½²åˆ°ç³»ç»Ÿåˆ°åº”ç”¨ BluetoothDebugï¼š SdkSetupï¼š buildï¼š toolsï¼šæ„å»ºè¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„ä¸€äº›å·¥å…· cmdsï¼šåŒ…å«monkey tool python-packagesï¼š hostï¼š windowsï¼šåŒ…å«Windowsç‰ˆUSBé©±åŠ¨ ideï¼šåŒ…å«å¯¹IDEä¸€äº›é…ç½®ä¿¡æ¯ clion eclipse intellij sdkï¼š scriptsï¼š toolsï¼š apkcheckï¼šAPKæ£€æŸ¥å·¥å…· axlï¼šTCPã€HTTPæµ‹è¯• elftreeï¼š idegenï¼š emulatorï¼š bugreportï¼š ndkï¼š ota_analysisï¼š otaguiï¼š winscopeï¼š monkeyï¼šæ¨¡æ‹Ÿç”¨æˆ·ç‚¹å‡»çš„æµ‹è¯•å·¥å…· vendor_snapshotï¼š vndkï¼š deviceï¼šè®¾å¤‡ç›¸å…³é…ç½® amlogicï¼š commonï¼š genericï¼šåŒ…å«ä¸åŒè®¾å¤‡çš„é…ç½®ä¿¡æ¯ arm64ï¼š artï¼š goldfishï¼š goldfish-openglï¼š x86ï¼š googleï¼š google_carï¼š linaroï¼š mediatekï¼š tiï¼š externalï¼šå¼€æºæ¨¡ç»„ç›¸å…³æ–‡ä»¶ï¼Œå¯ä»¥ç†è§£æˆç¬¬ä¸‰æ–¹åº“çš„ä¾èµ– ImageMagickï¼š FXdivï¼š OpenCL-CTSï¼š aacï¼š adhdï¼š adt-infraï¼š android-clatï¼š androidplotï¼š angleï¼š antlrï¼šhttp://www.antlr.org apache-commons-bcelï¼š apache-commons-compressï¼š apache-commons-mathï¼š apache-harmonyï¼š apache-httpï¼š apache-xmlï¼š autoï¼š clangï¼š bsdiffï¼š chromium-libpacï¼š chromium-traceï¼š chromium-webviewï¼š cpuinfoï¼š curlï¼š dagger2ï¼š dexmakerï¼š exoplayerï¼š liboggï¼š libopusï¼š libcapï¼š libpngï¼š lzmaï¼š skiaï¼šhttp://code.google.com/p/skia/ v8ï¼šJavascriptå¼•æ“ webpï¼šhttp://code.google.com/speed/webp webrtcï¼šhttp://www.webrtc.org frameworksï¼šåº”ç”¨ç¨‹åºæ¡†æ¶ï¼ŒAndroidç³»ç»Ÿæ ¸å¿ƒéƒ¨åˆ†ï¼Œç”±Javaå’ŒC++ç¼–å†™ avï¼š cameraï¼š mediaï¼šCå®ç°ç³»ç»Ÿåª’ä½“åº“ baseï¼š apiï¼š bootï¼š cmdsï¼šé‡è¦å‘½ä»¤ amï¼š app_processï¼š pmï¼šåŒ…ç®¡ç†å·¥å…· configï¼š dataï¼šåŒ…å«å­—ä½“æ–‡ä»¶ã€éŸ³é¢‘æ–‡ä»¶ã€è§†é¢‘æ–‡ä»¶ç­‰ locationï¼š mediaï¼šå¤šåª’ä½“ç›¸å…³åº“ javaï¼š jniï¼š audioeffectï¼š soundpoolï¼š mcaï¼š nativeï¼š multidexï¼š nativeï¼šæœ¬åœ°åº“ openglï¼š2D&#x2F;3D å›¾å½¢API saxï¼šXMLè§£æå™¨ wifiï¼šwifiæ— çº¿ç½‘ç»œ packagesï¼š BackupRestoreConfirmationï¼š DefaultContainerServiceï¼š SystemUIï¼š Shellï¼š VpnDialogsï¼š compileï¼š exï¼š hardwareï¼š layoutlibï¼š libsï¼š nativeï¼š openglï¼šç¬¬ä¸‰æ–¹å›¾å½¢æ¸²æŸ“åº“ servicesï¼š audiomanagerï¼š batteryserviceï¼š displayserviceï¼š gpuserviceï¼š inputflingerï¼š surfaceflingerï¼šå›¾å½¢æ˜¾ç¤ºåº“ï¼Œä¸»è¦è´Ÿè´£å›¾å½¢çš„æ¸²æŸ“ã€å åŠ å’Œç»˜åˆ¶ç­‰åŠŸèƒ½ sensorserviceï¼š vrï¼š hardwareï¼šä¸»è¦æ˜¯ç¡¬ä»¶æŠ½è±¡å±‚çš„ä»£ç  broadcomï¼š googleï¼š libhardwareï¼š libhardware_legacyï¼š nxpï¼š samsungï¼š stï¼š kernelï¼š libcoreï¼šæ ¸å¿ƒåº“ç›¸å…³æ–‡ä»¶ apiï¼š dalvikï¼š domï¼š jsonï¼š xmlï¼š libnativehelperï¼šåŠ¨æ€åº“ï¼Œå®ç°JNIåº“çš„åŸºç¡€ packagesï¼šè‡ªå¸¦Appsåº”ç”¨ç¨‹åºåŒ… appsï¼šç³»ç»ŸApp Bluetoothï¼š Calendarï¼š Camera2ï¼š Dialerï¼š Launcher3ï¼š inputmethodsï¼šè¾“å…¥æ³•ç›®å½• modulesï¼š ArtPrebuilt: DnsResolver: DNSè§£æ Permission: æƒé™ adbï¼šadbå·¥å…· providersï¼šå†…å®¹æä¾›è€…ç›®å½• CalendarProvider: DownloadProvider: MediaProvider: TelephonyProvider: screensaversï¼šå±å¹•ä¿æŠ¤ servicesï¼šé€šä¿¡æœåŠ¡ AlternativeNetworkAccessï¼š Telephony wallpapersï¼šå¢™çº¸ pdkï¼šPlug Development Kit çš„ç¼©å†™ï¼Œæœ¬åœ°å¼€å‘å¥—ä»¶ platform_testingï¼šå¹³å°æµ‹è¯• prebuiltsï¼šx86å’Œarmæ¶æ„ä¸‹é¢„ç¼–è¯‘çš„ä¸€äº›èµ„æº bazelï¼š clangï¼š devtoolsï¼š gccï¼š goï¼š gradle-pluginï¼š jdkï¼š pythonï¼š mlscï¼š ndkï¼š runtimeï¼š toolsï¼š commonï¼š darwln-x86ï¼š linux-x86ï¼š linux-x86_64ï¼š sdkï¼šsdkå’Œæ¨¡æ‹Ÿå™¨ annotationsï¼š apkbuilderï¼šè¿™ä¸ªåºŸå¼ƒäº†ï¼Œæ¨èç›´æ¥ä½¿ç”¨com.android.sdklib.build.ApkBuilder find_javaï¼š find_java2ï¼š sdklauncherï¼š hierarchyviewerï¼šè§†å›¾æŸ¥çœ‹å™¨ systemï¼šåº•å±‚æ–‡ä»¶ç³»ç»Ÿåº“ã€åº”ç”¨å’Œç»„ä»¶ apexï¼š bpfï¼š coreï¼š debuggerdï¼š logcatï¼š toolboxï¼š watchdogdï¼š extrasï¼š ANRdaemonï¼š app-launcherï¼š suï¼š soundï¼šæ’­æ”¾wavæ–‡ä»¶å·¥å…· toolchain-extrasï¼š testï¼š toolchainï¼šå·¥å…·é“¾æ–‡ä»¶ toolsï¼šå·¥å…·æ–‡ä»¶ å‚è€ƒ https://elinux.org/Master-android Android è™šæ‹ŸæœºArtå’ŒDalvikçš„åŒºåˆ« https://source.android.com/devices/tech/dalvik?hl=zh-cn Android é•œåƒä½¿ç”¨å¸®åŠ©","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"}]},{"title":"ViewPager2","date":"2021-05-31T16:00:00.000Z","path":"wiki/Android/UI/ViewPager2/","text":"å‚è€ƒèµ„æ–™","tags":[],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"}]},{"title":"ANRé—®é¢˜åˆ†æå’Œè§£å†³","date":"2021-05-31T16:00:00.000Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/ANRé—®é¢˜åˆ†æå’Œè§£å†³/","text":"ANRç±»å‹æŒ‰é”®æˆ–è§¦æ‘¸äº‹ä»¶åœ¨ç‰¹å®šæ—¶é—´å†…æ— å“åº”1234//ActivityTaskManagerService.java// How long we wait until we timeout on key dispatching.public static final int KEY_DISPATCHING_TIMEOUT_MS = 5 * 1000; BroadcastRecevierè¶…æ—¶12345//ActivityManagerService.java// How long we allow a receiver to run before giving up on it.static final int BROADCAST_FG_TIMEOUT = 10*1000;static final int BROADCAST_BG_TIMEOUT = 60*1000; å‰å°å¹¿æ’­è¶…æ—¶æ—¶é—´æ˜¯ 10sï¼Œåå°å¹¿æ’­è¶…æ—¶æ˜¯ 60sï¼Œè¿™ç±»è¶…æ—¶æ²¡æœ‰æç¤ºæ¡†å¼¹å‡ºã€‚ Serviceè¶…æ—¶12345678ActiveServices.java// How long we wait for a service to finish executing.static final int SERVICE_TIMEOUT = 20 * 1000 * Build.HW_TIMEOUT_MULTIPLIER;// How long we wait for a service to finish executing.static final int SERVICE_BACKGROUND_TIMEOUT = SERVICE_TIMEOUT * 10; å½“å‘ç”ŸANRæ—¶ï¼Œä¼šå°†ç›¸åº”ä¿¡æ¯è®°å½•åˆ°&#x2F;data&#x2F;anr&#x2F;traces.txt é™ä½ANRçš„ä¸€äº›æŠ€å·§ å°†æ‰€æœ‰è€—æ—¶æ“ä½œï¼Œæ¯”å¦‚è®¿é—®ç½‘ç»œï¼ŒSocketé€šä¿¡ï¼ŒæŸ¥è¯¢å¤§é‡SQLè¯­å¥ã€IOæ“ä½œã€å¤æ‚é€»è¾‘è®¡ç®—ç­‰éƒ½æ”¾åœ¨å­çº¿ç¨‹ä¸­å» onCreate å’Œ onResume å›è°ƒä¸­å°½é‡é¿å…è€—æ—¶çš„ä»£ç  View çš„ onOnTouchevent å’Œ onclick ä¸­é¿å…è€—æ—¶çš„ä»£ç  AMSç³»ç»Ÿæ—¶é—´è°ƒèŠ‚åŸç† ç¨‹åºç­‰å¾…åŸç†åˆ†æ å‚è€ƒ","tags":[],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–","date":"2021-05-31T16:00:00.000Z","path":"wiki/Android/æ€§èƒ½ä¼˜åŒ–/å¯åŠ¨é€Ÿåº¦ä¼˜åŒ–/","text":"å¯åŠ¨æµç¨‹åº”ç”¨çš„å¯åŠ¨æµç¨‹å¦‚ä¸‹ï¼š SystemServer è´Ÿè´£åº”ç”¨çš„å¯åŠ¨æµç¨‹è°ƒåº¦ã€è¿›ç¨‹çš„åˆ›å»ºå’Œç®¡ç†ã€ çª—å£çš„åˆ›å»ºå’Œç®¡ç†(StartingWindow å’Œ AppWindow) ç­‰ åº”ç”¨è¿›ç¨‹è¢« SystemServer åˆ›å»ºåï¼Œè¿›è¡Œä¸€ç³»åˆ—çš„è¿›ç¨‹åˆå§‹åŒ–ã€ ç»„ä»¶åˆå§‹åŒ–(Activityã€Serviceã€ContentProviderã€Broadcast)ã€ ä¸»ç•Œé¢çš„æ„å»ºã€å†…å®¹å¡«å……ç­‰ æ¦‚å¿µå†·å¯åŠ¨å½“å¯åŠ¨åº”ç”¨æ—¶ï¼Œåå°æ²¡æœ‰è¯¥åº”ç”¨çš„è¿›ç¨‹ï¼Œè¿™æ—¶ç³»ç»Ÿä¼šé‡ æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹åˆ†é…ç»™è¯¥åº”ç”¨ï¼Œç„¶åå†æ ¹æ®å¯åŠ¨çš„å‚æ•°ï¼Œå¯ åŠ¨å¯¹åº”çš„è¿›ç¨‹ç»„ä»¶ï¼Œè¿™ä¸ªå¯åŠ¨æ–¹å¼å°±æ˜¯å†·å¯åŠ¨ çƒ­å¯åŠ¨å½“å¯åŠ¨åº”ç”¨æ—¶ï¼Œåå°å·²æœ‰è¯¥åº”ç”¨çš„è¿›ç¨‹(ä¾‹:æŒ‰ back é”®ã€home é”®ï¼Œåº”ç”¨è™½ç„¶ä¼šé€€å‡ºï¼Œä½†æ˜¯è¯¥åº”ç”¨çš„è¿›ç¨‹æ˜¯ä¾ç„¶ä¼šä¿ ç•™åœ¨åå°ï¼Œå¯è¿›å…¥ä»»åŠ¡åˆ—è¡¨æŸ¥çœ‹)ï¼Œæ‰€ä»¥åœ¨å·²æœ‰è¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œ è¿™ç§å¯åŠ¨ä¼šä»å·²æœ‰çš„è¿›ç¨‹ä¸­æ¥å¯åŠ¨å¯¹åº”çš„è¿›ç¨‹ç»„ä»¶ï¼Œè¿™ä¸ªæ–¹å¼å« çƒ­å¯åŠ¨ æ¸©å¯åŠ¨æ¸©å¯åŠ¨åŒ…å«äº†åœ¨å†·å¯åŠ¨æœŸé—´å‘ç”Ÿçš„éƒ¨åˆ†æ“ä½œï¼›åŒæ—¶ï¼Œå®ƒçš„å¼€é”€è¦æ¯”çƒ­å¯åŠ¨é«˜ã€‚ ä¼˜åŒ–æ–¹æ¡ˆçº¿ç¨‹ä¼˜åŒ–çº¿ç¨‹ä¼˜åŒ–ä¸»è¦æ˜¯å‡å°‘ CPU è°ƒåº¦å¸¦æ¥çš„æ³¢åŠ¨ï¼Œè®©å¯åŠ¨æ—¶é—´æ›´ç¨³å®šã€‚å¦‚æœ å¯åŠ¨è¿‡ç¨‹ä¸­æœ‰å¤ªå¤šçš„çº¿ç¨‹ä¸€èµ·å¯åŠ¨ï¼Œä¼šç»™ CPU å¸¦æ¥éå¸¸å¤§çš„å‹åŠ›ï¼Œå°¤ å…¶æ˜¯æ¯”è¾ƒä½ç«¯çš„æœºå™¨ã€‚è¿‡å¤šçš„çº¿ç¨‹åŒæ—¶è·‘ä¼šè®©ä¸»çº¿ç¨‹çš„ Sleep å’Œ Runnable çŠ¶æ€å˜å¤šï¼Œ å¢åŠ äº†åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦ï¼Œä¼˜åŒ–çš„è¿‡ç¨‹ä¸­è¦æ³¨æ„ï¼š æ§åˆ¶çº¿ç¨‹æ•°é‡ï¼ˆä½¿ç”¨çº¿ç¨‹æ± ï¼‰ æ£€æŸ¥çº¿ç¨‹é—´çš„é” ï¼Œé˜²æ­¢ä¾èµ–ç­‰å¾… ä½¿ç”¨åˆç†çš„å¯åŠ¨æ¶æ„ ç³»ç»Ÿè°ƒåº¦ä¼˜åŒ– å¯åŠ¨è¿‡ç¨‹ä¸­å‡å°‘ç³»ç»Ÿè°ƒç”¨ï¼šé¿å…ä¸ AMSã€WMS ç«äº‰é”ã€‚å¯åŠ¨ è¿‡ç¨‹ä¸­æœ¬èº« AMS å’Œ WMS çš„å·¥ä½œå°±å¾ˆå¤šï¼Œä¸” AMS å’Œ WMS å¾ˆå¤šæ“ä½œéƒ½æ˜¯å¸¦é”çš„ï¼Œå¦‚æœæ­¤æ—¶ App å†æœ‰è¿‡å¤šçš„Binder è°ƒç”¨ ä¸ AMSã€WMS é€šä¿¡ï¼ŒSystemServer å°±ä¼šå‡ºç°å¤§é‡çš„é”ç­‰å¾… å¯åŠ¨è¿‡ç¨‹ä¸­ä¸è¦å¯åŠ¨å­è¿›ç¨‹ï¼Œå¦‚æœå¥½å‡ ä¸ªè¿›ç¨‹åŒæ—¶å¯åŠ¨ï¼Œç³»ç»Ÿè´Ÿ æ‹…åˆ™ä¼šåŠ å€ï¼ŒSystemServer ä¹Ÿä¼šæ›´ç¹å¿™ å¯åŠ¨è¿‡ç¨‹ä¸­é™¤äº† Activity ä¹‹å¤–çš„ç»„ä»¶å¯åŠ¨è¦è°¨æ…ï¼Œ å› ä¸ºå››å¤§ç»„ ä»¶çš„å¯åŠ¨éƒ½æ˜¯åœ¨ä¸»çº¿ç¨‹çš„ï¼Œå¦‚æœç»„ä»¶å¯åŠ¨æ…¢ï¼Œå ç”¨äº† Message é€š é“ï¼Œä¹Ÿä¼šå½±å“åº”ç”¨çš„å¯åŠ¨é€Ÿåº¦ Application å’Œä¸» Activity çš„ onCreate ä¸­å¼‚æ­¥åˆå§‹åŒ–æŸäº›ä»£ç  GCçš„ä¼˜åŒ–å°½é‡å‡å°‘GCçš„æ¬¡æ•°ï¼Œæ¯”å¦‚ï¼š é¿å…è¿›è¡Œå¤§é‡çš„å­—ç¬¦ä¸²æ“ä½œï¼Œç‰¹åˆ«æ˜¯åºåˆ—åŒ–å’Œååºåˆ—åŒ– é¢‘ç¹åˆ›å»ºçš„å¯¹è±¡éœ€è¦è€ƒè™‘å¤ç”¨ è½¬ç§»åˆ° Native å®ç° IOçš„ä¼˜åŒ–å¯åŠ¨è¿‡ç¨‹ä¸­è´Ÿè½½æ¯”è¾ƒé«˜ï¼Œæœ‰è®¸å¤šç³»ç»Ÿ IO éƒ½åœ¨æ­¤æ—¶å‘ç”Ÿï¼Œè¿™æ—¶å€™ IO çš„ æ€§èƒ½ä¸‹é™ä¼šæ¯”è¾ƒå¿«ï¼Œæ­¤æ—¶ App ä¸­çš„ IO æ“ä½œä¼šæ¯”å¹³æ—¶æ›´æ…¢ä¸€äº›ï¼Œå°¤å…¶ æ˜¯åœ¨æ€§èƒ½æ¯”è¾ƒå·®çš„æœºå™¨ä¸Šã€‚IO åˆ†ç½‘ç»œ IO å’Œç£ç›˜ IO ï¼Œå¯åŠ¨è¿‡ç¨‹ä¸­ä¸å»ºè®®è¿›è¡Œç½‘ç»œ IOã€‚ å¸ƒå±€é¡µé¢ä¼˜åŒ– é€šè¿‡å‡å°‘å†—ä½™æˆ–è€…åµŒå¥—å¸ƒå±€æ¥é™ä½è§†å›¾å±‚æ¬¡ç»“æ„ ç”¨ ViewStub æ›¿ä»£åœ¨å¯åŠ¨è¿‡ç¨‹ä¸­ä¸éœ€è¦æ˜¾ç¤ºçš„ UI æ§ä»¶ ä½¿ç”¨è‡ªå®šä¹‰ View æ›¿ä»£å¤æ‚çš„ View å åŠ  windowBackgroundå¼€å¯é¢„è§ˆçª—å£ï¼Œè®¾ç½®ä¸»é¢˜èƒŒæ™¯ï¼Œåˆ™å¯ä»¥è®©ç”¨æˆ·çœ‹èµ·æ¥èˆ’æœäº›ã€‚ å‚è€ƒ https://developer.android.com/topic/performance/vitals/launch-time https://juejin.cn/post/6844904080926572558","tags":[],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"}]},{"title":"adbå·¥å…·","date":"2021-05-31T16:00:00.000Z","path":"wiki/Android/æœªåˆ†ç±»/adbå·¥å…·/","text":"æŸ¥è¯¢è®¾å¤‡ adb devices List of devices attached emulator-5554 device emulator-5556 device emulator-5558 device å°†å‘½ä»¤å‘é€è‡³ç‰¹å®šè®¾å¤‡ adb -s serial_number command adb -s emulator-5556 install helloWorld.apk æ‹‰å–&#x2F;æ¨é€æ–‡ä»¶ adb pull remote local adb push local remote adb push foo.txt /sdcard/foo.txt å¼€å¯&#x2F;åœæ­¢adbæœåŠ¡å™¨ adb start-server adb kill-server å°†æ—¥å¿—è¾“å‡ºåˆ°å±å¹• adb logcat [option] [filter-specs] è·å–å®ä¾‹åºåˆ—å· adb get-serialno æŸ¥çœ‹åº”ç”¨ç‰ˆæœ¬å· adb shell dumpsys package åŒ…å | findstr version è°ƒç”¨Activity Manager adb shell am start -a android.intent.action.VIEW å‘½ä»¤ è¯´æ˜ start [options] intent å¯åŠ¨ intent æŒ‡å®šçš„ Activityã€‚ startservice [options] intent å¯åŠ¨ intent æŒ‡å®šçš„ Service force-stop package å¼ºè¡Œåœæ­¢ä¸ packageï¼ˆåº”ç”¨çš„åŒ…åç§°ï¼‰å…³è”çš„æ‰€æœ‰åº”ç”¨ã€‚ kill [options] package ç»ˆæ­¢ä¸ packageï¼ˆåº”ç”¨çš„åŒ…åç§°ï¼‰å…³è”çš„æ‰€æœ‰è¿›ç¨‹ã€‚æ­¤å‘½ä»¤ä»…ç»ˆæ­¢å¯å®‰å…¨ç»ˆæ­¢ä¸”ä¸ä¼šå½±å“ç”¨æˆ·ä½“éªŒçš„è¿›ç¨‹ã€‚ kill-all ç»ˆæ­¢æ‰€æœ‰åå°è¿›ç¨‹ã€‚ instrument [options] component ä½¿ç”¨ Instrumentation å®ä¾‹å¯åŠ¨ç›‘æ§ã€‚é€šå¸¸ï¼Œç›®æ ‡ component æ˜¯è¡¨å• test_package&#x2F;runner_classã€‚ profile start process file å¯åŠ¨ process çš„åˆ†æå™¨ï¼Œå°†ç»“æœå†™å…¥ fileã€‚ set-debug-app [options] package å°†åº”ç”¨ package è®¾ä¸ºè°ƒè¯•ã€‚ clear-debug-app ä½¿ç”¨ set-debug-app æ¸…é™¤ä»¥å‰é’ˆå¯¹è°ƒè¯•ç”¨é€”è®¾ç½®çš„è½¯ä»¶åŒ…ã€‚ monitor [options] å¯åŠ¨å¯¹å´©æºƒæˆ– ANR çš„ç›‘æ§ã€‚ screen-compat {on| off} package æ§åˆ¶ package çš„å±å¹•å…¼å®¹æ€§æ¨¡å¼ display-size [reset|widthxheight] æ›¿æ¢æ¨¡æ‹Ÿå™¨&#x2F;è®¾å¤‡æ˜¾ç¤ºå°ºå¯¸ã€‚æ­¤å‘½ä»¤å¯¹äºåœ¨ä¸åŒå°ºå¯¸çš„å±å¹•ä¸Šæµ‹è¯•æ‚¨çš„åº”ç”¨éå¸¸æœ‰ç”¨ï¼Œå®ƒæ”¯æŒä½¿ç”¨å¤§å±è®¾å¤‡æ¨¡ä»¿å°å±å¹•åˆ†è¾¨ç‡ï¼ˆåä¹‹äº¦ç„¶ï¼‰ã€‚ç¤ºä¾‹ï¼šam display-size 1280x800 display-density dpi æ›¿æ¢æ¨¡æ‹Ÿå™¨&#x2F;è®¾å¤‡æ˜¾ç¤ºå¯†åº¦ã€‚æ­¤å‘½ä»¤å¯¹äºåœ¨ä¸åŒå¯†åº¦çš„å±å¹•ä¸Šæµ‹è¯•æ‚¨çš„åº”ç”¨éå¸¸æœ‰ç”¨ï¼Œå®ƒæ”¯æŒä½¿ç”¨ä½å¯†åº¦å±å¹•åœ¨é«˜å¯†åº¦ç¯å¢ƒç¯å¢ƒä¸Šè¿›è¡Œæµ‹è¯•ï¼ˆåä¹‹äº¦ç„¶ï¼‰ã€‚ç¤ºä¾‹ï¼šam display-density 480 è½¯ä»¶åŒ…ç®¡ç†å™¨ adb shell pm uninstall com.example.MyApp å‘½ä»¤ è¯´æ˜ list packages [options] filter è¾“å‡ºæ‰€æœ‰è½¯ä»¶åŒ…ï¼Œæˆ–è€…ï¼Œä»…è¾“å‡ºåŒ…åç§°åŒ…å«filterä¸­çš„æ–‡æœ¬çš„è½¯ä»¶åŒ…ã€‚ list permission-groups è¾“å‡ºæ‰€æœ‰å·²çŸ¥çš„æƒé™ç»„ã€‚ list features è¾“å‡ºç³»ç»Ÿçš„æ‰€æœ‰åŠŸèƒ½ã€‚ list libraries è¾“å‡ºå½“å‰è®¾å¤‡æ”¯æŒçš„æ‰€æœ‰åº“ã€‚ install [options] path å°†è½¯ä»¶åŒ…ï¼ˆé€šè¿‡pathæŒ‡å®šï¼‰å®‰è£…åˆ°ç³»ç»Ÿã€‚ clear package åˆ é™¤ä¸è½¯ä»¶åŒ…å…³è”çš„æ‰€æœ‰æ•°æ®ã€‚ set-install-location location æ›´æ”¹é»˜è®¤å®‰è£…ä½ç½®ã€‚ å±å¹•æˆªå›¾ adb shell screencap /sdcard/screen.png å½•åˆ¶è§†é¢‘ adb shell screenrecord /sdcard/demo.mp4 å…¶ä»–Shellå‘½ä»¤ adb shell ls /sdcard Shellå‘½ä»¤ | è¯´æ˜dumpsys | å°†ç³»ç»Ÿæ•°æ®è½¬å‚¨åˆ°å±å¹•dumpstate | å°†çŠ¶æ€è½¬å‚¨åˆ°æ–‡ä»¶dmesg | å°†å†…æ ¸è°ƒè¯•æ¶ˆæ¯è¾“å‡ºåˆ°å±å¹•ã€‚start |å¯åŠ¨ï¼ˆé‡å¯ï¼‰æ¨¡æ‹Ÿå™¨&#x2F;è®¾å¤‡å®ä¾‹ã€‚stop |åœæ­¢æ‰§è¡Œæ¨¡æ‹Ÿå™¨&#x2F;è®¾å¤‡å®ä¾‹ã€‚ adb shell dumpsys activity log anr 2 å¯ä»¥æ‰“å¼€anrçš„messagequeue adb shell dumpsys activity a æŸ¥çœ‹activityè¯¦ç»†ä¿¡æ¯ï¼Œå¦‚æ˜¾ç¤ºå¤§å°ï¼Œå¸ƒå±€ç­‰ç­‰ adb shell dumpsys activity | grep mFocusedActivity adb shell &quot;dumpsys activity top | grep ACTIVITY&quot; æ˜¾ç¤ºå½“å‰çš„Activity adb shell dumpsys activity processes è¿›ç¨‹ä¿¡æ¯ trimmemory adb shell &quot;ps | grep åŒ…å&quot; æŸ¥çœ‹åº”ç”¨çš„è¿›ç¨‹id adb shell dumpsys activity recents adb shell dumpsys activity broadcasts å¯ä»¥æŸ¥çœ‹å‰å°å’Œåå°broadcastè¯¦ç»†ä¿¡æ¯(å‘é€æ—¶é—´ï¼Œ æ‰€æœ‰åº”ç”¨å¤„ç†æ—¶é—´ï¼Œç›‘å¬å¹¿æ’­çš„æ‰€æœ‰åˆ—è¡¨) adb shell dumpsys activity intents adb shell dumpsys activity oom adb shell dumpsys input | grep Focus æŸ¥çœ‹ç„¦ç‚¹çª—å£ //æŸ¥çœ‹å½“å‰activityåå­— adb shell dumpsys activity activities | grep mFocusedActivity # 8.0ä»¥ä¸‹ adb shell dumpsys activity activities | grep mResumedActivity # 8.0 adb shell ps | findstr com.xxxx.xxx æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ adb shell kill -10 pid è§¦å‘åƒåœ¾å›æ”¶ adb kill-server &amp;&amp; adb server &amp;&amp; adb shell é‡åˆ¶adbè¿æ¥ adb shell dumpsys activity activities æŸ¥çœ‹å½“å‰ä»»åŠ¡æ ˆ gfxinfo123456789101112131415161718192021222324252627adb shell dumpsys gfxinfo &lt; PACKAGE_NAME &gt;Applications Graphics Acceleration Info:Uptime: 83871844 Realtime: 83871844** Graphics info for pid 23289 [com.xxx.xxx] **Stats since: 74696703302664nsTotal frames rendered: 0 æœ¬æ¬¡dumpæœé›†äº†0å¸§çš„ä¿¡æ¯Janky frames: 0 (0.00%) å¡é¡¿ç‡50th percentile: 4950ms90th percentile: 4950ms95th percentile: 4950ms99th percentile: 4950msNumber Missed Vsync: 0 å‚ç›´åŒæ­¥å¤±è´¥çš„å¸§Number High input latency: 0 å¤„ç†inputæ—¶é—´è¶…æ—¶çš„å¸§æ•°Number Slow UI thread: 0 å› UIçº¿ç¨‹ä¸Šçš„å·¥ä½œå¯¼è‡´è¶…æ—¶çš„å¸§æ•°Number Slow bitmap uploads: 0 å› bitmapçš„åŠ è½½è€—æ—¶çš„å¸§æ•°Number Slow issue draw commands: 0 å› ç»˜åˆ¶å¯¼è‡´è€—æ—¶çš„å¸§æ•°Number Frame deadline missed: 0//Android 6.0ç‰ˆæœ¬ä¸ºgfxinfoæä¾›äº†ä¸€ä¸ªæ–°çš„å‘½ä»¤â€”â€”framestatsï¼Œå…¶ä½œç”¨æ˜¯å¯ä»¥ä»æœ€è¿‘çš„å¸§ä¸­è·å–éå¸¸è¯¦ç»†çš„å¸§è€—æ—¶ä¿¡æ¯adb shell dumpsys gfxinfo &lt; PACKAGE_NAME &gt; framestats æ¨¡æ‹Ÿç”¨æˆ·è¡Œä¸º1234567891011å‘é€é”®ç›˜äº‹ä»¶adb shell input keyevent â€œvalueâ€å‘é€é¼ æ ‡äº‹ä»¶(Touch)ï¼šadb shell sendevent [device] [type] [code] [value]input text input keyevent input tap input swipe å‚è€ƒ å®˜æ–¹æ–‡æ¡£ http://blog.hsujee.com/2017/09/25/Android/Framework/2017-09-25-Android%E6%A8%A1%E6%8B%9F%E8%BE%93%E5%85%A5%E6%93%8D%E4%BD%9C%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%8E%E5%8E%9F%E7%90%86/","tags":[],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æœªåˆ†ç±»","slug":"Android/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Android/%E6%9C%AA%E5%88%86%E7%B1%BB/"}]},{"title":"IO","date":"2021-05-28T16:00:00.000Z","path":"wiki/Java/åŸºç¡€/IO/","text":"BIOï¼šBlockIOï¼ŒåŒæ­¥é˜»å¡IOã€‚å‘èµ·è¯·æ±‚ â€“&gt;ä¸€ç›´é˜»å¡â€“&gt;å¤„ç†å®Œæˆ NIOï¼šNew IO Non-Block IOï¼ŒåŒæ­¥éé˜»å¡IOã€‚ Selectorä¸»åŠ¨è½®è¯¢channelâ€“&gt;å¤„ç†è¯·æ±‚â€“&gt;å¤„ç†å®Œæˆ AIOï¼šå¼‚æ­¥éé˜»å¡IOã€‚å‘èµ·è¯·æ±‚â€“&gt; é€šçŸ¥å›è°ƒ NIOä¸»è¦æœ‰ä¸‰å¤§æ ¸å¿ƒéƒ¨åˆ†:Channel(é€šé“)ï¼ŒBuffer(ç¼“å†²åŒº), Selectorã€‚ä¼ ç»ŸIOåŸºäºå­—èŠ‚æµå’Œå­—ç¬¦æµè¿›è¡Œæ“ä½œï¼Œè€ŒNIOåŸºäºChannelå’ŒBuffer(ç¼“å†²åŒº)è¿›è¡Œæ“ä½œï¼Œæ•°æ®æ€»æ˜¯ä»é€šé“è¯»å–åˆ°ç¼“å†²åŒºä¸­ï¼Œæˆ–è€…ä»ç¼“å†²åŒºå†™å…¥åˆ°é€šé“ä¸­ã€‚Selector(é€‰æ‹©åŒº)ç”¨äºç›‘å¬å¤šä¸ªé€šé“çš„äº‹ä»¶(æ¯”å¦‚:è¿æ¥æ‰“å¼€ï¼Œæ•°æ®åˆ° è¾¾)ã€‚å› æ­¤ï¼Œå•ä¸ªçº¿ç¨‹å¯ä»¥ç›‘å¬å¤šä¸ªæ•°æ®é€šé“ã€‚ NIOå’Œä¼ ç»ŸIO(ä¸€ä¸‹ç®€ç§°IO)ä¹‹é—´ç¬¬ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«æ˜¯ï¼ŒIOæ˜¯é¢å‘æµçš„ï¼ŒNIOæ˜¯é¢å‘ç¼“å†²åŒºçš„ã€‚ Java IOé¢å‘æµæ„å‘³ç€æ¯æ¬¡ä»æµä¸­è¯»ä¸€ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ï¼Œç›´è‡³è¯»å–æ‰€æœ‰å­—èŠ‚ï¼Œå®ƒä»¬æ²¡æœ‰è¢«ç¼“å­˜åœ¨ä»»ä½• åœ°æ–¹ã€‚æ­¤å¤–ï¼Œå®ƒä¸èƒ½å‰åç§»åŠ¨æµä¸­çš„æ•°æ®ã€‚å¦‚æœéœ€è¦å‰åç§»åŠ¨ä»æµä¸­è¯»å–çš„æ•°æ®ï¼Œéœ€è¦å…ˆå°†å®ƒç¼“ å­˜åˆ°ä¸€ä¸ªç¼“å†²åŒºã€‚NIOçš„ç¼“å†²å¯¼å‘æ–¹æ³•ç•¥æœ‰ä¸åŒã€‚æ•°æ®è¯»å–åˆ°ä¸€ä¸ªå®ƒç¨åå¤„ç†çš„ç¼“å†²åŒºï¼Œéœ€è¦æ—¶ å¯åœ¨ç¼“å†²åŒºä¸­å‰åç§»åŠ¨ã€‚è¿™å°±å¢åŠ äº†å¤„ç†è¿‡ç¨‹ä¸­çš„çµæ´»æ€§ã€‚ä½†æ˜¯ï¼Œè¿˜éœ€è¦æ£€æŸ¥æ˜¯å¦è¯¥ç¼“å†²åŒºä¸­åŒ… å«æ‰€æœ‰æ‚¨éœ€è¦å¤„ç†çš„æ•°æ®ã€‚è€Œä¸”ï¼Œéœ€ç¡®ä¿å½“æ›´å¤šçš„æ•°æ®è¯»å…¥ç¼“å†²åŒºæ—¶ï¼Œä¸è¦è¦†ç›–ç¼“å†²åŒºé‡Œå°šæœªå¤„ ç†çš„æ•°æ®ã€‚ IOçš„å„ç§æµæ˜¯é˜»å¡çš„ã€‚è¿™æ„å‘³ç€ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨read() æˆ– write()æ—¶ï¼Œè¯¥çº¿ç¨‹è¢«é˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€ äº›æ•°æ®è¢«è¯»å–ï¼Œæˆ–æ•°æ®å®Œå…¨å†™å…¥ã€‚è¯¥çº¿ç¨‹åœ¨æ­¤æœŸé—´ä¸èƒ½å†å¹²ä»»ä½•äº‹æƒ…äº†ã€‚NIOçš„éé˜»å¡æ¨¡å¼ï¼Œä½¿ ä¸€ä¸ªçº¿ç¨‹ä»æŸé€šé“å‘é€è¯·æ±‚è¯»å–æ•°æ®ï¼Œä½†æ˜¯å®ƒä»…èƒ½å¾—åˆ°ç›®å‰å¯ç”¨çš„æ•°æ®ï¼Œå¦‚æœç›®å‰æ²¡æœ‰æ•°æ®å¯ç”¨ æ—¶ï¼Œå°±ä»€ä¹ˆéƒ½ä¸ä¼šè·å–ã€‚è€Œä¸æ˜¯ä¿æŒçº¿ç¨‹é˜»å¡ï¼Œæ‰€ä»¥ç›´è‡³æ•°æ®å˜å¾—å¯ä»¥è¯»å–ä¹‹å‰ï¼Œè¯¥çº¿ç¨‹å¯ä»¥ç»§ ç»­åšå…¶ä»–çš„äº‹æƒ…ã€‚ éé˜»å¡å†™ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚å†™å…¥ä¸€äº›æ•°æ®åˆ°æŸé€šé“ï¼Œä½†ä¸éœ€è¦ç­‰å¾…å®ƒå®Œ å…¨å†™å…¥ï¼Œè¿™ä¸ªçº¿ç¨‹åŒæ—¶å¯ä»¥å»åšåˆ«çš„äº‹æƒ…ã€‚ çº¿ç¨‹é€šå¸¸å°†éé˜»å¡IOçš„ç©ºé—²æ—¶é—´ç”¨äºåœ¨å…¶å®ƒé€šé“ä¸Šæ‰§ è¡ŒIOæ“ä½œï¼Œæ‰€ä»¥ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ç°åœ¨å¯ä»¥ç®¡ç†å¤šä¸ªè¾“å…¥å’Œè¾“å‡ºé€šé“(channel)ã€‚ åŸºäºå­—èŠ‚çš„IOæ“ä½œ åŸºäºå­—ç¬¦çš„IOæ“ä½œ å¸¸ç”¨ç±»èŠ‚ç‚¹æµFileInputStream&#x2F;FileOutputStreamï¼Œ FileReader&#x2F;FileWriter è¿™å››ä¸ªç±»æ˜¯ä¸“é—¨æ“ä½œæ–‡ä»¶æµçš„ï¼Œç”¨æ³•é«˜åº¦ç›¸ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå‰é¢ä¸¤ä¸ªæ˜¯æ“ä½œå­—èŠ‚æµï¼Œ åé¢ä¸¤ä¸ªæ˜¯æ“ä½œå­—ç¬¦æµã€‚å®ƒä»¬éƒ½ä¼šç›´æ¥æ“ä½œæ–‡ä»¶æµï¼Œç›´æ¥ä¸ OS åº•å±‚äº¤äº’ã€‚å› æ­¤ä»–ä»¬ä¹Ÿè¢«ç§°ä¸ºèŠ‚ç‚¹æµã€‚ åŒ…è£…æµPrintStream&#x2F;PrintWriter&#x2F;Scanner PrintStream å¯ä»¥å°è£…(åŒ…è£…)ç›´æ¥ä¸æ–‡ä»¶äº¤äº’çš„èŠ‚ç‚¹æµå¯¹è±¡ OutputStream, ä½¿ å¾—ç¼–ç¨‹äººå‘˜å¯ä»¥å¿½ç•¥è®¾å¤‡åº•å±‚çš„å·®å¼‚ï¼Œè¿›è¡Œä¸€è‡´çš„ IO æ“ä½œã€‚å› æ­¤è¿™ç§æµä¹Ÿç§°ä¸ºå¤„ç†æµæˆ–è€…åŒ…è£…æµã€‚ PrintWriter é™¤äº†å¯ä»¥åŒ…è£…å­—èŠ‚æµ OutputStream ä¹‹å¤–ï¼Œè¿˜èƒ½åŒ…è£…å­—ç¬¦æµ Writer Scanner å¯ä»¥åŒ…è£…é”®ç›˜è¾“å…¥ï¼Œæ–¹ä¾¿åœ°å°†é”®ç›˜è¾“å…¥çš„å†…å®¹è½¬æ¢æˆæˆ‘ä»¬æƒ³è¦çš„æ•°æ®ç±» å‹ã€‚ å­—ç¬¦ä¸²æµStringReader&#x2F;StringWriter è¿™ä¸¤ä¸ªæ“ä½œçš„æ˜¯ä¸“é—¨æ“ä½œ String å­—ç¬¦ä¸²çš„æµï¼Œå…¶ä¸­ StringReader èƒ½ä» String ä¸­ æ–¹ä¾¿åœ°è¯»å–æ•°æ®å¹¶ä¿å­˜åˆ° char æ•°ç»„ï¼Œè€Œ StringWriter åˆ™å°†å­—ç¬¦ä¸²ç±»å‹çš„æ•°æ®å†™ å…¥åˆ° StringBuffer ä¸­(å› ä¸º String ä¸å¯å†™)ã€‚ è½¬æ¢æµInputStreamReader&#x2F;OutputStreamReader è¿™ä¸¤ä¸ªç±»å¯ä»¥å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµï¼Œè¢«ç§°ä¸ºå­—èŠ‚æµä¸å­—ç¬¦æµä¹‹é—´çš„æ¡¥æ¢ã€‚æˆ‘ä»¬ ç»å¸¸åœ¨è¯»å–é”®ç›˜è¾“å…¥(System.in)æˆ–ç½‘ç»œé€šä¿¡çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨è¿™ä¸¤ä¸ªç±» ç¼“å†²æµBufferedReader&#x2F;BufferedWriter ï¼Œ BufferedInputStream&#x2F;BufferedOutputStream æ€»ç»“ FileInputStream&#x2F;FileOutputStream éœ€è¦é€ä¸ªå­—èŠ‚å¤„ç†åŸå§‹äºŒè¿›åˆ¶æµçš„æ—¶ å€™ä½¿ç”¨ï¼Œæ•ˆç‡ä½ä¸‹ FileReader&#x2F;FileWriter éœ€è¦ç»„ä¸ªå­—ç¬¦å¤„ç†çš„æ—¶å€™ä½¿ç”¨ StringReader&#x2F;StringWriter éœ€è¦å¤„ç†å­—ç¬¦ä¸²çš„æ—¶å€™ï¼Œå¯ä»¥å°†å­—ç¬¦ä¸²ä¿å­˜ä¸º å­—ç¬¦æ•°ç»„ PrintStream&#x2F;PrintWriter ç”¨æ¥åŒ…è£… FileOutputStream å¯¹è±¡ï¼Œæ–¹ä¾¿ç›´æ¥å°† String å­—ç¬¦ä¸²å†™å…¥æ–‡ä»¶ Scanner ç”¨æ¥åŒ…è£… System.in æµï¼Œå¾ˆæ–¹ä¾¿åœ°å°†è¾“å…¥çš„ String å­—ç¬¦ä¸²è½¬æ¢ æˆéœ€è¦çš„æ•°æ®ç±»å‹ InputStreamReader&#x2F;OutputStreamReader , å­—èŠ‚å’Œå­—ç¬¦çš„è½¬æ¢æ¡¥æ¢ï¼Œåœ¨ç½‘ ç»œé€šä¿¡æˆ–è€…å¤„ç†é”®ç›˜è¾“å…¥çš„æ—¶å€™ç”¨ BufferedReader&#x2F;BufferedWriter ï¼Œ BufferedInputStream&#x2F;BufferedOutputStream ï¼Œ ç¼“å†²æµç”¨æ¥åŒ…è£…å­—èŠ‚æµåè€… å­—ç¬¦æµï¼Œæå‡ IO æ€§èƒ½ï¼ŒBufferedReader è¿˜å¯ä»¥æ–¹ä¾¿åœ°è¯»å–ä¸€è¡Œï¼Œç®€åŒ–ç¼–ç¨‹ã€‚","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"åŸºç¡€","slug":"Java/åŸºç¡€","permalink":"http://airshu.github.io/categories/Java/%E5%9F%BA%E7%A1%80/"}]},{"title":"String","date":"2021-05-28T16:00:00.000Z","path":"wiki/Java/åŸºç¡€/String/","text":"StringBuilderå’ŒStringBuffer å’ŒStringç±»ä¸åŒçš„æ˜¯ï¼ŒStringBufferå’ŒStringBuilderç±»çš„å¯¹è±¡èƒ½å¤Ÿè¢«å¤šæ¬¡çš„ä¿®æ”¹ï¼Œå¹¶ä¸”ä¸äº§ç”Ÿæ–°çš„æœªä½¿ç”¨å¯¹è±¡ã€‚StringBuilder ç±»åœ¨Java5ä¸­è¢«æå‡ºï¼Œå®ƒå’ŒStringBufferä¹‹é—´çš„æœ€å¤§ä¸åŒåœ¨äºStringBuilderçš„æ–¹æ³•ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"åŸºç¡€","slug":"Java/åŸºç¡€","permalink":"http://airshu.github.io/categories/Java/%E5%9F%BA%E7%A1%80/"}]},{"title":"åƒåœ¾å›æ”¶æœºåˆ¶","date":"2021-05-28T16:00:00.000Z","path":"wiki/Java/è™šæ‹Ÿæœº/åƒåœ¾å›æ”¶æœºåˆ¶/","text":"å¯¹è±¡å­˜æ´» GCç®—æ³• è¿è¡Œæ—¶æ•°æ®åŒº å¯è¾¾æ€§åˆ†æä¸å¼•ç”¨è®¡æ•°å¼•ç”¨è®¡æ•°æ³•ç»™å¯¹è±¡å¢åŠ ä¸€ä¸ªå¼•ç”¨è®¡æ•°å™¨ï¼Œæ¯å½“æœ‰ä¸€ä¸ªåœ°æ–¹å¼•ç”¨å®ƒæ—¶ï¼Œè®¡æ•°å™¨å°±+1;å½“å¼•ç”¨å¤±æ•ˆæ—¶ï¼Œè®¡æ•°å™¨å°±-1;ä»»ä½•æ—¶åˆ»è®¡æ•°å™¨ä¸º 0 çš„å¯¹è±¡å°±æ˜¯ä¸èƒ½å†è¢«ä½¿ç”¨çš„ï¼Œå³å¯¹è±¡å·²â€œæ­»â€ã€‚åœ¨ä¸»æµçš„ JVM ä¸­æ²¡æœ‰é€‰ç”¨å¼•ç”¨è®¡æ•°æ³•æ¥ç®¡ç†å†…å­˜ï¼Œæœ€ä¸»è¦çš„åŸå› æ˜¯å¼•ç”¨è®¡æ•°æ³•æ— æ³•è§£å†³å¯¹è±¡çš„å¾ªç¯å¼•ç”¨é—®é¢˜ã€‚ å¯è¾¾æ€§åˆ†æç®—æ³•é€šè¿‡ä¸€ç³»åˆ—ç§°ä¸ºâ€œGC Rootsâ€çš„å¯¹è±¡ä½œä¸ºèµ·å§‹ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢èµ°è¿‡çš„è·¯å¾„ç§°ä¸ºâ€œå¼•ç”¨é“¾â€ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ° GC Roots æ²¡æœ‰ä»» ä½•çš„å¼•ç”¨é“¾ç›¸è¿æ—¶(ä» GC Roots åˆ°è¿™ä¸ªå¯¹è±¡ä¸å¯è¾¾)æ—¶ï¼Œè¯æ˜æ­¤å¯¹è±¡ä¸å¯ç”¨ã€‚ä»¥ä¸‹å›¾ä¸ºä¾‹: å¯¹è±¡ Object5 â€”Object7 ä¹‹é—´è™½ç„¶å½¼æ­¤è¿˜æœ‰è”ç³»ï¼Œä½†æ˜¯å®ƒä»¬åˆ° GC Roots æ˜¯ä¸å¯ è¾¾çš„ï¼Œå› æ­¤å®ƒä»¬ä¼šè¢«åˆ¤å®šä¸ºå¯å›æ”¶å¯¹è±¡ã€‚ åœ¨ Java è¯­è¨€ä¸­ï¼Œå¯ä½œä¸º GC Roots çš„å¯¹è±¡åŒ…å«ä»¥ä¸‹å‡ ç§: è™šæ‹Ÿæœºæ ˆ(æ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨)ä¸­å¼•ç”¨çš„å¯¹è±¡ã€‚ æ–¹æ³•åŒºä¸­é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ æ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ æœ¬åœ°æ–¹æ³•æ ˆä¸­(Native æ–¹æ³•)å¼•ç”¨çš„å¯¹è±¡ åœ¨ JDK1.2 ä¹‹åï¼ŒJava å¯¹å¼•ç”¨çš„æ¦‚å¿µåšäº†æ‰©å……ï¼Œå°†å¼•ç”¨åˆ†ä¸ºå¼ºå¼•ç”¨(StrongReference)ã€è½¯å¼•ç”¨(Soft Reference)ã€å¼±å¼•ç”¨(Weak Reference)å’Œè™šå¼•ç”¨ (Phantom Reference)å››ç§ï¼Œè¿™å››ç§å¼•ç”¨çš„å¼ºåº¦ä¾æ¬¡é€’å‡ã€‚ å³ä½¿åœ¨å¯è¾¾æ€§åˆ†æç®—æ³•ä¸­ä¸å¯è¾¾çš„å¯¹è±¡ï¼Œä¹Ÿå¹¶éâ€éæ­»ä¸å¯â€çš„ï¼Œè¿™æ—¶å€™ä»–ä»¬æš‚æ—¶å¤„åœ¨â€ç¼“åˆ‘â€é˜¶æ®µã€‚è¦å®£å‘Šä¸€ä¸ªå¯¹è±¡çš„çœŸæ­£æ­»äº¡ï¼Œè‡³å°‘è¦ç»å†ä¸¤æ¬¡æ ‡è®°è¿‡ç¨‹: å¦‚æœå¯¹è±¡åœ¨è¿›è¡Œå¯è¾¾æ€§åˆ†æä¹‹åå‘ç°æ²¡æœ‰ä¸ GC Roots ç›¸è¿æ¥çš„å¼•ç”¨é“¾ï¼Œé‚£å®ƒ å°†ä¼šè¢«ç¬¬ä¸€æ¬¡æ ‡è®°å¹¶ä¸”è¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰çš„æ¡ä»¶æ˜¯æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ã€‚å½“å¯¹è±¡æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•æˆ–è€…finalize()æ–¹æ³•å·²ç»è¢« JVM è°ƒ ç”¨è¿‡ï¼Œè™šæ‹Ÿæœºä¼šå°†è¿™ä¸¤ç§æƒ…å†µéƒ½è§†ä¸ºâ€æ²¡æœ‰å¿…è¦æ‰§è¡Œâ€ï¼Œæ­¤æ—¶çš„å¯¹è±¡æ‰æ˜¯çœŸæ­£â€ æ­»â€çš„å¯¹è±¡ã€‚ å¦‚æœè¿™ä¸ªå¯¹è±¡è¢«åˆ¤å®šä¸ºæœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«æ”¾ç½®åœ¨ ä¸€ä¸ªå«åš F-Queue çš„é˜Ÿåˆ—ä¹‹ä¸­ï¼Œå¹¶åœ¨ç¨åç”±ä¸€ä¸ªè™šæ‹Ÿæœºè‡ªåŠ¨å»ºç«‹çš„ã€ä½ä¼˜å…ˆçº§çš„Finalizer çº¿ç¨‹å»æ‰§è¡Œå®ƒ(è¿™é‡Œæ‰€è¯´çš„æ‰§è¡ŒæŒ‡çš„æ˜¯è™šæ‹Ÿæœºä¼šè§¦å‘finalize() æ–¹æ³•)ã€‚finalize()æ–¹æ³•æ˜¯å¯¹è±¡é€ƒè„±æ­»äº¡çš„æœ€åä¸€æ¬¡æœºä¼šï¼Œç¨å GC å°†å¯¹ F-Queueä¸­çš„å¯¹è±¡è¿›è¡Œç¬¬äºŒæ¬¡å°è§„æ¨¡æ ‡è®°ï¼Œå¦‚æœå¯¹è±¡åœ¨finalize()ä¸­æˆåŠŸæ‹¯æ•‘è‡ªå·±(åªéœ€ è¦é‡æ–°ä¸å¼•ç”¨é“¾ä¸Šçš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡å»ºç«‹èµ·å…³è”å…³ç³»å³å¯)ï¼Œé‚£åœ¨ç¬¬äºŒæ¬¡æ ‡è®°æ—¶å®ƒå°†ä¼šè¢«ç§»é™¤å‡ºâ€å³å°†å›æ”¶â€çš„é›†åˆ;å¦‚æœå¯¹è±¡è¿™æ—¶å€™è¿˜æ˜¯æ²¡æœ‰é€ƒè„±ï¼Œé‚£åŸºæœ¬ä¸Šå®ƒå°±æ˜¯çœŸçš„è¢«å›æ”¶äº†ã€‚ å›æ”¶æ–¹æ³•åŒºæ–¹æ³•åŒº(æ°¸ä¹…ä»£)çš„åƒåœ¾å›æ”¶ä¸»è¦æ”¶é›†ä¸¤éƒ¨åˆ†å†…å®¹:åºŸå¼ƒå¸¸é‡å’Œæ— ç”¨ç±»ã€‚å›æ”¶åºŸå¼ƒå¸¸é‡å’Œå›æ”¶ Java å †ä¸­çš„å¯¹è±¡ååˆ†ç±»ä¼¼ã€‚ä»¥å¸¸é‡æ± ä¸­å­—é¢é‡(ç›´æ¥é‡)çš„å› æ”¶ä¸ºä¾‹ï¼Œå‡å¦‚ä¸€ä¸ªå­—ç¬¦ä¸²â€abcâ€å·²ç»è¿›å…¥äº†å¸¸é‡æ± ä¸­ï¼Œä½†æ˜¯å½“å‰ç³»ç»Ÿæ²¡æœ‰ä»»ä½•ä¸€ä¸ª String å¯¹è±¡å¼•ç”¨å¸¸é‡æ± ä¸­çš„â€abcâ€å¸¸é‡ï¼Œä¹Ÿæ²¡æœ‰å…¶ä»–åœ°æ–¹å¼•ç”¨è¿™ä¸ªå­—é¢é‡ï¼Œå¦‚æœæ­¤æ—¶å‘ç”Ÿ GC å¹¶ä¸”æœ‰å¿…è¦çš„è¯ï¼Œè¿™ä¸ªâ€abcâ€å¸¸é‡ä¼šè¢«ç³»ç»Ÿæ¸…ç†å‡ºå¸¸é‡æ± ã€‚å¸¸é‡æ± ä¸­çš„å…¶ä»–ç±»(æ¥å£)ã€æ–¹æ³•ã€å­—æ®µçš„ç¬¦å·å¼•ç”¨ä¹Ÿä¸æ­¤ç±»ä¼¼ã€‚ åˆ¤å®šä¸€ä¸ªç±»æ˜¯å¦æ˜¯â€æ— ç”¨ç±»â€åˆ™ç›¸å¯¹å¤æ‚å¾ˆå¤šã€‚ç±»éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªæ¡ä»¶æ‰ä¼š è¢«ç®—æ˜¯â€æ— ç”¨çš„ç±»â€ã€‚ è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶(å³åœ¨ Java å †ä¸­ä¸å­˜åœ¨ä»»ä½•è¯¥ç±»çš„å®ä¾‹) åŠ è½½è¯¥ç±»çš„ ClassLoader å·²è¢«å›æ”¶ è¯¥ç±»å¯¹åº”çš„ Class å¯¹è±¡æ²¡æœ‰ä»»ä½•å…¶ä»–åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³• åƒåœ¾å›æ”¶ç®—æ³•æ ‡è®°-æ¸…é™¤ç®—æ³•å¤åˆ¶ç®—æ³•ï¼ˆæ–°ç”Ÿä»£å›æ”¶ç®—æ³•ï¼‰æ ‡è®°æ•´ç†ç®—æ³•ï¼ˆè€å¹´ä»£å›æ”¶ç®—æ³•ï¼‰åˆ†ä»£æ”¶é›†ç®—æ³•","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"http://airshu.github.io/tags/JVM/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è™šæ‹Ÿæœº","slug":"Java/è™šæ‹Ÿæœº","permalink":"http://airshu.github.io/categories/Java/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}]},{"title":"å†…å­˜åˆ†é…ç­–ç•¥","date":"2021-05-28T16:00:00.000Z","path":"wiki/Java/è™šæ‹Ÿæœº/å†…å­˜åˆ†é…ç­–ç•¥/","text":"JVMæ ˆå¸§åŠæ–¹æ³•è°ƒç”¨è¯¦è§£ JMMã€Java Memory Model å¯¹è±¡ä¼˜å…ˆåœ¨Edenfåˆ†é…å¤§å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£é•¿æœŸå­˜æ´»çš„å¯¹è±¡å°†è¿›å…¥è€å¹´ä»£åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤å®šç©ºé—´åˆ†é…æ‹…ä¿","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"},{"name":"JVM","slug":"JVM","permalink":"http://airshu.github.io/tags/JVM/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"è™šæ‹Ÿæœº","slug":"Java/è™šæ‹Ÿæœº","permalink":"http://airshu.github.io/categories/Java/%E8%99%9A%E6%8B%9F%E6%9C%BA/"}]},{"title":"AQSè§£æ","date":"2021-05-28T16:00:00.000Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/AQSè§£æ/","text":"","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"CountDownLatch","date":"2021-05-28T16:00:00.000Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/CountDownLatch/","text":"è¯´æ˜CountDownLatchæ˜¯åœ¨java1.5è¢«å¼•å…¥ï¼Œä½¿ä¸€ä¸ªçº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹å„è‡ªæ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œã€‚ CountDownLatchæ˜¯é€šè¿‡å…±äº«é”å®ç°çš„ã€‚åœ¨åˆ›å»ºCountDownLatchä¸­æ—¶ï¼Œä¼šä¼ é€’ä¸€ä¸ªintç±»å‹å‚æ•°countï¼Œè¯¥å‚æ•°æ˜¯â€œé”è®¡æ•°å™¨â€çš„åˆå§‹çŠ¶æ€ã€‚å½“æŸçº¿ç¨‹è°ƒç”¨è¯¥CountDownLatchå¯¹è±¡çš„await()æ–¹æ³•æ—¶ï¼Œè¯¥çº¿ç¨‹ä¼šç­‰å¾…â€œå…±äº«é”â€å¯ç”¨æ—¶ï¼Œæ‰èƒ½è·å–å…±äº«é”è¿›è€Œç»§ç»­è¿è¡Œã€‚è€Œâ€œå…±äº«é”â€å¯ç”¨çš„æ¡ä»¶ï¼Œå°±æ˜¯é”è®¡æ•°å™¨çš„å€¼ä¸º0ï¼è€Œé”è®¡æ•°å™¨çš„åˆå§‹å€¼ä¸ºcountï¼Œæ¯å½“ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¯¥CountDownLatchå¯¹è±¡çš„countDown()æ–¹æ³•æ—¶ï¼Œé”è®¡æ•°å™¨å‡1ï¼›ç›´åˆ°é”è®¡æ•°å™¨ä¸º0æ—¶ï¼Œå‰é¢çš„ç­‰å¾…çº¿ç¨‹æ‰èƒ½ç»§ç»­è¿è¡Œï¼ ä½¿ç”¨åœºæ™¯ è®©å¤šä¸ªçº¿ç¨‹ç­‰å¾…ï¼šæ¯”å¦‚æ¨¡æ‹Ÿå¤šçº¿ç¨‹å¹¶å‘ è®©å•ä¸ªçº¿ç¨‹ç­‰å¾…ï¼šç­‰å¾…å…¶ä»–çº¿ç¨‹éƒ½å¤„ç†å®Œåï¼Œå†æ‰§è¡ŒæŸä¸ªæ“ä½œ å®ç°åŸç†å‚è€ƒ https://www.cnblogs.com/skywang12345/p/3533887.html https://zhuanlan.zhihu.com/p/148231820","tags":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"}],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"ReentrantLock","date":"2021-05-28T16:00:00.000Z","path":"wiki/Java/å¹¶å‘ç¼–ç¨‹/ReentrantLock/","text":"æ¦‚è¿°ReentrantLockæ˜¯é‡å…¥é”ã€‚å®ƒå®ç°äº†Lockæ¥å£ï¼Œæ˜¯åŸºäºAQS(ä¸€ç§ç”¨äºæ„å»ºåŒæ­¥å™¨çš„æ¡†æ¶)æ„é€ å‡ºæ¥çš„ä¸€ç§åŒæ­¥å™¨ã€‚ ä¸synchronizedç›¸æ¯”å¢åŠ äº†ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œ ä¸»è¦æœ‰ä»¥ä¸‹ä¸‰é¡¹:ç­‰å¾…å¯ä¸­æ–­ã€å¯å®ç°å…¬å¹³é”ã€é”å¯ä»¥ç»‘å®šå¤šä¸ªæ¡ä»¶ã€‚","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"}]},{"title":"é›†åˆçŸ¥è¯†ç‚¹æ€»ç»“","date":"2021-05-28T16:00:00.000Z","path":"wiki/Java/é›†åˆ/é›†åˆçŸ¥è¯†ç‚¹æ€»ç»“/","text":"é€šè¿‡è¿­ä»£å™¨fail-fastå±æ€§ï¼Œä½ æ˜ç™½äº†ä»€ä¹ˆ? æ¯æ¬¡æˆ‘ä»¬å°è¯•è·å–ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼ŒIterator fail- fastå±æ€§æ£€æŸ¥å½“å‰é›†åˆç»“æ„é‡Œçš„ä»»ä½•æ”¹åŠ¨ã€‚å¦‚æœå‘ç°ä»»ä½•æ”¹åŠ¨ï¼Œå®ƒæŠ›å‡º ConcurrentModificationExceptionã€‚Collectionä¸­æ‰€æœ‰Iteratorçš„å®ç°éƒ½æ˜¯æŒ‰fail-fastæ¥è®¾è®¡çš„(ConcurrentHashMapå’ŒCopyOnWriteArrayListè¿™ç±»å¹¶å‘é›†åˆç±»é™¤å¤–) fail-fastä¸fail-safeæœ‰ä»€ä¹ˆåŒºåˆ«? Iteratorçš„fail-fastå±æ€§ä¸å½“å‰çš„é›†åˆå…±åŒèµ·ä½œç”¨ï¼Œå› æ­¤å®ƒä¸ä¼š å—åˆ°é›†åˆä¸­ä»»ä½•æ”¹åŠ¨çš„å½±å“ã€‚Java.utilåŒ…ä¸­çš„æ‰€æœ‰é›†åˆç±»éƒ½è¢«è®¾è®¡ä¸ºfail-fastçš„ï¼Œè€Œ java.util.concurrentä¸­çš„é›†åˆç±»éƒ½ä¸ºfail-safeçš„ã€‚Fail-fastè¿­ä»£å™¨æŠ›å‡º ConcurrentModificationExceptionï¼Œè€Œ fail-safe è¿­ ä»£ å™¨ ä» ä¸ æŠ› å‡º ConcurrentModificationExceptionã€‚","tags":[],"categories":[{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é›†åˆ","slug":"Java/é›†åˆ","permalink":"http://airshu.github.io/categories/Java/%E9%9B%86%E5%90%88/"}]},{"title":"AsyncTaskåŸç†è§£æ","date":"2021-05-28T16:00:00.000Z","path":"wiki/Android/åŸºç¡€/AsyncTaskåŸç†è§£æ/","text":"","tags":[],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"ä½œç”¨åŸŸå‡½æ•°","date":"2021-05-28T16:00:00.000Z","path":"wiki/ç¨‹åºè¯­è¨€/Kotlin/ä½œç”¨åŸŸå‡½æ•°/","text":"","tags":[],"categories":[{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"Kotlin","slug":"ç¨‹åºè¯­è¨€/Kotlin","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Kotlin/"}]},{"title":"Fragment","date":"2021-05-01T02:01:01.000Z","path":"wiki/Android/åŸºç¡€/Fragment/","text":"æ¥æºFragmentçš„æ¦‚å¿µæ¥æºäºAndroid3.0ï¼Œä¸»è¦ç›®çš„æ˜¯ä¸ºå¤§å±å¹•ï¼ˆå¦‚å¹³æ¿ç”µè„‘ï¼‰ä¸Šæ›´åŠ åŠ¨æ€å’Œçµæ´»çš„ç•Œé¢è®¾è®¡æä¾›æ”¯æŒã€‚ä»–å¯æ·»åŠ åˆ°Activityä¸­ï¼Œæ‰€ä»¥å¤šä¸ªActivityå¯æ·»åŠ åŒä¸€ä¸ªFragmentï¼Œæé«˜äº†ä»£ç å¤ç”¨æ€§ã€‚ ç”Ÿå‘½å‘¨æœŸ Fragmentè·ŸActivityçš„ç”Ÿå‘½å‘¨æœŸç±»ä¼¼ï¼Œä¸è¿‡åªæœ‰åœ¨æ˜¾ç¤ºè°ƒç”¨addToBackStack()æ—¶ï¼Œç³»ç»Ÿæ‰ä¼šå°†ç‰‡æ®µæ”¾å…¥ç”±å®¿ä¸» Activity ç®¡ç†çš„è¿”å›æ ˆã€‚ ç”Ÿå‘½å‘¨æœŸæ–¹æ³•onCreate() ç³»ç»Ÿä¼šåœ¨åˆ›å»ºç‰‡æ®µæ—¶è°ƒç”¨æ­¤æ–¹æ³•ã€‚å½“ç‰‡æ®µç»å†æš‚åœæˆ–åœæ­¢çŠ¶æ€ç»§è€Œæ¢å¤åï¼Œ onCreateView() ç³»ç»Ÿä¼šåœ¨ç‰‡æ®µé¦–æ¬¡ç»˜åˆ¶å…¶ç•Œé¢æ—¶è°ƒç”¨æ­¤æ–¹æ³•ã€‚å¦‚è¦ä¸ºç‰‡æ®µç»˜åˆ¶ç•Œé¢ï¼Œä»æ­¤æ–¹æ³•ä¸­è¿”å›çš„ View å¿…é¡»æ˜¯ç‰‡æ®µå¸ƒå±€çš„æ ¹è§†å›¾ã€‚å¦‚æœç‰‡æ®µæœªæä¾›ç•Œé¢ï¼Œå¯ä»¥è¿”å› nullã€‚ æˆ‘ä»¬åˆ›å»ºè§†å›¾çš„æ–¹æ³•ã€‚ onViewCreated onCrateViewæ‰§è¡Œåç«‹å³æ‰§è¡Œï¼Œæ­¤æ—¶å¯ä»¥è·å–view onPause() ç³»ç»Ÿä¼šå°†æ­¤æ–¹æ³•ä½œä¸ºç”¨æˆ·ç¦»å¼€ç‰‡æ®µçš„ç¬¬ä¸€ä¸ªä¿¡å·ï¼ˆä½†å¹¶ä¸æ€»æ˜¯æ„å‘³ç€æ­¤ç‰‡æ®µä¼šè¢«é”€æ¯ï¼‰è¿›è¡Œè°ƒç”¨ã€‚ onAttach() åœ¨ç‰‡æ®µå·²ä¸ Activity å…³è”æ—¶è¿›è¡Œè°ƒç”¨ï¼ˆActivity ä¼ é€’åˆ°æ­¤æ–¹æ³•å†…ï¼‰ã€‚ onActivityCreated() å½“ Activity çš„ onCreate() æ–¹æ³•å·²è¿”å›æ—¶è¿›è¡Œè°ƒç”¨ã€‚æ­¤æ—¶å¯ä»¥è¿›è¡Œfragmentä¸activityçš„äº¤æ¢æ“ä½œã€‚ onDestroyView() åœ¨ç§»é™¤ä¸ç‰‡æ®µå…³è”çš„è§†å›¾å±‚æ¬¡ç»“æ„æ—¶è¿›è¡Œè°ƒç”¨ã€‚ onDetach() åœ¨å–æ¶ˆç‰‡æ®µä¸ Activity çš„å…³è”æ—¶è¿›è¡Œè°ƒç”¨ã€‚ Activityå’ŒFragmentçš„ç”Ÿå‘½å‘¨æœŸ Activity, Fragmentå’ŒFragmentManagerç”Ÿå‘½å‘¨æœŸ æ³¨æ„ç‚¹ æ³¨æ„ç”Ÿå‘½å‘¨æœŸçš„å¯¹åº”ï¼Œæ¯”å¦‚Eventbusçš„æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œ äº‹åŠ¡ä¸ºä»€ä¹ˆFragmentéœ€è¦äº‹åŠ¡å‘¢ï¼Ÿæˆ‘çš„ç†è§£æ˜¯ï¼Œç”±äºéœ€è¦å¯¹Fragmentè¿›è¡Œæ·»åŠ ã€ç§»é™¤ã€æ›¿æ¢ç­‰æ“ä½œï¼Œé‚£ä¹ˆFragmentManagerçš„å‡ºç°æ˜¯åˆé€‚çš„ï¼Œè€ŒFragmentManagerå†…éƒ¨ä½¿ç”¨äº‹åŠ¡çš„æ–¹å¼æ¥è¿›è¡Œç®¡ç†ï¼Œå°±èƒ½ä¿è¯å„ç§æ“ä½œçš„åŸå­æ€§äº†ã€‚ åŸºæœ¬ç”¨æ³• 123456789101112// 1.è·å–FragmentManagerï¼Œåœ¨æ´»åŠ¨ä¸­å¯ä»¥ç›´æ¥é€šè¿‡è°ƒç”¨getFragmentManager()æ–¹æ³•å¾—åˆ° fragmentManager = getSupportFragmentManager();// fragmentManager = getFragmentManager(); // 2.å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œé€šè¿‡è°ƒç”¨beginTransaction()æ–¹æ³•å¼€å¯ transaction = fragmentManager.beginTransaction(); // 3.å‘å®¹å™¨å†…æ·»åŠ æˆ–æ›¿æ¢ç¢ç‰‡ï¼Œä¸€èˆ¬ä½¿ç”¨replace()æ–¹æ³•å®ç°ï¼Œéœ€è¦ä¼ å…¥å®¹å™¨çš„idå’Œå¾…æ·»åŠ çš„ç¢ç‰‡å®ä¾‹ transaction.replace(R.id.testFragment, fragment); //fr_containerä¸èƒ½ä¸ºfragmentå¸ƒå±€ï¼Œå¯ä½¿ç”¨çº¿æ€§å¸ƒå±€ç›¸å¯¹å¸ƒå±€ç­‰ã€‚ // 4.ä½¿ç”¨addToBackStack()æ–¹æ³•ï¼Œå°†äº‹åŠ¡æ·»åŠ åˆ°è¿”å›æ ˆä¸­ï¼Œå¡«å…¥çš„æ˜¯ç”¨äºæè¿°è¿”å›æ ˆçš„ä¸€ä¸ªåå­— transaction.addToBackStack(null); // 5.æäº¤äº‹ç‰©,è°ƒç”¨commit()æ–¹æ³•æ¥å®Œæˆ transaction.commit(); æœ‰å‡ ä¸ªæ³¨æ„ç‚¹ï¼š FragmentActivityå’ŒFragmentéƒ½æœ‰è‡ªå·±çš„FragmentManager äº‹åŠ¡çš„æ“ä½œå¦‚ä½•é€šä¿¡å¯é€šè¿‡ä»¥ä¸‹ä¸€äº›æ–¹å¼è¿›è¡Œé€šä¿¡ï¼š Framgnetä¸­ç›´æ¥è·å–Activityçš„å¼•ç”¨ Activityä¸­é€šè¿‡FragmentManagerè·å–å¯¹åº”Fragmentçš„å¼•ç”¨ é€šè¿‡å‡½æ•°å›è°ƒ setArgumentså°†å‚æ•°ä¼ é€’ç»™Fragment å…±äº«ViewModel Fragment Result API ç›´æ¥è·å–å¼•ç”¨123456//Fragmentä¸­è·å–Activityä¸­çš„æ§ä»¶View listView = getActivity().findViewById(R.id.list);//Activityä¸­è·å–æŸä¸ªFragmentExampleFragment fragment = (ExampleFragment) getSupportFragmentManager().findFragmentById(R.id.example_fragment); è¿™ç§æ–¹å¼è™½ç„¶èƒ½æ–¹ä¾¿çš„è·å–ï¼Œä½†ä»ä»£ç è®¾è®¡çš„è§’åº¦çœ‹æ˜¯ä¸åˆé€‚çš„ï¼Œè€¦åˆæ€§å¤ªé«˜äº† å‡½æ•°å›è°ƒ1234567891011121314151617181920212223242526272829303132333435363738public static class FragmentA extends ListFragment &#123; ... // Container Activity must implement this interface //å®šä¹‰å›è°ƒæ¥å£ public interface OnArticleSelectedListener &#123; public void onArticleSelected(Uri articleUri); &#125; ...&#125;public static class FragmentA extends ListFragment &#123; OnArticleSelectedListener listener; ... @Override public void onAttach(Context context) &#123; super.onAttach(context); try &#123; //å®¿ä¸»å®ç°è¯¥æ¥å£ï¼Œcontextå°±æ˜¯å®¿ä¸»Activity listener = (OnArticleSelectedListener) context; &#125; catch (ClassCastException e) &#123; throw new ClassCastException(context.toString() + &quot; must implement OnArticleSelectedListener&quot;); &#125; &#125; @Override public void onListItemClick(ListView l, View v, int position, long id) &#123; // Append the clicked item&#x27;s row ID with the content provider Uri Uri noteUri = ContentUris.withAppendedId(ArticleColumns.CONTENT_URI, id); // Send the event and Uri to the host activity // å°†æ•°æ®ä¼ ç»™Activityï¼Œå®¿ä¸»ä¸­æ“ä½œå…¶ä»–Fragment listener.onArticleSelected(noteUri); &#125; ...&#125; å…±äº«ViewModelä¸å®¿ä¸»Activityé€šä¿¡123456789101112131415161718192021222324252627282930313233343536373839404142public class ItemViewModel extends ViewModel &#123; private final MutableLiveData&lt;Item&gt; selectedItem = new MutableLiveData&lt;Item&gt;(); public void selectItem(Item item) &#123; selectedItem.setValue(item); &#125; public LiveData&lt;Item&gt; getSelectedItem() &#123; return selectedItem; &#125;&#125;public class MainActivity extends AppCompatActivity &#123; private ItemViewModel viewModel; @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); //æ³¨æ„ViewModelProviderçš„å‚æ•° viewModel = new ViewModelProvider(this).get(ItemViewModel.class); viewModel.getSelectedItem().observe(this, item -&gt; &#123; // Perform an action with the latest item data &#125;); &#125;&#125;public class ListFragment extends Fragment &#123; private ItemViewModel viewModel; @Override public void onViewCreated(@NonNull View view, Bundle savedInstanceState) &#123; super.onViewCreated(view, savedInstanceState); //æ³¨æ„requireActivity viewModel = new ViewModelProvider(requireActivity()).get(ItemViewModel.class); ... items.setOnClickListener(item -&gt; &#123; // Set a new item viewModel.select(item); &#125;); &#125;&#125; å°†ViewModelæ”¾åˆ°åŒä¸€èŒƒå›´ï¼Œè¿™æ ·è¿”å›çš„æ˜¯åŒä¸€ä¸ªViewModelã€‚ ä¸å…¶ä»–Fragmenté€šä¿¡123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354public class ListViewModel extends ViewModel &#123; private final MutableLiveData&lt;Set&lt;Filter&gt;&gt; filters = new MutableLiveData&lt;&gt;(); private final LiveData&lt;List&lt;Item&gt;&gt; originalList = ...; private final LiveData&lt;List&lt;Item&gt;&gt; filteredList = ...; public LiveData&lt;List&lt;Item&gt;&gt; getFilteredList() &#123; return filteredList; &#125; public LiveData&lt;Set&lt;Filter&gt;&gt; getFilters() &#123; return filters; &#125; public void addFilter(Filter filter) &#123; ... &#125; public void removeFilter(Filter filter) &#123; ... &#125;&#125;public class ListFragment extends Fragment &#123; private ListViewModel viewModel; @Override public void onViewCreated(@NonNull View view, Bundle savedInstanceState) &#123; super.onViewCreated(view, savedInstanceState); //ä¿è¯åœ¨åŒä¸€ä¸ªèŒƒå›´ viewModel = new ViewModelProvider(requireActivity()).get(ListViewModel.class); viewModel.getFilteredList().observe(getViewLifecycleOwner(), list -&gt; &#123; // Update the list UI &#125;); &#125;&#125;public class FilterFragment extends Fragment &#123; private ListViewModel viewModel; @Override public void onViewCreated(@NonNull View view, Bundle savedInstanceState) &#123; //ä¿è¯åœ¨åŒä¸€ä¸ªèŒƒå›´ viewModel = new ViewModelProvider(requireActivity()).get(ListViewModel.class); viewModel.getFilters().observe(getViewLifecycleOwner(), set -&gt; &#123; // Update the selected filters UI &#125;); &#125; public void onFilterSelected(Filter filter) &#123; viewModel.addFilter(filter); &#125; public void onFilterDeselected(Filter filter) &#123; viewModel.removeFilter(filter); &#125;&#125; çˆ¶å­Fragmenté€šä¿¡12345678910111213141516171819202122public class ListFragment extends Fragment &#123; private ListViewModel viewModel; @Override public void onViewCreated(@NonNull View view, Bundle savedInstanceState) &#123; viewModel = new ViewModelProvider(this).get(ListViewModel.class); viewModel.getFilteredList().observe(getViewLifecycleOwner(), list -&gt; &#123; // Update the list UI &#125; &#125;&#125;public class ChildFragment extends Fragment &#123; private ListViewModel viewModel; @Override public void onViewCreated(@NonNull View view, Bundle savedInstanceState) &#123; //æ³¨æ„å‚æ•° viewModel = new ViewModelProvider(requireParentFragment()).get(ListViewModel.class); ... &#125;&#125; Fragment Result APIåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½è¦åœ¨ Fragment ä¹‹é—´æˆ– Fragment ä¸å…¶å®¿ä¸» Activity ä¹‹é—´ä¼ é€’ä¸€æ¬¡æ€§å€¼ã€‚åˆ™å¯ä»¥ä½¿ç”¨setFragmentResultListenerã€‚å®ƒçš„åŸç†æ˜¯åœ¨getParentFragmentManagerå®ç°äº†è§‚å¯Ÿè€…æ¨¡å¼ã€‚ ä¸å…¶ä»–Fragmenté€šä¿¡ ä¸€æ—¦ Fragment A å¤„äº STARTED çŠ¶æ€ï¼Œå®ƒå°±ä¼šæ”¶åˆ°ç»“æœå¹¶æ‰§è¡Œç›‘å¬å™¨å›è°ƒã€‚ å¯¹äºç»™å®šçš„é”®ï¼Œåªèƒ½æœ‰ä¸€ä¸ªç›‘å¬å™¨å’Œç»“æœã€‚å¦‚æœæ‚¨å¯¹åŒä¸€ä¸ªé”®å¤šæ¬¡è°ƒç”¨ setFragmentResult()ï¼Œå¹¶ä¸”ç›‘å¬å™¨æœªå¤„äº STARTED çŠ¶æ€ï¼Œåˆ™ç³»ç»Ÿä¼šå°†æ‰€æœ‰å¾…å¤„ç†çš„ç»“æœæ›¿æ¢ä¸ºæ›´æ–°åçš„ç»“æœã€‚å¦‚æœæ‚¨è®¾ç½®çš„ç»“æœæ²¡æœ‰ç›¸åº”çš„ç›‘å¬å™¨æ¥æ¥æ”¶ï¼Œåˆ™ç»“æœä¼šå­˜å‚¨åœ¨ FragmentManager ä¸­ï¼Œç›´åˆ°æ‚¨è®¾ç½®ä¸€ä¸ªå…·æœ‰ç›¸åŒé”®çš„ç›‘å¬å™¨ã€‚ç›‘å¬å™¨æ”¶åˆ°ç»“æœå¹¶è§¦å‘ onFragmentResult() å›è°ƒåï¼Œç»“æœä¼šè¢«æ¸…é™¤ã€‚è¿™ç§è¡Œä¸ºæœ‰ä¸¤ä¸ªä¸»è¦å½±å“ï¼š è¿”å›å †æ ˆä¸Šçš„ Fragment åªæœ‰åœ¨è¢«å¼¹å‡ºä¸”å¤„äº STARTED çŠ¶æ€ä¹‹åæ‰ä¼šæ”¶åˆ°ç»“æœã€‚ å¦‚æœåœ¨è®¾ç½®ç»“æœæ—¶ç›‘å¬ç»“æœçš„ Fragment å¤„äº STARTED çŠ¶æ€ï¼Œåˆ™ä¼šç«‹å³è§¦å‘ç›‘å¬å™¨çš„å›è°ƒã€‚ 123456789101112131415161718192021222324@Overridepublic void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); //ç›‘å¬æŸä¸ªäº‹ä»¶ getParentFragmentManager().setFragmentResultListener(&quot;requestKey&quot;, this, new FragmentResultListener() &#123; @Override public void onFragmentResult(@NonNull String requestKey, @NonNull Bundle bundle) &#123; // We use a String here, but any type that can be put in a Bundle is supported String result = bundle.getString(&quot;bundleKey&quot;); // Do something with the result &#125; &#125;);&#125;//åœ¨Fragmentä¸­è§¦å‘è¯¥äº‹ä»¶button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Bundle result = new Bundle(); result.putString(&quot;bundleKey&quot;, &quot;result&quot;); getParentFragmentManager().setFragmentResult(&quot;requestKey&quot;, result); &#125;&#125;); çˆ¶å­Fragmenté€šä¿¡ 12345678910111213141516171819202122232425@Overridepublic void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); // We set the listener on the child fragmentManager getChildFragmentManager() .setFragmentResultListener(&quot;requestKey&quot;, this, new FragmentResultListener() &#123; @Override public void onFragmentResult(@NonNull String requestKey, @NonNull Bundle bundle) &#123; String result = bundle.getString(&quot;bundleKey&quot;); // Do something with the result &#125; &#125;);&#125;button.setOnClickListener(new View.OnClickListener() &#123; @Override public void onClick(View v) &#123; Bundle result = new Bundle(); result.putString(&quot;bundleKey&quot;, &quot;result&quot;); // The child fragment needs to still set the result on its parent fragment manager getParentFragmentManager().setFragmentResult(&quot;requestKey&quot;, result); &#125;&#125;); ä¸å®¿ä¸»Activityé€šä¿¡123456789101112131415class MainActivity extends AppCompatActivity &#123; @Override public void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); getSupportFragmentManager().setFragmentResultListener(&quot;requestKey&quot;, this, new FragmentResultListener() &#123; @Override public void onFragmentResult(@NonNull String requestKey, @NonNull Bundle bundle) &#123; // We use a String here, but any type that can be put in a Bundle is supported String result = bundle.getString(&quot;bundleKey&quot;); // Do something with the result &#125; &#125;); &#125;&#125; å‚è€ƒèµ„æ–™ https://developer.android.com/guide/components/fragments?hl=zh-cn https://developer.android.com/guide/fragments?hl=zh-cn https://github.com/xxv/android-lifecycle","tags":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"}],"categories":[{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"}]},{"title":"åŸå‹æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼/åŸå‹æ¨¡å¼/","text":"å®šä¹‰åŸå‹æ¨¡å¼(Prototype Pattern)ï¼šä½¿ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ æœ‰æ—¶å€™å½“ä½ æƒ³å¤åˆ¶ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå…ˆä¼šæƒ³åˆ°ç”¨newï¼Œä½†æœ‰æ—¶å€™ä½ æ‹¿åˆ°çš„åªæ˜¯æŠ½è±¡ç±»ï¼Œäº¦æˆ–è€…è¿™ä¸ªå¯¹è±¡å†…éƒ¨æœ‰ä¸€äº›ç§æœ‰å±æ€§ä½ æ˜¯æ‹¿ä¸åˆ°çš„ã€‚è¿˜æœ‰æ—¶å€™ï¼Œå¦‚æœå¯¹è±¡æ²¡æœ‰å®ç°cloneæ–¹æ³•æ¥å®ç°å…‹éš†ï¼Œåˆ™è¿™ä¸ªæ—¶å€™é€šè¿‡cloneè·å–çš„æ˜¯æµ…å…‹éš†ï¼Œå¦‚æœé‡Œé¢æœ‰å…¶ä»–å¯¹è±¡ï¼Œåˆ™è¿”å›çš„æ˜¯å¼•ç”¨ã€‚ åŸå‹æ¨¡å¼æ˜¯ä¸€ç§å¦ç±»çš„åˆ›å»ºå‹æ¨¡å¼ï¼Œåˆ›å»ºå…‹éš†å¯¹è±¡çš„å·¥å‚å°±æ˜¯åŸå‹ç±»è‡ªèº«ï¼Œå·¥å‚æ–¹æ³•ç”±å…‹éš†æ–¹æ³•æ¥å®ç°ã€‚ ç±»å›¾ è§’è‰² å®¢æˆ·ï¼ˆClientï¼‰ï¼šå®¢æˆ·ç±»æå‡ºåˆ›å»ºå¯¹è±¡çš„è¯·æ±‚ã€‚ æŠ½è±¡åŸå‹ï¼ˆPrototypeï¼‰ï¼šè¿™æ˜¯ä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œé€šå¸¸ç”±ä¸€ä¸ªJavaæ¥å£æˆ–JavaæŠ½è±¡ç±»å®ç°ã€‚æ­¤è§’è‰²ç»™å‡ºæ‰€æœ‰çš„å…·ä½“åŸå‹ç±»æ‰€éœ€çš„æ¥å£ã€‚ å…·ä½“åŸå‹ï¼ˆConcrete Prototypeï¼‰ï¼šè¢«å¤åˆ¶çš„å¯¹è±¡ã€‚æ­¤è§’è‰²éœ€è¦å®ç°æŠ½è±¡çš„åŸå‹è§’è‰²æ‰€è¦æ±‚çš„æ¥å£ã€‚ åœ¨è¿›è¡Œå…‹éš†çš„æ—¶å€™ï¼Œåˆ†ä¸ºæµ…æ‹·è´å’Œæ·±æ‹·è´ã€‚æˆ‘ä»¬çš„å®é™…ä¸šåŠ¡åœºæ™¯ä¸­å¤§éƒ¨åˆ†æƒ…å†µä¸‹éœ€è¦æ·±æ‹·è´ï¼Œæ·±æ‹·è´å¯ä»¥é€šè¿‡åºåˆ—åŒ–æˆ–è€…ç›´æ¥newçš„æ–¹å¼å®ç°ã€‚ ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ å½“åˆ›å»ºæ–°çš„å¯¹è±¡å®ä¾‹è¾ƒä¸ºå¤æ‚æ—¶ï¼Œä½¿ç”¨åŸå‹æ¨¡å¼å¯ä»¥ç®€åŒ–å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ï¼Œé€šè¿‡å¤åˆ¶ä¸€ä¸ªå·²æœ‰å®ä¾‹å¯ä»¥æé«˜æ–°å®ä¾‹çš„åˆ›å»ºæ•ˆç‡ã€‚ ç¼ºç‚¹ éœ€è¦ä¸ºæ¯ä¸€ä¸ªç±»é…å¤‡ä¸€ä¸ªå…‹éš†æ–¹æ³•ï¼Œè€Œä¸”è¯¥å…‹éš†æ–¹æ³•ä½äºä¸€ä¸ªç±»çš„å†…éƒ¨ï¼Œå½“å¯¹å·²æœ‰çš„ç±»è¿›è¡Œæ”¹é€ æ—¶ï¼Œéœ€è¦ä¿®æ”¹æºä»£ç ï¼Œè¿èƒŒäº†â€œå¼€é—­åŸåˆ™â€ã€‚ ä½¿ç”¨åœºæ™¯ Androidä¸­çš„Intent 12345678public class Intent implements Parcelable, Cloneable &#123;... @Override public Object clone() &#123; return new Intent(this); &#125;...&#125; å‚è€ƒ https://refactoringguru.cn/design-patterns/prototype https://test-design-patterns.readthedocs.io/zh/latest/creational_patterns&#x2F;prototype.html","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"å·¥å‚æ–¹æ³•æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼/å·¥å‚æ–¹æ³•æ¨¡å¼/","text":"å®šä¹‰å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œä½†ç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªã€‚å·¥å‚æ–¹æ³•è®©ç±»æŠŠå®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚ ç»“æ„å›¾ è§’è‰² æŠ½è±¡å·¥å‚ï¼šå®ç°äº†æ‰€æœ‰æ“çºµäº§å“çš„æ–¹æ³•ï¼Œä½†ä¸å®ç°å·¥å‚æ–¹æ³•ã€‚factoryMethodæ˜¯æŠ½è±¡æ–¹æ³•ã€‚ å…·ä½“å·¥å‚ï¼šå¿…é¡»å®ç°æŠ½è±¡çš„æŠ½è±¡æ–¹æ³•ï¼Œä»¥å®é™…åˆ¶é€ å‡ºäº§å“ã€‚ æŠ½è±¡äº§å“ï¼šæ‰€æœ‰äº§å“çš„æŠ½è±¡ã€‚ å…·ä½“äº§å“ï¼šä¸åŒçš„å…·ä½“äº§å“ã€‚ ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå…·æœ‰å¾ˆå¼ºçš„çš„æ‰©å±•æ€§ã€å¼¹æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æ‰©å±•æ—¶åªè¦æ·»åŠ ä¸€ä¸ªConcreteCreatorï¼Œè€Œæ— é¡»ä¿®æ”¹åŸæœ‰çš„ConcreteCreatorï¼Œå› æ­¤ç»´æŠ¤æ€§ä¹Ÿå¥½ã€‚è§£å†³äº†ç®€å•å·¥å‚å¯¹ä¿®æ”¹å¼€æ”¾çš„é—®é¢˜ã€‚ ä½¿ç”¨äº†ä¾èµ–å€’ç½®åŸåˆ™ï¼Œä¾èµ–æŠ½è±¡è€Œä¸æ˜¯å…·ä½“ï¼Œä½¿ç”¨ï¼ˆå®¢æˆ·ï¼‰å’Œå®ç°ï¼ˆå…·ä½“ç±»ï¼‰æ¾è€¦åˆã€‚ å®¢æˆ·åªéœ€è¦çŸ¥é“æ‰€éœ€äº§å“çš„å…·ä½“å·¥å‚ï¼Œè€Œæ— é¡»çŸ¥é“å…·ä½“å·¥å‚çš„åˆ›å»ºäº§å“çš„è¿‡ç¨‹ï¼Œç”šè‡³ä¸éœ€è¦çŸ¥é“å…·ä½“äº§å“çš„ç±»åã€‚ ç¼ºç‚¹ï¼š ä»£ç é‡å¢åŠ  è®¾è®¡åŸåˆ™ä¾èµ–å€’ç½®åŸåˆ™ï¼šè¦ä¾èµ–æŠ½è±¡ï¼Œä¸è¦ä¾èµ–å…·ä½“ç±»ã€‚ æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™åº”è¯¥å°½é‡è¾¾åˆ°ä»¥ä¸‹åŸåˆ™ï¼š å˜é‡ä¸å¯ä»¥æŒæœ‰å…·ä½“ç±»çš„å¼•ç”¨ ä¸è¦è®©ç±»æ´¾ç”Ÿè‡ªå…·ä½“ç±» ä¸è¦è¦†ç›–åŸºç±»ä¸­å·²å®ç°çš„æ–¹æ³• ä½¿ç”¨åœºæ™¯ å½“éœ€è¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦çŸ¥é“è¯¥å¯¹è±¡æ‰€å¯¹åº”çš„å…·ä½“ç±»ï¼Œåªè¦çŸ¥é“å“ªä¸ªå…·ä½“å·¥å‚å¯ä»¥ç”Ÿæˆè¯¥å¯¹è±¡ï¼Œå®ä¾‹åŒ–è¿™ä¸ªå…·ä½“å·¥å‚å³å¯åˆ›å»ºè¯¥å¯¹è±¡ã€‚ ç±»çš„æ•°ç›®ä¸å›ºå®šï¼Œéšæ—¶æœ‰æ–°çš„å­ç±»å¢åŠ è¿›æ¥ï¼Œæˆ–è€…æ˜¯è¿˜ä¸çŸ¥é“å°†æ¥éœ€è¦å®ä¾‹åŒ–å“ªäº›å…·ä½“ç±»ã€‚ å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡æ¥å£ï¼Œç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»æ˜¯å“ªä¸€ä¸ªï¼›å®¢æˆ·ç«¯å¯ä»¥åŠ¨æ€åœ°æŒ‡å®šå·¥å‚å­ã€‚ å‚è€ƒ ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹ https://blog.csdn.net/qq_39588630&#x2F;article&#x2F;details&#x2F;80478349","tags":[],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"æŠ½è±¡å·¥å‚æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼/æŠ½è±¡å·¥å‚æ¨¡å¼/","text":"å®šä¹‰æä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚ å®ƒæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ‰©å±•ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼åªèƒ½ç”Ÿäº§ä¸€ç§äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼åˆ™æ‰©å±•ä¸ºå¤šä¸ªã€‚ ç»“æ„å›¾ è§’è‰² AbstractFactoryï¼šæŠ½è±¡å·¥å‚è§’è‰²ï¼Œå®ƒå£°æ˜äº†ä¸€ç»„ç”¨äºåˆ›å»ºä¸€ç§äº§å“çš„æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ç§äº§å“ï¼Œå¦‚ä¸Šè¿°ç±»å›¾ä¸­çš„AbstractFactoryå°±å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åˆ›å»ºäº§å“Aå’Œäº§å“B ConcreteFactoryï¼šå…·ä½“å·¥å‚è§’è‰²ï¼Œå®ƒå®ç°äº†åœ¨æŠ½è±¡å·¥å‚ä¸­å®šä¹‰çš„åˆ›å»ºäº§å“çš„æ–¹æ³•ï¼Œç”Ÿäº§ä¸€ç»„å…·ä½“äº§å“ï¼Œè¿™é¥¿äº§å“æ„ä»¶æˆäº†ä¸€ä¸ªäº§å“ç§ç±»ï¼Œæ¯ä¸€ä¸ªäº§å“éƒ½ä½äºæŸä¸ªäº§å“ç­‰çº§ç»“æ„ä¸­ï¼Œå¦‚ä¸Šè¿°ç±»å›¾ä¸­çš„ConcreteFactoryAå’ŒConcreteFactoryB AbstractProductï¼šæŠ½è±¡äº§å“è§’è‰²ï¼Œä¸ºæ¯ç§äº§å“å£°æ˜æ¥å£ï¼Œå¦‚å›¾ä¸­AbstractProductAã€AbstractProductB ConcreteProductï¼šå…·ä½“äº§å“è§’è‰²ï¼Œå®šä¹‰äº†å·¥å‚ç”Ÿäº§çš„å…·ä½“äº§å“å¯¹è±¡ï¼Œå®ç°æŠ½è±¡äº§å“æ¥å£å£°æ˜çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå¦‚å›¾ä¸­ConcreteProductA1ã€ConcreteProductA2ã€ConcreteProductB1ã€ConcreteProductB2 å‚è€ƒ ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"å»ºé€ è€…æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼/å»ºé€ è€…æ¨¡å¼/","text":"å®šä¹‰å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰ï¼šå°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å®ƒçš„è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚ ç±»å›¾ è§’è‰² Builderï¼šæŠ½è±¡å»ºé€ è€… ConcreteBuilderï¼šå…·ä½“å»ºé€ è€… Directorï¼šæŒ‡æŒ¥è€… Productï¼šäº§å“è§’è‰² ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œç»“æ„æ›´æ¸…æ™° ä½¿ç”¨åœºæ™¯ å¤šä¸ªå‚æ•°åˆå§‹åŒ–æ—¶ï¼Œä½¿ç”¨é™æ€å†…éƒ¨ç±»Builderã€‚æ¯”å¦‚Androidä¸­çš„NotificationCompat é“¾å¼è°ƒç”¨ï¼ŒRxJava å‚è€ƒ https://refactoringguru.cn/design-patterns/builder https://test-design-patterns.readthedocs.io/zh/latest/creational_patterns&#x2F;builder.html","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"äº«å…ƒæ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼/äº«å…ƒæ¨¡å¼/","text":"å®šä¹‰äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰ï¼šå‡å°‘åˆ›å»ºå¯¹è±¡çš„æ•°é‡ï¼Œä»¥å‡å°‘å†…å­˜å ç”¨å’Œæé«˜æ€§èƒ½ã€‚ ç±»å›¾ è§’è‰² Flyweight: æŠ½è±¡äº«å…ƒç±» ConcreteFlyweight: å…·ä½“äº«å…ƒç±» UnsharedConcreteFlyweight: éå…±äº«å…·ä½“äº«å…ƒç±» FlyweightFactory: äº«å…ƒå·¥å‚ç±» ä½¿ç”¨åœºæ™¯ Javaä¸­çš„å­—ç¬¦ä¸²æ±  Integerå¯¹è±¡ï¼Œå½“å€¼åœ¨-128~+128æ—¶ï¼Œè¿”å›çš„æ˜¯ç¼“å­˜å¯¹è±¡ å‚è€ƒ https://refactoringguru.cn/design-patterns/flyweight https://test-design-patterns.readthedocs.io/zh/latest/structural_patterns&#x2F;flyweight.html","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"ä»£ç†æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼/ä»£ç†æ¨¡å¼/","text":"å®šä¹‰ä»£ç†æ¨¡å¼(Proxy Pattern) ï¼šç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚å®ƒæ˜¯ä¸€ç§å¯¹è±¡ç»“æ„å‹æ¨¡å¼ã€‚ ç±»å›¾ è§’è‰² Subject: æŠ½è±¡ä¸»é¢˜è§’è‰² Proxy: ä»£ç†ä¸»é¢˜è§’è‰² RealSubject: çœŸå®ä¸»é¢˜è§’è‰² ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ å°è£…äº†ä¸€å±‚ï¼Œé«˜æ‰©å±• å¦‚æœéœ€è¦åœ¨çœŸå®å¯¹è±¡æ‰§è¡Œæ“ä½œçš„å‰åæ‰§è¡Œä¸€äº›å·¥ä½œï¼Œåˆ™éå¸¸æ–¹ä¾¿ ç¼ºç‚¹ ä»£ç ä¼šå˜å¤š æ¯”ç›´æ¥è°ƒç”¨æ€§èƒ½ä¸Šä¼šå·®äº› ä½¿ç”¨åœºæ™¯ ç”µè„‘ä¸­çš„å¿«æ·æ–¹å¼ å•†åº—æ˜¯å•†å“å‚å®¶çš„ä»£ç† ä¸­ä»‹ Javaä¸­çš„InvocationHandler å‚è€ƒ https://refactoringguru.cn/design-patterns/proxy https://blog.csdn.net/carson_ho&#x2F;article&#x2F;details&#x2F;54910472","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"ç»„åˆæ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼/ç»„åˆæ¨¡å¼/","text":"å®šä¹‰ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰ï¼šå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æ„ï¼Œä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚ ç±»å›¾ è§’è‰² Componentï¼ˆæŠ½è±¡æ„ä»¶ï¼‰ï¼šå®ƒå¯ä»¥æ˜¯æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œä¸ºå¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶å¯¹è±¡å£°æ˜æ¥å£ï¼Œåœ¨è¯¥è§’è‰²ä¸­å¯ä»¥åŒ…å«æ‰€æœ‰å­ç±»å…±æœ‰è¡Œä¸ºçš„å£°æ˜å’Œå®ç°ã€‚åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰äº†è®¿é—®åŠç®¡ç†å®ƒçš„å­æ„ä»¶çš„æ–¹æ³•ï¼Œå¦‚å¢åŠ å­æ„ä»¶ã€åˆ é™¤å­æ„ä»¶ã€è·å–å­æ„ä»¶ç­‰ã€‚ Leafï¼ˆå¶å­æ„ä»¶ï¼‰ï¼šå®ƒåœ¨ç»„åˆç»“æ„ä¸­è¡¨ç¤ºå¶å­èŠ‚ç‚¹å¯¹è±¡ï¼Œå¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå®ƒå®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰çš„è¡Œä¸ºã€‚å¯¹äºé‚£äº›è®¿é—®åŠç®¡ç†å­æ„ä»¶çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å¼‚å¸¸ç­‰æ–¹å¼è¿›è¡Œå¤„ç†ã€‚ Compositeï¼ˆå®¹å™¨æ„ä»¶ï¼‰ï¼šå®ƒåœ¨ç»„åˆç»“æ„ä¸­è¡¨ç¤ºå®¹å™¨èŠ‚ç‚¹å¯¹è±¡ï¼Œå®¹å™¨èŠ‚ç‚¹åŒ…å«å­èŠ‚ç‚¹ï¼Œå…¶å­èŠ‚ç‚¹å¯ä»¥æ˜¯å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯å®¹å™¨èŠ‚ç‚¹ï¼Œå®ƒæä¾›ä¸€ä¸ªé›†åˆç”¨äºå­˜å‚¨å­èŠ‚ç‚¹ï¼Œå®ç°äº†åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰çš„è¡Œä¸ºï¼ŒåŒ…æ‹¬é‚£äº›è®¿é—®åŠç®¡ç†å­æ„ä»¶çš„æ–¹æ³•ï¼Œåœ¨å…¶ä¸šåŠ¡æ–¹æ³•ä¸­å¯ä»¥é€’å½’è°ƒç”¨å…¶å­èŠ‚ç‚¹çš„ä¸šåŠ¡æ–¹æ³•ã€‚ ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ æ»¡è¶³å¼€é—­åŸåˆ™ï¼Œåœ¨ç»„åˆæ¨¡å¼ä¸­å¢åŠ æ–°çš„å®¹å™¨æ„ä»¶å’Œå¶å­æ„ä»¶éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»å¯¹ç°æœ‰ç±»åº“è¿›è¡Œä»»ä½•ä¿®æ”¹ ä½¿ç”¨åœºæ™¯ æ ‘å½¢ç»“æ„ï¼Œæ¯”å¦‚æ–‡ä»¶å¤¹çš„ç®¡ç† å‚è€ƒ https://refactoringguru.cn/design-patterns/composite https://www.cnblogs.com/chenssy/p/3299719.html","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"å¤–è§‚æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼/å¤–è§‚æ¨¡å¼/","text":"å®šä¹‰æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼Œç”¨æ¥è®¿é—®å­ç³»ç»Ÿä¸­çš„ä¸€ç¾¤æ¥å£ã€‚å¤–è§‚å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè®©å­ç³»ç»Ÿæ›´å®¹æ˜“ä½¿ç”¨ã€‚ ç»“æ„å›¾ å¤–è§‚æ¨¡å¼ä¸­çš„è§’è‰²ï¼š é—¨é¢è§’è‰²ï¼ˆFacadeï¼‰:è¿™æ˜¯å¤–è§‚æ¨¡å¼çš„æ ¸å¿ƒã€‚å®ƒè¢«å®¢æˆ·è§’è‰²è°ƒç”¨ï¼Œå› æ­¤å®ƒç†Ÿæ‚‰å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å®ƒå†…éƒ¨æ ¹æ®å®¢æˆ·è§’è‰²å·²æœ‰çš„éœ€æ±‚é¢„å®šäº†å‡ ç§åŠŸèƒ½ç»„åˆã€‚ å­ç³»ç»Ÿè§’è‰²ï¼ˆSystemAã€SystemBã€SystemCï¼‰:å®ç°äº†å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å¯¹å­ç³»ç»Ÿè§’è‰²æ¥è¯´ï¼Œfacadeè§’è‰²ä¸å®¢æˆ·è§’è‰²ä¸€æ ·ï¼Œæ˜¯æœªçŸ¥çš„ï¼Œå®ƒæ²¡æœ‰ä»»ä½•facadeè§’è‰²çš„ä¿¡æ¯å’Œé“¾æ¥ã€‚ å®¢æˆ·è§’è‰²ï¼ˆClientï¼‰ï¼šè°ƒç”¨facadeè§’è‰²æ¥å®Œæˆè¦å¾—åˆ°çš„åŠŸèƒ½ã€‚ ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ï¼š é™ä½äº†Clientçš„ä½¿ç”¨éš¾åº¦ï¼Œå­ç³»ç»Ÿå¯¹å…¶æ˜¯é»‘ç›’çš„ã€‚éšè—äº†å†…éƒ¨ç»†èŠ‚ é™ä½äº†è€¦åˆæ€§ è®¾è®¡åŸåˆ™è¿ªç±³ç‰¹åŸåˆ™ï¼ˆLOW OF DEMETERï¼‰ï¼šä¹Ÿå«æœ€å°‘çŸ¥è¯†åŸåˆ™ã€‚åªå’Œä½ çš„å¯†å‹è°ˆè¯ã€‚ å½“ä½ è®¾è®¡ä¸€ä¸ªç³»ç»Ÿï¼Œä¸ç®¡æ˜¯ä»»ä½•å¯¹è±¡ï¼Œéƒ½è¦æ³¨æ„å®ƒæ‰€äº¤äº’çš„ç±»æœ‰å“ªäº›ï¼Œå¹¶æ³¨æ„å®ƒå’Œè¿™äº›ç±»æ˜¯å¦‚ä½•äº¤äº’çš„ã€‚ ä½¿ç”¨åœºæ™¯ é¥æ§å™¨ï¼šä¸€ä¸ªæŒ‰é’®å°±èƒ½å¸®æˆ‘ä»¬å®Œæˆå¤šä»¶äº‹æƒ…ã€‚ ç¬¬ä¸‰æ–¹åº“çš„å¯åŠ¨å°è£…ï¼šä¸€èˆ¬è°ƒç”¨initæ–¹æ³•å°±èƒ½å®Œæˆåˆå§‹åŒ–ï¼Œå…¶å†…éƒ¨ä¼šåšè®¸å¤šå·¥ä½œã€‚ å‚è€ƒ ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹ https://www.cnblogs.com/jimoer/p/9463698.html","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"è£…é¥°æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼/è£…é¥°æ¨¡å¼/","text":"å®šä¹‰è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰ï¼šåœ¨ä¸æ”¹å˜ç°æœ‰å¯¹è±¡ç»“æ„çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°ç»™è¯¥å¯¹è±¡å¢åŠ ä¸€äº›èŒè´£ï¼ˆå³å¢åŠ å…¶é¢å¤–åŠŸèƒ½ï¼‰ã€‚ ç±»å›¾ è§’è‰² æŠ½è±¡æ„ä»¶(Component)è§’è‰²ï¼šç»™å‡ºä¸€ä¸ªæŠ½è±¡æ¥å£ï¼Œå·²è§„èŒƒå‡†å¤‡æ¥æ”¶é™„åŠ è´£ä»»çš„å¯¹è±¡ã€‚ å…·ä½“æ„ä»¶(ConcreteComponent)è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªå°†è¦æ¥æ”¶é™„åŠ è´£ä»»çš„ç±» è£…é¥°(Decorator)è§’è‰²ï¼šæŒæœ‰ä¸€ä¸ªæ„ä»¶(Component)å¯¹è±¡çš„å®ä¾‹ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸æŠ½è±¡æ„ä»¶æ¥å£ä¸€è‡´çš„æ¥å£ã€‚ å…·ä½“è£…é¥°(ConcreteDecorator)è§’è‰²ï¼šè´Ÿè´£ç»™æ„ä»¶å¯¹è±¡â€œè´´ä¸Šâ€é™„åŠ çš„è´£ä»»ã€‚ ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå•ä¸€èŒè´£åŸåˆ™ ä½¿ç”¨åœºæ™¯ Javaä¸­çš„IOç›¸å…³API å‚è€ƒ https://refactoringguru.cn/design-patterns/decorator https://test-design-patterns.readthedocs.io/zh/latest/structural_patterns&#x2F;decorator.html","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"æ¡¥æ¥æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼/æ¡¥æ¥æ¨¡å¼/","text":"å®šä¹‰æ¡¥æ¥æ¨¡å¼(Bridge Pattern)ï¼šå°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚ ç±»å›¾ è§’è‰² Abstractionï¼šæŠ½è±¡ç±»ï¼Œä¿å­˜ä¸€ä¸ªå¯¹å®ç°åŒ–å¯¹è±¡ï¼ˆImplementorï¼‰çš„å¼•ç”¨ RefinedAbstractionï¼šæ‰©å……æŠ½è±¡ç±»ï¼Œæ”¹å˜å’Œä¿®æ­£çˆ¶ç±»å¯¹æŠ½è±¡åŒ–çš„å®šä¹‰ Implementorï¼šè§’è‰²ç»™å‡ºå®ç°åŒ–è§’è‰²çš„æ¥å£ï¼Œä½†ä¸ç»™å‡ºå…·ä½“çš„å®ç° ConcreteImplementorï¼šå…·ä½“å®ç°ç±» ä¼˜ç¼ºç‚¹ä¼˜ç‚¹ æŠ½è±¡å’Œå®ç°åˆ†ç¦»ï¼Œæ‰©å±•æ€§é«˜ã€‚ æ¡¥æ¥æ¨¡å¼æœ‰æ—¶ç±»ä¼¼äºå¤šç»§æ‰¿æ–¹æ¡ˆï¼Œä½†æ˜¯å¤šç»§æ‰¿æ–¹æ¡ˆè¿èƒŒäº†ç±»çš„å•ä¸€èŒè´£åŸåˆ™ï¼ˆå³ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå˜åŒ–çš„åŸå› ï¼‰ï¼Œå¤ç”¨æ€§æ¯”è¾ƒå·®ï¼Œè€Œä¸”å¤šç»§æ‰¿ç»“æ„ä¸­ç±»çš„ä¸ªæ•°éå¸¸åºå¤§ï¼Œæ¡¥æ¥æ¨¡å¼æ˜¯æ¯”å¤šç»§æ‰¿æ–¹æ¡ˆæ›´å¥½çš„è§£å†³æ–¹æ³•ã€‚ ç¼ºç‚¹ å¢åŠ ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ ä½¿ç”¨åœºæ™¯å‚è€ƒ https://test-design-patterns.readthedocs.io/zh/latest/structural_patterns&#x2F;bridge.html https://refactoringguru.cn/design-patterns/bridge https://zhuanlan.zhihu.com/p/58903776","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"é€‚é…å™¨æ¨¡å¼","date":"2018-06-01T02:01:01.000Z","path":"wiki/è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼/é€‚é…å™¨æ¨¡å¼/","text":"å®šä¹‰é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œé€‚é…å™¨è®©åŸæœ¬æ¥å£ä¸å…¼å®¹çš„ç±»å¯ä»¥ç›¸äº’åˆä½œã€‚é€‚é…å™¨æ¨¡å¼æœ‰ç±»çš„é€‚é…å™¨æ¨¡å¼å’Œå¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼ä¸¤ç§ä¸åŒçš„å½¢å¼ã€‚ é€‚é…å™¨æ¨¡å¼ä¼˜ç‚¹ å¤ç”¨ä¸”ä¸ä¿®æ”¹ç±» : ä¸æ”¹å˜ç°æœ‰ç±»çš„åŸºç¡€ä¸Š , æé«˜ç±»çš„å¤ç”¨æ€§ , é€æ˜æ€§ ; è®©ç°æœ‰ç±»ä¸ç›®æ ‡ç±»æ¥å£åŒ¹é… ; é™ä½è€¦åˆ : ç›®æ ‡ç±» ( ç”¨æˆ·è°ƒç”¨çš„æ¥å£æ‰€åœ¨ç±» ) å’Œ ç°æœ‰ç±» ( è¢«é€‚é…è€… ) è§£é™¤è€¦åˆ , é™ä½äº†ç³»ç»Ÿçš„è€¦åˆæ€§ , æ˜“äºæ‰©å±•ç»´æŠ¤; ç¬¦åˆå¼€é—­åŸåˆ™ : ç”¨æˆ·è°ƒç”¨é€‚é…å™¨æ¥å£ , åªä¸é€‚é…å™¨ç±»è¿›è¡Œäº¤äº’ , å¦‚æœéœ€è¦ä¿®æ”¹æ‰©å±• , åªéœ€è¦ä¿®æ”¹é€‚é…å™¨ç±»å³å¯ , ç›®æ ‡ç±»å’Œç°æœ‰ç±»å„è‡ªéƒ½æ˜¯ç›¸äº’ç‹¬ç«‹çš„ , äº’ä¸å½±å“ ; é€‚é…å™¨æ¨¡å¼ç¼ºç‚¹ å¢åŠ å¤æ‚æ€§ : ç¼–å†™é€‚é…å™¨ç±»æ—¶ , éœ€è¦è€ƒè™‘å…¨é¢ , åŒ…æ‹¬è¢«é€‚é…è€… å’Œ ç›®æ ‡ç±» , ç³»ç»Ÿå¤æ‚æ€§ä¼šå¢åŠ ; é™ä½å¯è¯»æ€§ : ç³»ç»Ÿä»£ç å¯è¯»æ€§é™ä½ , å¯ç»´æŠ¤æ€§é™ä½ ; å¯¹è±¡é€‚é…å™¨åœ¨å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œé€‚é…å™¨ä¸é€‚é…è€…ä¹‹é—´æ˜¯å…³è”å…³ç³»ï¼ˆé€‚é…è€…æ˜¯é€‚é…å™¨çš„æˆå‘˜å˜é‡ï¼‰ã€‚ ç»“æ„å›¾ Targetï¼ˆç›®æ ‡æŠ½è±¡ç±»ï¼‰ï¼šç›®æ ‡æŠ½è±¡ç±»å®šä¹‰å®¢æˆ·æ‰€éœ€æ¥å£ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»æˆ–æ¥å£ï¼Œä¹Ÿå¯ä»¥æ˜¯å…·ä½“ç±»ã€‚ Adapterï¼ˆé€‚é…å™¨ç±»ï¼‰ï¼šé€‚é…å™¨å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªæ¥å£ï¼Œä½œä¸ºä¸€ä¸ªè½¬æ¢å™¨ï¼Œå¯¹Adapteeå’ŒTargetè¿›è¡Œé€‚é…ï¼Œé€‚é…å™¨ç±»æ˜¯é€‚é…å™¨æ¨¡å¼çš„æ ¸å¿ƒï¼Œåœ¨å¯¹è±¡é€‚é…å™¨ä¸­ï¼Œå®ƒé€šè¿‡ç»§æ‰¿(æˆ–è€…å®ç°)Targetå¹¶å…³è”ä¸€ä¸ªAdapteeå¯¹è±¡ä½¿äºŒè€…äº§ç”Ÿè”ç³»ã€‚ Adapteeï¼ˆé€‚é…è€…ç±»ï¼‰ï¼šé€‚é…è€…å³è¢«é€‚é…çš„è§’è‰²ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ¥å£ï¼Œè¿™ä¸ªæ¥å£éœ€è¦é€‚é…ï¼Œé€‚é…è€…ç±»ä¸€èˆ¬æ˜¯ä¸€ä¸ªå…·ä½“ç±»ï¼ŒåŒ…å«äº†å®¢æˆ·å¸Œæœ›ä½¿ç”¨çš„ä¸šåŠ¡æ–¹æ³•ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æ²¡æœ‰é€‚é…è€…ç±»çš„æºä»£ç ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344package com.shjlone.designpattern.adapter.objectadapter;/** * å¯¹è±¡é€‚é…å™¨æ¨¡å¼ */public class ObjectAdapterTest &#123; public static void main(String[] args) &#123; TypeC typeC = new Phone(); MicroUsb microUsb = new Adapter(typeC); microUsb.microUsb(); &#125;&#125;// ä¾›åº”æ¥å£interface MicroUsb &#123; public void microUsb();&#125;// éœ€æ±‚æ¥å£interface TypeC &#123; public void typeC();&#125;// éœ€æ±‚å®ç°ç±»class Phone implements TypeC &#123; public void typeC() &#123; System.out.println(&quot;Type-Cæ¥å£&quot;); &#125;&#125;// é€‚é…å™¨class Adapter implements MicroUsb &#123; private TypeC typeC; public Adapter(TypeC typeC) &#123; this.typeC = typeC; &#125; @Override public void microUsb() &#123; typeC.typeC(); &#125;&#125; ç±»é€‚é…å™¨åœ¨ç±»é€‚é…å™¨æ¨¡å¼ä¸­ï¼Œé€‚é…å™¨ä¸é€‚é…è€…ä¹‹é—´æ˜¯ç»§æ‰¿å…³ç³»ã€‚ 123456789101112131415161718192021222324252627282930313233343536package com.shjlone.designpattern.adapter.classadapter;/** * ç±»é€‚é…å™¨ */public class ClassAdapterTest &#123; public static void main(String[] args) &#123; MicroUsb microUsb = new Adapter(); microUsb.microUsb(); &#125;&#125;//ä¾›åº”æ¥å£interface MicroUsb &#123; public void microUsb();&#125;//éœ€æ±‚æ¥å£interface TypeC &#123; public void typeC();&#125;//éœ€æ±‚å®ç°ç±»class Phone implements TypeC &#123; public void typeC() &#123; System.out.println(&quot;Type-Cæ¥å£&quot;); &#125;&#125;//é€‚é…å™¨class Adapter extends Phone implements MicroUsb &#123; public void microUsb() &#123; typeC(); &#125;&#125; ç¼ºçœé€‚é…å™¨æ¨¡å¼(Default Adapter Pattern)å½“ä¸éœ€è¦å®ç°ä¸€ä¸ªæ¥å£æ‰€æä¾›çš„æ‰€æœ‰æ–¹æ³•æ—¶ï¼Œå¯å…ˆè®¾è®¡ä¸€ä¸ªæŠ½è±¡ç±»å®ç°è¯¥æ¥å£ï¼Œå¹¶ä¸ºæ¥å£ä¸­æ¯ä¸ªæ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ï¼ˆç©ºæ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆè¯¥æŠ½è±¡ç±»çš„å­ç±»å¯ä»¥é€‰æ‹©æ€§åœ°è¦†ç›–çˆ¶ç±»çš„æŸäº›æ–¹æ³•æ¥å®ç°éœ€æ±‚ï¼Œå®ƒé€‚ç”¨äºä¸æƒ³ä½¿ç”¨ä¸€ä¸ªæ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•çš„æƒ…å†µï¼Œåˆç§°ä¸ºå•æ¥å£é€‚é…å™¨æ¨¡å¼ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950package com.shjlone.designpattern.adapter.defaultadapter;/** * é»˜è®¤é€‚é…å™¨ï¼Œç”¨äºéšè—ä¸€äº›å®ç°ç»†èŠ‚ */public class DefaultAdapterTest &#123; public static void main(String[] args) &#123; TypecToVGA typecToVGA = new TypecToVGA(); typecToVGA.isTypeC(); typecToVGA.isVGA(); &#125;&#125;// æ¥å£ç±»interface AllPorts &#123; public void isTypeC(); public void isVGA(); public void isHdmi();&#125;// é€‚é…å™¨çš„æ¡†æ¶abstract class Adapter implements AllPorts &#123; @Override public void isTypeC() &#123; &#125; @Override public void isVGA() &#123; &#125; @Override public void isHdmi() &#123; &#125;&#125;// é€‚é…å™¨ç±»class TypecToVGA extends Adapter &#123; @Override public void isTypeC() &#123; System.out.println(&quot;ä¿¡å·ä»TypeCæ¥å£è¿›å…¥&quot;); &#125; @Override public void isVGA() &#123; System.out.println(&quot;ä¿¡å·ä»VGAæ¥å£å‡º&quot;); &#125;&#125; ä½¿ç”¨åœºæ™¯ Javaè¿æ¥æ•°æ®çš„JDBCå·¥å…· List Arrays.asList(T[]) InputStreamReader StringReader 123456789101112131415161718192021222324252627282930313233/*** å¯¹è±¡é€‚é…å™¨* StringReaderç›¸å½“äºAdapterï¼ŒReaderç›¸å½“äºTargetï¼ŒStringç›¸å½“äºAdaptee***/public class StringReader extends Reader &#123; // ç»´æŒå¯¹adapteeå¯¹è±¡çš„å¼•ç”¨ private String str; private int length; private int next = 0; private int mark = 0; /** * æ„é€ æ³¨å…¥ä¸€ä¸ªStringç”¨äºä¹‹åçš„readæ“ä½œ */ public StringReader(String s) &#123; this.str = s; this.length = s.length(); &#125; // è¿™é‡Œç›¸å½“äºæ˜¯åœ¨åšé€‚é…æ“ä½œï¼Œè½¬ä¸ºç›®æ ‡å¯¹è±¡æ‰€æœŸæœ›çš„è¯·æ±‚ public int read() throws IOException &#123; synchronized (lock) &#123; ensureOpen(); if (next &gt;= length) return -1; return str.charAt(next++); &#125; &#125;&#125; å‚è€ƒ https://www.liaoxuefeng.com/wiki/1252599548343744/1281319245971489 https://www.cnblogs.com/bytesfly/p/adapter-pattern.html","tags":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"}],"categories":[{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}]},{"title":"ã€Šå¹²å°±å¯¹äº†ï¼šä¸šç»©å¢é•¿ä¹å¤§å…³é”®ã€‹è¯»ä¹¦ç¬”è®°","date":"2017-03-11T16:00:00.000Z","path":"wiki/è¯»ä¹¦ç¬”è®°/å¹²å°±å¯¹äº†/","text":"æ‘˜è¦1 å®æ„¿è¦ä¸‰æµçš„æˆ˜ç•¥åŠ ä¸Šä¸€æµçš„ç»„ç»‡ï¼Œä¹Ÿä¸è¦ä¸€æµçš„æˆ˜ç•¥ã€ä¸‰æµçš„ç»„ç»‡ã€‚ æ„Ÿæ‚Ÿï¼š å¥½çš„å›¢é˜Ÿå¾ˆé‡è¦ï¼Œä¸€ç¾¤ä¼˜ç§€çš„äººï¼Œç›®çš„æ˜ç¡®ï¼Œå›¢ç»“ä¸€è‡´ï¼Œæƒ³ä¸æˆåŠŸéƒ½éš¾ã€‚åœ¨å›¢é˜Ÿå»ºè®¾è¿‡ç¨‹ä¸­ï¼Œä¸€å®šè¦å°½é‡ç•™ä¸‹ä¼˜ç§€çš„äººæ‰ã€‚ æ‘˜è¦2ç»„ç»‡æ¶æ„çš„è®¾è®¡åŸåˆ™ï¼š 1.è‡ªä¸Šè€Œä¸‹å’Œè‡ªä¸‹è€Œä¸Šè¦ç»“åˆã€‚ 2.ç»„ç»‡æ¶æ„è®¾è®¡è¦ä¿æŒå¼¹æ€§ï¼Œä¹Ÿå°±æ˜¯è¦è·³å‡ºKPIåšæ­£ç¡®çš„äº‹ã€‚ æ‘˜è¦3ä¸­å°å»ºè®¾åŸåˆ™ï¼š å®¢æˆ·ç¬¬ä¸€ èµ‹èƒ½è€Œéç®¡æ§ å‰çº¿è¦æœ‰æˆæƒ æ€»éƒ¨è¦æœ‰çœ‹æ¿ å–„ç”¨åŒçº¿æ±‡æŠ¥ æ‘˜è¦4å²—ä½èŒè´£çš„è®¾è®¡æ³¨æ„ç‚¹ï¼š åˆ‡å¿Œâ€œå¤§è€Œå…¨â€ è¦æœ‰é¢—åŠ›åº¦å’Œæ˜ç¡®çš„æ¯”é‡ äººäº‹éƒ¨é—¨ä¸èƒ½åŒ…æ½å²—ä½èŒè´£ç¼–å†™å·¥ä½œ å²—ä½èŒè´£ä¸èƒ½ä¸€æˆä¸å˜ å²—ä½èŒè´£å†çºµæ·±å±‚æ¬¡ä¸Šä¸èƒ½ä¸€æ · æ„Ÿæ‚Ÿï¼š æ¯ä¸ªå²—ä½éƒ½åº”è¯¥æœ‰æ˜ç¡®çš„èŒè´£è¦æ±‚ï¼Œå®é™…å·¥ä½œå½“ä¸­ï¼Œå¾ˆå¤šäººä¼šæŠŠæ¨¡æ£±ä¸¤å¯çš„ä»»åŠ¡æ¨æ¥æ¨å»ã€‚ æ‘˜è¦5å¦‚ä½•æ‰£åŠ¨å‘˜å·¥çš„å¿ƒçµæ‰³æœºï¼š å¯»æ‰¾å¿ƒåŠ¨ç‚¹ å¯»æ‰¾æˆå°±ç‚¹ ç”Ÿç†éœ€æ±‚å’Œå®‰å…¨éœ€æ±‚ æƒ…æ„Ÿå’Œå½’å±éœ€æ±‚ å°Šé‡éœ€æ±‚ è‡ªæˆ‘å®ç°éœ€æ±‚ ç®¡ç†è€…ä¸è¦ç«™åœ¨è‡ªå·±çš„è§’åº¦æ€è€ƒå‘˜å·¥çš„åŸåŠ¨åŠ› ç®¡ç†è€…è¦çœ‹åˆ°ç›®æ ‡å®ç°çš„å¯èƒ½æ€§ï¼Œä¸èƒ½ç”»å¤§é¥¼ æ„Ÿæ‚Ÿï¼š è¯´åˆ°åº•è¿˜æ˜¯è¦å…³æ³¨â€äººâ€æœ¬èº«ï¼Œå…³æ³¨ä»–çš„çœŸå®éœ€æ±‚ï¼Œå°½é‡åœ¨ç°æœ‰æ¡†æ¶ä¸‹æ»¡è¶³ä»–çš„éœ€æ±‚ï¼Œä»–æ‰èƒ½ç»™å›¢é˜Ÿå¸¦æ¥æ›´å¤šçš„ä»·å€¼ã€‚ æ‘˜è¦6 â€œNo Surpriseâ€ï¼šç®¡ç†è€…åœ¨æ—¥å¸¸è¿‡ç¨‹ä¸­å‘ç°é—®é¢˜æ²¡æœ‰åŠæ—¶æé†’ å½“å‘˜å·¥çŠ¯é”™çš„æ—¶å€™ï¼Œä¸è¦æ€¥äºæ‰¹è¯„ï¼Œå› ä¸ºå¤§å¤šæ•°æ‰¹è¯„è§£å†³ä¸äº†é—®é¢˜ã€‚æ­£ç¡®çš„æ­¥éª¤æ˜¯åˆ¤æ–­è¿™äº›é”™è¯¯ä¼šäº§ç”Ÿä»€ä¹ˆå½±å“ï¼Œç„¶åå†åšå¤„ç†ã€‚ä¸€èˆ¬ä»ä¸¤ä¸ªç»´åº¦åˆ¤æ–­â€”â€”ä¸šç»©å’Œä»·å€¼è§‚ã€‚ æ„Ÿæ‚Ÿï¼š è‡ªå·±åœ¨å®é™…å·¥ä½œä¸­å°±å‡ºç°è¿‡ç±»ä¼¼çš„é—®é¢˜ï¼Œåœ¨é—®é¢˜åˆšåˆšå‡ºç°æ—¶æ²¡æœ‰åŠæ—¶å»å¤„ç†ï¼Œæœ€ç»ˆé‚£ä¸ªå›¢é˜Ÿæˆå‘˜ç¦»èŒäº†ã€‚å›è¿‡å¤´æƒ³ï¼Œå…¶å®åœ¨é—®é¢˜åˆšå‡ºç°çš„æ—¶å€™ï¼Œå°±å¤„ç†çš„è¯ï¼Œä»–åº”è¯¥åœ¨è¿‘æœŸæ˜¯ä¸ä¼šç¦»èŒçš„ã€‚ æ‘˜è¦6è®¾è®¡KPIæ—¶è¦å…³æ³¨çš„6ä¸ªè¦ç´ ï¼š ç›®æ ‡å€¼ï¼› æƒé‡ï¼› è®¡ç®—æ–¹å¼ï¼› è¯„åˆ†æ ‡å‡†ï¼› è¯„ä¼°å‘¨æœŸã€‚ æ‘˜è¦7 è£¸å¿ƒä¼šï¼ŒçœŸæ­£çš„å…³å¿ƒå‘˜å·¥ï¼Œè€Œä¸æ˜¯æµäºå½¢å¼ã€‚ æ„Ÿæ‚Ÿï¼š é˜¿é‡Œæ‰€è°“ä½†è£¸å¿ƒä¼šï¼Œè¯´åˆ°åº•è¿˜æ˜¯è¦çœŸæ­£ä½†å…³å¿ƒå›¢é˜Ÿæˆå‘˜çš„å†…å¿ƒçœŸå®æƒ³æ³•ï¼Œæµäºè¡¨é¢çš„ç”Ÿæ—¥ä¼šã€èšé¤ï¼Œå¹¶ä¸èƒ½è·Ÿå¤§å®¶äº¤å¿ƒã€‚æƒ³è¦äº¤å¿ƒï¼Œæ˜¯è¦çœŸæ­£çš„å»äº†è§£å¯¹æ–¹ï¼ŒæŠŠå¯¹æ–¹å½“æˆå¥½å“¥ä»¬ï¼Œå“¥ä»¬å®¶äººç”Ÿç—…äº†ï¼Œä½ æ˜¯è¦å…³æ€€çš„ã€‚","tags":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}],"categories":[{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"}]},{"title":"Welcome Shjlone's Blog","date":"2017-01-21T17:55:57.000Z","path":"wiki/index/","text":"è¿™æ˜¯æˆ‘çš„ä¸ªäººåšå®¢ï¼Œç”¨äºè®°å½•è‡ªå·±çš„ç‚¹ç‚¹æ»´æ»´ï¼","tags":[],"categories":[]}],"categories":[{"name":"æŠ€æœ¯å¼€å‘","slug":"æŠ€æœ¯å¼€å‘","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/"},{"name":"HuaWei","slug":"æŠ€æœ¯å¼€å‘/HuaWei","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/HuaWei/"},{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/categories/Flutter/"},{"name":"æœªåˆ†ç±»","slug":"Flutter/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Flutter/%E6%9C%AA%E5%88%86%E7%B1%BB/"},{"name":"å¼€æºåº“","slug":"Flutter/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"åŠ¨æ€åŒ–","slug":"Flutter/åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/categories/Flutter/%E5%8A%A8%E6%80%81%E5%8C%96/"},{"name":"Dart","slug":"Flutter/Dart","permalink":"http://airshu.github.io/categories/Flutter/Dart/"},{"name":"éšç¬”","slug":"éšç¬”","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/"},{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯å¼€å‘/æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"},{"name":"å¼‚æ­¥ç¼–ç¨‹","slug":"Flutter/Dart/å¼‚æ­¥ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/categories/JavaScript/"},{"name":"ReactNative","slug":"JavaScript/ReactNative","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/"},{"name":"å±æ€§å‚æ•°","slug":"JavaScript/ReactNative/å±æ€§å‚æ•°","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/%E5%B1%9E%E6%80%A7%E5%8F%82%E6%95%B0/"},{"name":"å¼€æºåº“","slug":"JavaScript/ReactNative/å¼€æºåº“","permalink":"http://airshu.github.io/categories/JavaScript/ReactNative/%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"React","slug":"JavaScript/React","permalink":"http://airshu.github.io/categories/JavaScript/React/"},{"name":"åŸºç¡€çŸ¥è¯†","slug":"JavaScript/React/åŸºç¡€çŸ¥è¯†","permalink":"http://airshu.github.io/categories/JavaScript/React/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"},{"name":"å•å…ƒæµ‹è¯•","slug":"Flutter/å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/categories/Flutter/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"},{"name":"UI","slug":"Flutter/UI","permalink":"http://airshu.github.io/categories/Flutter/UI/"},{"name":"åŒ—äº¬æ¸¸ç©æ”»ç•¥","slug":"éšç¬”/åŒ—äº¬æ¸¸ç©æ”»ç•¥","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/%E5%8C%97%E4%BA%AC%E6%B8%B8%E7%8E%A9%E6%94%BB%E7%95%A5/"},{"name":"æŠ€æœ¯æ–¹æ¡ˆ","slug":"æŠ€æœ¯å¼€å‘/æŠ€æœ¯æ–¹æ¡ˆ","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/"},{"name":"å·¥å…·è½¯ä»¶","slug":"å·¥å…·è½¯ä»¶","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"æ‚é¡¹","slug":"æŠ€æœ¯å¼€å‘/æ‚é¡¹","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9D%82%E9%A1%B9/"},{"name":"Git","slug":"æŠ€æœ¯å¼€å‘/Git","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Git/"},{"name":"æºç åˆ†æ","slug":"Flutter/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/Flutter/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"},{"name":"å›¾ç‰‡ç›¸å…³","slug":"Flutter/å¼€æºåº“/å›¾ç‰‡ç›¸å…³","permalink":"http://airshu.github.io/categories/Flutter/%E5%BC%80%E6%BA%90%E5%BA%93/%E5%9B%BE%E7%89%87%E7%9B%B8%E5%85%B3/"},{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/categories/Android/"},{"name":"æœªåˆ†ç±»","slug":"Android/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Android/%E6%9C%AA%E5%88%86%E7%B1%BB/"},{"name":"æ€§èƒ½ä¼˜åŒ–","slug":"Android/æ€§èƒ½ä¼˜åŒ–","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"},{"name":"OOMä¸“é¢˜","slug":"Android/æ€§èƒ½ä¼˜åŒ–/OOMä¸“é¢˜","permalink":"http://airshu.github.io/categories/Android/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/OOM%E4%B8%93%E9%A2%98/"},{"name":"ç¨‹åºè¯­è¨€","slug":"ç¨‹åºè¯­è¨€","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/"},{"name":"ç½‘ç»œç¼–ç¨‹","slug":"ç¨‹åºè¯­è¨€/ç½‘ç»œç¼–ç¨‹","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"name":"ç®—æ³•","slug":"ç¨‹åºè¯­è¨€/ç®—æ³•","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"ç¨‹åºè¯­è¨€/æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"Mac","slug":"å·¥å…·è½¯ä»¶/Mac","permalink":"http://airshu.github.io/categories/%E5%B7%A5%E5%85%B7%E8%BD%AF%E4%BB%B6/Mac/"},{"name":"æºç åˆ†æ","slug":"JavaScript/React/æºç åˆ†æ","permalink":"http://airshu.github.io/categories/JavaScript/React/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"},{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/categories/Python/"},{"name":"PyQt","slug":"Python/PyQt","permalink":"http://airshu.github.io/categories/Python/PyQt/"},{"name":"åŸºç¡€","slug":"Flutter/Dart/åŸºç¡€","permalink":"http://airshu.github.io/categories/Flutter/Dart/%E5%9F%BA%E7%A1%80/"},{"name":"æ ‡å‡†åº“","slug":"Flutter/UI/æ ‡å‡†åº“","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/"},{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"},{"name":"iOS","slug":"ç¨‹åºè¯­è¨€/iOS","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/iOS/"},{"name":"Androidç«¯","slug":"Flutter/Androidç«¯","permalink":"http://airshu.github.io/categories/Flutter/Android%E7%AB%AF/"},{"name":"Shell","slug":"æŠ€æœ¯å¼€å‘/Shell","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/Shell/"},{"name":"Car","slug":"éšç¬”/Car","permalink":"http://airshu.github.io/categories/%E9%9A%8F%E7%AC%94/Car/"},{"name":"widgets","slug":"Flutter/UI/æ ‡å‡†åº“/widgets","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"è¯»ä¹¦ç¬”è®°/æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"Javaç¼–ç¨‹æ€æƒ³","slug":"è¯»ä¹¦ç¬”è®°/Javaç¼–ç¨‹æ€æƒ³","permalink":"http://airshu.github.io/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/Java%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3/"},{"name":"è¡Œä¸ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/è¡Œä¸ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A1%8C%E4%B8%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"åˆ›å»ºå‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/åˆ›å»ºå‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/"},{"name":"PHP","slug":"ç¨‹åºè¯­è¨€/PHP","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/PHP/"},{"name":"Kotlin","slug":"ç¨‹åºè¯­è¨€/Kotlin","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/Kotlin/"},{"name":"C++","slug":"ç¨‹åºè¯­è¨€/C","permalink":"http://airshu.github.io/categories/%E7%A8%8B%E5%BA%8F%E8%AF%AD%E8%A8%80/C/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"çº¿ç¨‹","slug":"æ“ä½œç³»ç»Ÿ/çº¿ç¨‹","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E7%BA%BF%E7%A8%8B/"},{"name":"è¿›ç¨‹","slug":"æ“ä½œç³»ç»Ÿ/è¿›ç¨‹","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%BF%9B%E7%A8%8B/"},{"name":"æœªåˆ†ç±»","slug":"æ“ä½œç³»ç»Ÿ/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%9C%AA%E5%88%86%E7%B1%BB/"},{"name":"æœåŠ¡ç«¯","slug":"æŠ€æœ¯å¼€å‘/æœåŠ¡ç«¯","permalink":"http://airshu.github.io/categories/%E6%8A%80%E6%9C%AF%E5%BC%80%E5%8F%91/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"},{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/categories/Java/"},{"name":"é¢è¯•é¢˜","slug":"Java/é¢è¯•é¢˜","permalink":"http://airshu.github.io/categories/Java/%E9%9D%A2%E8%AF%95%E9%A2%98/"},{"name":"é›†åˆ","slug":"Java/é›†åˆ","permalink":"http://airshu.github.io/categories/Java/%E9%9B%86%E5%90%88/"},{"name":"è¿›é˜¶","slug":"Java/è¿›é˜¶","permalink":"http://airshu.github.io/categories/Java/%E8%BF%9B%E9%98%B6/"},{"name":"è™šæ‹Ÿæœº","slug":"Java/è™šæ‹Ÿæœº","permalink":"http://airshu.github.io/categories/Java/%E8%99%9A%E6%8B%9F%E6%9C%BA/"},{"name":"å¼€æºåº“","slug":"Java/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Java/%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"æœªåˆ†ç±»","slug":"Java/æœªåˆ†ç±»","permalink":"http://airshu.github.io/categories/Java/%E6%9C%AA%E5%88%86%E7%B1%BB/"},{"name":"å¹¶å‘ç¼–ç¨‹","slug":"Java/å¹¶å‘ç¼–ç¨‹","permalink":"http://airshu.github.io/categories/Java/%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/"},{"name":"åŸºç¡€","slug":"Java/åŸºç¡€","permalink":"http://airshu.github.io/categories/Java/%E5%9F%BA%E7%A1%80/"},{"name":"material","slug":"Flutter/UI/æ ‡å‡†åº“/material","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/material/"},{"name":"framework","slug":"Flutter/UI/æ ‡å‡†åº“/widgets/framework","permalink":"http://airshu.github.io/categories/Flutter/UI/%E6%A0%87%E5%87%86%E5%BA%93/widgets/framework/"},{"name":"é€†å‘","slug":"Android/é€†å‘","permalink":"http://airshu.github.io/categories/Android/%E9%80%86%E5%90%91/"},{"name":"è¿›é˜¶çŸ¥è¯†","slug":"Android/è¿›é˜¶çŸ¥è¯†","permalink":"http://airshu.github.io/categories/Android/%E8%BF%9B%E9%98%B6%E7%9F%A5%E8%AF%86/"},{"name":"å¼€æºåº“","slug":"Android/å¼€æºåº“","permalink":"http://airshu.github.io/categories/Android/%E5%BC%80%E6%BA%90%E5%BA%93/"},{"name":"åŸºç¡€","slug":"Android/åŸºç¡€","permalink":"http://airshu.github.io/categories/Android/%E5%9F%BA%E7%A1%80/"},{"name":"UI","slug":"Android/UI","permalink":"http://airshu.github.io/categories/Android/UI/"},{"name":"Jetpack","slug":"Android/Jetpack","permalink":"http://airshu.github.io/categories/Android/Jetpack/"},{"name":"NDK","slug":"Android/NDK","permalink":"http://airshu.github.io/categories/Android/NDK/"},{"name":"ç»“æ„å‹æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼/ç»“æ„å‹æ¨¡å¼","permalink":"http://airshu.github.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/"}],"tags":[{"name":"HuaWei harmonyOS","slug":"HuaWei-harmonyOS","permalink":"http://airshu.github.io/tags/HuaWei-harmonyOS/"},{"name":"Flutter","slug":"Flutter","permalink":"http://airshu.github.io/tags/Flutter/"},{"name":"Flutter åŠ¨æ€åŒ–","slug":"Flutter-åŠ¨æ€åŒ–","permalink":"http://airshu.github.io/tags/Flutter-%E5%8A%A8%E6%80%81%E5%8C%96/"},{"name":"Dart","slug":"Dart","permalink":"http://airshu.github.io/tags/Dart/"},{"name":"æ—…æ¸¸","slug":"æ—…æ¸¸","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8/"},{"name":"æ€»ç»“","slug":"æ€»ç»“","permalink":"http://airshu.github.io/tags/%E6%80%BB%E7%BB%93/"},{"name":"æŠ€æœ¯ç®¡ç†","slug":"æŠ€æœ¯ç®¡ç†","permalink":"http://airshu.github.io/tags/%E6%8A%80%E6%9C%AF%E7%AE%A1%E7%90%86/"},{"name":"TypeScript JavaScript","slug":"TypeScript-JavaScript","permalink":"http://airshu.github.io/tags/TypeScript-JavaScript/"},{"name":"TypeScript","slug":"TypeScript","permalink":"http://airshu.github.io/tags/TypeScript/"},{"name":"JavaScript","slug":"JavaScript","permalink":"http://airshu.github.io/tags/JavaScript/"},{"name":"React Native","slug":"React-Native","permalink":"http://airshu.github.io/tags/React-Native/"},{"name":"React","slug":"React","permalink":"http://airshu.github.io/tags/React/"},{"name":"JavaScript Redux","slug":"JavaScript-Redux","permalink":"http://airshu.github.io/tags/JavaScript-Redux/"},{"name":"Flutter å•å…ƒæµ‹è¯•","slug":"Flutter-å•å…ƒæµ‹è¯•","permalink":"http://airshu.github.io/tags/Flutter-%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/"},{"name":"æ—…æ¸¸ æ¸…ååŒ—å¤§","slug":"æ—…æ¸¸-æ¸…ååŒ—å¤§","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E6%B8%85%E5%8D%8E%E5%8C%97%E5%A4%A7/"},{"name":"æ—…æ¸¸ é•¿åŸ","slug":"æ—…æ¸¸-é•¿åŸ","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E9%95%BF%E5%9F%8E/"},{"name":"æ—…æ¸¸ é¢å’Œå›­","slug":"æ—…æ¸¸-é¢å’Œå›­","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E9%A2%90%E5%92%8C%E5%9B%AD/"},{"name":"æ—…æ¸¸ æ­ç‹åºœ","slug":"æ—…æ¸¸-æ­ç‹åºœ","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E6%81%AD%E7%8E%8B%E5%BA%9C/"},{"name":"æ—…æ¸¸ æ•…å®«","slug":"æ—…æ¸¸-æ•…å®«","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E6%95%85%E5%AE%AB/"},{"name":"æ—…æ¸¸ å¤©å›","slug":"æ—…æ¸¸-å¤©å›","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E5%A4%A9%E5%9D%9B/"},{"name":"æ—…æ¸¸ åä¸‰é™µ","slug":"æ—…æ¸¸-åä¸‰é™µ","permalink":"http://airshu.github.io/tags/%E6%97%85%E6%B8%B8-%E5%8D%81%E4%B8%89%E9%99%B5/"},{"name":"åŸ‹ç‚¹ æŠ€æœ¯æ–¹æ¡ˆ","slug":"åŸ‹ç‚¹-æŠ€æœ¯æ–¹æ¡ˆ","permalink":"http://airshu.github.io/tags/%E5%9F%8B%E7%82%B9-%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88/"},{"name":"æ•ˆç‡","slug":"æ•ˆç‡","permalink":"http://airshu.github.io/tags/%E6%95%88%E7%8E%87/"},{"name":"è¯»ä¹¦ç¬”è®°","slug":"è¯»ä¹¦ç¬”è®°","permalink":"http://airshu.github.io/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"},{"name":"mac","slug":"mac","permalink":"http://airshu.github.io/tags/mac/"},{"name":"Git","slug":"Git","permalink":"http://airshu.github.io/tags/Git/"},{"name":"Android","slug":"Android","permalink":"http://airshu.github.io/tags/Android/"},{"name":"æœåŠ¡ç«¯","slug":"æœåŠ¡ç«¯","permalink":"http://airshu.github.io/tags/%E6%9C%8D%E5%8A%A1%E7%AB%AF/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"http://airshu.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"name":"ç®—æ³•","slug":"ç®—æ³•","permalink":"http://airshu.github.io/tags/%E7%AE%97%E6%B3%95/"},{"name":"æ•°æ®ç»“æ„","slug":"æ•°æ®ç»“æ„","permalink":"http://airshu.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"è™šæ‹Ÿæœº","slug":"è™šæ‹Ÿæœº","permalink":"http://airshu.github.io/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"},{"name":"Qt","slug":"Qt","permalink":"http://airshu.github.io/tags/Qt/"},{"name":"PyQt","slug":"PyQt","permalink":"http://airshu.github.io/tags/PyQt/"},{"name":"PyQt5","slug":"PyQt5","permalink":"http://airshu.github.io/tags/PyQt5/"},{"name":"Qt QtWebEngine","slug":"Qt-QtWebEngine","permalink":"http://airshu.github.io/tags/Qt-QtWebEngine/"},{"name":"iOS","slug":"iOS","permalink":"http://airshu.github.io/tags/iOS/"},{"name":"Shell","slug":"Shell","permalink":"http://airshu.github.io/tags/Shell/"},{"name":"Car","slug":"Car","permalink":"http://airshu.github.io/tags/Car/"},{"name":"æ·±å…¥ç†è§£è®¡ç®—æœº","slug":"æ·±å…¥ç†è§£è®¡ç®—æœº","permalink":"http://airshu.github.io/tags/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%AE%A1%E7%AE%97%E6%9C%BA/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"è®¾è®¡æ¨¡å¼","permalink":"http://airshu.github.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"},{"name":"PHP","slug":"PHP","permalink":"http://airshu.github.io/tags/PHP/"},{"name":"Kotlin","slug":"Kotlin","permalink":"http://airshu.github.io/tags/Kotlin/"},{"name":"C++","slug":"C","permalink":"http://airshu.github.io/tags/C/"},{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"http://airshu.github.io/tags/%E6%8A%80%E6%9C%AF/"},{"name":"è®¡ç®—æœºåŸºç¡€","slug":"è®¡ç®—æœºåŸºç¡€","permalink":"http://airshu.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"},{"name":"æŒ‰é”®ç²¾çµ","slug":"æŒ‰é”®ç²¾çµ","permalink":"http://airshu.github.io/tags/%E6%8C%89%E9%94%AE%E7%B2%BE%E7%81%B5/"},{"name":"ffmpeg","slug":"ffmpeg","permalink":"http://airshu.github.io/tags/ffmpeg/"},{"name":"æ“ä½œç³»ç»Ÿ","slug":"æ“ä½œç³»ç»Ÿ","permalink":"http://airshu.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"},{"name":"linux","slug":"linux","permalink":"http://airshu.github.io/tags/linux/"},{"name":"PC","slug":"PC","permalink":"http://airshu.github.io/tags/PC/"},{"name":"Rx","slug":"Rx","permalink":"http://airshu.github.io/tags/Rx/"},{"name":"charles","slug":"charles","permalink":"http://airshu.github.io/tags/charles/"},{"name":"Python","slug":"Python","permalink":"http://airshu.github.io/tags/Python/"},{"name":"Java","slug":"Java","permalink":"http://airshu.github.io/tags/Java/"},{"name":"Javaé›†åˆ","slug":"Javaé›†åˆ","permalink":"http://airshu.github.io/tags/Java%E9%9B%86%E5%90%88/"},{"name":"JVM","slug":"JVM","permalink":"http://airshu.github.io/tags/JVM/"},{"name":"IO","slug":"IO","permalink":"http://airshu.github.io/tags/IO/"},{"name":"RecyclerView","slug":"RecyclerView","permalink":"http://airshu.github.io/tags/RecyclerView/"}]}