---
title: 组合模式
date: 2018-06-01 10:01:01
toc: true
tags: 
---

## 定义

组合模式（Composite Pattern）：将对象组合成树形结构以表示“部分-整体”的层次结构，使得用户对单个对象和组合对象的使用具有一致性。

## 类图

![](./1.jpg)

### 角色

- Component（抽象构件）：它可以是接口或抽象类，为叶子构件和容器构件对象声明接口，在该角色中可以包含所有子类共有行为的声明和实现。在抽象构件中定义了访问及管理它的子构件的方法，如增加子构件、删除子构件、获取子构件等。
- Leaf（叶子构件）：它在组合结构中表示叶子节点对象，叶子节点没有子节点，它实现了在抽象构件中定义的行为。对于那些访问及管理子构件的方法，可以通过异常等方式进行处理。
- Composite（容器构件）：它在组合结构中表示容器节点对象，容器节点包含子节点，其子节点可以是叶子节点，也可以是容器节点，它提供一个集合用于存储子节点，实现了在抽象构件中定义的行为，包括那些访问及管理子构件的方法，在其业务方法中可以递归调用其子节点的业务方法。

### 优缺点

**优点**

- 满足`开闭原则`，在组合模式中增加新的容器构件和叶子构件都很方便，无须对现有类库进行任何修改

## 使用场景

- 树形结构，比如文件夹的管理




## 参考

- [https://refactoringguru.cn/design-patterns/composite](https://refactoringguru.cn/design-patterns/composite)
- [https://www.cnblogs.com/chenssy/p/3299719.html](https://www.cnblogs.com/chenssy/p/3299719.html)
