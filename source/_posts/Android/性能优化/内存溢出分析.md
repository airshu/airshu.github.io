---
title: 内存溢出分析
tags: Android
toc: true
---


生命周期不一致，导致内存泄漏



- 堆內存溢出
- 栈內存溢出

## 可能出现的场景

### 静态变量导致的内存泄漏
    
#### 描述

    比如某个静态变量持有Activity，则当Activity生命周期结束时不会被释放

#### 解决办法：

  在生命周期结束时释放静态变量
  
### 单例模式导致的内存泄漏

#### 描述  

单例持有Activity

#### 解决办法

###- 属性动画导致的内存泄漏

### for循环中不停的创建局部变量


### 非静态内部类（包括匿名内部类）默认会持有外部类的引用，当非静态内部类对象的生命周期
比外部类对象的生命周期长时，可能会导致内存泄漏。常出现于Handler、Thread、AsyncTask
  
解决方案：handler用static声明，使用软引用。


### 未取消注册或回调导致的内存泄漏

    比如在Activity中注册广播，如果Activity销毁后不取消注册，那么这个广播就会一直存在系统中

