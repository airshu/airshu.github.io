---
title: 曲线调整工具与直方图
toc: false
date: 2017-03-21 15:05:28
tags: [图像格式]
---

## 引入

**「曲线工具」**这个东西，经常修图或做视频的人一定不陌生，它在很多图像视频工具中都有出现，比如 AE、PR、PS、LR 等中；其强大之处自不用我多说，这里主要针对还未入门的 **零基础** 的朋友作一个基本的介绍和认识。

![PS中的曲线工具](./PS曲线工具.jpg)

在谈到「曲线工具」之前，不得不先谈到图像**「直方图」**这个东西；



## 「直方图」

简单的来说，**直方图是统计图片中按照不同的明暗级别从黑到白（从暗到明），统计在某个亮度的像素数量有多少。**（以下谈到直方图，若无特指，那均指 RGB 全通道亮度直方图，不谈论色相）

我们先看看 PS 中的直方图是什么样的；

![PS中的图像直方图](./PS图像直方图.jpg)

四个框中，最上面就是全通道的直方图，下面三个依次是 RGB 三个通道的直方图；**直方图的横轴表示亮度级别**，左边表示最暗，向右依次变亮，最右边表示最亮最白；**纵轴表示像素数量**。

我们再来看一个简化版的示意图；

![直方图简化示意](./直方图坐标轴解释.jpg)

举个例子，假设上面这张简化的直方图是统计一张 **只有 22 个像素**的图片，那么可以从直方图中看到 **统计结果**：

纯黑的像素有 3 个、灰度一级的像素有 2 个、中度灰色的有 5 个、 …… 、纯白的有 2 个。

嗯，上面这个图结合例子很好理解吧，那让我们**把它扩展一下，道理还是不变，只是把分级加精细一点，像素加多一点**，导出一张真实一点的我们实际中常见样子的直方图；

![直方图常见形式示例](./直方图常见形式示例.jpg)

直观看出，这张直方图所代表的原始图片中，**中等偏亮的像素点在整个图片中占主体**；也就是图片整体颜色是偏亮系的，看起来不是暗色调的。

**类似的，假设图片直方图中只形成了一个山峰，如果山峰位置偏右边，就表示图片整体是暗色调的；如果山峰位置偏左，就表示图片整体看起来是亮色系的，整体色调是明亮的。**

【这里注意，摄影和修图的重点都是自己到底想表达什么，不要过度纠结于传统观念，就认为山峰靠右就一定是曝光失误造成欠曝一定要调整曝光等等；主要是看自己的想法，有些场景可能就需要这样，不是失误欠曝，比如表现夜空中的明月或星空。】

说完直方图，我们就可以回过来看**「曲线工具」**了。



## 「曲线工具」

![PS中的曲线工具](./PS曲线工具.jpg)

再看到曲线工具，就要注意调整框内，背景中的 **阴影山峰** 了，这就是刚刚讲的 **直方图**。

**「曲线工具」** 其实是 **曲线调整 + 直方图**，两者 **横坐标共用，含义都一样**，指 **亮度分级**；

**但纵坐标含义就不一样了**。

**曲线工具的纵坐标也是指亮度分级，没错，纵坐标和横坐标的含义与数值分布完全一样！**

再看上面这条线，虽然名字叫「曲线工具」，但是打开工具初始状态下这根线就是直线，只不过可以添加关键点来把直线拖成曲线。

初始状态下的直线，是从左下连到右上的，相当于是从横纵轴都最暗的地方，连到横纵轴都最亮的地方；

也就是： 

$$y = f(x) = x , (0 \leq x \leq 255)$$

现在我们再说一下纵坐标 y 和横坐标 x 的一点区别；**这条线上一个点的横坐标值，表示图片上的某个原始亮度值，纵坐标表示这个原始亮度经过调整后的亮度变成了多少。**

合起来的意思就是，这条曲线（或直线）表示对原图色彩的一种映射，**把原图的每个色彩亮度，映射到现在的每个对应的色彩亮度**，即：

$$y = f(x) , (0 \leq x \leq 255 , x = 原始亮度 , y = 调整后亮度)$$

比如说常见的 S 型曲线可以加深对比度，其实就是把原本暗的变得更暗，把原本亮的变得更亮，所以对比度就变高了。

基于这个道理，接下来解释几种基本曲线的调整方式；

### 初始直线

![初始直线](./曲线调整-初始.jpg)

初始直线相当于原本什么亮度现在还是什么亮度，什么都没变，就是画面原本的样子。

### 上凸曲线

![上凸曲线把整个画面变亮](./曲线调整-上凸-加亮.jpg)

对比原始图片，现在用的上凸曲线除了端点的每个点都在 $y = x$ 直线上方，也就是不管是暗的还是亮的每个点都不同程度的加亮了一些，所以整个画面看起来都亮了。

### 下凸曲线

![下凸曲线将画面整体调暗](./曲线调整-下凸-减暗.jpg)

与上凸曲线刚好相反，下凸曲线都在 $y = x$ 直线之下，每个点都不同程度的调暗了一点，所以整体画面变暗。

### S 型曲线

![S 型曲线提高画面对比度](./曲线调整-S型-提高对比度.jpg)

S 型曲线最常见，通常修图都会先拉起对比度，也就是调了个 S 型曲线；刚刚也说过，S 型曲线左边暗部在 $y = x$ 之下，右边亮部在 $y = x$ 之上，相当于把暗的点调的更暗，把亮的点调得更亮，于是明暗差异变大，对比度也就提高了。

### 反 S 型曲线

![反 S 型曲线降低对比度](./曲线调整-反S型-降低对比度.jpg)

反 S 型曲线与 S 型曲线方向看起来相反，作用也刚好相反，它是把暗部调亮，亮部调暗，明暗差异变小，用来降低对比度的。

### 反对角线

![反对角线颜色反相](./曲线调整-反对角线-反相.jpg)

对比初始直线，这里反对角线其实就是 $y = -x$ 直线，相当于把所有明暗亮度对称颠倒过来，这里的亮度也包括相位，于是所有颜色反相了，看起来就是将图片反色处理了。



## 参考资料
> - [如何读懂直方图](http://academy.fengniao.com/322/3228845_all.html#p3228845)
> - [如何看懂照片的直方图？](https://www.zhihu.com/question/20511799)
> - [『摄影入门』怎样知道照片曝光是否合适？直方图！](http://www.nphoto.net/news/2010-04/28/6e47b1395e6f0f5d.shtml)
> - [教你轻松掌握PS曲线工具](http://www.uisdc.com/ps-curve-skill)
> - [ps曲线工具的详细使用方法介绍](http://www.jb51.net/photoshop/465856.html)
