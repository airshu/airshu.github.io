---
title: 注解
date: 2021-05-29
toc: true
tags:
---

Java从1.5引入了注解(Annotation)，使得Java具有`动态语言`的特性。

Java中常用的注解有：

- @Override
- @Deprecated
- @SuppressWarnings



## 元注解

用来修饰注解的注解

- @Documented
- @Retention
- @Target
- @Inherited

### @Documented

用于描述其它类型的annotation应该被作为被标注的程序成员的公共API，因此可以被例如javadoc此类的工具文档化。

### @Retention

- SOURCE:源文件保留，在编译器进行编译时它将被丢弃忽视；
- CLASS:class保留，并不会被加载到 JVM 中；
- RUNTIME:运行时保留；

### @Target

- CONSTRUCTOR:构造器；
- FIELD:实例；
- LOCAL_VARIABLE:局部变量；
- METHOD:方法；
- PACKAGE:包；
- PARAMETER:参数;
- TYPE:类、接口(包括注解类型) 或enum声明。

### @Inherited

用于描述某个被标注的类型是可被继承的。如果一个使用了@Inherited修饰的annotation类型被用于一个class，则这个annotation将被用于该class的子类。


## 自定义注解注意事项

```java
package com.shjlone.anno;

enum Lamp {
    RED, GREEN, YELLOW
}

public @interface MyAnno {
//基本数据类型
    int num() default 1;
    //String类型
    String value();
    //枚举类型
    Lamp lamp();
    //注解类型
    MyAnno2 myAnno2();
    //以上类型的数组
    String[] values();
    Lamp[] lamps();
    MyAnno2[] myAnno2s();
    int[] nums();
}

```

**注解属性的返回值类型必须是以下几种：**

- 基本数据类型
- String类型
- 枚举类型
- 注解
- 以上类型的数组


如果返回值没有默认值，则在使用注解时必须显示设置



## APT

APT 即为 Annotation Processing Tool，它是 javac 的一个工具，中文意思为编译 时注解处理器。APT 可以用来在编译时扫描和处理注解。
获取注解及生成代码都是在代码编译时候完成的，相比反射在运行时处理注解大大提高了程序性能。APT 的核心是 AbstractProcessor 类。

## 参考

- [https://bbs.huaweicloud.com/blogs/173996](https://bbs.huaweicloud.com/blogs/173996)
- [https://www.jianshu.com/p/5cac4cb9be54](https://www.jianshu.com/p/5cac4cb9be54)
- [Java进阶--编译时注解处理器（APT）详解](https://juejin.cn/post/6844903923233341453)
