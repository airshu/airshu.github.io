---
title: 文本处理
toc: true
tags: Flutter
---


## TextPainter



### 参考

- [How to Use a TextPainter to Draw Text In Flutter?](https://flutteragency.com/how-to-use-a-textpainter-to-draw-text-in-flutter/)

## 文本的折叠


```dart

//计算最后一个文字的位置
LayoutBuilder(
    builder: (context, size) {
        final span = TextSpan(text: widget.text, style: style);
        final tp = TextPainter(
            text: span, maxLines: widget.maxLines, textDirection: TextDirection.ltr);//设置最大行数
        tp.layout(maxWidth: size.maxWidth);
        final pos = tp.getPositionForOffset(Offset(tp.size.width, tp.size.height));//获取文字所占位置
        String txt = widget.text.substring(0, pos.offset);//获取当前范围的文字
    }
);
```

### 参考

- [Text widget with read more or expand feature - Flutter](https://dev.to/rrtutors/text-widget-with-read-more-or-expand-feature-flutter-nbk)