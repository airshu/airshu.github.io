---
title: 状态管理
toc: true
tags: Flutter
---


状态管理解决的问题：

- 状态保存哪里
- 状态如何获取
- UI如何更新
- 如何改变状态



## setState

优点：
- 简单场景下特别适用，逻辑简单，易懂易实现
- 所见即所得，效率比较高

缺点:
- 逻辑与视图耦合严重，复杂逻辑下可维护性很差
- 数据传输基于依赖传递，层级较深情况下不易维护，可读性差

使用场景：
- Widget内部的状态管理

## scoped_model


## provider

### 获取信息

```

///使用Provider.of
Widget build(BuildContext context) {
    return Container(child: MyText());
}

class MyText extends StatelessWidget {
    @override
    Widget build(BuildContext context) {
        final text = Provider.of<String>(context);
        return Text(text);
    }
}

///使用Consumer
Widget getWidget2(BuildContext context) {
return Consumer<BusinessPattern>(builder: (context, businessModel, child) {
  switch (businessModel.currentState) {
    case PatternState.none:
      return  Text("无模式");
      break;
    case PatternState.normal:
      return Text("正常模式");
      break;
    case PatternState.small:
      return Text("小屏模式");
      break;
    case PatternState.overview:
      return Text("全屏模式");
      break;
    default:
      return Text("其他模式");
      return SizedBox();
  }
});
}

///使用Selector
Widget getWidget4(BuildContext context) {
return Selector<BusinessPattern, PatternState>(
selector: (context, businessPattern) =>
businessPattern.currentState,
builder: (context, state, child) {
  switch (state) {
    case PatternState.none:
      return  Text("无模式");
      break;
    case PatternState.normal:
      return Text("正常模式");
      break;
    case PatternState.small:
      return Text("小屏模式");
      break;
    case PatternState.overview:
      return Text("全屏模式");
      break;
    default:
      return Text("其他模式");
      return SizedBox();
  }
}
);

```

## flutter_bloc

## flutter_redux


## flutter_mobx

[https://mobx.netlify.com/getting-started](https://mobx.netlify.com/getting-started)

## flutter_hooks


## 参考

- [](https://segmentfault.com/a/1190000040543449)
