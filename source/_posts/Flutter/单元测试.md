---
title: 单元测试
toc: true
tags: Flutter 单元测试
---

单元测试的作用？

- 保证代码质量，当一个方法在某个版本进行了调整，如果对应的单元测试无法通过，说明这个方法的改动有问题。单元测试中也能包含很多边界条件，甚至可以把测试用例的场景都包含，这样就相当于做了一遍测试的工作，而且可以复用检查，下次迭代时再运行一遍，说不定能发现新问题
- 单元测试阶段发现bug的处理时间相对后期测试发现反馈给研发，处理的时间要短很多，提高效率


单元测试做的好不好，在于测试用例的有效性

测试的评价指标：

- 通过率
- 覆盖率
- 有测试用例






## 测试方法

- Code Review
- 静态代码扫描
- 单元测试用例编写：综合运用黑盒测试、白盒测试方法来进行测试用例设计



## 测试用例规范




## 测试网络请求

## 测试UI

## 测试Bloc



## Flutter单元测试库

```yaml
dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_driver:
    sdk: flutter
  mockito:
  http_mock_adapter:  
  bloc_test:
```


### flutter_test

Flutter自带的测试库，跟其他语言类似，提供了一些测试的方法，如expect、group、test、testWidgets、setUp、tearDown等。



### mockito

- [https://pub.dev/packages/mockito](https://pub.dev/packages/mockito)

mockito库用来模拟数据。 使用Mockito产生的mock类，需要添加build_runner依赖


### http_mock_adapter

### bloc_test




## 参考

- [5个关键问题让单元测试的价值最大化](https://mp.weixin.qq.com/s/8JC_vaFOgiJPIH7yfbP25A)
- [单元测试介绍](https://flutter.cn/docs/cookbook/testing/unit/introduction)
- [如何写出有效的单元测试](https://mp.weixin.qq.com/s/Y75fSX92kysSmYrhEH6QFQ)